if(function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(f,t){function e(t,e){return e.toUpperCase()}var d=[],u=d.slice,g=d.concat,a=d.push,o=d.indexOf,i={},n=i.toString,m=i.hasOwnProperty,v={},r="1.11.2",C=function(t,e){return new C.fn.init(t,e)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,l=/^-ms-/,c=/-([\da-z])/gi;function h(t){var e=t.length,i=C.type(t);return"function"!==i&&!C.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t))}C.fn=C.prototype={jquery:r,constructor:C,selector:"",length:0,toArray:function(){return u.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:u.call(this)},pushStack:function(t){var e=C.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return C.each(this,t,e)},map:function(i){return this.pushStack(C.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:a,sort:d.sort,splice:d.splice},C.extend=C.fn.extend=function(){var t,e,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||C.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(o=arguments[a]))for(n in o)t=s[n],s!==(i=o[n])&&(c&&i&&(C.isPlainObject(i)||(e=C.isArray(i)))?(r=e?(e=!1,t&&C.isArray(t)?t:[]):t&&C.isPlainObject(t)?t:{},s[n]=C.extend(c,r,i)):void 0!==i&&(s[n]=i));return s},C.extend({expando:"jQuery"+(r+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===C.type(t)},isArray:Array.isArray||function(t){return"array"===C.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!C.isArray(t)&&0<=t-parseFloat(t)+1},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==C.type(t)||t.nodeType||C.isWindow(t))return!1;try{if(t.constructor&&!m.call(t,"constructor")&&!m.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(v.ownLast)for(e in t)return m.call(t,e);for(e in t);return void 0===e||m.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?i[n.call(t)]||"object":typeof t},globalEval:function(t){t&&C.trim(t)&&(f.execScript||function(t){f.eval.call(f,t)})(t)},camelCase:function(t){return t.replace(l,"ms-").replace(c,e)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var n=0,o=t.length,r=h(t);if(i){if(r)for(;n<o&&!1!==e.apply(t[n],i);n++);else for(n in t)if(!1===e.apply(t[n],i))break}else if(r)for(;n<o&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(s,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(h(Object(t))?C.merge(i,"string"==typeof t?[t]:t):a.call(i,t)),i},inArray:function(t,e,i){var n;if(e){if(o)return o.call(e,t,i);for(n=e.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;)t[o++]=e[n++];if(i!=i)for(;void 0!==e[n];)t[o++]=e[n++];return t.length=o,t},grep:function(t,e,i){for(var n=[],o=0,r=t.length,s=!i;o<r;o++)!e(t[o],o)!=s&&n.push(t[o]);return n},map:function(t,e,i){var n,o=0,r=t.length,s=[];if(h(t))for(;o<r;o++)null!=(n=e(t[o],o,i))&&s.push(n);else for(o in t)null!=(n=e(t[o],o,i))&&s.push(n);return g.apply([],s)},guid:1,proxy:function(t,e){var i,n,o;return"string"==typeof e&&(o=t[e],e=t,t=o),C.isFunction(t)?(i=u.call(arguments,2),(n=function(){return t.apply(e||this,i.concat(u.call(arguments)))}).guid=t.guid=t.guid||C.guid++,n):void 0},now:function(){return+new Date},support:v}),C.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){i["[object "+e+"]"]=e.toLowerCase()});var p=function(i){function d(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(65536+n):String.fromCharCode(n>>10|55296,1023&n|56320)}function n(){v()}var t,f,_,r,o,g,h,m,E,c,u,v,w,s,y,b,a,p,C,T="sizzle"+1*new Date,x=i.document,D=0,I=0,l=rt(),O=rt(),R=rt(),k=function(t,e){return t===e&&(u=!0),0},S={}.hasOwnProperty,e=[],A=e.pop,M=e.push,N=e.push,K=e.slice,L=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",H=B.replace("w","w#"),z="\\["+F+"*("+B+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+F+"*\\]",$=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",V=new RegExp(F+"+","g"),j=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),G=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),q=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),U=new RegExp($),Y=new RegExp("^"+H+"$"),X={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Z=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,tt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,it=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig");try{N.apply(e=K.call(x.childNodes),x.childNodes),e[x.childNodes.length].nodeType}catch(t){N={apply:e.length?function(t,e){M.apply(t,K.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function ot(t,e,i,n){var o,r,s,a,l,c,u,d,h,p;if((e?e.ownerDocument||e:x)!==w&&v(e),i=i||[],a=(e=e||w).nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return i;if(!n&&y){if(11!==a&&(o=tt.exec(t)))if(s=o[1]){if(9===a){if(!(r=e.getElementById(s))||!r.parentNode)return i;if(r.id===s)return i.push(r),i}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&C(e,r)&&r.id===s)return i.push(r),i}else{if(o[2])return N.apply(i,e.getElementsByTagName(t)),i;if((s=o[3])&&f.getElementsByClassName)return N.apply(i,e.getElementsByClassName(s)),i}if(f.qsa&&(!b||!b.test(t))){if(d=u=T,h=e,p=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=g(t),(u=e.getAttribute("id"))?d=u.replace(it,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",l=c.length;l--;)c[l]=d+gt(c[l]);h=et.test(t)&&pt(e.parentNode)||e,p=c.join(",")}if(p)try{return N.apply(i,h.querySelectorAll(p)),i}catch(t){}finally{u||e.removeAttribute("id")}}}return m(t.replace(j,"$1"),e,i,n)}function rt(){var n=[];return function t(e,i){return n.push(e+" ")>_.cacheLength&&delete t[n.shift()],t[e+" "]=i}}function st(t){return t[T]=!0,t}function at(t){var e=w.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function lt(t,e){for(var i=t.split("|"),n=t.length;n--;)_.attrHandle[i[n]]=e}function ct(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ut(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function dt(i){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===i}}function ht(s){return st(function(r){return r=+r,st(function(t,e){for(var i,n=s([],t.length,r),o=n.length;o--;)t[i=n[o]]&&(t[i]=!(e[i]=t[i]))})})}function pt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in f=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},v=ot.setDocument=function(t){var e,i,l=t?t.ownerDocument||t:x;return l!==w&&9===l.nodeType&&l.documentElement?(s=(w=l).documentElement,(i=l.defaultView)&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",n,!1):i.attachEvent&&i.attachEvent("onunload",n)),y=!o(l),f.attributes=at(function(t){return t.className="i",!t.getAttribute("className")}),f.getElementsByTagName=at(function(t){return t.appendChild(l.createComment("")),!t.getElementsByTagName("*").length}),f.getElementsByClassName=J.test(l.getElementsByClassName),f.getById=at(function(t){return s.appendChild(t).id=T,!l.getElementsByName||!l.getElementsByName(T).length}),f.getById?(_.find.ID=function(t,e){if(void 0!==e.getElementById&&y){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},_.filter.ID=function(t){var e=t.replace(nt,d);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var i=t.replace(nt,d);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===i}}),_.find.TAG=f.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):f.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,r=e.getElementsByTagName(t);if("*"!==t)return r;for(;i=r[o++];)1===i.nodeType&&n.push(i);return n},_.find.CLASS=f.getElementsByClassName&&function(t,e){return y?e.getElementsByClassName(t):void 0},a=[],b=[],(f.qsa=J.test(l.querySelectorAll))&&(at(function(t){s.appendChild(t).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&b.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||b.push("\\["+F+"*(?:value|"+P+")"),t.querySelectorAll("[id~="+T+"-]").length||b.push("~="),t.querySelectorAll(":checked").length||b.push(":checked"),t.querySelectorAll("a#"+T+"+*").length||b.push(".#.+[+~]")}),at(function(t){var e=l.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&b.push("name"+F+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||b.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),b.push(",.*:")})),(f.matchesSelector=J.test(p=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&at(function(t){f.disconnectedMatch=p.call(t,"div"),p.call(t,"[s!='']:x"),a.push("!=",$)}),b=b.length&&new RegExp(b.join("|")),a=a.length&&new RegExp(a.join("|")),e=J.test(s.compareDocumentPosition),C=e||J.test(s.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},k=e?function(t,e){if(t===e)return u=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!f.sortDetached&&e.compareDocumentPosition(t)===i?t===l||t.ownerDocument===x&&C(x,t)?-1:e===l||e.ownerDocument===x&&C(x,e)?1:c?L(c,t)-L(c,e):0:4&i?-1:1)}:function(t,e){if(t===e)return u=!0,0;var i,n=0,o=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!o||!r)return t===l?-1:e===l?1:o?-1:r?1:c?L(c,t)-L(c,e):0;if(o===r)return ct(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;s[n]===a[n];)n++;return n?ct(s[n],a[n]):s[n]===x?-1:a[n]===x?1:0},l):w},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==w&&v(t),e=e.replace(q,"='$1']"),!(!f.matchesSelector||!y||a&&a.test(e)||b&&b.test(e)))try{var i=p.call(t,e);if(i||f.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return 0<ot(e,w,null,[t]).length},ot.contains=function(t,e){return(t.ownerDocument||t)!==w&&v(t),C(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==w&&v(t);var i=_.attrHandle[e.toLowerCase()],n=i&&S.call(_.attrHandle,e.toLowerCase())?i(t,e,!y):void 0;return void 0!==n?n:f.attributes||!y?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,i=[],n=0,o=0;if(u=!f.detectDuplicates,c=!f.sortStable&&t.slice(0),t.sort(k),u){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return c=null,t},r=ot.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=r(e);return i},(_=ot.selectors={cacheLength:50,createPseudo:st,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(nt,d),t[3]=(t[3]||t[4]||t[5]||"").replace(nt,d),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&U.test(i)&&(e=g(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(nt,d).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=l[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&l(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(i,n,o){return function(t){var e=ot.attr(t,i);return null==e?"!="===n:!n||(e+="","="===n?e===o:"!="===n?e!==o:"^="===n?o&&0===e.indexOf(o):"*="===n?o&&-1<e.indexOf(o):"$="===n?o&&e.slice(-o.length)===o:"~="===n?-1<(" "+e.replace(V," ")+" ").indexOf(o):"|="===n&&(e===o||e.slice(0,o.length+1)===o+"-"))}},CHILD:function(p,t,e,f,g){var m="nth"!==p.slice(0,3),v="last"!==p.slice(-4),y="of-type"===t;return 1===f&&0===g?function(t){return!!t.parentNode}:function(t,e,i){var n,o,r,s,a,l,c=m!=v?"nextSibling":"previousSibling",u=t.parentNode,d=y&&t.nodeName.toLowerCase(),h=!i&&!y;if(u){if(m){for(;c;){for(r=t;r=r[c];)if(y?r.nodeName.toLowerCase()===d:1===r.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[v?u.firstChild:u.lastChild],v&&h){for(a=(n=(o=u[T]||(u[T]={}))[p]||[])[0]===D&&n[1],s=n[0]===D&&n[2],r=a&&u.childNodes[a];r=++a&&r&&r[c]||(s=a=0)||l.pop();)if(1===r.nodeType&&++s&&r===t){o[p]=[D,a,s];break}}else if(h&&(n=(t[T]||(t[T]={}))[p])&&n[0]===D)s=n[1];else for(;(r=++a&&r&&r[c]||(s=a=0)||l.pop())&&((y?r.nodeName.toLowerCase()!==d:1!==r.nodeType)||!++s||(h&&((r[T]||(r[T]={}))[p]=[D,s]),r!==t)););return(s-=g)===f||s%f==0&&0<=s/f}}},PSEUDO:function(t,r){var e,s=_.pseudos[t]||_.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return s[T]?s(r):1<s.length?(e=[t,t,"",r],_.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,e){for(var i,n=s(t,r),o=n.length;o--;)t[i=L(t,n[o])]=!(e[i]=n[o])}):function(t){return s(t,0,e)}):s}},pseudos:{not:st(function(t){var n=[],o=[],a=h(t.replace(j,"$1"));return a[T]?st(function(t,e,i,n){for(var o,r=a(t,null,n,[]),s=t.length;s--;)(o=r[s])&&(t[s]=!(e[s]=o))}):function(t,e,i){return n[0]=t,a(n,null,i,o),n[0]=null,!o.pop()}}),has:st(function(e){return function(t){return 0<ot(e,t).length}}),contains:st(function(e){return e=e.replace(nt,d),function(t){return-1<(t.textContent||t.innerText||r(t)).indexOf(e)}}),lang:st(function(i){return Y.test(i||"")||ot.error("unsupported lang: "+i),i=i.replace(nt,d).toLowerCase(),function(t){var e;do{if(e=y?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===i||0===e.indexOf(i+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===s},focus:function(t){return t===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ht(function(){return[0]}),last:ht(function(t,e){return[e-1]}),eq:ht(function(t,e,i){return[i<0?i+e:i]}),even:ht(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:ht(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:ht(function(t,e,i){for(var n=i<0?i+e:i;0<=--n;)t.push(n);return t}),gt:ht(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[t]=ut(t);for(t in{submit:!0,reset:!0})_.pseudos[t]=dt(t);function ft(){}function gt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function mt(s,t,e){var a=t.dir,l=e&&"parentNode"===a,c=I++;return t.first?function(t,e,i){for(;t=t[a];)if(1===t.nodeType||l)return s(t,e,i)}:function(t,e,i){var n,o,r=[D,c];if(i){for(;t=t[a];)if((1===t.nodeType||l)&&s(t,e,i))return!0}else for(;t=t[a];)if(1===t.nodeType||l){if((n=(o=t[T]||(t[T]={}))[a])&&n[0]===D&&n[1]===c)return r[2]=n[2];if((o[a]=r)[2]=s(t,e,i))return!0}}}function vt(o){return 1<o.length?function(t,e,i){for(var n=o.length;n--;)if(!o[n](t,e,i))return!1;return!0}:o[0]}function yt(t,e,i,n,o){for(var r,s=[],a=0,l=t.length,c=null!=e;a<l;a++)!(r=t[a])||i&&!i(r,n,o)||(s.push(r),c&&e.push(a));return s}function bt(p,f,g,m,v,t){return m&&!m[T]&&(m=bt(m)),v&&!v[T]&&(v=bt(v,t)),st(function(t,e,i,n){var o,r,s,a=[],l=[],c=e.length,u=t||function(t,e,i){for(var n=0,o=e.length;n<o;n++)ot(t,e[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),d=!p||!t&&f?u:yt(u,a,p,i,n),h=g?v||(t?p:c||m)?[]:e:d;if(g&&g(d,h,i,n),m)for(o=yt(h,l),m(o,[],i,n),r=o.length;r--;)(s=o[r])&&(h[l[r]]=!(d[l[r]]=s));if(t){if(v||p){if(v){for(o=[],r=h.length;r--;)(s=h[r])&&o.push(d[r]=s);v(null,h=[],o,n)}for(r=h.length;r--;)(s=h[r])&&-1<(o=v?L(t,s):a[r])&&(t[o]=!(e[o]=s))}}else h=yt(h===e?h.splice(c,h.length):h),v?v(null,e,h,n):N.apply(e,h)})}function _t(t){for(var o,e,i,n=t.length,r=_.relative[t[0].type],s=r||_.relative[" "],a=r?1:0,l=mt(function(t){return t===o},s,!0),c=mt(function(t){return-1<L(o,t)},s,!0),u=[function(t,e,i){var n=!r&&(i||e!==E)||((o=e).nodeType?l(t,e,i):c(t,e,i));return o=null,n}];a<n;a++)if(e=_.relative[t[a].type])u=[mt(vt(u),e)];else{if((e=_.filter[t[a].type].apply(null,t[a].matches))[T]){for(i=++a;i<n&&!_.relative[t[i].type];i++);return bt(1<a&&vt(u),1<a&&gt(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(j,"$1"),e,a<i&&_t(t.slice(a,i)),i<n&&_t(t=t.slice(i)),i<n&&gt(t))}u.push(e)}return vt(u)}return ft.prototype=_.filters=_.pseudos,_.setFilters=new ft,g=ot.tokenize=function(t,e){var i,n,o,r,s,a,l,c=O[t+" "];if(c)return e?0:c.slice(0);for(s=t,a=[],l=_.preFilter;s;){for(r in i&&!(n=W.exec(s))||(n&&(s=s.slice(n[0].length)||s),a.push(o=[])),i=!1,(n=G.exec(s))&&(i=n.shift(),o.push({value:i,type:n[0].replace(j," ")}),s=s.slice(i.length)),_.filter)!(n=X[r].exec(s))||l[r]&&!(n=l[r](n))||(i=n.shift(),o.push({value:i,type:r,matches:n}),s=s.slice(i.length));if(!i)break}return e?s.length:s?ot.error(t):O(t,a).slice(0)},h=ot.compile=function(t,e){var i,n=[],o=[],r=R[t+" "];if(!r){for(i=(e=e||g(t)).length;i--;)(r=_t(e[i]))[T]?n.push(r):o.push(r);(r=R(t,function(m,v){function t(t,e,i,n,o){var r,s,a,l=0,c="0",u=t&&[],d=[],h=E,p=t||b&&_.find.TAG("*",o),f=D+=null==h?1:Math.random()||.1,g=p.length;for(o&&(E=e!==w&&e);c!==g&&null!=(r=p[c]);c++){if(b&&r){for(s=0;a=m[s++];)if(a(r,e,i)){n.push(r);break}o&&(D=f)}y&&((r=!a&&r)&&l--,t&&u.push(r))}if(l+=c,y&&c!==l){for(s=0;a=v[s++];)a(u,d,e,i);if(t){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=A.call(n));d=yt(d)}N.apply(n,d),o&&!t&&0<d.length&&1<l+v.length&&ot.uniqueSort(n)}return o&&(D=f,E=h),u}var y=0<v.length,b=0<m.length;return y?st(t):t}(o,n))).selector=t}return r},m=ot.select=function(t,e,i,n){var o,r,s,a,l,c="function"==typeof t&&t,u=!n&&g(t=c.selector||t);if(i=i||[],1===u.length){if(2<(r=u[0]=u[0].slice(0)).length&&"ID"===(s=r[0]).type&&f.getById&&9===e.nodeType&&y&&_.relative[r[1].type]){if(!(e=(_.find.ID(s.matches[0].replace(nt,d),e)||[])[0]))return i;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=X.needsContext.test(t)?0:r.length;o--&&(s=r[o],!_.relative[a=s.type]);)if((l=_.find[a])&&(n=l(s.matches[0].replace(nt,d),et.test(r[0].type)&&pt(e.parentNode)||e))){if(r.splice(o,1),!(t=n.length&&gt(r)))return N.apply(i,n),i;break}}return(c||h(t,u))(n,e,!y,i,et.test(t)&&pt(e.parentNode)||e),i},f.sortStable=T.split("").sort(k).join("")===T,f.detectDuplicates=!!u,v(),f.sortDetached=at(function(t){return 1&t.compareDocumentPosition(w.createElement("div"))}),at(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||lt("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),f.attributes&&at(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||lt("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),at(function(t){return null==t.getAttribute("disabled")})||lt(P,function(t,e,i){var n;return i?void 0:!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),ot}(f);C.find=p,C.expr=p.selectors,C.expr[":"]=C.expr.pseudos,C.unique=p.uniqueSort,C.text=p.getText,C.isXMLDoc=p.isXML,C.contains=p.contains;var y=C.expr.match.needsContext,b=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,_=/^.[^:#\[\.,]*$/;function E(t,i,n){if(C.isFunction(i))return C.grep(t,function(t,e){return!!i.call(t,e,t)!==n});if(i.nodeType)return C.grep(t,function(t){return t===i!==n});if("string"==typeof i){if(_.test(i))return C.filter(i,t,n);i=C.filter(i,t)}return C.grep(t,function(t){return 0<=C.inArray(t,i)!==n})}C.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?C.find.matchesSelector(n,t)?[n]:[]:C.find.matches(t,C.grep(e,function(t){return 1===t.nodeType}))},C.fn.extend({find:function(t){var e,i=[],n=this,o=n.length;if("string"!=typeof t)return this.pushStack(C(t).filter(function(){for(e=0;e<o;e++)if(C.contains(n[e],this))return!0}));for(e=0;e<o;e++)C.find(t,n[e],i);return(i=this.pushStack(1<o?C.unique(i):i)).selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(E(this,t||[],!1))},not:function(t){return this.pushStack(E(this,t||[],!0))},is:function(t){return!!E(this,"string"==typeof t&&y.test(t)?C(t):t||[],!1).length}});var w,T=f.document,x=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(C.fn.init=function(t,e){var i,n;if(!t)return this;if("string"!=typeof t)return t.nodeType?(this.context=this[0]=t,this.length=1,this):C.isFunction(t)?void 0!==w.ready?w.ready(t):t(C):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),C.makeArray(t,this));if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:x.exec(t))||!i[1]&&e)return!e||e.jquery?(e||w).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof C?e[0]:e,C.merge(this,C.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:T,!0)),b.test(i[1])&&C.isPlainObject(e))for(i in e)C.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if((n=T.getElementById(i[2]))&&n.parentNode){if(n.id!==i[2])return w.find(t);this.length=1,this[0]=n}return this.context=T,this.selector=t,this}).prototype=C.fn,w=C(T);var D=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function O(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}C.extend({dir:function(t,e,i){for(var n=[],o=t[e];o&&9!==o.nodeType&&(void 0===i||1!==o.nodeType||!C(o).is(i));)1===o.nodeType&&n.push(o),o=o[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),C.fn.extend({has:function(t){var e,i=C(t,this),n=i.length;return this.filter(function(){for(e=0;e<n;e++)if(C.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,o=this.length,r=[],s=y.test(t)||"string"!=typeof t?C(t,e||this.context):0;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?-1<s.index(i):1===i.nodeType&&C.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(1<r.length?C.unique(r):r)},index:function(t){return t?"string"==typeof t?C.inArray(this[0],C(t)):C.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(C.unique(C.merge(this.get(),C(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),C.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return C.dir(t,"parentNode")},parentsUntil:function(t,e,i){return C.dir(t,"parentNode",i)},next:function(t){return O(t,"nextSibling")},prev:function(t){return O(t,"previousSibling")},nextAll:function(t){return C.dir(t,"nextSibling")},prevAll:function(t){return C.dir(t,"previousSibling")},nextUntil:function(t,e,i){return C.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return C.dir(t,"previousSibling",i)},siblings:function(t){return C.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return C.sibling(t.firstChild)},contents:function(t){return C.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:C.merge([],t.childNodes)}},function(n,o){C.fn[n]=function(t,e){var i=C.map(this,o,t);return"Until"!==n.slice(-5)&&(e=t),e&&"string"==typeof e&&(i=C.filter(e,i)),1<this.length&&(I[n]||(i=C.unique(i)),D.test(n)&&(i=i.reverse())),this.pushStack(i)}});var R,k=/\S+/g,S={};function A(){T.addEventListener?(T.removeEventListener("DOMContentLoaded",M,!1),f.removeEventListener("load",M,!1)):(T.detachEvent("onreadystatechange",M),f.detachEvent("onload",M))}function M(){!T.addEventListener&&"load"!==event.type&&"complete"!==T.readyState||(A(),C.ready())}C.Callbacks=function(o){o="string"==typeof o?S[o]||function(t){var i=S[t]={};return C.each(t.match(k)||[],function(t,e){i[e]=!0}),i}(o):C.extend({},o);var n,e,i,r,s,a,l=[],c=!o.once&&[],u=function(t){for(e=o.memory&&t,i=!0,s=a||0,a=0,r=l.length,n=!0;l&&s<r;s++)if(!1===l[s].apply(t[0],t[1])&&o.stopOnFalse){e=!1;break}n=!1,l&&(c?c.length&&u(c.shift()):e?l=[]:d.disable())},d={add:function(){if(l){var t=l.length;!function n(t){C.each(t,function(t,e){var i=C.type(e);"function"===i?o.unique&&d.has(e)||l.push(e):e&&e.length&&"string"!==i&&n(e)})}(arguments),n?r=l.length:e&&(a=t,u(e))}return this},remove:function(){return l&&C.each(arguments,function(t,e){for(var i;-1<(i=C.inArray(e,l,i));)l.splice(i,1),n&&(i<=r&&r--,i<=s&&s--)}),this},has:function(t){return t?-1<C.inArray(t,l):!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=c=e=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,e||d.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!l||i&&!c||(e=[t,(e=e||[]).slice?e.slice():e],n?c.push(e):u(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},C.extend({Deferred:function(t){var r=[["resolve","done",C.Callbacks("once memory"),"resolved"],["reject","fail",C.Callbacks("once memory"),"rejected"],["notify","progress",C.Callbacks("memory")]],o="pending",s={state:function(){return o},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var o=arguments;return C.Deferred(function(n){C.each(r,function(t,e){var i=C.isFunction(o[t])&&o[t];a[e[1]](function(){var t=i&&i.apply(this,arguments);t&&C.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[e[0]+"With"](this===s?n.promise():this,i?[t]:arguments)})}),o=null}).promise()},promise:function(t){return null!=t?C.extend(t,s):s}},a={};return s.pipe=s.then,C.each(r,function(t,e){var i=e[2],n=e[3];s[e[1]]=i.add,n&&i.add(function(){o=n},r[1^t][2].disable,r[2][2].lock),a[e[0]]=function(){return a[e[0]+"With"](this===a?s:this,arguments),this},a[e[0]+"With"]=i.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){function e(e,i,n){return function(t){i[e]=this,n[e]=1<arguments.length?u.call(arguments):t,n===o?c.notifyWith(i,n):--l||c.resolveWith(i,n)}}var o,i,n,r=0,s=u.call(arguments),a=s.length,l=1!==a||t&&C.isFunction(t.promise)?a:0,c=1===l?t:C.Deferred();if(1<a)for(o=new Array(a),i=new Array(a),n=new Array(a);r<a;r++)s[r]&&C.isFunction(s[r].promise)?s[r].promise().done(e(r,n,s)).fail(c.reject).progress(e(r,i,o)):--l;return l||c.resolveWith(n,s),c.promise()}}),C.fn.ready=function(t){return C.ready.promise().done(t),this},C.extend({isReady:!1,readyWait:1,holdReady:function(t){t?C.readyWait++:C.ready(!0)},ready:function(t){if(!0===t?!--C.readyWait:!C.isReady){if(!T.body)return setTimeout(C.ready);(C.isReady=!0)!==t&&0<--C.readyWait||(R.resolveWith(T,[C]),C.fn.triggerHandler&&(C(T).triggerHandler("ready"),C(T).off("ready")))}}}),C.ready.promise=function(t){if(!R)if(R=C.Deferred(),"complete"===T.readyState)setTimeout(C.ready);else if(T.addEventListener)T.addEventListener("DOMContentLoaded",M,!1),f.addEventListener("load",M,!1);else{T.attachEvent("onreadystatechange",M),f.attachEvent("onload",M);var i=!1;try{i=null==f.frameElement&&T.documentElement}catch(t){}i&&i.doScroll&&!function e(){if(!C.isReady){try{i.doScroll("left")}catch(t){return setTimeout(e,50)}A(),C.ready()}}()}return R.promise(t)};var N,K="undefined";for(N in C(v))break;v.ownLast="0"!==N,v.inlineBlockNeedsLayout=!1,C(function(){var t,e,i,n;(i=T.getElementsByTagName("body")[0])&&i.style&&(e=T.createElement("div"),(n=T.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==K&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",v.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=T.createElement("div");if(null==v.deleteExpando){v.deleteExpando=!0;try{delete t.test}catch(t){v.deleteExpando=!1}}t=null}(),C.acceptData=function(t){var e=C.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return(1===i||9===i)&&(!e||!0!==e&&t.getAttribute("classid")===e)};var L=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,P=/([A-Z])/g;function F(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(P,"-$1").toLowerCase();if("string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:L.test(i)?C.parseJSON(i):i)}catch(t){}C.data(t,e,i)}else i=void 0}return i}function B(t){var e;for(e in t)if(("data"!==e||!C.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function H(t,e,i,n){if(C.acceptData(t)){var o,r,s=C.expando,a=t.nodeType,l=a?C.cache:t,c=a?t[s]:t[s]&&s;if(c&&l[c]&&(n||l[c].data)||void 0!==i||"string"!=typeof e)return l[c=c||(a?t[s]=d.pop()||C.guid++:s)]||(l[c]=a?{}:{toJSON:C.noop}),"object"!=typeof e&&"function"!=typeof e||(n?l[c]=C.extend(l[c],e):l[c].data=C.extend(l[c].data,e)),r=l[c],n||(r.data||(r.data={}),r=r.data),void 0!==i&&(r[C.camelCase(e)]=i),"string"==typeof e?null==(o=r[e])&&(o=r[C.camelCase(e)]):o=r,o}}function z(t,e,i){if(C.acceptData(t)){var n,o,r=t.nodeType,s=r?C.cache:t,a=r?t[C.expando]:C.expando;if(s[a]){if(e&&(n=i?s[a]:s[a].data)){o=(e=C.isArray(e)?e.concat(C.map(e,C.camelCase)):e in n?[e]:(e=C.camelCase(e))in n?[e]:e.split(" ")).length;for(;o--;)delete n[e[o]];if(i?!B(n):!C.isEmptyObject(n))return}(i||(delete s[a].data,B(s[a])))&&(r?C.cleanData([t],!0):v.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}C.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?C.cache[t[C.expando]]:t[C.expando])&&!B(t)},data:function(t,e,i){return H(t,e,i)},removeData:function(t,e){return z(t,e)},_data:function(t,e,i){return H(t,e,i,!0)},_removeData:function(t,e){return z(t,e,!0)}}),C.fn.extend({data:function(t,e){var i,n,o,r=this[0],s=r&&r.attributes;if(void 0!==t)return"object"==typeof t?this.each(function(){C.data(this,t)}):1<arguments.length?this.each(function(){C.data(this,t,e)}):r?F(r,t,C.data(r,t)):void 0;if(this.length&&(o=C.data(r),1===r.nodeType&&!C._data(r,"parsedAttrs"))){for(i=s.length;i--;)s[i]&&(0===(n=s[i].name).indexOf("data-")&&F(r,n=C.camelCase(n.slice(5)),o[n]));C._data(r,"parsedAttrs",!0)}return o},removeData:function(t){return this.each(function(){C.removeData(this,t)})}}),C.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=C._data(t,e),i&&(!n||C.isArray(i)?n=C._data(t,e,C.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=C.queue(t,e),n=i.length,o=i.shift(),r=C._queueHooks(t,e);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete r.stop,o.call(t,function(){C.dequeue(t,e)},r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return C._data(t,i)||C._data(t,i,{empty:C.Callbacks("once memory").add(function(){C._removeData(t,e+"queue"),C._removeData(t,i)})})}}),C.fn.extend({queue:function(e,i){var t=2;return"string"!=typeof e&&(i=e,e="fx",t--),arguments.length<t?C.queue(this[0],e):void 0===i?this:this.each(function(){var t=C.queue(this,e,i);C._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&C.dequeue(this,e)})},dequeue:function(t){return this.each(function(){C.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function i(){--o||r.resolveWith(s,[s])}var n,o=1,r=C.Deferred(),s=this,a=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=C._data(s[a],t+"queueHooks"))&&n.empty&&(o++,n.empty.add(i));return i(),r.promise(e)}});function $(t,e){return t=e||t,"none"===C.css(t,"display")||!C.contains(t.ownerDocument,t)}var V=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,j=["Top","Right","Bottom","Left"],W=C.access=function(t,e,i,n,o,r,s){var a=0,l=t.length,c=null==i;if("object"===C.type(i))for(a in o=!0,i)C.access(t,e,a,i[a],!0,r,s);else if(void 0!==n&&(o=!0,C.isFunction(n)||(s=!0),c&&(e=s?(e.call(t,n),null):(c=e,function(t,e,i){return c.call(C(t),i)})),e))for(;a<l;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return o?t:c?e.call(t):l?e(t[0],i):r},G=/^(?:checkbox|radio)$/i;!function(){var t=T.createElement("input"),e=T.createElement("div"),i=T.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",v.leadingWhitespace=3===e.firstChild.nodeType,v.tbody=!e.getElementsByTagName("tbody").length,v.htmlSerialize=!!e.getElementsByTagName("link").length,v.html5Clone="<:nav></:nav>"!==T.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),v.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,i.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",v.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,v.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){v.noCloneEvent=!1}),e.cloneNode(!0).click()),null==v.deleteExpando){v.deleteExpando=!0;try{delete e.test}catch(t){v.deleteExpando=!1}}}(),function(){var t,e,i=T.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})e="on"+t,(v[t+"Bubbles"]=e in f)||(i.setAttribute(e,"t"),v[t+"Bubbles"]=!1===i.attributes[e].expando);i=null}();var q=/^(?:input|select|textarea)$/i,U=/^key/,Y=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Z=/^([^.]*)(?:\.(.+)|)$/;function Q(){return!0}function J(){return!1}function tt(){try{return T.activeElement}catch(t){}}function et(t){var e=it.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}C.event={global:{},add:function(t,e,i,n,o){var r,s,a,l,c,u,d,h,p,f,g,m=C._data(t);if(m){for(i.handler&&(i=(l=i).handler,o=l.selector),i.guid||(i.guid=C.guid++),(s=m.events)||(s=m.events={}),(u=m.handle)||((u=m.handle=function(t){return typeof C===K||t&&C.event.triggered===t.type?void 0:C.event.dispatch.apply(u.elem,arguments)}).elem=t),a=(e=(e||"").match(k)||[""]).length;a--;)p=g=(r=Z.exec(e[a])||[])[1],f=(r[2]||"").split(".").sort(),p&&(c=C.event.special[p]||{},p=(o?c.delegateType:c.bindType)||p,c=C.event.special[p]||{},d=C.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&C.expr.match.needsContext.test(o),namespace:f.join(".")},l),(h=s[p])||((h=s[p]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,n,f,u)||(t.addEventListener?t.addEventListener(p,u,!1):t.attachEvent&&t.attachEvent("on"+p,u))),c.add&&(c.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),o?h.splice(h.delegateCount++,0,d):h.push(d),C.event.global[p]=!0);t=null}},remove:function(t,e,i,n,o){var r,s,a,l,c,u,d,h,p,f,g,m=C.hasData(t)&&C._data(t);if(m&&(u=m.events)){for(c=(e=(e||"").match(k)||[""]).length;c--;)if(p=g=(a=Z.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=C.event.special[p]||{},h=u[p=(n?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=h.length;r--;)s=h[r],!o&&g!==s.origType||i&&i.guid!==s.guid||a&&!a.test(s.namespace)||n&&n!==s.selector&&("**"!==n||!s.selector)||(h.splice(r,1),s.selector&&h.delegateCount--,d.remove&&d.remove.call(t,s));l&&!h.length&&(d.teardown&&!1!==d.teardown.call(t,f,m.handle)||C.removeEvent(t,p,m.handle),delete u[p])}else for(p in u)C.event.remove(t,p+e[c],i,n,!0);C.isEmptyObject(u)&&(delete m.handle,C._removeData(t,"events"))}},trigger:function(t,e,i,n){var o,r,s,a,l,c,u,d=[i||T],h=m.call(t,"type")?t.type:t,p=m.call(t,"namespace")?t.namespace.split("."):[];if(s=c=i=i||T,3!==i.nodeType&&8!==i.nodeType&&!X.test(h+C.event.triggered)&&(0<=h.indexOf(".")&&(h=(p=h.split(".")).shift(),p.sort()),r=h.indexOf(":")<0&&"on"+h,(t=t[C.expando]?t:new C.Event(h,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:C.makeArray(e,[t]),l=C.event.special[h]||{},n||!l.trigger||!1!==l.trigger.apply(i,e))){if(!n&&!l.noBubble&&!C.isWindow(i)){for(a=l.delegateType||h,X.test(a+h)||(s=s.parentNode);s;s=s.parentNode)d.push(s),c=s;c===(i.ownerDocument||T)&&d.push(c.defaultView||c.parentWindow||f)}for(u=0;(s=d[u++])&&!t.isPropagationStopped();)t.type=1<u?a:l.bindType||h,(o=(C._data(s,"events")||{})[t.type]&&C._data(s,"handle"))&&o.apply(s,e),(o=r&&s[r])&&o.apply&&C.acceptData(s)&&(t.result=o.apply(s,e),!1===t.result&&t.preventDefault());if(t.type=h,!n&&!t.isDefaultPrevented()&&(!l._default||!1===l._default.apply(d.pop(),e))&&C.acceptData(i)&&r&&i[h]&&!C.isWindow(i)){(c=i[r])&&(i[r]=null),C.event.triggered=h;try{i[h]()}catch(t){}C.event.triggered=void 0,c&&(i[r]=c)}return t.result}},dispatch:function(t){t=C.event.fix(t);var e,i,n,o,r,s=[],a=u.call(arguments),l=(C._data(this,"events")||{})[t.type]||[],c=C.event.special[t.type]||{};if((a[0]=t).delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(s=C.event.handlers.call(this,t,l),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(n=o.handlers[r++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(n.namespace)||(t.handleObj=n,t.data=n.data,void 0!==(i=((C.event.special[n.origType]||{}).handle||n.handler).apply(o.elem,a))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,o,r,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(o=[],r=0;r<a;r++)void 0===o[i=(n=e[r]).selector+" "]&&(o[i]=n.needsContext?0<=C(i,this).index(l):C.find(i,this,null,[l]).length),o[i]&&o.push(n);o.length&&s.push({elem:l,handlers:o})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},fix:function(t){if(t[C.expando])return t;var e,i,n,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Y.test(o)?this.mouseHooks:U.test(o)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new C.Event(r),e=n.length;e--;)t[i=n[e]]=r[i];return t.target||(t.target=r.srcElement||T),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,o,r=e.button,s=e.fromElement;return null==t.pageX&&null!=e.clientX&&(o=(n=t.target.ownerDocument||T).documentElement,i=n.body,t.pageX=e.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?e.toElement:s),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==tt()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===tt()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return C.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return C.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var o=C.extend(new C.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?C.event.trigger(o,null,e):C.event.dispatch.call(e,o),o.isDefaultPrevented()&&i.preventDefault()}},C.removeEvent=T.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===K&&(t[n]=null),t.detachEvent(n,i))},C.Event=function(t,e){return this instanceof C.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Q:J):this.type=t,e&&C.extend(this,e),this.timeStamp=t&&t.timeStamp||C.now(),void(this[C.expando]=!0)):new C.Event(t,e)},C.Event.prototype={isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Q,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Q,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Q,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){C.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,i=t.relatedTarget,n=t.handleObj;return i&&(i===this||C.contains(this,i))||(t.type=n.origType,e=n.handler.apply(this,arguments),t.type=o),e}}}),v.submitBubbles||(C.event.special.submit={setup:function(){return!C.nodeName(this,"form")&&void C.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=C.nodeName(e,"input")||C.nodeName(e,"button")?e.form:void 0;i&&!C._data(i,"submitBubbles")&&(C.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),C._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&C.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return!C.nodeName(this,"form")&&void C.event.remove(this,"._submit")}}),v.changeBubbles||(C.event.special.change={setup:function(){return q.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(C.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),C.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),C.event.simulate("change",this,t,!0)})),!1):void C.event.add(this,"beforeactivate._change",function(t){var e=t.target;q.test(e.nodeName)&&!C._data(e,"changeBubbles")&&(C.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||C.event.simulate("change",this.parentNode,t,!0)}),C._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return C.event.remove(this,"._change"),!q.test(this.nodeName)}}),v.focusinBubbles||C.each({focus:"focusin",blur:"focusout"},function(i,n){function o(t){C.event.simulate(n,t.target,C.event.fix(t),!0)}C.event.special[n]={setup:function(){var t=this.ownerDocument||this,e=C._data(t,n);e||t.addEventListener(i,o,!0),C._data(t,n,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=C._data(t,n)-1;e?C._data(t,n,e):(t.removeEventListener(i,o,!0),C._removeData(t,n))}}}),C.fn.extend({on:function(t,e,i,n,o){var r,s;if("object"==typeof t){for(r in"string"!=typeof e&&(i=i||e,e=void 0),t)this.on(r,e,i,t[r],o);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),!1===n)n=J;else if(!n)return this;return 1===o&&(s=n,(n=function(t){return C().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=C.guid++)),this.each(function(){C.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,C(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=J),this.each(function(){C.event.remove(this,t,i,e)});for(o in t)this.off(o,e,t[o]);return this},trigger:function(t,e){return this.each(function(){C.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?C.event.trigger(t,e,i,!0):void 0}});var it="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",nt=/ jQuery\d+="(?:null|\d+)"/g,ot=new RegExp("<(?:"+it+")[\\s/>]","i"),rt=/^\s+/,st=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,at=/<([\w:]+)/,lt=/<tbody/i,ct=/<|&#?\w+;/,ut=/<(?:script|style|link)/i,dt=/checked\s*(?:[^=]|=\s*.checked.)/i,ht=/^$|\/(?:java|ecma)script/i,pt=/^true\/(.*)/,ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:v.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},mt=et(T).appendChild(T.createElement("div"));function vt(t,e){var i,n,o=0,r=typeof t.getElementsByTagName!==K?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==K?t.querySelectorAll(e||"*"):void 0;if(!r)for(r=[],i=t.childNodes||t;null!=(n=i[o]);o++)!e||C.nodeName(n,e)?r.push(n):C.merge(r,vt(n,e));return void 0===e||e&&C.nodeName(t,e)?C.merge([t],r):r}function yt(t){G.test(t.type)&&(t.defaultChecked=t.checked)}function bt(t,e){return C.nodeName(t,"table")&&C.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function _t(t){return t.type=(null!==C.find.attr(t,"type"))+"/"+t.type,t}function Et(t){var e=pt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function wt(t,e){for(var i,n=0;null!=(i=t[n]);n++)C._data(i,"globalEval",!e||C._data(e[n],"globalEval"))}function Ct(t,e){if(1===e.nodeType&&C.hasData(t)){var i,n,o,r=C._data(t),s=C._data(e,r),a=r.events;if(a)for(i in delete s.handle,s.events={},a)for(n=0,o=a[i].length;n<o;n++)C.event.add(e,i,a[i][n]);s.data&&(s.data=C.extend({},s.data))}}function Tt(t,e){var i,n,o;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!v.noCloneEvent&&e[C.expando]){for(n in(o=C._data(e)).events)C.removeEvent(e,n,o.handle);e.removeAttribute(C.expando)}"script"===i&&e.text!==t.text?(_t(e).text=t.text,Et(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),v.html5Clone&&t.innerHTML&&!C.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&G.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}}gt.optgroup=gt.option,gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,C.extend({clone:function(t,e,i){var n,o,r,s,a,l=C.contains(t.ownerDocument,t);if(v.html5Clone||C.isXMLDoc(t)||!ot.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(mt.innerHTML=t.outerHTML,mt.removeChild(r=mt.firstChild)),!(v.noCloneEvent&&v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||C.isXMLDoc(t)))for(n=vt(r),a=vt(t),s=0;null!=(o=a[s]);++s)n[s]&&Tt(o,n[s]);if(e)if(i)for(a=a||vt(t),n=n||vt(r),s=0;null!=(o=a[s]);s++)Ct(o,n[s]);else Ct(t,r);return 0<(n=vt(r,"script")).length&&wt(n,!l&&vt(t,"script")),n=a=o=null,r},buildFragment:function(t,e,i,n){for(var o,r,s,a,l,c,u,d=t.length,h=et(e),p=[],f=0;f<d;f++)if((r=t[f])||0===r)if("object"===C.type(r))C.merge(p,r.nodeType?[r]:r);else if(ct.test(r)){for(a=a||h.appendChild(e.createElement("div")),l=(at.exec(r)||["",""])[1].toLowerCase(),u=gt[l]||gt._default,a.innerHTML=u[1]+r.replace(st,"<$1></$2>")+u[2],o=u[0];o--;)a=a.lastChild;if(!v.leadingWhitespace&&rt.test(r)&&p.push(e.createTextNode(rt.exec(r)[0])),!v.tbody)for(o=(r="table"!==l||lt.test(r)?"<table>"!==u[1]||lt.test(r)?0:a:a.firstChild)&&r.childNodes.length;o--;)C.nodeName(c=r.childNodes[o],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(C.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=h.lastChild}else p.push(e.createTextNode(r));for(a&&h.removeChild(a),v.appendChecked||C.grep(vt(p,"input"),yt),f=0;r=p[f++];)if((!n||-1===C.inArray(r,n))&&(s=C.contains(r.ownerDocument,r),a=vt(h.appendChild(r),"script"),s&&wt(a),i))for(o=0;r=a[o++];)ht.test(r.type||"")&&i.push(r);return a=null,h},cleanData:function(t,e){for(var i,n,o,r,s=0,a=C.expando,l=C.cache,c=v.deleteExpando,u=C.event.special;null!=(i=t[s]);s++)if((e||C.acceptData(i))&&(r=(o=i[a])&&l[o])){if(r.events)for(n in r.events)u[n]?C.event.remove(i,n):C.removeEvent(i,n,r.handle);l[o]&&(delete l[o],c?delete i[a]:typeof i.removeAttribute!==K?i.removeAttribute(a):i[a]=null,d.push(o))}}}),C.fn.extend({text:function(t){return W(this,function(t){return void 0===t?C.text(this):this.empty().append((this[0]&&this[0].ownerDocument||T).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||bt(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=bt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?C.filter(t,this):this,o=0;null!=(i=n[o]);o++)e||1!==i.nodeType||C.cleanData(vt(i)),i.parentNode&&(e&&C.contains(i.ownerDocument,i)&&wt(vt(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&C.cleanData(vt(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&C.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return C.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(nt,""):void 0;if(!("string"!=typeof t||ut.test(t)||!v.htmlSerialize&&ot.test(t)||!v.leadingWhitespace&&rt.test(t)||gt[(at.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(st,"<$1></$2>");try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(C.cleanData(vt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,C.cleanData(vt(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(i,n){i=g.apply([],i);var t,e,o,r,s,a,l=0,c=this.length,u=this,d=c-1,h=i[0],p=C.isFunction(h);if(p||1<c&&"string"==typeof h&&!v.checkClone&&dt.test(h))return this.each(function(t){var e=u.eq(t);p&&(i[0]=h.call(this,t,e.html())),e.domManip(i,n)});if(c&&(t=(a=C.buildFragment(i,this[0].ownerDocument,!1,this)).firstChild,1===a.childNodes.length&&(a=t),t)){for(o=(r=C.map(vt(a,"script"),_t)).length;l<c;l++)e=a,l!==d&&(e=C.clone(e,!0,!0),o&&C.merge(r,vt(e,"script"))),n.call(this[l],e,l);if(o)for(s=r[r.length-1].ownerDocument,C.map(r,Et),l=0;l<o;l++)e=r[l],ht.test(e.type||"")&&!C._data(e,"globalEval")&&C.contains(s,e)&&(e.src?C._evalUrl&&C._evalUrl(e.src):C.globalEval((e.text||e.textContent||e.innerHTML||"").replace(ft,"")));a=t=null}return this}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){C.fn[t]=function(t){for(var e,i=0,n=[],o=C(t),r=o.length-1;i<=r;i++)e=i===r?this:this.clone(!0),C(o[i])[s](e),a.apply(n,e.get());return this.pushStack(n)}});var xt,Dt,It={};function Ot(t,e){var i,n=C(e.createElement(t)).appendTo(e.body),o=f.getDefaultComputedStyle&&(i=f.getDefaultComputedStyle(n[0]))?i.display:C.css(n[0],"display");return n.detach(),o}function Rt(t){var e=T,i=It[t];return i||("none"!==(i=Ot(t,e))&&i||((e=((xt=(xt||C("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||xt[0].contentDocument).document).write(),e.close(),i=Ot(t,e),xt.detach()),It[t]=i),i}v.shrinkWrapBlocks=function(){return null!=Dt?Dt:(Dt=!1,(e=T.getElementsByTagName("body")[0])&&e.style?(t=T.createElement("div"),(i=T.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(i).appendChild(t),typeof t.style.zoom!==K&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(T.createElement("div")).style.width="5px",Dt=3!==t.offsetWidth),e.removeChild(i),Dt):void 0);var t,e,i};var kt,St,At=/^margin/,Mt=new RegExp("^("+V+")(?!px)[a-z%]+$","i"),Nt=/^(top|right|bottom|left)$/;function Kt(e,i){return{get:function(){var t=e();if(null!=t)return t?void delete this.get:(this.get=i).apply(this,arguments)}}}f.getComputedStyle?(kt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):f.getComputedStyle(t,null)},St=function(t,e,i){var n,o,r,s,a=t.style;return s=(i=i||kt(t))?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==s||C.contains(t.ownerDocument,t)||(s=C.style(t,e)),Mt.test(s)&&At.test(e)&&(n=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=o,a.maxWidth=r)),void 0===s?s:s+""}):T.documentElement.currentStyle&&(kt=function(t){return t.currentStyle},St=function(t,e,i){var n,o,r,s,a=t.style;return null==(s=(i=i||kt(t))?i[e]:void 0)&&a&&a[e]&&(s=a[e]),Mt.test(s)&&!Nt.test(e)&&(n=a.left,(r=(o=t.runtimeStyle)&&o.left)&&(o.left=t.currentStyle.left),a.left="fontSize"===e?"1em":s,s=a.pixelLeft+"px",a.left=n,r&&(o.left=r)),void 0===s?s:s+""||"auto"}),function(){var t,e,i,o,r,s,a;if((t=T.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=(i=t.getElementsByTagName("a")[0])&&i.style){function n(){var t,e,i,n;(e=T.getElementsByTagName("body")[0])&&e.style&&(t=T.createElement("div"),(i=T.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=r=!1,a=!0,f.getComputedStyle&&(o="1%"!==(f.getComputedStyle(t,null)||{}).top,r="4px"===(f.getComputedStyle(t,null)||{width:"4px"}).width,(n=t.appendChild(T.createElement("div"))).style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",t.style.width="1px",a=!parseFloat((f.getComputedStyle(n,null)||{}).marginRight),t.removeChild(n)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(n=t.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(s=0===n[0].offsetHeight)&&(n[0].style.display="",n[1].style.display="none",s=0===n[0].offsetHeight),e.removeChild(i))}e.cssText="float:left;opacity:.5",v.opacity="0.5"===e.opacity,v.cssFloat=!!e.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===t.style.backgroundClip,v.boxSizing=""===e.boxSizing||""===e.MozBoxSizing||""===e.WebkitBoxSizing,C.extend(v,{reliableHiddenOffsets:function(){return null==s&&n(),s},boxSizingReliable:function(){return null==r&&n(),r},pixelPosition:function(){return null==o&&n(),o},reliableMarginRight:function(){return null==a&&n(),a}})}}(),C.swap=function(t,e,i,n){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in o=i.apply(t,n||[]),e)t.style[r]=s[r];return o};var Lt=/alpha\([^)]*\)/i,Pt=/opacity\s*=\s*([^)]*)/,Ft=/^(none|table(?!-c[ea]).+)/,Bt=new RegExp("^("+V+")(.*)$","i"),Ht=new RegExp("^([+-])=("+V+")","i"),zt={position:"absolute",visibility:"hidden",display:"block"},$t={letterSpacing:"0",fontWeight:"400"},Vt=["Webkit","O","Moz","ms"];function jt(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,o=Vt.length;o--;)if((e=Vt[o]+i)in t)return e;return n}function Wt(t,e){for(var i,n,o,r=[],s=0,a=t.length;s<a;s++)(n=t[s]).style&&(r[s]=C._data(n,"olddisplay"),i=n.style.display,e?(r[s]||"none"!==i||(n.style.display=""),""===n.style.display&&$(n)&&(r[s]=C._data(n,"olddisplay",Rt(n.nodeName)))):(o=$(n),(i&&"none"!==i||!o)&&C._data(n,"olddisplay",o?i:C.css(n,"display"))));for(s=0;s<a;s++)(n=t[s]).style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?r[s]||"":"none"));return t}function Gt(t,e,i){var n=Bt.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function qt(t,e,i,n,o){for(var r=i===(n?"border":"content")?4:"width"===e?1:0,s=0;r<4;r+=2)"margin"===i&&(s+=C.css(t,i+j[r],!0,o)),n?("content"===i&&(s-=C.css(t,"padding"+j[r],!0,o)),"margin"!==i&&(s-=C.css(t,"border"+j[r]+"Width",!0,o))):(s+=C.css(t,"padding"+j[r],!0,o),"padding"!==i&&(s+=C.css(t,"border"+j[r]+"Width",!0,o)));return s}function Ut(t,e,i){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=kt(t),s=v.boxSizing&&"border-box"===C.css(t,"boxSizing",!1,r);if(o<=0||null==o){if(((o=St(t,e,r))<0||null==o)&&(o=t.style[e]),Mt.test(o))return o;n=s&&(v.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+qt(t,e,i||(s?"border":"content"),n,r)+"px"}function Yt(t,e,i,n,o){return new Yt.prototype.init(t,e,i,n,o)}C.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=St(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:v.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=C.camelCase(e),l=t.style;if(e=C.cssProps[a]||(C.cssProps[a]=jt(l,a)),s=C.cssHooks[e]||C.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(o=s.get(t,!1,n))?o:l[e];if("string"===(r=typeof i)&&(o=Ht.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(C.css(t,e)),r="number"),null!=i&&i==i&&("number"!==r||C.cssNumber[a]||(i+="px"),v.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(s&&"set"in s&&void 0===(i=s.set(t,i,n)))))try{l[e]=i}catch(t){}}},css:function(t,e,i,n){var o,r,s,a=C.camelCase(e);return e=C.cssProps[a]||(C.cssProps[a]=jt(t.style,a)),(s=C.cssHooks[e]||C.cssHooks[a])&&"get"in s&&(r=s.get(t,!0,i)),void 0===r&&(r=St(t,e,n)),"normal"===r&&e in $t&&(r=$t[e]),""===i||i?(o=parseFloat(r),!0===i||C.isNumeric(o)?o||0:r):r}}),C.each(["height","width"],function(t,o){C.cssHooks[o]={get:function(t,e,i){return e?Ft.test(C.css(t,"display"))&&0===t.offsetWidth?C.swap(t,zt,function(){return Ut(t,o,i)}):Ut(t,o,i):void 0},set:function(t,e,i){var n=i&&kt(t);return Gt(0,e,i?qt(t,o,i,v.boxSizing&&"border-box"===C.css(t,"boxSizing",!1,n),n):0)}}}),v.opacity||(C.cssHooks.opacity={get:function(t,e){return Pt.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,o=C.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=n&&n.filter||i.filter||"";((i.zoom=1)<=e||""===e)&&""===C.trim(r.replace(Lt,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=Lt.test(r)?r.replace(Lt,o):r+" "+o)}}),C.cssHooks.marginRight=Kt(v.reliableMarginRight,function(t,e){return e?C.swap(t,{display:"inline-block"},St,[t,"marginRight"]):void 0}),C.each({margin:"",padding:"",border:"Width"},function(o,r){C.cssHooks[o+r]={expand:function(t){for(var e=0,i={},n="string"==typeof t?t.split(" "):[t];e<4;e++)i[o+j[e]+r]=n[e]||n[e-2]||n[0];return i}},At.test(o)||(C.cssHooks[o+r].set=Gt)}),C.fn.extend({css:function(t,e){return W(this,function(t,e,i){var n,o,r={},s=0;if(C.isArray(e)){for(n=kt(t),o=e.length;s<o;s++)r[e[s]]=C.css(t,e[s],!1,n);return r}return void 0!==i?C.style(t,e,i):C.css(t,e)},t,e,1<arguments.length)},show:function(){return Wt(this,!0)},hide:function(){return Wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){$(this)?C(this).show():C(this).hide()})}}),((C.Tween=Yt).prototype={constructor:Yt,init:function(t,e,i,n,o,r){this.elem=t,this.prop=i,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(C.cssNumber[i]?"":"px")},cur:function(){var t=Yt.propHooks[this.prop];return t&&t.get?t.get(this):Yt.propHooks._default.get(this)},run:function(t){var e,i=Yt.propHooks[this.prop];return this.pos=e=this.options.duration?C.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Yt.propHooks._default.set(this),this}}).init.prototype=Yt.prototype,(Yt.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=C.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){C.fx.step[t.prop]?C.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[C.cssProps[t.prop]]||C.cssHooks[t.prop])?C.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}}).scrollTop=Yt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},C.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},C.fx=Yt.prototype.init,C.fx.step={};var Xt,Zt,Qt,Jt,te,ee,ie,ne=/^(?:toggle|show|hide)$/,oe=new RegExp("^(?:([+-])=|)("+V+")([a-z%]*)$","i"),re=/queueHooks$/,se=[function(e,t,i){var n,o,r,s,a,l,c,u=this,d={},h=e.style,p=e.nodeType&&$(e),f=C._data(e,"fxshow");for(n in i.queue||(null==(a=C._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,C.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],c=C.css(e,"display"),"inline"===("none"===c?C._data(e,"olddisplay")||Rt(e.nodeName):c)&&"none"===C.css(e,"float")&&(v.inlineBlockNeedsLayout&&"inline"!==Rt(e.nodeName)?h.zoom=1:h.display="inline-block")),i.overflow&&(h.overflow="hidden",v.shrinkWrapBlocks()||u.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]})),t)if(o=t[n],ne.exec(o)){if(delete t[n],r=r||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!f||void 0===f[n])continue;p=!0}d[n]=f&&f[n]||C.style(e,n)}else c=void 0;if(C.isEmptyObject(d))"inline"===("none"===c?Rt(e.nodeName):c)&&(h.display=c);else for(n in f?"hidden"in f&&(p=f.hidden):f=C._data(e,"fxshow",{}),r&&(f.hidden=!p),p?C(e).show():u.done(function(){C(e).hide()}),u.done(function(){var t;for(t in C._removeData(e,"fxshow"),d)C.style(e,t,d[t])}),d)s=ue(p?f[n]:0,n,u),n in f||(f[n]=s.start,p&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}],ae={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),o=oe.exec(e),r=o&&o[3]||(C.cssNumber[t]?"":"px"),s=(C.cssNumber[t]||"px"!==r&&+n)&&oe.exec(C.css(i.elem,t)),a=1,l=20;if(s&&s[3]!==r)for(r=r||s[3],o=o||[],s=+n||1;s/=a=a||".5",C.style(i.elem,t,s+r),a!==(a=i.cur()/n)&&1!==a&&--l;);return o&&(s=i.start=+s||+n||0,i.unit=r,i.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),i}]};function le(){return setTimeout(function(){Xt=void 0}),Xt=C.now()}function ce(t,e){var i,n={height:t},o=0;for(e=e?1:0;o<4;o+=2-e)n["margin"+(i=j[o])]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function ue(t,e,i){for(var n,o=(ae[e]||[]).concat(ae["*"]),r=0,s=o.length;r<s;r++)if(n=o[r].call(i,e,t))return n}function de(r,t,e){var i,s,n=0,o=se.length,a=C.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=Xt||le(),e=Math.max(0,c.startTime+c.duration-t),i=1-(e/c.duration||0),n=0,o=c.tweens.length;n<o;n++)c.tweens[n].run(i);return a.notifyWith(r,[c,i,e]),i<1&&o?e:(a.resolveWith(r,[c]),!1)},c=a.promise({elem:r,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{}},e),originalProperties:t,originalOptions:e,startTime:Xt||le(),duration:e.duration,tweens:[],createTween:function(t,e){var i=C.Tween(r,c.opts,t,e,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var e=0,i=t?c.tweens.length:0;if(s)return this;for(s=!0;e<i;e++)c.tweens[e].run(1);return t?a.resolveWith(r,[c,t]):a.rejectWith(r,[c,t]),this}}),u=c.props;for(function(t,e){var i,n,o,r,s;for(i in t)if(o=e[n=C.camelCase(i)],r=t[i],C.isArray(r)&&(o=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),(s=C.cssHooks[n])&&"expand"in s)for(i in r=s.expand(r),delete t[n],r)i in t||(t[i]=r[i],e[i]=o);else e[n]=o}(u,c.opts.specialEasing);n<o;n++)if(i=se[n].call(c,r,u,c.opts))return i;return C.map(u,ue,c),C.isFunction(c.opts.start)&&c.opts.start.call(r,c),C.fx.timer(C.extend(l,{elem:r,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}C.Animation=C.extend(de,{tweener:function(t,e){for(var i,n=0,o=(t=C.isFunction(t)?(e=t,["*"]):t.split(" ")).length;n<o;n++)i=t[n],ae[i]=ae[i]||[],ae[i].unshift(e)},prefilter:function(t,e){e?se.unshift(t):se.push(t)}}),C.speed=function(t,e,i){var n=t&&"object"==typeof t?C.extend({},t):{complete:i||!i&&e||C.isFunction(t)&&t,duration:t,easing:i&&e||e&&!C.isFunction(e)&&e};return n.duration=C.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in C.fx.speeds?C.fx.speeds[n.duration]:C.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){C.isFunction(n.old)&&n.old.call(this),n.queue&&C.dequeue(this,n.queue)},n},C.fn.extend({fadeTo:function(t,e,i,n){return this.filter($).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(e,t,i,n){function o(){var t=de(this,C.extend({},e),s);(r||C._data(this,"finish"))&&t.stop(!0)}var r=C.isEmptyObject(e),s=C.speed(t,i,n);return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(o,t,r){function s(t){var e=t.stop;delete t.stop,e(r)}return"string"!=typeof o&&(r=t,t=o,o=void 0),t&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var t=!0,e=null!=o&&o+"queueHooks",i=C.timers,n=C._data(this);if(e)n[e]&&n[e].stop&&s(n[e]);else for(e in n)n[e]&&n[e].stop&&re.test(e)&&s(n[e]);for(e=i.length;e--;)i[e].elem!==this||null!=o&&i[e].queue!==o||(i[e].anim.stop(r),t=!1,i.splice(e,1));!t&&r||C.dequeue(this,o)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=C._data(this),i=e[s+"queue"],n=e[s+"queueHooks"],o=C.timers,r=i?i.length:0;for(e.finish=!0,C.queue(this,s,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===s&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<r;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete e.finish})}}),C.each(["toggle","show","hide"],function(t,n){var o=C.fn[n];C.fn[n]=function(t,e,i){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(ce(n,!0),t,e,i)}}),C.each({slideDown:ce("show"),slideUp:ce("hide"),slideToggle:ce("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){C.fn[t]=function(t,e,i){return this.animate(n,t,e,i)}}),C.timers=[],C.fx.tick=function(){var t,e=C.timers,i=0;for(Xt=C.now();i<e.length;i++)(t=e[i])()||e[i]!==t||e.splice(i--,1);e.length||C.fx.stop(),Xt=void 0},C.fx.timer=function(t){C.timers.push(t),t()?C.fx.start():C.timers.pop()},C.fx.interval=13,C.fx.start=function(){Zt=Zt||setInterval(C.fx.tick,C.fx.interval)},C.fx.stop=function(){clearInterval(Zt),Zt=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(n,t){return n=C.fx&&C.fx.speeds[n]||n,t=t||"fx",this.queue(t,function(t,e){var i=setTimeout(t,n);e.stop=function(){clearTimeout(i)}})},(Jt=T.createElement("div")).setAttribute("className","t"),Jt.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ee=Jt.getElementsByTagName("a")[0],ie=(te=T.createElement("select")).appendChild(T.createElement("option")),Qt=Jt.getElementsByTagName("input")[0],ee.style.cssText="top:1px",v.getSetAttribute="t"!==Jt.className,v.style=/top/.test(ee.getAttribute("style")),v.hrefNormalized="/a"===ee.getAttribute("href"),v.checkOn=!!Qt.value,v.optSelected=ie.selected,v.enctype=!!T.createElement("form").enctype,te.disabled=!0,v.optDisabled=!ie.disabled,(Qt=T.createElement("input")).setAttribute("value",""),v.input=""===Qt.getAttribute("value"),Qt.value="t",Qt.setAttribute("type","radio"),v.radioValue="t"===Qt.value;var he=/\r/g;C.fn.extend({val:function(i){var n,t,o,e=this[0];return arguments.length?(o=C.isFunction(i),this.each(function(t){var e;1===this.nodeType&&(null==(e=o?i.call(this,t,C(this).val()):i)?e="":"number"==typeof e?e+="":C.isArray(e)&&(e=C.map(e,function(t){return null==t?"":t+""})),(n=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):e?(n=C.valHooks[e.type]||C.valHooks[e.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(he,""):null==t?"":t:void 0}}),C.extend({valHooks:{option:{get:function(t){var e=C.find.attr(t,"value");return null!=e?e:C.trim(C.text(t))}},select:{get:function(t){for(var e,i,n=t.options,o=t.selectedIndex,r="select-one"===t.type||o<0,s=r?null:[],a=r?o+1:n.length,l=o<0?a:r?o:0;l<a;l++)if(!(!(i=n[l]).selected&&l!==o||(v.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&C.nodeName(i.parentNode,"optgroup"))){if(e=C(i).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var i,n,o=t.options,r=C.makeArray(e),s=o.length;s--;)if(n=o[s],0<=C.inArray(C.valHooks.option.get(n),r))try{n.selected=i=!0}catch(t){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(t,e){return C.isArray(e)?t.checked=0<=C.inArray(C(t).val(),e):void 0}},v.checkOn||(C.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var pe,fe,ge=C.expr.attrHandle,me=/^(?:checked|selected)$/i,ve=v.getSetAttribute,ye=v.input;C.fn.extend({attr:function(t,e){return W(this,C.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){C.removeAttr(this,t)})}}),C.extend({attr:function(t,e,i){var n,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===K?C.prop(t,e,i):(1===r&&C.isXMLDoc(t)||(e=e.toLowerCase(),n=C.attrHooks[e]||(C.expr.match.bool.test(e)?fe:pe)),void 0===i?n&&"get"in n&&null!==(o=n.get(t,e))?o:null==(o=C.find.attr(t,e))?void 0:o:null!==i?n&&"set"in n&&void 0!==(o=n.set(t,i,e))?o:(t.setAttribute(e,i+""),i):void C.removeAttr(t,e))},removeAttr:function(t,e){var i,n,o=0,r=e&&e.match(k);if(r&&1===t.nodeType)for(;i=r[o++];)n=C.propFix[i]||i,C.expr.match.bool.test(i)?ye&&ve||!me.test(i)?t[n]=!1:t[C.camelCase("default-"+i)]=t[n]=!1:C.attr(t,i,""),t.removeAttribute(ve?i:n)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&C.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),fe={set:function(t,e,i){return!1===e?C.removeAttr(t,i):ye&&ve||!me.test(i)?t.setAttribute(!ve&&C.propFix[i]||i,i):t[C.camelCase("default-"+i)]=t[i]=!0,i}},C.each(C.expr.match.bool.source.match(/\w+/g),function(t,e){var r=ge[e]||C.find.attr;ge[e]=ye&&ve||!me.test(e)?function(t,e,i){var n,o;return i||(o=ge[e],ge[e]=n,n=null!=r(t,e,i)?e.toLowerCase():null,ge[e]=o),n}:function(t,e,i){return i?void 0:t[C.camelCase("default-"+e)]?e.toLowerCase():null}}),ye&&ve||(C.attrHooks.value={set:function(t,e,i){return C.nodeName(t,"input")?void(t.defaultValue=e):pe&&pe.set(t,e,i)}}),ve||(pe={set:function(t,e,i){var n=t.getAttributeNode(i);return n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i)?e:void 0}},ge.id=ge.name=ge.coords=function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},C.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);return i&&i.specified?i.value:void 0},set:pe.set},C.attrHooks.contenteditable={set:function(t,e,i){pe.set(t,""!==e&&e,i)}},C.each(["width","height"],function(t,i){C.attrHooks[i]={set:function(t,e){return""===e?(t.setAttribute(i,"auto"),e):void 0}}})),v.style||(C.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var be=/^(?:input|select|textarea|button|object)$/i,_e=/^(?:a|area)$/i;C.fn.extend({prop:function(t,e){return W(this,C.prop,t,e,1<arguments.length)},removeProp:function(t){return t=C.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(t){}})}}),C.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,i){var n,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return(1!==r||!C.isXMLDoc(t))&&(e=C.propFix[e]||e,o=C.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=C.find.attr(t,"tabindex");return e?parseInt(e,10):be.test(t.nodeName)||_e.test(t.nodeName)&&t.href?0:-1}}}}),v.hrefNormalized||C.each(["href","src"],function(t,e){C.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),v.optSelected||(C.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),v.enctype||(C.propFix.enctype="encoding");var Ee=/[\t\r\n\f]/g;C.fn.extend({addClass:function(e){var t,i,n,o,r,s,a=0,l=this.length,c="string"==typeof e&&e;if(C.isFunction(e))return this.each(function(t){C(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(k)||[];a<l;a++)if(n=1===(i=this[a]).nodeType&&(i.className?(" "+i.className+" ").replace(Ee," "):" ")){for(r=0;o=t[r++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");s=C.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(e){var t,i,n,o,r,s,a=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(C.isFunction(e))return this.each(function(t){C(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(k)||[];a<l;a++)if(n=1===(i=this[a]).nodeType&&(i.className?(" "+i.className+" ").replace(Ee," "):"")){for(r=0;o=t[r++];)for(;0<=n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");s=e?C.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(o,e){var r=typeof o;return"boolean"==typeof e&&"string"==r?e?this.addClass(o):this.removeClass(o):this.each(C.isFunction(o)?function(t){C(this).toggleClass(o.call(this,t,this.className,e),e)}:function(){if("string"==r)for(var t,e=0,i=C(this),n=o.match(k)||[];t=n[e++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else r!==K&&"boolean"!=r||(this.className&&C._data(this,"__className__",this.className),this.className=this.className||!1===o?"":C._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&0<=(" "+this[i].className+" ").replace(Ee," ").indexOf(e))return!0;return!1}}),C.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,i){C.fn[i]=function(t,e){return 0<arguments.length?this.on(i,null,t,e):this.trigger(i)}}),C.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var we=C.now(),Ce=/\?/,Te=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;C.parseJSON=function(t){if(f.JSON&&f.JSON.parse)return f.JSON.parse(t+"");var o,r=null,e=C.trim(t+"");return e&&!C.trim(e.replace(Te,function(t,e,i,n){return o&&e&&(r=0),0===r?t:(o=i||e,r+=!n-!i,"")}))?Function("return "+e)():C.error("Invalid JSON: "+t)},C.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{f.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t))}catch(t){e=void 0}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+t),e};var xe,De,Ie=/#.*$/,Oe=/([?&])_=[^&]*/,Re=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,ke=/^(?:GET|HEAD)$/,Se=/^\/\//,Ae=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Me={},Ne={},Ke="*/".concat("*");try{De=location.href}catch(t){(De=T.createElement("a")).href="",De=De.href}function Le(r){return function(t,e){"string"!=typeof t&&(e=t,t="*");var i,n=0,o=t.toLowerCase().match(k)||[];if(C.isFunction(e))for(;i=o[n++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(r[i]=r[i]||[]).unshift(e)):(r[i]=r[i]||[]).push(e)}}function Pe(e,o,r,s){var a={},l=e===Ne;function c(t){var n;return a[t]=!0,C.each(e[t]||[],function(t,e){var i=e(o,r,s);return"string"!=typeof i||l||a[i]?l?!(n=i):void 0:(o.dataTypes.unshift(i),c(i),!1)}),n}return c(o.dataTypes[0])||!a["*"]&&c("*")}function Fe(t,e){var i,n,o=C.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i=i||{})[n]=e[n]);return i&&C.extend(!0,t,i),t}xe=Ae.exec(De.toLowerCase())||[],C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:De,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xe[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ke,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":C.parseJSON,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Fe(Fe(t,C.ajaxSettings),e):Fe(C.ajaxSettings,t)},ajaxPrefilter:Le(Me),ajaxTransport:Le(Ne),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,n,u,d,h,p,f,o,g=C.ajaxSetup({},e),m=g.context||g,v=g.context&&(m.nodeType||m.jquery)?C(m):C.event,y=C.Deferred(),b=C.Callbacks("once memory"),_=g.statusCode||{},r={},s={},E=0,a="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===E){if(!o)for(o={};e=Re.exec(d);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===E?d:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return E||(t=s[i]=s[i]||t,r[t]=e),this},overrideMimeType:function(t){return E||(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(E<2)for(e in t)_[e]=[_[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||a;return f&&f.abort(e),l(0,e),this}};if(y.promise(w).complete=b.add,w.success=w.done,w.error=w.fail,g.url=((t||g.url||De)+"").replace(Ie,"").replace(Se,xe[1]+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=C.trim(g.dataType||"*").toLowerCase().match(k)||[""],null==g.crossDomain&&(i=Ae.exec(g.url.toLowerCase()),g.crossDomain=!(!i||i[1]===xe[1]&&i[2]===xe[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(xe[3]||("http:"===xe[1]?"80":"443")))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=C.param(g.data,g.traditional)),Pe(Me,g,e,w),2===E)return w;for(n in(p=C.event&&g.global)&&0==C.active++&&C.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!ke.test(g.type),u=g.url,g.hasContent||(g.data&&(u=g.url+=(Ce.test(u)?"&":"?")+g.data,delete g.data),!1===g.cache&&(g.url=Oe.test(u)?u.replace(Oe,"$1_="+we++):u+(Ce.test(u)?"&":"?")+"_="+we++)),g.ifModified&&(C.lastModified[u]&&w.setRequestHeader("If-Modified-Since",C.lastModified[u]),C.etag[u]&&w.setRequestHeader("If-None-Match",C.etag[u])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&w.setRequestHeader("Content-Type",g.contentType),w.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Ke+"; q=0.01":""):g.accepts["*"]),g.headers)w.setRequestHeader(n,g.headers[n]);if(g.beforeSend&&(!1===g.beforeSend.call(m,w,g)||2===E))return w.abort();for(n in a="abort",{success:1,error:1,complete:1})w[n](g[n]);if(f=Pe(Ne,g,e,w)){w.readyState=1,p&&v.trigger("ajaxSend",[w,g]),g.async&&0<g.timeout&&(h=setTimeout(function(){w.abort("timeout")},g.timeout));try{E=1,f.send(r,l)}catch(t){if(!(E<2))throw t;l(-1,t)}}else l(-1,"No Transport");function l(t,e,i,n){var o,r,s,a,l,c=e;2!==E&&(E=2,h&&clearTimeout(h),f=void 0,d=n||"",w.readyState=0<t?4:0,o=200<=t&&t<300||304===t,i&&(a=function(t,e,i){for(var n,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(s in a)if(a[s]&&a[s].test(o)){l.unshift(s);break}if(l[0]in i)r=l[0];else{for(s in i){if(!l[0]||t.converters[s+" "+l[0]]){r=s;break}n=n||s}r=r||n}return r?(r!==l[0]&&l.unshift(r),i[r]):void 0}(g,w,i)),a=function(t,e,i,n){var o,r,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if((a=o.split(" "))[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(g,a,w,o),o?(g.ifModified&&((l=w.getResponseHeader("Last-Modified"))&&(C.lastModified[u]=l),(l=w.getResponseHeader("etag"))&&(C.etag[u]=l)),204===t||"HEAD"===g.type?c="nocontent":304===t?c="notmodified":(c=a.state,r=a.data,o=!(s=a.error))):(s=c,!t&&c||(c="error",t<0&&(t=0))),w.status=t,w.statusText=(e||c)+"",o?y.resolveWith(m,[r,c,w]):y.rejectWith(m,[w,c,s]),w.statusCode(_),_=void 0,p&&v.trigger(o?"ajaxSuccess":"ajaxError",[w,g,o?r:s]),b.fireWith(m,[w,c]),p&&(v.trigger("ajaxComplete",[w,g]),--C.active||C.event.trigger("ajaxStop")))}return w},getJSON:function(t,e,i){return C.get(t,e,i,"json")},getScript:function(t,e){return C.get(t,void 0,e,"script")}}),C.each(["get","post"],function(t,o){C[o]=function(t,e,i,n){return C.isFunction(e)&&(n=n||i,i=e,e=void 0),C.ajax({url:t,type:o,dataType:n,data:e,success:i})}}),C._evalUrl=function(t){return C.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},C.fn.extend({wrapAll:function(e){if(C.isFunction(e))return this.each(function(t){C(this).wrapAll(e.call(this,t))});if(this[0]){var t=C(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(i){return this.each(C.isFunction(i)?function(t){C(this).wrapInner(i.call(this,t))}:function(){var t=C(this),e=t.contents();e.length?e.wrapAll(i):t.append(i)})},wrap:function(e){var i=C.isFunction(e);return this.each(function(t){C(this).wrapAll(i?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){C.nodeName(this,"body")||C(this).replaceWith(this.childNodes)}).end()}}),C.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!v.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||C.css(t,"display"))},C.expr.filters.visible=function(t){return!C.expr.filters.hidden(t)};var Be=/%20/g,He=/\[\]$/,ze=/\r?\n/g,$e=/^(?:submit|button|image|reset|file)$/i,Ve=/^(?:input|select|textarea|keygen)/i;function je(i,t,n,o){var e;if(C.isArray(t))C.each(t,function(t,e){n||He.test(i)?o(i,e):je(i+"["+("object"==typeof e?t:"")+"]",e,n,o)});else if(n||"object"!==C.type(t))o(i,t);else for(e in t)je(i+"["+e+"]",t[e],n,o)}C.param=function(t,e){function i(t,e){e=C.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)}var n,o=[];if(void 0===e&&(e=C.ajaxSettings&&C.ajaxSettings.traditional),C.isArray(t)||t.jquery&&!C.isPlainObject(t))C.each(t,function(){i(this.name,this.value)});else for(n in t)je(n,t[n],e,i);return o.join("&").replace(Be,"+")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=C.prop(this,"elements");return t?C.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!C(this).is(":disabled")&&Ve.test(this.nodeName)&&!$e.test(t)&&(this.checked||!G.test(t))}).map(function(t,e){var i=C(this).val();return null==i?null:C.isArray(i)?C.map(i,function(t){return{name:e.name,value:t.replace(ze,"\r\n")}}):{name:e.name,value:i.replace(ze,"\r\n")}}).get()}}),C.ajaxSettings.xhr=void 0!==f.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Ue()||function(){try{return new f.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}()}:Ue;var We=0,Ge={},qe=C.ajaxSettings.xhr();function Ue(){try{return new f.XMLHttpRequest}catch(t){}}f.attachEvent&&f.attachEvent("onunload",function(){for(var t in Ge)Ge[t](void 0,!0)}),v.cors=!!qe&&"withCredentials"in qe,(qe=v.ajax=!!qe)&&C.ajaxTransport(function(l){var c;if(!l.crossDomain||v.cors)return{send:function(t,r){var e,s=l.xhr(),a=++We;if(s.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(e in l.xhrFields)s[e]=l.xhrFields[e];for(e in l.mimeType&&s.overrideMimeType&&s.overrideMimeType(l.mimeType),l.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)void 0!==t[e]&&s.setRequestHeader(e,t[e]+"");s.send(l.hasContent&&l.data||null),c=function(t,e){var i,n,o;if(c&&(e||4===s.readyState))if(delete Ge[a],c=void 0,s.onreadystatechange=C.noop,e)4!==s.readyState&&s.abort();else{o={},i=s.status,"string"==typeof s.responseText&&(o.text=s.responseText);try{n=s.statusText}catch(t){n=""}i||!l.isLocal||l.crossDomain?1223===i&&(i=204):i=o.text?200:404}o&&r(i,n,o,s.getAllResponseHeaders())},l.async?4===s.readyState?setTimeout(c):s.onreadystatechange=Ge[a]=c:c()},abort:function(){c&&c(void 0,!0)}}}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return C.globalEval(t),t}}}),C.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),C.ajaxTransport("script",function(e){if(e.crossDomain){var n,o=T.head||C("head")[0]||T.documentElement;return{send:function(t,i){(n=T.createElement("script")).async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(t,e){!e&&n.readyState&&!/loaded|complete/.test(n.readyState)||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,e||i(200,"success"))},o.insertBefore(n,o.firstChild)},abort:function(){n&&n.onload(void 0,!0)}}}});var Ye=[],Xe=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ye.pop()||C.expando+"_"+we++;return this[t]=!0,t}}),C.ajaxPrefilter("json jsonp",function(t,e,i){var n,o,r,s=!1!==t.jsonp&&(Xe.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xe.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(n=t.jsonpCallback=C.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Xe,"$1"+n):!1!==t.jsonp&&(t.url+=(Ce.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return r||C.error(n+" was not called"),r[0]},t.dataTypes[0]="json",o=f[n],f[n]=function(){r=arguments},i.always(function(){f[n]=o,t[n]&&(t.jsonpCallback=e.jsonpCallback,Ye.push(n)),r&&C.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),C.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||T;var n=b.exec(t),o=!i&&[];return n?[e.createElement(n[1])]:(n=C.buildFragment([t],e,o),o&&o.length&&C(o).remove(),C.merge([],n.childNodes))};var Ze=C.fn.load;C.fn.load=function(t,e,i){if("string"!=typeof t&&Ze)return Ze.apply(this,arguments);var n,o,r,s=this,a=t.indexOf(" ");return 0<=a&&(n=C.trim(t.slice(a,t.length)),t=t.slice(0,a)),C.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<s.length&&C.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,s.html(n?C("<div>").append(C.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){s.each(i,o||[t.responseText,e,t])}),this},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){C.fn[e]=function(t){return this.on(e,t)}}),C.expr.filters.animated=function(e){return C.grep(C.timers,function(t){return e===t.elem}).length};var Qe=f.document.documentElement;function Je(t){return C.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}C.offset={setOffset:function(t,e,i){var n,o,r,s,a,l,c=C.css(t,"position"),u=C(t),d={};"static"===c&&(t.style.position="relative"),a=u.offset(),r=C.css(t,"top"),l=C.css(t,"left"),o=("absolute"===c||"fixed"===c)&&-1<C.inArray("auto",[r,l])?(s=(n=u.position()).top,n.left):(s=parseFloat(r)||0,parseFloat(l)||0),C.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+o),"using"in e?e.using.call(t,d):u.css(d)}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){C.offset.setOffset(this,e,t)});var t,i,n={top:0,left:0},o=this[0],r=o&&o.ownerDocument;return r?(t=r.documentElement,C.contains(t,o)?(typeof o.getBoundingClientRect!==K&&(n=o.getBoundingClientRect()),i=Je(r),{top:n.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===C.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),C.nodeName(t[0],"html")||(i=t.offset()),i.top+=C.css(t[0],"borderTopWidth",!0),i.left+=C.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-C.css(n,"marginTop",!0),left:e.left-i.left-C.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Qe;t&&!C.nodeName(t,"html")&&"static"===C.css(t,"position");)t=t.offsetParent;return t||Qe})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,o){var r=/Y/.test(o);C.fn[e]=function(t){return W(this,function(t,e,i){var n=Je(t);return void 0===i?n?o in n?n[o]:n.document.documentElement[e]:t[e]:void(n?n.scrollTo(r?C(n).scrollLeft():i,r?i:C(n).scrollTop()):t[e]=i)},e,t,arguments.length,null)}}),C.each(["top","left"],function(t,i){C.cssHooks[i]=Kt(v.pixelPosition,function(t,e){return e?(e=St(t,i),Mt.test(e)?C(t).position()[i]+"px":e):void 0})}),C.each({Height:"height",Width:"width"},function(r,s){C.each({padding:"inner"+r,content:s,"":"outer"+r},function(n,t){C.fn[t]=function(t,e){var i=arguments.length&&(n||"boolean"!=typeof t),o=n||(!0===t||!0===e?"margin":"border");return W(this,function(t,e,i){var n;return C.isWindow(t)?t.document.documentElement["client"+r]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+r],n["scroll"+r],t.body["offset"+r],n["offset"+r],n["client"+r])):void 0===i?C.css(t,e,o):C.style(t,e,i,o)},s,i?t:void 0,i,null)}})}),C.fn.size=function(){return this.length},C.fn.andSelf=C.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var ti=f.jQuery,ei=f.$;return C.noConflict=function(t){return f.$===C&&(f.$=ei),t&&f.jQuery===C&&(f.jQuery=ti),C},typeof t===K&&(f.jQuery=f.$=C),C}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(O){var t,e,i,n;function o(t,e){var i,n,o,r=t.nodeName.toLowerCase();return"area"===r?(n=(i=t.parentNode).name,!(!t.href||!n||"map"!==i.nodeName.toLowerCase())&&(!!(o=O("img[usemap='#"+n+"']")[0])&&s(o))):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r&&t.href||e)&&s(t)}function s(t){return O.expr.filters.visible(t)&&!O(t).parents().addBack().filter(function(){return"hidden"===O.css(this,"visibility")}).length}O.ui=O.ui||{},O.extend(O.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),O.fn.extend({scrollParent:function(t){var e=this.css("position"),i="absolute"===e,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=O(this);return(!i||"static"!==t.css("position"))&&n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&o.length?o:O(this[0].ownerDocument||document)},uniqueId:(t=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&O(this).removeAttr("id")})}}),O.extend(O.expr[":"],{data:O.expr.createPseudo?O.expr.createPseudo(function(e){return function(t){return!!O.data(t,e)}}):function(t,e,i){return!!O.data(t,i[3])},focusable:function(t){return o(t,!isNaN(O.attr(t,"tabindex")))},tabbable:function(t){var e=O.attr(t,"tabindex"),i=isNaN(e);return(i||0<=e)&&o(t,!i)}}),O("<a>").outerWidth(1).jquery||O.each(["Width","Height"],function(t,i){var o="Width"===i?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),r={innerWidth:O.fn.innerWidth,innerHeight:O.fn.innerHeight,outerWidth:O.fn.outerWidth,outerHeight:O.fn.outerHeight};function s(t,e,i,n){return O.each(o,function(){e-=parseFloat(O.css(t,"padding"+this))||0,i&&(e-=parseFloat(O.css(t,"border"+this+"Width"))||0),n&&(e-=parseFloat(O.css(t,"margin"+this))||0)}),e}O.fn["inner"+i]=function(t){return void 0===t?r["inner"+i].call(this):this.each(function(){O(this).css(n,s(this,t)+"px")})},O.fn["outer"+i]=function(t,e){return"number"!=typeof t?r["outer"+i].call(this,t):this.each(function(){O(this).css(n,s(this,t,!0,e)+"px")})}}),O.fn.addBack||(O.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),O("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(O.fn.removeData=(e=O.fn.removeData,function(t){return arguments.length?e.call(this,O.camelCase(t)):e.call(this)})),O.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),O.fn.extend({focus:(n=O.fn.focus,function(e,i){return"number"==typeof e?this.each(function(){var t=this;setTimeout(function(){O(t).focus(),i&&i.call(t)},e)}):n.apply(this,arguments)}),disableSelection:(i="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(i+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var e,i,n=O(this[0]);n.length&&n[0]!==document;){if(("absolute"===(e=n.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(n.css("zIndex"),10),!isNaN(i)&&0!==i))return i;n=n.parent()}return 0}}),O.ui.plugin={add:function(t,e,i){var n,o=O.ui[t].prototype;for(n in i)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([e,i[n]])},call:function(t,e,i,n){var o,r=t.plugins[e];if(r&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)t.options[r[o][0]]&&r[o][1].apply(t.element,i)}};var r,a=0,l=Array.prototype.slice;O.cleanData=(r=O.cleanData,function(t){var e,i,n;for(n=0;null!=(i=t[n]);n++)try{(e=O._data(i,"events"))&&e.remove&&O(i).triggerHandler("remove")}catch(t){}r(t)}),O.widget=function(t,i,e){var n,o,r,s,a={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,e||(e=i,i=O.Widget),O.expr[":"][n.toLowerCase()]=function(t){return!!O.data(t,n)},O[l]=O[l]||{},o=O[l][t],r=O[l][t]=function(t,e){if(!this._createWidget)return new r(t,e);arguments.length&&this._createWidget(t,e)},O.extend(r,o,{version:e.version,_proto:O.extend({},e),_childConstructors:[]}),(s=new i).options=O.widget.extend({},s.options),O.each(e,function(e,n){function o(){return i.prototype[e].apply(this,arguments)}function r(t){return i.prototype[e].apply(this,t)}O.isFunction(n)?a[e]=function(){var t,e=this._super,i=this._superApply;return this._super=o,this._superApply=r,t=n.apply(this,arguments),this._super=e,this._superApply=i,t}:a[e]=n}),r.prototype=O.widget.extend(s,{widgetEventPrefix:o&&s.widgetEventPrefix||t},a,{constructor:r,namespace:l,widgetName:t,widgetFullName:n}),o?(O.each(o._childConstructors,function(t,e){var i=e.prototype;O.widget(i.namespace+"."+i.widgetName,r,e._proto)}),delete o._childConstructors):i._childConstructors.push(r),O.widget.bridge(t,r),r},O.widget.extend=function(t){for(var e,i,n=l.call(arguments,1),o=0,r=n.length;o<r;o++)for(e in n[o])i=n[o][e],n[o].hasOwnProperty(e)&&void 0!==i&&(O.isPlainObject(i)?t[e]=O.isPlainObject(t[e])?O.widget.extend({},t[e],i):O.widget.extend({},i):t[e]=i);return t},O.widget.bridge=function(r,e){var s=e.prototype.widgetFullName||r;O.fn[r]=function(i){var t="string"==typeof i,n=l.call(arguments,1),o=this;return t?this.each(function(){var t,e=O.data(this,s);return"instance"===i?(o=e,!1):e?O.isFunction(e[i])&&"_"!==i.charAt(0)?(t=e[i].apply(e,n))!==e&&void 0!==t?(o=t&&t.jquery?o.pushStack(t.get()):t,!1):void 0:O.error("no such method '"+i+"' for "+r+" widget instance"):O.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+i+"'")}):(n.length&&(i=O.widget.extend.apply(null,[i].concat(n))),this.each(function(){var t=O.data(this,s);t?(t.option(i||{}),t._init&&t._init()):O.data(this,s,new e(i,this))})),o}},O.Widget=function(){},O.Widget._childConstructors=[],O.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,e){e=O(e||this.defaultElement||this)[0],this.element=O(e),this.uuid=a++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=O(),this.hoverable=O(),this.focusable=O(),e!==this&&(O.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=O(e.style?e.ownerDocument:e.document||e),this.window=O(this.document[0].defaultView||this.document[0].parentWindow)),this.options=O.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:O.noop,_getCreateEventData:O.noop,_create:O.noop,_init:O.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(O.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:O.noop,widget:function(){return this.element},option:function(t,e){var i,n,o,r=t;if(0===arguments.length)return O.widget.extend({},this.options);if("string"==typeof t)if(r={},t=(i=t.split(".")).shift(),i.length){for(n=r[t]=O.widget.extend({},this.options[t]),o=0;o<i.length-1;o++)n[i[o]]=n[i[o]]||{},n=n[i[o]];if(t=i.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=e}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(s,a,t){var l,c=this;"boolean"!=typeof s&&(t=a,a=s,s=!1),t?(a=l=O(a),this.bindings=this.bindings.add(a)):(t=a,a=this.element,l=this.widget()),O.each(t,function(t,e){function i(){if(s||!0!==c.options.disabled&&!O(this).hasClass("ui-state-disabled"))return("string"==typeof e?c[e]:e).apply(c,arguments)}"string"!=typeof e&&(i.guid=e.guid=e.guid||i.guid||O.guid++);var n=t.match(/^([\w:-]*)\s*(.*)$/),o=n[1]+c.eventNamespace,r=n[2];r?l.delegate(r,o,i):a.bind(o,i)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e),this.bindings=O(this.bindings.not(t).get()),this.focusable=O(this.focusable.not(t).get()),this.hoverable=O(this.hoverable.not(t).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){O(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){O(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){O(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){O(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,e,i){var n,o,r=this.options[t];if(i=i||{},(e=O.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],o=e.originalEvent)for(n in o)n in e||(e[n]=o[n]);return this.element.trigger(e,i),!(O.isFunction(r)&&!1===r.apply(this.element[0],[e].concat(i))||e.isDefaultPrevented())}},O.each({show:"fadeIn",hide:"fadeOut"},function(r,s){O.Widget.prototype["_"+r]=function(e,t,i){"string"==typeof t&&(t={effect:t});var n,o=t?!0===t||"number"==typeof t?s:t.effect||s:r;"number"==typeof(t=t||{})&&(t={duration:t}),n=!O.isEmptyObject(t),t.complete=i,t.delay&&e.delay(t.delay),n&&O.effects&&O.effects.effect[o]?e[r](t):o!==r&&e[o]?e[o](t.duration,t.easing,i):e.queue(function(t){O(this)[r](),i&&i.call(e[0]),t()})}});O.widget;var c=!1;O(document).mouseup(function(){c=!1});O.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){if(!0===O.data(t.target,e.widgetName+".preventClickEvent"))return O.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!c){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,i=1===t.which,n=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&O(t.target).closest(this.options.cancel).length;return!(i&&!n&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===O.data(t.target,this.widgetName+".preventClickEvent")&&O.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),c=!0))}},_mouseMove:function(t){if(this._mouseMoved){if(O.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&O.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),c=!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){O.ui=O.ui||{};var o,w,C=Math.max,T=Math.abs,x=Math.round,n=/left|center|right/,r=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,e=O.fn.position;function D(t,e,i){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?i/100:1)]}function I(t,e){return parseInt(O.css(t,e),10)||0}O.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,e,i=O("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=i.children()[0];return O("body").append(i),t=n.offsetWidth,i.css("overflow","scroll"),t===(e=n.offsetWidth)&&(e=i[0].clientWidth),i.remove(),o=t-e},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?O.position.scrollbarWidth():0,height:n?O.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=O(t||window),i=O.isWindow(e[0]),n=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:i,isDocument:n,offset:e.offset()||{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:i||n?e.width():e.outerWidth(),height:i||n?e.height():e.outerHeight()}}},O.fn.position=function(d){if(!d||!d.of)return e.apply(this,arguments);d=O.extend({},d);var h,p,f,g,m,t,v=O(d.of),y=O.position.getWithinInfo(d.within),b=O.position.getScrollInfo(y),_=(d.collision||"flip").split(" "),E={};return t=function(t){var e=t[0];return 9===e.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:O.isWindow(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}(v),v[0].preventDefault&&(d.at="left top"),p=t.width,f=t.height,g=t.offset,m=O.extend({},g),O.each(["my","at"],function(){var t,e,i=(d[this]||"").split(" ");1===i.length&&(i=n.test(i[0])?i.concat(["center"]):r.test(i[0])?["center"].concat(i):["center","center"]),i[0]=n.test(i[0])?i[0]:"center",i[1]=r.test(i[1])?i[1]:"center",t=s.exec(i[0]),e=s.exec(i[1]),E[this]=[t?t[0]:0,e?e[0]:0],d[this]=[a.exec(i[0])[0],a.exec(i[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===d.at[0]?m.left+=p:"center"===d.at[0]&&(m.left+=p/2),"bottom"===d.at[1]?m.top+=f:"center"===d.at[1]&&(m.top+=f/2),h=D(E.at,p,f),m.left+=h[0],m.top+=h[1],this.each(function(){var i,t,s=O(this),a=s.outerWidth(),l=s.outerHeight(),e=I(this,"marginLeft"),n=I(this,"marginTop"),o=a+e+I(this,"marginRight")+b.width,r=l+n+I(this,"marginBottom")+b.height,c=O.extend({},m),u=D(E.my,s.outerWidth(),s.outerHeight());"right"===d.my[0]?c.left-=a:"center"===d.my[0]&&(c.left-=a/2),"bottom"===d.my[1]?c.top-=l:"center"===d.my[1]&&(c.top-=l/2),c.left+=u[0],c.top+=u[1],w||(c.left=x(c.left),c.top=x(c.top)),i={marginLeft:e,marginTop:n},O.each(["left","top"],function(t,e){O.ui.position[_[t]]&&O.ui.position[_[t]][e](c,{targetWidth:p,targetHeight:f,elemWidth:a,elemHeight:l,collisionPosition:i,collisionWidth:o,collisionHeight:r,offset:[h[0]+u[0],h[1]+u[1]],my:d.my,at:d.at,within:y,elem:s})}),d.using&&(t=function(t){var e=g.left-c.left,i=e+p-a,n=g.top-c.top,o=n+f-l,r={target:{element:v,left:g.left,top:g.top,width:p,height:f},element:{element:s,left:c.left,top:c.top,width:a,height:l},horizontal:i<0?"left":0<e?"right":"center",vertical:o<0?"top":0<n?"bottom":"middle"};p<a&&T(e+i)<p&&(r.horizontal="center"),f<l&&T(n+o)<f&&(r.vertical="middle"),C(T(e),T(i))>C(T(n),T(o))?r.important="horizontal":r.important="vertical",d.using.call(this,t,r)}),s.offset(O.extend(c,{using:t}))})},O.ui.position={fit:{left:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,s=t.left-e.collisionPosition.marginLeft,a=o-s,l=s+e.collisionWidth-r-o;e.collisionWidth>r?0<a&&l<=0?(i=t.left+a+e.collisionWidth-r-o,t.left+=a-i):t.left=0<l&&a<=0?o:l<a?o+r-e.collisionWidth:o:0<a?t.left+=a:0<l?t.left-=l:t.left=C(t.left-s,t.left)},top:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollTop:n.offset.top,r=e.within.height,s=t.top-e.collisionPosition.marginTop,a=o-s,l=s+e.collisionHeight-r-o;e.collisionHeight>r?0<a&&l<=0?(i=t.top+a+e.collisionHeight-r-o,t.top+=a-i):t.top=0<l&&a<=0?o:l<a?o+r-e.collisionHeight:o:0<a?t.top+=a:0<l?t.top-=l:t.top=C(t.top-s,t.top)}},flip:{left:function(t,e){var i,n,o=e.within,r=o.offset.left+o.scrollLeft,s=o.width,a=o.isWindow?o.scrollLeft:o.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-a,u=l+e.collisionWidth-s-a,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];c<0?((i=t.left+d+h+p+e.collisionWidth-s-r)<0||i<T(c))&&(t.left+=d+h+p):0<u&&(0<(n=t.left-e.collisionPosition.marginLeft+d+h+p-a)||T(n)<u)&&(t.left+=d+h+p)},top:function(t,e){var i,n,o=e.within,r=o.offset.top+o.scrollTop,s=o.height,a=o.isWindow?o.scrollTop:o.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-a,u=l+e.collisionHeight-s-a,d="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];c<0?((n=t.top+d+h+p+e.collisionHeight-s-r)<0||n<T(c))&&(t.top+=d+h+p):0<u&&(0<(i=t.top-e.collisionPosition.marginTop+d+h+p-a)||T(i)<u)&&(t.top+=d+h+p)}},flipfit:{left:function(){O.ui.position.flip.left.apply(this,arguments),O.ui.position.fit.left.apply(this,arguments)},top:function(){O.ui.position.flip.top.apply(this,arguments),O.ui.position.fit.top.apply(this,arguments)}}},function(){var t,e,i,n,o,r=document.getElementsByTagName("body")[0],s=document.createElement("div");for(o in t=document.createElement(r?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&O.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)t.style[o]=i[o];t.appendChild(s),(e=r||document.documentElement).insertBefore(t,e.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",n=O(s).offset().left,w=10<n&&n<11,t.innerHTML="",e.removeChild(t)}()}();O.ui.position,O.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=O(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():O()}},_createIcons:function(){var t=this.options.icons;t&&(O("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&(this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e))):this._activate(e)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var e=O.ui.keyCode,i=this.headers.length,n=this.headers.index(t.target),o=!1;switch(t.keyCode){case e.RIGHT:case e.DOWN:o=this.headers[(n+1)%i];break;case e.LEFT:case e.UP:o=this.headers[(n-1+i)%i];break;case e.SPACE:case e.ENTER:this._eventHandler(t);break;case e.HOME:o=this.headers[0];break;case e.END:o=this.headers[i-1]}o&&(O(t.target).attr("tabIndex",-1),O(o).attr("tabIndex",0),o.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===O.ui.keyCode.UP&&t.ctrlKey&&O(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=O()):!1===t.active?this._activate(0):this.active.length&&!O.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=O()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var i,t=this.options,e=t.heightStyle,n=this.element.parent();this.active=this._findActive(t.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=O(this),e=t.uniqueId().attr("id"),i=t.next(),n=i.uniqueId().attr("id");t.attr("aria-controls",n),i.attr("aria-labelledby",e)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(t.event),"fill"===e?(i=n.height(),this.element.siblings(":visible").each(function(){var t=O(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=O(this).outerHeight(!0)}),this.headers.next().each(function(){O(this).height(Math.max(0,i-O(this).innerHeight()+O(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.headers.next().each(function(){i=Math.max(i,O(this).css("height","").height())}).height(i))},_activate:function(t){var e=this._findActive(t)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:O.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):O()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&O.each(t.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var e=this.options,i=this.active,n=O(t.currentTarget),o=n[0]===i[0],r=o&&e.collapsible,s=r?O():n.next(),a=i.next(),l={oldHeader:i,oldPanel:a,newHeader:r?O():n,newPanel:s};t.preventDefault(),o&&!e.collapsible||!1===this._trigger("beforeActivate",t,l)||(e.active=!r&&this.headers.index(n),this.active=o?O():n,this._toggle(l),i.removeClass("ui-accordion-header-active ui-state-active"),e.icons&&i.children(".ui-accordion-header-icon").removeClass(e.icons.activeHeader).addClass(e.icons.header),o||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),e.icons&&n.children(".ui-accordion-header-icon").removeClass(e.icons.header).addClass(e.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var e=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=e,this.prevHide=i,this.options.animate?this._animate(e,i,t):(i.hide(),e.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),e.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):e.length&&this.headers.filter(function(){return 0===parseInt(O(this).attr("tabIndex"),10)}).attr("tabIndex",-1),e.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,i,e){function n(){a._toggleComplete(e)}var o,r,s,a=this,l=0,c=t.css("box-sizing"),u=t.length&&(!i.length||t.index()<i.index()),d=this.options.animate||{},h=u&&d.down||d;return"number"==typeof h&&(s=h),"string"==typeof h&&(r=h),r=r||h.easing||d.easing,s=s||h.duration||d.duration,i.length?t.length?(o=t.show().outerHeight(),i.animate(this.hideProps,{duration:s,easing:r,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:s,easing:r,complete:n,step:function(t,e){e.now=Math.round(t),"height"!==e.prop?"content-box"===c&&(l+=e.now):"content"!==a.options.heightStyle&&(e.now=Math.round(o-i.outerHeight()-l),l=0)}})):i.animate(this.hideProps,s,r,n):t.animate(this.showProps,s,r,n)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),O.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(t){var e=O(t.target);!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&O(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var e=O(t.currentTarget);e.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,e)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(t){this._delay(function(){O.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=O(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var e,i,n,o,r=!0;switch(t.keyCode){case O.ui.keyCode.PAGE_UP:this.previousPage(t);break;case O.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case O.ui.keyCode.HOME:this._move("first","first",t);break;case O.ui.keyCode.END:this._move("last","last",t);break;case O.ui.keyCode.UP:this.previous(t);break;case O.ui.keyCode.DOWN:this.next(t);break;case O.ui.keyCode.LEFT:this.collapse(t);break;case O.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case O.ui.keyCode.ENTER:case O.ui.keyCode.SPACE:this._activate(t);break;case O.ui.keyCode.ESCAPE:this.collapse(t);break;default:r=!1,i=this.previousFilter||"",n=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),n===i?o=!0:n=i+n,e=this._filterMenuItems(n),(e=o&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e).length||(n=String.fromCharCode(t.keyCode),e=this._filterMenuItems(n)),e.length?(this.focus(t,e),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}r&&t.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(t):this.select(t))},refresh:function(){var t,e=this,n=this.options.icons.submenu,i=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=O(this),e=t.parent(),i=O("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);e.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",e.attr("id"))}),(t=i.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=O(this);e._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),t.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!O.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},focus:function(t,e){var i,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(t){var e,i,n,o,r,s;this._hasScroll()&&(e=parseFloat(O.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(O.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-e-i,o=this.activeMenu.scrollTop(),r=this.activeMenu.height(),s=t.outerHeight(),n<0?this.activeMenu.scrollTop(o+n):r<n+s&&this.activeMenu.scrollTop(o+n-r+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(t){var e=O.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var t=i?this.element:O(e&&e.target).closest(this.element.find(".ui-menu"));t.length||(t=this.element),this._close(t),this.blur(e),this.activeMenu=t},this.delay)},_close:function(t){(t=t||(this.active?this.active.parent():this.element)).find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!O(t.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[e]()),this.focus(i,n)},nextPage:function(t){var e,i,n;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(e=O(this)).offset().top-i-n<0}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var e,i,n;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(e=O(this)).offset().top-i+n}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||O(t.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,e)},_filterMenuItems:function(t){var e=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(O.trim(O(this).text()))})}});O.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var i,n,o,t=this.element[0].nodeName.toLowerCase(),e="textarea"===t,r="input"===t;this.isMultiLine=e||!r&&this.element.prop("isContentEditable"),this.valueMethod=this.element[e||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(t){if(this.element.prop("readOnly"))n=o=i=!0;else{n=o=i=!1;var e=O.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:i=!0,this._move("previousPage",t);break;case e.PAGE_DOWN:i=!0,this._move("nextPage",t);break;case e.UP:i=!0,this._keyEvent("previous",t);break;case e.DOWN:i=!0,this._keyEvent("next",t);break;case e.ENTER:this.menu.active&&(i=!0,t.preventDefault(),this.menu.select(t));break;case e.TAB:this.menu.active&&this.menu.select(t);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(t),t.preventDefault());break;default:n=!0,this._searchTimeout(t)}}},keypress:function(t){if(i)return i=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||t.preventDefault());if(!n){var e=O.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:this._move("previousPage",t);break;case e.PAGE_DOWN:this._move("nextPage",t);break;case e.UP:this._keyEvent("previous",t);break;case e.DOWN:this._keyEvent("next",t)}}},input:function(t){if(o)return o=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=O("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];O(t.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(t){t.target===e.element[0]||t.target===i||O.contains(i,t.target)||e.close()})})},menufocus:function(t,e){var i,n;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){O(t.target).trigger(t.originalEvent)});n=e.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),(i=e.item.attr("aria-label")||n.value)&&O.trim(i).length&&(this.liveRegion.children().hide(),O("<div>").text(i).appendTo(this.liveRegion))},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=O("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return(t=t&&(t.jquery||t.nodeType?O(t):this.document.find(t).eq(0)))&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var i,n,o=this;O.isArray(this.options.source)?(i=this.options.source,this.source=function(t,e){e(O.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,e){o.xhr&&o.xhr.abort(),o.xhr=O.ajax({url:n,data:t,dataType:"json",success:function(t){e(t)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),e=this.menu.element.is(":visible"),i=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey;t&&(!t||e||i)||(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return O.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t=t&&this._normalize(t),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:O.map(t,function(t){return"string"==typeof t?{label:t,value:t}:O.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var e=this.menu.element.empty();this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),e.position(O.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(i,t){var n=this;O.each(t,function(t,e){n._renderItemData(i,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(t,e){return O("<li>").text(e.label).appendTo(t)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),O.extend(O.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,e){var i=new RegExp(O.ui.autocomplete.escapeRegex(e),"i");return O.grep(t,function(t){return i.test(t.label||t.value||t)})}}),O.widget("ui.autocomplete",O.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),O("<div>").text(e).appendTo(this.liveRegion))}});O.ui.autocomplete;function u(){var t=O(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)}function d(t){var e=t.name,i=t.form,n=O([]);return e&&(e=e.replace(/'/g,"\\'"),n=i?O(i).find("[name='"+e+"'][type=radio]"):O("[name='"+e+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n}var h,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only";O.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,u),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,i=this.options,t="checkbox"===this.type||"radio"===this.type,n=t?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===h&&O(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||O(this).removeClass(n)}).bind("click"+this.eventNamespace,function(t){i.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),t&&this.element.bind("change"+this.eventNamespace,function(){e.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;O(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var t=e.element[0];d(t).not(t).map(function(){return O(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(i.disabled)return!1;O(this).addClass("ui-state-active"),h=this,e.document.one("mouseup",function(){h=null})}).bind("mouseup"+this.eventNamespace,function(){if(i.disabled)return!1;O(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(i.disabled)return!1;t.keyCode!==O.ui.keyCode.SPACE&&t.keyCode!==O.ui.keyCode.ENTER||O(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){O(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===O.ui.keyCode.SPACE&&O(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){if(this._super(t,e),"disabled"===t)return this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),void(e&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")));this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?d(this.element[0]).each(function(){O(this).is(":checked")?O(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):O(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(f),e=O("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,n=i.primary&&i.secondary,o=[];i.primary||i.secondary?(this.options.text&&o.push("ui-button-text-icon"+(n?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(o.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",O.trim(e)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),O.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var t="rtl"===this.element.css("direction"),e=this.element.find(this.options.items),i=e.filter(":ui-button");e.not(":ui-button").button(),i.button("refresh"),this.buttons=e.map(function(){return O(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return O(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});var g;O.ui.button;function m(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},O.extend(this._defaults,this.regional[""]),this.regional.en=O.extend(!0,{},this.regional[""]),this.regional["en-US"]=O.extend(!0,{},this.regional.en),this.dpDiv=v(O("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function v(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(e,"mouseout",function(){O(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&O(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&O(this).removeClass("ui-datepicker-next-hover")}).delegate(e,"mouseover",y)}function y(){O.datepicker._isDisabledDatepicker(g.inline?g.dpDiv.parent()[0]:g.input[0])||(O(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),O(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&O(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&O(this).addClass("ui-datepicker-next-hover"))}function b(t,e){for(var i in O.extend(t,e),e)null==e[i]&&(t[i]=e[i]);return t}O.extend(O.ui,{datepicker:{version:"1.11.4"}}),O.extend(m.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return b(this._defaults,t||{}),this},_attachDatepicker:function(t,e){var i,n,o;n="div"===(i=t.nodeName.toLowerCase())||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(o=this._newInst(O(t),n)).settings=O.extend({},e||{}),"input"===i?this._connectDatepicker(t,o):n&&this._inlineDatepicker(t,o)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?v(O("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,e){var i=O(t);e.append=O([]),e.trigger=O([]),i.hasClass(this.markerClassName)||(this._attachments(i,e),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(e),O.data(t,"datepicker",e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var i,n,o,r=this._get(e,"appendText"),s=this._get(e,"isRTL");e.append&&e.append.remove(),r&&(e.append=O("<span class='"+this._appendClass+"'>"+r+"</span>"),t[s?"before":"after"](e.append)),t.unbind("focus",this._showDatepicker),e.trigger&&e.trigger.remove(),"focus"!==(i=this._get(e,"showOn"))&&"both"!==i||t.focus(this._showDatepicker),"button"!==i&&"both"!==i||(n=this._get(e,"buttonText"),o=this._get(e,"buttonImage"),e.trigger=O(this._get(e,"buttonImageOnly")?O("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):O("<button type='button'></button>").addClass(this._triggerClass).html(o?O("<img/>").attr({src:o,alt:n,title:n}):n)),t[s?"before":"after"](e.trigger),e.trigger.click(function(){return O.datepicker._datepickerShowing&&O.datepicker._lastInput===t[0]?O.datepicker._hideDatepicker():(O.datepicker._datepickerShowing&&O.datepicker._lastInput!==t[0]&&O.datepicker._hideDatepicker(),O.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,o,r=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(o=n=i=0;o<t.length;o++)t[o].length>i&&(i=t[o].length,n=o);return n},r.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(t,e){var i=O(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(e.dpDiv),O.data(t,"datepicker",e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,i,n,o){var r,s,a,l,c,u=this._dialogInst;return u||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=O("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),O("body").append(this._dialogInput),(u=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},O.data(this._dialogInput[0],"datepicker",u)),b(u.settings,n||{}),e=e&&e.constructor===Date?this._formatDate(u,e):e,this._dialogInput.val(e),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(s=document.documentElement.clientWidth,a=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[s/2-100+l,a/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),u.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),O.blockUI&&O.blockUI(this.dpDiv),O.data(this._dialogInput[0],"datepicker",u),this},_destroyDatepicker:function(t){var e,i=O(t),n=O.data(t,"datepicker");i.hasClass(this.markerClassName)&&(e=t.nodeName.toLowerCase(),O.removeData(t,"datepicker"),"input"===e?(n.append.remove(),n.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==e&&"span"!==e||i.removeClass(this.markerClassName).empty(),g===n&&(g=null))},_enableDatepicker:function(e){var t,i,n=O(e),o=O.data(e,"datepicker");n.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==t&&"span"!==t||((i=n.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=O.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var t,i,n=O(e),o=O.data(e,"datepicker");n.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==t&&"span"!==t||((i=n.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=O.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(t){try{return O.data(t,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,i){var n,o,r,s,a=this._getInst(t);if(2===arguments.length&&"string"==typeof e)return"defaults"===e?O.extend({},O.datepicker._defaults):a?"all"===e?O.extend({},a.settings):this._get(a,e):null;n=e||{},"string"==typeof e&&((n={})[e]=i),a&&(this._curInst===a&&this._hideDatepicker(),o=this._getDateDatepicker(t,!0),r=this._getMinMaxDate(a,"min"),s=this._getMinMaxDate(a,"max"),b(a.settings,n),null!==r&&void 0!==n.dateFormat&&void 0===n.minDate&&(a.settings.minDate=this._formatDate(a,r)),null!==s&&void 0!==n.dateFormat&&void 0===n.maxDate&&(a.settings.maxDate=this._formatDate(a,s)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(O(t),a),this._autoSize(a),this._setDate(a,o),this._updateAlternate(a),this._updateDatepicker(a))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(t){var e,i,n,o=O.datepicker._getInst(t.target),r=!0,s=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,O.datepicker._datepickerShowing)switch(t.keyCode){case 9:O.datepicker._hideDatepicker(),r=!1;break;case 13:return(n=O("td."+O.datepicker._dayOverClass+":not(."+O.datepicker._currentClass+")",o.dpDiv))[0]&&O.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,n[0]),(e=O.datepicker._get(o,"onSelect"))?(i=O.datepicker._formatDate(o),e.apply(o.input?o.input[0]:null,[i,o])):O.datepicker._hideDatepicker(),!1;case 27:O.datepicker._hideDatepicker();break;case 33:O.datepicker._adjustDate(t.target,t.ctrlKey?-O.datepicker._get(o,"stepBigMonths"):-O.datepicker._get(o,"stepMonths"),"M");break;case 34:O.datepicker._adjustDate(t.target,t.ctrlKey?+O.datepicker._get(o,"stepBigMonths"):+O.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&O.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&O.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&O.datepicker._adjustDate(t.target,s?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&O.datepicker._adjustDate(t.target,t.ctrlKey?-O.datepicker._get(o,"stepBigMonths"):-O.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&O.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&O.datepicker._adjustDate(t.target,s?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&O.datepicker._adjustDate(t.target,t.ctrlKey?+O.datepicker._get(o,"stepBigMonths"):+O.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&O.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?O.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e,i,n=O.datepicker._getInst(t.target);if(O.datepicker._get(n,"constrainInput"))return e=O.datepicker._possibleChars(O.datepicker._get(n,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||i<" "||!e||-1<e.indexOf(i)},_doKeyUp:function(t){var e=O.datepicker._getInst(t.target);if(e.input.val()!==e.lastVal)try{O.datepicker.parseDate(O.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,O.datepicker._getFormatConfig(e))&&(O.datepicker._setDateFromField(e),O.datepicker._updateAlternate(e),O.datepicker._updateDatepicker(e))}catch(t){}return!0},_showDatepicker:function(t){var e,i,n,o,r,s,a;"input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=O("input",t.parentNode)[0]),O.datepicker._isDisabledDatepicker(t)||O.datepicker._lastInput===t||(e=O.datepicker._getInst(t),O.datepicker._curInst&&O.datepicker._curInst!==e&&(O.datepicker._curInst.dpDiv.stop(!0,!0),e&&O.datepicker._datepickerShowing&&O.datepicker._hideDatepicker(O.datepicker._curInst.input[0])),!1!==(n=(i=O.datepicker._get(e,"beforeShow"))?i.apply(t,[t,e]):{})&&(b(e.settings,n),e.lastVal=null,O.datepicker._lastInput=t,O.datepicker._setDateFromField(e),O.datepicker._inDialog&&(t.value=""),O.datepicker._pos||(O.datepicker._pos=O.datepicker._findPos(t),O.datepicker._pos[1]+=t.offsetHeight),o=!1,O(t).parents().each(function(){return!(o|="fixed"===O(this).css("position"))}),r={left:O.datepicker._pos[0],top:O.datepicker._pos[1]},O.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),O.datepicker._updateDatepicker(e),r=O.datepicker._checkOffset(e,r,o),e.dpDiv.css({position:O.datepicker._inDialog&&O.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),e.inline||(s=O.datepicker._get(e,"showAnim"),a=O.datepicker._get(e,"duration"),e.dpDiv.css("z-index",function(t){for(var e,i;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}(O(t))+1),O.datepicker._datepickerShowing=!0,O.effects&&O.effects.effect[s]?e.dpDiv.show(s,O.datepicker._get(e,"showOptions"),a):e.dpDiv[s||"show"](s?a:null),O.datepicker._shouldFocusInput(e)&&e.input.focus(),O.datepicker._curInst=e)))},_updateDatepicker:function(t){this.maxRows=4,(g=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var e,i=this._getNumberOfMonths(t),n=i[1],o=t.dpDiv.find("."+this._dayOverClass+" a");0<o.length&&y.apply(o.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<n&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",17*n+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===O.datepicker._curInst&&O.datepicker._datepickerShowing&&O.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(e=t.yearshtml,setTimeout(function(){e===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),e=t.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(t,e,i){var n=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(i?0:O(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:O(document).scrollTop());return e.left-=this._get(t,"isRTL")?n-r:0,e.left-=i&&e.left===t.input.offset().left?O(document).scrollLeft():0,e.top-=i&&e.top===t.input.offset().top+s?O(document).scrollTop():0,e.left-=Math.min(e.left,e.left+n>a&&n<a?Math.abs(e.left+n-a):0),e.top-=Math.min(e.top,e.top+o>l&&o<l?Math.abs(o+s):0),e},_findPos:function(t){for(var e,i=this._getInst(t),n=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||O.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return[(e=O(t).offset()).left,e.top]},_hideDatepicker:function(t){var e,i,n,o,r=this._curInst;!r||t&&r!==O.data(t,"datepicker")||this._datepickerShowing&&(e=this._get(r,"showAnim"),i=this._get(r,"duration"),n=function(){O.datepicker._tidyDialog(r)},O.effects&&(O.effects.effect[e]||O.effects[e])?r.dpDiv.hide(e,O.datepicker._get(r,"showOptions"),i,n):r.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?i:null,n),e||n(),this._datepickerShowing=!1,(o=this._get(r,"onClose"))&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),O.blockUI&&(O.unblockUI(),O("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(O.datepicker._curInst){var e=O(t.target),i=O.datepicker._getInst(e[0]);(e[0].id===O.datepicker._mainDivId||0!==e.parents("#"+O.datepicker._mainDivId).length||e.hasClass(O.datepicker.markerClassName)||e.closest("."+O.datepicker._triggerClass).length||!O.datepicker._datepickerShowing||O.datepicker._inDialog&&O.blockUI)&&(!e.hasClass(O.datepicker.markerClassName)||O.datepicker._curInst===i)||O.datepicker._hideDatepicker()}},_adjustDate:function(t,e,i){var n=O(t),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,e+("M"===i?this._get(o,"showCurrentAtPos"):0),i),this._updateDatepicker(o))},_gotoToday:function(t){var e,i=O(t),n=this._getInst(i[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(e=new Date,n.selectedDay=e.getDate(),n.drawMonth=n.selectedMonth=e.getMonth(),n.drawYear=n.selectedYear=e.getFullYear()),this._notifyChange(n),this._adjustDate(i)},_selectMonthYear:function(t,e,i){var n=O(t),o=this._getInst(n[0]);o["selected"+("M"===i?"Month":"Year")]=o["draw"+("M"===i?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(t,e,i,n){var o,r=O(t);O(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||((o=this._getInst(r[0])).selectedDay=o.currentDay=O("a",n).html(),o.selectedMonth=o.currentMonth=e,o.selectedYear=o.currentYear=i,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var e=O(t);this._selectDate(e,"")},_selectDate:function(t,e){var i,n=O(t),o=this._getInst(n[0]);e=null!=e?e:this._formatDate(o),o.input&&o.input.val(e),this._updateAlternate(o),(i=this._get(o,"onSelect"))?i.apply(o.input?o.input[0]:null,[e,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var e,i,n,o=this._get(t,"altField");o&&(e=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),n=this.formatDate(e,i,this._getFormatConfig(t)),O(o).each(function(){O(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[0<e&&e<6,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,r,t){if(null==i||null==r)throw"Invalid arguments";if(""===(r="object"==typeof r?r.toString():r+""))return null;function s(t){var e=a+1<i.length&&i.charAt(a+1)===t;return e&&a++,e}function e(t){var e=s(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n=new RegExp("^\\d{"+("y"===t?i:1)+","+i+"}"),o=r.substring(d).match(n);if(!o)throw"Missing number at position "+d;return d+=o[0].length,parseInt(o[0],10)}function n(t,e,i){var n=-1,o=O.map(s(t)?i:e,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(O.each(o,function(t,e){var i=e[1];if(r.substr(d,i.length).toLowerCase()===i.toLowerCase())return n=e[0],d+=i.length,!1}),-1!==n)return n+1;throw"Unknown name at position "+d}function o(){if(r.charAt(d)!==i.charAt(a))throw"Unexpected literal at position "+d;d++}var a,l,c,u,d=0,h=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff,p="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),f=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,g=(t?t.dayNames:null)||this._defaults.dayNames,m=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,v=(t?t.monthNames:null)||this._defaults.monthNames,y=-1,b=-1,_=-1,E=-1,w=!1;for(a=0;a<i.length;a++)if(w)"'"!==i.charAt(a)||s("'")?o():w=!1;else switch(i.charAt(a)){case"d":_=e("d");break;case"D":n("D",f,g);break;case"o":E=e("o");break;case"m":b=e("m");break;case"M":b=n("M",m,v);break;case"y":y=e("y");break;case"@":y=(u=new Date(e("@"))).getFullYear(),b=u.getMonth()+1,_=u.getDate();break;case"!":y=(u=new Date((e("!")-this._ticksTo1970)/1e4)).getFullYear(),b=u.getMonth()+1,_=u.getDate();break;case"'":s("'")?o():w=!0;break;default:o()}if(d<r.length&&(c=r.substr(d),!/^\s+/.test(c)))throw"Extra/unparsed characters found in date: "+c;if(-1===y?y=(new Date).getFullYear():y<100&&(y+=(new Date).getFullYear()-(new Date).getFullYear()%100+(y<=p?0:-100)),-1<E)for(b=1,_=E;;){if(_<=(l=this._getDaysInMonth(y,b-1)))break;b++,_-=l}if((u=this._daylightSavingAdjust(new Date(y,b-1,_))).getFullYear()!==y||u.getMonth()+1!==b||u.getDate()!==_)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(i,t,e){if(!t)return"";function o(t){var e=s+1<i.length&&i.charAt(s+1)===t;return e&&s++,e}function n(t,e,i){var n=""+e;if(o(t))for(;n.length<i;)n="0"+n;return n}function r(t,e,i,n){return o(t)?n[e]:i[e]}var s,a=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,l=(e?e.dayNames:null)||this._defaults.dayNames,c=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,u=(e?e.monthNames:null)||this._defaults.monthNames,d="",h=!1;if(t)for(s=0;s<i.length;s++)if(h)"'"!==i.charAt(s)||o("'")?d+=i.charAt(s):h=!1;else switch(i.charAt(s)){case"d":d+=n("d",t.getDate(),2);break;case"D":d+=r("D",t.getDay(),a,l);break;case"o":d+=n("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=n("m",t.getMonth()+1,2);break;case"M":d+=r("M",t.getMonth(),c,u);break;case"y":d+=o("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":o("'")?d+="'":h=!0;break;default:d+=i.charAt(s)}return d},_possibleChars:function(i){function t(t){var e=n+1<i.length&&i.charAt(n+1)===t;return e&&n++,e}var n,e="",o=!1;for(n=0;n<i.length;n++)if(o)"'"!==i.charAt(n)||t("'")?e+=i.charAt(n):o=!1;else switch(i.charAt(n)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":t("'")?e+="'":o=!0;break;default:e+=i.charAt(n)}return e},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,o=this._getDefaultDate(t),r=o,s=this._getFormatConfig(t);try{r=this.parseDate(i,n,s)||o}catch(t){n=e?"":n}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=n?r.getDate():0,t.currentMonth=n?r.getMonth():0,t.currentYear=n?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(a,t,e){var i,n,o=null==t||""===t?e:"string"==typeof t?function(t){try{return O.datepicker.parseDate(O.datepicker._get(a,"dateFormat"),t,O.datepicker._getFormatConfig(a))}catch(t){}for(var e=(t.toLowerCase().match(/^c/)?O.datepicker._getDate(a):null)||new Date,i=e.getFullYear(),n=e.getMonth(),o=e.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,s=r.exec(t);s;){switch(s[2]||"d"){case"d":case"D":o+=parseInt(s[1],10);break;case"w":case"W":o+=7*parseInt(s[1],10);break;case"m":case"M":n+=parseInt(s[1],10),o=Math.min(o,O.datepicker._getDaysInMonth(i,n));break;case"y":case"Y":i+=parseInt(s[1],10),o=Math.min(o,O.datepicker._getDaysInMonth(i,n))}s=r.exec(t)}return new Date(i,n,o)}(t):"number"==typeof t?isNaN(t)?e:(i=t,(n=new Date).setDate(n.getDate()+i),n):new Date(t.getTime());return(o=o&&"Invalid Date"===o.toString()?e:o)&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,o=t.selectedMonth,r=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),o===t.selectedMonth&&r===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){O.datepicker._adjustDate(i,-e,"M")},next:function(){O.datepicker._adjustDate(i,+e,"M")},hide:function(){O.datepicker._hideDatepicker()},today:function(){O.datepicker._gotoToday(i)},selectDay:function(){return O.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return O.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return O.datepicker._selectMonthYear(i,this,"Y"),!1}};O(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,o,r,s,a,l,c,u,d,h,p,f,g,m,v,y,b,_,E,w,C,T,x,D,I,O,R,k,S,A,M,N,K,L,P,F,B,H=new Date,z=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),$=this._get(t,"isRTL"),V=this._get(t,"showButtonPanel"),j=this._get(t,"hideIfNoPrevNext"),W=this._get(t,"navigationAsDateFormat"),G=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),U=this._get(t,"stepMonths"),Y=1!==G[0]||1!==G[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),J=t.drawMonth-q,tt=t.drawYear;if(J<0&&(J+=12,tt--),Q)for(e=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-G[0]*G[1]+1,Q.getDate())),e=Z&&e<Z?Z:e;this._daylightSavingAdjust(new Date(tt,J,1))>e;)--J<0&&(J=11,tt--);for(t.drawMonth=J,t.drawYear=tt,i=this._get(t,"prevText"),i=W?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,J-U,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,tt,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"e":"w")+"'>"+i+"</span></a>":j?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"e":"w")+"'>"+i+"</span></a>",o=this._get(t,"nextText"),o=W?this.formatDate(o,this._daylightSavingAdjust(new Date(tt,J+U,1)),this._getFormatConfig(t)):o,r=this._canAdjustMonth(t,1,tt,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"w":"e")+"'>"+o+"</span></a>":j?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"w":"e")+"'>"+o+"</span></a>",s=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?X:z,s=W?this.formatDate(s,a,this._getFormatConfig(t)):s,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=V?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+($?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+($?"":l)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(t,"showWeek"),h=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),_="",w=0;w<G[0];w++){for(C="",this.maxRows=4,T=0;T<G[1];T++){if(x=this._daylightSavingAdjust(new Date(tt,J,t.selectedDay)),D=" ui-corner-all",I="",Y){if(I+="<div class='ui-datepicker-group",1<G[1])switch(T){case 0:I+=" ui-datepicker-group-first",D=" ui-corner-"+($?"right":"left");break;case G[1]-1:I+=" ui-datepicker-group-last",D=" ui-corner-"+($?"left":"right");break;default:I+=" ui-datepicker-group-middle",D=""}I+="'>"}for(I+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+D+"'>"+(/all|left/.test(D)&&0===w?$?r:n:"")+(/all|right/.test(D)&&0===w?$?n:r:"")+this._generateMonthYearHeader(t,J,tt,Z,Q,0<w||0<T,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",O=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",E=0;E<7;E++)O+="<th scope='col'"+(5<=(E+u+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+h[R=(E+u)%7]+"'>"+p[R]+"</span></th>";for(I+=O+"</tr></thead><tbody>",k=this._getDaysInMonth(tt,J),tt===t.selectedYear&&J===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,k)),S=(this._getFirstDayOfMonth(tt,J)-u+7)%7,A=Math.ceil((S+k)/7),M=Y&&this.maxRows>A?this.maxRows:A,this.maxRows=M,N=this._daylightSavingAdjust(new Date(tt,J,1-S)),K=0;K<M;K++){for(I+="<tr>",L=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(N)+"</td>":"",E=0;E<7;E++)P=m?m.apply(t.input?t.input[0]:null,[N]):[!0,""],B=(F=N.getMonth()!==J)&&!y||!P[0]||Z&&N<Z||Q&&Q<N,L+="<td class='"+(5<=(E+u+6)%7?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(N.getTime()===x.getTime()&&J===t.selectedMonth&&t._keyEvent||b.getTime()===N.getTime()&&b.getTime()===x.getTime()?" "+this._dayOverClass:"")+(B?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+P[1]+(N.getTime()===X.getTime()?" "+this._currentClass:"")+(N.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!P[2]?"":" title='"+P[2].replace(/'/g,"&#39;")+"'")+(B?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":B?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===z.getTime()?" ui-state-highlight":"")+(N.getTime()===X.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);I+=L+"</tr>"}11<++J&&(J=0,tt++),C+=I+="</tbody></table>"+(Y?"</div>"+(0<G[0]&&T===G[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}_+=C}return _+=c,t._keyEvent=!1,_},_generateMonthYearHeader:function(t,e,i,n,o,r,s,a){var l,c,u,d,h,p,f,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(r||!m)_+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=n&&n.getFullYear()===i,c=o&&o.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!l||u>=n.getMonth())&&(!c||u<=o.getMonth())&&(_+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+a[u]+"</option>");_+="</select>"}if(y||(b+=_+(!r&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(t,"yearRange").split(":"),h=(new Date).getFullYear(),f=(p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?h+parseInt(t,10):parseInt(t,10);return isNaN(e)?h:e})(d[0]),g=Math.max(f,p(d[1]||"")),f=n?Math.max(f,n.getFullYear()):f,g=o?Math.min(g,o.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=g;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!r&&m&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"===i?e:0),o=t.drawMonth+("M"===i?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(n,o))+("D"===i?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,o,r)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),o=i&&e<i?i:e;return n&&n<o?n:o},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var o=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(i,n+(e<0?e:o[0]*o[1]),1));return e<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var i,n,o=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),s=null,a=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),s=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(s+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!o||e.getTime()>=o.getTime())&&(!r||e.getTime()<=r.getTime())&&(!s||e.getFullYear()>=s)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var o=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),o,this._getFormatConfig(t))}}),O.fn.datepicker=function(t){if(!this.length)return this;O.datepicker.initialized||(O(document).mousedown(O.datepicker._checkExternalClick),O.datepicker.initialized=!0),0===O("#"+O.datepicker._mainDivId).length&&O("body").append(O.datepicker.dpDiv);var e=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?O.datepicker["_"+t+"Datepicker"].apply(O.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?O.datepicker["_"+t+"Datepicker"].apply(O.datepicker,[this].concat(e)):O.datepicker._attachDatepicker(this,t)}):O.datepicker["_"+t+"Datepicker"].apply(O.datepicker,[this[0]].concat(e))},O.datepicker=new m,O.datepicker.initialized=!1,O.datepicker.uuid=(new Date).getTime(),O.datepicker.version="1.11.4";O.datepicker;O.widget("ui.draggable",O.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return this._blurActiveElement(t),!(this.helper||e.disabled||0<O(t.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blockFrames(!0===e.iframeFix?"iframe":e.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=O(this);return O("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=this.document[0];if(this.handleElement.is(t.target))try{e.activeElement&&"body"!==e.activeElement.nodeName.toLowerCase()&&O(e.activeElement).blur()}catch(t){}},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),O.ui.ddmanager&&(O.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===O(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),O.ui.ddmanager&&!e.dropBehaviour&&O.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),O.ui.ddmanager&&O.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,e){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!e){var i=this._uiHash();if(!1===this._trigger("drag",t,i))return this._mouseUp({}),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",O.ui.ddmanager&&O.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=this,i=!1;return O.ui.ddmanager&&!this.options.dropBehaviour&&(i=O.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||O.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?O(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),O.ui.ddmanager&&O.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),O.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!O(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var e=this.options,i=O.isFunction(e.helper),n=i?O(e.helper.apply(this.element[0],[t])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo),i&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),O.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&O.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,n=this.options,o=this.document[0];this.relativeContainer=null,n.containment?"window"!==n.containment?"document"!==n.containment?n.containment.constructor!==Array?("parent"===n.containment&&(n.containment=this.helper[0].parentNode),(i=(e=O(n.containment))[0])&&(t=/(scroll|auto)/.test(e.css("overflow")),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=e)):this.containment=n.containment:this.containment=[0,0,O(o).width()-this.helperProportions.width-this.margins.left,(O(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[O(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,O(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,O(window).scrollLeft()+O(window).width()-this.helperProportions.width-this.margins.left,O(window).scrollTop()+(O(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e=e||this.position;var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(i=this.relativeContainer?(n=this.relativeContainer.offset(),[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,e,i){return i=i||this._uiHash(),O.ui.plugin.call(this,t,[e,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),O.Widget.prototype._trigger.call(this,t,e,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),O.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,i){var n=O.extend({},t,{item:i.element});i.sortables=[],O(i.options.connectToSortable).each(function(){var t=O(this).sortable("instance");t&&!t.options.disabled&&(i.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,n))})},stop:function(e,t,i){var n=O.extend({},t,{item:i.element});i.cancelHelperRemoval=!1,O.each(i.sortables,function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(i,n,o){O.each(o.sortables,function(){var t=!1,e=this;e.positionAbs=o.positionAbs,e.helperProportions=o.helperProportions,e.offset.click=o.offset.click,e._intersectsWith(e.containerCache)&&(t=!0,O.each(o.sortables,function(){return this.positionAbs=o.positionAbs,this.helperProportions=o.helperProportions,this.offset.click=o.offset.click,this!==e&&this._intersectsWith(this.containerCache)&&O.contains(e.element[0],this.element[0])&&(t=!1),t})),t?(e.isOver||(e.isOver=1,o._parent=n.helper.parent(),e.currentItem=n.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return n.helper[0]},i.target=e.currentItem[0],e._mouseCapture(i,!0),e._mouseStart(i,!0,!0),e.offset.click.top=o.offset.click.top,e.offset.click.left=o.offset.click.left,e.offset.parent.left-=o.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=o.offset.parent.top-e.offset.parent.top,o._trigger("toSortable",i),o.dropped=e.element,O.each(o.sortables,function(){this.refreshPositions()}),o.currentItem=o.element,e.fromOutside=o),e.currentItem&&(e._mouseDrag(i),n.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,e.options.revert=!1,e._trigger("out",i,e._uiHash(e)),e._mouseStop(i,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),n.helper.appendTo(o._parent),o._refreshOffsets(i),n.position=o._generatePosition(i,!0),o._trigger("fromSortable",i),o.dropped=!1,O.each(o.sortables,function(){this.refreshPositions()}))})}}),O.ui.plugin.add("draggable","cursor",{start:function(t,e,i){var n=O("body"),o=i.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(t,e,i){var n=i.options;n._cursor&&O("body").css("cursor",n._cursor)}}),O.ui.plugin.add("draggable","opacity",{start:function(t,e,i){var n=O(e.helper),o=i.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(t,e,i){var n=i.options;n._opacity&&O(e.helper).css("opacity",n._opacity)}}),O.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,e,i){var n=i.options,o=!1,r=i.scrollParentNotHidden[0],s=i.document[0];r!==s&&"HTML"!==r.tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+r.offsetHeight-t.pageY<n.scrollSensitivity?r.scrollTop=o=r.scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(r.scrollTop=o=r.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+r.offsetWidth-t.pageX<n.scrollSensitivity?r.scrollLeft=o=r.scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(r.scrollLeft=o=r.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-O(s).scrollTop()<n.scrollSensitivity?o=O(s).scrollTop(O(s).scrollTop()-n.scrollSpeed):O(window).height()-(t.pageY-O(s).scrollTop())<n.scrollSensitivity&&(o=O(s).scrollTop(O(s).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-O(s).scrollLeft()<n.scrollSensitivity?o=O(s).scrollLeft(O(s).scrollLeft()-n.scrollSpeed):O(window).width()-(t.pageX-O(s).scrollLeft())<n.scrollSensitivity&&(o=O(s).scrollLeft(O(s).scrollLeft()+n.scrollSpeed)))),!1!==o&&O.ui.ddmanager&&!n.dropBehaviour&&O.ui.ddmanager.prepareOffsets(i,t)}}),O.ui.plugin.add("draggable","snap",{start:function(t,e,i){var n=i.options;i.snapElements=[],O(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=O(this),e=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e,i){var n,o,r,s,a,l,c,u,d,h,p=i.options,f=p.snapTolerance,g=e.offset.left,m=g+i.helperProportions.width,v=e.offset.top,y=v+i.helperProportions.height;for(d=i.snapElements.length-1;0<=d;d--)l=(a=i.snapElements[d].left-i.margins.left)+i.snapElements[d].width,u=(c=i.snapElements[d].top-i.margins.top)+i.snapElements[d].height,m<a-f||l+f<g||y<c-f||u+f<v||!O.contains(i.snapElements[d].item.ownerDocument,i.snapElements[d].item)?(i.snapElements[d].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,O.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(n=Math.abs(c-y)<=f,o=Math.abs(u-v)<=f,r=Math.abs(a-m)<=f,s=Math.abs(l-g)<=f,n&&(e.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),o&&(e.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),r&&(e.position.left=i._convertPositionTo("relative",{top:0,left:a-i.helperProportions.width}).left),s&&(e.position.left=i._convertPositionTo("relative",{top:0,left:l}).left)),h=n||o||r||s,"outer"!==p.snapMode&&(n=Math.abs(c-v)<=f,o=Math.abs(u-y)<=f,r=Math.abs(a-g)<=f,s=Math.abs(l-m)<=f,n&&(e.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),o&&(e.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),r&&(e.position.left=i._convertPositionTo("relative",{top:0,left:a}).left),s&&(e.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left)),!i.snapElements[d].snapping&&(n||o||r||s||h)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,O.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=n||o||r||s||h)}}),O.ui.plugin.add("draggable","stack",{start:function(t,e,i){var n,o=i.options,r=O.makeArray(O(o.stack)).sort(function(t,e){return(parseInt(O(t).css("zIndex"),10)||0)-(parseInt(O(e).css("zIndex"),10)||0)});r.length&&(n=parseInt(O(r[0]).css("zIndex"),10)||0,O(r).each(function(t){O(this).css("zIndex",n+t)}),this.css("zIndex",n+r.length))}}),O.ui.plugin.add("draggable","zIndex",{start:function(t,e,i){var n=O(e.helper),o=i.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(t,e,i){var n=i.options;n._zIndex&&O(e.helper).css("zIndex",n._zIndex)}});O.ui.draggable;O.widget("ui.resizable",O.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(t,e){if("hidden"===O(t).css("overflow"))return!1;var i,n=e&&"left"===e?"scrollLeft":"scrollTop";return 0<t[n]||(t[n]=1,i=0<t[n],t[n]=0,i)},_create:function(){var t,e,i,n,r=this,o=this.options;if(this.element.addClass("ui-resizable"),O.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(O("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(O(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=O(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},e=0;e<t.length;e++)i=O.trim(t[e]),(n=O("<div class='ui-resizable-handle "+("ui-resizable-"+i)+"'></div>")).css({zIndex:o.zIndex}),"se"===i&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(n);this._renderAxis=function(t){var e,i,n,o;for(e in t=t||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=O(this.handles[e]),this._on(this.handles[e],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=O(this.handles[e],this.element),o=/sw|ne|nw|se|n|s/.test(e)?i.outerHeight():i.outerWidth(),n=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){r.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=n&&n[1]?n[1]:"se")}),o.autoHide&&(this._handles.hide(),O(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||(O(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){o.disabled||r.resizing||(O(this).addClass("ui-resizable-autohide"),r._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();function t(t){O(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()}var e;return this.elementIsWrapper&&(t(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var e,i,n=!1;for(e in this.handles)(i=O(this.handles[e])[0])!==t.target&&!O.contains(i,t.target)||(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var e,i,n,o=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),o.containment&&(e+=O(o.containment).scrollLeft()||0,i+=O(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:e,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=O(".ui-resizable-"+this.axis).css("cursor"),O("body").css("cursor","auto"===n?this.axis+"-resize":n),r.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e,i,n=this.originalMousePosition,o=this.axis,r=t.pageX-n.left||0,s=t.pageY-n.top||0,a=this._change[o];return this._updatePrevProperties(),a&&(e=a.apply(this,[t,r,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(e=this._updateRatio(e,t)),e=this._respectSize(e,t),this._updateCache(e),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),O.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges())),!1},_mouseStop:function(t){this.resizing=!1;var e,i,n,o,r,s,a,l=this.options,c=this;return this._helper&&(n=(i=(e=this._proportionallyResizeElements).length&&/textarea/i.test(e[0].nodeName))&&this._hasScroll(e[0],"left")?0:c.sizeDiff.height,o=i?0:c.sizeDiff.width,r={width:c.helper.width()-o,height:c.helper.height()-n},s=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,a=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(O.extend(r,{top:a,left:s})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),O("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),n>r.minHeight&&(r.minHeight=n),i<r.maxWidth&&(r.maxWidth=i),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return r&&(t.width=e.minWidth),s&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),r&&c&&(t.left=a-e.minWidth),n&&c&&(t.left=a-e.maxWidth),s&&u&&(t.top=l-e.minHeight),o&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseInt(n[e],10)||0,i[e]+=parseInt(o[e],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||O("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(t,e,i){return O.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},sw:function(t,e,i){return O.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,i]))},ne:function(t,e,i){return O.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},nw:function(t,e,i){return O.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,i]))}},_propagate:function(t,e){O.ui.plugin.call(this,t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),O.ui.plugin.add("resizable","animate",{stop:function(e){var i=O(this).resizable("instance"),t=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),r=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,s=o?0:i.sizeDiff.width,a={width:i.size.width-s,height:i.size.height-r},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(O.extend(a,c&&l?{top:c,left:l}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var t={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&O(n[0]).css({width:t.width,height:t.height}),i._updateCache(t),i._propagate("resize",e)}})}}),O.ui.plugin.add("resizable","containment",{start:function(){var i,n,t,e,o,r,s,a=O(this).resizable("instance"),l=a.options,c=a.element,u=l.containment,d=u instanceof O?u.get(0):/parent/.test(u)?c.parent().get(0):u;d&&(a.containerElement=O(d),/document/.test(u)||u===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:O(document),left:0,top:0,width:O(document).width(),height:O(document).height()||document.body.parentNode.scrollHeight}):(i=O(d),n=[],O(["Top","Right","Left","Bottom"]).each(function(t,e){n[t]=a._num(i.css("padding"+e))}),a.containerOffset=i.offset(),a.containerPosition=i.position(),a.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},t=a.containerOffset,e=a.containerSize.height,o=a.containerSize.width,r=a._hasScroll(d,"left")?d.scrollWidth:o,s=a._hasScroll(d)?d.scrollHeight:e,a.parentData={element:d,left:t.left,top:t.top,width:r,height:s}))},resize:function(t){var e,i,n,o,r=O(this).resizable("instance"),s=r.options,a=r.containerOffset,l=r.position,c=r._aspectRatio||t.shiftKey,u={top:0,left:0},d=r.containerElement,h=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=a),l.left<(r._helper?a.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-a.left:r.position.left-u.left),c&&(r.size.height=r.size.width/r.aspectRatio,h=!1),r.position.left=s.helper?a.left:0),l.top<(r._helper?a.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-a.top:r.position.top),c&&(r.size.width=r.size.height*r.aspectRatio,h=!1),r.position.top=r._helper?a.top:0),n=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),n&&o?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),e=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-u.left:r.offset.left-a.left)),i=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-u.top:r.offset.top-a.top)),e+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-e,c&&(r.size.height=r.size.width/r.aspectRatio,h=!1)),i+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-i,c&&(r.size.width=r.size.height*r.aspectRatio,h=!1)),h||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var t=O(this).resizable("instance"),e=t.options,i=t.containerOffset,n=t.containerPosition,o=t.containerElement,r=O(t.helper),s=r.offset(),a=r.outerWidth()-t.sizeDiff.width,l=r.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(o.css("position"))&&O(this).css({left:s.left-n.left-i.left,width:a,height:l}),t._helper&&!e.animate&&/static/.test(o.css("position"))&&O(this).css({left:s.left-n.left-i.left,width:a,height:l})}}),O.ui.plugin.add("resizable","alsoResize",{start:function(){var t=O(this).resizable("instance").options;O(t.alsoResize).each(function(){var t=O(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var e=O(this).resizable("instance"),n=e.options,o=e.originalSize,r=e.originalPosition,s={height:e.size.height-o.height||0,width:e.size.width-o.width||0,top:e.position.top-r.top||0,left:e.position.left-r.left||0};O(n.alsoResize).each(function(){var t=O(this),n=O(this).data("ui-resizable-alsoresize"),o={},e=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];O.each(e,function(t,e){var i=(n[e]||0)+(s[e]||0);i&&0<=i&&(o[e]=i||null)}),t.css(o)})},stop:function(){O(this).removeData("resizable-alsoresize")}}),O.ui.plugin.add("resizable","ghost",{start:function(){var t=O(this).resizable("instance"),e=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof e.ghost?e.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=O(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=O(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),O.ui.plugin.add("resizable","grid",{resize:function(){var t,e=O(this).resizable("instance"),i=e.options,n=e.size,o=e.originalSize,r=e.originalPosition,s=e.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,u=Math.round((n.width-o.width)/l)*l,d=Math.round((n.height-o.height)/c)*c,h=o.width+u,p=o.height+d,f=i.maxWidth&&i.maxWidth<h,g=i.maxHeight&&i.maxHeight<p,m=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>p;i.grid=a,m&&(h+=l),v&&(p+=c),f&&(h-=l),g&&(p-=c),/^(se|s|e)$/.test(s)?(e.size.width=h,e.size.height=p):/^(ne)$/.test(s)?(e.size.width=h,e.size.height=p,e.position.top=r.top-d):/^(sw)$/.test(s)?(e.size.width=h,e.size.height=p,e.position.left=r.left-u):((p-c<=0||h-l<=0)&&(t=e._getPaddingPlusBorderDimensions(this)),0<p-c?(e.size.height=p,e.position.top=r.top-d):(p=c-t.height,e.size.height=p,e.position.top=r.top+o.height-p),0<h-l?(e.size.width=h,e.position.left=r.left-u):(h=l-t.width,e.size.width=h,e.position.left=r.left+o.width-h))}});O.ui.resizable,O.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=O(this).css(t).offset().top;e<0&&O(this).css("top",t.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&O.fn.draggable&&this._makeDraggable(),this.options.resizable&&O.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?O(t):this.document.find(t||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:O.noop,enable:O.noop,close:function(t){var e,i=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t)){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{(e=this.document[0].activeElement)&&"body"!==e.nodeName.toLowerCase()&&O(e).blur()}catch(t){}this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+O(this).css("z-index")}).get(),o=Math.max.apply(null,n);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),i=!0),i&&!e&&this._trigger("focus",t),i},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=O(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;(t=t||this.element.find("[autofocus]")).length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(t){function e(){var t=this.document[0].activeElement;this.uiDialog[0]===t||O.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),e.call(this),this._delay(e)},_createWrapper:function(){this.uiDialog=O("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===O.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===O.ui.keyCode.TAB&&!t.isDefaultPrevented()){var e=this.uiDialog.find(":tabbable"),i=e.filter(":first"),n=e.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){i.focus()}),t.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=O("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){O(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=O("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),t=O("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=O("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=O("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var o=this,t=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),O.isEmptyObject(t)||O.isArray(t)&&!t.length?this.uiDialog.removeClass("ui-dialog-buttons"):(O.each(t,function(t,e){var i,n;e=O.isFunction(e)?{click:e,text:t}:e,e=O.extend({type:"button"},e),i=e.click,e.click=function(){i.apply(o.element[0],arguments)},n={icons:e.icons,text:e.showText},delete e.icons,delete e.showText,O("<button></button>",e).button(n).appendTo(o.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var o=this,r=this.options;function s(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){O(this).addClass("ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",t,s(e))},drag:function(t,e){o._trigger("drag",t,s(e))},stop:function(t,e){var i=e.offset.left-o.document.scrollLeft(),n=e.offset.top-o.document.scrollTop();r.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=n?"+":"")+n,of:o.window},O(this).removeClass("ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",t,s(e))}})},_makeResizable:function(){var r=this,s=this.options,t=s.resizable,e=this.uiDialog.css("position"),i="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";function a(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:i,start:function(t,e){O(this).addClass("ui-dialog-resizing"),r._blockFrames(),r._trigger("resizeStart",t,a(e))},resize:function(t,e){r._trigger("resize",t,a(e))},stop:function(t,e){var i=r.uiDialog.offset(),n=i.left-r.document.scrollLeft(),o=i.top-r.document.scrollTop();s.height=r.uiDialog.height(),s.width=r.uiDialog.width(),s.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=o?"+":"")+o,of:r.window},O(this).removeClass("ui-dialog-resizing"),r._unblockFrames(),r._trigger("resizeStop",t,a(e))}}).css("position",e)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=O(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),e=O.inArray(this,t);-1!==e&&t.splice(e,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(t){var i=this,n=!1,o={};O.each(t,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(n=!0),t in i.resizableRelatedOptions&&(o[t]=e)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,e){var i,n,o=this.uiDialog;"dialogClass"===t&&o.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&((i=o.is(":data(ui-draggable)"))&&!e&&o.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((n=o.is(":data(ui-resizable)"))&&!e&&o.resizable("destroy"),n&&"string"==typeof e&&o.resizable("option","handles",e),n||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=O(this);return O("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!O(t.target).closest(".ui-dialog").length||!!O(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=O("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}});function _(t,e,i){return e<=t&&t<e+i}O.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=O.isFunction(i)?i:function(t){return t.is(i)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(e.scope),e.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){O.ui.ddmanager.droppables[t]=O.ui.ddmanager.droppables[t]||[],O.ui.ddmanager.droppables[t].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=O.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,e){if("accept"===t)this.accept=O.isFunction(e)?e:function(t){return t.is(e)};else if("scope"===t){var i=O.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(e)}this._super(t,e)},_activate:function(t){var e=O.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=O.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=O.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=O.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(e)))},_drop:function(e,t){var i=t||O.ui.ddmanager.current,n=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=O(this).droppable("instance");if(t.options.greedy&&!t.options.disabled&&t.options.scope===i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&O.ui.intersect(i,O.extend(t,{offset:t.element.offset()}),t.options.tolerance,e))return!(n=!0)}),!n&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(i)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),O.ui.intersect=function(t,e,i,n){if(!e.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,r=(t.positionAbs||t.position.absolute).top+t.margins.top,s=o+t.helperProportions.width,a=r+t.helperProportions.height,l=e.offset.left,c=e.offset.top,u=l+e.proportions().width,d=c+e.proportions().height;switch(i){case"fit":return l<=o&&s<=u&&c<=r&&a<=d;case"intersect":return l<o+t.helperProportions.width/2&&s-t.helperProportions.width/2<u&&c<r+t.helperProportions.height/2&&a-t.helperProportions.height/2<d;case"pointer":return _(n.pageY,c,e.proportions().height)&&_(n.pageX,l,e.proportions().width);case"touch":return(c<=r&&r<=d||c<=a&&a<=d||r<c&&d<a)&&(l<=o&&o<=u||l<=s&&s<=u||o<l&&u<s);default:return!1}},O.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var i,n,o=O.ui.ddmanager.droppables[t.options.scope]||[],r=e?e.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(i=0;i<o.length;i++)if(!(o[i].options.disabled||t&&!o[i].accept.call(o[i].element[0],t.currentItem||t.element))){for(n=0;n<s.length;n++)if(s[n]===o[i].element[0]){o[i].proportions().height=0;continue t}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===r&&o[i]._activate.call(o[i],e),o[i].offset=o[i].element.offset(),o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}))}},drop:function(t,e){var i=!1;return O.each((O.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&O.ui.intersect(t,this,this.options.tolerance,e)&&(i=this._drop.call(this,e)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))}),i},dragStart:function(t,e){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||O.ui.ddmanager.prepareOffsets(t,e)})},drag:function(r,s){r.options.refreshPositions&&O.ui.ddmanager.prepareOffsets(r,s),O.each(O.ui.ddmanager.droppables[r.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var t,e,i,n=O.ui.intersect(r,this,this.options.tolerance,s),o=!n&&this.isover?"isout":n&&!this.isover?"isover":null;o&&(this.options.greedy&&(e=this.options.scope,(i=this.element.parents(":data(ui-droppable)").filter(function(){return O(this).droppable("instance").options.scope===e})).length&&((t=O(i[0]).droppable("instance")).greedyChild="isover"===o)),t&&"isover"===o&&(t.isover=!1,t.isout=!0,t._out.call(t,s)),this[o]=!0,this["isout"===o?"isover":"isout"]=!1,this["isover"===o?"_over":"_out"].call(this,s),t&&"isout"===o&&(t.isout=!1,t.isover=!0,t._over.call(t,s)))}})},dragStop:function(t,e){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||O.ui.ddmanager.prepareOffsets(t,e)}};O.ui.droppable;var E,w,C,T,x,D,I,R,k,S,A,M,N,K,L,P,F,B,H,z,$="ui-effects-",V=O;function j(t,e,i){var n=R[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:t<0?0:n.max<t?n.max:t)}function W(s){var a=D(),l=a._rgba=[];return s=s.toLowerCase(),A(x,function(t,e){var i,n=e.re.exec(s),o=n&&e.parse(n),r=e.space||"rgba";if(o)return i=a[r](o),a[I[r].cache]=i[I[r].cache],l=a._rgba=i._rgba,!1}),l.length?("0,0,0,0"===l.join()&&E.extend(l,C.transparent),a):C[s]}function G(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function q(t){var e,i,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)"string"==typeof n[e=n[i]]&&(o[O.camelCase(e)]=n[e]);else for(e in n)"string"==typeof n[e]&&(o[e]=n[e]);return o}function U(t,e,i,n){return O.isPlainObject(t)&&(t=(e=t).effect),t={effect:t},null==e&&(e={}),O.isFunction(e)&&(n=e,i=null,e={}),"number"!=typeof e&&!O.fx.speeds[e]||(n=i,i=e,e={}),O.isFunction(i)&&(n=i,i=null),e&&O.extend(t,e),i=i||e.duration,t.duration=O.fx.off?0:"number"==typeof i?i:i in O.fx.speeds?O.fx.speeds[i]:O.fx.speeds._default,t.complete=n||e.complete,t}function Y(t){return!(t&&"number"!=typeof t&&!O.fx.speeds[t])||("string"==typeof t&&!O.effects.effect[t]||(!!O.isFunction(t)||"object"==typeof t&&!t.effect))}O.effects={effect:{}},T=/^([\-+])=\s*(\d+\.?\d*)/,x=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],D=(E=V).Color=function(t,e,i,n){return new E.Color.fn.parse(t,e,i,n)},I={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},R={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},k=D.support={},S=E("<p>")[0],A=E.each,S.style.cssText="background-color:rgba(1,1,1,.5)",k.rgba=-1<S.style.backgroundColor.indexOf("rgba"),A(I,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),D.fn=E.extend(D.prototype,{parse:function(o,t,e,i){if(o===w)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=E(o).css(t),t=w);var r=this,n=E.type(o),s=this._rgba=[];return t!==w&&(o=[o,t,e,i],n="array"),"string"===n?this.parse(W(o)||C._default):"array"===n?(A(I.rgba.props,function(t,e){s[e.idx]=j(o[e.idx],e)}),this):"object"===n?(A(I,o instanceof D?function(t,e){o[e.cache]&&(r[e.cache]=o[e.cache].slice())}:function(t,i){var n=i.cache;A(i.props,function(t,e){if(!r[n]&&i.to){if("alpha"===t||null==o[t])return;r[n]=i.to(r._rgba)}r[n][e.idx]=j(o[t],e,!0)}),r[n]&&E.inArray(null,r[n].slice(0,3))<0&&(r[n][3]=1,i.from&&(r._rgba=i.from(r[n])))}),this):void 0},is:function(t){var o=D(t),r=!0,s=this;return A(I,function(t,e){var i,n=o[e.cache];return n&&(i=s[e.cache]||e.to&&e.to(s._rgba)||[],A(e.props,function(t,e){if(null!=n[e.idx])return r=n[e.idx]===i[e.idx]})),r}),r},_space:function(){var i=[],n=this;return A(I,function(t,e){n[e.cache]&&i.push(t)}),i.pop()},transition:function(t,s){var a=D(t),e=a._space(),i=I[e],n=0===this.alpha()?D("transparent"):this,l=n[i.cache]||i.to(n._rgba),c=l.slice();return a=a[i.cache],A(i.props,function(t,e){var i=e.idx,n=l[i],o=a[i],r=R[e.type]||{};null!==o&&(null===n?c[i]=o:(r.mod&&(o-n>r.mod/2?n+=r.mod:n-o>r.mod/2&&(n-=r.mod)),c[i]=j((o-n)*s+n,e)))}),this[e](c)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),i=e.pop(),n=D(t)._rgba;return D(E.map(e,function(t,e){return(1-i)*n[e]+i*t}))},toRgbaString:function(){var t="rgba(",e=E.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=E.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),i=e.pop();return t&&e.push(~~(255*i)),"#"+E.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),D.fn.parse.prototype=D.fn,I.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,o=t[1]/255,r=t[2]/255,s=t[3],a=Math.max(n,o,r),l=Math.min(n,o,r),c=a-l,u=a+l,d=.5*u;return e=l===a?0:n===a?60*(o-r)/c+360:o===a?60*(r-n)/c+120:60*(n-o)/c+240,i=0==c?0:d<=.5?c/u:c/(2-u),[Math.round(e)%360,i,d,null==s?1:s]},I.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],o=t[3],r=n<=.5?n*(1+i):n+i-n*i,s=2*n-r;return[Math.round(255*G(s,r,e+1/3)),Math.round(255*G(s,r,e)),Math.round(255*G(s,r,e-1/3)),o]},A(I,function(l,t){var i=t.props,s=t.cache,a=t.to,c=t.from;D.fn[l]=function(t){if(a&&!this[s]&&(this[s]=a(this._rgba)),t===w)return this[s].slice();var e,n=E.type(t),o="array"===n||"object"===n?t:arguments,r=this[s].slice();return A(i,function(t,e){var i=o["object"===n?t:e.idx];null==i&&(i=r[e.idx]),r[e.idx]=j(i,e)}),c?((e=D(c(r)))[s]=r,e):D(r)},A(i,function(s,a){D.fn[s]||(D.fn[s]=function(t){var e,i=E.type(t),n="alpha"===s?this._hsla?"hsla":"rgba":l,o=this[n](),r=o[a.idx];return"undefined"===i?r:("function"===i&&(t=t.call(this,r),i=E.type(t)),null==t&&a.empty?this:("string"===i&&(e=T.exec(t))&&(t=r+parseFloat(e[2])*("+"===e[1]?1:-1)),o[a.idx]=t,this[n](o)))})})}),D.hook=function(t){var e=t.split(" ");A(e,function(t,r){E.cssHooks[r]={set:function(t,e){var i,n,o="";if("transparent"!==e&&("string"!==E.type(e)||(i=W(e)))){if(e=D(i||e),!k.rgba&&1!==e._rgba[3]){for(n="backgroundColor"===r?t.parentNode:t;(""===o||"transparent"===o)&&n&&n.style;)try{o=E.css(n,"backgroundColor"),n=n.parentNode}catch(t){}e=e.blend(o&&"transparent"!==o?o:"_default")}e=e.toRgbaString()}try{t.style[r]=e}catch(t){}}},E.fx.step[r]=function(t){t.colorInit||(t.start=D(t.elem,r),t.end=D(t.end),t.colorInit=!0),E.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})},D.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),E.cssHooks.borderColor={expand:function(i){var n={};return A(["Top","Right","Bottom","Left"],function(t,e){n["border"+e+"Color"]=i}),n}},C=E.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},L=["add","remove","toggle"],P={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},O.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){O.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(V.style(t.elem,e,t.end),t.setAttr=!0)}}),O.fn.addBack||(O.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),O.effects.animateClass=function(o,t,e,i){var r=O.speed(t,e,i);return this.queue(function(){var t,i=O(this),e=i.attr("class")||"",n=r.children?i.find("*").addBack():i;n=n.map(function(){return{el:O(this),start:q(this)}}),(t=function(){O.each(L,function(t,e){o[e]&&i[e+"Class"](o[e])})})(),n=n.map(function(){return this.end=q(this.el[0]),this.diff=function(t,e){var i,n,o={};for(i in e)n=e[i],t[i]!==n&&(P[i]||!O.fx.step[i]&&isNaN(parseFloat(n))||(o[i]=n));return o}(this.start,this.end),this}),i.attr("class",e),n=n.map(function(){var t=this,e=O.Deferred(),i=O.extend({},r,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,i),e.promise()}),O.when.apply(O,n.get()).done(function(){t(),O.each(arguments,function(){var e=this.el;O.each(this.diff,function(t){e.css(t,"")})}),r.complete.call(i[0])})})},O.fn.extend({addClass:(K=O.fn.addClass,function(t,e,i,n){return e?O.effects.animateClass.call(this,{add:t},e,i,n):K.apply(this,arguments)}),removeClass:(N=O.fn.removeClass,function(t,e,i,n){return 1<arguments.length?O.effects.animateClass.call(this,{remove:t},e,i,n):N.apply(this,arguments)}),toggleClass:(M=O.fn.toggleClass,function(t,e,i,n,o){return"boolean"==typeof e||void 0===e?i?O.effects.animateClass.call(this,e?{add:t}:{remove:t},i,n,o):M.apply(this,arguments):O.effects.animateClass.call(this,{toggle:t},e,i,n)}),switchClass:function(t,e,i,n,o){return O.effects.animateClass.call(this,{add:e,remove:t},i,n,o)}}),O.extend(O.effects,{version:"1.11.4",save:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.data($+e[i],t[0].style[e[i]])},restore:function(t,e){var i,n;for(n=0;n<e.length;n++)null!==e[n]&&(void 0===(i=t.data($+e[n]))&&(i=""),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(i){if(i.parent().is(".ui-effects-wrapper"))return i.parent();var n={width:i.outerWidth(!0),height:i.outerHeight(!0),float:i.css("float")},t=O("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:i.width(),height:i.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return i.wrap(t),i[0]!==o&&!O.contains(i[0],o)||O(o).focus(),t=i.parent(),"static"===i.css("position")?(t.css({position:"relative"}),i.css({position:"relative"})):(O.extend(n,{position:i.css("position"),zIndex:i.css("z-index")}),O.each(["top","left","bottom","right"],function(t,e){n[e]=i.css(e),isNaN(parseInt(n[e],10))&&(n[e]="auto")}),i.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),i.css(e),t.css(n).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),t[0]!==e&&!O.contains(t[0],e)||O(e).focus()),t},setTransition:function(n,t,o,r){return r=r||{},O.each(t,function(t,e){var i=n.cssUnit(e);0<i[0]&&(r[e]=i[0]*o+i[1])}),r}}),O.fn.extend({effect:function(){var r=U.apply(this,arguments),t=r.mode,e=r.queue,s=O.effects.effect[r.effect];if(O.fx.off||!s)return t?this[t](r.duration,r.complete):this.each(function(){r.complete&&r.complete.call(this)});function i(t){var e=O(this),i=r.complete,n=r.mode;function o(){O.isFunction(i)&&i.call(e[0]),O.isFunction(t)&&t()}(e.is(":hidden")?"hide"===n:"show"===n)?(e[n](),o()):s.call(e[0],r,o)}return!1===e?this.each(i):this.queue(e||"fx",i)},show:(H=O.fn.show,function(t){if(Y(t))return H.apply(this,arguments);var e=U.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}),hide:(B=O.fn.hide,function(t){if(Y(t))return B.apply(this,arguments);var e=U.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}),toggle:(F=O.fn.toggle,function(t){if(Y(t)||"boolean"==typeof t)return F.apply(this,arguments);var e=U.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}),cssUnit:function(t){var i=this.css(t),n=[];return O.each(["em","px","%","pt"],function(t,e){0<i.indexOf(e)&&(n=[parseFloat(i),e])}),n}}),z={},O.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){z[t]=function(t){return Math.pow(t,e+2)}}),O.extend(z,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),O.each(z,function(t,e){O.easing["easeIn"+t]=e,O.easing["easeOut"+t]=function(t){return 1-e(1-t)},O.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}});O.effects,O.effects.effect.blind=function(t,e){var i,n,o,r=O(this),s=["position","top","bottom","left","right","height","width"],a=O.effects.setMode(r,t.mode||"hide"),l=t.direction||"up",c=/up|down|vertical/.test(l),u=c?"height":"width",d=c?"top":"left",h=/up|left|vertical|horizontal/.test(l),p={},f="show"===a;r.parent().is(".ui-effects-wrapper")?O.effects.save(r.parent(),s):O.effects.save(r,s),r.show(),n=(i=O.effects.createWrapper(r).css({overflow:"hidden"}))[u](),o=parseFloat(i.css(d))||0,p[u]=f?n:0,h||(r.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),p[d]=f?o:n+o),f&&(i.css(u,0),h||i.css(d,o+n)),i.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===a&&r.hide(),O.effects.restore(r,s),O.effects.removeWrapper(r),e()}})},O.effects.effect.bounce=function(t,e){var i,n,o,r=O(this),s=["position","top","bottom","left","right","height","width"],a=O.effects.setMode(r,t.mode||"effect"),l="hide"===a,c="show"===a,u=t.direction||"up",d=t.distance,h=t.times||5,p=2*h+(c||l?1:0),f=t.duration/p,g=t.easing,m="up"===u||"down"===u?"top":"left",v="up"===u||"left"===u,y=r.queue(),b=y.length;for((c||l)&&s.push("opacity"),O.effects.save(r,s),r.show(),O.effects.createWrapper(r),d=d||r["top"==m?"outerHeight":"outerWidth"]()/3,c&&((o={opacity:1})[m]=0,r.css("opacity",0).css(m,v?2*-d:2*d).animate(o,f,g)),l&&(d/=Math.pow(2,h-1)),i=(o={})[m]=0;i<h;i++)(n={})[m]=(v?"-=":"+=")+d,r.animate(n,f,g).animate(o,f,g),d=l?2*d:d/2;l&&((n={opacity:0})[m]=(v?"-=":"+=")+d,r.animate(n,f,g)),r.queue(function(){l&&r.hide(),O.effects.restore(r,s),O.effects.removeWrapper(r),e()}),1<b&&y.splice.apply(y,[1,0].concat(y.splice(b,1+p))),r.dequeue()},O.effects.effect.clip=function(t,e){var i,n,o,r=O(this),s=["position","top","bottom","left","right","height","width"],a="show"===O.effects.setMode(r,t.mode||"hide"),l="vertical"===(t.direction||"vertical"),c=l?"height":"width",u=l?"top":"left",d={};O.effects.save(r,s),r.show(),i=O.effects.createWrapper(r).css({overflow:"hidden"}),o=(n="IMG"===r[0].tagName?i:r)[c](),a&&(n.css(c,0),n.css(u,o/2)),d[c]=a?o:0,d[u]=a?0:o/2,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){a||r.hide(),O.effects.restore(r,s),O.effects.removeWrapper(r),e()}})},O.effects.effect.drop=function(t,e){var i,n=O(this),o=["position","top","bottom","left","right","opacity","height","width"],r=O.effects.setMode(n,t.mode||"hide"),s="show"===r,a=t.direction||"left",l="up"===a||"down"===a?"top":"left",c="up"===a||"left"===a?"pos":"neg",u={opacity:s?1:0};O.effects.save(n,o),n.show(),O.effects.createWrapper(n),i=t.distance||n["top"==l?"outerHeight":"outerWidth"](!0)/2,s&&n.css("opacity",0).css(l,"pos"==c?-i:i),u[l]=(s?"pos"==c?"+=":"-=":"pos"==c?"-=":"+=")+i,n.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&n.hide(),O.effects.restore(n,o),O.effects.removeWrapper(n),e()}})},O.effects.effect.explode=function(t,e){var i,n,o,r,s,a,l=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=l,u=O(this),d="show"===O.effects.setMode(u,t.mode||"hide"),h=u.show().css("visibility","hidden").offset(),p=Math.ceil(u.outerWidth()/c),f=Math.ceil(u.outerHeight()/l),g=[];function m(){g.push(this),g.length===l*c&&function(){u.css({visibility:"visible"}),O(g).remove(),d||u.hide();e()}()}for(i=0;i<l;i++)for(r=h.top+i*f,a=i-(l-1)/2,n=0;n<c;n++)o=h.left+n*p,s=n-(c-1)/2,u.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-n*p,top:-i*f}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:f,left:o+(d?s*p:0),top:r+(d?a*f:0),opacity:d?0:1}).animate({left:o+(d?0:s*p),top:r+(d?0:a*f),opacity:d?1:0},t.duration||500,t.easing,m)},O.effects.effect.fade=function(t,e){var i=O(this),n=O.effects.setMode(i,t.mode||"toggle");i.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:e})},O.effects.effect.fold=function(t,e){var i,n,o=O(this),r=["position","top","bottom","left","right","height","width"],s=O.effects.setMode(o,t.mode||"hide"),a="show"===s,l="hide"===s,c=t.size||15,u=/([0-9]+)%/.exec(c),d=!!t.horizFirst,h=a!=d,p=h?["width","height"]:["height","width"],f=t.duration/2,g={},m={};O.effects.save(o,r),o.show(),i=O.effects.createWrapper(o).css({overflow:"hidden"}),n=h?[i.width(),i.height()]:[i.height(),i.width()],u&&(c=parseInt(u[1],10)/100*n[l?0:1]),a&&i.css(d?{height:0,width:c}:{height:c,width:0}),g[p[0]]=a?n[0]:c,m[p[1]]=a?n[1]:0,i.animate(g,f,t.easing).animate(m,f,t.easing,function(){l&&o.hide(),O.effects.restore(o,r),O.effects.removeWrapper(o),e()})},O.effects.effect.highlight=function(t,e){var i=O(this),n=["backgroundImage","backgroundColor","opacity"],o=O.effects.setMode(i,t.mode||"show"),r={backgroundColor:i.css("backgroundColor")};"hide"===o&&(r.opacity=0),O.effects.save(i,n),i.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),O.effects.restore(i,n),e()}})},O.effects.effect.size=function(r,t){var e,i,s,a=O(this),n=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["width","height","overflow"],o=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],d=O.effects.setMode(a,r.mode||"effect"),h=r.restore||"effect"!==d,p=r.scale||"both",f=r.origin||["middle","center"],g=a.css("position"),m=h?n:["position","top","bottom","left","right","overflow","opacity"],v={height:0,width:0,outerHeight:0,outerWidth:0};"show"===d&&a.show(),e={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===r.mode&&"show"===d?(a.from=r.to||v,a.to=r.from||e):(a.from=r.from||("show"===d?v:e),a.to=r.to||("hide"===d?v:e)),s={from:{y:a.from.height/e.height,x:a.from.width/e.width},to:{y:a.to.height/e.height,x:a.to.width/e.width}},"box"!==p&&"both"!==p||(s.from.y!==s.to.y&&(m=m.concat(c),a.from=O.effects.setTransition(a,c,s.from.y,a.from),a.to=O.effects.setTransition(a,c,s.to.y,a.to)),s.from.x!==s.to.x&&(m=m.concat(u),a.from=O.effects.setTransition(a,u,s.from.x,a.from),a.to=O.effects.setTransition(a,u,s.to.x,a.to))),"content"!==p&&"both"!==p||s.from.y!==s.to.y&&(m=m.concat(o).concat(l),a.from=O.effects.setTransition(a,o,s.from.y,a.from),a.to=O.effects.setTransition(a,o,s.to.y,a.to)),O.effects.save(a,m),a.show(),O.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),f&&(i=O.effects.getBaseline(f,e),a.from.top=(e.outerHeight-a.outerHeight())*i.y,a.from.left=(e.outerWidth-a.outerWidth())*i.x,a.to.top=(e.outerHeight-a.to.outerHeight)*i.y,a.to.left=(e.outerWidth-a.to.outerWidth)*i.x),a.css(a.from),"content"!==p&&"both"!==p||(c=c.concat(["marginTop","marginBottom"]).concat(o),u=u.concat(["marginLeft","marginRight"]),l=n.concat(c).concat(u),a.find("*[width]").each(function(){var t=O(this),e=t.height(),i=t.width(),n=t.outerHeight(),o=t.outerWidth();h&&O.effects.save(t,l),t.from={height:e*s.from.y,width:i*s.from.x,outerHeight:n*s.from.y,outerWidth:o*s.from.x},t.to={height:e*s.to.y,width:i*s.to.x,outerHeight:e*s.to.y,outerWidth:i*s.to.x},s.from.y!==s.to.y&&(t.from=O.effects.setTransition(t,c,s.from.y,t.from),t.to=O.effects.setTransition(t,c,s.to.y,t.to)),s.from.x!==s.to.x&&(t.from=O.effects.setTransition(t,u,s.from.x,t.from),t.to=O.effects.setTransition(t,u,s.to.x,t.to)),t.css(t.from),t.animate(t.to,r.duration,r.easing,function(){h&&O.effects.restore(t,l)})})),a.animate(a.to,{queue:!1,duration:r.duration,easing:r.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===d&&a.hide(),O.effects.restore(a,m),h||("static"===g?a.css({position:"relative",top:a.to.top,left:a.to.left}):O.each(["top","left"],function(o,t){a.css(t,function(t,e){var i=parseInt(e,10),n=o?a.to.left:a.to.top;return"auto"===e?n+"px":i+n+"px"})})),O.effects.removeWrapper(a),t()}})},O.effects.effect.scale=function(t,e){var i=O(this),n=O.extend(!0,{},t),o=O.effects.setMode(i,t.mode||"effect"),r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===o?0:100),s=t.direction||"both",a=t.origin,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},c="horizontal"!==s?r/100:1,u="vertical"!==s?r/100:1;n.effect="size",n.queue=!1,n.complete=e,"effect"!==o&&(n.origin=a||["middle","center"],n.restore=!0),n.from=t.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*c,width:l.width*u,outerHeight:l.outerHeight*c,outerWidth:l.outerWidth*u},n.fade&&("show"===o&&(n.from.opacity=0,n.to.opacity=1),"hide"===o&&(n.from.opacity=1,n.to.opacity=0)),i.effect(n)},O.effects.effect.puff=function(t,e){var i=O(this),n=O.effects.setMode(i,t.mode||"hide"),o="hide"===n,r=parseInt(t.percent,10)||150,s=r/100,a={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};O.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:e,percent:o?r:100,from:o?a:{height:a.height*s,width:a.width*s,outerHeight:a.outerHeight*s,outerWidth:a.outerWidth*s}}),i.effect(t)},O.effects.effect.pulsate=function(t,e){var i,n=O(this),o=O.effects.setMode(n,t.mode||"show"),r="show"===o,s="hide"===o,a=r||"hide"===o,l=2*(t.times||5)+(a?1:0),c=t.duration/l,u=0,d=n.queue(),h=d.length;for(!r&&n.is(":visible")||(n.css("opacity",0).show(),u=1),i=1;i<l;i++)n.animate({opacity:u},c,t.easing),u=1-u;n.animate({opacity:u},c,t.easing),n.queue(function(){s&&n.hide(),e()}),1<h&&d.splice.apply(d,[1,0].concat(d.splice(h,1+l))),n.dequeue()},O.effects.effect.shake=function(t,e){var i,n=O(this),o=["position","top","bottom","left","right","height","width"],r=O.effects.setMode(n,t.mode||"effect"),s=t.direction||"left",a=t.distance||20,l=t.times||3,c=2*l+1,u=Math.round(t.duration/c),d="up"===s||"down"===s?"top":"left",h="up"===s||"left"===s,p={},f={},g={},m=n.queue(),v=m.length;for(O.effects.save(n,o),n.show(),O.effects.createWrapper(n),p[d]=(h?"-=":"+=")+a,f[d]=(h?"+=":"-=")+2*a,g[d]=(h?"-=":"+=")+2*a,n.animate(p,u,t.easing),i=1;i<l;i++)n.animate(f,u,t.easing).animate(g,u,t.easing);n.animate(f,u,t.easing).animate(p,u/2,t.easing).queue(function(){"hide"===r&&n.hide(),O.effects.restore(n,o),O.effects.removeWrapper(n),e()}),1<v&&m.splice.apply(m,[1,0].concat(m.splice(v,1+c))),n.dequeue()},O.effects.effect.slide=function(t,e){var i,n=O(this),o=["position","top","bottom","left","right","width","height"],r=O.effects.setMode(n,t.mode||"show"),s="show"===r,a=t.direction||"left",l="up"===a||"down"===a?"top":"left",c="up"===a||"left"===a,u={};O.effects.save(n,o),n.show(),i=t.distance||n["top"==l?"outerHeight":"outerWidth"](!0),O.effects.createWrapper(n).css({overflow:"hidden"}),s&&n.css(l,c?isNaN(i)?"-"+i:-i:i),u[l]=(s?c?"+=":"-=":c?"-=":"+=")+i,n.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&n.hide(),O.effects.restore(n,o),O.effects.removeWrapper(n),e()}})},O.effects.effect.transfer=function(t,e){var i=O(this),n=O(t.to),o="fixed"===n.css("position"),r=O("body"),s=o?r.scrollTop():0,a=o?r.scrollLeft():0,l=n.offset(),c={top:l.top-s,left:l.left-a,height:n.innerHeight(),width:n.innerWidth()},u=i.offset(),d=O("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:u.top-s,left:u.left-a,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){d.remove(),e()})},O.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=O("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,e=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(e.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=O("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),O.widget("ui.selectable",O.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,e=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=O(e.options.filter,e.element[0])).addClass("ui-selectee"),t.each(function(){var t=O(this),e=t.offset();O.data(this,"selectable-item",{element:this,$element:t,left:e.left,top:e.top,right:e.left+t.outerWidth(),bottom:e.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=O("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(i){var n=this,t=this.options;this.opos=[i.pageX,i.pageY],this.options.disabled||(this.selectees=O(t.filter,this.element[0]),this._trigger("start",i),O(t.appendTo).append(this.helper),this.helper.css({left:i.pageX,top:i.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=O.data(this,"selectable-item");t.startselected=!0,i.metaKey||i.ctrlKey||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,n._trigger("unselecting",i,{unselecting:t.element}))}),O(i.target).parents().addBack().each(function(){var t,e=O.data(this,"selectable-item");if(e)return t=!i.metaKey&&!i.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(t?"ui-unselecting":"ui-selected").addClass(t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?n._trigger("selecting",i,{selecting:e.element}):n._trigger("unselecting",i,{unselecting:e.element}),!1}))},_mouseDrag:function(i){if(this.dragged=!0,!this.options.disabled){var t,n=this,o=this.options,r=this.opos[0],s=this.opos[1],a=i.pageX,l=i.pageY;return a<r&&(t=a,a=r,r=t),l<s&&(t=l,l=s,s=t),this.helper.css({left:r,top:s,width:a-r,height:l-s}),this.selectees.each(function(){var t=O.data(this,"selectable-item"),e=!1;t&&t.element!==n.element[0]&&("touch"===o.tolerance?e=!(t.left>a||t.right<r||t.top>l||t.bottom<s):"fit"===o.tolerance&&(e=t.left>r&&t.right<a&&t.top>s&&t.bottom<l),e?(t.selected&&(t.$element.removeClass("ui-selected"),t.selected=!1),t.unselecting&&(t.$element.removeClass("ui-unselecting"),t.unselecting=!1),t.selecting||(t.$element.addClass("ui-selecting"),t.selecting=!0,n._trigger("selecting",i,{selecting:t.element}))):(t.selecting&&((i.metaKey||i.ctrlKey)&&t.startselected?(t.$element.removeClass("ui-selecting"),t.selecting=!1,t.$element.addClass("ui-selected"),t.selected=!0):(t.$element.removeClass("ui-selecting"),t.selecting=!1,t.startselected&&(t.$element.addClass("ui-unselecting"),t.unselecting=!0),n._trigger("unselecting",i,{unselecting:t.element}))),t.selected&&(i.metaKey||i.ctrlKey||t.startselected||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,n._trigger("unselecting",i,{unselecting:t.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,O(".ui-unselecting",this.element[0]).each(function(){var t=O.data(this,"selectable-item");t.$element.removeClass("ui-unselecting"),t.unselecting=!1,t.startselected=!1,i._trigger("unselected",e,{unselected:t.element})}),O(".ui-selecting",this.element[0]).each(function(){var t=O.data(this,"selectable-item");t.$element.removeClass("ui-selecting").addClass("ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,i._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),O.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=O("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=O("<span>",{class:"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),O("<span>",{class:"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=O("<span>",{class:"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var n=this;this.menu=O("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=O("<div>",{class:"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(t,e){t.preventDefault(),n._setSelection(),n._select(e.item.data("ui-selectmenu-item"),t)},focus:function(t,e){var i=e.item.data("ui-selectmenu-item");null!=n.focusIndex&&i.index!==n.focusIndex&&(n._trigger("focus",t,{item:i}),n.isOpen||n._select(i,t)),n.focusIndex=i.index,n.button.attr("aria-activedescendant",n.menuItems.eq(i.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var t,e=this.element.find("option");e.length&&(this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t))},_position:function(){this.menuWrap.position(O.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(i,t){var n=this,o="";O.each(t,function(t,e){e.optgroup!==o&&(O("<li>",{class:"ui-selectmenu-optgroup ui-menu-divider"+(e.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:e.optgroup}).appendTo(i),o=e.optgroup),n._renderItemData(i,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(t,e){var i=O("<li>");return e.disabled&&i.addClass("ui-state-disabled"),this._setText(i,e.label),i.appendTo(t)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var i,n,o=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),o+=":not(.ui-state-disabled)"),(n="first"===t||"last"===t?i["first"===t?"prevAll":"nextAll"](o).eq(-1):i[t+"All"](o).eq(0)).length&&this.menuInstance.focus(e,n)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?((t=window.getSelection()).removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(O(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection()).rangeCount&&(this.range=t.getRangeAt(0)):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(t){var e=!0;switch(t.keyCode){case O.ui.keyCode.TAB:case O.ui.keyCode.ESCAPE:this.close(t),e=!1;break;case O.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case O.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case O.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case O.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case O.ui.keyCode.LEFT:this._move("prev",t);break;case O.ui.keyCode.RIGHT:this._move("next",t);break;case O.ui.keyCode.HOME:case O.ui.keyCode.PAGE_UP:this._move("first",t);break;case O.ui.keyCode.END:case O.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),e=!1}e&&t.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex);e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this._setText(this.buttonText,t.label),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==i&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){"icons"===t&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(e.button),this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"disabled"===t&&(this.menuInstance.option("disabled",e),this.button.toggleClass("ui-state-disabled",e).attr("aria-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===t&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return(t=t&&(t.jquery||t.nodeType?O(t):this.document.find(t).eq(0)))&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;t||(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var o=[];t.each(function(t,e){var i=O(e),n=i.parent("optgroup");o.push({element:i,index:t,value:i.val(),label:i.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||i.prop("disabled")})}),this.items=o},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),O.widget("ui.slider",O.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,e,i=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o=[];for(e=i.values&&i.values.length||1,n.length>e&&(n.slice(e).remove(),n=n.slice(0,e)),t=n.length;t<e;t++)o.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");this.handles=n.add(O(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){O(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,e="";t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:O.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=O("<div></div>").appendTo(this.element),e="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(e+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var e,i,n,o,r,s,a,l=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(i-l.values(t));(e<n||n===e&&(t===l._lastChangedValue||l.values(t)===c.min))&&(n=e,o=O(this),r=t)}),!1!==this._start(t,r)&&(this._mouseSliding=!0,this._handleIndex=r,o.addClass("ui-state-active").focus(),s=o.offset(),a=!O(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:t.pageX-s.left-o.width()/2,top:t.pageY-s.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,o;return 1<(i=("horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),n=this._valueMax()-this._valueMin(),o=this._valueMin()+i*n,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,o,r;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&n<i||1===e&&i<n)&&(i=n),i!==this.values(e)&&((o=this.values())[e]=i,r=this._trigger("slide",t,{handle:this.handles[e],value:i,values:o}),n=this.values(e?0:1),!1!==r&&this.values(e,i))):i!==this.value()&&!1!==(r=this._trigger("slide",t,{handle:this.handles[e],value:i}))&&this.value(i)},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var i,n,o;if(1<arguments.length)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!O.isArray(t))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,n=t,o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,e){var i,n=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),O.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e),this._super(t,e),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<n;i+=1)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=0<i?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;t=Math.floor(+(t-e).toFixed(this._precision())/i)*i+e,this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var e,i,t,n,o,r=this.options.range,s=this.options,a=this,l=!this._animateOff&&s.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(t){i=(a.values(t)-a._valueMin())/(a._valueMax()-a._valueMin())*100,c["horizontal"===a.orientation?"left":"bottom"]=i+"%",O(this).stop(1,1)[l?"animate":"css"](c,s.animate),!0===a.options.range&&("horizontal"===a.orientation?(0===t&&a.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},s.animate),1===t&&a.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:s.animate})):(0===t&&a.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},s.animate),1===t&&a.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:s.animate}))),e=i}):(t=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?(t-n)/(o-n)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,s.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},s.animate),"max"===r&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:s.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},s.animate),"max"===r&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:s.animate}))},_handleEvents:{keydown:function(t){var e,i,n,o=O(t.target).data("ui-slider-handle-index");switch(t.keyCode){case O.ui.keyCode.HOME:case O.ui.keyCode.END:case O.ui.keyCode.PAGE_UP:case O.ui.keyCode.PAGE_DOWN:case O.ui.keyCode.UP:case O.ui.keyCode.RIGHT:case O.ui.keyCode.DOWN:case O.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,O(t.target).addClass("ui-state-active"),!1===this._start(t,o)))return}switch(n=this.options.step,e=i=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case O.ui.keyCode.HOME:i=this._valueMin();break;case O.ui.keyCode.END:i=this._valueMax();break;case O.ui.keyCode.PAGE_UP:i=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/this.numPages);break;case O.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/this.numPages);break;case O.ui.keyCode.UP:case O.ui.keyCode.RIGHT:if(e===this._valueMax())return;i=this._trimAlignValue(e+n);break;case O.ui.keyCode.DOWN:case O.ui.keyCode.LEFT:if(e===this._valueMin())return;i=this._trimAlignValue(e-n)}this._slide(t,o,i)},keyup:function(t){var e=O(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,e),this._change(t,e),O(t.target).removeClass("ui-state-active"))}}}),O.widget("ui.sortable",O.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return e<=t&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),O.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var i=null,n=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),O(t.target).parents().each(function(){if(O.data(this,o.widgetName+"-item")===o)return i=O(this),!1}),O.data(t.target,o.widgetName+"-item")===o&&(i=O(t.target)),!!i&&(!(this.options.handle&&!e&&(O(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(n=!0)}),!n))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,i){var n,o,r=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},O.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=O("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(n=this.containers.length-1;0<=n;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return O.ui.ddmanager&&(O.ui.ddmanager.current=this),O.ui.ddmanager&&!r.dropBehaviour&&O.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,i,n,o,r=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-this.document.scrollTop()<r.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<r.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),t.pageX-this.document.scrollLeft()<r.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),!1!==s&&O.ui.ddmanager&&!r.dropBehaviour&&O.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(n=(i=this.items[e]).item[0],(o=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(n===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===n||O.contains(this.placeholder[0],n)||"semi-dynamic"===this.options.type&&O.contains(this.element[0],n))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),O.ui.ddmanager&&O.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(O.ui.ddmanager&&!this.options.dropBehaviour&&O.ui.ddmanager.drop(this,t),this.options.revert){var i=this,n=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,O(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),O.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?O(this.domPosition.prev).after(this.currentItem):O(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},O(t).each(function(){var t=(O(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&i.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e.each(function(){i.push(O(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||a<n+c&&n+c<l,h="y"===this.options.axis||r<e+u&&e+u<s,p=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=e&&i,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return!!n&&(this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var e,i,n,o,r=[],s=[],a=this._connectWith();if(a&&t)for(e=a.length-1;0<=e;e--)for(i=(n=O(a[e],this.document[0])).length-1;0<=i;i--)(o=O.data(n[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&s.push([O.isFunction(o.options.items)?o.options.items.call(o.element):O(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);function l(){r.push(this)}for(s.push([O.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):O(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),e=s.length-1;0<=e;e--)s[e][0].each(l);return O(r)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=O.grep(this.items,function(t){for(var e=0;e<i.length;e++)if(i[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,i,n,o,r,s,a,l,c=this.items,u=[[O.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):O(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(e=d.length-1;0<=e;e--)for(i=(n=O(d[e],this.document[0])).length-1;0<=i;i--)(o=O.data(n[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&(u.push([O.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):O(o.options.items,o.element),o]),this.containers.push(o));for(e=u.length-1;0<=e;e--)for(r=u[e][1],i=0,l=(s=u[e][0]).length;i<l;i++)(a=O(s[i])).data(this.widgetName+"-item",r),c.push({item:a,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,i,n,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(i=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?O(this.options.toleranceElement,i.item):i.item,t||(i.width=n.outerWidth(),i.height=n.outerHeight()),o=n.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)o=this.containers[e].element.offset(),this.containers[e].containerCache.left=o.left,this.containers[e].containerCache.top=o.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(i){var n,o=(i=i||this).options;o.placeholder&&o.placeholder.constructor!==String||(n=o.placeholder,o.placeholder={element:function(){var t=i.currentItem[0].nodeName.toLowerCase(),e=O("<"+t+">",i.document[0]).addClass(n||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===t?i._createTrPlaceholder(i.currentItem.find("tr").eq(0),O("<tr>",i.document[0]).appendTo(e)):"tr"===t?i._createTrPlaceholder(i.currentItem,e):"img"===t&&e.attr("src",i.currentItem.attr("src")),n||e.css("visibility","hidden"),e},update:function(t,e){n&&!o.forcePlaceholderSize||(e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}),i.placeholder=O(o.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),o.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(t,e){var i=this;t.children().each(function(){O("<td>&#160;</td>",i.document[0]).attr("colspan",O(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,i,n,o,r,s,a,l,c,u,d=null,h=null;for(e=this.containers.length-1;0<=e;e--)if(!O.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(d&&O.contains(this.containers[e].element[0],d.element[0]))continue;d=this.containers[e],h=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[h].containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1);else{for(n=1e4,o=null,r=(c=d.floating||this._isFloating(this.currentItem))?"left":"top",s=c?"width":"height",u=c?"clientX":"clientY",i=this.items.length-1;0<=i;i--)O.contains(this.containers[h].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(a=this.items[i].item.offset()[r],l=!1,t[u]-a>this.items[i][s]/2&&(l=!0),Math.abs(t[u]-a)<n&&(n=Math.abs(t[u]-a),o=this.items[i],this.direction=l?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[h])return void(this.currentContainer.containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[h],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var e=this.options,i=O.isFunction(e.helper)?O(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||O("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!e.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!e.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),O.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&O.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&O.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),"document"!==n.containment&&"window"!==n.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=O(n.containment)[0],e=O(n.containment).offset(),i="hidden"!==O(t).css("overflow"),this.containment=[e.left+(parseInt(O(t).css("borderLeftWidth"),10)||0)+(parseInt(O(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(O(t).css("borderTopWidth"),10)||0)+(parseInt(O(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(O(t).css("borderLeftWidth"),10)||0)-(parseInt(O(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(O(t).css("borderTopWidth"),10)||0)-(parseInt(O(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e=e||this.position;var i="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&O.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*i}},_generatePosition:function(t){var e,i,n=this.options,o=t.pageX,r=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&O.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),n.grid&&(e=this.originalPageY+Math.round((r-this.originalPageY)/n.grid[1])*n.grid[1],r=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-n.grid[1]:e+n.grid[1]:e,i=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-n.grid[0]:i+n.grid[0]:i)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:s.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();function o(e,i,n){return function(t){n._trigger(e,t,i._uiHash(i))}}for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;0<=i;i--)e||n.push(o("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(o("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<n.length;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===O.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||O([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}});function X(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}var Z;O.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var n={},o=this.element;return O.each(["min","max","step"],function(t,e){var i=o.attr(e);void 0!==i&&i.length&&(n[e]=i)}),n},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((0<e?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(t){var e;function i(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=e,this._delay(function(){this.previous=e}))}e=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),!1!==this._start(t)&&this._repeat(null,O(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(O(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,O(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&0<t.height()&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(t){var e=this.options,i=O.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,e.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-e.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var e=this.options.incremental;return e?O.isFunction(e)?e(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,n=this.options;return i=t-(e=null!==n.min?n.min:0),t=e+(i=Math.round(i/n.step)*n.step),t=parseFloat(t.toFixed(this._precision())),null!==n.max&&t>n.max?n.max:null!==n.min&&t<n.min?n.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(i))}"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable"))},_setOptions:X(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var i;""!==t&&null!==(i=this._parse(t))&&(e||(i=this._adjustValue(i)),t=this._format(i)),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:X(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:X(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:X(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:X(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){if(!arguments.length)return this._parse(this.element.val());X(this._value).call(this,t)},widget:function(){return this.uiSpinner}}),O.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(Z=/#.*$/,function(t){var e,i;e=(t=t.cloneNode(!1)).href.replace(Z,""),i=location.href.replace(Z,"");try{e=decodeURIComponent(e)}catch(t){}try{i=decodeURIComponent(i)}catch(t){}return 1<t.hash.length&&e===i}),_create:function(){var e=this,t=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",t.collapsible),this._processTabs(),t.active=this._initialActive(),O.isArray(t.disabled)&&(t.disabled=O.unique(t.disabled.concat(O.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(t.active):this.active=O(),this._refresh(),this.active.length&&this.load(t.active)},_initialActive:function(){var i=this.options.active,t=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(t,e){if(O(e).attr("aria-controls")===n)return i=t,!1}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==i&&-1!==i||(i=!!this.tabs.length&&0)),!1!==i&&-1===(i=this.tabs.index(this.tabs.eq(i)))&&(i=!t&&0),!t&&!1===i&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):O()}},_tabKeydown:function(t){var e=O(this.document[0].activeElement).closest("li"),i=this.tabs.index(e),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case O.ui.keyCode.RIGHT:case O.ui.keyCode.DOWN:i++;break;case O.ui.keyCode.UP:case O.ui.keyCode.LEFT:n=!1,i--;break;case O.ui.keyCode.END:i=this.anchors.length-1;break;case O.ui.keyCode.HOME:i=0;break;case O.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case O.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,n),t.ctrlKey||t.metaKey||(e.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===O.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===O.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===O.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,e){var i=this.tabs.length-1;for(;-1!==O.inArray((i<t&&(t=0),t<0&&(t=i),t),this.options.disabled);)t=e?t+1:t-1;return t},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,e){"active"!==t?"disabled"!==t?(this._super(t,e),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._setupDisabled(e):this._activate(e)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,e=this.tablist.children(":has(a[href])");t.disabled=O.map(e.filter(".ui-state-disabled"),function(t){return e.index(t)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!O.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=O()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=O()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var l=this,t=this.tabs,e=this.anchors,i=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){O(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){O(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return O("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=O(),this.anchors.each(function(t,e){var i,n,o,r=O(e).uniqueId().attr("id"),s=O(e).closest("li"),a=s.attr("aria-controls");l._isLocal(e)?(o=(i=e.hash).substring(1),n=l.element.find(l._sanitizeSelector(i))):(i="#"+(o=s.attr("aria-controls")||O({}).uniqueId()[0].id),(n=l.element.find(i)).length||(n=l._createPanel(o)).insertAfter(l.panels[t-1]||l.tablist),n.attr("aria-live","polite")),n.length&&(l.panels=l.panels.add(n)),a&&s.data("ui-tabs-aria-controls",a),s.attr({"aria-controls":o,"aria-labelledby":r}),n.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),t&&(this._off(t.not(this.tabs)),this._off(e.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return O("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){O.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var e,i=0;e=this.tabs[i];i++)!0===t||-1!==O.inArray(i,t)?O(e).addClass("ui-state-disabled").attr("aria-disabled","true"):O(e).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&O.each(t.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,e=this.element.parent();"fill"===t?(i=e.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=O(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=O(this).outerHeight(!0)}),this.panels.each(function(){O(this).height(Math.max(0,i-O(this).innerHeight()+O(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,O(this).height("").height())}).height(i))},_eventHandler:function(t){var e=this.options,i=this.active,n=O(t.currentTarget).closest("li"),o=n[0]===i[0],r=o&&e.collapsible,s=r?O():this._getPanelForTab(n),a=i.length?this._getPanelForTab(i):O(),l={oldTab:i,oldPanel:a,newTab:r?O():n,newPanel:s};t.preventDefault(),n.hasClass("ui-state-disabled")||n.hasClass("ui-tabs-loading")||this.running||o&&!e.collapsible||!1===this._trigger("beforeActivate",t,l)||(e.active=!r&&this.tabs.index(n),this.active=o?O():n,this.xhr&&this.xhr.abort(),a.length||s.length||O.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(n),t),this._toggle(t,l))},_toggle:function(t,e){var i=this,n=e.newPanel,o=e.oldPanel;function r(){i.running=!1,i._trigger("activate",t,e)}function s(){e.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),n.length&&i.options.show?i._show(n,i.options.show,r):(n.show(),r())}this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),s()),o.attr("aria-hidden","true"),e.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&o.length?e.oldTab.attr("tabIndex",-1):n.length&&this.tabs.filter(function(){return 0===O(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr("aria-hidden","false"),e.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var e,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),e=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:e,currentTarget:e,preventDefault:O.noop}))},_findActive:function(t){return!1===t?O():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){O.data(this,"ui-tabs-destroy")?O(this).remove():O(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=O(this),e=t.data("ui-tabs-aria-controls");e?t.attr("aria-controls",e).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var t=this.options.disabled;!1!==t&&(t=void 0!==i&&(i=this._getIndex(i),O.isArray(t)?O.map(t,function(t){return t!==i?t:null}):O.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(t))},disable:function(t){var e=this.options.disabled;if(!0!==e){if(void 0===t)e=!0;else{if(t=this._getIndex(t),-1!==O.inArray(t,e))return;e=O.isArray(e)?O.merge([t],e).sort():[t]}this._setupDisabled(e)}},load:function(t,n){t=this._getIndex(t);function o(t,e){"abort"===e&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),s.removeAttr("aria-busy"),t===r.xhr&&delete r.xhr}var r=this,i=this.tabs.eq(t),e=i.find(".ui-tabs-anchor"),s=this._getPanelForTab(i),a={tab:i,panel:s};this._isLocal(e[0])||(this.xhr=O.ajax(this._ajaxSettings(e,n,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(i.addClass("ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.done(function(t,e,i){setTimeout(function(){s.html(t),r._trigger("load",n,a),o(i,e)},1)}).fail(function(t,e){setTimeout(function(){o(t,e)},1)})))},_ajaxSettings:function(t,i,n){var o=this;return{url:t.attr("href"),beforeSend:function(t,e){return o._trigger("beforeLoad",i,O.extend({jqXHR:t,ajaxSettings:e},n))}}},_getPanelForTab:function(t){var e=O(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+e))}}),O.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=O(this).attr("title")||"";return O("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,e){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(e),t.data("ui-tooltip-id",e).attr("aria-describedby",O.trim(i.join(" ")))},_removeDescribedBy:function(t){var e=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),n=O.inArray(e,i);-1!==n&&i.splice(n,1),t.removeData("ui-tooltip-id"),(i=O.trim(i.join(" ")))?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=O("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,e){var i=this;if("disabled"===t)return this[e?"_disable":"_enable"](),void(this.options[t]=e);this._super(t,e),"content"===t&&O.each(this.tooltips,function(t,e){i._updateContent(e.element)})},_disable:function(){var n=this;O.each(this.tooltips,function(t,e){var i=O.Event("blur");i.target=i.currentTarget=e.element[0],n.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=O(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=O(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,e=O(t?t.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&e.parents().each(function(){var t,e=O(this);e.data("ui-tooltip-open")&&((t=O.Event("blur")).target=t.currentTarget=this,i.close(t,!0)),e.attr("title")&&(e.uniqueId(),i.parents[this.id]={element:this,title:e.attr("title")},e.attr("title",""))}),this._registerCloseHandlers(t,e),this._updateContent(e,t))},_updateContent:function(e,i){var t,n=this.options.content,o=this,r=i?i.type:null;if("string"==typeof n)return this._open(i,e,n);(t=n.call(e[0],function(t){o._delay(function(){e.data("ui-tooltip-open")&&(i&&(i.type=r),this._open(i,e,t))})}))&&this._open(i,e,t)},_open:function(t,e,i){var n,o,r,s,a=O.extend({},this.options.position);function l(t){a.of=t,o.is(":hidden")||o.position(a)}i&&((n=this._find(e))?n.tooltip.find(".ui-tooltip-content").html(i):(e.is("[title]")&&(t&&"mouseover"===t.type?e.attr("title",""):e.removeAttr("title")),n=this._tooltip(e),o=n.tooltip,this._addDescribedBy(e,o.attr("id")),o.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),i.clone?(s=i.clone()).removeAttr("id").find("[id]").removeAttr("id"):s=i,O("<div>").html(s).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:l}),l(t)):o.position(O.extend({of:e},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){o.is(":visible")&&(l(a.of),clearInterval(r))},O.fx.interval)),this._trigger("open",t,{tooltip:o})))},_registerCloseHandlers:function(t,i){var e={keyup:function(t){if(t.keyCode===O.ui.keyCode.ESCAPE){var e=O.Event(t);e.currentTarget=i[0],this.close(e,!0)}}};i[0]!==this.element[0]&&(e.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(e.mouseleave="close"),t&&"focusin"!==t.type||(e.focusout="close"),this._on(!0,i,e)},close:function(t){var e,i=this,n=O(t?t.currentTarget:this.element),o=this._find(n);o?(e=o.tooltip,o.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),o.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){i._removeTooltip(O(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&O.each(this.parents,function(t,e){O(e.element).attr("title",e.title),delete i.parents[t]}),o.closing=!0,this._trigger("close",t,{tooltip:e}),o.hiding||(o.closing=!1))):n.removeData("ui-tooltip-open")},_tooltip:function(t){var e=O("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),i=e.uniqueId().attr("id");return O("<div>").addClass("ui-tooltip-content").appendTo(e),e.appendTo(this.document[0].body),this.tooltips[i]={element:t,tooltip:e}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var o=this;O.each(this.tooltips,function(t,e){var i=O.Event("blur"),n=e.element;i.target=i.currentTarget=n[0],o.close(i,!0),O("#"+t).remove(),n.data("ui-tooltip-title")&&(n.attr("title")||n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})}),function(t){function e(t,e){if(!(1<t.originalEvent.touches.length)){t.preventDefault();var i=t.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}if(t.support.touch="ontouchend"in document,t.support.touch){var i,n=t.ui.mouse.prototype,o=n._mouseInit,r=n._mouseDestroy;n._touchStart=function(t){!i&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(i=!0,this._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},n._touchMove=function(t){i&&(this._touchMoved=!0,e(t,"mousemove"))},n._touchEnd=function(t){i&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),i=!1)},n._mouseInit=function(){this.element.bind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),o.call(this)},n._mouseDestroy=function(){this.element.unbind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),r.call(this)}}}(jQuery),window.Modernizr=function(n,d,s){function i(t){m.cssText=t}function r(t,e){return typeof t===e}function o(t,e){return!!~(""+t).indexOf(e)}function a(t,e){for(var i in t){var n=t[i];if(!o(n,"-")&&m[n]!==s)return"pfx"!=e||n}return!1}function l(t,e,i){var n=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+w.join(n+" ")+n).split(" ");return r(e,"string")||r(e,"undefined")?a(o,e):function(t,e,i){for(var n in t){var o=e[t[n]];if(o!==s)return!1===i?t[n]:r(o,"function")?o.bind(i||e):o}return!1}(o=(t+" "+C.join(n+" ")+n).split(" "),e,i)}function c(t,e,i,n){var o,r,s,a,l=d.createElement("div"),c=d.body,u=c||d.createElement("body");if(parseInt(i,10))for(;i--;)(s=d.createElement("div")).id=n?n[i]:g+(i+1),l.appendChild(s);return o=["&#173;",'<style id="s',g,'">',t,"</style>"].join(""),l.id=g,(c?l:u).innerHTML+=o,u.appendChild(l),c||(u.style.background="",u.style.overflow="hidden",a=f.style.overflow,f.style.overflow="hidden",f.appendChild(u)),r=e(l,t),c?l.parentNode.removeChild(l):(u.parentNode.removeChild(u),f.style.overflow=a),!!r}var t,u,h,p={},f=d.documentElement,g="modernizr",e=d.createElement(g),m=e.style,v=d.createElement("input"),y=":)",b={}.toString,_=" -webkit- -moz- -o- -ms- ".split(" "),E="Webkit Moz O ms",w=E.split(" "),C=E.toLowerCase().split(" "),T="http://www.w3.org/2000/svg",x={},D={},I={},O=[],R=O.slice,k=(h={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},function(t,e){e=e||d.createElement(h[t]||"div");var i=(t="on"+t)in e;return i||(e.setAttribute||(e=d.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(t,""),i=r(e[t],"function"),r(e[t],"undefined")||(e[t]=s),e.removeAttribute(t))),e=null,i}),S={}.hasOwnProperty;for(var A in u=r(S,"undefined")||r(S.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return S.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(n){var o=this;if("function"!=typeof o)throw new TypeError;var r=R.call(arguments,1),s=function(){if(this instanceof s){function t(){}t.prototype=o.prototype;var e=new t,i=o.apply(e,r.concat(R.call(arguments)));return Object(i)===i?i:e}return o.apply(n,r.concat(R.call(arguments)))};return s}),x.flexbox=function(){return l("flexWrap")},x.canvas=function(){var t=d.createElement("canvas");return!!t.getContext&&!!t.getContext("2d")},x.canvastext=function(){return!!p.canvas&&!!r(d.createElement("canvas").getContext("2d").fillText,"function")},x.webgl=function(){return!!n.WebGLRenderingContext},x.touch=function(){var e;return"ontouchstart"in n||n.DocumentTouch&&d instanceof DocumentTouch?e=!0:c(["@media (",_.join("touch-enabled),("),g,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){e=9===t.offsetTop}),e},x.geolocation=function(){return"geolocation"in navigator},x.postmessage=function(){return!!n.postMessage},x.websqldatabase=function(){return!!n.openDatabase},x.indexedDB=function(){return!!l("indexedDB",n)},x.hashchange=function(){return k("hashchange",n)&&(d.documentMode===s||7<d.documentMode)},x.history=function(){return!!n.history&&!!history.pushState},x.draganddrop=function(){var t=d.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t},x.websockets=function(){return"WebSocket"in n||"MozWebSocket"in n},x.rgba=function(){return i("background-color:rgba(150,255,150,.5)"),o(m.backgroundColor,"rgba")},x.hsla=function(){return i("background-color:hsla(120,40%,100%,.5)"),o(m.backgroundColor,"rgba")||o(m.backgroundColor,"hsla")},x.multiplebgs=function(){return i("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(m.background)},x.backgroundsize=function(){return l("backgroundSize")},x.borderimage=function(){return l("borderImage")},x.borderradius=function(){return l("borderRadius")},x.boxshadow=function(){return l("boxShadow")},x.textshadow=function(){return""===d.createElement("div").style.textShadow},x.opacity=function(){return function(t,e){i(_.join(t+";")+(e||""))}("opacity:.55"),/^0.55$/.test(m.opacity)},x.cssanimations=function(){return l("animationName")},x.csscolumns=function(){return l("columnCount")},x.cssgradients=function(){var t="background-image:";return i((t+"-webkit- ".split(" ").join("gradient(linear,left top,right bottom,from(#9f9),to(white));"+t)+_.join("linear-gradient(left top,#9f9, white);"+t)).slice(0,-t.length)),o(m.backgroundImage,"gradient")},x.cssreflections=function(){return l("boxReflect")},x.csstransforms=function(){return!!l("transform")},x.csstransforms3d=function(){var i=!!l("perspective");return i&&"webkitPerspective"in f.style&&c("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,e){i=9===t.offsetLeft&&3===t.offsetHeight}),i},x.csstransitions=function(){return l("transition")},x.fontface=function(){var r;return c('@font-face {font-family:"font";src:url("https://")}',function(t,e){var i=d.getElementById("smodernizr"),n=i.sheet||i.styleSheet,o=n?n.cssRules&&n.cssRules[0]?n.cssRules[0].cssText:n.cssText||"":"";r=/src/i.test(o)&&0===o.indexOf(e.split(" ")[0])}),r},x.generatedcontent=function(){var e;return c(["#",g,"{font:0/0 a}#",g,':after{content:"',y,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=3<=t.offsetHeight}),e},x.video=function(){var t=d.createElement("video"),e=!1;try{(e=!!t.canPlayType)&&((e=new Boolean(e)).ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),e.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),e.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(t){}return e},x.audio=function(){var t=d.createElement("audio"),e=!1;try{(e=!!t.canPlayType)&&((e=new Boolean(e)).ogg=t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),e.mp3=t.canPlayType("audio/mpeg;").replace(/^no$/,""),e.wav=t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),e.m4a=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(t){}return e},x.localstorage=function(){try{return localStorage.setItem(g,g),localStorage.removeItem(g),!0}catch(t){return!1}},x.sessionstorage=function(){try{return sessionStorage.setItem(g,g),sessionStorage.removeItem(g),!0}catch(t){return!1}},x.webworkers=function(){return!!n.Worker},x.applicationcache=function(){return!!n.applicationCache},x.svg=function(){return!!d.createElementNS&&!!d.createElementNS(T,"svg").createSVGRect},x.inlinesvg=function(){var t=d.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==T},x.smil=function(){return!!d.createElementNS&&/SVGAnimate/.test(b.call(d.createElementNS(T,"animate")))},x.svgclippaths=function(){return!!d.createElementNS&&/SVGClipPath/.test(b.call(d.createElementNS(T,"clipPath")))},x)u(x,A)&&(t=A.toLowerCase(),p[t]=x[A](),O.push((p[t]?"":"no-")+t));return p.input||(p.input=function(t){for(var e=0,i=t.length;e<i;e++)I[t[e]]=t[e]in v;return I.list&&(I.list=!!d.createElement("datalist")&&!!n.HTMLDataListElement),I}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),p.inputtypes=function(t){for(var e,i,n,o=0,r=t.length;o<r;o++)v.setAttribute("type",i=t[o]),(e="text"!==v.type)&&(v.value=y,v.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(i)&&v.style.WebkitAppearance!==s?(f.appendChild(v),e=(n=d.defaultView).getComputedStyle&&"textfield"!==n.getComputedStyle(v,null).WebkitAppearance&&0!==v.offsetHeight,f.removeChild(v)):/^(search|tel)$/.test(i)||(e=/^(url|email)$/.test(i)?v.checkValidity&&!1===v.checkValidity():v.value!=y)),D[t[o]]=!!e;return D}("search tel url email datetime date month week time datetime-local number range color".split(" "))),p.addTest=function(t,e){if("object"==typeof t)for(var i in t)u(t,i)&&p.addTest(i,t[i]);else{if(t=t.toLowerCase(),p[t]!==s)return p;e="function"==typeof e?e():e,f.className+=" "+(e?"":"no-")+t,p[t]=e}return p},i(""),e=v=null,function(t,s){function a(){var t=f.elements;return"string"==typeof t?t.split(" "):t}function l(t){var e=p[t[d]];return e||(e={},h++,t[d]=h,p[h]=e),e}function n(t,e,i){return e=e||s,c?e.createElement(t):!(n=(i=i||l(e)).cache[t]?i.cache[t].cloneNode():u.test(t)?(i.cache[t]=i.createElem(t)).cloneNode():i.createElem(t)).canHaveChildren||r.test(t)||n.tagUrn?n:i.frag.appendChild(n);var n}function e(t){var e=l(t=t||s);return!f.shivCSS||i||e.hasCSS||(e.hasCSS=!!function(t,e){var i=t.createElement("p"),n=t.getElementsByTagName("head")[0]||t.documentElement;return i.innerHTML="x<style>"+e+"</style>",n.insertBefore(i.lastChild,n.firstChild)}(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),c||function(e,i){i.cache||(i.cache={},i.createElem=e.createElement,i.createFrag=e.createDocumentFragment,i.frag=i.createFrag()),e.createElement=function(t){return f.shivMethods?n(t,e,i):i.createElem(t)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+a().join().replace(/[\w\-]+/g,function(t){return i.createElem(t),i.frag.createElement(t),'c("'+t+'")'})+");return n}")(f,i.frag)}(t,e),t}var i,c,o=t.html5||{},r=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,u=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,d="_html5shiv",h=0,p={};!function(){try{var t=s.createElement("a");t.innerHTML="<xyz></xyz>",i="hidden"in t,c=1==t.childNodes.length||function(){s.createElement("a");var t=s.createDocumentFragment();return void 0===t.cloneNode||void 0===t.createDocumentFragment||void 0===t.createElement}()}catch(t){c=i=!0}}();var f={elements:o.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==o.shivCSS,supportsUnknownElements:c,shivMethods:!1!==o.shivMethods,type:"default",shivDocument:e,createElement:n,createDocumentFragment:function(t,e){if(t=t||s,c)return t.createDocumentFragment();for(var i=(e=e||l(t)).frag.cloneNode(),n=0,o=a(),r=o.length;n<r;n++)i.createElement(o[n]);return i}};t.html5=f,e(s)}(this,d),p._version="2.8.3",p._prefixes=_,p._domPrefixes=C,p._cssomPrefixes=w,p.mq=function(t){var e,i=n.matchMedia||n.msMatchMedia;return i?i(t)&&i(t).matches||!1:(c("@media "+t+" { #"+g+" { position: absolute; } }",function(t){e="absolute"==(n.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),e)},p.hasEvent=k,p.testProp=function(t){return a([t])},p.testAllProps=l,p.testStyles=c,p.prefixed=function(t,e,i){return e?l(t,e,i):l(t,"pfx")},f.className=f.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+O.join(" "),p}(this,this.document),function(t,h){function d(t){return"[object Function]"==o.call(t)}function p(t){return"string"==typeof t}function f(){}function g(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function m(){var t=_.shift();E=1,t?t.t?y(function(){("c"==t.t?v.injectCss:v.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),m()):E=0}function e(t,e,i,n,o){return E=0,e=e||"j",p(t)?function(i,n,t,e,o,r,s){function a(t){if(!c&&g(l.readyState)&&(d.r=c=1,E||m(),l.onload=l.onreadystatechange=null,t))for(var e in"img"!=i&&y(function(){C.removeChild(l)},50),x[n])x[n].hasOwnProperty(e)&&x[n][e].onload()}s=s||v.errorTimeout;var l=h.createElement(i),c=0,u=0,d={t:t,s:n,e:o,a:r,x:s};1===x[n]&&(u=1,x[n]=[]),"object"==i?l.data=n:(l.src=n,l.type=i),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){a.call(this,u)},_.splice(e,0,d),"img"!=i&&(u||2===x[n]?(C.insertBefore(l,w?null:b),y(a,s)):x[n].push(l))}("c"==e?l:s,t,e,this.i++,i,n,o):(_.splice(this.i++,0,t),1==_.length&&m()),this}function a(){var t=v;return t.loader={load:e,i:0},t}var i,v,n=h.documentElement,y=t.setTimeout,b=h.getElementsByTagName("script")[0],o={}.toString,_=[],E=0,r="MozAppearance"in n.style,w=r&&!!h.createRange().compareNode,C=w?n:b.parentNode,s=(n=t.opera&&"[object Opera]"==o.call(t.opera),n=!!h.attachEvent&&!n,r?"object":n?"script":"img"),l=n?"script":s,c=Array.isArray||function(t){return"[object Array]"==o.call(t)},T=[],x={},D={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};(v=function(t){function u(t,e,i,n,o){var r=function(t){t=t.split("!");var e,i,n,o=T.length,r=t.pop(),s=t.length;for(r={url:r,origUrl:r,prefixes:t},i=0;i<s;i++)n=t[i].split("="),(e=D[n.shift()])&&(r=e(r,n));for(i=0;i<o;i++)r=T[i](r);return r}(t),s=r.autoCallback;r.url.split(".").pop().split("?").shift(),r.bypass||(e=e&&(d(e)?e:e[t]||e[n]||e[t.split("/").pop().split("?")[0]]),r.instead?r.instead(t,e,i,n,o):(x[r.url]?r.noexec=!0:x[r.url]=1,i.load(r.url,r.forceCSS||!r.forceJS&&"css"==r.url.split(".").pop().split("?").shift()?"c":void 0,r.noexec,r.attrs,r.timeout),(d(e)||d(s))&&i.load(function(){a(),e&&e(r.origUrl,o,n),s&&s(r.origUrl,o,n),x[r.url]=2})))}function e(t,e){function i(i,t){if(i){if(p(i))t||(a=function(){var t=[].slice.call(arguments);l.apply(this,t),c()}),u(i,a,e,0,r);else if(Object(i)===i)for(o in n=function(){var t,e=0;for(t in i)i.hasOwnProperty(t)&&e++;return e}(),i)i.hasOwnProperty(o)&&(t||--n||(d(a)?a=function(){var t=[].slice.call(arguments);l.apply(this,t),c()}:a[o]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[o])),u(i[o],a,e,o,r))}else t||c()}var n,o,r=!!t.test,s=t.load||t.both,a=t.callback||f,l=a,c=t.complete||f;i(r?t.yep:t.nope,!!s),s&&i(s)}var i,n,o=this.yepnope.loader;if(p(t))u(t,0,o,0);else if(c(t))for(i=0;i<t.length;i++)p(n=t[i])?u(n,0,o,0):c(n)?v(n):Object(n)===n&&e(n,o);else Object(t)===t&&e(t,o)}).addPrefix=function(t,e){D[t]=e},v.addFilter=function(t){T.push(t)},v.errorTimeout=1e4,null==h.readyState&&h.addEventListener&&(h.readyState="loading",h.addEventListener("DOMContentLoaded",i=function(){h.removeEventListener("DOMContentLoaded",i,0),h.readyState="complete"},0)),t.yepnope=a(),t.yepnope.executeStack=m,t.yepnope.injectJs=function(t,e,i,n,o,r){var s,a,l=h.createElement("script");n=n||v.errorTimeout;for(a in l.src=t,i)l.setAttribute(a,i[a]);e=r?m:e||f,l.onreadystatechange=l.onload=function(){!s&&g(l.readyState)&&(s=1,e(),l.onload=l.onreadystatechange=null)},y(function(){s||e(s=1)},n),o?l.onload():b.parentNode.insertBefore(l,b)},t.yepnope.injectCss=function(t,e,i,n,o,r){var s;n=h.createElement("link"),e=r?m:e||f;for(s in n.href=t,n.rel="stylesheet",n.type="text/css",i)n.setAttribute(s,i[s]);o||(b.parentNode.insertBefore(n,b),y(e,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(t){"use strict";var e,i,n,o,r,s;t.matchMedia=t.matchMedia||(e=t.document,n=e.documentElement,o=n.firstElementChild||n.firstChild,r=e.createElement("body"),(s=e.createElement("div")).id="mq-test-1",s.style.cssText="position:absolute;top:-100em",r.style.background="none",r.appendChild(s),function(t){return s.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(r,o),i=42===s.offsetWidth,n.removeChild(r),{matches:i,media:t}})}(this),function(v){"use strict";function t(){R(!0)}var p={};(v.respond=p).update=function(){};function i(t,e){var i=n();i&&(i.open("GET",t,!0),i.onreadystatechange=function(){4!==i.readyState||200!==i.status&&304!==i.status||e(i.responseText)},4!==i.readyState&&i.send(null))}function f(t){return t.replace(p.regex.minmaxwh,"").match(p.regex.other)}var r=[],n=function(){var e=!1;try{e=new v.XMLHttpRequest}catch(t){e=new v.ActiveXObject("Microsoft.XMLHTTP")}return function(){return e}}();if(p.ajax=i,p.queue=r,p.unsupportedmq=f,p.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,comments:/\/\*[^*]*\*+([^/][^*]*\*+)*\//gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,maxw:/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,minmaxwh:/\(\s*m(in|ax)\-(height|width)\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/gi,other:/\([^\)]*\)/g},p.mediaQueriesSupported=v.matchMedia&&null!==v.matchMedia("only all")&&v.matchMedia("only all").matches,!p.mediaQueriesSupported){var y,b,_,E=v.document,w=E.documentElement,C=[],T=[],x=[],s={},D=E.getElementsByTagName("head")[0]||w,a=E.getElementsByTagName("base")[0],I=D.getElementsByTagName("link"),O=function(){var t,e=E.createElement("div"),i=E.body,n=w.style.fontSize,o=i&&i.style.fontSize,r=!1;return e.style.cssText="position:absolute;font-size:1em;width:1em",i||((i=r=E.createElement("body")).style.background="none"),w.style.fontSize="100%",i.style.fontSize="100%",i.appendChild(e),r&&w.insertBefore(i,w.firstChild),t=e.offsetWidth,r?w.removeChild(i):i.removeChild(e),w.style.fontSize=n,o&&(i.style.fontSize=o),_=parseFloat(t)},R=function(t){var e="clientWidth",i=w[e],n="CSS1Compat"===E.compatMode&&i||E.body[e]||i,o={},r=I[I.length-1],s=(new Date).getTime();if(t&&y&&s-y<30)return v.clearTimeout(b),void(b=v.setTimeout(R,30));for(var a in y=s,C)if(C.hasOwnProperty(a)){var l=C[a],c=l.minw,u=l.maxw,d=null===c,h=null===u;c=c&&parseFloat(c)*(-1<c.indexOf("em")?_||O():1),u=u&&parseFloat(u)*(-1<u.indexOf("em")?_||O():1),l.hasquery&&(d&&h||!(d||c<=n)||!(h||n<=u))||(o[l.media]||(o[l.media]=[]),o[l.media].push(T[l.rules]))}for(var p in x)x.hasOwnProperty(p)&&x[p]&&x[p].parentNode===D&&D.removeChild(x[p]);for(var f in x.length=0,o)if(o.hasOwnProperty(f)){var g=E.createElement("style"),m=o[f].join("\n");g.type="text/css",g.media=f,D.insertBefore(g,r.nextSibling),g.styleSheet?g.styleSheet.cssText=m:g.appendChild(E.createTextNode(m)),x.push(g)}},l=function(t,e,i){function n(t){return t.replace(p.regex.urls,"$1"+e+"$2$3")}var o=t.replace(p.regex.comments,"").replace(p.regex.keyframes,"").match(p.regex.media),r=o&&o.length||0,s=!r&&i;(e=e.substring(0,e.lastIndexOf("/"))).length&&(e+="/"),s&&(r=1);for(var a=0;a<r;a++){var l,c,u,d;s?(l=i,T.push(n(t))):(l=o[a].match(p.regex.findStyles)&&RegExp.$1,T.push(RegExp.$2&&n(RegExp.$2))),d=(u=l.split(",")).length;for(var h=0;h<d;h++)c=u[h],f(c)||C.push({media:c.split("(")[0].match(p.regex.only)&&RegExp.$2||"all",rules:T.length-1,hasquery:-1<c.indexOf("("),minw:c.match(p.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:c.match(p.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}R()},c=function(){if(r.length){var e=r.shift();i(e.href,function(t){l(t,e.href,e.media),s[e.href]=!0,v.setTimeout(function(){c()},0)})}},e=function(){for(var t=0;t<I.length;t++){var e=I[t],i=e.href,n=e.media,o=e.rel&&"stylesheet"===e.rel.toLowerCase();i&&o&&!s[i]&&(e.styleSheet&&e.styleSheet.rawCssText?(l(e.styleSheet.rawCssText,i,n),s[i]=!0):(/^([a-zA-Z:]*\/\/)/.test(i)||a)&&i.replace(RegExp.$1,"").split("/")[0]!==v.location.host||("//"===i.substring(0,2)&&(i=v.location.protocol+i),r.push({href:i,media:n})))}c()};e(),p.update=e,p.getEmValue=O,v.addEventListener?v.addEventListener("resize",t,!1):v.attachEvent&&v.attachEvent("onresize",t)}}(this),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){var e=t.getBoundingClientRect(),i={};for(var n in e)i[n]=e[n];if(t.ownerDocument!==document){var o=t.ownerDocument.defaultView.frameElement;if(o){var r=s(o);i.top+=r.top,i.bottom+=r.top,i.left+=r.left,i.right+=r.left}}return i}function a(t){var e=(getComputedStyle(t)||{}).position,i=[];if("fixed"===e)return[t];for(var n=t;(n=n.parentNode)&&n&&1===n.nodeType;){var o=void 0;try{o=getComputedStyle(n)}catch(t){}if(null==o)return i.push(n),i;var r=o,s=r.overflow,a=r.overflowX,l=r.overflowY;/(auto|scroll)/.test(s+l+a)&&("absolute"!==e||0<=["relative","absolute","fixed"].indexOf(o.position))&&i.push(n)}return i.push(t.ownerDocument.body),t.ownerDocument!==document&&i.push(t.ownerDocument.defaultView),i}function o(){g&&document.body.removeChild(g),g=null}function T(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var i=e.documentElement,n=s(t),o=b();return n.top-=o.top,n.left-=o.left,void 0===n.width&&(n.width=document.body.scrollWidth-n.left-n.right),void 0===n.height&&(n.height=document.body.scrollHeight-n.top-n.bottom),n.top=n.top-i.clientTop,n.left=n.left-i.clientLeft,n.right=e.body.clientWidth-n.width-n.left,n.bottom=e.body.clientHeight-n.height-n.top,n}function E(t){return t.offsetParent||document.documentElement}function w(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");x(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;i===n&&(n=e.clientWidth),document.body.removeChild(e);var o=i-n;return{width:o,height:o}}function x(){var i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=[];return Array.prototype.push.apply(t,arguments),t.slice(1).forEach(function(t){if(t)for(var e in t)!{}.hasOwnProperty.call(t,e)||(i[e]=t[e])}),i}function r(e,t){if(void 0!==e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.remove(t)});else{var i=new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi"),n=u(e).replace(i," ");d(e,n)}}function l(e,t){if(void 0!==e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.add(t)});else{r(e,t);var i=u(e)+" "+t;d(e,i)}}function c(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=u(t);return new RegExp("(^| )"+e+"( |$)","gi").test(i)}function u(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function d(t,e){t.setAttribute("class",e)}function D(e,i,t){t.forEach(function(t){-1===i.indexOf(t)&&c(e,t)&&r(e,t)}),i.forEach(function(t){c(e,t)||l(e,t)})}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e,i){var n=arguments.length<=2||void 0===i?1:i;return e<=t+n&&t-n<=e}function h(){return"undefined"!=typeof performance&&void 0!==performance.now?performance.now():+new Date}function C(){for(var n={top:0,left:0},t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.forEach(function(t){var e=t.top,i=t.left;"string"==typeof e&&(e=parseFloat(e,10)),"string"==typeof i&&(i=parseFloat(i,10)),n.top+=e,n.left+=i}),n}function I(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}var O=void 0;function p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}void 0===O&&(O={modules:[]});var f,g=null,v=(f=0,function(){return++f}),y={},b=function(){var t=g;t||((t=document.createElement("div")).setAttribute("data-tether-id",v()),x(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),g=t);var e=t.getAttribute("data-tether-id");return void 0===y[e]&&(y[e]=s(t),R(function(){delete y[e]})),y[e]},_=[],R=function(t){_.push(t)},k=function(){for(var t=void 0;t=_.pop();)t()},S=((N=function(t,e,i){return e&&p(t.prototype,e),i&&p(t,i),t})(A,[{key:"on",value:function(t,e,i){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:i,once:n})}},{key:"once",value:function(t,e,i){this.on(t,e,i,!0)}},{key:"off",value:function(t,e){if(void 0!==this.bindings&&void 0!==this.bindings[t])if(void 0===e)delete this.bindings[t];else for(var i=0;i<this.bindings[t].length;)this.bindings[t][i].handler===e?this.bindings[t].splice(i,1):++i}},{key:"trigger",value:function(t){if(void 0!==this.bindings&&this.bindings[t]){for(var e=0,i=arguments.length,n=Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,l=r.once,c=a;void 0===c&&(c=this),s.apply(c,n),l?this.bindings[t].splice(e,1):++e}}}}]),A);function A(){n(this,A)}O.Utils={getActualBoundingClientRect:s,getScrollParents:a,getBounds:T,getOffsetParent:E,extend:x,addClass:l,removeClass:r,hasClass:c,updateClasses:D,defer:R,flush:k,uniqueId:v,Evented:S,getScrollBarSize:w,removeUtilElements:o};var M=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},N=function(t,e,i){return e&&K(t.prototype,e),i&&K(t,i),t};function K(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}if(void 0===O)throw new Error("You must include the utils.js file before tether.js");function L(){z.forEach(function(t){t.position(!1)}),k()}var P,F,B,a=(J=O.Utils).getScrollParents,E=(T=J.getBounds,J.getOffsetParent),l=(x=J.extend,J.addClass),r=J.removeClass,w=(D=J.updateClasses,R=J.defer,k=J.flush,J.getScrollBarSize),o=J.removeUtilElements,H=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],i=0;i<e.length;++i){var n=e[i];if(void 0!==t.style[n])return n}}(),z=[];function $(){return void 0!==F&&16<F?(F=Math.min(F-16,250),void(B=setTimeout($,250))):void(void 0!==P&&h()-P<10||(null!=B&&(clearTimeout(B),B=null),P=h(),L(),F=h()-P))}B=F=P=null,"undefined"!=typeof window&&void 0!==window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,$)});function V(t){var e=t.left,i=t.top;return void 0!==q[t.left]&&(e=q[t.left]),void 0!==q[t.top]&&(i=q[t.top]),{left:e,top:i}}function j(t){var e=t.split(" "),i=M(e,2);return{top:i[0],left:i[1]}}var W={center:"center",left:"right",right:"left"},G={middle:"middle",top:"bottom",bottom:"top"},q={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},U=j,Y=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(X,S),N(X,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return void 0!==e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]||arguments[1];this.options=x({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},t);var n=this.options,o=n.element,r=n.target,s=n.targetModifier;if(this.element=o,this.target=r,this.targetModifier=s,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if(void 0===e[t])throw new Error("Tether Error: Both element and target must be defined");void 0!==e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),l(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&l(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=U(this.options.targetAttachment),this.attachment=U(this.options.attachment),this.offset=j(this.options.offset),this.targetOffset=j(this.options.targetOffset),void 0!==this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=a(this.target),!1!==this.options.enabled&&this.enable(i)}},{key:"getTargetBounds",value:function(){if(void 0===this.targetModifier)return T(this.target);if("visible"===this.targetModifier)return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((r={height:(t=T(this.target)).height,width:t.width,top:t.top,left:t.left}).height=Math.min(r.height,t.height-(pageYOffset-t.top)),r.height=Math.min(r.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),r.height=Math.min(innerHeight,r.height),r.height-=2,r.width=Math.min(r.width,t.width-(pageXOffset-t.left)),r.width=Math.min(r.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),r.width=Math.min(innerWidth,r.width),r.width-=2,r.top<pageYOffset&&(r.top=pageYOffset),r.left<pageXOffset&&(r.left=pageXOffset),r);if("scroll-handle"===this.targetModifier){var t=void 0,e=this.target;t=e===document.body?(e=document.documentElement,{left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):T(e);var i=getComputedStyle(e),n=0;(e.scrollWidth>e.clientWidth||0<=[i.overflow,i.overflowX].indexOf("scroll")||this.target!==document.body)&&(n=15);var o=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-n,r={width:15,height:.975*o*(o/e.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},s=0;o<408&&this.target===document.body&&(s=-11e-5*Math.pow(o,2)-.00727*o+22.58),this.target!==document.body&&(r.height=Math.max(r.height,24));var a=this.target.scrollTop/(e.scrollHeight-o);return r.top=a*(o-r.height-s)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(r.height=Math.max(r.height,24)),r}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return void 0===this._cache&&(this._cache={}),void 0===this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&l(this.target,this.getClass("enabled")),l(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(t){t!==e.target.ownerDocument&&t.addEventListener("scroll",e.position)}),t&&this.position()}},{key:"disable",value:function(){var e=this;r(this.target,this.getClass("enabled")),r(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParents&&this.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.position)})}},{key:"destroy",value:function(){var i=this;this.disable(),z.forEach(function(t,e){t===i&&z.splice(e,1)}),0===z.length&&o()}},{key:"updateAttachClasses",value:function(t,e){var i=this;t=t||this.attachment,e=e||this.targetAttachment,void 0!==this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]);var n=this._addAttachClasses;t.top&&n.push(this.getClass("element-attached")+"-"+t.top),t.left&&n.push(this.getClass("element-attached")+"-"+t.left),e.top&&n.push(this.getClass("target-attached")+"-"+e.top),e.left&&n.push(this.getClass("target-attached")+"-"+e.left);var o=[];["left","top","bottom","right","middle","center"].forEach(function(t){o.push(i.getClass("element-attached")+"-"+t),o.push(i.getClass("target-attached")+"-"+t)}),R(function(){void 0!==i._addAttachClasses&&(D(i.element,i._addAttachClasses,o),!1!==i.options.addTargetClasses&&D(i.target,i._addAttachClasses,o),delete i._addAttachClasses)})}},{key:"position",value:function(){var a=this,t=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var e=function(t,e){var i=t.left,n=t.top;return"auto"===i&&(i=W[e.left]),"auto"===n&&(n=G[e.top]),{left:i,top:n}}(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,e);var i=this.cache("element-bounds",function(){return T(a.element)}),n=i.width,o=i.height;if(0===n&&0===o&&void 0!==this.lastSize){var r=this.lastSize;n=r.width,o=r.height}else this.lastSize={width:n,height:o};var s=this.cache("target-bounds",function(){return a.getTargetBounds()}),l=s,c=I(V(this.attachment),{width:n,height:o}),u=I(V(e),l),d=I(this.offset,{width:n,height:o}),h=I(this.targetOffset,l);c=C(c,d),u=C(u,h);for(var p=s.left+u.left-c.left,f=s.top+u.top-c.top,g=0;g<O.modules.length;++g){var m=O.modules[g].position.call(this,{left:p,top:f,targetAttachment:e,targetPos:s,elementPos:i,offset:c,targetOffset:u,manualOffset:d,manualTargetOffset:h,scrollbarSize:_,attachment:this.attachment});if(!1===m)return!1;void 0!==m&&"object"==typeof m&&(f=m.top,p=m.left)}var v={page:{top:f,left:p},viewport:{top:f-pageYOffset,bottom:pageYOffset-f-o+innerHeight,left:p-pageXOffset,right:pageXOffset-p-n+innerWidth}},y=this.target.ownerDocument,b=y.defaultView,_=void 0;return y.body.scrollWidth>b.innerWidth&&(_=this.cache("scrollbar-size",w),v.viewport.bottom-=_.height),y.body.scrollHeight>b.innerHeight&&(_=this.cache("scrollbar-size",w),v.viewport.right-=_.width),-1!==["","static"].indexOf(y.body.style.position)&&-1!==["","static"].indexOf(y.body.parentElement.style.position)||(v.page.bottom=y.body.scrollHeight-f-o,v.page.right=y.body.scrollWidth-p-n),void 0!==this.options.optimizations&&!1!==this.options.optimizations.moveElement&&void 0===this.targetModifier&&function(){var t=a.cache("target-offsetparent",function(){return E(a.target)}),e=a.cache("target-offsetparent-bounds",function(){return T(t)}),i=getComputedStyle(t),n=e,o={};if(["Top","Left","Bottom","Right"].forEach(function(t){o[t.toLowerCase()]=parseFloat(i["border"+t+"Width"])}),e.right=y.body.scrollWidth-e.left-n.width+o.right,e.bottom=y.body.scrollHeight-e.top-n.height+o.bottom,v.page.top>=e.top+o.top&&v.page.bottom>=e.bottom&&v.page.left>=e.left+o.left&&v.page.right>=e.right){var r=t.scrollTop,s=t.scrollLeft;v.offset={top:v.page.top-e.top+r-o.top,left:v.page.left-e.left+s-o.left}}}(),this.move(v),this.history.unshift(v),3<this.history.length&&this.history.pop(),t&&k(),!0}}},{key:"move",value:function(e){var o=this;if(void 0!==this.element.parentNode){var i={};for(var t in e)for(var n in i[t]={},e[t]){for(var r=!1,s=0;s<this.history.length;++s){var a=this.history[s];if(void 0!==a[t]&&!m(a[t][n],e[t][n])){r=!0;break}}r||(i[t][n]=!0)}var l={top:"",left:"",right:"",bottom:""},c=function(t,e){if(!1!==(void 0!==o.options.optimizations?o.options.optimizations.gpu:null)){var i=void 0,n=void 0;i=t.top?(l.top=0,e.top):(l.bottom=0,-e.bottom),n=t.left?(l.left=0,e.left):(l.right=0,-e.right),l[H]="translateX("+Math.round(n)+"px) translateY("+Math.round(i)+"px)","msTransform"!==H&&(l[H]+=" translateZ(0)")}else t.top?l.top=e.top+"px":l.bottom=e.bottom+"px",t.left?l.left=e.left+"px":l.right=e.right+"px"},u=!1;if((i.page.top||i.page.bottom)&&(i.page.left||i.page.right)?(l.position="absolute",c(i.page,e.page)):(i.viewport.top||i.viewport.bottom)&&(i.viewport.left||i.viewport.right)?(l.position="fixed",c(i.viewport,e.viewport)):void 0!==i.offset&&i.offset.top&&i.offset.left?function(){l.position="absolute";var t=o.cache("target-offsetparent",function(){return E(o.target)});E(o.element)!==t&&R(function(){o.element.parentNode.removeChild(o.element),t.appendChild(o.element)}),c(i.offset,e.offset),u=!0}():(l.position="absolute",c({top:!0,left:!0},e.page)),!u){for(var d=!0,h=this.element.parentNode;h&&1===h.nodeType&&"BODY"!==h.tagName;){if("static"!==getComputedStyle(h).position){d=!1;break}h=h.parentNode}d||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var p={},f=!1;for(var n in l){var g=l[n];this.element.style[n]!==g&&(f=!0,p[n]=g)}f&&R(function(){x(o.element.style,p)})}}}]),X);function X(t){var e=this;n(this,X),function(t,e,i){for(var n=!0;n;){var o=t,r=e,s=i;n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return;t=c,e=r,i=s,n=!0,a=c=void 0}}(Object.getPrototypeOf(X.prototype),"constructor",this).call(this),this.position=this.position.bind(this),z.push(this),this.history=[],this.setOptions(t,!1),O.modules.forEach(function(t){void 0!==t.initialize&&t.initialize.call(e)}),this.position()}Y.modules=[],O.position=L;var Z=x(Y,O),x=(M=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},T=(J=O.Utils).getBounds,J.extend),Q=(D=J.updateClasses,R=J.defer,["left","top","right","bottom"]);O.modules.push({position:function(t){var p=this,f=t.top,g=t.left,m=t.targetAttachment;if(!this.options.constraints)return!0;var e=this.cache("element-bounds",function(){return T(p.element)}),v=e.height,y=e.width;if(0===y&&0===v&&void 0!==this.lastSize){var i=this.lastSize;y=i.width,v=i.height}var n=this.cache("target-bounds",function(){return p.getTargetBounds()}),b=n.height,_=n.width,o=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,i=t.pinnedClass;e&&o.push(e),i&&o.push(i)}),o.forEach(function(e){["left","top","right","bottom"].forEach(function(t){o.push(e+"-"+t)})});var E=[],w=x({},m),C=x({},this.attachment);return this.options.constraints.forEach(function(t){var e=t.to,i=t.attachment,n=t.pin;void 0===i&&(i="");var o=void 0,r=void 0;if(0<=i.indexOf(" ")){var s=i.split(" "),a=M(s,2);r=a[0],o=a[1]}else o=r=i;var l=function(t,r){return"scrollParent"===r?r=t.scrollParents[0]:"window"===r&&(r=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),r===document&&(r=r.documentElement),void 0!==r.nodeType&&function(){var t=r,e=T(r),i=e,n=getComputedStyle(r);if(r=[i.left,i.top,e.width+i.left,e.height+i.top],t.ownerDocument!==document){var o=t.ownerDocument.defaultView;r[0]+=o.pageXOffset,r[1]+=o.pageYOffset,r[2]+=o.pageXOffset,r[3]+=o.pageYOffset}Q.forEach(function(t,e){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?r[e]+=parseFloat(n["border"+t+"Width"]):r[e]-=parseFloat(n["border"+t+"Width"])})}(),r}(p,e);"target"!==r&&"both"!==r||(f<l[1]&&"top"===w.top&&(f+=b,w.top="bottom"),f+v>l[3]&&"bottom"===w.top&&(f-=b,w.top="top")),"together"===r&&("top"===w.top&&("bottom"===C.top&&f<l[1]?(f+=b,w.top="bottom",f+=v,C.top="top"):"top"===C.top&&f+v>l[3]&&f-(v-b)>=l[1]&&(f-=v-b,w.top="bottom",C.top="bottom")),"bottom"===w.top&&("top"===C.top&&f+v>l[3]?(f-=b,w.top="top",f-=v,C.top="bottom"):"bottom"===C.top&&f<l[1]&&f+(2*v-b)<=l[3]&&(f+=v-b,w.top="top",C.top="top")),"middle"===w.top&&(f+v>l[3]&&"top"===C.top?(f-=v,C.top="bottom"):f<l[1]&&"bottom"===C.top&&(f+=v,C.top="top"))),"target"!==o&&"both"!==o||(g<l[0]&&"left"===w.left&&(g+=_,w.left="right"),g+y>l[2]&&"right"===w.left&&(g-=_,w.left="left")),"together"===o&&(g<l[0]&&"left"===w.left?"right"===C.left?(g+=_,w.left="right",g+=y,C.left="left"):"left"===C.left&&(g+=_,w.left="right",g-=y,C.left="right"):g+y>l[2]&&"right"===w.left?"left"===C.left?(g-=_,w.left="left",g-=y,C.left="right"):"right"===C.left&&(g-=_,w.left="left",g+=y,C.left="left"):"center"===w.left&&(g+y>l[2]&&"left"===C.left?(g-=y,C.left="right"):g<l[0]&&"right"===C.left&&(g+=y,C.left="left"))),"element"!==r&&"both"!==r||(f<l[1]&&"bottom"===C.top&&(f+=v,C.top="top"),f+v>l[3]&&"top"===C.top&&(f-=v,C.top="bottom")),"element"!==o&&"both"!==o||(g<l[0]&&("right"===C.left?(g+=y,C.left="left"):"center"===C.left&&(g+=y/2,C.left="left")),g+y>l[2]&&("left"===C.left?(g-=y,C.left="right"):"center"===C.left&&(g-=y/2,C.left="right"))),"string"==typeof n?n=n.split(",").map(function(t){return t.trim()}):!0===n&&(n=["top","left","right","bottom"]),n=n||[];var c,u,d=[],h=[];f<l[1]&&(0<=n.indexOf("top")?(f=l[1],d.push("top")):h.push("top")),f+v>l[3]&&(0<=n.indexOf("bottom")?(f=l[3]-v,d.push("bottom")):h.push("bottom")),g<l[0]&&(0<=n.indexOf("left")?(g=l[0],d.push("left")):h.push("left")),g+y>l[2]&&(0<=n.indexOf("right")?(g=l[2]-y,d.push("right")):h.push("right")),d.length&&(u=void 0!==p.options.pinnedClass?p.options.pinnedClass:p.getClass("pinned"),E.push(u),d.forEach(function(t){E.push(u+"-"+t)})),h.length&&(c=void 0!==p.options.outOfBoundsClass?p.options.outOfBoundsClass:p.getClass("out-of-bounds"),E.push(c),h.forEach(function(t){E.push(c+"-"+t)})),(0<=d.indexOf("left")||0<=d.indexOf("right"))&&(C.left=w.left=!1),(0<=d.indexOf("top")||0<=d.indexOf("bottom"))&&(C.top=w.top=!1),w.top===m.top&&w.left===m.left&&C.top===p.attachment.top&&C.left===p.attachment.left||(p.updateAttachClasses(C,w),p.trigger("update",{attachment:C,targetAttachment:w}))}),R(function(){!1!==p.options.addTargetClasses&&D(p.target,E,o),D(p.element,E,o)}),{top:f,left:g}}});var J,T=(J=O.Utils).getBounds,D=J.updateClasses;R=J.defer;O.modules.push({position:function(t){var e=this,i=t.top,n=t.left,o=this.cache("element-bounds",function(){return T(e.element)}),r=o.height,s=o.width,a=this.getTargetBounds(),l=i+r,c=n+s,u=[];i<=a.bottom&&l>=a.top&&["left","right"].forEach(function(t){var e=a[t];e!==n&&e!==c||u.push(t)}),n<=a.right&&c>=a.left&&["top","bottom"].forEach(function(t){var e=a[t];e!==i&&e!==l||u.push(t)});var d=[],h=[];return d.push(this.getClass("abutted")),["left","top","right","bottom"].forEach(function(t){d.push(e.getClass("abutted")+"-"+t)}),u.length&&h.push(this.getClass("abutted")),u.forEach(function(t){h.push(e.getClass("abutted")+"-"+t)}),R(function(){!1!==e.options.addTargetClasses&&D(e.target,h,d),D(e.element,h,d)}),!0}});M=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};return O.modules.push({position:function(t){var e=t.top,i=t.left;if(this.options.shift){var n=this.options.shift;"function"==typeof this.options.shift&&(n=this.options.shift.call(this,{top:e,left:i}));var o=void 0,r=void 0;if("string"==typeof n){(n=n.split(" "))[1]=n[1]||n[0];var s=M(n,2);o=s[0],r=s[1],o=parseFloat(o,10),r=parseFloat(r,10)}else o=n.top,r=n.left;return{top:e+=o,left:i+=r}}}}),Z}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";var t;function f(){return t.apply(null,arguments)}function o(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function g(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t,e){for(var i in e)g(e,i)&&(t[i]=e[i]);return g(e,"toString")&&(t.toString=e.toString),g(e,"valueOf")&&(t.valueOf=e.valueOf),t}function a(t,e,i,n){return Nt(t,e,i,n,!0).utc()}function m(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}),t._pf}function l(t){if(null==t._isValid){var e=m(t);t._isValid=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function c(t){var e=a(NaN);return null!=t?s(m(e),t):m(e).userInvalidated=!0,e}var u=f.momentProperties=[];function d(t,e){var i,n,o;if(void 0!==e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),void 0!==e._i&&(t._i=e._i),void 0!==e._f&&(t._f=e._f),void 0!==e._l&&(t._l=e._l),void 0!==e._strict&&(t._strict=e._strict),void 0!==e._tzm&&(t._tzm=e._tzm),void 0!==e._isUTC&&(t._isUTC=e._isUTC),void 0!==e._offset&&(t._offset=e._offset),void 0!==e._pf&&(t._pf=m(e)),void 0!==e._locale&&(t._locale=e._locale),0<u.length)for(i in u)void 0!==(o=e[n=u[i]])&&(t[n]=o);return t}var e=!1;function h(t){d(this,t),this._d=new Date(+t._d),!1===e&&(e=!0,f.updateOffset(this),e=!1)}function p(t){return t instanceof h||null!=t&&null!=t._isAMomentObject}function v(t){var e=+t,i=0;return 0!=e&&isFinite(e)&&(i=0<=e?Math.floor(e):Math.ceil(e)),i}function y(t,e,i){var n,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0;for(n=0;n<o;n++)(i&&t[n]!==e[n]||!i&&v(t[n])!==v(e[n]))&&s++;return s+r}function i(){}var n,b={};function _(t){return t?t.toLowerCase().replace("_","-"):t}function E(t){var e=null;if(!b[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=n._abbr,require("./locale/"+t),w(e)}catch(t){}return b[t]}function w(t,e){var i;return t&&(i=void 0===e?T(t):C(t,e))&&(n=i),n._abbr}function C(t,e){return null!==e?(e.abbr=t,b[t]||(b[t]=new i),b[t].set(e),w(t),b[t]):(delete b[t],null)}function T(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return n;if(!o(t)){if(e=E(t))return e;t=[t]}return function(t){for(var e,i,n,o,r=0;r<t.length;){for(e=(o=_(t[r]).split("-")).length,i=(i=_(t[r+1]))?i.split("-"):null;0<e;){if(n=E(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&y(o,i,!0)>=e-1)break;e--}r++}return null}(t)}var x={};function D(t,e){var i=t.toLowerCase();x[i]=x[i+"s"]=x[e]=t}function I(t){return"string"==typeof t?x[t]||x[t.toLowerCase()]:void 0}function O(t){var e,i,n={};for(i in t)g(t,i)&&(e=I(i))&&(n[e]=t[i]);return n}function R(e,i){return function(t){return null!=t?(S(this,e,t),f.updateOffset(this,i),this):k(this,e)}}function k(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function S(t,e,i){return t._d["set"+(t._isUTC?"UTC":"")+e](i)}function A(t,e){var i;if("object"==typeof t)for(i in t)this.set(i,t[i]);else if("function"==typeof this[t=I(t)])return this[t](e);return this}function M(t,e,i){for(var n=""+Math.abs(t),o=0<=t;n.length<e;)n="0"+n;return(o?i?"+":"":"-")+n}var N=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,K=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,L={},P={};function F(t,e,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),t&&(P[t]=o),e&&(P[e[0]]=function(){return M(o.apply(this,arguments),e[1],e[2])}),i&&(P[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function B(t,e){return t.isValid()?(e=H(e,t.localeData()),L[e]||(L[e]=function(i){var n,o,t,r=i.match(N);for(n=0,o=r.length;n<o;n++)P[r[n]]?r[n]=P[r[n]]:r[n]=(t=r[n]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(t){var e="";for(n=0;n<o;n++)e+=r[n]instanceof Function?r[n].call(t,i):r[n];return e}}(e)),L[e](t)):t.localeData().invalidDate()}function H(t,e){var i=5;function n(t){return e.longDateFormat(t)||t}for(K.lastIndex=0;0<=i&&K.test(t);)t=t.replace(K,n),K.lastIndex=0,i-=1;return t}var z=/\d/,$=/\d\d/,V=/\d{3}/,j=/\d{4}/,W=/[+-]?\d{6}/,G=/\d\d?/,q=/\d{1,3}/,U=/\d{1,4}/,Y=/[+-]?\d{1,6}/,X=/[+-]?\d+/,Z=/Z|[+-]\d\d:?\d\d/gi,Q=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,J={};function tt(t,e,i){J[t]="function"==typeof e?e:function(t){return t&&i?i:e}}var et={};function it(t,i){var e,n=i;for("string"==typeof t&&(t=[t]),"number"==typeof i&&(n=function(t,e){e[i]=v(t)}),e=0;e<t.length;e++)et[t[e]]=n}function nt(t,o){it(t,function(t,e,i,n){i._w=i._w||{},o(t,i._w,i,n)})}var ot=0,rt=1,st=2,at=3,lt=4,ct=5,ut=6;function dt(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),F("MMMM",0,0,function(t){return this.localeData().months(this,t)}),D("month","M"),tt("M",G),tt("MM",G,$),tt("MMM",Q),tt("MMMM",Q),it(["M","MM"],function(t,e){e[rt]=v(t)-1}),it(["MMM","MMMM"],function(t,e,i,n){var o=i._locale.monthsParse(t,n,i._strict);null!=o?e[rt]=o:m(i).invalidMonth=t});var ht="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var pt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function ft(t,e){var i;return"string"==typeof e&&"number"!=typeof(e=t.localeData().monthsParse(e))||(i=Math.min(t.date(),dt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i)),t}function gt(t){return null!=t?(ft(this,t),f.updateOffset(this,!0),this):k(this,"Month")}function mt(t){var e,i=t._a;return i&&-2===m(t).overflow&&(e=i[rt]<0||11<i[rt]?rt:i[st]<1||i[st]>dt(i[ot],i[rt])?st:i[at]<0||24<i[at]||24===i[at]&&(0!==i[lt]||0!==i[ct]||0!==i[ut])?at:i[lt]<0||59<i[lt]?lt:i[ct]<0||59<i[ct]?ct:i[ut]<0||999<i[ut]?ut:-1,m(t)._overflowDayOfYear&&(e<ot||st<e)&&(e=st),m(t).overflow=e),t}function vt(t){!1===f.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function yt(t,e){var i=!0,n=t+"\n"+(new Error).stack;return s(function(){return i&&(vt(n),i=!1),e.apply(this,arguments)},e)}var bt={};f.suppressDeprecationWarnings=!1;var _t=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Et=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],wt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ct=/^\/?Date\((\-?\d+)/i;function Tt(t){var e,i,n=t._i,o=_t.exec(n);if(o){for(m(t).iso=!0,e=0,i=Et.length;e<i;e++)if(Et[e][1].exec(n)){t._f=Et[e][0]+(o[6]||" ");break}for(e=0,i=wt.length;e<i;e++)if(wt[e][1].exec(n)){t._f+=wt[e][0];break}n.match(Z)&&(t._f+="Z"),At(t)}else t._isValid=!1}function xt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<1970&&e.setUTCFullYear(t),e}function Dt(t){return It(t)?366:365}function It(t){return t%4==0&&t%100!=0||t%400==0}f.createFromInputFallback=yt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),D("year","y"),tt("Y",X),tt("YY",G,$),tt("YYYY",U,j),tt("YYYYY",Y,W),tt("YYYYYY",Y,W),it(["YYYY","YYYYY","YYYYYY"],ot),it("YY",function(t,e){e[ot]=f.parseTwoDigitYear(t)});var Ot=R("FullYear",!(f.parseTwoDigitYear=function(t){return v(t)+(68<v(t)?1900:2e3)}));function Rt(t,e,i){var n,o=i-e,r=i-t.day();return o<r&&(r-=7),r<o-7&&(r+=7),n=Kt(t).add(r,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),D("week","w"),D("isoWeek","W"),tt("w",G),tt("ww",G,$),tt("W",G),tt("WW",G,$),nt(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=v(t)});function kt(t,e,i){return null!=t?t:null!=e?e:i}function St(t){var e,i,n,o,r=[];if(!t._d){for(n=function(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[st]&&null==t._a[rt]&&function(t){var e,i,n,o,r,s,a;null!=(e=t._w).GG||null!=e.W||null!=e.E?(r=1,s=4,i=kt(e.GG,t._a[ot],Rt(Kt(),1,4).year),n=kt(e.W,1),o=kt(e.E,1)):(r=t._locale._week.dow,s=t._locale._week.doy,i=kt(e.gg,t._a[ot],Rt(Kt(),r,s).year),n=kt(e.w,1),null!=e.d?(o=e.d)<r&&++n:o=null!=e.e?e.e+r:r);a=function(t,e,i,n,o){var r,s=xt(t,0,1).getUTCDay();return{year:0<(r=7*(e-1)+((i=null!=i?i:o)-o)+(o-(s=0===s?7:s)+(n<s?7:0)-(s<o?7:0))+1)?t:t-1,dayOfYear:0<r?r:Dt(t-1)+r}}(i,n,o,s,r),t._a[ot]=a.year,t._dayOfYear=a.dayOfYear}(t),t._dayOfYear&&(o=kt(t._a[ot],n[ot]),t._dayOfYear>Dt(o)&&(m(t)._overflowDayOfYear=!0),i=xt(o,0,t._dayOfYear),t._a[rt]=i.getUTCMonth(),t._a[st]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=r[e]=n[e];for(;e<7;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[at]&&0===t._a[lt]&&0===t._a[ct]&&0===t._a[ut]&&(t._nextDay=!0,t._a[at]=0),t._d=(t._useUTC?xt:function(t,e,i,n,o,r,s){var a=new Date(t,e,i,n,o,r,s);return t<1970&&a.setFullYear(t),a}).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[at]=24)}}function At(t){if(t._f!==f.ISO_8601){t._a=[],m(t).empty=!0;var e,i,n,o,r,s,a,l,c,u,d=""+t._i,h=d.length,p=0;for(n=H(t._f,t._locale).match(N)||[],e=0;e<n.length;e++)o=n[e],(i=(d.match((u=t,g(J,c=o)?J[c](u._strict,u._locale):new RegExp(function(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(c))))||[])[0])&&(0<(r=d.substr(0,d.indexOf(i))).length&&m(t).unusedInput.push(r),d=d.slice(d.indexOf(i)+i.length),p+=i.length),P[o]?(i?m(t).empty=!1:m(t).unusedTokens.push(o),s=o,l=t,null!=(a=i)&&g(et,s)&&et[s](a,l._a,l,s)):t._strict&&!i&&m(t).unusedTokens.push(o);m(t).charsLeftOver=h-p,0<d.length&&m(t).unusedInput.push(d),!0===m(t).bigHour&&t._a[at]<=12&&0<t._a[at]&&(m(t).bigHour=void 0),t._a[at]=function(t,e,i){var n;if(null==i)return e;return null!=t.meridiemHour?t.meridiemHour(e,i):(null!=t.isPM&&((n=t.isPM(i))&&e<12&&(e+=12),n||12!==e||(e=0)),e)}(t._locale,t._a[at],t._meridiem),St(t),mt(t)}else Tt(t)}function Mt(t){var e,i=t._i,n=t._f;return t._locale=t._locale||T(t._l),null===i||void 0===n&&""===i?c({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),p(i)?new h(mt(i)):(o(n)?function(t){var e,i,n,o,r;if(0===t._f.length)return m(t).invalidFormat=!0,t._d=new Date(NaN);for(o=0;o<t._f.length;o++)r=0,e=d({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],At(e),l(e)&&(r+=m(e).charsLeftOver,r+=10*m(e).unusedTokens.length,m(e).score=r,(null==n||r<n)&&(n=r,i=e));s(t,i||e)}(t):n?At(t):r(i)?t._d=i:function(t){var e=t._i;void 0===e?t._d=new Date:r(e)?t._d=new Date(+e):"string"==typeof e?function(t){var e=Ct.exec(t._i);null===e?(Tt(t),!1===t._isValid&&(delete t._isValid,f.createFromInputFallback(t))):t._d=new Date(+e[1])}(t):o(e)?(t._a=function(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}(e.slice(0),function(t){return parseInt(t,10)}),St(t)):"object"==typeof e?function(t){if(!t._d){var e=O(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],St(t)}}(t):"number"==typeof e?t._d=new Date(e):f.createFromInputFallback(t)}(t),(e=new h(mt(t)))._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e))}function Nt(t,e,i,n,o){var r={};return"boolean"==typeof i&&(n=i,i=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=o,r._l=i,r._i=t,r._f=e,r._strict=n,Mt(r)}function Kt(t,e,i,n){return Nt(t,e,i,n,!1)}F("DDD",["DDDD",3],"DDDo","dayOfYear"),D("dayOfYear","DDD"),tt("DDD",q),tt("DDDD",V),it(["DDD","DDDD"],function(t,e,i){i._dayOfYear=v(t)}),f.ISO_8601=function(){};var Lt=yt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Kt.apply(null,arguments);return t<this?this:t}),Pt=yt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Kt.apply(null,arguments);return this<t?this:t});function Ft(t,e){var i,n;if(1===e.length&&o(e[0])&&(e=e[0]),!e.length)return Kt();for(i=e[0],n=1;n<e.length;++n)e[n][t](i)&&(i=e[n]);return i}function Bt(t){var e=O(t),i=e.year||0,n=e.quarter||0,o=e.month||0,r=e.week||0,s=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*a,this._days=+s+7*r,this._months=+o+3*n+12*i,this._data={},this._locale=T(),this._bubble()}function Ht(t){return t instanceof Bt}function zt(t,i){F(t,0,0,function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+M(~~(t/60),2)+i+M(~~t%60,2)})}zt("Z",":"),zt("ZZ",""),tt("Z",Z),tt("ZZ",Z),it(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Vt(t)});var $t=/([\+\-]|\d\d)/gi;function Vt(t){var e=(t||"").match(Z)||[],i=((e[e.length-1]||[])+"").match($t)||["-",0,0],n=60*i[1]+v(i[2]);return"+"===i[0]?n:-n}function jt(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(p(t)||r(t)?+t:+Kt(t))-+i,i._d.setTime(+i._d+n),f.updateOffset(i,!1),i):Kt(t).local()}function Wt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Gt(){return this._isUTC&&0===this._offset}f.updateOffset=function(){};var qt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ut=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function Yt(t,e){var i,n,o,r=t,s=null;return Ht(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},e?r[e]=t:r.milliseconds=t):(s=qt.exec(t))?(i="-"===s[1]?-1:1,r={y:0,d:v(s[st])*i,h:v(s[at])*i,m:v(s[lt])*i,s:v(s[ct])*i,ms:v(s[ut])*i}):(s=Ut.exec(t))?(i="-"===s[1]?-1:1,r={y:Xt(s[2],i),M:Xt(s[3],i),d:Xt(s[4],i),h:Xt(s[5],i),m:Xt(s[6],i),s:Xt(s[7],i),w:Xt(s[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(o=function(t,e){var i;e=jt(e,t),t.isBefore(e)?i=Zt(t,e):((i=Zt(e,t)).milliseconds=-i.milliseconds,i.months=-i.months);return i}(Kt(r.from),Kt(r.to)),(r={}).ms=o.milliseconds,r.M=o.months),n=new Bt(r),Ht(t)&&g(t,"_locale")&&(n._locale=t._locale),n}function Xt(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Zt(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Qt(n,o){return function(t,e){var i;return null===e||isNaN(+e)||(function(t,e){bt[t]||(vt(e),bt[t]=!0)}(o,"moment()."+o+"(period, number) is deprecated. Please use moment()."+o+"(number, period)."),i=t,t=e,e=i),Jt(this,Yt(t="string"==typeof t?+t:t,e),n),this}}function Jt(t,e,i,n){var o=e._milliseconds,r=e._days,s=e._months;n=null==n||n,o&&t._d.setTime(+t._d+o*i),r&&S(t,"Date",k(t,"Date")+r*i),s&&ft(t,k(t,"Month")+s*i),n&&f.updateOffset(t,r||s)}Yt.fn=Bt.prototype;var te=Qt(1,"add"),ee=Qt(-1,"subtract");function ie(t){return t<0?Math.ceil(t):Math.floor(t)}function ne(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():B(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):B(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function oe(t){var e;return void 0===t?this._locale._abbr:(null!=(e=T(t))&&(this._locale=e),this)}f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var re=yt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function se(){return this._locale}function ae(t,e){F(0,[t,t.length],0,e)}function le(t,e,i){return Rt(Kt([t,11,31+e-i]),e,i).week}F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ae("gggg","weekYear"),ae("ggggg","weekYear"),ae("GGGG","isoWeekYear"),ae("GGGGG","isoWeekYear"),D("weekYear","gg"),D("isoWeekYear","GG"),tt("G",X),tt("g",X),tt("GG",G,$),tt("gg",G,$),tt("GGGG",U,j),tt("gggg",U,j),tt("GGGGG",Y,W),tt("ggggg",Y,W),nt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=v(t)}),nt(["gg","GG"],function(t,e,i,n){e[n]=f.parseTwoDigitYear(t)}),F("Q",0,0,"quarter"),D("quarter","Q"),tt("Q",z),it("Q",function(t,e){e[rt]=3*(v(t)-1)}),F("D",["DD",2],"Do","date"),D("date","D"),tt("D",G),tt("DD",G,$),tt("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),it(["D","DD"],st),it("Do",function(t,e){e[st]=v(t.match(G)[0])});var ce=R("Date",!0);F("d",0,"do","day"),F("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),F("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),F("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),D("day","d"),D("weekday","e"),D("isoWeekday","E"),tt("d",G),tt("e",G),tt("E",G),tt("dd",Q),tt("ddd",Q),tt("dddd",Q),nt(["dd","ddd","dddd"],function(t,e,i){var n=i._locale.weekdaysParse(t);null!=n?e.d=n:m(i).invalidWeekday=t}),nt(["d","e","E"],function(t,e,i,n){e[n]=v(t)});var ue="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var de="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var he="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function pe(t,e){F(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function fe(t,e){return e._meridiemParse}F("H",["HH",2],0,"hour"),F("h",["hh",2],0,function(){return this.hours()%12||12}),pe("a",!0),pe("A",!1),D("hour","h"),tt("a",fe),tt("A",fe),tt("H",G),tt("h",G),tt("HH",G,$),tt("hh",G,$),it(["H","HH"],at),it(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),it(["h","hh"],function(t,e,i){e[at]=v(t),m(i).bigHour=!0});var ge=R("Hours",!0);F("m",["mm",2],0,"minute"),D("minute","m"),tt("m",G),tt("mm",G,$),it(["m","mm"],lt);var me=R("Minutes",!1);F("s",["ss",2],0,"second"),D("second","s"),tt("s",G),tt("ss",G,$),it(["s","ss"],ct);var ve=R("Seconds",!1);function ye(t){F(0,[t,3],0,"millisecond")}F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),ye("SSS"),ye("SSSS"),D("millisecond","ms"),tt("S",q,z),tt("SS",q,$),tt("SSS",q,V),tt("SSSS",/\d+/),it(["S","SS","SSS","SSSS"],function(t,e){e[ut]=v(1e3*("0."+t))});var be=R("Milliseconds",!1);F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var _e=h.prototype;_e.add=te,_e.calendar=function(t){var e=t||Kt(),i=jt(e,this).startOf("day"),n=this.diff(i,"days",!0),o=n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,Kt(e)))},_e.clone=function(){return new h(this)},_e.diff=function(t,e,i){var n,o,r=jt(t,this),s=6e4*(r.utcOffset()-this.utcOffset());return"year"===(e=I(e))||"month"===e||"quarter"===e?(o=function(t,e){var i,n,o=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(o,"months");n=e-r<0?(i=t.clone().add(o-1,"months"),(e-r)/(r-i)):(i=t.clone().add(1+o,"months"),(e-r)/(i-r));return-(o+n)}(this,r),"quarter"===e?o/=3:"year"===e&&(o/=12)):(n=this-r,o="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-s)/864e5:"week"===e?(n-s)/6048e5:n),i?o:ie(o)},_e.endOf=function(t){return void 0===(t=I(t))||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},_e.format=function(t){var e=B(this,t||f.defaultFormat);return this.localeData().postformat(e)},_e.from=function(t,e){return this.isValid()?Yt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},_e.fromNow=function(t){return this.from(Kt(),t)},_e.to=function(t,e){return this.isValid()?Yt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},_e.toNow=function(t){return this.to(Kt(),t)},_e.get=A,_e.invalidAt=function(){return m(this).overflow},_e.isAfter=function(t,e){return"millisecond"===(e=I(void 0!==e?e:"millisecond"))?+(t=p(t)?t:Kt(t))<+this:(p(t)?+t:+Kt(t))<+this.clone().startOf(e)},_e.isBefore=function(t,e){var i;return"millisecond"===(e=I(void 0!==e?e:"millisecond"))?+this<+(t=p(t)?t:Kt(t)):(i=p(t)?+t:+Kt(t),+this.clone().endOf(e)<i)},_e.isBetween=function(t,e,i){return this.isAfter(t,i)&&this.isBefore(e,i)},_e.isSame=function(t,e){var i;return"millisecond"===(e=I(e||"millisecond"))?+this==+(t=p(t)?t:Kt(t)):(i=+Kt(t),+this.clone().startOf(e)<=i&&i<=+this.clone().endOf(e))},_e.isValid=function(){return l(this)},_e.lang=re,_e.locale=oe,_e.localeData=se,_e.max=Pt,_e.min=Lt,_e.parsingFlags=function(){return s({},m(this))},_e.set=A,_e.startOf=function(t){switch(t=I(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},_e.subtract=ee,_e.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},_e.toDate=function(){return this._offset?new Date(+this):this._d},_e.toISOString=ne,_e.toJSON=ne,_e.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},_e.unix=function(){return Math.floor(+this/1e3)},_e.valueOf=function(){return+this._d-6e4*(this._offset||0)},_e.year=Ot,_e.isLeapYear=function(){return It(this.year())},_e.weekYear=function(t){var e=Rt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},_e.isoWeekYear=function(t){var e=Rt(this,1,4).year;return null==t?e:this.add(t-e,"y")},_e.quarter=_e.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},_e.month=gt,_e.daysInMonth=function(){return dt(this.year(),this.month())},_e.week=_e.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},_e.isoWeek=_e.isoWeeks=function(t){var e=Rt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},_e.weeksInYear=function(){var t=this.localeData()._week;return le(this.year(),t.dow,t.doy)},_e.isoWeeksInYear=function(){return le(this.year(),1,4)},_e.date=ce,_e.day=_e.days=function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){if("string"==typeof t)if(isNaN(t)){if("number"!=typeof(t=e.weekdaysParse(t)))return null}else t=parseInt(t,10);return t}(t,this.localeData()),this.add(t-e,"d")):e},_e.weekday=function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},_e.isoWeekday=function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},_e.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},_e.hour=_e.hours=ge,_e.minute=_e.minutes=me,_e.second=_e.seconds=ve,_e.millisecond=_e.milliseconds=be,_e.utcOffset=function(t,e){var i,n=this._offset||0;return null!=t?("string"==typeof t&&(t=Vt(t)),Math.abs(t)<16&&(t*=60),!this._isUTC&&e&&(i=Wt(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),n!==t&&(!e||this._changeInProgress?Jt(this,Yt(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:Wt(this)},_e.utc=function(t){return this.utcOffset(0,t)},_e.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Wt(this),"m")),this},_e.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Vt(this._i)),this},_e.hasAlignedHourOffset=function(t){return t=t?Kt(t).utcOffset():0,(this.utcOffset()-t)%60==0},_e.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},_e.isDSTShifted=function(){if(this._a){var t=this._isUTC?a(this._a):Kt(this._a);return this.isValid()&&0<y(this._a,t.toArray())}return!1},_e.isLocal=function(){return!this._isUTC},_e.isUtcOffset=function(){return this._isUTC},_e.isUtc=Gt,_e.isUTC=Gt,_e.zoneAbbr=function(){return this._isUTC?"UTC":""},_e.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},_e.dates=yt("dates accessor is deprecated. Use date instead.",ce),_e.months=yt("months accessor is deprecated. Use month instead",gt),_e.years=yt("years accessor is deprecated. Use year instead",Ot),_e.zone=yt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()});var Ee=_e;function we(t){return t}var Ce=i.prototype;function Te(t,e,i,n){var o=T(),r=a().set(n,e);return o[i](r,t)}function xe(t,e,i,n,o){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return Te(t,e,i,o);var r,s=[];for(r=0;r<n;r++)s[r]=Te(t,r,i,o);return s}Ce._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ce.calendar=function(t,e,i){var n=this._calendar[t];return"function"==typeof n?n.call(e,i):n},Ce._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Ce.longDateFormat=function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},Ce._invalidDate="Invalid date",Ce.invalidDate=function(){return this._invalidDate},Ce._ordinal="%d",Ce.ordinal=function(t){return this._ordinal.replace("%d",t)},Ce._ordinalParse=/\d{1,2}/,Ce.preparse=we,Ce.postformat=we,Ce._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ce.relativeTime=function(t,e,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(t,e,i,n):o.replace(/%d/i,t)},Ce.pastFuture=function(t,e){var i=this._relativeTime[0<t?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},Ce.set=function(t){var e,i;for(i in t)"function"==typeof(e=t[i])?this[i]=e:this["_"+i]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},Ce.months=function(t){return this._months[t.month()]},Ce._months=ht,Ce.monthsShort=function(t){return this._monthsShort[t.month()]},Ce._monthsShort=pt,Ce.monthsParse=function(t,e,i){var n,o,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=a([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}},Ce.week=function(t){return Rt(t,this._week.dow,this._week.doy).week},Ce._week={dow:0,doy:6},Ce.firstDayOfYear=function(){return this._week.doy},Ce.firstDayOfWeek=function(){return this._week.dow},Ce.weekdays=function(t){return this._weekdays[t.day()]},Ce._weekdays=ue,Ce.weekdaysMin=function(t){return this._weekdaysMin[t.day()]},Ce._weekdaysMin=he,Ce.weekdaysShort=function(t){return this._weekdaysShort[t.day()]},Ce._weekdaysShort=de,Ce.weekdaysParse=function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;e<7;e++)if(this._weekdaysParse[e]||(i=Kt([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},Ce.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},Ce._meridiemParse=/[ap]\.?m?\.?/i,Ce.meridiem=function(t,e,i){return 11<t?i?"pm":"PM":i?"am":"AM"},w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===v(t%100/10)?"th":1==e?"st":2==e?"nd":3==e?"rd":"th")}}),f.lang=yt("moment.lang is deprecated. Use moment.locale instead.",w),f.langData=yt("moment.langData is deprecated. Use moment.localeData instead.",T);var De=Math.abs;function Ie(t,e,i,n){var o=Yt(e,i);return t._milliseconds+=n*o._milliseconds,t._days+=n*o._days,t._months+=n*o._months,t._bubble()}function Oe(t){return 400*t/146097}function Re(t){return 146097*t/400}function ke(t){return function(){return this.as(t)}}var Se=ke("ms"),Ae=ke("s"),Me=ke("m"),Ne=ke("h"),Ke=ke("d"),Le=ke("w"),Pe=ke("M"),Fe=ke("y");function Be(t){return function(){return this._data[t]}}var He=Be("milliseconds"),ze=Be("seconds"),$e=Be("minutes"),Ve=Be("hours"),je=Be("days"),We=Be("months"),Ge=Be("years");var qe=Math.round,Ue={s:45,m:45,h:22,d:26,M:11};var Ye=Math.abs;function Xe(){var t=Ye(this.years()),e=Ye(this.months()),i=Ye(this.days()),n=Ye(this.hours()),o=Ye(this.minutes()),r=Ye(this.seconds()+this.milliseconds()/1e3),s=this.asSeconds();return s?(s<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||o||r?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(r?r+"S":""):"P0D"}var Ze=Bt.prototype;return Ze.abs=function(){var t=this._data;return this._milliseconds=De(this._milliseconds),this._days=De(this._days),this._months=De(this._months),t.milliseconds=De(t.milliseconds),t.seconds=De(t.seconds),t.minutes=De(t.minutes),t.hours=De(t.hours),t.months=De(t.months),t.years=De(t.years),this},Ze.add=function(t,e){return Ie(this,t,e,1)},Ze.subtract=function(t,e){return Ie(this,t,e,-1)},Ze.as=function(t){var e,i,n=this._milliseconds;if("month"===(t=I(t))||"year"===t)return e=this._days+n/864e5,i=this._months+12*Oe(e),"month"===t?i:i/12;switch(e=this._days+Math.round(Re(this._months/12)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}},Ze.asMilliseconds=Se,Ze.asSeconds=Ae,Ze.asMinutes=Me,Ze.asHours=Ne,Ze.asDays=Ke,Ze.asWeeks=Le,Ze.asMonths=Pe,Ze.asYears=Fe,Ze.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)},Ze._bubble=function(){var t,e,i,n=this._milliseconds,o=this._days,r=this._months,s=this._data,a=0;return s.milliseconds=n%1e3,t=ie(n/1e3),s.seconds=t%60,e=ie(t/60),s.minutes=e%60,i=ie(e/60),s.hours=i%24,o+=ie(i/24),r+=ie((o-=ie(Re(a=ie(Oe(o)))))/30),o%=30,a+=ie(r/12),r%=12,s.days=o,s.months=r,s.years=a,this},Ze.get=function(t){return this[(t=I(t))+"s"]()},Ze.milliseconds=He,Ze.seconds=ze,Ze.minutes=$e,Ze.hours=Ve,Ze.days=je,Ze.weeks=function(){return ie(this.days()/7)},Ze.months=We,Ze.years=Ge,Ze.humanize=function(t){var e=this.localeData(),i=function(t,e,i){var n=Yt(t).abs(),o=qe(n.as("s")),r=qe(n.as("m")),s=qe(n.as("h")),a=qe(n.as("d")),l=qe(n.as("M")),c=qe(n.as("y")),u=o<Ue.s&&["s",o]||1===r&&["m"]||r<Ue.m&&["mm",r]||1===s&&["h"]||s<Ue.h&&["hh",s]||1===a&&["d"]||a<Ue.d&&["dd",a]||1===l&&["M"]||l<Ue.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=e,u[3]=0<+t,u[4]=i,function(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}.apply(null,u)}(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)},Ze.toISOString=Xe,Ze.toString=Xe,Ze.toJSON=Xe,Ze.locale=oe,Ze.localeData=se,Ze.toIsoString=yt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Xe),Ze.lang=re,F("X",0,0,"unix"),F("x",0,0,"valueOf"),tt("x",X),tt("X",/[+-]?\d+(\.\d{1,3})?/),it("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),it("x",function(t,e,i){i._d=new Date(v(t))}),f.version="2.10.3",t=Kt,f.fn=Ee,f.min=function(){return Ft("isBefore",[].slice.call(arguments,0))},f.max=function(){return Ft("isAfter",[].slice.call(arguments,0))},f.utc=a,f.unix=function(t){return Kt(1e3*t)},f.months=function(t,e){return xe(t,e,"months",12,"month")},f.isDate=r,f.locale=w,f.invalid=c,f.duration=Yt,f.isMoment=p,f.weekdays=function(t,e){return xe(t,e,"weekdays",7,"day")},f.parseZone=function(){return Kt.apply(null,arguments).parseZone()},f.localeData=T,f.isDuration=Ht,f.monthsShort=function(t,e){return xe(t,e,"monthsShort",12,"month")},f.weekdaysMin=function(t,e){return xe(t,e,"weekdaysMin",7,"day")},f.defineLocale=C,f.weekdaysShort=function(t,e){return xe(t,e,"weekdaysShort",7,"day")},f.normalizeUnits=I,f.relativeTimeThreshold=function(t,e){return void 0!==Ue[t]&&(void 0===e?Ue[t]:(Ue[t]=e,!0))},f}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(){"use strict";var t=jQuery.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||3<t[0])throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(n){"use strict";n.fn.emulateTransitionEnd=function(t){var e=!1,i=this;n(this).one("bsTransitionEnd",function(){e=!0});return setTimeout(function(){e||n(i).trigger(n.support.transition.end)},t),this},n(function(){n.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(r){"use strict";function s(t){r(t).on("click",e,this.close)}var e='[data-dismiss="alert"]';s.VERSION="3.3.7",s.TRANSITION_DURATION=150,s.prototype.close=function(t){function e(){o.detach().trigger("closed.bs.alert").remove()}var i=r(this),n=i.attr("data-target");n||(n=(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,""));var o=r("#"===n?[]:n);t&&t.preventDefault(),o.length||(o=i.closest(".alert")),o.trigger(t=r.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),r.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",e).emulateTransitionEnd(s.TRANSITION_DURATION):e())};var t=r.fn.alert;r.fn.alert=function(i){return this.each(function(){var t=r(this),e=t.data("bs.alert");e||t.data("bs.alert",e=new s(this)),"string"==typeof i&&e[i].call(t)})},r.fn.alert.Constructor=s,r.fn.alert.noConflict=function(){return r.fn.alert=t,this},r(document).on("click.bs.alert.data-api",e,s.prototype.close)}(jQuery),function(r){"use strict";function i(n){return this.each(function(){var t=r(this),e=t.data("bs.button"),i="object"==typeof n&&n;e||t.data("bs.button",e=new o(this,i)),"toggle"==n?e.toggle():n&&e.setState(n)})}var o=function(t,e){this.$element=r(t),this.options=r.extend({},o.DEFAULTS,e),this.isLoading=!1};o.VERSION="3.3.7",o.DEFAULTS={loadingText:"loading..."},o.prototype.setState=function(t){var e="disabled",i=this.$element,n=i.is("input")?"val":"html",o=i.data();t+="Text",null==o.resetText&&i.data("resetText",i[n]()),setTimeout(r.proxy(function(){i[n](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(e).attr(e,e).prop(e,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(e).removeAttr(e).prop(e,!1))},this),0)},o.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var t=r.fn.button;r.fn.button=i,r.fn.button.Constructor=o,r.fn.button.noConflict=function(){return r.fn.button=t,this},r(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var e=r(t.target).closest(".btn");i.call(e,"toggle"),r(t.target).is('input[type="radio"], input[type="checkbox"]')||(t.preventDefault(),e.is("input,button")?e.trigger("focus"):e.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){r(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(d){"use strict";function s(o){return this.each(function(){var t=d(this),e=t.data("bs.carousel"),i=d.extend({},h.DEFAULTS,t.data(),"object"==typeof o&&o),n="string"==typeof o?o:i.slide;e||t.data("bs.carousel",e=new h(this,i)),"number"==typeof o?e.to(o):n?e[n]():i.interval&&e.pause().cycle()})}function h(t,e){this.$element=d(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",d.proxy(this.keydown,this)),"hover"!=this.options.pause||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",d.proxy(this.pause,this)).on("mouseleave.bs.carousel",d.proxy(this.cycle,this))}h.VERSION="3.3.7",h.TRANSITION_DURATION=600,h.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},h.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},h.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(d.proxy(this.next,this),this.options.interval)),this},h.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},h.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(n)},h.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(i<t?"next":"prev",this.$items.eq(t))},h.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&d.support.transition&&(this.$element.trigger(d.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},h.prototype.next=function(){if(!this.sliding)return this.slide("next")},h.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},h.prototype.slide=function(t,e){var i=this.$element.find(".item.active"),n=e||this.getItemForDirection(t,i),o=this.interval,r="next"==t?"left":"right",s=this;if(n.hasClass("active"))return this.sliding=!1;var a=n[0],l=d.Event("slide.bs.carousel",{relatedTarget:a,direction:r});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=d(this.$indicators.children()[this.getItemIndex(n)]);c&&c.addClass("active")}var u=d.Event("slid.bs.carousel",{relatedTarget:a,direction:r});return d.support.transition&&this.$element.hasClass("slide")?(n.addClass(t),n[0].offsetWidth,i.addClass(r),n.addClass(r),i.one("bsTransitionEnd",function(){n.removeClass([t,r].join(" ")).addClass("active"),i.removeClass(["active",r].join(" ")),s.sliding=!1,setTimeout(function(){s.$element.trigger(u)},0)}).emulateTransitionEnd(h.TRANSITION_DURATION)):(i.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(u)),o&&this.cycle(),this}};var t=d.fn.carousel;d.fn.carousel=s,d.fn.carousel.Constructor=h,d.fn.carousel.noConflict=function(){return d.fn.carousel=t,this};function e(t){var e,i=d(this),n=d(i.attr("data-target")||(e=i.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var o=d.extend({},n.data(),i.data()),r=i.attr("data-slide-to");r&&(o.interval=!1),s.call(n,o),r&&n.data("bs.carousel").to(r),t.preventDefault()}}d(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),d(window).on("load",function(){d('[data-ride="carousel"]').each(function(){var t=d(this);s.call(t,t.data())})})}(jQuery),function(s){"use strict";function o(t){var e,i=t.attr("data-target")||(e=t.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return s(i)}function a(n){return this.each(function(){var t=s(this),e=t.data("bs.collapse"),i=s.extend({},l.DEFAULTS,t.data(),"object"==typeof n&&n);!e&&i.toggle&&/show|hide/.test(n)&&(i.toggle=!1),e||t.data("bs.collapse",e=new l(this,i)),"string"==typeof n&&e[n]()})}var l=function(t,e){this.$element=s(t),this.options=s.extend({},l.DEFAULTS,e),this.$trigger=s('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};l.VERSION="3.3.7",l.TRANSITION_DURATION=350,l.DEFAULTS={toggle:!0},l.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},l.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&((t=e.data("bs.collapse"))&&t.transitioning))){var i=s.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){e&&e.length&&(a.call(e,"hide"),t||e.data("bs.collapse",null));var n=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[n](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!s.support.transition)return o.call(this);var r=s.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",s.proxy(o,this)).emulateTransitionEnd(l.TRANSITION_DURATION)[n](this.$element[0][r])}}}},l.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=s.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension();this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return s.support.transition?void this.$element[e](0).one("bsTransitionEnd",s.proxy(i,this)).emulateTransitionEnd(l.TRANSITION_DURATION):i.call(this)}}},l.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},l.prototype.getParent=function(){return s(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(s.proxy(function(t,e){var i=s(e);this.addAriaAndCollapsedClass(o(i),i)},this)).end()},l.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var t=s.fn.collapse;s.fn.collapse=a,s.fn.collapse.Constructor=l,s.fn.collapse.noConflict=function(){return s.fn.collapse=t,this},s(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=s(this);e.attr("data-target")||t.preventDefault();var i=o(e),n=i.data("bs.collapse")?"toggle":e.data();a.call(i,n)})}(jQuery),function(s){"use strict";function a(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var i=e&&s(e);return i&&i.length?i:t.parent()}function r(n){n&&3===n.which||(s(".dropdown-backdrop").remove(),s(l).each(function(){var t=s(this),e=a(t),i={relatedTarget:this};e.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&s.contains(e[0],n.target)||(e.trigger(n=s.Event("hide.bs.dropdown",i)),n.isDefaultPrevented()||(t.attr("aria-expanded","false"),e.removeClass("open").trigger(s.Event("hidden.bs.dropdown",i)))))}))}function n(t){s(t).on("click.bs.dropdown",this.toggle)}var l='[data-toggle="dropdown"]';n.VERSION="3.3.7",n.prototype.toggle=function(t){var e=s(this);if(!e.is(".disabled, :disabled")){var i=a(e),n=i.hasClass("open");if(r(),!n){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&s(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(s(this)).on("click",r);var o={relatedTarget:this};if(i.trigger(t=s.Event("show.bs.dropdown",o)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(s.Event("shown.bs.dropdown",o))}return!1}},n.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=s(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var i=a(e),n=i.hasClass("open");if(!n&&27!=t.which||n&&27==t.which)return 27==t.which&&i.find(l).trigger("focus"),e.trigger("click");var o=i.find(".dropdown-menu li:not(.disabled):visible a");if(o.length){var r=o.index(t.target);38==t.which&&0<r&&r--,40==t.which&&r<o.length-1&&r++,~r||(r=0),o.eq(r).trigger("focus")}}}};var t=s.fn.dropdown;s.fn.dropdown=function(i){return this.each(function(){var t=s(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new n(this)),"string"==typeof i&&e[i].call(t)})},s.fn.dropdown.Constructor=n,s.fn.dropdown.noConflict=function(){return s.fn.dropdown=t,this},s(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",l,n.prototype.toggle).on("keydown.bs.dropdown.data-api",l,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),function(r){"use strict";function s(n,o){return this.each(function(){var t=r(this),e=t.data("bs.modal"),i=r.extend({},a.DEFAULTS,t.data(),"object"==typeof n&&n);e||t.data("bs.modal",e=new a(this,i)),"string"==typeof n?e[n](o):i.show&&e.show(o)})}function a(t,e){this.options=e,this.$body=r(document.body),this.$element=r(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,r.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}a.VERSION="3.3.7",a.TRANSITION_DURATION=300,a.BACKDROP_TRANSITION_DURATION=150,a.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},a.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},a.prototype.show=function(i){var n=this,t=r.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',r.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(t){r(t.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var t=r.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),t&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var e=r.Event("shown.bs.modal",{relatedTarget:i});t?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(a.TRANSITION_DURATION):n.$element.trigger("focus").trigger(e)}))},a.prototype.hide=function(t){t&&t.preventDefault(),t=r.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),r(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),r.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",r.proxy(this.hideModal,this)).emulateTransitionEnd(a.TRANSITION_DURATION):this.hideModal())},a.prototype.enforceFocus=function(){r(document).off("focusin.bs.modal").on("focusin.bs.modal",r.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},a.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",r.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},a.prototype.resize=function(){this.isShown?r(window).on("resize.bs.modal",r.proxy(this.handleUpdate,this)):r(window).off("resize.bs.modal")},a.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},a.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},a.prototype.backdrop=function(t){var e=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=r.support.transition&&i;if(this.$backdrop=r(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",r.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){e.removeBackdrop(),t&&t()};r.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},a.prototype.handleUpdate=function(){this.adjustDialog()},a.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},a.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},a.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},a.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},a.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},a.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var t=r.fn.modal;r.fn.modal=s,r.fn.modal.Constructor=a,r.fn.modal.noConflict=function(){return r.fn.modal=t,this},r(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=r(this),i=e.attr("href"),n=r(e.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=n.data("bs.modal")?"toggle":r.extend({remote:!/#/.test(i)&&i},n.data(),e.data());e.is("a")&&t.preventDefault(),n.one("show.bs.modal",function(t){t.isDefaultPrevented()||n.one("hidden.bs.modal",function(){e.is(":visible")&&e.trigger("focus")})}),s.call(n,o,this)})}(jQuery),function(g){"use strict";function m(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)}m.VERSION="3.3.7",m.TRANSITION_DURATION=150,m.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},m.prototype.init=function(t,e,i){if(this.enabled=!0,this.type=t,this.$element=g(e),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&g(g.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),o=n.length;o--;){var r=n[o];if("click"==r)this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",a="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,g.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},m.prototype.getDefaults=function(){return m.DEFAULTS},m.prototype.getOptions=function(t){return(t=g.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},m.prototype.getDelegateOptions=function(){var i={},n=this.getDefaults();return this._options&&g.each(this._options,function(t,e){n[t]!=e&&(i[t]=e)}),i},m.prototype.enter=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);return e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),t instanceof g.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState?void(e.hoverState="in"):(clearTimeout(e.timeout),e.hoverState="in",e.options.delay&&e.options.delay.show?void(e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)):e.show())},m.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},m.prototype.leave=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),t instanceof g.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),!e.isInStateTrue())return clearTimeout(e.timeout),e.hoverState="out",e.options.delay&&e.options.delay.hide?void(e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)):e.hide()},m.prototype.show=function(){var t=g.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var e=g.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!e)return;var i=this,n=this.tip(),o=this.getUID(this.type);this.setContent(),n.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&n.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,a=s.test(r);a&&(r=r.replace(s,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),c=n[0].offsetWidth,u=n[0].offsetHeight;if(a){var d=r,h=this.getPosition(this.$viewport);r="bottom"==r&&l.bottom+u>h.bottom?"top":"top"==r&&l.top-u<h.top?"bottom":"right"==r&&l.right+c>h.width?"left":"left"==r&&l.left-c<h.left?"right":r,n.removeClass(d).addClass(r)}var p=this.getCalculatedOffset(r,l,c,u);this.applyPlacement(p,r);var f=function(){var t=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==t&&i.leave(i)};g.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",f).emulateTransitionEnd(m.TRANSITION_DURATION):f()}},m.prototype.applyPlacement=function(t,e){var i=this.tip(),n=i[0].offsetWidth,o=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),t.top+=r,t.left+=s,g.offset.setOffset(i[0],g.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),i.addClass("in");var a=i[0].offsetWidth,l=i[0].offsetHeight;"top"==e&&l!=o&&(t.top=t.top+o-l);var c=this.getViewportAdjustedDelta(e,t,a,l);c.left?t.left+=c.left:t.top+=c.top;var u=/top|bottom/.test(e),d=u?2*c.left-n+a:2*c.top-o+l,h=u?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(d,i[0][h],u)},m.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},m.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},m.prototype.hide=function(t){function e(){"in"!=i.hoverState&&n.detach(),i.$element&&i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,n=g(this.$tip),o=g.Event("hide.bs."+this.type);if(this.$element.trigger(o),!o.isDefaultPrevented())return n.removeClass("in"),g.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",e).emulateTransitionEnd(m.TRANSITION_DURATION):e(),this.hoverState=null,this},m.prototype.fixTitle=function(){var t=this.$element;!t.attr("title")&&"string"==typeof t.attr("data-original-title")||t.attr("data-original-title",t.attr("title")||"").attr("title","")},m.prototype.hasContent=function(){return this.getTitle()},m.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],i="BODY"==e.tagName,n=e.getBoundingClientRect();null==n.width&&(n=g.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var o=window.SVGElement&&e instanceof window.SVGElement,r=i?{top:0,left:0}:o?null:t.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},a=i?{width:g(window).width(),height:g(window).height()}:null;return g.extend({},n,s,a,r)},m.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},m.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-s.scroll,l=e.top+r-s.scroll+n;a<s.top?o.top=s.top-a:l>s.top+s.height&&(o.top=s.top+s.height-l)}else{var c=e.left-r,u=e.left+r+i;c<s.left?o.left=s.left-c:u>s.right&&(o.left=s.left+s.width-u)}return o},m.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},m.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},m.prototype.tip=function(){if(!this.$tip&&(this.$tip=g(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},m.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},m.prototype.enable=function(){this.enabled=!0},m.prototype.disable=function(){this.enabled=!1},m.prototype.toggleEnabled=function(){this.enabled=!this.enabled},m.prototype.toggle=function(t){var e=this;t&&((e=g(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e))),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},m.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var t=g.fn.tooltip;g.fn.tooltip=function(n){return this.each(function(){var t=g(this),e=t.data("bs.tooltip"),i="object"==typeof n&&n;!e&&/destroy|hide/.test(n)||(e||t.data("bs.tooltip",e=new m(this,i)),"string"==typeof n&&e[n]())})},g.fn.tooltip.Constructor=m,g.fn.tooltip.noConflict=function(){return g.fn.tooltip=t,this}}(jQuery),function(o){"use strict";function r(t,e){this.init("popover",t,e)}if(!o.fn.tooltip)throw new Error("Popover requires tooltip.js");r.VERSION="3.3.7",r.DEFAULTS=o.extend({},o.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((r.prototype=o.extend({},o.fn.tooltip.Constructor.prototype)).constructor=r).prototype.getDefaults=function(){return r.DEFAULTS},r.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},r.prototype.hasContent=function(){return this.getTitle()||this.getContent()},r.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},r.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var t=o.fn.popover;o.fn.popover=function(n){return this.each(function(){var t=o(this),e=t.data("bs.popover"),i="object"==typeof n&&n;!e&&/destroy|hide/.test(n)||(e||t.data("bs.popover",e=new r(this,i)),"string"==typeof n&&e[n]())})},o.fn.popover.Constructor=r,o.fn.popover.noConflict=function(){return o.fn.popover=t,this}}(jQuery),function(r){"use strict";function o(t,e){this.$body=r(document.body),this.$scrollElement=r(r(t).is(document.body)?window:t),this.options=r.extend({},o.DEFAULTS,e),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",r.proxy(this.process,this)),this.refresh(),this.process()}function e(n){return this.each(function(){var t=r(this),e=t.data("bs.scrollspy"),i="object"==typeof n&&n;e||t.data("bs.scrollspy",e=new o(this,i)),"string"==typeof n&&e[n]()})}o.VERSION="3.3.7",o.DEFAULTS={offset:10},o.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},o.prototype.refresh=function(){var t=this,n="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),r.isWindow(this.$scrollElement[0])||(n="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=r(this),e=t.data("target")||t.attr("href"),i=/^#./.test(e)&&r(e);return i&&i.length&&i.is(":visible")&&[[i[n]().top+o,e]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},o.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),n<=e)return s!=(t=r[r.length-1])&&this.activate(t);if(s&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)s!=r[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(r[t])},o.prototype.activate=function(t){this.activeTarget=t,this.clear();var e=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=r(e).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},o.prototype.clear=function(){r(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var t=r.fn.scrollspy;r.fn.scrollspy=e,r.fn.scrollspy.Constructor=o,r.fn.scrollspy.noConflict=function(){return r.fn.scrollspy=t,this},r(window).on("load.bs.scrollspy.data-api",function(){r('[data-spy="scroll"]').each(function(){var t=r(this);e.call(t,t.data())})})}(jQuery),function(a){"use strict";function e(i){return this.each(function(){var t=a(this),e=t.data("bs.tab");e||t.data("bs.tab",e=new s(this)),"string"==typeof i&&e[i]()})}function s(t){this.element=a(t)}s.VERSION="3.3.7",s.TRANSITION_DURATION=150,s.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var n=e.find(".active:last a"),o=a.Event("hide.bs.tab",{relatedTarget:t[0]}),r=a.Event("show.bs.tab",{relatedTarget:n[0]});if(n.trigger(o),t.trigger(r),!r.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=a(i);this.activate(t.closest("li"),e),this.activate(s,s.parent(),function(){n.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:n[0]})})}}},s.prototype.activate=function(t,e,i){function n(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var o=e.find("> .active"),r=i&&a.support.transition&&(o.length&&o.hasClass("fade")||!!e.find("> .fade").length);o.length&&r?o.one("bsTransitionEnd",n).emulateTransitionEnd(s.TRANSITION_DURATION):n(),o.removeClass("in")};var t=a.fn.tab;a.fn.tab=e,a.fn.tab.Constructor=s,a.fn.tab.noConflict=function(){return a.fn.tab=t,this};function i(t){t.preventDefault(),e.call(a(this),"show")}a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),function(l){"use strict";function i(n){return this.each(function(){var t=l(this),e=t.data("bs.affix"),i="object"==typeof n&&n;e||t.data("bs.affix",e=new c(this,i)),"string"==typeof n&&e[n]()})}var c=function(t,e){this.options=l.extend({},c.DEFAULTS,e),this.$target=l(this.options.target).on("scroll.bs.affix.data-api",l.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",l.proxy(this.checkPositionWithEventLoop,this)),this.$element=l(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(t,e,i,n){var o=this.$target.scrollTop(),r=this.$element.offset(),s=this.$target.height();if(null!=i&&"top"==this.affixed)return o<i&&"top";if("bottom"==this.affixed)return null!=i?!(o+this.unpin<=r.top)&&"bottom":!(o+s<=t-n)&&"bottom";var a=null==this.affixed,l=a?o:r.top;return null!=i&&o<=i?"top":null!=n&&t-n<=l+(a?s:e)&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},c.prototype.checkPositionWithEventLoop=function(){setTimeout(l.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),e=this.options.offset,i=e.top,n=e.bottom,o=Math.max(l(document).height(),l(document.body).height());"object"!=typeof e&&(n=i=e),"function"==typeof i&&(i=e.top(this.$element)),"function"==typeof n&&(n=e.bottom(this.$element));var r=this.getState(o,t,i,n);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var s="affix"+(r?"-"+r:""),a=l.Event(s+".bs.affix");if(this.$element.trigger(a),a.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(s).trigger(s.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:o-t-n})}};var t=l.fn.affix;l.fn.affix=i,l.fn.affix.Constructor=c,l.fn.affix.noConflict=function(){return l.fn.affix=t,this},l(window).on("load",function(){l('[data-spy="affix"]').each(function(){var t=l(this),e=t.data();e.offset=e.offset||{},null!=e.offsetBottom&&(e.offset.bottom=e.offsetBottom),null!=e.offsetTop&&(e.offset.top=e.offsetTop),i.call(t,e)})})}(jQuery),function(m){"use strict";var r={tagClass:function(t){return"label label-info"},itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},itemTitle:function(t){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!0,onTagExists:function(t,e){e.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};function s(t,e){this.itemsArray=[],this.$element=m(t),this.$element.hide(),this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=e&&e.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=m('<div class="bootstrap-tagsinput"></div>'),this.$input=m('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(e)}function a(t,e){if("function"!=typeof t[e]){var i=t[e];t[e]=function(t){return t[i]}}}function c(t,e){if("function"!=typeof t[e]){var i=t[e];t[e]=function(){return i}}}s.prototype={constructor:s,add:function(t,e,i){var n=this;if(!(n.options.maxTags&&n.itemsArray.length>=n.options.maxTags)&&(!1===t||t)){if("string"==typeof t&&n.options.trimValue&&(t=m.trim(t)),"object"==typeof t&&!n.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(n.isSelect&&!n.multiple&&0<n.itemsArray.length&&n.remove(n.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var o=n.options.delimiterRegex?n.options.delimiterRegex:n.options.delimiter,r=t.split(o);if(1<r.length){for(var s=0;s<r.length;s++)this.add(r[s],!0);return void(e||n.pushVal())}}var a=n.options.itemValue(t),l=n.options.itemText(t),c=n.options.tagClass(t),u=n.options.itemTitle(t),d=m.grep(n.itemsArray,function(t){return n.options.itemValue(t)===a})[0];if(!d||n.options.allowDuplicates){if(!(n.items().toString().length+t.length+1>n.options.maxInputLength)){var h=m.Event("beforeItemAdd",{item:t,cancel:!1,options:i});if(n.$element.trigger(h),!h.cancel){n.itemsArray.push(t);var p=m('<span class="tag '+v(c)+(null!==u?'" title="'+u:"")+'">'+v(l)+'<span data-role="remove"></span></span>');if(p.data("item",t),n.findInputWrapper().before(p),p.after(" "),n.isSelect&&!m('option[value="'+encodeURIComponent(a)+'"]',n.$element)[0]){var f=m("<option selected>"+v(l)+"</option>");f.data("item",t),f.attr("value",a),n.$element.append(f)}e||n.pushVal(),n.options.maxTags!==n.itemsArray.length&&n.items().toString().length!==n.options.maxInputLength||n.$container.addClass("bootstrap-tagsinput-max"),n.$element.trigger(m.Event("itemAdded",{item:t,options:i}))}}}else if(n.options.onTagExists){var g=m(".tag",n.$container).filter(function(){return m(this).data("item")===d});n.options.onTagExists(t,g)}}}},remove:function(e,t,i){var n=this;if(n.objectItems&&(e=(e="object"==typeof e?m.grep(n.itemsArray,function(t){return n.options.itemValue(t)==n.options.itemValue(e)}):m.grep(n.itemsArray,function(t){return n.options.itemValue(t)==e}))[e.length-1]),e){var o=m.Event("beforeItemRemove",{item:e,cancel:!1,options:i});if(n.$element.trigger(o),o.cancel)return;m(".tag",n.$container).filter(function(){return m(this).data("item")===e}).remove(),m("option",n.$element).filter(function(){return m(this).data("item")===e}).remove(),-1!==m.inArray(e,n.itemsArray)&&n.itemsArray.splice(m.inArray(e,n.itemsArray),1)}t||n.pushVal(),n.options.maxTags>n.itemsArray.length&&n.$container.removeClass("bootstrap-tagsinput-max"),n.$element.trigger(m.Event("itemRemoved",{item:e,options:i}))},removeAll:function(){for(m(".tag",this.$container).remove(),m("option",this.$element).remove();0<this.itemsArray.length;)this.itemsArray.pop();this.pushVal()},refresh:function(){var r=this;m(".tag",r.$container).each(function(){var t=m(this),e=t.data("item"),i=r.options.itemValue(e),n=r.options.itemText(e),o=r.options.tagClass(e);t.attr("class",null),t.addClass("tag "+v(o)),t.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=v(n),r.isSelect&&m("option",r.$element).filter(function(){return m(this).data("item")===e}).attr("value",i)})},items:function(){return this.itemsArray},pushVal:function(){var e=this,t=m.map(e.items(),function(t){return e.options.itemValue(t).toString()});e.$element.val(t,!0).trigger("change")},build:function(t){var l=this;if(l.options=m.extend({},r,t),l.objectItems&&(l.options.freeInput=!1),a(l.options,"itemValue"),a(l.options,"itemText"),c(l.options,"tagClass"),l.options.typeahead){var n=l.options.typeahead||{};c(n,"source"),l.$input.typeahead(m.extend({},n,{source:function(t,o){function e(t){for(var e=[],i=0;i<t.length;i++){var n=l.options.itemText(t[i]);r[n]=t[i],e.push(n)}o(e)}this.map={};var r=this.map,i=n.source(t);m.isFunction(i.success)?i.success(e):m.isFunction(i.then)?i.then(e):m.when(i).then(e)},updater:function(t){return l.add(this.map[t]),this.map[t]},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}}))}if(l.options.typeaheadjs){var e=null,i={},o=l.options.typeaheadjs;i=m.isArray(o)?(e=o[0],o[1]):o,l.$input.typeahead(e,i).on("typeahead:selected",m.proxy(function(t,e){i.valueKey?l.add(e[i.valueKey]):l.add(e),l.$input.typeahead("val","")},l))}l.$container.on("click",m.proxy(function(t){l.$element.attr("disabled")||l.$input.removeAttr("disabled"),l.$input.focus()},l)),l.options.addOnBlur&&l.options.freeInput&&l.$input.on("focusout",m.proxy(function(t){0===m(".typeahead, .twitter-typeahead",l.$container).length&&(l.add(l.$input.val()),l.$input.val(""))},l)),l.$container.on("keydown","input",m.proxy(function(t){var e=m(t.target),i=l.findInputWrapper();if(l.$element.attr("disabled"))l.$input.attr("disabled","disabled");else{switch(t.which){case 8:if(0===u(e[0])){var n=i.prev();n.length&&l.remove(n.data("item"))}break;case 46:if(0===u(e[0])){var o=i.next();o.length&&l.remove(o.data("item"))}break;case 37:var r=i.prev();0===e.val().length&&r[0]&&(r.before(i),e.focus());break;case 39:var s=i.next();0===e.val().length&&s[0]&&(s.after(i),e.focus())}var a=e.val().length;Math.ceil(a/5);e.attr("size",Math.max(this.inputSize,e.val().length))}},l)),l.$container.on("keypress","input",m.proxy(function(t){var e=m(t.target);if(l.$element.attr("disabled"))l.$input.attr("disabled","disabled");else{var i=e.val(),n=l.options.maxChars&&i.length>=l.options.maxChars;l.options.freeInput&&(function(r,t){var s=!1;return m.each(t,function(t,e){if("number"==typeof e&&r.which===e)return!(s=!0);if(r.which===e.which){var i=!e.hasOwnProperty("altKey")||r.altKey===e.altKey,n=!e.hasOwnProperty("shiftKey")||r.shiftKey===e.shiftKey,o=!e.hasOwnProperty("ctrlKey")||r.ctrlKey===e.ctrlKey;if(i&&n&&o)return!(s=!0)}}),s}(t,l.options.confirmKeys)||n)&&(0!==i.length&&(l.add(n?i.substr(0,l.options.maxChars):i),e.val("")),!1===l.options.cancelConfirmKeysOnEmpty&&t.preventDefault());var o=e.val().length;Math.ceil(o/5);e.attr("size",Math.max(this.inputSize,e.val().length))}},l)),l.$container.on("click","[data-role=remove]",m.proxy(function(t){l.$element.attr("disabled")||l.remove(m(t.target).closest(".tag").data("item"))},l)),l.options.itemValue===r.itemValue&&("INPUT"===l.$element[0].tagName?l.add(l.$element.val()):m("option",l.$element).each(function(){l.add(m(this).attr("value"),!0)}))},destroy:function(){this.$container.off("keypress","input"),this.$container.off("click","[role=remove]"),this.$container.remove(),this.$element.removeData("tagsinput"),this.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],e=this.$container[0];t&&t.parentNode!==e;)t=t.parentNode;return m(t)}},m.fn.tagsinput=function(i,n,o){var r=[];return this.each(function(){var t=m(this).data("tagsinput");if(t)if(i||n){if(void 0!==t[i]){if(3===t[i].length&&void 0!==o)var e=t[i](n,null,o);else e=t[i](n);void 0!==e&&r.push(e)}}else r.push(t);else t=new s(this,i),m(this).data("tagsinput",t),r.push(t),"SELECT"===this.tagName&&m("option",m(this)).attr("selected","selected"),m(this).val(m(this).val())}),"string"==typeof i?1<r.length?r:r[0]:r},m.fn.tagsinput.Constructor=s;var e=m("<div />");function v(t){return t?e.text(t).html():""}function u(t){var e=0;if(document.selection){t.focus();var i=document.selection.createRange();i.moveStart("character",-t.value.length),e=i.text.length}else!t.selectionStart&&"0"!=t.selectionStart||(e=t.selectionStart);return e}m(function(){m("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(H){"use strict";function a(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function T(r){var i;return 1===r.length&&(i=r,r=function(t,e){return a(i(t),e)}),{left:function(t,e,i,n){for(null==i&&(i=0),null==n&&(n=t.length);i<n;){var o=i+n>>>1;r(t[o],e)<0?i=1+o:n=o}return i},right:function(t,e,i,n){for(null==i&&(i=0),null==n&&(n=t.length);i<n;){var o=i+n>>>1;0<r(t[o],e)?n=o:i=1+o}return i}}}var t=T(a),g=t.right,e=t.left;function u(t,e){return[t,e]}function c(t){return null===t?NaN:+t}function n(t,e){var i,n,o=t.length,r=0,s=-1,a=0,l=0;if(null==e)for(;++s<o;)isNaN(i=c(t[s]))||(l+=(n=i-a)*(i-(a+=n/++r)));else for(;++s<o;)isNaN(i=c(e(t[s],s,t)))||(l+=(n=i-a)*(i-(a+=n/++r)));if(1<r)return l/(r-1)}function o(t,e){var i=n(t,e);return i?Math.sqrt(i):i}function l(t,e){var i,n,o,r=t.length,s=-1;if(null==e){for(;++s<r;)if(null!=(i=t[s])&&i<=i)for(n=o=i;++s<r;)null!=(i=t[s])&&(i<n&&(n=i),o<i&&(o=i))}else for(;++s<r;)if(null!=(i=e(t[s],s,t))&&i<=i)for(n=o=i;++s<r;)null!=(i=e(t[s],s,t))&&(i<n&&(n=i),o<i&&(o=i));return[n,o]}var i=Array.prototype,r=i.slice,s=i.map;function d(t){return function(){return t}}function m(t){return t}function x(t,e,i){t=+t,e=+e,i=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+i;for(var n=-1,o=0|Math.max(0,Math.ceil((e-t)/i)),r=new Array(o);++n<o;)r[n]=t+n*i;return r}var h=Math.sqrt(50),p=Math.sqrt(10),f=Math.sqrt(2);function v(t,e,i){var n,o,r,s,a=-1;if(i=+i,(t=+t)==(e=+e)&&0<i)return[t];if((n=e<t)&&(o=t,t=e,e=o),0===(s=y(t,e,i))||!isFinite(s))return[];if(0<s)for(t=Math.ceil(t/s),e=Math.floor(e/s),r=new Array(o=Math.ceil(e-t+1));++a<o;)r[a]=(t+a)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),r=new Array(o=Math.ceil(t-e+1));++a<o;)r[a]=(t-a)/s;return n&&r.reverse(),r}function y(t,e,i){var n=(e-t)/Math.max(0,i),o=Math.floor(Math.log(n)/Math.LN10),r=n/Math.pow(10,o);return 0<=o?(h<=r?10:p<=r?5:f<=r?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(h<=r?10:p<=r?5:f<=r?2:1)}function D(t,e,i){var n=Math.abs(e-t)/Math.max(0,i),o=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),r=n/o;return h<=r?o*=10:p<=r?o*=5:f<=r&&(o*=2),e<t?-o:o}function b(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function _(t,e,i){if(null==i&&(i=c),n=t.length){if((e=+e)<=0||n<2)return+i(t[0],0,t);if(1<=e)return+i(t[n-1],n-1,t);var n,o=(n-1)*e,r=Math.floor(o),s=+i(t[r],r,t);return s+(+i(t[r+1],r+1,t)-s)*(o-r)}}function E(t,e){var i,n,o=t.length,r=-1;if(null==e){for(;++r<o;)if(null!=(i=t[r])&&i<=i)for(n=i;++r<o;)null!=(i=t[r])&&n<i&&(n=i)}else for(;++r<o;)if(null!=(i=e(t[r],r,t))&&i<=i)for(n=i;++r<o;)null!=(i=e(t[r],r,t))&&n<i&&(n=i);return n}function I(t){for(var e,i,n,o=t.length,r=-1,s=0;++r<o;)s+=t[r].length;for(i=new Array(s);0<=--o;)for(e=(n=t[o]).length;0<=--e;)i[--s]=n[e];return i}function w(t,e){var i,n,o=t.length,r=-1;if(null==e){for(;++r<o;)if(null!=(i=t[r])&&i<=i)for(n=i;++r<o;)null!=(i=t[r])&&i<n&&(n=i)}else for(;++r<o;)if(null!=(i=e(t[r],r,t))&&i<=i)for(n=i;++r<o;)null!=(i=e(t[r],r,t))&&i<n&&(n=i);return n}function C(t){if(!(o=t.length))return[];for(var e=-1,i=w(t,O),n=new Array(i);++e<i;)for(var o,r=-1,s=n[e]=new Array(o);++r<o;)s[r]=t[r][e];return n}function O(t){return t.length}var R=Array.prototype.slice;function k(t){return t}function S(t){return"translate("+(t+.5)+",0)"}function A(t){return"translate(0,"+(t+.5)+")"}function M(){return!this.__axis}function N(g,m){var v=[],y=null,b=null,_=6,E=6,w=3,C=1===g||4===g?-1:1,T=4===g||2===g?"x":"y",x=1===g||3===g?S:A;function e(t){var e=null==y?m.ticks?m.ticks.apply(m,v):m.domain():y,i=null==b?m.tickFormat?m.tickFormat.apply(m,v):k:b,n=Math.max(_,0)+w,o=m.range(),r=+o[0]+.5,s=+o[o.length-1]+.5,a=(m.bandwidth?function(e){var i=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(i=Math.round(i)),function(t){return+e(t)+i}}:function(e){return function(t){return+e(t)}})(m.copy()),l=t.selection?t.selection():t,c=l.selectAll(".domain").data([null]),u=l.selectAll(".tick").data(e,m).order(),d=u.exit(),h=u.enter().append("g").attr("class","tick"),p=u.select("line"),f=u.select("text");c=c.merge(c.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),u=u.merge(h),p=p.merge(h.append("line").attr("stroke","currentColor").attr(T+"2",C*_)),f=f.merge(h.append("text").attr("fill","currentColor").attr(T,C*n).attr("dy",1===g?"0em":3===g?"0.71em":"0.32em")),t!==l&&(c=c.transition(t),u=u.transition(t),p=p.transition(t),f=f.transition(t),d=d.transition(t).attr("opacity",1e-6).attr("transform",function(t){return isFinite(t=a(t))?x(t):this.getAttribute("transform")}),h.attr("opacity",1e-6).attr("transform",function(t){var e=this.parentNode.__axis;return x(e&&isFinite(e=e(t))?e:a(t))})),d.remove(),c.attr("d",4===g||2==g?E?"M"+C*E+","+r+"H0.5V"+s+"H"+C*E:"M0.5,"+r+"V"+s:E?"M"+r+","+C*E+"V0.5H"+s+"V"+C*E:"M"+r+",0.5H"+s),u.attr("opacity",1).attr("transform",function(t){return x(a(t))}),p.attr(T+"2",C*_),f.attr(T,C*n).text(i),l.filter(M).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===g?"start":4===g?"end":"middle"),l.each(function(){this.__axis=a})}return e.scale=function(t){return arguments.length?(m=t,e):m},e.ticks=function(){return v=R.call(arguments),e},e.tickArguments=function(t){return arguments.length?(v=null==t?[]:R.call(t),e):v.slice()},e.tickValues=function(t){return arguments.length?(y=null==t?null:R.call(t),e):y&&y.slice()},e.tickFormat=function(t){return arguments.length?(b=t,e):b},e.tickSize=function(t){return arguments.length?(_=E=+t,e):_},e.tickSizeInner=function(t){return arguments.length?(_=+t,e):_},e.tickSizeOuter=function(t){return arguments.length?(E=+t,e):E},e.tickPadding=function(t){return arguments.length?(w=+t,e):w},e}var K={value:function(){}};function z(){for(var t,e=0,i=arguments.length,n={};e<i;++e){if(!(t=arguments[e]+"")||t in n)throw new Error("illegal type: "+t);n[t]=[]}return new L(n)}function L(t){this._=t}function P(t,e){for(var i,n=0,o=t.length;n<o;++n)if((i=t[n]).name===e)return i.value}function F(t,e,i){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=K,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=i&&t.push({name:e,value:i}),t}L.prototype=z.prototype={constructor:L,on:function(t,e){var i,n,o=this._,r=(n=o,(t+"").trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");if(0<=i&&(e=t.slice(i+1),t=t.slice(0,i)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),s=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)o[i]=F(o[i],t.name,e);else if(null==e)for(i in o)o[i]=F(o[i],t.name,null);return this}for(;++s<a;)if((i=(t=r[s]).type)&&(i=P(o[i],t.name)))return i},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new L(t)},call:function(t,e){if(0<(i=arguments.length-2))for(var i,n,o=new Array(i),r=0;r<i;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,i=(n=this._[t]).length;r<i;++r)n[r].value.apply(e,o)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,r=n.length;o<r;++o)n[o].value.apply(e,i)}};var B="http://www.w3.org/1999/xhtml",$={svg:"http://www.w3.org/2000/svg",xhtml:B,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function V(t){var e=t+="",i=e.indexOf(":");return 0<=i&&"xmlns"!==(e=t.slice(0,i))&&(t=t.slice(i+1)),$.hasOwnProperty(e)?{space:$[e],local:t}:t}function j(t){var e=V(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(i){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===B&&t.documentElement.namespaceURI===B?t.createElement(i):t.createElementNS(e,i)}})(e)}function W(){}function G(t){return null==t?W:function(){return this.querySelector(t)}}function q(){return[]}function U(t){return null==t?q:function(){return this.querySelectorAll(t)}}function Y(t){return function(){return this.matches(t)}}function X(t){return new Array(t.length)}function Z(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Z.prototype={constructor:Z,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Q(t,e,i,n,o,r){for(var s,a=0,l=e.length,c=r.length;a<c;++a)(s=e[a])?(s.__data__=r[a],n[a]=s):i[a]=new Z(t,r[a]);for(;a<l;++a)(s=e[a])&&(o[a]=s)}function J(t,e,i,n,o,r,s){var a,l,c,u={},d=e.length,h=r.length,p=new Array(d);for(a=0;a<d;++a)(l=e[a])&&(p[a]=c="$"+s.call(l,l.__data__,a,e),c in u?o[a]=l:u[c]=l);for(a=0;a<h;++a)(l=u[c="$"+s.call(t,r[a],a,r)])?((n[a]=l).__data__=r[a],u[c]=null):i[a]=new Z(t,r[a]);for(a=0;a<d;++a)(l=e[a])&&u[p[a]]===l&&(o[a]=l)}function tt(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function et(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function it(t,e){return t.style.getPropertyValue(e)||et(t).getComputedStyle(t,null).getPropertyValue(e)}function nt(t){return t.trim().split(/^|\s+/)}function ot(t){return t.classList||new rt(t)}function rt(t){this._node=t,this._names=nt(t.getAttribute("class")||"")}function st(t,e){for(var i=ot(t),n=-1,o=e.length;++n<o;)i.add(e[n])}function at(t,e){for(var i=ot(t),n=-1,o=e.length;++n<o;)i.remove(e[n])}function lt(){this.textContent=""}function ct(){this.innerHTML=""}function ut(){this.nextSibling&&this.parentNode.appendChild(this)}function dt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ht(){return null}function pt(){var t=this.parentNode;t&&t.removeChild(this)}function ft(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function gt(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}rt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var mt={};function vt(i,t,e){return i=yt(i,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||i.call(this,t)}}function yt(i,n,o){return function(t){var e=H.event;H.event=t;try{i.call(this,this.__data__,n,o)}finally{H.event=e}}}function bt(r){return function(){var t=this.__on;if(t){for(var e,i=0,n=-1,o=t.length;i<o;++i)e=t[i],r.type&&e.type!==r.type||e.name!==r.name?t[++n]=e:this.removeEventListener(e.type,e.listener,e.capture);++n?t.length=n:delete this.__on}}}function _t(l,c,u){var d=mt.hasOwnProperty(l.type)?vt:yt;return function(t,e,i){var n,o=this.__on,r=d(c,e,i);if(o)for(var s=0,a=o.length;s<a;++s)if((n=o[s]).type===l.type&&n.name===l.name)return this.removeEventListener(n.type,n.listener,n.capture),this.addEventListener(n.type,n.listener=r,n.capture=u),void(n.value=c);this.addEventListener(l.type,r,u),n={type:l.type,name:l.name,value:c,listener:r,capture:u},o?o.push(n):this.__on=[n]}}function Et(t,e,i,n){var o=H.event;t.sourceEvent=H.event,H.event=t;try{return e.apply(i,n)}finally{H.event=o}}function wt(t,e,i){var n=et(t),o=n.CustomEvent;"function"==typeof o?o=new o(e,i):(o=n.document.createEvent("Event"),i?(o.initEvent(e,i.bubbles,i.cancelable),o.detail=i.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}H.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(mt={mouseenter:"mouseover",mouseleave:"mouseout"}));var Ct=[null];function Tt(t,e){this._groups=t,this._parents=e}function xt(){return new Tt([[document.documentElement]],Ct)}function Dt(t){return"string"==typeof t?new Tt([[document.querySelector(t)]],[document.documentElement]):new Tt([[t]],Ct)}Tt.prototype=xt.prototype={constructor:Tt,select:function(t){"function"!=typeof t&&(t=G(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var r,s,a=e[o],l=a.length,c=n[o]=new Array(l),u=0;u<l;++u)(r=a[u])&&(s=t.call(r,r.__data__,u,a))&&("__data__"in r&&(s.__data__=r.__data__),c[u]=s);return new Tt(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=U(t));for(var e=this._groups,i=e.length,n=[],o=[],r=0;r<i;++r)for(var s,a=e[r],l=a.length,c=0;c<l;++c)(s=a[c])&&(n.push(t.call(s,s.__data__,c,a)),o.push(s));return new Tt(n,o)},filter:function(t){"function"!=typeof t&&(t=Y(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var r,s=e[o],a=s.length,l=n[o]=[],c=0;c<a;++c)(r=s[c])&&t.call(r,r.__data__,c,s)&&l.push(r);return new Tt(n,this._parents)},data:function(t,e){if(!t)return f=new Array(this.size()),u=-1,this.each(function(t){f[++u]=t}),f;var i,n=e?J:Q,o=this._parents,r=this._groups;"function"!=typeof t&&(i=t,t=function(){return i});for(var s=r.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=o[u],h=r[u],p=h.length,f=t.call(d,d&&d.__data__,u,o),g=f.length,m=l[u]=new Array(g),v=a[u]=new Array(g);n(d,h,m,v,c[u]=new Array(p),f,e);for(var y,b,_=0,E=0;_<g;++_)if(y=m[_]){for(E<=_&&(E=_+1);!(b=v[E])&&++E<g;);y._next=b||null}}return(a=new Tt(a,o))._enter=l,a._exit=c,a},enter:function(){return new Tt(this._enter||this._groups.map(X),this._parents)},exit:function(){return new Tt(this._exit||this._groups.map(X),this._parents)},join:function(t,e,i){var n=this.enter(),o=this,r=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=e&&(o=e(o)),null==i?r.remove():i(r),n&&o?n.merge(o).order():o},merge:function(t){for(var e=this._groups,i=t._groups,n=e.length,o=i.length,r=Math.min(n,o),s=new Array(n),a=0;a<r;++a)for(var l,c=e[a],u=i[a],d=c.length,h=s[a]=new Array(d),p=0;p<d;++p)(l=c[p]||u[p])&&(h[p]=l);for(;a<n;++a)s[a]=e[a];return new Tt(s,this._parents)},order:function(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n,o=t[e],r=o.length-1,s=o[r];0<=--r;)(n=o[r])&&(s&&4^n.compareDocumentPosition(s)&&s.parentNode.insertBefore(n,s),s=n);return this},sort:function(i){function t(t,e){return t&&e?i(t.__data__,e.__data__):!t-!e}i=i||tt;for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r){for(var s,a=e[r],l=a.length,c=o[r]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new Tt(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],o=0,r=n.length;o<r;++o){var s=n[o];if(s)return s}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var o,r=e[i],s=0,a=r.length;s<a;++s)(o=r[s])&&t.call(o,o.__data__,s,r);return this},attr:function(t,e){var i=V(t);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((null==e?i.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?i.local?function(e,i){return function(){var t=i.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,i){return function(){var t=i.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:i.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(i,e))},style:function(t,e,i){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,i,n){return function(){var t=i.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,n)}}:function(t,e,i){return function(){this.style.setProperty(t,e,i)}})(t,e,null==i?"":i)):it(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,i){return function(){var t=i.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var i=nt(t+"");if(arguments.length<2){for(var n=ot(this.node()),o=-1,r=i.length;++o<r;)if(!n.contains(i[o]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?st:at)(this,t)}}:e?function(t){return function(){st(this,t)}}:function(t){return function(){at(this,t)}})(i,e))},text:function(t){return arguments.length?this.each(null==t?lt:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ct:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(ut)},lower:function(){return this.each(dt)},append:function(t){var e="function"==typeof t?t:j(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var i="function"==typeof t?t:j(t),n=null==e?ht:"function"==typeof e?e:G(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})},remove:function(){return this.each(pt)},clone:function(t){return this.select(t?gt:ft)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,i){var n,o,r=(t+"").trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return 0<=i&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}}),s=r.length;if(!(arguments.length<2)){for(a=e?_t:bt,null==i&&(i=!1),n=0;n<s;++n)this.each(a(r[n],e,i));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(n=0,l=a[c];n<s;++n)if((o=r[n]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return wt(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return wt(this,t,e)}})(t,e))}};var It=0;function Ot(){return new Rt}function Rt(){this._="@"+(++It).toString(36)}function kt(){for(var t,e=H.event;t=e.sourceEvent;)e=t;return e}function St(t,e){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function At(t){var e=kt();return e.changedTouches&&(e=e.changedTouches[0]),St(t,e)}function Mt(t,e,i){arguments.length<3&&(i=e,e=kt().changedTouches);for(var n,o=0,r=e?e.length:0;o<r;++o)if((n=e[o]).identifier===i)return St(t,n);return null}function Nt(){H.event.stopImmediatePropagation()}function Kt(){H.event.preventDefault(),H.event.stopImmediatePropagation()}function Lt(t){var e=t.document.documentElement,i=Dt(t).on("dragstart.drag",Kt,!0);"onselectstart"in e?i.on("selectstart.drag",Kt,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Pt(t,e){var i=t.document.documentElement,n=Dt(t).on("dragstart.drag",null);e&&(n.on("click.drag",Kt,!0),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in i?n.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}function Ft(t){return function(){return t}}function Bt(t,e,i,n,o,r,s,a,l,c){this.target=t,this.type=e,this.subject=i,this.identifier=n,this.active=o,this.x=r,this.y=s,this.dx=a,this.dy=l,this._=c}function Ht(){return!H.event.button}function zt(){return this.parentNode}function $t(t){return null==t?{x:H.event.x,y:H.event.y}:t}function Vt(){return"ontouchstart"in this}function jt(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function Wt(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}function Gt(){}Rt.prototype=Ot.prototype={constructor:Rt,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},Bt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var qt="\\s*([+-]?\\d+)\\s*",Ut="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xt=/^#([0-9a-f]{3})$/,Zt=/^#([0-9a-f]{6})$/,Qt=new RegExp("^rgb\\("+[qt,qt,qt]+"\\)$"),Jt=new RegExp("^rgb\\("+[Yt,Yt,Yt]+"\\)$"),te=new RegExp("^rgba\\("+[qt,qt,qt,Ut]+"\\)$"),ee=new RegExp("^rgba\\("+[Yt,Yt,Yt,Ut]+"\\)$"),ie=new RegExp("^hsl\\("+[Ut,Yt,Yt]+"\\)$"),ne=new RegExp("^hsla\\("+[Ut,Yt,Yt,Ut]+"\\)$"),oe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function re(t){var e;return t=(t+"").trim().toLowerCase(),(e=Xt.exec(t))?new ue((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=Zt.exec(t))?se(parseInt(e[1],16)):(e=Qt.exec(t))?new ue(e[1],e[2],e[3],1):(e=Jt.exec(t))?new ue(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=te.exec(t))?ae(e[1],e[2],e[3],e[4]):(e=ee.exec(t))?ae(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ie.exec(t))?he(e[1],e[2]/100,e[3]/100,1):(e=ne.exec(t))?he(e[1],e[2]/100,e[3]/100,e[4]):oe.hasOwnProperty(t)?se(oe[t]):"transparent"===t?new ue(NaN,NaN,NaN,0):null}function se(t){return new ue(t>>16&255,t>>8&255,255&t,1)}function ae(t,e,i,n){return n<=0&&(t=e=i=NaN),new ue(t,e,i,n)}function le(t){return t instanceof Gt||(t=re(t)),t?new ue((t=t.rgb()).r,t.g,t.b,t.opacity):new ue}function ce(t,e,i,n){return 1===arguments.length?le(t):new ue(t,e,i,null==n?1:n)}function ue(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}function de(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function he(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||1<=i?t=e=NaN:e<=0&&(t=NaN),new fe(t,e,i,n)}function pe(t,e,i,n){return 1===arguments.length?function(t){if(t instanceof fe)return new fe(t.h,t.s,t.l,t.opacity);if(t instanceof Gt||(t=re(t)),!t)return new fe;if(t instanceof fe)return t;var e=(t=t.rgb()).r/255,i=t.g/255,n=t.b/255,o=Math.min(e,i,n),r=Math.max(e,i,n),s=NaN,a=r-o,l=(r+o)/2;return a?(s=e===r?(i-n)/a+6*(i<n):i===r?(n-e)/a+2:(e-i)/a+4,a/=l<.5?r+o:2-r-o,s*=60):a=0<l&&l<1?0:s,new fe(s,a,l,t.opacity)}(t):new fe(t,e,i,null==n?1:n)}function fe(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}function ge(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)}jt(Gt,re,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),jt(ue,ce,Wt(Gt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ue(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ue(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+de(this.r)+de(this.g)+de(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),jt(fe,pe,Wt(Gt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new fe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new fe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,o=2*i-n;return new ue(ge(240<=t?t-240:120+t,o,n),ge(t,o,n),ge(t<120?240+t:t-120,o,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var me=Math.PI/180,ve=180/Math.PI,ye=.96422,be=1,_e=.82521,Ee=4/29,we=6/29*3*(6/29),Ce=6/29*(6/29)*(6/29);function Te(t){if(t instanceof De)return new De(t.l,t.a,t.b,t.opacity);if(t instanceof Me){if(isNaN(t.h))return new De(t.l,0,0,t.opacity);var e=t.h*me;return new De(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof ue||(t=le(t));var i,n,o=ke(t.r),r=ke(t.g),s=ke(t.b),a=Ie((.2225045*o+.7168786*r+.0606169*s)/be);return o===r&&r===s?i=n=a:(i=Ie((.4360747*o+.3850649*r+.1430804*s)/ye),n=Ie((.0139322*o+.0971045*r+.7141733*s)/_e)),new De(116*a-16,500*(i-a),200*(a-n),t.opacity)}function xe(t,e,i,n){return 1===arguments.length?Te(t):new De(t,e,i,null==n?1:n)}function De(t,e,i,n){this.l=+t,this.a=+e,this.b=+i,this.opacity=+n}function Ie(t){return Ce<t?Math.pow(t,1/3):t/we+Ee}function Oe(t){return 6/29<t?t*t*t:we*(t-Ee)}function Re(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ke(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Se(t){if(t instanceof Me)return new Me(t.h,t.c,t.l,t.opacity);if(t instanceof De||(t=Te(t)),0===t.a&&0===t.b)return new Me(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ve;return new Me(e<0?360+e:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Ae(t,e,i,n){return 1===arguments.length?Se(t):new Me(t,e,i,null==n?1:n)}function Me(t,e,i,n){this.h=+t,this.c=+e,this.l=+i,this.opacity=+n}jt(De,xe,Wt(Gt,{brighter:function(t){return new De(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new De(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,i=isNaN(this.b)?t:t-this.b/200;return new ue(Re(3.1338561*(e=ye*Oe(e))-1.6168667*(t=be*Oe(t))-.4906146*(i=_e*Oe(i))),Re(-.9787684*e+1.9161415*t+.033454*i),Re(.0719453*e-.2289914*t+1.4052427*i),this.opacity)}})),jt(Me,Ae,Wt(Gt,{brighter:function(t){return new Me(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Me(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Te(this).rgb()}}));var Ne=-.29227,Ke=-.90649,Le=1.97294,Pe=Le*Ke,Fe=1.78277*Le,Be=1.78277*Ne- -.14861*Ke;function He(t,e,i,n){return 1===arguments.length?function(t){if(t instanceof ze)return new ze(t.h,t.s,t.l,t.opacity);t instanceof ue||(t=le(t));var e=t.r/255,i=t.g/255,n=t.b/255,o=(Be*n+Pe*e-Fe*i)/(Be+Pe-Fe),r=n-o,s=(Le*(i-o)-Ne*r)/Ke,a=Math.sqrt(s*s+r*r)/(Le*o*(1-o)),l=a?Math.atan2(s,r)*ve-120:NaN;return new ze(l<0?l+360:l,a,o,t.opacity)}(t):new ze(t,e,i,null==n?1:n)}function ze(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}function $e(t,e,i,n,o){var r=t*t,s=r*t;return((1-3*t+3*r-s)*e+(4-6*r+3*s)*i+(1+3*t+3*r-3*s)*n+s*o)/6}function Ve(s){var a=s.length-1;return function(t){var e=t<=0?t=0:1<=t?a-(t=1):Math.floor(t*a),i=s[e],n=s[e+1],o=0<e?s[e-1]:2*i-n,r=e<a-1?s[e+2]:2*n-i;return $e((t-e/a)*a,o,i,n,r)}}function je(s){var a=s.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*a),i=s[(e+a-1)%a],n=s[e%a],o=s[(e+1)%a],r=s[(e+2)%a];return $e((t-e/a)*a,i,n,o,r)}}function We(t){return function(){return t}}function Ge(e,i){return function(t){return e+t*i}}function qe(t,e){var i=e-t;return i?Ge(t,180<i||i<-180?i-360*Math.round(i/360):i):We(isNaN(t)?e:t)}function Ue(t,e){var i=e-t;return i?Ge(t,i):We(isNaN(t)?e:t)}jt(ze,He,Wt(Gt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ze(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ze(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*me,e=+this.l,i=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(t),o=Math.sin(t);return new ue(255*(e+i*(-.14861*n+1.78277*o)),255*(e+i*(Ne*n+Ke*o)),255*(e+Le*n*i),this.opacity)}}));var Ye=function t(e){var s=function(r){return 1==(r=+r)?Ue:function(t,e){return e-t?(i=t,n=e,o=r,i=Math.pow(i,o),n=Math.pow(n,o)-i,o=1/o,function(t){return Math.pow(i+t*n,o)}):We(isNaN(t)?e:t);var i,n,o}}(e);function i(e,t){var i=s((e=ce(e)).r,(t=ce(t)).r),n=s(e.g,t.g),o=s(e.b,t.b),r=Ue(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=n(t),e.b=o(t),e.opacity=r(t),e+""}}return i.gamma=t,i}(1);function Xe(a){return function(t){var e,i,n=t.length,o=new Array(n),r=new Array(n),s=new Array(n);for(e=0;e<n;++e)i=ce(t[e]),o[e]=i.r||0,r[e]=i.g||0,s[e]=i.b||0;return o=a(o),r=a(r),s=a(s),i.opacity=1,function(t){return i.r=o(t),i.g=r(t),i.b=s(t),i+""}}}var Ze=Xe(Ve),Qe=Xe(je);function Je(t,e){var i,n=e?e.length:0,o=t?Math.min(n,t.length):0,r=new Array(o),s=new Array(n);for(i=0;i<o;++i)r[i]=si(t[i],e[i]);for(;i<n;++i)s[i]=e[i];return function(t){for(i=0;i<o;++i)s[i]=r[i](t);return s}}function ti(e,i){var n=new Date;return i-=e=+e,function(t){return n.setTime(e+i*t),n}}function ei(e,i){return i-=e=+e,function(t){return e+i*t}}function ii(t,e){var i,n={},o={};for(i in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)i in t?n[i]=si(t[i],e[i]):o[i]=e[i];return function(t){for(i in n)o[i]=n[i](t);return o}}var ni=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oi=new RegExp(ni.source,"g");function ri(t,n){var e,i,o,r,s,a=ni.lastIndex=oi.lastIndex=0,l=-1,c=[],u=[];for(t+="",n+="";(e=ni.exec(t))&&(i=oi.exec(n));)(o=i.index)>a&&(o=n.slice(a,o),c[l]?c[l]+=o:c[++l]=o),(e=e[0])===(i=i[0])?c[l]?c[l]+=i:c[++l]=i:(c[++l]=null,u.push({i:l,x:ei(e,i)})),a=oi.lastIndex;return a<n.length&&(o=n.slice(a),c[l]?c[l]+=o:c[++l]=o),c.length<2?u[0]?(s=u[0].x,function(t){return s(t)+""}):(r=n,function(){return r}):(n=u.length,function(t){for(var e,i=0;i<n;++i)c[(e=u[i]).i]=e.x(t);return c.join("")})}function si(t,e){var i,n=typeof e;return null==e||"boolean"==n?We(e):("number"==n?ei:"string"==n?(i=re(e))?(e=i,Ye):ri:e instanceof re?Ye:e instanceof Date?ti:Array.isArray(e)?Je:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ii:ei)(t,e)}function ai(e,i){return i-=e=+e,function(t){return Math.round(e+i*t)}}var li,ci,ui,di,hi=180/Math.PI,pi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fi(t,e,i,n,o,r){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*i+e*n)&&(i-=t*l,n-=e*l),(a=Math.sqrt(i*i+n*n))&&(i/=a,n/=a,l/=a),t*n<e*i&&(t=-t,e=-e,l=-l,s=-s),{translateX:o,translateY:r,rotate:Math.atan2(e,t)*hi,skewX:Math.atan(l)*hi,scaleX:s,scaleY:a}}function gi(u,d,h,p){function f(t){return t.length?t.pop()+" ":""}return function(t,e){var i,n,o,r,s,a,l=[],c=[];return t=u(t),e=u(e),function(t,e,i,n,o,r){if(t!==i||e!==n){var s=o.push("translate(",null,d,null,h);r.push({i:s-4,x:ei(t,i)},{i:s-2,x:ei(e,n)})}else(i||n)&&o.push("translate("+i+d+n+h)}(t.translateX,t.translateY,e.translateX,e.translateY,l,c),r=t.rotate,s=e.rotate,a=l,r!==s?(180<r-s?s+=360:180<s-r&&(r+=360),c.push({i:a.push(f(a)+"rotate(",null,p)-2,x:ei(r,s)})):s&&a.push(f(a)+"rotate("+s+p),i=t.skewX,n=e.skewX,o=l,i!==n?c.push({i:o.push(f(o)+"skewX(",null,p)-2,x:ei(i,n)}):n&&o.push(f(o)+"skewX("+n+p),function(t,e,i,n,o,r){if(t!==i||e!==n){var s=o.push(f(o)+"scale(",null,",",null,")");r.push({i:s-4,x:ei(t,i)},{i:s-2,x:ei(e,n)})}else 1===i&&1===n||o.push(f(o)+"scale("+i+","+n+")")}(t.scaleX,t.scaleY,e.scaleX,e.scaleY,l,c),t=e=null,function(t){for(var e,i=-1,n=c.length;++i<n;)l[(e=c[i]).i]=e.x(t);return l.join("")}}}var mi=gi(function(t){return"none"===t?pi:(li||(li=document.createElement("DIV"),ci=document.documentElement,ui=document.defaultView),li.style.transform=t,t=ui.getComputedStyle(ci.appendChild(li),null).getPropertyValue("transform"),ci.removeChild(li),fi(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),vi=gi(function(t){return null==t?pi:((di=di||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=di.transform.baseVal.consolidate())?fi((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):pi)},", ",")",")"),yi=Math.SQRT2;function bi(t){return((t=Math.exp(t))+1/t)/2}function _i(t,e){var i,s,a=t[0],l=t[1],c=t[2],n=e[0],o=e[1],r=e[2],u=n-a,d=o-l,h=u*u+d*d;if(h<1e-12)s=Math.log(r/c)/yi,i=function(t){return[a+t*u,l+t*d,c*Math.exp(yi*t*s)]};else{var p=Math.sqrt(h),f=(r*r-c*c+4*h)/(2*c*2*p),g=(r*r-c*c-4*h)/(2*r*2*p),m=Math.log(Math.sqrt(f*f+1)-f),v=Math.log(Math.sqrt(g*g+1)-g);s=(v-m)/yi,i=function(t){var e,i,n=t*s,o=bi(m),r=c/(2*p)*(o*(e=yi*n+m,((e=Math.exp(2*e))-1)/(e+1))-(i=m,((i=Math.exp(i))-1/i)/2));return[a+r*u,l+r*d,c*o/bi(yi*n+m)]}}return i.duration=1e3*s,i}function Ei(s){return function(e,t){var i=s((e=pe(e)).h,(t=pe(t)).h),n=Ue(e.s,t.s),o=Ue(e.l,t.l),r=Ue(e.opacity,t.opacity);return function(t){return e.h=i(t),e.s=n(t),e.l=o(t),e.opacity=r(t),e+""}}}var wi=Ei(qe),Ci=Ei(Ue);function Ti(s){return function(e,t){var i=s((e=Ae(e)).h,(t=Ae(t)).h),n=Ue(e.c,t.c),o=Ue(e.l,t.l),r=Ue(e.opacity,t.opacity);return function(t){return e.h=i(t),e.c=n(t),e.l=o(t),e.opacity=r(t),e+""}}}var xi=Ti(qe),Di=Ti(Ue);function Ii(a){return function t(s){function e(e,t){var i=a((e=He(e)).h,(t=He(t)).h),n=Ue(e.s,t.s),o=Ue(e.l,t.l),r=Ue(e.opacity,t.opacity);return function(t){return e.h=i(t),e.s=n(t),e.l=o(Math.pow(t,s)),e.opacity=r(t),e+""}}return s=+s,e.gamma=t,e}(1)}var Oi,Ri,ki=Ii(qe),Si=Ii(Ue),Ai=0,Mi=0,Ni=0,Ki=1e3,Li=0,Pi=0,Fi=0,Bi="object"==typeof performance&&performance.now?performance:Date,Hi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function zi(){return Pi||(Hi($i),Pi=Bi.now()+Fi)}function $i(){Pi=0}function Vi(){this._call=this._time=this._next=null}function ji(t,e,i){var n=new Vi;return n.restart(t,e,i),n}function Wi(){zi(),++Ai;for(var t,e=Oi;e;)0<=(t=Pi-e._time)&&e._call.call(null,t),e=e._next;--Ai}function Gi(){Pi=(Li=Bi.now())+Fi,Ai=Mi=0;try{Wi()}finally{Ai=0,function(){for(var t,e,i=Oi,n=1/0;i;)i=i._call?(n>i._time&&(n=i._time),(t=i)._next):(e=i._next,i._next=null,t?t._next=e:Oi=e);Ri=t,Ui(n)}(),Pi=0}}function qi(){var t=Bi.now(),e=t-Li;Ki<e&&(Fi-=e,Li=t)}function Ui(t){Ai||(Mi=Mi&&clearTimeout(Mi),24<t-Pi?(t<1/0&&(Mi=setTimeout(Gi,t-Bi.now()-Fi)),Ni=Ni&&clearInterval(Ni)):(Ni||(Li=Bi.now(),Ni=setInterval(qi,Ki)),Ai=1,Hi(Gi)))}function Yi(e,i,t){var n=new Vi;return i=null==i?0:+i,n.restart(function(t){n.stop(),e(t+i)},i,t),n}Vi.prototype=ji.prototype={constructor:Vi,restart:function(t,e,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?zi():+i)+(null==e?0:+e),this._next||Ri===this||(Ri?Ri._next=this:Oi=this,Ri=this),this._call=t,this._time=i,Ui()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ui())}};var Xi=z("start","end","cancel","interrupt"),Zi=[],Qi=0,Ji=1,tn=2,en=3,nn=4,on=5,rn=6;function sn(t,e,i,n,o,r){var s,a,l,c,u,d=t.__transition;if(d){if(i in d)return}else t.__transition={};function h(t){var e,i,n,o;if(l.state!==Ji)return f();for(e in u)if((o=u[e]).name===l.name){if(o.state===en)return Yi(h);o.state===nn?(o.state=rn,o.timer.stop(),o.on.call("interrupt",s,s.__data__,o.index,o.group),delete u[e]):+e<a&&(o.state=rn,o.timer.stop(),o.on.call("cancel",s,s.__data__,o.index,o.group),delete u[e])}if(Yi(function(){l.state===en&&(l.state=nn,l.timer.restart(p,l.delay,l.time),p(t))}),l.state=tn,l.on.call("start",s,s.__data__,l.index,l.group),l.state===tn){for(l.state=en,c=new Array(n=l.tween.length),e=0,i=-1;e<n;++e)(o=l.tween[e].value.call(s,s.__data__,l.index,l.group))&&(c[++i]=o);c.length=i+1}}function p(t){for(var e=t<l.duration?l.ease.call(null,t/l.duration):(l.timer.restart(f),l.state=on,1),i=-1,n=c.length;++i<n;)c[i].call(s,e);l.state===on&&(l.on.call("end",s,s.__data__,l.index,l.group),f())}function f(){for(var t in l.state=rn,l.timer.stop(),delete u[a],u)return;delete s.__transition}s=t,a=i,l={name:e,index:n,group:o,on:Xi,tween:Zi,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Qi},((u=s.__transition)[a]=l).timer=ji(function(t){l.state=Ji,l.timer.restart(h,l.delay,l.time),l.delay<=t&&h(t-l.delay)},0,l.time)}function an(t,e){var i=cn(t,e);if(i.state>Qi)throw new Error("too late; already scheduled");return i}function ln(t,e){var i=cn(t,e);if(i.state>en)throw new Error("too late; already running");return i}function cn(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function un(t,e){var i,n,o,r=t.__transition,s=!0;if(r){for(o in e=null==e?null:e+"",r)(i=r[o]).name===e?(n=i.state>tn&&i.state<on,i.state=rn,i.timer.stop(),i.on.call(n?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete r[o]):s=!1;s&&delete t.__transition}}function dn(t,e,i){var n=t._id;return t.each(function(){var t=ln(this,n);(t.value||(t.value={}))[e]=i.apply(this,arguments)}),function(t){return cn(t,n).value[e]}}function hn(t,e){var i;return("number"==typeof e?ei:e instanceof re?Ye:(i=re(e))?(e=i,Ye):ri)(t,e)}var pn=xt.prototype.constructor;function fn(t){return function(){this.style.removeProperty(t)}}var gn=0;function mn(t,e,i,n){this._groups=t,this._parents=e,this._name=i,this._id=n}function vn(t){return xt().transition(t)}function yn(){return++gn}var bn=xt.prototype;function _n(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function En(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}mn.prototype=vn.prototype={constructor:mn,select:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=G(t));for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s)for(var a,l,c=n[s],u=c.length,d=r[s]=new Array(u),h=0;h<u;++h)(a=c[h])&&(l=t.call(a,a.__data__,h,c))&&("__data__"in a&&(l.__data__=a.__data__),d[h]=l,sn(d[h],e,i,h,d,cn(a,i)));return new mn(r,this._parents,e,i)},selectAll:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=U(t));for(var n=this._groups,o=n.length,r=[],s=[],a=0;a<o;++a)for(var l,c=n[a],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,p=t.call(l,l.__data__,d,c),f=cn(l,i),g=0,m=p.length;g<m;++g)(h=p[g])&&sn(h,e,i,g,p,f);r.push(p),s.push(l)}return new mn(r,s,e,i)},filter:function(t){"function"!=typeof t&&(t=Y(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var r,s=e[o],a=s.length,l=n[o]=[],c=0;c<a;++c)(r=s[c])&&t.call(r,r.__data__,c,s)&&l.push(r);return new mn(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,n=e.length,o=i.length,r=Math.min(n,o),s=new Array(n),a=0;a<r;++a)for(var l,c=e[a],u=i[a],d=c.length,h=s[a]=new Array(d),p=0;p<d;++p)(l=c[p]||u[p])&&(h[p]=l);for(;a<n;++a)s[a]=e[a];return new mn(s,this._parents,this._name,this._id)},selection:function(){return new pn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,i=yn(),n=this._groups,o=n.length,r=0;r<o;++r)for(var s,a=n[r],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=cn(s,e);sn(s,t,i,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new mn(n,this._parents,t,i)},call:bn.call,nodes:bn.nodes,node:bn.node,size:bn.size,empty:bn.empty,each:bn.each,on:function(t,e){var i,n,o,r,s,a,l=this._id;return arguments.length<2?cn(this.node(),l).on.on(t):this.each((i=l,o=e,a=((n=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return 0<=e&&(t=t.slice(0,e)),!t||"start"===t})?an:ln,function(){var t=a(this,i),e=t.on;e!==r&&(s=(r=e).copy()).on(n,o),t.on=s}))},attr:function(t,e){var i=V(t),n="transform"===i?vi:hn;return this.attrTween(t,"function"==typeof e?(i.local?function(n,o,r){var s,a,l;return function(){var t,e,i=r(this);if(null!=i)return(t=this.getAttributeNS(n.space,n.local))===(e=i+"")?null:t===s&&e===a?l:(a=e,l=o(s=t,i));this.removeAttributeNS(n.space,n.local)}}:function(n,o,r){var s,a,l;return function(){var t,e,i=r(this);if(null!=i)return(t=this.getAttribute(n))===(e=i+"")?null:t===s&&e===a?l:(a=e,l=o(s=t,i));this.removeAttribute(n)}})(i,n,dn(this,"attr."+t,e)):null==e?(i.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(i):(i.local?function(e,i,n){var o,r,s=n+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===s?null:t===o?r:r=i(o=t,n)}}:function(e,i,n){var o,r,s=n+"";return function(){var t=this.getAttribute(e);return t===s?null:t===o?r:r=i(o=t,n)}})(i,n,e))},attrTween:function(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;var n=V(t);return this.tween(i,(n.local?function(n,o){var r,s;function t(){var e,i,t=o.apply(this,arguments);return t!==s&&(r=(s=t)&&(e=n,i=t,function(t){this.setAttributeNS(e.space,e.local,i(t))})),r}return t._value=o,t}:function(n,o){var r,s;function t(){var e,i,t=o.apply(this,arguments);return t!==s&&(r=(s=t)&&(e=n,i=t,function(t){this.setAttribute(e,i(t))})),r}return t._value=o,t})(n,e))},style:function(t,e,i){var n,o,r,s,a,l,c,u,d,h,p,f,g,m,v,y,b,_,E,w,C,T,x,D,I,O="transform"==(t+="")?mi:hn;return null==e?this.styleTween(t,(C=t,T=O,function(){var t=it(this,C),e=(this.style.removeProperty(C),it(this,C));return t===e?null:t===x&&e===D?I:I=T(x=t,D=e)})).on("end.style."+t,fn(t)):"function"==typeof e?this.styleTween(t,(y=O,b=dn(this,"style."+(v=t),e),function(){var t=it(this,v),e=b(this),i=e+"";return null==e&&(this.style.removeProperty(v),i=e=it(this,v)),t===i?null:t===_&&i===E?w:(E=i,w=y(_=t,e))})).each((c=this._id,m="end."+(g="style."+(u=t)),function(){var t=ln(this,c),e=t.on,i=null==t.value[g]?f=f||fn(u):void 0;e===d&&p===i||(h=(d=e).copy()).on(m,p=i),t.on=h})):this.styleTween(t,(n=t,o=O,l=(r=e)+"",function(){var t=it(this,n);return t===l?null:t===s?a:a=o(s=t,r)}),i).on("end.style."+t,null)},styleTween:function(t,e,i){var o,r,s,a,l,n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return this.tween(n,(o=t,s=null==i?"":i,c._value=r=e,c));function c(){var e,i,n,t=r.apply(this,arguments);return t!==l&&(a=(l=t)&&(e=o,i=t,n=s,function(t){this.style.setProperty(e,i(t),n)})),a}},text:function(t){return this.tween("text","function"==typeof t?(i=dn(this,"text",t),function(){var t=i(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,i},remove:function(){return this.on("end.remove",(i=this._id,function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==i)return;t&&t.removeChild(this)}));var i},tween:function(t,e){var i=this._id;if(t+="",arguments.length<2){for(var n,o=cn(this.node(),i).tween,r=0,s=o.length;r<s;++r)if((n=o[r]).name===t)return n.value;return null}return this.each((null==e?function(o,r){var s,a;return function(){var t=ln(this,o),e=t.tween;if(e!==s)for(var i=0,n=(a=s=e).length;i<n;++i)if(a[i].name===r){(a=a.slice()).splice(i,1);break}t.tween=a}}:function(r,s,a){var l,c;if("function"!=typeof a)throw new Error;return function(){var t=ln(this,r),e=t.tween;if(e!==l){c=(l=e).slice();for(var i={name:s,value:a},n=0,o=c.length;n<o;++n)if(c[n].name===s){c[n]=i;break}n===o&&c.push(i)}t.tween=c}})(i,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){an(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){an(this,t).delay=e}})(e,t)):cn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ln(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ln(this,t).duration=e}})(e,t)):cn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){ln(this,t).ease=e}}(e,t)):cn(this.node(),e).ease},end:function(){var o,r,s=this,a=s._id,l=s.size();return new Promise(function(t,e){var i={value:e},n={value:function(){0==--l&&t()}};s.each(function(){var t=ln(this,a),e=t.on;e!==o&&((r=(o=e).copy())._.cancel.push(i),r._.interrupt.push(i),r._.end.push(n)),t.on=r})})}};var wn=function t(e){function i(t){return Math.pow(t,e)}return e=+e,i.exponent=t,i}(3),Cn=function t(e){function i(t){return 1-Math.pow(1-t,e)}return e=+e,i.exponent=t,i}(3),Tn=function t(e){function i(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,i.exponent=t,i}(3),xn=Math.PI,Dn=xn/2;function In(t){return(1-Math.cos(xn*t))/2}function On(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Rn(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var kn=7.5625;function Sn(t){return(t=+t)<4/11?kn*t*t:t<8/11?kn*(t-=6/11)*t+.75:t<10/11?kn*(t-=9/11)*t+.9375:kn*(t-=21/22)*t+63/64}var An=function t(e){function i(t){return t*t*((e+1)*t-e)}return e=+e,i.overshoot=t,i}(1.70158),Mn=function t(e){function i(t){return--t*t*((e+1)*t+e)+1}return e=+e,i.overshoot=t,i}(1.70158),Nn=function t(e){function i(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,i.overshoot=t,i}(1.70158),Kn=2*Math.PI,Ln=function e(i,n){var o=Math.asin(1/(i=Math.max(1,i)))*(n/=Kn);function t(t){return i*Math.pow(2,10*--t)*Math.sin((o-t)/n)}return t.amplitude=function(t){return e(t,n*Kn)},t.period=function(t){return e(i,t)},t}(1,.3),Pn=function e(i,n){var o=Math.asin(1/(i=Math.max(1,i)))*(n/=Kn);function t(t){return 1-i*Math.pow(2,-10*(t=+t))*Math.sin((t+o)/n)}return t.amplitude=function(t){return e(t,n*Kn)},t.period=function(t){return e(i,t)},t}(1,.3),Fn=function e(i,n){var o=Math.asin(1/(i=Math.max(1,i)))*(n/=Kn);function t(t){return((t=2*t-1)<0?i*Math.pow(2,10*t)*Math.sin((o-t)/n):2-i*Math.pow(2,-10*t)*Math.sin((o+t)/n))/2}return t.amplitude=function(t){return e(t,n*Kn)},t.period=function(t){return e(i,t)},t}(1,.3),Bn={time:null,delay:0,duration:250,ease:En};function Hn(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))return Bn.time=zi(),Bn;return i}xt.prototype.interrupt=function(t){return this.each(function(){un(this,t)})},xt.prototype.transition=function(t){var e,i;t=t instanceof mn?(e=t._id,t._name):(e=yn(),(i=Bn).time=zi(),null==t?null:t+"");for(var n=this._groups,o=n.length,r=0;r<o;++r)for(var s,a=n[r],l=a.length,c=0;c<l;++c)(s=a[c])&&sn(s,t,e,c,a,i||Hn(s,e));return new mn(n,this._parents,t,e)};var zn=[null];function $n(t){return function(){return t}}function Vn(t,e,i){this.target=t,this.type=e,this.selection=i}function jn(){H.event.stopImmediatePropagation()}function Wn(){H.event.preventDefault(),H.event.stopImmediatePropagation()}var Gn={name:"drag"},qn={name:"space"},Un={name:"handle"},Yn={name:"center"},Xn={name:"x",handles:["e","w"].map(oo),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Zn={name:"y",handles:["n","s"].map(oo),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Qn={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(oo),input:function(t){return t},output:function(t){return t}},Jn={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},to={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},eo={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},io={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},no={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function oo(t){return{type:t}}function ro(){return!H.event.button}function so(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ao(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function lo(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function co(K){var L,e=so,P=ro,i=z(o,"start","brush","end"),n=6;function o(t){var e=t.property("__brush",a).selectAll(".overlay").data([oo("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Jn.overlay).merge(e).each(function(){var t=ao(this).extent;Dt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([oo("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Jn.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(K.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return Jn[t.type]}),t.each(F).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",s)}function F(){var t=Dt(this),e=ao(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-n/2:e[0][0]-n/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-n/2:e[0][1]-n/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+n:n}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+n:n})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function B(t,e){return t.__brush.emitter||new r(t,e)}function r(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function s(){if(H.event.touches){if(H.event.changedTouches.length<H.event.touches.length)return Wn()}else if(L)return;if(P.apply(this,arguments)){var e,i,n,o,r,s,a,l,c,u,d,h,p,f=this,g=H.event.target.__data__.type,m="selection"===(H.event.metaKey?g="overlay":g)?Gn:H.event.altKey?Yn:Un,v=K===Zn?null:io[g],y=K===Xn?null:no[g],b=ao(f),t=b.extent,_=b.selection,E=t[0][0],w=t[0][1],C=t[1][0],T=t[1][1],x=v&&y&&H.event.shiftKey,D=At(f),I=D,O=B(f,arguments).beforestart();"overlay"===g?b.selection=_=[[e=K===Zn?E:D[0],n=K===Xn?w:D[1]],[r=K===Zn?C:e,a=K===Xn?T:n]]:(e=_[0][0],n=_[0][1],r=_[1][0],a=_[1][1]),i=e,o=n,s=r,l=a;var R=Dt(f).attr("pointer-events","none"),k=R.selectAll(".overlay").attr("cursor",Jn[g]);if(H.event.touches)R.on("touchmove.brush",A,!0).on("touchend.brush touchcancel.brush",N,!0);else{var S=Dt(H.event.view).on("keydown.brush",function(){switch(H.event.keyCode){case 16:x=v&&y;break;case 18:m===Un&&(v&&(r=s-c*v,e=i+c*v),y&&(a=l-u*y,n=o+u*y),m=Yn,M());break;case 32:m!==Un&&m!==Yn||(v<0?r=s-c:0<v&&(e=i-c),y<0?a=l-u:0<y&&(n=o-u),m=qn,k.attr("cursor",Jn.selection),M());break;default:return}Wn()},!0).on("keyup.brush",function(){switch(H.event.keyCode){case 16:x&&(h=p=x=!1,M());break;case 18:m===Yn&&(v<0?r=s:0<v&&(e=i),y<0?a=l:0<y&&(n=o),m=Un,M());break;case 32:m===qn&&(m=H.event.altKey?(v&&(r=s-c*v,e=i+c*v),y&&(a=l-u*y,n=o+u*y),Yn):(v<0?r=s:0<v&&(e=i),y<0?a=l:0<y&&(n=o),Un),k.attr("cursor",Jn[g]),M());break;default:return}Wn()},!0).on("mousemove.brush",A,!0).on("mouseup.brush",N,!0);Lt(H.event.view)}jn(),un(f),F.call(f),O.start()}function A(){var t=At(f);!x||h||p||(Math.abs(t[0]-I[0])>Math.abs(t[1]-I[1])?p=!0:h=!0),I=t,d=!0,Wn(),M()}function M(){var t;switch(c=I[0]-D[0],u=I[1]-D[1],m){case qn:case Gn:v&&(c=Math.max(E-e,Math.min(C-r,c)),i=e+c,s=r+c),y&&(u=Math.max(w-n,Math.min(T-a,u)),o=n+u,l=a+u);break;case Un:v<0?(c=Math.max(E-e,Math.min(C-e,c)),i=e+c,s=r):0<v&&(c=Math.max(E-r,Math.min(C-r,c)),i=e,s=r+c),y<0?(u=Math.max(w-n,Math.min(T-n,u)),o=n+u,l=a):0<y&&(u=Math.max(w-a,Math.min(T-a,u)),o=n,l=a+u);break;case Yn:v&&(i=Math.max(E,Math.min(C,e-c*v)),s=Math.max(E,Math.min(C,r+c*v))),y&&(o=Math.max(w,Math.min(T,n-u*y)),l=Math.max(w,Math.min(T,a+u*y)))}s<i&&(v*=-1,t=e,e=r,r=t,t=i,i=s,s=t,g in to&&k.attr("cursor",Jn[g=to[g]])),l<o&&(y*=-1,t=n,n=a,a=t,t=o,o=l,l=t,g in eo&&k.attr("cursor",Jn[g=eo[g]])),b.selection&&(_=b.selection),h&&(i=_[0][0],s=_[1][0]),p&&(o=_[0][1],l=_[1][1]),_[0][0]===i&&_[0][1]===o&&_[1][0]===s&&_[1][1]===l||(b.selection=[[i,o],[s,l]],F.call(f),O.brush())}function N(){if(jn(),H.event.touches){if(H.event.touches.length)return;L&&clearTimeout(L),L=setTimeout(function(){L=null},500),R.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Pt(H.event.view,d),S.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);R.attr("pointer-events","all"),k.attr("cursor",Jn.overlay),b.selection&&(_=b.selection),lo(_)&&(b.selection=null,F.call(f)),O.end()}}function a(){var t=this.__brush||{selection:null};return t.extent=e.apply(this,arguments),t.dim=K,t}return o.move=function(t,a){t.selection?t.on("start.brush",function(){B(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){B(this,arguments).end()}).tween("brush",function(){var e=this,i=e.__brush,n=B(e,arguments),t=i.selection,o=K.input("function"==typeof a?a.apply(this,arguments):a,i.extent),r=si(t,o);function s(t){i.selection=1===t&&lo(o)?null:r(t),F.call(e),n.brush()}return t&&o?s:s(1)}):t.each(function(){var t=arguments,e=this.__brush,i=K.input("function"==typeof a?a.apply(this,t):a,e.extent),n=B(this,t).beforestart();un(this),e.selection=null==i||lo(i)?null:i,F.call(this),n.start().brush().end()})},r.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){Et(new Vn(o,t,K.output(this.state.selection)),i.apply,i,[t,this.that,this.args])}},o.extent=function(t){return arguments.length?(e="function"==typeof t?t:$n([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),o):e},o.filter=function(t){return arguments.length?(P="function"==typeof t?t:$n(!!t),o):P},o.handleSize=function(t){return arguments.length?(n=+t,o):n},o.on=function(){var t=i.on.apply(i,arguments);return t===i?o:t},o}var uo=Math.cos,ho=Math.sin,po=Math.PI,fo=po/2,go=2*po,mo=Math.max,vo=Array.prototype.slice;function yo(t){return function(){return t}}var bo=Math.PI,_o=2*bo,Eo=_o-1e-6;function wo(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Co(){return new wo}function To(t){return t.source}function xo(t){return t.target}function Do(t){return t.radius}function Io(t){return t.startAngle}function Oo(t){return t.endAngle}function Ro(){}function ko(t,e){var i=new Ro;if(t instanceof Ro)t.each(function(t,e){i.set(e,t)});else if(Array.isArray(t)){var n,o=-1,r=t.length;if(null==e)for(;++o<r;)i.set(o,t[o]);else for(;++o<r;)i.set(e(n=t[o],o,t),n)}else if(t)for(var s in t)i.set(s,t[s]);return i}function So(){return{}}function Ao(t,e,i){t[e]=i}function Mo(){return ko()}function No(t,e,i){t.set(e,i)}function Ko(){}wo.prototype=Co.prototype={constructor:wo,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+n)},bezierCurveTo:function(t,e,i,n,o,r){this._+="C"+ +t+","+ +e+","+ +i+","+ +n+","+(this._x1=+o)+","+(this._y1=+r)},arcTo:function(t,e,i,n,o){t=+t,e=+e,i=+i,n=+n,o=+o;var r=this._x1,s=this._y1,a=i-t,l=n-e,c=r-t,u=s-e,d=c*c+u*u;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(1e-6<d)if(1e-6<Math.abs(u*a-l*c)&&o){var h=i-r,p=n-s,f=a*a+l*l,g=h*h+p*p,m=Math.sqrt(f),v=Math.sqrt(d),y=o*Math.tan((bo-Math.acos((f+d-g)/(2*m*v)))/2),b=y/v,_=y/m;1e-6<Math.abs(b-1)&&(this._+="L"+(t+b*c)+","+(e+b*u)),this._+="A"+o+","+o+",0,0,"+ +(c*p<u*h)+","+(this._x1=t+_*a)+","+(this._y1=e+_*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,i,n,o,r){t=+t,e=+e;var s=(i=+i)*Math.cos(n),a=i*Math.sin(n),l=t+s,c=e+a,u=1^r,d=r?n-o:o-n;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+l+","+c:(1e-6<Math.abs(this._x1-l)||1e-6<Math.abs(this._y1-c))&&(this._+="L"+l+","+c),i&&(d<0&&(d=d%_o+_o),Eo<d?this._+="A"+i+","+i+",0,1,"+u+","+(t-s)+","+(e-a)+"A"+i+","+i+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):1e-6<d&&(this._+="A"+i+","+i+",0,"+ +(bo<=d)+","+u+","+(this._x1=t+i*Math.cos(o))+","+(this._y1=e+i*Math.sin(o))))},rect:function(t,e,i,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +n+"h"+-i+"Z"},toString:function(){return this._}},Ro.prototype=ko.prototype={constructor:Ro,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Lo=ko.prototype;function Po(t,e){var i=new Ko;if(t instanceof Ko)t.each(function(t){i.add(t)});else if(t){var n=-1,o=t.length;if(null==e)for(;++n<o;)i.add(t[n]);else for(;++n<o;)i.add(e(t[n],n,t))}return i}Ko.prototype=Po.prototype={constructor:Ko,has:Lo.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Lo.remove,clear:Lo.clear,values:Lo.keys,size:Lo.size,empty:Lo.empty,each:Lo.each};var Fo=Array.prototype.slice;function Bo(t,e){return t-e}function Ho(t){return function(){return t}}function zo(t,e){for(var i,n=-1,o=e.length;++n<o;)if(i=$o(t,e[n]))return i;return 0}function $o(t,e){for(var i=e[0],n=e[1],o=-1,r=0,s=t.length,a=s-1;r<s;a=r++){var l=t[r],c=l[0],u=l[1],d=t[a],h=d[0],p=d[1];if(_=b=y=v=void 0,function(t,e,i){return(e[0]-t[0])*(i[1]-t[1])==(i[0]-t[0])*(e[1]-t[1])}(f=l,g=d,m=e)&&(y=f[v=+(f[0]===g[0])],b=m[v],_=g[v],y<=b&&b<=_||_<=b&&b<=y))return 0;n<u!=n<p&&i<(h-c)*(n-u)/(p-u)+c&&(o=-o)}var f,g,m,v,y,b,_;return o}function Vo(){}var jo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Wo(){var h=1,p=1,r=b,s=e;function n(e){var t=r(e);if(Array.isArray(t))t=t.slice().sort(Bo);else{var i=l(e),n=i[0],o=i[1];t=D(n,o,t),t=x(Math.floor(n/t)*t,Math.floor(o/t)*t,t)}return t.map(function(t){return a(e,t)})}function a(e,i){var o=[],n=[];return function(t,e,a){var l,c,i,n,o,r,u=new Array,d=new Array;for(l=c=-1,n=t[0]>=e,jo[n<<1].forEach(s);++l<h-1;)i=n,n=t[l+1]>=e,jo[i|n<<1].forEach(s);for(jo[n<<0].forEach(s);++c<p-1;){for(l=-1,n=t[c*h+h]>=e,o=t[c*h]>=e,jo[n<<1|o<<2].forEach(s);++l<h-1;)i=n,n=t[c*h+h+l+1]>=e,r=o,o=t[c*h+l+1]>=e,jo[i|n<<1|o<<2|r<<3].forEach(s);jo[n|o<<3].forEach(s)}for(l=-1,o=t[c*h]>=e,jo[o<<2].forEach(s);++l<h-1;)r=o,o=t[c*h+l+1]>=e,jo[o<<2|r<<3].forEach(s);function s(t){var e,i,n=[t[0][0]+l,t[0][1]+c],o=[t[1][0]+l,t[1][1]+c],r=f(n),s=f(o);(e=d[r])?(i=u[s])?(delete d[e.end],delete u[i.start],e===i?(e.ring.push(o),a(e.ring)):u[e.start]=d[i.end]={start:e.start,end:i.end,ring:e.ring.concat(i.ring)}):(delete d[e.end],e.ring.push(o),d[e.end=s]=e):(e=u[s])?(i=d[r])?(delete u[e.start],delete d[i.end],e===i?(e.ring.push(o),a(e.ring)):u[i.start]=d[e.end]={start:i.start,end:e.end,ring:i.ring.concat(e.ring)}):(delete u[e.start],e.ring.unshift(n),u[e.start=r]=e):u[r]=d[s]={start:r,end:s,ring:[n,o]}}jo[o<<3].forEach(s)}(e,i,function(t){s(t,e,i),0<function(t){for(var e=0,i=t.length,n=t[i-1][1]*t[0][0]-t[i-1][0]*t[0][1];++e<i;)n+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return n}(t)?o.push([t]):n.push(t)}),n.forEach(function(t){for(var e,i=0,n=o.length;i<n;++i)if(-1!==zo((e=o[i])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:i,coordinates:o}}function f(t){return 2*t[0]+t[1]*(h+1)*4}function e(t,a,l){t.forEach(function(t){var e,i=t[0],n=t[1],o=0|i,r=0|n,s=a[r*h+o];0<i&&i<h&&o===i&&(e=a[r*h+o-1],t[0]=i+(l-e)/(s-e)-.5),0<n&&n<p&&r===n&&(e=a[(r-1)*h+o],t[1]=n+(l-e)/(s-e)-.5)})}return n.contour=a,n.size=function(t){if(!arguments.length)return[h,p];var e=Math.ceil(t[0]),i=Math.ceil(t[1]);if(!(0<e&&0<i))throw new Error("invalid size");return h=e,p=i,n},n.thresholds=function(t){return arguments.length?(r="function"==typeof t?t:Array.isArray(t)?Ho(Fo.call(t)):Ho(t),n):r},n.smooth=function(t){return arguments.length?(s=t?e:Vo,n):s===e},n}function Go(t,e,i){for(var n=t.width,o=t.height,r=1+(i<<1),s=0;s<o;++s)for(var a=0,l=0;a<n+i;++a)a<n&&(l+=t.data[a+s*n]),i<=a&&(r<=a&&(l-=t.data[a-r+s*n]),e.data[a-i+s*n]=l/Math.min(a+1,n-1+r-a,r))}function qo(t,e,i){for(var n=t.width,o=t.height,r=1+(i<<1),s=0;s<n;++s)for(var a=0,l=0;a<o+i;++a)a<o&&(l+=t.data[s+a*n]),i<=a&&(r<=a&&(l-=t.data[s+(a-r)*n]),e.data[s+(a-i)*n]=l/Math.min(a+1,o-1+r-a,r))}function Uo(t){return t[0]}function Yo(t){return t[1]}function Xo(){return 1}var Zo={},Qo={};function Jo(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function tr(r){var e=new RegExp('["'+r+"\n\r]"),d=r.charCodeAt(0);function i(n,t){var e,i=[],o=n.length,r=0,s=0,a=o<=0,l=!1;function c(){if(a)return Qo;if(l)return l=!1,Zo;var t,e,i=r;if(34===n.charCodeAt(i)){for(;r++<o&&34!==n.charCodeAt(r)||34===n.charCodeAt(++r););return(t=r)>=o?a=!0:10===(e=n.charCodeAt(r++))?l=!0:13===e&&(l=!0,10===n.charCodeAt(r)&&++r),n.slice(i+1,t-1).replace(/""/g,'"')}for(;r<o;){if(10===(e=n.charCodeAt(t=r++)))l=!0;else if(13===e)l=!0,10===n.charCodeAt(r)&&++r;else if(e!==d)continue;return n.slice(i,t)}return a=!0,n.slice(i,o)}for(10===n.charCodeAt(o-1)&&--o,13===n.charCodeAt(o-1)&&--o;(e=c())!==Qo;){for(var u=[];e!==Zo&&e!==Qo;)u.push(e),e=c();t&&null==(u=t(u,s++))||i.push(u)}return i}function n(t){return t.map(s).join(r)}function s(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,r){var s,a,e=i(t,function(t,e){if(s)return s(t,e-1);var i,n,o;a=t,s=r?(n=r,o=Jo(i=t),function(t,e){return n(o(t),e,i)}):Jo(t)});return e.columns=a||[],e},parseRows:i,format:function(t,i){return null==i&&(e=t,n=Object.create(null),o=[],e.forEach(function(t){for(var e in t)e in n||o.push(n[e]=e)}),i=o),[i.map(s).join(r)].concat(t.map(function(e){return i.map(function(t){return s(e[t])}).join(r)})).join("\n");var e,n,o},formatRows:function(t){return t.map(n).join("\n")}}}var er=tr(","),ir=er.parse,nr=er.parseRows,or=er.format,rr=er.formatRows,sr=tr("\t"),ar=sr.parse,lr=sr.parseRows,cr=sr.format,ur=sr.formatRows;function dr(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function hr(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function pr(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function fr(t,e){return fetch(t,e).then(pr)}function gr(n){return function(t,e,i){return 2===arguments.length&&"function"==typeof e&&(i=e,e=void 0),fr(t,e).then(function(t){return n(t,i)})}}var mr=gr(ir),vr=gr(ar);function yr(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function br(i){return function(t,e){return fr(t,e).then(function(t){return(new DOMParser).parseFromString(t,i)})}}var _r=br("application/xml"),Er=br("text/html"),wr=br("image/svg+xml");function Cr(t){return function(){return t}}function Tr(){return 1e-6*(Math.random()-.5)}function xr(t,e,i,n){if(isNaN(e)||isNaN(i))return t;var o,r,s,a,l,c,u,d,h,p=t._root,f={data:n},g=t._x0,m=t._y0,v=t._x1,y=t._y1;if(!p)return t._root=f,t;for(;p.length;)if((c=e>=(r=(g+v)/2))?g=r:v=r,(u=i>=(s=(m+y)/2))?m=s:y=s,!(p=(o=p)[d=u<<1|c]))return o[d]=f,t;if(a=+t._x.call(null,p.data),l=+t._y.call(null,p.data),e===a&&i===l)return f.next=p,o?o[d]=f:t._root=f,t;for(;o=o?o[d]=new Array(4):t._root=new Array(4),(c=e>=(r=(g+v)/2))?g=r:v=r,(u=i>=(s=(m+y)/2))?m=s:y=s,(d=u<<1|c)==(h=(s<=l)<<1|r<=a););return o[h]=p,o[d]=f,t}function Dr(t,e,i,n,o){this.node=t,this.x0=e,this.y0=i,this.x1=n,this.y1=o}function Ir(t){return t[0]}function Or(t){return t[1]}function Rr(t,e,i){var n=new kr(null==e?Ir:e,null==i?Or:i,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function kr(t,e,i,n,o,r){this._x=t,this._y=e,this._x0=i,this._y0=n,this._x1=o,this._y1=r,this._root=void 0}function Sr(t){for(var e={data:t.data},i=e;t=t.next;)i=i.next={data:t.data};return e}var Ar=Rr.prototype=kr.prototype;function Mr(t){return t.x+t.vx}function Nr(t){return t.y+t.vy}function Kr(t){return t.index}function Lr(t,e){var i=t.get(e);if(!i)throw new Error("missing: "+e);return i}function Pr(t){return t.x}function Fr(t){return t.y}Ar.copy=function(){var t,e,i=new kr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return i;if(!n.length)return i._root=Sr(n),i;for(t=[{source:n,target:i._root=new Array(4)}];n=t.pop();)for(var o=0;o<4;++o)(e=n.source[o])&&(e.length?t.push({source:e,target:n.target[o]=new Array(4)}):n.target[o]=Sr(e));return i},Ar.add=function(t){var e=+this._x.call(null,t),i=+this._y.call(null,t);return xr(this.cover(e,i),e,i,t)},Ar.addAll=function(t){var e,i,n,o,r=t.length,s=new Array(r),a=new Array(r),l=1/0,c=1/0,u=-1/0,d=-1/0;for(i=0;i<r;++i)isNaN(n=+this._x.call(null,e=t[i]))||isNaN(o=+this._y.call(null,e))||((s[i]=n)<l&&(l=n),u<n&&(u=n),(a[i]=o)<c&&(c=o),d<o&&(d=o));for(u<l&&(l=this._x0,u=this._x1),d<c&&(c=this._y0,d=this._y1),this.cover(l,c).cover(u,d),i=0;i<r;++i)xr(this,s[i],a[i],t[i]);return this},Ar.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,n=this._y0,o=this._x1,r=this._y1;if(isNaN(i))o=(i=Math.floor(t))+1,r=(n=Math.floor(e))+1;else{if(!(t<i||o<t||e<n||r<e))return this;var s,a,l=o-i,c=this._root;switch(a=(e<(n+r)/2)<<1|t<(i+o)/2){case 0:for(;(s=new Array(4))[a]=c,c=s,r=n+(l*=2),t>(o=i+l)||r<e;);break;case 1:for(;(s=new Array(4))[a]=c,c=s,r=n+(l*=2),(i=o-l)>t||r<e;);break;case 2:for(;(s=new Array(4))[a]=c,c=s,n=r-(l*=2),t>(o=i+l)||e<n;);break;case 3:for(;(s=new Array(4))[a]=c,c=s,n=r-(l*=2),(i=o-l)>t||e<n;);}this._root&&this._root.length&&(this._root=c)}return this._x0=i,this._y0=n,this._x1=o,this._y1=r,this},Ar.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},Ar.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ar.find=function(t,e,i){var n,o,r,s,a,l,c,u=this._x0,d=this._y0,h=this._x1,p=this._y1,f=[],g=this._root;for(g&&f.push(new Dr(g,u,d,h,p)),null==i?i=1/0:(u=t-i,d=e-i,h=t+i,p=e+i,i*=i);l=f.pop();)if(!(!(g=l.node)||(o=l.x0)>h||(r=l.y0)>p||(s=l.x1)<u||(a=l.y1)<d))if(g.length){var m=(o+s)/2,v=(r+a)/2;f.push(new Dr(g[3],m,v,s,a),new Dr(g[2],o,v,m,a),new Dr(g[1],m,r,s,v),new Dr(g[0],o,r,m,v)),(c=(v<=e)<<1|m<=t)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-c],f[f.length-1-c]=l)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),_=y*y+b*b;if(_<i){var E=Math.sqrt(i=_);u=t-E,d=e-E,h=t+E,p=e+E,n=g.data}}return n},Ar.remove=function(t){if(isNaN(r=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,i,n,o,r,s,a,l,c,u,d,h,p=this._root,f=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((c=r>=(a=(f+m)/2))?f=a:m=a,(u=s>=(l=(g+v)/2))?g=l:v=l,!(p=(e=p)[d=u<<1|c]))return this;if(!p.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(i=e,h=d)}for(;p.data!==t;)if(!(p=(n=p).next))return this;return(o=p.next)&&delete p.next,n?o?n.next=o:delete n.next:e?(o?e[d]=o:delete e[d],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(i?i[h]=p:this._root=p)):this._root=o,this},Ar.removeAll=function(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this},Ar.root=function(){return this._root},Ar.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},Ar.visit=function(t){var e,i,n,o,r,s,a=[],l=this._root;for(l&&a.push(new Dr(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,n=e.x0,o=e.y0,r=e.x1,s=e.y1)&&l.length){var c=(n+r)/2,u=(o+s)/2;(i=l[3])&&a.push(new Dr(i,c,u,r,s)),(i=l[2])&&a.push(new Dr(i,n,u,c,s)),(i=l[1])&&a.push(new Dr(i,c,o,r,u)),(i=l[0])&&a.push(new Dr(i,n,o,c,u))}return this},Ar.visitAfter=function(t){var e,i=[],n=[];for(this._root&&i.push(new Dr(this._root,this._x0,this._y0,this._x1,this._y1));e=i.pop();){var o=e.node;if(o.length){var r,s=e.x0,a=e.y0,l=e.x1,c=e.y1,u=(s+l)/2,d=(a+c)/2;(r=o[0])&&i.push(new Dr(r,s,a,u,d)),(r=o[1])&&i.push(new Dr(r,u,a,l,d)),(r=o[2])&&i.push(new Dr(r,s,d,u,c)),(r=o[3])&&i.push(new Dr(r,u,d,l,c))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Ar.x=function(t){return arguments.length?(this._x=t,this):this._x},Ar.y=function(t){return arguments.length?(this._y=t,this):this._y};var Br=Math.PI*(3-Math.sqrt(5));function Hr(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[1<n.length?n[0]+n.slice(2):n,+t.slice(i+1)]}function zr(t){return(t=Hr(Math.abs(t)))?t[1]:NaN}var $r,Vr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jr(t){return new Wr(t)}function Wr(t){if(!(e=Vr.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}function Gr(t,e){var i=Hr(t,e);if(!i)return t+"";var n=i[0],o=i[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}jr.prototype=Wr.prototype,Wr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var qr={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Gr(100*t,e)},r:Gr,s:function(t,e){var i=Hr(t,e);if(!i)return t+"";var n=i[0],o=i[1],r=o-($r=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=n.length;return r===s?n:s<r?n+new Array(r-s+1).join("0"):0<r?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+Hr(t,Math.max(0,e+r-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Ur(t){return t}var Yr,Xr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Zr(t){var a,l,e,w=t.grouping&&t.thousands?(a=t.grouping,l=t.thousands,function(t,e){for(var i=t.length,n=[],o=0,r=a[0],s=0;0<i&&0<r&&(e<s+r+1&&(r=Math.max(1,e-s)),n.push(t.substring(i-=r,i+r)),!((s+=r+1)>e));)r=a[o=(o+1)%a.length];return n.reverse().join(l)}):Ur,n=t.currency,C=t.decimal,T=t.numerals?(e=t.numerals,function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}):Ur,o=t.percent||"%";function s(t){var c=(t=jr(t)).fill,u=t.align,d=t.sign,e=t.symbol,h=t.zero,p=t.width,f=t.comma,g=t.precision,m=t.trim,v=t.type;"n"===v?(f=!0,v="g"):qr[v]||(null==g&&(g=12),m=!0,v="g"),(h||"0"===c&&"="===u)&&(h=!0,c="0",u="=");var y="$"===e?n[0]:"#"===e&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===e?n[1]:/[%p]/.test(v)?o:"",_=qr[v],E=/[defgprs%]/.test(v);function i(t){var e,i,n,o=y,r=b;if("c"===v)r=_(t)+r,t="";else{var s=(t=+t)<0;if(t=_(Math.abs(t),g),m&&(t=function(t){t:for(var e,i=t.length,n=1,o=-1;n<i;++n)switch(t[n]){case".":o=e=n;break;case"0":0===o&&(o=n),e=n;break;default:if(0<o){if(!+t[n])break t;o=0}}return 0<o?t.slice(0,o)+t.slice(e+1):t}(t)),s&&0==+t&&(s=!1),o=(s?"("===d?d:"-":"-"===d||"("===d?"":d)+o,r=("s"===v?Xr[8+$r/3]:"")+r+(s&&"("===d?")":""),E)for(e=-1,i=t.length;++e<i;)if((n=t.charCodeAt(e))<48||57<n){r=(46===n?C+t.slice(e+1):t.slice(e))+r,t=t.slice(0,e);break}}f&&!h&&(t=w(t,1/0));var a=o.length+t.length+r.length,l=a<p?new Array(p-a+1).join(c):"";switch(f&&h&&(t=w(l+t,l.length?p-r.length:1/0),l=""),u){case"<":t=o+t+r+l;break;case"=":t=o+l+t+r;break;case"^":t=l.slice(0,a=l.length>>1)+o+t+r+l.slice(a);break;default:t=l+o+t+r}return T(t)}return g=null==g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),i.toString=function(){return t+""},i}return{format:s,formatPrefix:function(t,e){var i=s(((t=jr(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(zr(e)/3))),o=Math.pow(10,-n),r=Xr[8+n/3];return function(t){return i(o*t)+r}}}}function Qr(t){return Yr=Zr(t),H.format=Yr.format,H.formatPrefix=Yr.formatPrefix,Yr}function Jr(t){return Math.max(0,-zr(Math.abs(t)))}function ts(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(zr(e)/3)))-zr(Math.abs(t)))}function es(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zr(e)-zr(t))+1}function is(){return new ns}function ns(){this.reset()}Qr({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),ns.prototype={constructor:ns,reset:function(){this.s=this.t=0},add:function(t){rs(os,t,this.t),rs(this,os.s,this.s),this.s?this.t+=os.t:this.s=os.t},valueOf:function(){return this.s}};var os=new ns;function rs(t,e,i){var n=t.s=e+i,o=n-e,r=n-o;t.t=e-r+(i-o)}var ss=1e-6,as=Math.PI,ls=as/2,cs=as/4,us=2*as,ds=180/as,hs=as/180,ps=Math.abs,fs=Math.atan,gs=Math.atan2,ms=Math.cos,vs=Math.ceil,ys=Math.exp,bs=Math.log,_s=Math.pow,Es=Math.sin,ws=Math.sign||function(t){return 0<t?1:t<0?-1:0},Cs=Math.sqrt,Ts=Math.tan;function xs(t){return 1<t?0:t<-1?as:Math.acos(t)}function Ds(t){return 1<t?ls:t<-1?-ls:Math.asin(t)}function Is(t){return(t=Es(t/2))*t}function Os(){}function Rs(t,e){t&&Ss.hasOwnProperty(t.type)&&Ss[t.type](t,e)}var ks={Feature:function(t,e){Rs(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,o=i.length;++n<o;)Rs(i[n].geometry,e)}},Ss={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,o=i.length;++n<o;)t=i[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){As(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,o=i.length;++n<o;)As(i[n],e,0)},Polygon:function(t,e){Ms(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,o=i.length;++n<o;)Ms(i[n],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,o=i.length;++n<o;)Rs(i[n],e)}};function As(t,e,i){var n,o=-1,r=t.length-i;for(e.lineStart();++o<r;)n=t[o],e.point(n[0],n[1],n[2]);e.lineEnd()}function Ms(t,e){var i=-1,n=t.length;for(e.polygonStart();++i<n;)As(t[i],e,1);e.polygonEnd()}function Ns(t,e){t&&ks.hasOwnProperty(t.type)?ks[t.type](t,e):Rs(t,e)}var Ks,Ls,Ps,Fs,Bs,Hs=is(),zs=is(),$s={point:Os,lineStart:Os,lineEnd:Os,polygonStart:function(){Hs.reset(),$s.lineStart=Vs,$s.lineEnd=js},polygonEnd:function(){var t=+Hs;zs.add(t<0?us+t:t),this.lineStart=this.lineEnd=this.point=Os},sphere:function(){zs.add(us)}};function Vs(){$s.point=Ws}function js(){Gs(Ks,Ls)}function Ws(t,e){$s.point=Gs,Ks=t,Ls=e,Ps=t*=hs,Fs=ms(e=(e*=hs)/2+cs),Bs=Es(e)}function Gs(t,e){var i=(t*=hs)-Ps,n=0<=i?1:-1,o=n*i,r=ms(e=(e*=hs)/2+cs),s=Es(e),a=Bs*s,l=Fs*r+a*ms(o),c=a*n*Es(o);Hs.add(gs(c,l)),Ps=t,Fs=r,Bs=s}function qs(t){return[gs(t[1],t[0]),Ds(t[2])]}function Us(t){var e=t[0],i=t[1],n=ms(i);return[n*ms(e),n*Es(e),Es(i)]}function Ys(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Xs(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Zs(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Qs(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Js(t){var e=Cs(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var ta,ea,ia,na,oa,ra,sa,aa,la,ca,ua,da,ha,pa,fa,ga,ma,va,ya,ba,_a,Ea,wa,Ca,Ta,xa,Da=is(),Ia={point:Oa,lineStart:ka,lineEnd:Sa,polygonStart:function(){Ia.point=Aa,Ia.lineStart=Ma,Ia.lineEnd=Na,Da.reset(),$s.polygonStart()},polygonEnd:function(){$s.polygonEnd(),Ia.point=Oa,Ia.lineStart=ka,Ia.lineEnd=Sa,Hs<0?(ta=-(ia=180),ea=-(na=90)):ss<Da?na=90:Da<-ss&&(ea=-90),ca[0]=ta,ca[1]=ia}};function Oa(t,e){la.push(ca=[ta=t,ia=t]),e<ea&&(ea=e),na<e&&(na=e)}function Ra(t,e){var i=Us([t*hs,e*hs]);if(aa){var n=Xs(aa,i),o=Xs([n[1],-n[0],0],n);Js(o),o=qs(o);var r,s=t-oa,a=0<s?1:-1,l=o[0]*ds*a,c=180<ps(s);c^(a*oa<l&&l<a*t)?(r=o[1]*ds)>na&&(na=r):c^(a*oa<(l=(l+360)%360-180)&&l<a*t)?(r=-o[1]*ds)<ea&&(ea=r):(e<ea&&(ea=e),na<e&&(na=e)),c?t<oa?Ka(ta,t)>Ka(ta,ia)&&(ia=t):Ka(t,ia)>Ka(ta,ia)&&(ta=t):ta<=ia?(t<ta&&(ta=t),ia<t&&(ia=t)):oa<t?Ka(ta,t)>Ka(ta,ia)&&(ia=t):Ka(t,ia)>Ka(ta,ia)&&(ta=t)}else la.push(ca=[ta=t,ia=t]);e<ea&&(ea=e),na<e&&(na=e),aa=i,oa=t}function ka(){Ia.point=Ra}function Sa(){ca[0]=ta,ca[1]=ia,Ia.point=Oa,aa=null}function Aa(t,e){if(aa){var i=t-oa;Da.add(180<ps(i)?i+(0<i?360:-360):i)}else ra=t,sa=e;$s.point(t,e),Ra(t,e)}function Ma(){$s.lineStart()}function Na(){Aa(ra,sa),$s.lineEnd(),ps(Da)>ss&&(ta=-(ia=180)),ca[0]=ta,ca[1]=ia,aa=null}function Ka(t,e){return(e-=t)<0?e+360:e}function La(t,e){return t[0]-e[0]}function Pa(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Fa={sphere:Os,point:Ba,lineStart:za,lineEnd:ja,polygonStart:function(){Fa.lineStart=Wa,Fa.lineEnd=Ga},polygonEnd:function(){Fa.lineStart=za,Fa.lineEnd=ja}};function Ba(t,e){t*=hs;var i=ms(e*=hs);Ha(i*ms(t),i*Es(t),Es(e))}function Ha(t,e,i){ha+=(t-ha)/++ua,pa+=(e-pa)/ua,fa+=(i-fa)/ua}function za(){Fa.point=$a}function $a(t,e){t*=hs;var i=ms(e*=hs);Ca=i*ms(t),Ta=i*Es(t),xa=Es(e),Fa.point=Va,Ha(Ca,Ta,xa)}function Va(t,e){t*=hs;var i=ms(e*=hs),n=i*ms(t),o=i*Es(t),r=Es(e),s=gs(Cs((s=Ta*r-xa*o)*s+(s=xa*n-Ca*r)*s+(s=Ca*o-Ta*n)*s),Ca*n+Ta*o+xa*r);da+=s,ga+=s*(Ca+(Ca=n)),ma+=s*(Ta+(Ta=o)),va+=s*(xa+(xa=r)),Ha(Ca,Ta,xa)}function ja(){Fa.point=Ba}function Wa(){Fa.point=qa}function Ga(){Ua(Ea,wa),Fa.point=Ba}function qa(t,e){Ea=t,wa=e,t*=hs,e*=hs,Fa.point=Ua;var i=ms(e);Ca=i*ms(t),Ta=i*Es(t),xa=Es(e),Ha(Ca,Ta,xa)}function Ua(t,e){t*=hs;var i=ms(e*=hs),n=i*ms(t),o=i*Es(t),r=Es(e),s=Ta*r-xa*o,a=xa*n-Ca*r,l=Ca*o-Ta*n,c=Cs(s*s+a*a+l*l),u=Ds(c),d=c&&-u/c;ya+=d*s,ba+=d*a,_a+=d*l,da+=u,ga+=u*(Ca+(Ca=n)),ma+=u*(Ta+(Ta=o)),va+=u*(xa+(xa=r)),Ha(Ca,Ta,xa)}function Ya(t){return function(){return t}}function Xa(i,n){function t(t,e){return t=i(t,e),n(t[0],t[1])}return i.invert&&n.invert&&(t.invert=function(t,e){return(t=n.invert(t,e))&&i.invert(t[0],t[1])}),t}function Za(t,e){return[ps(t)>as?t+Math.round(-t/us)*us:t,e]}function Qa(t,e,i){return(t%=us)?e||i?Xa(tl(t),el(e,i)):tl(t):e||i?el(e,i):Za}function Ja(i){return function(t,e){return[(t+=i)>as?t-us:t<-as?t+us:t,e]}}function tl(t){var e=Ja(t);return e.invert=Ja(-t),e}function el(t,e){var a=ms(t),l=Es(t),c=ms(e),u=Es(e);function i(t,e){var i=ms(e),n=ms(t)*i,o=Es(t)*i,r=Es(e),s=r*a+n*l;return[gs(o*c-s*u,n*a-r*l),Ds(s*c+o*u)]}return i.invert=function(t,e){var i=ms(e),n=ms(t)*i,o=Es(t)*i,r=Es(e),s=r*c-o*u;return[gs(o*c+r*u,n*a+s*l),Ds(s*a-n*l)]},i}function il(e){function t(t){return(t=e(t[0]*hs,t[1]*hs))[0]*=ds,t[1]*=ds,t}return e=Qa(e[0]*hs,e[1]*hs,2<e.length?e[2]*hs:0),t.invert=function(t){return(t=e.invert(t[0]*hs,t[1]*hs))[0]*=ds,t[1]*=ds,t},t}function nl(t,e,i,n,o,r){if(i){var s=ms(e),a=Es(e),l=n*i;null==o?(o=e+n*us,r=e-l/2):(o=ol(s,o),r=ol(s,r),(0<n?o<r:r<o)&&(o+=n*us));for(var c,u=o;0<n?r<u:u<r;u-=l)c=qs([s,-a*ms(u),-a*Es(u)]),t.point(c[0],c[1])}}function ol(t,e){(e=Us(e))[0]-=t,Js(e);var i=xs(-e[1]);return((-e[2]<0?-i:i)+us-ss)%us}function rl(){var i,e=[];return{point:function(t,e){i.push([t,e])},lineStart:function(){e.push(i=[])},lineEnd:Os,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],i=null,t}}}function sl(t,e){return ps(t[0]-e[0])<ss&&ps(t[1]-e[1])<ss}function al(t,e,i,n){this.x=t,this.z=e,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function ll(t,e,i,n,r){var s,o,a=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,i,n=t[0],o=t[e];if(sl(n,o)){for(r.lineStart(),s=0;s<e;++s)r.point((n=t[s])[0],n[1]);r.lineEnd()}else a.push(i=new al(n,t,null,!0)),l.push(i.o=new al(n,null,i,!1)),a.push(i=new al(o,t,null,!1)),l.push(i.o=new al(o,null,i,!0))}}),a.length){for(l.sort(e),cl(a),cl(l),s=0,o=l.length;s<o;++s)l[s].e=i=!i;for(var c,u,d=a[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(s=0,o=c.length;s<o;++s)r.point((u=c[s])[0],u[1]);else n(h.x,h.n.x,1,r);h=h.n}else{if(p)for(c=h.p.z,s=c.length-1;0<=s;--s)r.point((u=c[s])[0],u[1]);else n(h.x,h.p.x,-1,r);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);r.lineEnd()}}}function cl(t){if(e=t.length){for(var e,i,n=0,o=t[0];++n<e;)o.n=i=t[n],i.p=o,o=i;o.n=i=t[0],i.p=o}}Za.invert=Za;var ul=is();function dl(t,e){var i=e[0],n=e[1],o=Es(n),r=[Es(i),-ms(i),0],s=0,a=0;ul.reset(),1===o?n=ls+ss:-1===o&&(n=-ls-ss);for(var l=0,c=t.length;l<c;++l)if(d=(u=t[l]).length)for(var u,d,h=u[d-1],p=h[0],f=h[1]/2+cs,g=Es(f),m=ms(f),v=0;v<d;++v,p=b,g=E,m=w,h=y){var y=u[v],b=y[0],_=y[1]/2+cs,E=Es(_),w=ms(_),C=b-p,T=0<=C?1:-1,x=T*C,D=as<x,I=g*E;if(ul.add(gs(I*T*Es(x),m*w+I*ms(x))),s+=D?C+T*us:C,D^i<=p^i<=b){var O=Xs(Us(h),Us(y));Js(O);var R=Xs(r,O);Js(R);var k=(D^0<=C?-1:1)*Ds(R[2]);(k<n||n===k&&(O[0]||O[1]))&&(a+=D^0<=C?1:-1)}}return(s<-ss||s<ss&&ul<-ss)^1&a}function hl(m,v,y,b){return function(a){var l,c,u,i=v(a),d=rl(),h=v(d),p=!1,e={point:n,lineStart:o,lineEnd:r,polygonStart:function(){e.point=f,e.lineStart=s,e.lineEnd=g,c=[],l=[]},polygonEnd:function(){e.point=n,e.lineStart=o,e.lineEnd=r,c=I(c);var t=dl(l,b);c.length?(p||(a.polygonStart(),p=!0),ll(c,fl,t,y,a)):t&&(p||(a.polygonStart(),p=!0),a.lineStart(),y(null,null,1,a),a.lineEnd()),p&&(a.polygonEnd(),p=!1),c=l=null},sphere:function(){a.polygonStart(),a.lineStart(),y(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function n(t,e){m(t,e)&&a.point(t,e)}function t(t,e){i.point(t,e)}function o(){e.point=t,i.lineStart()}function r(){e.point=n,i.lineEnd()}function f(t,e){u.push([t,e]),h.point(t,e)}function s(){h.lineStart(),u=[]}function g(){f(u[0][0],u[0][1]),h.lineEnd();var t,e,i,n,o=h.clean(),r=d.result(),s=r.length;if(u.pop(),l.push(u),u=null,s)if(1&o){if(0<(e=(i=r[0]).length-1)){for(p||(a.polygonStart(),p=!0),a.lineStart(),t=0;t<e;++t)a.point((n=i[t])[0],n[1]);a.lineEnd()}}else 1<s&&2&o&&r.push(r.pop().concat(r.shift())),c.push(r.filter(pl))}return e}}function pl(t){return 1<t.length}function fl(t,e){return((t=t.x)[0]<0?t[1]-ls-ss:ls-t[1])-((e=e.x)[0]<0?e[1]-ls-ss:ls-e[1])}var gl=hl(function(){return!0},function(d){var h,p=NaN,f=NaN,g=NaN;return{lineStart:function(){d.lineStart(),h=1},point:function(t,e){var i,n,o,r,s,a,l,c=0<t?as:-as,u=ps(t-p);ps(u-as)<ss?(d.point(p,f=0<(f+e)/2?ls:-ls),d.point(g,f),d.lineEnd(),d.lineStart(),d.point(c,f),d.point(t,f),h=0):g!==c&&as<=u&&(ps(p-g)<ss&&(p-=g*ss),ps(t-c)<ss&&(t-=c*ss),n=f,r=e,l=Es((i=p)-(o=t)),f=ps(l)>ss?fs((Es(n)*(a=ms(r))*Es(o)-Es(r)*(s=ms(n))*Es(i))/(s*a*l)):(n+r)/2,d.point(g,f),d.lineEnd(),d.lineStart(),d.point(c,f),h=0),d.point(p=t,f=e),g=c},lineEnd:function(){d.lineEnd(),p=f=NaN},clean:function(){return 2-h}}},function(t,e,i,n){var o;if(null==t)o=i*ls,n.point(-as,o),n.point(0,o),n.point(as,o),n.point(as,0),n.point(as,-o),n.point(0,-o),n.point(-as,-o),n.point(-as,0),n.point(-as,o);else if(ps(t[0]-e[0])>ss){var r=t[0]<e[0]?as:-as;o=i*r/2,n.point(-r,o),n.point(0,o),n.point(r,o)}else n.point(e[0],e[1])},[-as,-ls]);function ml(o){var D=ms(o),r=6*hs,p=0<D,f=ps(D)>ss;function g(t,e){return ms(t)*ms(e)>D}function m(t,e,i){var n=[1,0,0],o=Xs(Us(t),Us(e)),r=Ys(o,o),s=o[0],a=r-s*s;if(!a)return!i&&t;var l=D*r/a,c=-D*s/a,u=Xs(n,o),d=Qs(n,l);Zs(d,Qs(o,c));var h=u,p=Ys(d,h),f=Ys(h,h),g=p*p-f*(Ys(d,d)-1);if(!(g<0)){var m=Cs(g),v=Qs(h,(-p-m)/f);if(Zs(v,d),v=qs(v),!i)return v;var y,b=t[0],_=e[0],E=t[1],w=e[1];_<b&&(y=b,b=_,_=y);var C=_-b,T=ps(C-as)<ss;if(!T&&w<E&&(y=E,E=w,w=y),T||C<ss?T?0<E+w^v[1]<(ps(v[0]-b)<ss?E:w):E<=v[1]&&v[1]<=w:as<C^(b<=v[0]&&v[0]<=_)){var x=Qs(h,(-p+m)/f);return Zs(x,d),[v,qs(x)]}}}function v(t,e){var i=p?o:as-o,n=0;return t<-i?n|=1:i<t&&(n|=2),e<-i?n|=4:i<e&&(n|=8),n}return hl(g,function(a){var l,c,u,d,h;return{lineStart:function(){d=u=!1,h=1},point:function(t,e){var i,n=[t,e],o=g(t,e),r=p?o?0:v(t,e):o?v(t+(t<0?as:-as),e):0;if(!l&&(d=u=o)&&a.lineStart(),o===u||(i=m(l,n))&&!sl(l,i)&&!sl(n,i)||(n[0]+=ss,n[1]+=ss,o=g(n[0],n[1])),o!==u)h=0,o?(a.lineStart(),i=m(n,l),a.point(i[0],i[1])):(i=m(l,n),a.point(i[0],i[1]),a.lineEnd()),l=i;else if(f&&l&&p^o){var s;r&c||!(s=m(n,l,!0))||(h=0,p?(a.lineStart(),a.point(s[0][0],s[0][1]),a.point(s[1][0],s[1][1]),a.lineEnd()):(a.point(s[1][0],s[1][1]),a.lineEnd(),a.lineStart(),a.point(s[0][0],s[0][1])))}!o||l&&sl(l,n)||a.point(n[0],n[1]),l=n,u=o,c=r},lineEnd:function(){u&&a.lineEnd(),l=null},clean:function(){return h|(d&&u)<<1}}},function(t,e,i,n){nl(n,o,r,i,t,e)},p?[0,-o]:[-as,o-as])}var vl=1e9,yl=-vl;function bl(v,y,b,_){function E(t,e){return v<=t&&t<=b&&y<=e&&e<=_}function w(t,e,i,n){var o=0,r=0;if(null==t||(o=s(t,i))!==(r=s(e,i))||a(t,e)<0^0<i)for(;n.point(0===o||3===o?v:b,1<o?_:y),(o=(o+i+4)%4)!==r;);else n.point(e[0],e[1])}function s(t,e){return ps(t[0]-v)<ss?0<e?0:3:ps(t[0]-b)<ss?0<e?2:1:ps(t[1]-y)<ss?0<e?1:0:0<e?3:2}function C(t,e){return a(t.x,e.x)}function a(t,e){var i=s(t,1),n=s(e,1);return i!==n?i-n:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}return function(n){var o,d,r,s,a,l,c,u,h,p,f,g=n,t=rl(),e={point:i,lineStart:function(){e.point=m,d&&d.push(r=[]),h=!(p=!0),c=u=NaN},lineEnd:function(){o&&(m(s,a),l&&h&&t.rejoin(),o.push(t.result())),e.point=i,h&&g.lineEnd()},polygonStart:function(){g=t,o=[],d=[],f=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,i=d.length;e<i;++e)for(var n,o,r=d[e],s=1,a=r.length,l=r[0],c=l[0],u=l[1];s<a;++s)n=c,o=u,c=(l=r[s])[0],u=l[1],o<=_?_<u&&(u-o)*(v-n)<(c-n)*(_-o)&&++t:u<=_&&(c-n)*(_-o)<(u-o)*(v-n)&&--t;return t}(),e=f&&t,i=(o=I(o)).length;(e||i)&&(n.polygonStart(),e&&(n.lineStart(),w(null,null,1,n),n.lineEnd()),i&&ll(o,C,t,w,n),n.polygonEnd()),g=n,o=d=r=null}};function i(t,e){E(t,e)&&g.point(t,e)}function m(t,e){var i=E(t,e);if(d&&r.push([t,e]),p)s=t,a=e,p=!1,(l=i)&&(g.lineStart(),g.point(t,e));else if(i&&h)g.point(t,e);else{var n=[c=Math.max(yl,Math.min(vl,c)),u=Math.max(yl,Math.min(vl,u))],o=[t=Math.max(yl,Math.min(vl,t)),e=Math.max(yl,Math.min(vl,e))];!function(t,e,i,n,o,r){var s,a=t[0],l=t[1],c=0,u=1,d=e[0]-a,h=e[1]-l;if(s=i-a,d||!(0<s)){if(s/=d,d<0){if(s<c)return;s<u&&(u=s)}else if(0<d){if(u<s)return;c<s&&(c=s)}if(s=o-a,d||!(s<0)){if(s/=d,d<0){if(u<s)return;c<s&&(c=s)}else if(0<d){if(s<c)return;s<u&&(u=s)}if(s=n-l,h||!(0<s)){if(s/=h,h<0){if(s<c)return;s<u&&(u=s)}else if(0<h){if(u<s)return;c<s&&(c=s)}if(s=r-l,h||!(s<0)){if(s/=h,h<0){if(u<s)return;c<s&&(c=s)}else if(0<h){if(s<c)return;s<u&&(u=s)}return 0<c&&(t[0]=a+c*d,t[1]=l+c*h),u<1&&(e[0]=a+u*d,e[1]=l+u*h),!0}}}}}(n,o,v,y,b,_)?i&&(g.lineStart(),g.point(t,e),f=!1):(h||(g.lineStart(),g.point(n[0],n[1])),g.point(o[0],o[1]),i||g.lineEnd(),f=!1)}c=t,u=e,h=i}return e}}var _l,El,wl,Cl=is(),Tl={sphere:Os,point:Os,lineStart:function(){Tl.point=Dl,Tl.lineEnd=xl},lineEnd:Os,polygonStart:Os,polygonEnd:Os};function xl(){Tl.point=Tl.lineEnd=Os}function Dl(t,e){_l=t*=hs,El=Es(e*=hs),wl=ms(e),Tl.point=Il}function Il(t,e){t*=hs;var i=Es(e*=hs),n=ms(e),o=ps(t-_l),r=ms(o),s=n*Es(o),a=wl*i-El*n*r,l=El*i+wl*n*r;Cl.add(gs(Cs(s*s+a*a),l)),_l=t,El=i,wl=n}function Ol(t){return Cl.reset(),Ns(t,Tl),+Cl}var Rl=[null,null],kl={type:"LineString",coordinates:Rl};function Sl(t,e){return Rl[0]=t,Rl[1]=e,Ol(kl)}var Al={Feature:function(t,e){return Nl(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,o=i.length;++n<o;)if(Nl(i[n].geometry,e))return!0;return!1}},Ml={Sphere:function(){return!0},Point:function(t,e){return Kl(t.coordinates,e)},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,o=i.length;++n<o;)if(Kl(i[n],e))return!0;return!1},LineString:function(t,e){return Ll(t.coordinates,e)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,o=i.length;++n<o;)if(Ll(i[n],e))return!0;return!1},Polygon:function(t,e){return Pl(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,o=i.length;++n<o;)if(Pl(i[n],e))return!0;return!1},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,o=i.length;++n<o;)if(Nl(i[n],e))return!0;return!1}};function Nl(t,e){return!(!t||!Ml.hasOwnProperty(t.type))&&Ml[t.type](t,e)}function Kl(t,e){return 0===Sl(t,e)}function Ll(t,e){var i=Sl(t[0],t[1]);return Sl(t[0],e)+Sl(e,t[1])<=i+ss}function Pl(t,e){return!!dl(t.map(Fl),Bl(e))}function Fl(t){return(t=t.map(Bl)).pop(),t}function Bl(t){return[t[0]*hs,t[1]*hs]}function Hl(t,e,i){var n=x(t,e-ss,i).concat(e);return function(e){return n.map(function(t){return[e,t]})}}function zl(t,e,i){var n=x(t,e-ss,i).concat(e);return function(e){return n.map(function(t){return[t,e]})}}function $l(){var e,i,n,o,r,s,a,l,c,u,d,h,p=10,f=p,g=90,m=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:t()}}function t(){return x(vs(o/g)*g,n,g).map(d).concat(x(vs(l/m)*m,a,m).map(h)).concat(x(vs(i/p)*p,e,p).filter(function(t){return ps(t%g)>ss}).map(c)).concat(x(vs(s/f)*f,r,f).filter(function(t){return ps(t%m)>ss}).map(u))}return y.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(h(a).slice(1),d(n).reverse().slice(1),h(l).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(o=+t[0][0],n=+t[1][0],l=+t[0][1],a=+t[1][1],n<o&&(t=o,o=n,n=t),a<l&&(t=l,l=a,a=t),y.precision(v)):[[o,l],[n,a]]},y.extentMinor=function(t){return arguments.length?(i=+t[0][0],e=+t[1][0],s=+t[0][1],r=+t[1][1],e<i&&(t=i,i=e,e=t),r<s&&(t=s,s=r,r=t),y.precision(v)):[[i,s],[e,r]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(g=+t[0],m=+t[1],y):[g,m]},y.stepMinor=function(t){return arguments.length?(p=+t[0],f=+t[1],y):[p,f]},y.precision=function(t){return arguments.length?(v=+t,c=Hl(s,r,90),u=zl(i,e,v),d=Hl(l,a,90),h=zl(o,n,v),y):v},y.extentMajor([[-180,-90+ss],[180,90-ss]]).extentMinor([[-180,-80-ss],[180,80+ss]])}function Vl(t){return t}var jl,Wl,Gl,ql,Ul=is(),Yl=is(),Xl={point:Os,lineStart:Os,lineEnd:Os,polygonStart:function(){Xl.lineStart=Zl,Xl.lineEnd=tc},polygonEnd:function(){Xl.lineStart=Xl.lineEnd=Xl.point=Os,Ul.add(ps(Yl)),Yl.reset()},result:function(){var t=Ul/2;return Ul.reset(),t}};function Zl(){Xl.point=Ql}function Ql(t,e){Xl.point=Jl,jl=Gl=t,Wl=ql=e}function Jl(t,e){Yl.add(ql*t-Gl*e),Gl=t,ql=e}function tc(){Jl(jl,Wl)}var ec,ic,nc,oc,rc=1/0,sc=rc,ac=-rc,lc=ac,cc={point:function(t,e){t<rc&&(rc=t),ac<t&&(ac=t),e<sc&&(sc=e),lc<e&&(lc=e)},lineStart:Os,lineEnd:Os,polygonStart:Os,polygonEnd:Os,result:function(){var t=[[rc,sc],[ac,lc]];return ac=lc=-(sc=rc=1/0),t}},uc=0,dc=0,hc=0,pc=0,fc=0,gc=0,mc=0,vc=0,yc=0,bc={point:_c,lineStart:Ec,lineEnd:Tc,polygonStart:function(){bc.lineStart=xc,bc.lineEnd=Dc},polygonEnd:function(){bc.point=_c,bc.lineStart=Ec,bc.lineEnd=Tc},result:function(){var t=yc?[mc/yc,vc/yc]:gc?[pc/gc,fc/gc]:hc?[uc/hc,dc/hc]:[NaN,NaN];return uc=dc=hc=pc=fc=gc=mc=vc=yc=0,t}};function _c(t,e){uc+=t,dc+=e,++hc}function Ec(){bc.point=wc}function wc(t,e){bc.point=Cc,_c(nc=t,oc=e)}function Cc(t,e){var i=t-nc,n=e-oc,o=Cs(i*i+n*n);pc+=o*(nc+t)/2,fc+=o*(oc+e)/2,gc+=o,_c(nc=t,oc=e)}function Tc(){bc.point=_c}function xc(){bc.point=Ic}function Dc(){Oc(ec,ic)}function Ic(t,e){bc.point=Oc,_c(ec=nc=t,ic=oc=e)}function Oc(t,e){var i=t-nc,n=e-oc,o=Cs(i*i+n*n);pc+=o*(nc+t)/2,fc+=o*(oc+e)/2,gc+=o,mc+=(o=oc*t-nc*e)*(nc+t),vc+=o*(oc+e),yc+=3*o,_c(nc=t,oc=e)}function Rc(t){this._context=t}Rc.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,us)}},result:Os};var kc,Sc,Ac,Mc,Nc,Kc=is(),Lc={point:Os,lineStart:function(){Lc.point=Pc},lineEnd:function(){kc&&Fc(Sc,Ac),Lc.point=Os},polygonStart:function(){kc=!0},polygonEnd:function(){kc=null},result:function(){var t=+Kc;return Kc.reset(),t}};function Pc(t,e){Lc.point=Fc,Sc=Mc=t,Ac=Nc=e}function Fc(t,e){Mc-=t,Nc-=e,Kc.add(Cs(Mc*Mc+Nc*Nc)),Mc=t,Nc=e}function Bc(){this._string=[]}function Hc(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function zc(n){return function(t){var e=new $c;for(var i in n)e[i]=n[i];return e.stream=t,e}}function $c(){}function Vc(t,e,i){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=n&&t.clipExtent(null),Ns(i,t.stream(cc)),e(cc.result()),null!=n&&t.clipExtent(n),t}function jc(s,a,t){return Vc(s,function(t){var e=a[1][0]-a[0][0],i=a[1][1]-a[0][1],n=Math.min(e/(t[1][0]-t[0][0]),i/(t[1][1]-t[0][1])),o=+a[0][0]+(e-n*(t[1][0]+t[0][0]))/2,r=+a[0][1]+(i-n*(t[1][1]+t[0][1]))/2;s.scale(150*n).translate([o,r])},t)}function Wc(t,e,i){return jc(t,[[0,0],e],i)}function Gc(r,s,t){return Vc(r,function(t){var e=+s,i=e/(t[1][0]-t[0][0]),n=(e-i*(t[1][0]+t[0][0]))/2,o=-i*t[0][1];r.scale(150*i).translate([n,o])},t)}function qc(r,s,t){return Vc(r,function(t){var e=+s,i=e/(t[1][1]-t[0][1]),n=-i*t[0][0],o=(e-i*(t[1][1]+t[0][1]))/2;r.scale(150*i).translate([n,o])},t)}Bc.prototype={_radius:4.5,_circle:Hc(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Hc(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},$c.prototype={constructor:$c,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Uc=16,Yc=ms(30*hs);function Xc(t,e){return+e?(R=t,k=e,function(o){var i,n,r,s,a,l,c,u,d,h,p,f,g={point:t,lineStart:e,lineEnd:v,polygonStart:function(){o.polygonStart(),g.lineStart=y},polygonEnd:function(){o.polygonEnd(),g.lineStart=e}};function t(t,e){t=R(t,e),o.point(t[0],t[1])}function e(){u=NaN,g.point=m,o.lineStart()}function m(t,e){var i=Us([t,e]),n=R(t,e);S(u,d,c,h,p,f,u=n[0],d=n[1],c=t,h=i[0],p=i[1],f=i[2],Uc,o),o.point(u,d)}function v(){g.point=t,o.lineEnd()}function y(){e(),g.point=b,g.lineEnd=_}function b(t,e){m(i=t,e),n=u,r=d,s=h,a=p,l=f,g.point=m}function _(){S(u,d,c,h,p,f,n,r,i,s,a,l,Uc,o),(g.lineEnd=v)()}return g}):(i=t,zc({point:function(t,e){t=i(t,e),this.stream.point(t[0],t[1])}}));var i,R,k;function S(t,e,i,n,o,r,s,a,l,c,u,d,h,p){var f=s-t,g=a-e,m=f*f+g*g;if(4*k<m&&h--){var v=n+c,y=o+u,b=r+d,_=Cs(v*v+y*y+b*b),E=Ds(b/=_),w=ps(ps(b)-1)<ss||ps(i-l)<ss?(i+l)/2:gs(y,v),C=R(w,E),T=C[0],x=C[1],D=T-t,I=x-e,O=g*D-f*I;(k<O*O/m||.3<ps((f*D+g*I)/m-.5)||n*c+o*u+r*d<Yc)&&(S(t,e,i,n,o,r,T,x,w,v/=_,y/=_,b,h,p),p.point(T,x),S(T,x,w,v,y,b,s,a,l,c,u,d,h,p))}}}var Zc=zc({point:function(t,e){this.stream.point(t*hs,e*hs)}});function Qc(t,i,n,e){var o=ms(e),r=Es(e),s=o*t,a=r*t,l=o/t,c=r/t,u=(r*n-o*i)/t,d=(r*i+o*n)/t;function h(t,e){return[s*t-a*e+i,n-a*t-s*e]}return h.invert=function(t,e){return[l*t-c*e+u,d-c*t-l*e]},h}function Jc(t){return tu(function(){return t})()}function tu(t){var i,o,e,n,r,s,a,l,c,u,d=150,h=480,p=250,f=0,g=0,m=0,v=0,y=0,b=0,_=null,E=gl,w=null,C=Vl,T=.5;function x(t){return l(t[0]*hs,t[1]*hs)}function D(t){return(t=l.invert(t[0],t[1]))&&[t[0]*ds,t[1]*ds]}function I(){var t=Qc(d,0,0,b).apply(null,i(f,g)),e=(b?Qc:function(i,n,o){function t(t,e){return[n+i*t,o-i*e]}return t.invert=function(t,e){return[(t-n)/i,(o-e)/i]},t})(d,h-t[0],p-t[1],b);return o=Qa(m,v,y),a=Xa(i,e),l=Xa(o,a),s=Xc(a,T),O()}function O(){return c=u=null,x}return x.stream=function(t){return c&&u===t?c:c=Zc((n=o,zc({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})(E(s(C(u=t))))));var n},x.preclip=function(t){return arguments.length?(E=t,_=void 0,O()):E},x.postclip=function(t){return arguments.length?(C=t,w=e=n=r=null,O()):C},x.clipAngle=function(t){return arguments.length?(E=+t?ml(_=t*hs):(_=null,gl),O()):_*ds},x.clipExtent=function(t){return arguments.length?(C=null==t?(w=e=n=r=null,Vl):bl(w=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),O()):null==w?null:[[w,e],[n,r]]},x.scale=function(t){return arguments.length?(d=+t,I()):d},x.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],I()):[h,p]},x.center=function(t){return arguments.length?(f=t[0]%360*hs,g=t[1]%360*hs,I()):[f*ds,g*ds]},x.rotate=function(t){return arguments.length?(m=t[0]%360*hs,v=t[1]%360*hs,y=2<t.length?t[2]%360*hs:0,I()):[m*ds,v*ds,y*ds]},x.angle=function(t){return arguments.length?(b=t%360*hs,I()):b*ds},x.precision=function(t){return arguments.length?(s=Xc(a,T=t*t),O()):Cs(T)},x.fitExtent=function(t,e){return jc(x,t,e)},x.fitSize=function(t,e){return Wc(x,t,e)},x.fitWidth=function(t,e){return Gc(x,t,e)},x.fitHeight=function(t,e){return qc(x,t,e)},function(){return i=t.apply(this,arguments),x.invert=i.invert&&D,I()}}function eu(t){var e=0,i=as/3,n=tu(t),o=n(e,i);return o.parallels=function(t){return arguments.length?n(e=t[0]*hs,i=t[1]*hs):[e*ds,i*ds]},o}function iu(t,e){var i,n=Es(t),o=(n+Es(e))/2;if(ps(o)<ss)return i=ms(t),r.invert=function(t,e){return[t/i,Ds(e*i)]},r;function r(t,e){return[t*i,Es(e)/i]}var s=1+n*(2*o-n),a=Cs(s)/o;function l(t,e){var i=Cs(s-2*o*Es(e))/o;return[i*Es(t*=o),a-i*ms(t)]}return l.invert=function(t,e){var i=a-e;return[gs(t,ps(i))/o*ws(i),Ds((s-(t*t+i*i)*o*o)/(2*o))]},l}function nu(){return eu(iu).scale(155.424).center([0,33.6442])}function ou(){return nu().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ru(r){return function(t,e){var i=ms(t),n=ms(e),o=r(i*n);return[o*n*Es(t),o*Es(e)]}}function su(s){return function(t,e){var i=Cs(t*t+e*e),n=s(i),o=Es(n),r=ms(n);return[gs(t*o,i*r),Ds(i&&e*o/i)]}}var au=ru(function(t){return Cs(2/(1+t))});au.invert=su(function(t){return 2*Ds(t/2)});var lu=ru(function(t){return(t=xs(t))&&t/Es(t)});function cu(t,e){return[t,bs(Ts((ls+e)/2))]}function uu(i){var n,o,r,s=Jc(i),e=s.center,a=s.scale,l=s.translate,c=s.clipExtent,u=null;function d(){var t=as*a(),e=s(il(s.rotate()).invert([0,0]));return c(null==u?[[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]]:i===cu?[[Math.max(e[0]-t,u),n],[Math.min(e[0]+t,o),r]]:[[u,Math.max(e[1]-t,n)],[o,Math.min(e[1]+t,r)]])}return s.scale=function(t){return arguments.length?(a(t),d()):a()},s.translate=function(t){return arguments.length?(l(t),d()):l()},s.center=function(t){return arguments.length?(e(t),d()):e()},s.clipExtent=function(t){return arguments.length?(null==t?u=n=o=r=null:(u=+t[0][0],n=+t[0][1],o=+t[1][0],r=+t[1][1]),d()):null==u?null:[[u,n],[o,r]]},d()}function du(t){return Ts((ls+t)/2)}function hu(t,e){var i=ms(t),o=t===e?Es(t):bs(i/ms(e))/bs(du(e)/du(t)),r=i*_s(du(t),o)/o;if(!o)return cu;function n(t,e){0<r?e<-ls+ss&&(e=-ls+ss):ls-ss<e&&(e=ls-ss);var i=r/_s(du(e),o);return[i*Es(o*t),r-i*ms(o*t)]}return n.invert=function(t,e){var i=r-e,n=ws(o)*Cs(t*t+i*i);return[gs(t,ps(i))/o*ws(i),2*fs(_s(r/n,1/o))-ls]},n}function pu(t,e){return[t,e]}function fu(t,e){var i=ms(t),o=t===e?Es(t):(i-ms(e))/(e-t),r=i/o+t;if(ps(o)<ss)return pu;function n(t,e){var i=r-e,n=o*t;return[i*Es(n),r-i*ms(n)]}return n.invert=function(t,e){var i=r-e;return[gs(t,ps(i))/o*ws(i),r-ws(o)*Cs(t*t+i*i)]},n}lu.invert=su(function(t){return t}),cu.invert=function(t,e){return[t,2*fs(ys(e))-ls]},pu.invert=pu;var gu=1.340264,mu=-.081106,vu=893e-6,yu=.003796,bu=Cs(3)/2;function _u(t,e){var i=Ds(bu*Es(e)),n=i*i,o=n*n*n;return[t*ms(i)/(bu*(gu+3*mu*n+o*(7*vu+9*yu*n))),i*(gu+mu*n+o*(vu+yu*n))]}function Eu(t,e){var i=ms(e),n=ms(t)*i;return[i*Es(t)/n,Es(e)/n]}function wu(i,n,o,r){return 1===i&&1===n&&0===o&&0===r?Vl:zc({point:function(t,e){this.stream.point(t*i+o,e*n+r)}})}function Cu(t,e){var i=e*e,n=i*i;return[t*(.8707-.131979*i+n*(n*(.003971*i-.001529*n)-.013791)),e*(1.007226+i*(.015085+n*(.028874*i-.044475-.005916*n)))]}function Tu(t,e){return[ms(e)*Es(t),Es(e)]}function xu(t,e){var i=ms(e),n=1+ms(t)*i;return[i*Es(t)/n,Es(e)/n]}function Du(t,e){return[bs(Ts((ls+e)/2)),-t]}function Iu(t,e){return t.parent===e.parent?1:2}function Ou(t,e){return t+e.x}function Ru(t,e){return Math.max(t,e.y)}function ku(t){var e=0,i=t.children,n=i&&i.length;if(n)for(;0<=--n;)e+=i[n].value;else e=1;t.value=e}function Su(t,e){var i,n,o,r,s,a=new Ku(t),l=+t.value&&(a.value=t.value),c=[a];for(null==e&&(e=Au);i=c.pop();)if(l&&(i.value=+i.data.value),(o=e(i.data))&&(s=o.length))for(i.children=new Array(s),r=s-1;0<=r;--r)c.push(n=i.children[r]=new Ku(o[r])),n.parent=i,n.depth=i.depth+1;return a.eachBefore(Nu)}function Au(t){return t.children}function Mu(t){t.data=t.data.data}function Nu(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function Ku(t){this.data=t,this.depth=this.height=0,this.parent=null}_u.invert=function(t,e){for(var i,n=e,o=n*n,r=o*o*o,s=0;s<12&&(r=(o=(n-=i=(n*(gu+mu*o+r*(vu+yu*o))-e)/(gu+3*mu*o+r*(7*vu+9*yu*o)))*n)*o*o,!(ps(i)<1e-12));++s);return[bu*t*(gu+3*mu*o+r*(7*vu+9*yu*o))/ms(n),Ds(Es(n)/bu)]},Eu.invert=su(fs),Cu.invert=function(t,e){var i,n=e,o=25;do{var r=n*n,s=r*r;n-=i=(n*(1.007226+r*(.015085+s*(.028874*r-.044475-.005916*s)))-e)/(1.007226+r*(.045255+s*(.259866*r-.311325-.005916*11*s)))}while(ps(i)>ss&&0<--o);return[t/(.8707+(r=n*n)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),n]},Tu.invert=su(Ds),xu.invert=su(function(t){return 2*fs(t)}),Du.invert=function(t,e){return[-e,2*fs(ys(t))-ls]},Ku.prototype=Su.prototype={constructor:Ku,count:function(){return this.eachAfter(ku)},each:function(t){var e,i,n,o,r=this,s=[r];do{for(e=s.reverse(),s=[];r=e.pop();)if(t(r),i=r.children)for(n=0,o=i.length;n<o;++n)s.push(i[n])}while(s.length);return this},eachAfter:function(t){for(var e,i,n,o=this,r=[o],s=[];o=r.pop();)if(s.push(o),e=o.children)for(i=0,n=e.length;i<n;++i)r.push(e[i]);for(;o=s.pop();)t(o);return this},eachBefore:function(t){for(var e,i,n=this,o=[n];n=o.pop();)if(t(n),e=n.children)for(i=e.length-1;0<=i;--i)o.push(e[i]);return this},sum:function(o){return this.eachAfter(function(t){for(var e=+o(t.data)||0,i=t.children,n=i&&i.length;0<=--n;)e+=i[n].value;t.value=e})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(t){for(var e=this,i=function(t,e){if(t===e)return t;var i=t.ancestors(),n=e.ancestors(),o=null;for(t=i.pop(),e=n.pop();t===e;)o=t,t=i.pop(),e=n.pop();return o}(e,t),n=[e];e!==i;)e=e.parent,n.push(e);for(var o=n.length;t!==i;)n.splice(o,0,t),t=t.parent;return n},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,i=[];return e.each(function(t){t!==e&&i.push({source:t.parent,target:t})}),i},copy:function(){return Su(this).eachBefore(Mu)}};var Lu=Array.prototype.slice;function Pu(t){for(var e,i,n=0,o=(t=function(t){for(var e,i,n=t.length;n;)i=Math.random()*n--|0,e=t[n],t[n]=t[i],t[i]=e;return t}(Lu.call(t))).length,r=[];n<o;)e=t[n],i&&Hu(i,e)?++n:(i=$u(r=Fu(r,e)),n=0);return i}function Fu(t,e){var i,n;if(zu(e,t))return[e];for(i=0;i<t.length;++i)if(Bu(e,t[i])&&zu(Vu(t[i],e),t))return[t[i],e];for(i=0;i<t.length-1;++i)for(n=i+1;n<t.length;++n)if(Bu(Vu(t[i],t[n]),e)&&Bu(Vu(t[i],e),t[n])&&Bu(Vu(t[n],e),t[i])&&zu(ju(t[i],t[n],e),t))return[t[i],t[n],e];throw new Error}function Bu(t,e){var i=t.r-e.r,n=e.x-t.x,o=e.y-t.y;return i<0||i*i<n*n+o*o}function Hu(t,e){var i=t.r-e.r+1e-6,n=e.x-t.x,o=e.y-t.y;return 0<i&&n*n+o*o<i*i}function zu(t,e){for(var i=0;i<e.length;++i)if(!Hu(t,e[i]))return!1;return!0}function $u(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return Vu(t[0],t[1]);case 3:return ju(t[0],t[1],t[2])}var e}function Vu(t,e){var i=t.x,n=t.y,o=t.r,r=e.x,s=e.y,a=e.r,l=r-i,c=s-n,u=a-o,d=Math.sqrt(l*l+c*c);return{x:(i+r+l/d*u)/2,y:(n+s+c/d*u)/2,r:(d+o+a)/2}}function ju(t,e,i){var n=t.x,o=t.y,r=t.r,s=e.x,a=e.y,l=e.r,c=i.x,u=i.y,d=i.r,h=n-s,p=n-c,f=o-a,g=o-u,m=l-r,v=d-r,y=n*n+o*o-r*r,b=y-s*s-a*a+l*l,_=y-c*c-u*u+d*d,E=p*f-h*g,w=(f*_-g*b)/(2*E)-n,C=(g*m-f*v)/E,T=(p*b-h*_)/(2*E)-o,x=(h*v-p*m)/E,D=C*C+x*x-1,I=2*(r+w*C+T*x),O=w*w+T*T-r*r,R=-(D?(I+Math.sqrt(I*I-4*D*O))/(2*D):O/I);return{x:n+w+C*R,y:o+T+x*R,r:R}}function Wu(t,e,i){var n,o,r,s,a=t.x-e.x,l=t.y-e.y,c=a*a+l*l;c?(o=e.r+i.r,o*=o,s=t.r+i.r,o>(s*=s)?(n=(c+s-o)/(2*c),r=Math.sqrt(Math.max(0,s/c-n*n)),i.x=t.x-n*a-r*l,i.y=t.y-n*l+r*a):(n=(c+o-s)/(2*c),r=Math.sqrt(Math.max(0,o/c-n*n)),i.x=e.x+n*a-r*l,i.y=e.y+n*l+r*a)):(i.x=e.x+i.r,i.y=e.y)}function Gu(t,e){var i=t.r+e.r-1e-6,n=e.x-t.x,o=e.y-t.y;return 0<i&&n*n+o*o<i*i}function qu(t){var e=t._,i=t.next._,n=e.r+i.r,o=(e.x*i.r+i.x*e.r)/n,r=(e.y*i.r+i.y*e.r)/n;return o*o+r*r}function Uu(t){this._=t,this.next=null,this.previous=null}function Yu(t){if(!(o=t.length))return 0;var e,i,n,o,r,s,a,l,c,u,d;if((e=t[0]).x=0,e.y=0,!(1<o))return e.r;if(i=t[1],e.x=-i.r,i.x=e.r,i.y=0,!(2<o))return e.r+i.r;Wu(i,e,n=t[2]),e=new Uu(e),i=new Uu(i),n=new Uu(n),e.next=n.previous=i,i.next=e.previous=n,n.next=i.previous=e;t:for(a=3;a<o;++a){Wu(e._,i._,n=t[a]),n=new Uu(n),l=i.next,c=e.previous,u=i._.r,d=e._.r;do{if(u<=d){if(Gu(l._,n._)){i=l,(e.next=i).previous=e,--a;continue t}u+=l._.r,l=l.next}else{if(Gu(c._,n._)){((e=c).next=i).previous=e,--a;continue t}d+=c._.r,c=c.previous}}while(l!==c.next);for(n.previous=e,n.next=i,e.next=i.previous=i=n,r=qu(e);(n=n.next)!==i;)(s=qu(n))<r&&(e=n,r=s);i=e.next}for(e=[i._],n=i;(n=n.next)!==i;)e.push(n._);for(n=Pu(e),a=0;a<o;++a)(e=t[a]).x-=n.x,e.y-=n.y;return n.r}function Xu(t){if("function"!=typeof t)throw new Error;return t}function Zu(){return 0}function Qu(t){return function(){return t}}function Ju(t){return Math.sqrt(t.value)}function td(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function ed(s,a){return function(t){if(e=t.children){var e,i,n,o=e.length,r=s(t)*a||0;if(r)for(i=0;i<o;++i)e[i].r+=r;if(n=Yu(e),r)for(i=0;i<o;++i)e[i].r-=r;t.r=n+r}}}function id(i){return function(t){var e=t.parent;t.r*=i,e&&(t.x=e.x+i*t.x,t.y=e.y+i*t.y)}}function nd(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function od(t,e,i,n,o){for(var r,s=t.children,a=-1,l=s.length,c=t.value&&(n-e)/t.value;++a<l;)(r=s[a]).y0=i,r.y1=o,r.x0=e,r.x1=e+=r.value*c}var rd={depth:-1},sd={};function ad(t){return t.id}function ld(t){return t.parentId}function cd(t,e){return t.parent===e.parent?1:2}function ud(t){var e=t.children;return e?e[0]:t.t}function dd(t){var e=t.children;return e?e[e.length-1]:t.t}function hd(t,e){this._=t,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function pd(t,e,i,n,o){for(var r,s=t.children,a=-1,l=s.length,c=t.value&&(o-i)/t.value;++a<l;)(r=s[a]).x0=e,r.x1=n,r.y0=i,r.y1=i+=r.value*c}hd.prototype=Object.create(Ku.prototype);var fd=(1+Math.sqrt(5))/2;function gd(t,e,i,n,o,r){for(var s,a,l,c,u,d,h,p,f,g,m,v=[],y=e.children,b=0,_=0,E=y.length,w=e.value;b<E;){for(l=o-i,c=r-n;!(u=y[_++].value)&&_<E;);for(d=h=u,m=u*u*(g=Math.max(c/l,l/c)/(w*t)),f=Math.max(h/m,m/d);_<E;++_){if(u+=a=y[_].value,a<d&&(d=a),h<a&&(h=a),m=u*u*g,(p=Math.max(h/m,m/d))>f){u-=a;break}f=p}v.push(s={value:u,dice:l<c,children:y.slice(b,_)}),s.dice?od(s,i,n,o,w?n+=c*u/w:r):pd(s,i,n,w?i+=l*u/w:o,r),w-=u,b=_}return v}var md=function e(r){function t(t,e,i,n,o){gd(r,t,e,i,n,o)}return t.ratio=function(t){return e(1<(t=+t)?t:1)},t}(fd),vd=function e(p){function t(t,e,i,n,o){if((r=t._squarify)&&r.ratio===p)for(var r,s,a,l,c,u=-1,d=r.length,h=t.value;++u<d;){for(a=(s=r[u]).children,l=s.value=0,c=a.length;l<c;++l)s.value+=a[l].value;s.dice?od(s,e,i,n,i+=(o-i)*s.value/h):pd(s,e,i,e+=(n-e)*s.value/h,o),h-=s.value}else t._squarify=r=gd(p,t,e,i,n,o),r.ratio=p}return t.ratio=function(t){return e(1<(t=+t)?t:1)},t}(fd);function yd(t,e){return t[0]-e[0]||t[1]-e[1]}function bd(t){for(var e,i,n,o=t.length,r=[0,1],s=2,a=2;a<o;++a){for(;1<s&&(e=t[r[s-2]],i=t[r[s-1]],n=t[a],(i[0]-e[0])*(n[1]-e[1])-(i[1]-e[1])*(n[0]-e[0])<=0);)--s;r[s++]=a}return r.slice(0,s)}function _d(){return Math.random()}var Ed=function t(i){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return i()*e+t}}return e.source=t,e}(_d),wd=function t(r){function e(e,i){var n,o;return e=null==e?0:+e,i=null==i?1:+i,function(){var t;if(null!=n)t=n,n=null;else for(;n=2*r()-1,t=2*r()-1,!(o=n*n+t*t)||1<o;);return e+i*t*Math.sqrt(-2*Math.log(o)/o)}}return e.source=t,e}(_d),Cd=function t(e){function i(){var t=wd.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return i.source=t,i}(_d),Td=function t(n){function e(i){return function(){for(var t=0,e=0;e<i;++e)t+=n();return t}}return e.source=t,e}(_d),xd=function t(i){function e(t){var e=Td.source(i)(t);return function(){return e()/t}}return e.source=t,e}(_d),Dd=function t(e){function i(t){return function(){return-Math.log(1-e())/t}}return i.source=t,i}(_d);function Id(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Od(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var Rd=Array.prototype,kd=Rd.map,Sd=Rd.slice,Ad={name:"implicit"};function Md(){var r=ko(),s=[],n=[],o=Ad;function a(t){var e=t+"",i=r.get(e);if(!i){if(o!==Ad)return o;r.set(e,i=s.push(t))}return n[(i-1)%n.length]}return a.domain=function(t){if(!arguments.length)return s.slice();s=[],r=ko();for(var e,i,n=-1,o=t.length;++n<o;)r.has(i=(e=t[n])+"")||r.set(i,s.push(e));return a},a.range=function(t){return arguments.length?(n=Sd.call(t),a):n.slice()},a.unknown=function(t){return arguments.length?(o=t,a):o},a.copy=function(){return Md(s,n).unknown(o)},Id.apply(a,arguments),a}function Nd(){var r,s,t=Md().unknown(void 0),a=t.domain,l=t.range,c=[0,1],u=!1,d=0,h=0,p=.5;function e(){var t=a().length,e=c[1]<c[0],i=c[e-0],n=c[1-e];r=(n-i)/Math.max(1,t-d+2*h),u&&(r=Math.floor(r)),i+=(n-i-r*(t-d))*p,s=r*(1-d),u&&(i=Math.round(i),s=Math.round(s));var o=x(t).map(function(t){return i+r*t});return l(e?o.reverse():o)}return delete t.unknown,t.domain=function(t){return arguments.length?(a(t),e()):a()},t.range=function(t){return arguments.length?(c=[+t[0],+t[1]],e()):c.slice()},t.rangeRound=function(t){return c=[+t[0],+t[1]],u=!0,e()},t.bandwidth=function(){return s},t.step=function(){return r},t.round=function(t){return arguments.length?(u=!!t,e()):u},t.padding=function(t){return arguments.length?(d=Math.min(1,h=+t),e()):d},t.paddingInner=function(t){return arguments.length?(d=Math.min(1,t),e()):d},t.paddingOuter=function(t){return arguments.length?(h=+t,e()):h},t.align=function(t){return arguments.length?(p=Math.max(0,Math.min(1,t)),e()):p},t.copy=function(){return Nd(a(),c).round(u).paddingInner(d).paddingOuter(h).align(p)},Id.apply(e(),arguments)}function Kd(t){return+t}var Ld=[0,1];function Pd(t){return t}function Fd(e,i){return(i-=e=+e)?function(t){return(t-e)/i}:(t=isNaN(i)?NaN:.5,function(){return t});var t}function Bd(t){var e,i=t[0],n=t[t.length-1];return n<i&&(e=i,i=n,n=e),function(t){return Math.max(i,Math.min(n,t))}}function Hd(t,e,i){var n=t[0],o=t[1],r=e[0],s=e[1];return r=o<n?(n=Fd(o,n),i(s,r)):(n=Fd(n,o),i(r,s)),function(t){return r(n(t))}}function zd(i,t,e){var n=Math.min(i.length,t.length)-1,o=new Array(n),r=new Array(n),s=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),t=t.slice().reverse());++s<n;)o[s]=Fd(i[s],i[s+1]),r[s]=e(t[s],t[s+1]);return function(t){var e=g(i,t,1,n)-1;return r[e](o[e](t))}}function $d(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Vd(){var i,n,e,o,r,s,a=Ld,l=Ld,c=si,u=Pd;function d(){return o=2<Math.min(a.length,l.length)?zd:Hd,r=s=null,h}function h(t){return isNaN(t=+t)?e:(r=r||o(a.map(i),l,c))(i(u(t)))}return h.invert=function(t){return u(n((s=s||o(l,a.map(i),ei))(t)))},h.domain=function(t){return arguments.length?(a=kd.call(t,Kd),u===Pd||(u=Bd(a)),d()):a.slice()},h.range=function(t){return arguments.length?(l=Sd.call(t),d()):l.slice()},h.rangeRound=function(t){return l=Sd.call(t),c=ai,d()},h.clamp=function(t){return arguments.length?(u=t?Bd(a):Pd,h):u!==Pd},h.interpolate=function(t){return arguments.length?(c=t,d()):c},h.unknown=function(t){return arguments.length?(e=t,h):e},function(t,e){return i=t,n=e,d()}}function jd(t,e){return Vd()(t,e)}function Wd(t,e,i,n){var o,r=D(t,e,i);switch((n=jr(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=n.precision||isNaN(o=ts(r,s))||(n.precision=o),H.formatPrefix(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(o=es(r,Math.max(Math.abs(t),Math.abs(e))))||(n.precision=o-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(o=Jr(r))||(n.precision=o-2*("%"===n.type))}return H.format(n)}function Gd(a){var l=a.domain;return a.ticks=function(t){var e=l();return v(e[0],e[e.length-1],null==t?10:t)},a.tickFormat=function(t,e){var i=l();return Wd(i[0],i[i.length-1],null==t?10:t,e)},a.nice=function(t){null==t&&(t=10);var e,i=l(),n=0,o=i.length-1,r=i[n],s=i[o];return s<r&&(e=r,r=s,s=e,e=n,n=o,o=e),0<(e=y(r,s,t))?e=y(r=Math.floor(r/e)*e,s=Math.ceil(s/e)*e,t):e<0&&(e=y(r=Math.ceil(r*e)/e,s=Math.floor(s*e)/e,t)),0<e?(i[n]=Math.floor(r/e)*e,i[o]=Math.ceil(s/e)*e,l(i)):e<0&&(i[n]=Math.ceil(r*e)/e,i[o]=Math.floor(s*e)/e,l(i)),a},a}function qd(t,e){var i,n=0,o=(t=t.slice()).length-1,r=t[n],s=t[o];return s<r&&(i=n,n=o,o=i,i=r,r=s,s=i),t[n]=e.floor(r),t[o]=e.ceil(s),t}function Ud(t){return Math.log(t)}function Yd(t){return Math.exp(t)}function Xd(t){return-Math.log(-t)}function Zd(t){return-Math.exp(-t)}function Qd(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Jd(e){return function(t){return-e(-t)}}function th(t){var h,p,o=t(Ud,Yd),f=o.domain,g=10;function e(){return h=(i=g)===Math.E?Math.log:10===i&&Math.log10||2===i&&Math.log2||(i=Math.log(i),function(t){return Math.log(t)/i}),p=10===(e=g)?Qd:e===Math.E?Math.exp:function(t){return Math.pow(e,t)},f()[0]<0?(h=Jd(h),p=Jd(p),t(Xd,Zd)):t(Ud,Yd),o;var e,i}return o.base=function(t){return arguments.length?(g=+t,e()):g},o.domain=function(t){return arguments.length?(f(t),e()):f()},o.ticks=function(t){var e,i=f(),n=i[0],o=i[i.length-1];(e=o<n)&&(l=n,n=o,o=l);var r,s,a,l=h(n),c=h(o),u=null==t?10:+t,d=[];if(!(g%1)&&c-l<u){if(l=Math.round(l)-1,c=Math.round(c)+1,0<n){for(;l<c;++l)for(s=1,r=p(l);s<g;++s)if(!((a=r*s)<n)){if(o<a)break;d.push(a)}}else for(;l<c;++l)for(s=g-1,r=p(l);1<=s;--s)if(!((a=r*s)<n)){if(o<a)break;d.push(a)}}else d=v(l,c,Math.min(c-l,u)).map(p);return e?d.reverse():d},o.tickFormat=function(t,i){if(null==i&&(i=10===g?".0e":","),"function"!=typeof i&&(i=H.format(i)),t===1/0)return i;null==t&&(t=10);var n=Math.max(1,g*t/o.ticks().length);return function(t){var e=t/p(Math.round(h(t)));return e*g<g-.5&&(e*=g),e<=n?i(t):""}},o.nice=function(){return f(qd(f(),{floor:function(t){return p(Math.floor(h(t)))},ceil:function(t){return p(Math.ceil(h(t)))}}))},o}function eh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ih(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function nh(e){var i=1,t=e(eh(i),ih(i));return t.constant=function(t){return arguments.length?e(eh(i=+t),ih(i)):i},Gd(t)}function oh(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function rh(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function sh(t){return t<0?-t*t:t*t}function ah(e){var t=e(Pd,Pd),i=1;return t.exponent=function(t){return arguments.length?1==(i=+t)?e(Pd,Pd):.5===i?e(rh,sh):e(oh(i),oh(1/i)):i},Gd(t)}function lh(){var t=ah(Vd());return t.copy=function(){return $d(t,lh()).exponent(t.exponent())},Id.apply(t,arguments),t}var ch=new Date,uh=new Date;function dh(r,s,i,n){function a(t){return r(t=new Date(+t)),t}return(a.floor=a).ceil=function(t){return r(t=new Date(t-1)),s(t,1),r(t),t},a.round=function(t){var e=a(t),i=a.ceil(t);return t-e<i-t?e:i},a.offset=function(t,e){return s(t=new Date(+t),null==e?1:Math.floor(e)),t},a.range=function(t,e,i){var n,o=[];if(t=a.ceil(t),i=null==i?1:Math.floor(i),!(t<e&&0<i))return o;for(;o.push(n=new Date(+t)),s(t,i),r(t),n<t&&t<e;);return o},a.filter=function(i){return dh(function(t){if(t<=t)for(;r(t),!i(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;s(t,-1),!i(t););else for(;0<=--e;)for(;s(t,1),!i(t););})},i&&(a.count=function(t,e){return ch.setTime(+t),uh.setTime(+e),r(ch),r(uh),Math.floor(i(ch,uh))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?a.filter(n?function(t){return n(t)%e==0}:function(t){return a.count(0,t)%e==0}):a:null}),a}var hh=dh(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});hh.every=function(i){return i=Math.floor(i),isFinite(i)&&0<i?1<i?dh(function(t){t.setTime(Math.floor(t/i)*i)},function(t,e){t.setTime(+t+e*i)},function(t,e){return(e-t)/i}):hh:null};var ph=hh.range,fh=dh(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),gh=fh.range,mh=dh(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getMinutes()}),vh=mh.range,yh=dh(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),bh=yh.range,_h=dh(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1}),Eh=_h.range;function wh(e){return dh(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var Ch=wh(0),Th=wh(1),xh=wh(2),Dh=wh(3),Ih=wh(4),Oh=wh(5),Rh=wh(6),kh=Ch.range,Sh=Th.range,Ah=xh.range,Mh=Dh.range,Nh=Ih.range,Kh=Oh.range,Lh=Rh.range,Ph=dh(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Fh=Ph.range,Bh=dh(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Bh.every=function(i){return isFinite(i=Math.floor(i))&&0<i?dh(function(t){t.setFullYear(Math.floor(t.getFullYear()/i)*i),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*i)}):null};var Hh=Bh.range,zh=dh(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getUTCMinutes()}),$h=zh.range,Vh=dh(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),jh=Vh.range,Wh=dh(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),Gh=Wh.range;function qh(e){return dh(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var Uh=qh(0),Yh=qh(1),Xh=qh(2),Zh=qh(3),Qh=qh(4),Jh=qh(5),tp=qh(6),ep=Uh.range,ip=Yh.range,np=Xh.range,op=Zh.range,rp=Qh.range,sp=Jh.range,ap=tp.range,lp=dh(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),cp=lp.range,up=dh(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});up.every=function(i){return isFinite(i=Math.floor(i))&&0<i?dh(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/i)*i),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*i)}):null};var dp=up.range;function hp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function pp(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function fp(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function gp(t){var n=t.dateTime,o=t.date,r=t.time,e=t.periods,i=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=Cp(e),u=Tp(e),d=Cp(i),h=Tp(i),p=Cp(s),f=Tp(s),g=Cp(a),m=Tp(a),v=Cp(l),y=Tp(l),b={a:function(t){return s[t.getDay()]},A:function(t){return i[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:jp,e:jp,f:Yp,H:Wp,I:Gp,j:qp,L:Up,m:Xp,M:Zp,p:function(t){return e[+(12<=t.getHours())]},Q:Df,s:If,S:Qp,u:Jp,U:tf,V:ef,w:nf,W:of,x:null,X:null,y:rf,Y:sf,Z:af,"%":xf},_={a:function(t){return s[t.getUTCDay()]},A:function(t){return i[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:lf,e:lf,f:pf,H:cf,I:uf,j:df,L:hf,m:ff,M:gf,p:function(t){return e[+(12<=t.getUTCHours())]},Q:Df,s:If,S:mf,u:vf,U:yf,V:bf,w:_f,W:Ef,x:null,X:null,y:wf,Y:Cf,Z:Tf,"%":xf},E={a:function(t,e,i){var n=p.exec(e.slice(i));return n?(t.w=f[n[0].toLowerCase()],i+n[0].length):-1},A:function(t,e,i){var n=d.exec(e.slice(i));return n?(t.w=h[n[0].toLowerCase()],i+n[0].length):-1},b:function(t,e,i){var n=v.exec(e.slice(i));return n?(t.m=y[n[0].toLowerCase()],i+n[0].length):-1},B:function(t,e,i){var n=g.exec(e.slice(i));return n?(t.m=m[n[0].toLowerCase()],i+n[0].length):-1},c:function(t,e,i){return T(t,n,e,i)},d:Np,e:Np,f:Hp,H:Lp,I:Lp,j:Kp,L:Bp,m:Mp,M:Pp,p:function(t,e,i){var n=c.exec(e.slice(i));return n?(t.p=u[n[0].toLowerCase()],i+n[0].length):-1},Q:$p,s:Vp,S:Fp,u:Dp,U:Ip,V:Op,w:xp,W:Rp,x:function(t,e,i){return T(t,o,e,i)},X:function(t,e,i){return T(t,r,e,i)},y:Sp,Y:kp,Z:Ap,"%":zp};function w(l,c){return function(t){var e,i,n,o=[],r=-1,s=0,a=l.length;for(t instanceof Date||(t=new Date(+t));++r<a;)37===l.charCodeAt(r)&&(o.push(l.slice(s,r)),null!=(i=vp[e=l.charAt(++r)])?e=l.charAt(++r):i="e"===e?" ":"0",(n=c[e])&&(e=n(t,i)),o.push(e),s=r+1);return o.push(l.slice(s,r)),o.join("")}}function C(o,r){return function(t){var e,i,n=fp(1900);if(T(n,o,t+="",0)!=t.length)return null;if("Q"in n)return new Date(n.Q);if("p"in n&&(n.H=n.H%12+12*n.p),"V"in n){if(n.V<1||53<n.V)return null;"w"in n||(n.w=1),"Z"in n?(e=4<(i=(e=pp(fp(n.y))).getUTCDay())||0===i?Yh.ceil(e):Yh(e),e=Wh.offset(e,7*(n.V-1)),n.y=e.getUTCFullYear(),n.m=e.getUTCMonth(),n.d=e.getUTCDate()+(n.w+6)%7):(e=4<(i=(e=r(fp(n.y))).getDay())||0===i?Th.ceil(e):Th(e),e=_h.offset(e,7*(n.V-1)),n.y=e.getFullYear(),n.m=e.getMonth(),n.d=e.getDate()+(n.w+6)%7)}else("W"in n||"U"in n)&&("w"in n||(n.w="u"in n?n.u%7:"W"in n?1:0),i="Z"in n?pp(fp(n.y)).getUTCDay():r(fp(n.y)).getDay(),n.m=0,n.d="W"in n?(n.w+6)%7+7*n.W-(i+5)%7:n.w+7*n.U-(i+6)%7);return"Z"in n?(n.H+=n.Z/100|0,n.M+=n.Z%100,pp(n)):r(n)}}function T(t,e,i,n){for(var o,r,s=0,a=e.length,l=i.length;s<a;){if(l<=n)return-1;if(37===(o=e.charCodeAt(s++))){if(o=e.charAt(s++),!(r=E[o in vp?e.charAt(s++):o])||(n=r(t,i,n))<0)return-1}else if(o!=i.charCodeAt(n++))return-1}return n}return b.x=w(o,b),b.X=w(r,b),b.c=w(n,b),_.x=w(o,_),_.X=w(r,_),_.c=w(n,_),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=C(t+="",hp);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=C(t,pp);return e.toString=function(){return t},e}}}var mp,vp={"-":"",_:" ",0:"0"},yp=/^\s*\d+/,bp=/^%/,_p=/[\\^$*+?|[\]().{}]/g;function Ep(t,e,i){var n=t<0?"-":"",o=(n?-t:t)+"",r=o.length;return n+(r<i?new Array(i-r+1).join(e)+o:o)}function wp(t){return t.replace(_p,"\\$&")}function Cp(t){return new RegExp("^(?:"+t.map(wp).join("|")+")","i")}function Tp(t){for(var e={},i=-1,n=t.length;++i<n;)e[t[i].toLowerCase()]=i;return e}function xp(t,e,i){var n=yp.exec(e.slice(i,i+1));return n?(t.w=+n[0],i+n[0].length):-1}function Dp(t,e,i){var n=yp.exec(e.slice(i,i+1));return n?(t.u=+n[0],i+n[0].length):-1}function Ip(t,e,i){var n=yp.exec(e.slice(i,i+2));return n?(t.U=+n[0],i+n[0].length):-1}function Op(t,e,i){var n=yp.exec(e.slice(i,i+2));return n?(t.V=+n[0],i+n[0].length):-1}function Rp(t,e,i){var n=yp.exec(e.slice(i,i+2));return n?(t.W=+n[0],i+n[0].length):-1}function kp(t,e,i){var n=yp.exec(e.slice(i,i+4));return n?(t.y=+n[0],i+n[0].length):-1}function Sp(t,e,i){var n=yp.exec(e.slice(i,i+2));return n?(t.y=+n[0]+(68<+n[0]?1900:2e3),i+n[0].length):-1}function Ap(t,e,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function Mp(t,e,i){var n=yp.exec(e.slice(i,i+2));return n?(t.m=n[0]-1,i+n[0].length):-1}function Np(t,e,i){var n=yp.exec(e.slice(i,i+2));return n?(t.d=+n[0],i+n[0].length):-1}function Kp(t,e,i){var n=yp.exec(e.slice(i,i+3));return n?(t.m=0,t.d=+n[0],i+n[0].length):-1}function Lp(t,e,i){var n=yp.exec(e.slice(i,i+2));return n?(t.H=+n[0],i+n[0].length):-1}function Pp(t,e,i){var n=yp.exec(e.slice(i,i+2));return n?(t.M=+n[0],i+n[0].length):-1}function Fp(t,e,i){var n=yp.exec(e.slice(i,i+2));return n?(t.S=+n[0],i+n[0].length):-1}function Bp(t,e,i){var n=yp.exec(e.slice(i,i+3));return n?(t.L=+n[0],i+n[0].length):-1}function Hp(t,e,i){var n=yp.exec(e.slice(i,i+6));return n?(t.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function zp(t,e,i){var n=bp.exec(e.slice(i,i+1));return n?i+n[0].length:-1}function $p(t,e,i){var n=yp.exec(e.slice(i));return n?(t.Q=+n[0],i+n[0].length):-1}function Vp(t,e,i){var n=yp.exec(e.slice(i));return n?(t.Q=1e3*+n[0],i+n[0].length):-1}function jp(t,e){return Ep(t.getDate(),e,2)}function Wp(t,e){return Ep(t.getHours(),e,2)}function Gp(t,e){return Ep(t.getHours()%12||12,e,2)}function qp(t,e){return Ep(1+_h.count(Bh(t),t),e,3)}function Up(t,e){return Ep(t.getMilliseconds(),e,3)}function Yp(t,e){return Up(t,e)+"000"}function Xp(t,e){return Ep(t.getMonth()+1,e,2)}function Zp(t,e){return Ep(t.getMinutes(),e,2)}function Qp(t,e){return Ep(t.getSeconds(),e,2)}function Jp(t){var e=t.getDay();return 0===e?7:e}function tf(t,e){return Ep(Ch.count(Bh(t),t),e,2)}function ef(t,e){var i=t.getDay();return t=4<=i||0===i?Ih(t):Ih.ceil(t),Ep(Ih.count(Bh(t),t)+(4===Bh(t).getDay()),e,2)}function nf(t){return t.getDay()}function of(t,e){return Ep(Th.count(Bh(t),t),e,2)}function rf(t,e){return Ep(t.getFullYear()%100,e,2)}function sf(t,e){return Ep(t.getFullYear()%1e4,e,4)}function af(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+Ep(e/60|0,"0",2)+Ep(e%60,"0",2)}function lf(t,e){return Ep(t.getUTCDate(),e,2)}function cf(t,e){return Ep(t.getUTCHours(),e,2)}function uf(t,e){return Ep(t.getUTCHours()%12||12,e,2)}function df(t,e){return Ep(1+Wh.count(up(t),t),e,3)}function hf(t,e){return Ep(t.getUTCMilliseconds(),e,3)}function pf(t,e){return hf(t,e)+"000"}function ff(t,e){return Ep(t.getUTCMonth()+1,e,2)}function gf(t,e){return Ep(t.getUTCMinutes(),e,2)}function mf(t,e){return Ep(t.getUTCSeconds(),e,2)}function vf(t){var e=t.getUTCDay();return 0===e?7:e}function yf(t,e){return Ep(Uh.count(up(t),t),e,2)}function bf(t,e){var i=t.getUTCDay();return t=4<=i||0===i?Qh(t):Qh.ceil(t),Ep(Qh.count(up(t),t)+(4===up(t).getUTCDay()),e,2)}function _f(t){return t.getUTCDay()}function Ef(t,e){return Ep(Yh.count(up(t),t),e,2)}function wf(t,e){return Ep(t.getUTCFullYear()%100,e,2)}function Cf(t,e){return Ep(t.getUTCFullYear()%1e4,e,4)}function Tf(){return"+0000"}function xf(){return"%"}function Df(t){return+t}function If(t){return Math.floor(+t/1e3)}function Of(t){return mp=gp(t),H.timeFormat=mp.format,H.timeParse=mp.parse,H.utcFormat=mp.utcFormat,H.utcParse=mp.utcParse,mp}Of({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Rf=Date.prototype.toISOString?function(t){return t.toISOString()}:H.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),kf=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:H.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),Sf=1e3,Af=60*Sf,Mf=60*Af,Nf=24*Mf,Kf=7*Nf,Lf=30*Nf,Pf=365*Nf;function Ff(t){return new Date(t)}function Bf(t){return t instanceof Date?+t:+new Date(+t)}function Hf(s,e,i,n,o,r,a,l,c){var u=jd(Pd,Pd),d=u.invert,h=u.domain,p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),y=c("%b %d"),b=c("%B"),_=c("%Y"),E=[[a,1,Sf],[a,5,5*Sf],[a,15,15*Sf],[a,30,30*Sf],[r,1,Af],[r,5,5*Af],[r,15,15*Af],[r,30,30*Af],[o,1,Mf],[o,3,3*Mf],[o,6,6*Mf],[o,12,12*Mf],[n,1,Nf],[n,2,2*Nf],[i,1,Kf],[e,1,Lf],[e,3,3*Lf],[s,1,Pf]];function w(t){return(a(t)<t?p:r(t)<t?f:o(t)<t?g:n(t)<t?m:e(t)<t?i(t)<t?v:y:s(t)<t?b:_)(t)}function C(t,e,i,n){if(null==t&&(t=10),"number"==typeof t){var o=Math.abs(i-e)/t,r=T(function(t){return t[2]}).right(E,o);t=r===E.length?(n=D(e/Pf,i/Pf,t),s):r?(n=(r=E[o/E[r-1][2]<E[r][2]/o?r-1:r])[1],r[0]):(n=Math.max(D(e,i,t),1),l)}return null==n?t:t.every(n)}return u.invert=function(t){return new Date(d(t))},u.domain=function(t){return arguments.length?h(kd.call(t,Bf)):h().map(Ff)},u.ticks=function(t,e){var i,n=h(),o=n[0],r=n[n.length-1],s=r<o;return s&&(i=o,o=r,r=i),i=(i=C(t,o,r,e))?i.range(o,r+1):[],s?i.reverse():i},u.tickFormat=function(t,e){return null==e?w:c(e)},u.nice=function(t,e){var i=h();return(t=C(t,i[0],i[i.length-1],e))?h(qd(i,t)):u},u.copy=function(){return $d(u,Hf(s,e,i,n,o,r,a,l,c))},u}function zf(){var e,i,n,o,r,s=0,a=1,l=Pd,c=!1;function u(t){return isNaN(t=+t)?r:l(0===n?.5:(t=(o(t)-e)*n,c?Math.max(0,Math.min(1,t)):t))}return u.domain=function(t){return arguments.length?(e=o(s=+t[0]),i=o(a=+t[1]),n=e===i?0:1/(i-e),u):[s,a]},u.clamp=function(t){return arguments.length?(c=!!t,u):c},u.interpolator=function(t){return arguments.length?(l=t,u):l},u.unknown=function(t){return arguments.length?(r=t,u):r},function(t){return e=(o=t)(s),i=t(a),n=e===i?0:1/(i-e),u}}function $f(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Vf(){var t=ah(zf());return t.copy=function(){return $f(t,Vf()).exponent(t.exponent())},Od.apply(t,arguments)}function jf(){var e,i,n,o,r,s,a,l=0,c=.5,u=1,d=Pd,h=!1;function p(t){return isNaN(t=+t)?a:(t=.5+((t=+s(t))-i)*(t<i?o:r),d(h?Math.max(0,Math.min(1,t)):t))}return p.domain=function(t){return arguments.length?(e=s(l=+t[0]),i=s(c=+t[1]),n=s(u=+t[2]),o=e===i?0:.5/(i-e),r=i===n?0:.5/(n-i),p):[l,c,u]},p.clamp=function(t){return arguments.length?(h=!!t,p):h},p.interpolator=function(t){return arguments.length?(d=t,p):d},p.unknown=function(t){return arguments.length?(a=t,p):a},function(t){return e=(s=t)(l),i=t(c),n=t(u),o=e===i?0:.5/(i-e),r=i===n?0:.5/(n-i),p}}function Wf(){var t=ah(jf());return t.copy=function(){return $f(t,Wf()).exponent(t.exponent())},Od.apply(t,arguments)}function Gf(t){for(var e=t.length/6|0,i=new Array(e),n=0;n<e;)i[n]="#"+t.slice(6*n,6*++n);return i}var qf=Gf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Uf=Gf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Yf=Gf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Xf=Gf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Zf=Gf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Qf=Gf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Jf=Gf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),tg=Gf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),eg=Gf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function ig(t){return Ze(t[t.length-1])}var ng=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Gf),og=ig(ng),rg=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Gf),sg=ig(rg),ag=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Gf),lg=ig(ag),cg=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Gf),ug=ig(cg),dg=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Gf),hg=ig(dg),pg=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Gf),fg=ig(pg),gg=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Gf),mg=ig(gg),vg=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Gf),yg=ig(vg),bg=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Gf),_g=ig(bg),Eg=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Gf),wg=ig(Eg),Cg=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Gf),Tg=ig(Cg),xg=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Gf),Dg=ig(xg),Ig=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Gf),Og=ig(Ig),Rg=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Gf),kg=ig(Rg),Sg=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Gf),Ag=ig(Sg),Mg=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Gf),Ng=ig(Mg),Kg=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Gf),Lg=ig(Kg),Pg=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Gf),Fg=ig(Pg),Bg=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Gf),Hg=ig(Bg),zg=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Gf),$g=ig(zg),Vg=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Gf),jg=ig(Vg),Wg=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Gf),Gg=ig(Wg),qg=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Gf),Ug=ig(qg),Yg=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Gf),Xg=ig(Yg),Zg=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Gf),Qg=ig(Zg),Jg=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Gf),tm=ig(Jg),em=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Gf),im=ig(em),nm=Si(He(300,.5,0),He(-240,.5,1)),om=Si(He(-100,.75,.35),He(80,1.5,.8)),rm=Si(He(260,.75,.35),He(80,1.5,.8)),sm=He(),am=ce(),lm=Math.PI/3,cm=2*Math.PI/3;function um(e){var i=e.length;return function(t){return e[Math.max(0,Math.min(i-1,Math.floor(t*i)))]}}var dm=um(Gf("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),hm=um(Gf("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),pm=um(Gf("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),fm=um(Gf("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function gm(t){return function(){return t}}var mm=Math.abs,vm=Math.atan2,ym=Math.cos,bm=Math.max,_m=Math.min,Em=Math.sin,wm=Math.sqrt,Cm=1e-12,Tm=Math.PI,xm=Tm/2,Dm=2*Tm;function Im(t){return 1<=t?xm:t<=-1?-xm:Math.asin(t)}function Om(t){return t.innerRadius}function Rm(t){return t.outerRadius}function km(t){return t.startAngle}function Sm(t){return t.endAngle}function Am(t){return t&&t.padAngle}function Mm(t,e,i,n,o,r,s){var a=t-i,l=e-n,c=(s?r:-r)/wm(a*a+l*l),u=c*l,d=-c*a,h=t+u,p=e+d,f=i+u,g=n+d,m=(h+f)/2,v=(p+g)/2,y=f-h,b=g-p,_=y*y+b*b,E=o-r,w=h*g-f*p,C=(b<0?-1:1)*wm(bm(0,E*E*_-w*w)),T=(w*b-y*C)/_,x=(-w*y-b*C)/_,D=(w*b+y*C)/_,I=(-w*y+b*C)/_,O=T-m,R=x-v,k=D-m,S=I-v;return k*k+S*S<O*O+R*R&&(T=D,x=I),{cx:T,cy:x,x01:-u,y01:-d,x11:T*(o/E-1),y11:x*(o/E-1)}}function Nm(t){this._context=t}function Km(t){return new Nm(t)}function Lm(t){return t[0]}function Pm(t){return t[1]}function Fm(){var s=Lm,a=Pm,l=gm(!0),c=null,u=Km,d=null;function e(t){var e,i,n,o=t.length,r=!1;for(null==c&&(d=u(n=Co())),e=0;e<=o;++e)!(e<o&&l(i=t[e],e,t))===r&&((r=!r)?d.lineStart():d.lineEnd()),r&&d.point(+s(i,e,t),+a(i,e,t));if(n)return d=null,n+""||null}return e.x=function(t){return arguments.length?(s="function"==typeof t?t:gm(+t),e):s},e.y=function(t){return arguments.length?(a="function"==typeof t?t:gm(+t),e):a},e.defined=function(t){return arguments.length?(l="function"==typeof t?t:gm(!!t),e):l},e.curve=function(t){return arguments.length?(u=t,null!=c&&(d=u(c)),e):u},e.context=function(t){return arguments.length?(null==t?c=d=null:d=u(c=t),e):c},e}function Bm(){var u=Lm,d=null,h=gm(0),p=Pm,f=gm(!0),g=null,m=Km,v=null;function e(t){var e,i,n,o,r,s=t.length,a=!1,l=new Array(s),c=new Array(s);for(null==g&&(v=m(r=Co())),e=0;e<=s;++e){if(!(e<s&&f(o=t[e],e,t))===a)if(a=!a)i=e,v.areaStart(),v.lineStart();else{for(v.lineEnd(),v.lineStart(),n=e-1;i<=n;--n)v.point(l[n],c[n]);v.lineEnd(),v.areaEnd()}a&&(l[e]=+u(o,e,t),c[e]=+h(o,e,t),v.point(d?+d(o,e,t):l[e],p?+p(o,e,t):c[e]))}if(r)return v=null,r+""||null}function t(){return Fm().defined(f).curve(m).context(g)}return e.x=function(t){return arguments.length?(u="function"==typeof t?t:gm(+t),d=null,e):u},e.x0=function(t){return arguments.length?(u="function"==typeof t?t:gm(+t),e):u},e.x1=function(t){return arguments.length?(d=null==t?null:"function"==typeof t?t:gm(+t),e):d},e.y=function(t){return arguments.length?(h="function"==typeof t?t:gm(+t),p=null,e):h},e.y0=function(t){return arguments.length?(h="function"==typeof t?t:gm(+t),e):h},e.y1=function(t){return arguments.length?(p=null==t?null:"function"==typeof t?t:gm(+t),e):p},e.lineX0=e.lineY0=function(){return t().x(u).y(h)},e.lineY1=function(){return t().x(u).y(p)},e.lineX1=function(){return t().x(d).y(h)},e.defined=function(t){return arguments.length?(f="function"==typeof t?t:gm(!!t),e):f},e.curve=function(t){return arguments.length?(m=t,null!=g&&(v=m(g)),e):m},e.context=function(t){return arguments.length?(null==t?g=v=null:v=m(g=t),e):g},e}function Hm(t,e){return e<t?-1:t<e?1:t<=e?0:NaN}function zm(t){return t}Nm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var $m=jm(Km);function Vm(t){this._curve=t}function jm(e){function t(t){return new Vm(e(t))}return t._curve=e,t}function Wm(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(jm(t)):e()._curve},t}function Gm(){return Wm(Fm().curve($m))}function qm(){var t=Bm().curve($m),e=t.curve,i=t.lineX0,n=t.lineX1,o=t.lineY0,r=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Wm(i())},delete t.lineX0,t.lineEndAngle=function(){return Wm(n())},delete t.lineX1,t.lineInnerRadius=function(){return Wm(o())},delete t.lineY0,t.lineOuterRadius=function(){return Wm(r())},delete t.lineY1,t.curve=function(t){return arguments.length?e(jm(t)):e()._curve},t}function Um(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}Vm.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Ym=Array.prototype.slice;function Xm(t){return t.source}function Zm(t){return t.target}function Qm(o){var r=Xm,s=Zm,a=Lm,l=Pm,c=null;function e(){var t,e=Ym.call(arguments),i=r.apply(this,e),n=s.apply(this,e);if(c=c||(t=Co()),o(c,+a.apply(this,(e[0]=i,e)),+l.apply(this,e),+a.apply(this,(e[0]=n,e)),+l.apply(this,e)),t)return c=null,t+""||null}return e.source=function(t){return arguments.length?(r=t,e):r},e.target=function(t){return arguments.length?(s=t,e):s},e.x=function(t){return arguments.length?(a="function"==typeof t?t:gm(+t),e):a},e.y=function(t){return arguments.length?(l="function"==typeof t?t:gm(+t),e):l},e.context=function(t){return arguments.length?(c=null==t?null:t,e):c},e}function Jm(t,e,i,n,o){t.moveTo(e,i),t.bezierCurveTo(e=(e+n)/2,i,e,o,n,o)}function tv(t,e,i,n,o){t.moveTo(e,i),t.bezierCurveTo(e,i=(i+o)/2,n,i,n,o)}function ev(t,e,i,n,o){var r=Um(e,i),s=Um(e,i=(i+o)/2),a=Um(n,i),l=Um(n,o);t.moveTo(r[0],r[1]),t.bezierCurveTo(s[0],s[1],a[0],a[1],l[0],l[1])}var iv={draw:function(t,e){var i=Math.sqrt(e/Tm);t.moveTo(i,0),t.arc(0,0,i,0,Dm)}},nv={draw:function(t,e){var i=Math.sqrt(e/5)/2;t.moveTo(-3*i,-i),t.lineTo(-i,-i),t.lineTo(-i,-3*i),t.lineTo(i,-3*i),t.lineTo(i,-i),t.lineTo(3*i,-i),t.lineTo(3*i,i),t.lineTo(i,i),t.lineTo(i,3*i),t.lineTo(-i,3*i),t.lineTo(-i,i),t.lineTo(-3*i,i),t.closePath()}},ov=Math.sqrt(1/3),rv=2*ov,sv={draw:function(t,e){var i=Math.sqrt(e/rv),n=i*ov;t.moveTo(0,-i),t.lineTo(n,0),t.lineTo(0,i),t.lineTo(-n,0),t.closePath()}},av=Math.sin(Tm/10)/Math.sin(7*Tm/10),lv=Math.sin(Dm/10)*av,cv=-Math.cos(Dm/10)*av,uv={draw:function(t,e){var i=Math.sqrt(.8908130915292852*e),n=lv*i,o=cv*i;t.moveTo(0,-i),t.lineTo(n,o);for(var r=1;r<5;++r){var s=Dm*r/5,a=Math.cos(s),l=Math.sin(s);t.lineTo(l*i,-a*i),t.lineTo(a*n-l*o,l*n+a*o)}t.closePath()}},dv={draw:function(t,e){var i=Math.sqrt(e),n=-i/2;t.rect(n,n,i,i)}},hv=Math.sqrt(3),pv={draw:function(t,e){var i=-Math.sqrt(e/(3*hv));t.moveTo(0,2*i),t.lineTo(-hv*i,-i),t.lineTo(hv*i,-i),t.closePath()}},fv=Math.sqrt(3)/2,gv=1/Math.sqrt(12),mv=3*(gv/2+1),vv={draw:function(t,e){var i=Math.sqrt(e/mv),n=i/2,o=i*gv,r=n,s=i*gv+i,a=-r,l=s;t.moveTo(n,o),t.lineTo(r,s),t.lineTo(a,l),t.lineTo(-.5*n-fv*o,fv*n+-.5*o),t.lineTo(-.5*r-fv*s,fv*r+-.5*s),t.lineTo(-.5*a-fv*l,fv*a+-.5*l),t.lineTo(-.5*n+fv*o,-.5*o-fv*n),t.lineTo(-.5*r+fv*s,-.5*s-fv*r),t.lineTo(-.5*a+fv*l,-.5*l-fv*a),t.closePath()}},yv=[iv,nv,sv,dv,uv,pv,vv];function bv(){}function _v(t,e,i){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+i)/6)}function Ev(t){this._context=t}function wv(t){this._context=t}function Cv(t){this._context=t}function Tv(t,e){this._basis=new Ev(t),this._beta=e}Ev.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_v(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_v(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},wv.prototype={areaStart:bv,areaEnd:bv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:_v(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Cv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(i,n):this._context.moveTo(i,n);break;case 3:this._point=4;default:_v(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Tv.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,i=t.length-1;if(0<i)for(var n,o=t[0],r=e[0],s=t[i]-o,a=e[i]-r,l=-1;++l<=i;)n=l/i,this._basis.point(this._beta*t[l]+(1-this._beta)*(o+n*s),this._beta*e[l]+(1-this._beta)*(r+n*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var xv=function e(i){function t(t){return 1===i?new Ev(t):new Tv(t,i)}return t.beta=function(t){return e(+t)},t}(.85);function Dv(t,e,i){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-i),t._x2,t._y2)}function Iv(t,e){this._context=t,this._k=(1-e)/6}Iv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Dv(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Dv(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ov=function e(i){function t(t){return new Iv(t,i)}return t.tension=function(t){return e(+t)},t}(0);function Rv(t,e){this._context=t,this._k=(1-e)/6}Rv.prototype={areaStart:bv,areaEnd:bv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Dv(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var kv=function e(i){function t(t){return new Rv(t,i)}return t.tension=function(t){return e(+t)},t}(0);function Sv(t,e){this._context=t,this._k=(1-e)/6}Sv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Dv(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Av=function e(i){function t(t){return new Sv(t,i)}return t.tension=function(t){return e(+t)},t}(0);function Mv(t,e,i){var n=t._x1,o=t._y1,r=t._x2,s=t._y2;if(t._l01_a>Cm){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);n=(n*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,o=(o*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Cm){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*c+t._x1*t._l23_2a-e*t._l12_2a)/u,s=(s*c+t._y1*t._l23_2a-i*t._l12_2a)/u}t._context.bezierCurveTo(n,o,r,s,t._x2,t._y2)}function Nv(t,e){this._context=t,this._alpha=e}Nv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var i=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Mv(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Kv=function e(i){function t(t){return i?new Nv(t,i):new Iv(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function Lv(t,e){this._context=t,this._alpha=e}Lv.prototype={areaStart:bv,areaEnd:bv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var i=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Mv(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Pv=function e(i){function t(t){return i?new Lv(t,i):new Rv(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function Fv(t,e){this._context=t,this._alpha=e}Fv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var i=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Mv(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bv=function e(i){function t(t){return i?new Fv(t,i):new Sv(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function Hv(t){this._context=t}function zv(t){return t<0?-1:1}function $v(t,e,i){var n=t._x1-t._x0,o=e-t._x1,r=(t._y1-t._y0)/(n||o<0&&-0),s=(i-t._y1)/(o||n<0&&-0),a=(r*o+s*n)/(n+o);return(zv(r)+zv(s))*Math.min(Math.abs(r),Math.abs(s),.5*Math.abs(a))||0}function Vv(t,e){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function jv(t,e,i){var n=t._x0,o=t._y0,r=t._x1,s=t._y1,a=(r-n)/3;t._context.bezierCurveTo(n+a,o+a*e,r-a,s-a*i,r,s)}function Wv(t){this._context=t}function Gv(t){this._context=new qv(t)}function qv(t){this._context=t}function Uv(t){this._context=t}function Yv(t){var e,i,n=t.length-1,o=new Array(n),r=new Array(n),s=new Array(n);for(r[o[0]=0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)o[e]=1,r[e]=4,s[e]=4*t[e]+2*t[e+1];for(o[n-1]=2,r[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=o[e]/r[e-1],r[e]-=i,s[e]-=i*s[e-1];for(o[n-1]=s[n-1]/r[n-1],e=n-2;0<=e;--e)o[e]=(s[e]-o[e+1])/r[e];for(r[n-1]=(t[n]+o[n-1])/2,e=0;e<n-1;++e)r[e]=2*t[e+1]-o[e+1];return[o,r]}function Xv(t,e){this._context=t,this._t=e}function Zv(t,e){if(1<(o=t.length))for(var i,n,o,r=1,s=t[e[0]],a=s.length;r<o;++r)for(n=s,s=t[e[r]],i=0;i<a;++i)s[i][1]+=s[i][0]=isNaN(n[i][1])?n[i][0]:n[i][1]}function Qv(t){for(var e=t.length,i=new Array(e);0<=--e;)i[e]=e;return i}function Jv(t,e){return t[e]}function ty(t){var i=t.map(ey);return Qv(t).sort(function(t,e){return i[t]-i[e]})}function ey(t){for(var e,i=-1,n=0,o=t.length,r=-1/0;++i<o;)(e=+t[i][1])>r&&(r=e,n=i);return n}function iy(t){var i=t.map(ny);return Qv(t).sort(function(t,e){return i[t]-i[e]})}function ny(t){for(var e,i=0,n=-1,o=t.length;++n<o;)(e=+t[n][1])&&(i+=e);return i}function oy(t){return function(){return t}}function ry(t){return t[0]}function sy(t){return t[1]}function ay(){this._=null}function ly(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function cy(t,e){var i=e,n=e.R,o=i.U;o?o.L===i?o.L=n:o.R=n:t._=n,n.U=o,i.U=n,i.R=n.L,i.R&&(i.R.U=i),n.L=i}function uy(t,e){var i=e,n=e.L,o=i.U;o?o.L===i?o.L=n:o.R=n:t._=n,n.U=o,i.U=n,i.L=n.R,i.L&&(i.L.U=i),n.R=i}function dy(t){for(;t.L;)t=t.L;return t}function hy(t,e,i,n){var o=[null,null],r=Ny.push(o)-1;return o.left=t,o.right=e,i&&fy(o,t,e,i),n&&fy(o,e,t,n),Ay[t.index].halfedges.push(r),Ay[e.index].halfedges.push(r),o}function py(t,e,i){var n=[e,i];return n.left=t,n}function fy(t,e,i,n){t[0]||t[1]?t.left===i?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=i)}function gy(t,e,i,n,o){var r,s=t[0],a=t[1],l=s[0],c=s[1],u=0,d=1,h=a[0]-l,p=a[1]-c;if(r=e-l,h||!(0<r)){if(r/=h,h<0){if(r<u)return;r<d&&(d=r)}else if(0<h){if(d<r)return;u<r&&(u=r)}if(r=n-l,h||!(r<0)){if(r/=h,h<0){if(d<r)return;u<r&&(u=r)}else if(0<h){if(r<u)return;r<d&&(d=r)}if(r=i-c,p||!(0<r)){if(r/=p,p<0){if(r<u)return;r<d&&(d=r)}else if(0<p){if(d<r)return;u<r&&(u=r)}if(r=o-c,p||!(r<0)){if(r/=p,p<0){if(d<r)return;u<r&&(u=r)}else if(0<p){if(r<u)return;r<d&&(d=r)}return!(0<u||d<1)||(0<u&&(t[0]=[l+u*h,c+u*p]),d<1&&(t[1]=[l+d*h,c+d*p]),!0)}}}}}function my(t,e,i,n,o){var r=t[1];if(r)return!0;var s,a,l=t[0],c=t.left,u=t.right,d=c[0],h=c[1],p=u[0],f=u[1],g=(d+p)/2,m=(h+f)/2;if(f===h){if(g<e||n<=g)return;if(p<d){if(l){if(l[1]>=o)return}else l=[g,i];r=[g,o]}else{if(l){if(l[1]<i)return}else l=[g,o];r=[g,i]}}else if(a=m-(s=(d-p)/(f-h))*g,s<-1||1<s)if(p<d){if(l){if(l[1]>=o)return}else l=[(i-a)/s,i];r=[(o-a)/s,o]}else{if(l){if(l[1]<i)return}else l=[(o-a)/s,o];r=[(i-a)/s,i]}else if(h<f){if(l){if(l[0]>=n)return}else l=[e,s*e+a];r=[n,s*n+a]}else{if(l){if(l[0]<e)return}else l=[n,s*n+a];r=[e,s*e+a]}return t[0]=l,t[1]=r,!0}function vy(t,e){return e[+(e.left!==t.site)]}Hv.prototype={areaStart:bv,areaEnd:bv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Wv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jv(this,this._t0,Vv(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var i=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,jv(this,Vv(this,i=$v(this,t,e)),i);break;default:jv(this,this._t0,i=$v(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=i}}},(Gv.prototype=Object.create(Wv.prototype)).point=function(t,e){Wv.prototype.point.call(this,e,t)},qv.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,i,n,o,r){this._context.bezierCurveTo(e,t,n,i,r,o)}},Uv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,i=t.length;if(i)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===i)this._context.lineTo(t[1],e[1]);else for(var n=Yv(t),o=Yv(e),r=0,s=1;s<i;++r,++s)this._context.bezierCurveTo(n[0][r],o[0][r],n[1][r],o[1][r],t[s],e[s]);(this._line||0!==this._line&&1===i)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Xv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var i=this._x*(1-this._t)+t*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,e)}}this._x=t,this._y=e}},ay.prototype={constructor:ay,insert:function(t,e){var i,n,o;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;i=t}else i=this._?(t=dy(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=i,e.C=!0,t=e;i&&i.C;)i===(n=i.U).L?(o=n.R)&&o.C?(i.C=o.C=!1,n.C=!0,t=n):(t===i.R&&(cy(this,i),i=(t=i).U),i.C=!1,n.C=!0,uy(this,n)):(o=n.L)&&o.C?(i.C=o.C=!1,n.C=!0,t=n):(t===i.L&&(uy(this,i),i=(t=i).U),i.C=!1,n.C=!0,cy(this,n)),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,i,n,o=t.U,r=t.L,s=t.R;if(i=r?s?dy(s):r:s,o?o.L===t?o.L=i:o.R=i:this._=i,r&&s?(n=i.C,i.C=t.C,((i.L=r).U=i)!==s?(o=i.U,i.U=t.U,t=i.R,o.L=t,(i.R=s).U=i):(i.U=o,t=(o=i).R)):(n=t.C,t=i),t&&(t.U=o),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===o.L){if((e=o.R).C&&(e.C=!1,o.C=!0,cy(this,o),e=o.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,uy(this,e),e=o.R),e.C=o.C,o.C=e.R.C=!1,cy(this,o),t=this._;break}}else if((e=o.L).C&&(e.C=!1,o.C=!0,uy(this,o),e=o.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,cy(this,e),e=o.L),e.C=o.C,o.C=e.L.C=!1,uy(this,o),t=this._;break}e.C=!0,o=(t=o).U}while(!t.C);t&&(t.C=!1)}}};var yy,by=[];function _y(){ly(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ey(t){var e=t.P,i=t.N;if(e&&i){var n=e.site,o=t.site,r=i.site;if(n!==r){var s=o[0],a=o[1],l=n[0]-s,c=n[1]-a,u=r[0]-s,d=r[1]-a,h=2*(l*d-c*u);if(!(-Ly<=h)){var p=l*l+c*c,f=u*u+d*d,g=(d*p-c*f)/h,m=(l*f-u*p)/h,v=by.pop()||new _y;v.arc=t,v.site=o,v.x=g+s,v.y=(v.cy=m+a)+Math.sqrt(g*g+m*m),t.circle=v;for(var y=null,b=My._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}My.insert(y,v),y||(yy=v)}}}}function wy(t){var e=t.circle;e&&(e.P||(yy=e.N),My.remove(e),by.push(e),ly(e),t.circle=null)}var Cy=[];function Ty(){ly(this),this.edge=this.site=this.circle=null}function xy(t){var e=Cy.pop()||new Ty;return e.site=t,e}function Dy(t){wy(t),Sy.remove(t),Cy.push(t),ly(t)}function Iy(t){var e=t.circle,i=e.x,n=e.cy,o=[i,n],r=t.P,s=t.N,a=[t];Dy(t);for(var l=r;l.circle&&Math.abs(i-l.circle.x)<Ky&&Math.abs(n-l.circle.cy)<Ky;)r=l.P,a.unshift(l),Dy(l),l=r;a.unshift(l),wy(l);for(var c=s;c.circle&&Math.abs(i-c.circle.x)<Ky&&Math.abs(n-c.circle.cy)<Ky;)s=c.N,a.push(c),Dy(c),c=s;a.push(c),wy(c);var u,d=a.length;for(u=1;u<d;++u)c=a[u],l=a[u-1],fy(c.edge,l.site,c.site,o);l=a[0],(c=a[d-1]).edge=hy(l.site,c.site,null,o),Ey(l),Ey(c)}function Oy(t){for(var e,i,n,o,r=t[0],s=t[1],a=Sy._;a;)if((n=Ry(a,s)-r)>Ky)a=a.L;else{if(!((o=r-ky(a,s))>Ky)){-Ky<n?(e=a.P,i=a):-Ky<o?i=(e=a).N:e=i=a;break}if(!a.R){e=a;break}a=a.R}var l;Ay[(l=t).index]={site:l,halfedges:[]};var c=xy(t);if(Sy.insert(e,c),e||i){if(e===i)return wy(e),i=xy(e.site),Sy.insert(c,i),c.edge=i.edge=hy(e.site,c.site),Ey(e),void Ey(i);if(i){wy(e),wy(i);var u=e.site,d=u[0],h=u[1],p=t[0]-d,f=t[1]-h,g=i.site,m=g[0]-d,v=g[1]-h,y=2*(p*v-f*m),b=p*p+f*f,_=m*m+v*v,E=[(v*b-f*_)/y+d,(p*_-m*b)/y+h];fy(i.edge,u,g,E),c.edge=hy(u,t,null,E),i.edge=hy(t,g,null,E),Ey(e),Ey(i)}else c.edge=hy(e.site,c.site)}}function Ry(t,e){var i=t.site,n=i[0],o=i[1],r=o-e;if(!r)return n;var s=t.P;if(!s)return-1/0;var a=(i=s.site)[0],l=i[1],c=l-e;if(!c)return a;var u=a-n,d=1/r-1/c,h=u/c;return d?(-h+Math.sqrt(h*h-2*d*(u*u/(-2*c)-l+c/2+o-r/2)))/d+n:(n+a)/2}function ky(t,e){var i=t.N;if(i)return Ry(i,e);var n=t.site;return n[1]===e?n[0]:1/0}var Sy,Ay,My,Ny,Ky=1e-6,Ly=1e-12;function Py(t,e){return e[1]-t[1]||e[0]-t[0]}function Fy(t,e){var i,n,o,r=t.sort(Py).pop();for(Ny=[],Ay=new Array(t.length),Sy=new ay,My=new ay;;)if(o=yy,r&&(!o||r[1]<o.y||r[1]===o.y&&r[0]<o.x))r[0]===i&&r[1]===n||(Oy(r),i=r[0],n=r[1]),r=t.pop();else{if(!o)break;Iy(o.arc)}if(function(){for(var t,e,i,n,o=0,r=Ay.length;o<r;++o)if((t=Ay[o])&&(n=(e=t.halfedges).length)){var s=new Array(n),a=new Array(n);for(i=0;i<n;++i)s[i]=i,a[i]=(l=t,c=Ny[e[i]],h=d=void 0,u=l.site,d=c.left,h=c.right,u===h&&(h=d,d=u),h?Math.atan2(h[1]-d[1],h[0]-d[0]):(h=u===d?(d=c[1],c[0]):(d=c[0],c[1]),Math.atan2(d[0]-h[0],h[1]-d[1])));for(s.sort(function(t,e){return a[e]-a[t]}),i=0;i<n;++i)a[i]=e[s[i]];for(i=0;i<n;++i)e[i]=a[i]}var l,c,u,d,h}(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],c=+e[1][1];!function(t,e,i,n){for(var o,r=Ny.length;r--;)my(o=Ny[r],t,e,i,n)&&gy(o,t,e,i,n)&&(Math.abs(o[0][0]-o[1][0])>Ky||Math.abs(o[0][1]-o[1][1])>Ky)||delete Ny[r]}(s,a,l,c),function(t,e,i,n){var o,r,s,a,l,c,u,d,h,p,f,g,m,v,y=Ay.length,b=!0;for(o=0;o<y;++o)if(r=Ay[o]){for(s=r.site,a=(l=r.halfedges).length;a--;)Ny[l[a]]||l.splice(a,1);for(a=0,c=l.length;a<c;)f=(m=r,p=(v=Ny[l[a]])[+(v.left===m.site)])[0],g=p[1],d=(u=vy(r,Ny[l[++a%c]]))[0],h=u[1],(Math.abs(f-d)>Ky||Math.abs(g-h)>Ky)&&(l.splice(a,0,Ny.push(py(s,p,Math.abs(f-t)<Ky&&Ky<n-g?[t,Math.abs(d-t)<Ky?h:n]:Math.abs(g-n)<Ky&&Ky<i-f?[Math.abs(h-n)<Ky?d:i,n]:Math.abs(f-i)<Ky&&Ky<g-e?[i,Math.abs(d-i)<Ky?h:e]:Math.abs(g-e)<Ky&&Ky<f-t?[Math.abs(h-e)<Ky?d:t,e]:null))-1),++c);c&&(b=!1)}if(b){var _,E,w,C=1/0;for(o=0,b=null;o<y;++o)(r=Ay[o])&&(w=(_=(s=r.site)[0]-t)*_+(E=s[1]-e)*E)<C&&(C=w,b=r);if(b){var T=[t,e],x=[t,n],D=[i,n],I=[i,e];b.halfedges.push(Ny.push(py(s=b.site,T,x))-1,Ny.push(py(s,x,D))-1,Ny.push(py(s,D,I))-1,Ny.push(py(s,I,T))-1)}}for(o=0;o<y;++o)(r=Ay[o])&&(r.halfedges.length||delete Ay[o])}(s,a,l,c)}this.edges=Ny,this.cells=Ay,Sy=My=Ny=Ay=null}function By(t){return function(){return t}}function Hy(t,e,i){this.target=t,this.type=e,this.transform=i}function zy(t,e,i){this.k=t,this.x=e,this.y=i}Fy.prototype={constructor:Fy,polygons:function(){var i=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(t){return vy(e,i[t])});return t.data=e.site.data,t})},triangles:function(){var h=[],p=this.edges;return this.cells.forEach(function(t,e){if(n=(i=t.halfedges).length)for(var i,n,o,r,s,a,l=t.site,c=-1,u=p[i[n-1]],d=u.left===l?u.right:u.left;++c<n;)o=d,d=(u=p[i[c]]).left===l?u.right:u.left,o&&d&&e<o.index&&e<d.index&&(s=o,a=d,((r=l)[0]-a[0])*(s[1]-r[1])-(r[0]-s[0])*(a[1]-r[1])<0)&&h.push([l.data,o.data,d.data])}),h},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(s,a,t){for(var e,l,c=this,u=c._found||0,i=c.cells.length;!(l=c.cells[u]);)if(++u>=i)return null;for(var n=s-l.site[0],o=a-l.site[1],d=n*n+o*o;l=c.cells[e=u],u=null,l.halfedges.forEach(function(t){var e=c.edges[t],i=e.left;if(i!==l.site&&i||(i=e.right)){var n=s-i[0],o=a-i[1],r=n*n+o*o;r<d&&(d=r,u=i.index)}}),null!==u;);return c._found=e,null==t||d<=t*t?l.site:null}},zy.prototype={constructor:zy,scale:function(t){return 1===t?this:new zy(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new zy(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $y=new zy(1,0,0);function Vy(t){return t.__zoom||$y}function jy(){H.event.stopImmediatePropagation()}function Wy(){H.event.preventDefault(),H.event.stopImmediatePropagation()}function Gy(){return!H.event.button}function qy(){var t,e,i=this;return e=i instanceof SVGElement?(t=(i=i.ownerSVGElement||i).width.baseVal.value,i.height.baseVal.value):(t=i.clientWidth,i.clientHeight),[[0,0],[t,e]]}function Uy(){return this.__zoom||$y}function Yy(){return-H.event.deltaY*(H.event.deltaMode?120:1)/500}function Xy(){return"ontouchstart"in this}function Zy(t,e,i){var n=t.invertX(e[0][0])-i[0][0],o=t.invertX(e[1][0])-i[1][0],r=t.invertY(e[0][1])-i[0][1],s=t.invertY(e[1][1])-i[1][1];return t.translate(n<o?(n+o)/2:Math.min(0,n)||Math.max(0,o),r<s?(r+s)/2:Math.min(0,r)||Math.max(0,s))}Vy.prototype=zy.prototype,H.version="5.8.2",H.bisect=g,H.bisectRight=g,H.bisectLeft=e,H.ascending=a,H.bisector=T,H.cross=function(t,e,i){var n,o,r,s,a=t.length,l=e.length,c=new Array(a*l);for(null==i&&(i=u),n=r=0;n<a;++n)for(s=t[n],o=0;o<l;++o,++r)c[r]=i(s,e[o]);return c},H.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},H.deviation=o,H.extent=l,H.histogram=function(){var h=m,p=l,f=b;function e(t){var e,i,n=t.length,o=new Array(n);for(e=0;e<n;++e)o[e]=h(t[e],e,t);var r=p(o),s=r[0],a=r[1],l=f(o,s,a);Array.isArray(l)||(l=D(s,a,l),l=x(Math.ceil(s/l)*l,a,l));for(var c=l.length;l[0]<=s;)l.shift(),--c;for(;l[c-1]>a;)l.pop(),--c;var u,d=new Array(c+1);for(e=0;e<=c;++e)(u=d[e]=[]).x0=0<e?l[e-1]:s,u.x1=e<c?l[e]:a;for(e=0;e<n;++e)s<=(i=o[e])&&i<=a&&d[g(l,i,0,c)].push(t[e]);return d}return e.value=function(t){return arguments.length?(h="function"==typeof t?t:d(t),e):h},e.domain=function(t){return arguments.length?(p="function"==typeof t?t:d([t[0],t[1]]),e):p},e.thresholds=function(t){return arguments.length?(f="function"==typeof t?t:Array.isArray(t)?d(r.call(t)):d(t),e):f},e},H.thresholdFreedmanDiaconis=function(t,e,i){return t=s.call(t,c).sort(a),Math.ceil((i-e)/(2*(_(t,.75)-_(t,.25))*Math.pow(t.length,-1/3)))},H.thresholdScott=function(t,e,i){return Math.ceil((i-e)/(3.5*o(t)*Math.pow(t.length,-1/3)))},H.thresholdSturges=b,H.max=E,H.mean=function(t,e){var i,n=t.length,o=n,r=-1,s=0;if(null==e)for(;++r<n;)isNaN(i=c(t[r]))?--o:s+=i;else for(;++r<n;)isNaN(i=c(e(t[r],r,t)))?--o:s+=i;if(o)return s/o},H.median=function(t,e){var i,n=t.length,o=-1,r=[];if(null==e)for(;++o<n;)isNaN(i=c(t[o]))||r.push(i);else for(;++o<n;)isNaN(i=c(e(t[o],o,t)))||r.push(i);return _(r.sort(a),.5)},H.merge=I,H.min=w,H.pairs=function(t,e){null==e&&(e=u);for(var i=0,n=t.length-1,o=t[0],r=new Array(n<0?0:n);i<n;)r[i]=e(o,o=t[++i]);return r},H.permute=function(t,e){for(var i=e.length,n=new Array(i);i--;)n[i]=t[e[i]];return n},H.quantile=_,H.range=x,H.scan=function(t,e){if(i=t.length){var i,n,o=0,r=0,s=t[r];for(null==e&&(e=a);++o<i;)(e(n=t[o],s)<0||0!==e(s,s))&&(s=n,r=o);return 0===e(s,s)?r:void 0}},H.shuffle=function(t,e,i){for(var n,o,r=(null==i?t.length:i)-(e=null==e?0:+e);r;)o=Math.random()*r--|0,n=t[r+e],t[r+e]=t[o+e],t[o+e]=n;return t},H.sum=function(t,e){var i,n=t.length,o=-1,r=0;if(null==e)for(;++o<n;)(i=+t[o])&&(r+=i);else for(;++o<n;)(i=+e(t[o],o,t))&&(r+=i);return r},H.ticks=v,H.tickIncrement=y,H.tickStep=D,H.transpose=C,H.variance=n,H.zip=function(){return C(arguments)},H.axisTop=function(t){return N(1,t)},H.axisRight=function(t){return N(2,t)},H.axisBottom=function(t){return N(3,t)},H.axisLeft=function(t){return N(4,t)},H.brush=function(){return co(Qn)},H.brushX=function(){return co(Xn)},H.brushY=function(){return co(Zn)},H.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},H.chord=function(){var E=0,w=null,C=null,T=null;function e(n){var t,e,i,o,r,s,a=n.length,l=[],c=x(a),u=[],d=[],h=d.groups=new Array(a),p=new Array(a*a);for(t=0,r=-1;++r<a;){for(e=0,s=-1;++s<a;)e+=n[r][s];l.push(e),u.push(x(a)),t+=e}for(w&&c.sort(function(t,e){return w(l[t],l[e])}),C&&u.forEach(function(t,i){t.sort(function(t,e){return C(n[i][t],n[i][e])})}),o=(t=mo(0,go-E*a)/t)?E:go/a,e=0,r=-1;++r<a;){for(i=e,s=-1;++s<a;){var f=c[r],g=u[f][s],m=n[f][g],v=e,y=e+=m*t;p[g*a+f]={index:f,subindex:g,startAngle:v,endAngle:y,value:m}}h[f]={index:f,startAngle:i,endAngle:e,value:l[f]},e+=o}for(r=-1;++r<a;)for(s=r-1;++s<a;){var b=p[s*a+r],_=p[r*a+s];(b.value||_.value)&&d.push(b.value<_.value?{source:_,target:b}:{source:b,target:_})}return T?d.sort(T):d}return e.padAngle=function(t){return arguments.length?(E=mo(0,t),e):E},e.sortGroups=function(t){return arguments.length?(w=t,e):w},e.sortSubgroups=function(t){return arguments.length?(C=t,e):C},e.sortChords=function(t){return arguments.length?(null==t?T=null:(i=t,T=function(t,e){return i(t.source.value+t.target.value,e.source.value+e.target.value)})._=t,e):T&&T._;var i},e},H.ribbon=function(){var h=To,p=xo,f=Do,g=Io,m=Oo,v=null;function e(){var t,e=vo.call(arguments),i=h.apply(this,e),n=p.apply(this,e),o=+f.apply(this,(e[0]=i,e)),r=g.apply(this,e)-fo,s=m.apply(this,e)-fo,a=o*uo(r),l=o*ho(r),c=+f.apply(this,(e[0]=n,e)),u=g.apply(this,e)-fo,d=m.apply(this,e)-fo;if((v=v||(t=Co())).moveTo(a,l),v.arc(0,0,o,r,s),r==u&&s==d||(v.quadraticCurveTo(0,0,c*uo(u),c*ho(u)),v.arc(0,0,c,u,d)),v.quadraticCurveTo(0,0,a,l),v.closePath(),t)return v=null,t+""||null}return e.radius=function(t){return arguments.length?(f="function"==typeof t?t:yo(+t),e):f},e.startAngle=function(t){return arguments.length?(g="function"==typeof t?t:yo(+t),e):g},e.endAngle=function(t){return arguments.length?(m="function"==typeof t?t:yo(+t),e):m},e.source=function(t){return arguments.length?(h=t,e):h},e.target=function(t){return arguments.length?(p=t,e):p},e.context=function(t){return arguments.length?(v=null==t?null:t,e):v},e},H.nest=function(){var h,p,e,f=[],s=[];function g(t,i,n,o){if(i>=f.length)return null!=h&&t.sort(h),null!=p?p(t):t;for(var e,r,s,a=-1,l=t.length,c=f[i++],u=ko(),d=n();++a<l;)(s=u.get(e=c(r=t[a])+""))?s.push(r):u.set(e,[r]);return u.each(function(t,e){o(d,e,g(t,i,n,o))}),d}return e={object:function(t){return g(t,0,So,Ao)},map:function(t){return g(t,0,Mo,No)},entries:function(t){return function i(t,n){if(++n>f.length)return t;var o,r=s[n-1];return null!=p&&n>=f.length?o=t.entries():(o=[],t.each(function(t,e){o.push({key:e,values:i(t,n)})})),null!=r?o.sort(function(t,e){return r(t.key,e.key)}):o}(g(t,0,Mo,No),0)},key:function(t){return f.push(t),e},sortKeys:function(t){return s[f.length-1]=t,e},sortValues:function(t){return h=t,e},rollup:function(t){return p=t,e}}},H.set=Po,H.map=ko,H.keys=function(t){var e=[];for(var i in t)e.push(i);return e},H.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},H.entries=function(t){var e=[];for(var i in t)e.push({key:i,value:t[i]});return e},H.color=re,H.rgb=ce,H.hsl=pe,H.lab=xe,H.hcl=Ae,H.lch=function(t,e,i,n){return 1===arguments.length?Se(t):new Me(i,e,t,null==n?1:n)},H.gray=function(t,e){return new De(t,0,0,null==e?1:e)},H.cubehelix=He,H.contours=Wo,H.contourDensity=function(){var a=Uo,l=Yo,c=Xo,n=960,o=500,r=20,u=2,d=3*r,h=n+2*d>>u,p=o+2*d>>u,f=Ho(20);function e(t){var s=new Float32Array(h*p),e=new Float32Array(h*p);t.forEach(function(t,e,i){var n=+a(t,e,i)+d>>u,o=+l(t,e,i)+d>>u,r=+c(t,e,i);0<=n&&n<h&&0<=o&&o<p&&(s[n+o*h]+=r)}),Go({width:h,height:p,data:s},{width:h,height:p,data:e},r>>u),qo({width:h,height:p,data:e},{width:h,height:p,data:s},r>>u),Go({width:h,height:p,data:s},{width:h,height:p,data:e},r>>u),qo({width:h,height:p,data:e},{width:h,height:p,data:s},r>>u),Go({width:h,height:p,data:s},{width:h,height:p,data:e},r>>u),qo({width:h,height:p,data:e},{width:h,height:p,data:s},r>>u);var i=f(s);if(!Array.isArray(i)){var n=E(s);i=D(0,n,i),(i=x(0,Math.floor(n/i)*i,i)).shift()}return Wo().thresholds(i).size([h,p])(s).map(g)}function g(t){return t.value*=Math.pow(2,-2*u),t.coordinates.forEach(i),t}function i(t){t.forEach(s)}function s(t){t.forEach(m)}function m(t){t[0]=t[0]*Math.pow(2,u)-d,t[1]=t[1]*Math.pow(2,u)-d}function v(){return h=n+2*(d=3*r)>>u,p=o+2*d>>u,e}return e.x=function(t){return arguments.length?(a="function"==typeof t?t:Ho(+t),e):a},e.y=function(t){return arguments.length?(l="function"==typeof t?t:Ho(+t),e):l},e.weight=function(t){return arguments.length?(c="function"==typeof t?t:Ho(+t),e):c},e.size=function(t){if(!arguments.length)return[n,o];var e=Math.ceil(t[0]),i=Math.ceil(t[1]);if(!(0<=e||0<=e))throw new Error("invalid size");return n=e,o=i,v()},e.cellSize=function(t){if(!arguments.length)return 1<<u;if(!(1<=(t=+t)))throw new Error("invalid cell size");return u=Math.floor(Math.log(t)/Math.LN2),v()},e.thresholds=function(t){return arguments.length?(f="function"==typeof t?t:Array.isArray(t)?Ho(Fo.call(t)):Ho(t),e):f},e.bandwidth=function(t){if(!arguments.length)return Math.sqrt(r*(r+1));if(!(0<=(t=+t)))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*t*t+1)-1)/2),v()},e},H.dispatch=z,H.drag=function(){var i,n,o,r,s=Ht,a=zt,e=$t,l=Vt,f={},g=z("start","drag","end"),m=0,c=0;function v(t){t.on("mousedown.drag",u).filter(l).on("touchstart.drag",p).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){if(!r&&s.apply(this,arguments)){var t=_("mouse",a.apply(this,arguments),At,this,arguments);t&&(Dt(H.event.view).on("mousemove.drag",d,!0).on("mouseup.drag",h,!0),Lt(H.event.view),Nt(),o=!1,i=H.event.clientX,n=H.event.clientY,t("start"))}}function d(){if(Kt(),!o){var t=H.event.clientX-i,e=H.event.clientY-n;o=c<t*t+e*e}f.mouse("drag")}function h(){Dt(H.event.view).on("mousemove.drag mouseup.drag",null),Pt(H.event.view,o),Kt(),f.mouse("end")}function p(){if(s.apply(this,arguments)){var t,e,i=H.event.changedTouches,n=a.apply(this,arguments),o=i.length;for(t=0;t<o;++t)(e=_(i[t].identifier,n,Mt,this,arguments))&&(Nt(),e("start"))}}function y(){var t,e,i=H.event.changedTouches,n=i.length;for(t=0;t<n;++t)(e=f[i[t].identifier])&&(Kt(),e("drag"))}function b(){var t,e,i=H.event.changedTouches,n=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<n;++t)(e=f[i[t].identifier])&&(Nt(),e("end"))}function _(o,r,s,a,l){var c,u,d,h=s(r,o),p=g.copy();if(Et(new Bt(v,"beforestart",c,o,m,h[0],h[1],0,0,p),function(){return null!=(H.event.subject=c=e.apply(a,l))&&(u=c.x-h[0]||0,d=c.y-h[1]||0,!0)}))return function t(e){var i,n=h;switch(e){case"start":f[o]=t,i=m++;break;case"end":delete f[o],--m;case"drag":h=s(r,o),i=m}Et(new Bt(v,e,c,o,i,h[0]+u,h[1]+d,h[0]-n[0],h[1]-n[1],p),p.apply,p,[e,a,l])}}return v.filter=function(t){return arguments.length?(s="function"==typeof t?t:Ft(!!t),v):s},v.container=function(t){return arguments.length?(a="function"==typeof t?t:Ft(t),v):a},v.subject=function(t){return arguments.length?(e="function"==typeof t?t:Ft(t),v):e},v.touchable=function(t){return arguments.length?(l="function"==typeof t?t:Ft(!!t),v):l},v.on=function(){var t=g.on.apply(g,arguments);return t===g?v:t},v.clickDistance=function(t){return arguments.length?(c=(t=+t)*t,v):Math.sqrt(c)},v},H.dragDisable=Lt,H.dragEnable=Pt,H.dsvFormat=tr,H.csvParse=ir,H.csvParseRows=nr,H.csvFormat=or,H.csvFormatRows=rr,H.tsvParse=ar,H.tsvParseRows=lr,H.tsvFormat=cr,H.tsvFormatRows=ur,H.easeLinear=function(t){return+t},H.easeQuad=_n,H.easeQuadIn=function(t){return t*t},H.easeQuadOut=function(t){return t*(2-t)},H.easeQuadInOut=_n,H.easeCubic=En,H.easeCubicIn=function(t){return t*t*t},H.easeCubicOut=function(t){return--t*t*t+1},H.easeCubicInOut=En,H.easePoly=Tn,H.easePolyIn=wn,H.easePolyOut=Cn,H.easePolyInOut=Tn,H.easeSin=In,H.easeSinIn=function(t){return 1-Math.cos(t*Dn)},H.easeSinOut=function(t){return Math.sin(t*Dn)},H.easeSinInOut=In,H.easeExp=On,H.easeExpIn=function(t){return Math.pow(2,10*t-10)},H.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},H.easeExpInOut=On,H.easeCircle=Rn,H.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},H.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},H.easeCircleInOut=Rn,H.easeBounce=Sn,H.easeBounceIn=function(t){return 1-Sn(1-t)},H.easeBounceOut=Sn,H.easeBounceInOut=function(t){return((t*=2)<=1?1-Sn(1-t):Sn(t-1)+1)/2},H.easeBack=Nn,H.easeBackIn=An,H.easeBackOut=Mn,H.easeBackInOut=Nn,H.easeElastic=Pn,H.easeElasticIn=Ln,H.easeElasticOut=Pn,H.easeElasticInOut=Fn,H.blob=function(t,e){return fetch(t,e).then(dr)},H.buffer=function(t,e){return fetch(t,e).then(hr)},H.dsv=function(t,e,i,n){3===arguments.length&&"function"==typeof i&&(n=i,i=void 0);var o=tr(t);return fr(e,i).then(function(t){return o.parse(t,n)})},H.csv=mr,H.tsv=vr,H.image=function(o,r){return new Promise(function(t,e){var i=new Image;for(var n in r)i[n]=r[n];i.onerror=e,i.onload=function(){t(i)},i.src=o})},H.json=function(t,e){return fetch(t,e).then(yr)},H.text=fr,H.xml=_r,H.html=Er,H.svg=wr,H.forceCenter=function(r,s){var a;function e(){var t,e,i=a.length,n=0,o=0;for(t=0;t<i;++t)n+=(e=a[t]).x,o+=e.y;for(n=n/i-r,o=o/i-s,t=0;t<i;++t)(e=a[t]).x-=n,e.y-=o}return null==r&&(r=0),null==s&&(s=0),e.initialize=function(t){a=t},e.x=function(t){return arguments.length?(r=+t,e):r},e.y=function(t){return arguments.length?(s=+t,e):s},e},H.forceCollide=function(n){var r,s,m=1,a=1;function e(){for(var t,e,d,h,p,f,g,i=r.length,n=0;n<a;++n)for(e=Rr(r,Mr,Nr).visitAfter(l),t=0;t<i;++t)d=r[t],f=s[d.index],g=f*f,h=d.x+d.vx,p=d.y+d.vy,e.visit(o);function o(t,e,i,n,o){var r=t.data,s=t.r,a=f+s;if(!r)return h+a<e||n<h-a||p+a<i||o<p-a;if(r.index>d.index){var l=h-r.x-r.vx,c=p-r.y-r.vy,u=l*l+c*c;u<a*a&&(0===l&&(u+=(l=Tr())*l),0===c&&(u+=(c=Tr())*c),u=(a-(u=Math.sqrt(u)))/u*m,d.vx+=(l*=u)*(a=(s*=s)/(g+s)),d.vy+=(c*=u)*a,r.vx-=l*(a=1-a),r.vy-=c*a)}}}function l(t){if(t.data)return t.r=s[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function i(){if(r){var t,e,i=r.length;for(s=new Array(i),t=0;t<i;++t)e=r[t],s[e.index]=+n(e,t,r)}}return"function"!=typeof n&&(n=Cr(null==n?1:+n)),e.initialize=function(t){r=t,i()},e.iterations=function(t){return arguments.length?(a=+t,e):a},e.strength=function(t){return arguments.length?(m=+t,e):m},e.radius=function(t){return arguments.length?(n="function"==typeof t?t:Cr(+t),i(),e):n},e},H.forceLink=function(d){var h,p,r,s,f,a=Kr,i=function(t){return 1/Math.min(s[t.source.index],s[t.target.index])},n=Cr(30),g=1;function e(t){for(var e=0,i=d.length;e<g;++e)for(var n,o,r,s,a,l,c,u=0;u<i;++u)o=(n=d[u]).source,s=(r=n.target).x+r.vx-o.x-o.vx||Tr(),a=r.y+r.vy-o.y-o.vy||Tr(),s*=l=((l=Math.sqrt(s*s+a*a))-p[u])/l*t*h[u],a*=l,r.vx-=s*(c=f[u]),r.vy-=a*c,o.vx+=s*(c=1-c),o.vy+=a*c}function o(){if(r){var t,e,i=r.length,n=d.length,o=ko(r,a);for(t=0,s=new Array(i);t<n;++t)(e=d[t]).index=t,"object"!=typeof e.source&&(e.source=Lr(o,e.source)),"object"!=typeof e.target&&(e.target=Lr(o,e.target)),s[e.source.index]=(s[e.source.index]||0)+1,s[e.target.index]=(s[e.target.index]||0)+1;for(t=0,f=new Array(n);t<n;++t)e=d[t],f[t]=s[e.source.index]/(s[e.source.index]+s[e.target.index]);h=new Array(n),l(),p=new Array(n),c()}}function l(){if(r)for(var t=0,e=d.length;t<e;++t)h[t]=+i(d[t],t,d)}function c(){if(r)for(var t=0,e=d.length;t<e;++t)p[t]=+n(d[t],t,d)}return null==d&&(d=[]),e.initialize=function(t){r=t,o()},e.links=function(t){return arguments.length?(d=t,o(),e):d},e.id=function(t){return arguments.length?(a=t,e):a},e.iterations=function(t){return arguments.length?(g=+t,e):g},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:Cr(+t),l(),e):i},e.distance=function(t){return arguments.length?(n="function"==typeof t?t:Cr(+t),c(),e):n},e},H.forceManyBody=function(){var o,l,c,u,n=Cr(-30),d=1,h=1/0,p=.81;function e(t){var e,i=o.length,n=Rr(o,Pr,Fr).visitAfter(r);for(c=t,e=0;e<i;++e)l=o[e],n.visit(s)}function i(){if(o){var t,e,i=o.length;for(u=new Array(i),t=0;t<i;++t)e=o[t],u[e.index]=+n(e,t,o)}}function r(t){var e,i,n,o,r,s=0,a=0;if(t.length){for(n=o=r=0;r<4;++r)(e=t[r])&&(i=Math.abs(e.value))&&(s+=e.value,a+=i,n+=i*e.x,o+=i*e.y);t.x=n/a,t.y=o/a}else for((e=t).x=e.data.x,e.y=e.data.y;s+=u[e.data.index],e=e.next;);t.value=s}function s(t,e,i,n){if(!t.value)return!0;var o=t.x-l.x,r=t.y-l.y,s=n-e,a=o*o+r*r;if(s*s/p<a)return a<h&&(0===o&&(a+=(o=Tr())*o),0===r&&(a+=(r=Tr())*r),a<d&&(a=Math.sqrt(d*a)),l.vx+=o*t.value*c/a,l.vy+=r*t.value*c/a),!0;if(!(t.length||h<=a))for(t.data===l&&!t.next||(0===o&&(a+=(o=Tr())*o),0===r&&(a+=(r=Tr())*r),a<d&&(a=Math.sqrt(d*a)));t.data!==l&&(s=u[t.data.index]*c/a,l.vx+=o*s,l.vy+=r*s),t=t.next;);}return e.initialize=function(t){o=t,i()},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:Cr(+t),i(),e):n},e.distanceMin=function(t){return arguments.length?(d=t*t,e):Math.sqrt(d)},e.distanceMax=function(t){return arguments.length?(h=t*t,e):Math.sqrt(h)},e.theta=function(t){return arguments.length?(p=t*t,e):Math.sqrt(p)},e},H.forceRadial=function(i,l,c){var u,d,h,n=Cr(.1);function e(t){for(var e=0,i=u.length;e<i;++e){var n=u[e],o=n.x-l||1e-6,r=n.y-c||1e-6,s=Math.sqrt(o*o+r*r),a=(h[e]-s)*d[e]*t/s;n.vx+=o*a,n.vy+=r*a}}function o(){if(u){var t,e=u.length;for(d=new Array(e),h=new Array(e),t=0;t<e;++t)h[t]=+i(u[t],t,u),d[t]=isNaN(h[t])?0:+n(u[t],t,u)}}return"function"!=typeof i&&(i=Cr(+i)),null==l&&(l=0),null==c&&(c=0),e.initialize=function(t){u=t,o()},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:Cr(+t),o(),e):n},e.radius=function(t){return arguments.length?(i="function"==typeof t?t:Cr(+t),o(),e):i},e.x=function(t){return arguments.length?(l=+t,e):l},e.y=function(t){return arguments.length?(c=+t,e):c},e},H.forceSimulation=function(u){var r,s=1,e=.001,a=1-Math.pow(e,1/300),l=0,c=.6,d=ko(),t=ji(n),i=z("tick","end");function n(){o(),i.call("tick",r),s<e&&(t.stop(),i.call("end",r))}function o(t){var e,i,n=u.length;void 0===t&&(t=1);for(var o=0;o<t;++o)for(s+=(l-s)*a,d.each(function(t){t(s)}),e=0;e<n;++e)null==(i=u[e]).fx?i.x+=i.vx*=c:(i.x=i.fx,i.vx=0),null==i.fy?i.y+=i.vy*=c:(i.y=i.fy,i.vy=0);return r}function h(){for(var t,e=0,i=u.length;e<i;++e){if((t=u[e]).index=e,isNaN(t.fx)||(t.x=t.fx),isNaN(t.fy)||(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var n=10*Math.sqrt(e),o=e*Br;t.x=n*Math.cos(o),t.y=n*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(u),t}return null==u&&(u=[]),h(),r={tick:o,restart:function(){return t.restart(n),r},stop:function(){return t.stop(),r},nodes:function(t){return arguments.length?(u=t,h(),d.each(p),r):u},alpha:function(t){return arguments.length?(s=+t,r):s},alphaMin:function(t){return arguments.length?(e=+t,r):e},alphaDecay:function(t){return arguments.length?(a=+t,r):+a},alphaTarget:function(t){return arguments.length?(l=+t,r):l},velocityDecay:function(t){return arguments.length?(c=1-t,r):1-c},force:function(t,e){return 1<arguments.length?(null==e?d.remove(t):d.set(t,p(e)),r):d.get(t)},find:function(t,e,i){var n,o,r,s,a,l=0,c=u.length;for(null==i?i=1/0:i*=i,l=0;l<c;++l)(r=(n=t-(s=u[l]).x)*n+(o=e-s.y)*o)<i&&(a=s,i=r);return a},on:function(t,e){return 1<arguments.length?(i.on(t,e),r):i.on(t)}}},H.forceX=function(i){var o,r,s,n=Cr(.1);function e(t){for(var e,i=0,n=o.length;i<n;++i)(e=o[i]).vx+=(s[i]-e.x)*r[i]*t}function a(){if(o){var t,e=o.length;for(r=new Array(e),s=new Array(e),t=0;t<e;++t)r[t]=isNaN(s[t]=+i(o[t],t,o))?0:+n(o[t],t,o)}}return"function"!=typeof i&&(i=Cr(null==i?0:+i)),e.initialize=function(t){o=t,a()},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:Cr(+t),a(),e):n},e.x=function(t){return arguments.length?(i="function"==typeof t?t:Cr(+t),a(),e):i},e},H.forceY=function(i){var o,r,s,n=Cr(.1);function e(t){for(var e,i=0,n=o.length;i<n;++i)(e=o[i]).vy+=(s[i]-e.y)*r[i]*t}function a(){if(o){var t,e=o.length;for(r=new Array(e),s=new Array(e),t=0;t<e;++t)r[t]=isNaN(s[t]=+i(o[t],t,o))?0:+n(o[t],t,o)}}return"function"!=typeof i&&(i=Cr(null==i?0:+i)),e.initialize=function(t){o=t,a()},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:Cr(+t),a(),e):n},e.y=function(t){return arguments.length?(i="function"==typeof t?t:Cr(+t),a(),e):i},e},H.formatDefaultLocale=Qr,H.formatLocale=Zr,H.formatSpecifier=jr,H.precisionFixed=Jr,H.precisionPrefix=ts,H.precisionRound=es,H.geoArea=function(t){return zs.reset(),Ns(t,$s),2*zs},H.geoBounds=function(t){var e,i,n,o,r,s,a;if(na=ia=-(ta=ea=1/0),la=[],Ns(t,Ia),i=la.length){for(la.sort(La),e=1,r=[n=la[0]];e<i;++e)Pa(n,(o=la[e])[0])||Pa(n,o[1])?(Ka(n[0],o[1])>Ka(n[0],n[1])&&(n[1]=o[1]),Ka(o[0],n[1])>Ka(n[0],n[1])&&(n[0]=o[0])):r.push(n=o);for(s=-1/0,e=0,n=r[i=r.length-1];e<=i;n=o,++e)o=r[e],(a=Ka(n[1],o[0]))>s&&(s=a,ta=o[0],ia=n[1])}return la=ca=null,ta===1/0||ea===1/0?[[NaN,NaN],[NaN,NaN]]:[[ta,ea],[ia,na]]},H.geoCentroid=function(t){ua=da=ha=pa=fa=ga=ma=va=ya=ba=_a=0,Ns(t,Fa);var e=ya,i=ba,n=_a,o=e*e+i*i+n*n;return o<1e-12&&(e=ga,i=ma,n=va,da<ss&&(e=ha,i=pa,n=fa),(o=e*e+i*i+n*n)<1e-12)?[NaN,NaN]:[gs(i,e)*ds,Ds(n/Cs(o))*ds]},H.geoCircle=function(){var n,o,r=Ya([0,0]),s=Ya(90),a=Ya(6),l={point:function(t,e){n.push(t=o(t,e)),t[0]*=ds,t[1]*=ds}};function e(){var t=r.apply(this,arguments),e=s.apply(this,arguments)*hs,i=a.apply(this,arguments)*hs;return n=[],o=Qa(-t[0]*hs,-t[1]*hs,0).invert,nl(l,e,i,1),t={type:"Polygon",coordinates:[n]},n=o=null,t}return e.center=function(t){return arguments.length?(r="function"==typeof t?t:Ya([+t[0],+t[1]]),e):r},e.radius=function(t){return arguments.length?(s="function"==typeof t?t:Ya(+t),e):s},e.precision=function(t){return arguments.length?(a="function"==typeof t?t:Ya(+t),e):a},e},H.geoClipAntimeridian=gl,H.geoClipCircle=ml,H.geoClipExtent=function(){var e,i,n,o=0,r=0,s=960,a=500;return n={stream:function(t){return e&&i===t?e:e=bl(o,r,s,a)(i=t)},extent:function(t){return arguments.length?(o=+t[0][0],r=+t[0][1],s=+t[1][0],a=+t[1][1],e=i=null,n):[[o,r],[s,a]]}}},H.geoClipRectangle=bl,H.geoContains=function(t,e){return(t&&Al.hasOwnProperty(t.type)?Al[t.type]:Nl)(t,e)},H.geoDistance=Sl,H.geoGraticule=$l,H.geoGraticule10=function(){return $l()()},H.geoInterpolate=function(t,e){var i=t[0]*hs,n=t[1]*hs,o=e[0]*hs,r=e[1]*hs,s=ms(n),a=Es(n),l=ms(r),c=Es(r),u=s*ms(i),d=s*Es(i),h=l*ms(o),p=l*Es(o),f=2*Ds(Cs(Is(r-n)+s*l*Is(o-i))),g=Es(f),m=f?function(t){var e=Es(t*=f)/g,i=Es(f-t)/g,n=i*u+e*h,o=i*d+e*p,r=i*a+e*c;return[gs(o,n)*ds,gs(r,Cs(n*n+o*o))*ds]}:function(){return[i*ds,n*ds]};return m.distance=f,m},H.geoLength=Ol,H.geoPath=function(e,i){var n,o,r=4.5;function s(t){return t&&("function"==typeof r&&o.pointRadius(+r.apply(this,arguments)),Ns(t,n(o))),o.result()}return s.area=function(t){return Ns(t,n(Xl)),Xl.result()},s.measure=function(t){return Ns(t,n(Lc)),Lc.result()},s.bounds=function(t){return Ns(t,n(cc)),cc.result()},s.centroid=function(t){return Ns(t,n(bc)),bc.result()},s.projection=function(t){return arguments.length?(n=null==t?(e=null,Vl):(e=t).stream,s):e},s.context=function(t){return arguments.length?(o=null==t?(i=null,new Bc):new Rc(i=t),"function"!=typeof r&&o.pointRadius(r),s):i},s.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(o.pointRadius(+t),+t),s):r},s.projection(e).context(i)},H.geoAlbers=ou,H.geoAlbersUsa=function(){var e,i,o,r,s,n,a=ou(),l=nu().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=nu().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){n=[t,e]}};function d(t){var e=t[0],i=t[1];return n=null,o.point(e,i),n||(r.point(e,i),n)||(s.point(e,i),n)}function h(){return e=i=null,d}return d.invert=function(t){var e=a.scale(),i=a.translate(),n=(t[0]-i[0])/e,o=(t[1]-i[1])/e;return(.12<=o&&o<.234&&-.425<=n&&n<-.214?l:.166<=o&&o<.234&&-.214<=n&&n<-.115?c:a).invert(t)},d.stream=function(t){return e&&i===t?e:(n=[a.stream(i=t),l.stream(t),c.stream(t)],o=n.length,e={point:function(t,e){for(var i=-1;++i<o;)n[i].point(t,e)},sphere:function(){for(var t=-1;++t<o;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)n[t].polygonEnd()}});var n,o},d.precision=function(t){return arguments.length?(a.precision(t),l.precision(t),c.precision(t),h()):a.precision()},d.scale=function(t){return arguments.length?(a.scale(t),l.scale(.35*t),c.scale(t),d.translate(a.translate())):a.scale()},d.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),i=+t[0],n=+t[1];return o=a.translate(t).clipExtent([[i-.455*e,n-.238*e],[i+.455*e,n+.238*e]]).stream(u),r=l.translate([i-.307*e,n+.201*e]).clipExtent([[i-.425*e+ss,n+.12*e+ss],[i-.214*e-ss,n+.234*e-ss]]).stream(u),s=c.translate([i-.205*e,n+.212*e]).clipExtent([[i-.214*e+ss,n+.166*e+ss],[i-.115*e-ss,n+.234*e-ss]]).stream(u),h()},d.fitExtent=function(t,e){return jc(d,t,e)},d.fitSize=function(t,e){return Wc(d,t,e)},d.fitWidth=function(t,e){return Gc(d,t,e)},d.fitHeight=function(t,e){return qc(d,t,e)},d.scale(1070)},H.geoAzimuthalEqualArea=function(){return Jc(au).scale(124.75).clipAngle(179.999)},H.geoAzimuthalEqualAreaRaw=au,H.geoAzimuthalEquidistant=function(){return Jc(lu).scale(79.4188).clipAngle(179.999)},H.geoAzimuthalEquidistantRaw=lu,H.geoConicConformal=function(){return eu(hu).scale(109.5).parallels([30,30])},H.geoConicConformalRaw=hu,H.geoConicEqualArea=nu,H.geoConicEqualAreaRaw=iu,H.geoConicEquidistant=function(){return eu(fu).scale(131.154).center([0,13.9389])},H.geoConicEquidistantRaw=fu,H.geoEqualEarth=function(){return Jc(_u).scale(177.158)},H.geoEqualEarthRaw=_u,H.geoEquirectangular=function(){return Jc(pu).scale(152.63)},H.geoEquirectangularRaw=pu,H.geoGnomonic=function(){return Jc(Eu).scale(144.049).clipAngle(60)},H.geoGnomonicRaw=Eu,H.geoIdentity=function(){var e,i,n,o,r,s,a=1,l=0,c=0,u=1,d=1,h=Vl,p=null,f=Vl;function g(){return o=r=null,s}return s={stream:function(t){return o&&r===t?o:o=h(f(r=t))},postclip:function(t){return arguments.length?(f=t,p=e=i=n=null,g()):f},clipExtent:function(t){return arguments.length?(f=null==t?(p=e=i=n=null,Vl):bl(p=+t[0][0],e=+t[0][1],i=+t[1][0],n=+t[1][1]),g()):null==p?null:[[p,e],[i,n]]},scale:function(t){return arguments.length?(h=wu((a=+t)*u,a*d,l,c),g()):a},translate:function(t){return arguments.length?(h=wu(a*u,a*d,l=+t[0],c=+t[1]),g()):[l,c]},reflectX:function(t){return arguments.length?(h=wu(a*(u=t?-1:1),a*d,l,c),g()):u<0},reflectY:function(t){return arguments.length?(h=wu(a*u,a*(d=t?-1:1),l,c),g()):d<0},fitExtent:function(t,e){return jc(s,t,e)},fitSize:function(t,e){return Wc(s,t,e)},fitWidth:function(t,e){return Gc(s,t,e)},fitHeight:function(t,e){return qc(s,t,e)}}},H.geoProjection=Jc,H.geoProjectionMutator=tu,H.geoMercator=function(){return uu(cu).scale(961/us)},H.geoMercatorRaw=cu,H.geoNaturalEarth1=function(){return Jc(Cu).scale(175.295)},H.geoNaturalEarth1Raw=Cu,H.geoOrthographic=function(){return Jc(Tu).scale(249.5).clipAngle(90+ss)},H.geoOrthographicRaw=Tu,H.geoStereographic=function(){return Jc(xu).scale(250).clipAngle(142)},H.geoStereographicRaw=xu,H.geoTransverseMercator=function(){var t=uu(Du),e=t.center,i=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?i([t[0],t[1],2<t.length?t[2]+90:90]):[(t=i())[0],t[1],t[2]-90]},i([0,0,90]).scale(159.155)},H.geoTransverseMercatorRaw=Du,H.geoRotation=il,H.geoStream=Ns,H.geoTransform=function(t){return{stream:zc(t)}},H.cluster=function(){var a=Iu,l=1,c=1,u=!1;function e(e){var n,o=0;e.eachAfter(function(t){var e,i=t.children;i?(t.x=(e=i).reduce(Ou,0)/e.length,t.y=1+i.reduce(Ru,0)):(t.x=n?o+=a(t,n):0,t.y=0,n=t)});var t=function(t){for(var e;e=t.children;)t=e[0];return t}(e),i=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(e),r=t.x-a(t,i)/2,s=i.x+a(i,t)/2;return e.eachAfter(u?function(t){t.x=(t.x-e.x)*l,t.y=(e.y-t.y)*c}:function(t){t.x=(t.x-r)/(s-r)*l,t.y=(1-(e.y?t.y/e.y:1))*c})}return e.separation=function(t){return arguments.length?(a=t,e):a},e.size=function(t){return arguments.length?(u=!1,l=+t[0],c=+t[1],e):u?null:[l,c]},e.nodeSize=function(t){return arguments.length?(u=!0,l=+t[0],c=+t[1],e):u?[l,c]:null},e},H.hierarchy=Su,H.pack=function(){var i=null,e=1,n=1,o=Zu;function r(t){return t.x=e/2,t.y=n/2,i?t.eachBefore(td(i)).eachAfter(ed(o,.5)).eachBefore(id(1)):t.eachBefore(td(Ju)).eachAfter(ed(Zu,1)).eachAfter(ed(o,t.r/Math.min(e,n))).eachBefore(id(Math.min(e,n)/(2*t.r))),t}return r.radius=function(t){return arguments.length?(i=null==(e=t)?null:Xu(e),r):i;var e},r.size=function(t){return arguments.length?(e=+t[0],n=+t[1],r):[e,n]},r.padding=function(t){return arguments.length?(o="function"==typeof t?t:Qu(+t),r):o},r},H.packSiblings=function(t){return Yu(t),t},H.packEnclose=Pu,H.partition=function(){var i=1,n=1,a=0,o=!1;function e(t){var r,s,e=t.height+1;return t.x0=t.y0=a,t.x1=i,t.y1=n/e,t.eachBefore((r=n,s=e,function(t){t.children&&od(t,t.x0,r*(t.depth+1)/s,t.x1,r*(t.depth+2)/s);var e=t.x0,i=t.y0,n=t.x1-a,o=t.y1-a;n<e&&(e=n=(e+n)/2),o<i&&(i=o=(i+o)/2),t.x0=e,t.y0=i,t.x1=n,t.y1=o})),o&&t.eachBefore(nd),t}return e.round=function(t){return arguments.length?(o=!!t,e):o},e.size=function(t){return arguments.length?(i=+t[0],n=+t[1],e):[i,n]},e.padding=function(t){return arguments.length?(a=+t,e):a},e},H.stratify=function(){var d=ad,h=ld;function e(t){var e,i,n,o,r,s,a,l=t.length,c=new Array(l),u={};for(i=0;i<l;++i)e=t[i],r=c[i]=new Ku(e),null!=(s=d(e,i,t))&&(s+="")&&(u[a="$"+(r.id=s)]=a in u?sd:r);for(i=0;i<l;++i)if(r=c[i],null!=(s=h(t[i],i,t))&&(s+="")){if(!(o=u["$"+s]))throw new Error("missing: "+s);if(o===sd)throw new Error("ambiguous: "+s);o.children?o.children.push(r):o.children=[r],r.parent=o}else{if(n)throw new Error("multiple roots");n=r}if(!n)throw new Error("no root");if(n.parent=rd,n.eachBefore(function(t){t.depth=t.parent.depth+1,--l}).eachBefore(Nu),n.parent=null,0<l)throw new Error("cycle");return n}return e.id=function(t){return arguments.length?(d=Xu(t),e):d},e.parentId=function(t){return arguments.length?(h=Xu(t),e):h},e},H.tree=function(){var b=cd,c=1,u=1,d=null;function e(a){var t=function(){for(var t,e,i,n,o,r=new hd(a,0),s=[r];t=s.pop();)if(i=t._.children)for(t.children=new Array(o=i.length),n=o-1;0<=n;--n)s.push(e=t.children[n]=new hd(i[n],n)),e.parent=t;return(r.parent=new hd(null,0)).children=[r],r}();if(t.eachAfter(h),t.parent.m=-t.z,t.eachBefore(p),d)a.eachBefore(f);else{var e=a,i=a,n=a;a.eachBefore(function(t){t.x<e.x&&(e=t),t.x>i.x&&(i=t),t.depth>n.depth&&(n=t)});var o=e===i?1:b(e,i)/2,r=o-e.x,s=c/(i.x+o+r),l=u/(n.depth||1);a.eachBefore(function(t){t.x=(t.x+r)*s,t.y=t.depth*l})}return a}function h(r){var t=r.children,e=r.parent.children,i=r.i?e[r.i-1]:null;if(t){!function(){for(var t,e=0,i=0,n=r.children,o=n.length;0<=--o;)(t=n[o]).z+=e,t.m+=e,e+=t.s+(i+=t.c)}();var n=(t[0].z+t[t.length-1].z)/2;i?(r.z=i.z+b(r._,i._),r.m=r.z-n):r.z=n}else i&&(r.z=i.z+b(r._,i._));r.parent.A=function(t,e,i){if(e){for(var n,o=t,r=t,s=e,a=o.parent.children[0],l=o.m,c=r.m,u=s.m,d=a.m;s=dd(s),o=ud(o),s&&o;)a=ud(a),(r=dd(r)).a=t,0<(n=s.z+u-o.z-l+b(s._,o._))&&(v=t,y=i,h=(m=s).a.parent===v.parent?m.a:y,void 0,g=(f=n)/((p=t).i-h.i),p.c-=g,p.s+=f,h.c+=g,p.z+=f,p.m+=f,l+=n,c+=n),u+=s.m,l+=o.m,d+=a.m,c+=r.m;s&&!dd(r)&&(r.t=s,r.m+=u-c),o&&!ud(a)&&(a.t=o,a.m+=l-d,i=t)}var h,p,f,g,m,v,y;return i}(r,i,r.parent.A||e[0])}function p(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function f(t){t.x*=c,t.y=t.depth*u}return e.separation=function(t){return arguments.length?(b=t,e):b},e.size=function(t){return arguments.length?(d=!1,c=+t[0],u=+t[1],e):d?null:[c,u]},e.nodeSize=function(t){return arguments.length?(d=!0,c=+t[0],u=+t[1],e):d?[c,u]:null},e},H.treemap=function(){var s=md,e=!1,i=1,n=1,a=[0],l=Zu,c=Zu,u=Zu,d=Zu,h=Zu;function o(t){return t.x0=t.y0=0,t.x1=i,t.y1=n,t.eachBefore(r),a=[0],e&&t.eachBefore(nd),t}function r(t){var e=a[t.depth],i=t.x0+e,n=t.y0+e,o=t.x1-e,r=t.y1-e;o<i&&(i=o=(i+o)/2),r<n&&(n=r=(n+r)/2),t.x0=i,t.y0=n,t.x1=o,t.y1=r,t.children&&(e=a[t.depth+1]=l(t)/2,i+=h(t)-e,n+=c(t)-e,(o-=u(t)-e)<i&&(i=o=(i+o)/2),(r-=d(t)-e)<n&&(n=r=(n+r)/2),s(t,i,n,o,r))}return o.round=function(t){return arguments.length?(e=!!t,o):e},o.size=function(t){return arguments.length?(i=+t[0],n=+t[1],o):[i,n]},o.tile=function(t){return arguments.length?(s=Xu(t),o):s},o.padding=function(t){return arguments.length?o.paddingInner(t).paddingOuter(t):o.paddingInner()},o.paddingInner=function(t){return arguments.length?(l="function"==typeof t?t:Qu(+t),o):l},o.paddingOuter=function(t){return arguments.length?o.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):o.paddingTop()},o.paddingTop=function(t){return arguments.length?(c="function"==typeof t?t:Qu(+t),o):c},o.paddingRight=function(t){return arguments.length?(u="function"==typeof t?t:Qu(+t),o):u},o.paddingBottom=function(t){return arguments.length?(d="function"==typeof t?t:Qu(+t),o):d},o.paddingLeft=function(t){return arguments.length?(h="function"==typeof t?t:Qu(+t),o):h},o},H.treemapBinary=function(t,e,i,n,o){var r,s,y=t.children,a=y.length,b=new Array(a+1);for(b[0]=s=r=0;r<a;++r)b[r+1]=s+=y[r].value;!function t(e,i,n,o,r,s,a){if(i-1<=e){var l=y[e];return l.x0=o,l.y0=r,l.x1=s,void(l.y1=a)}for(var c=b[e],u=n/2+c,d=e+1,h=i-1;d<h;){var p=d+h>>>1;b[p]<u?d=1+p:h=p}u-b[d-1]<b[d]-u&&e+1<d&&--d;var f=b[d]-c,g=n-f;if(a-r<s-o){var m=(o*g+s*f)/n;t(e,d,f,o,r,m,a),t(d,i,g,m,r,s,a)}else{var v=(r*g+a*f)/n;t(e,d,f,o,r,s,v),t(d,i,g,o,v,s,a)}}(0,a,t.value,e,i,n,o)},H.treemapDice=od,H.treemapSlice=pd,H.treemapSliceDice=function(t,e,i,n,o){(1&t.depth?pd:od)(t,e,i,n,o)},H.treemapSquarify=md,H.treemapResquarify=vd,H.interpolate=si,H.interpolateArray=Je,H.interpolateBasis=Ve,H.interpolateBasisClosed=je,H.interpolateDate=ti,H.interpolateDiscrete=function(e){var i=e.length;return function(t){return e[Math.max(0,Math.min(i-1,Math.floor(t*i)))]}},H.interpolateHue=function(t,e){var i=qe(+t,+e);return function(t){var e=i(t);return e-360*Math.floor(e/360)}},H.interpolateNumber=ei,H.interpolateObject=ii,H.interpolateRound=ai,H.interpolateString=ri,H.interpolateTransformCss=mi,H.interpolateTransformSvg=vi,H.interpolateZoom=_i,H.interpolateRgb=Ye,H.interpolateRgbBasis=Ze,H.interpolateRgbBasisClosed=Qe,H.interpolateHsl=wi,H.interpolateHslLong=Ci,H.interpolateLab=function(e,t){var i=Ue((e=xe(e)).l,(t=xe(t)).l),n=Ue(e.a,t.a),o=Ue(e.b,t.b),r=Ue(e.opacity,t.opacity);return function(t){return e.l=i(t),e.a=n(t),e.b=o(t),e.opacity=r(t),e+""}},H.interpolateHcl=xi,H.interpolateHclLong=Di,H.interpolateCubehelix=ki,H.interpolateCubehelixLong=Si,H.piecewise=function(t,e){for(var i=0,n=e.length-1,o=e[0],r=new Array(n<0?0:n);i<n;)r[i]=t(o,o=e[++i]);return function(t){var e=Math.max(0,Math.min(n-1,Math.floor(t*=n)));return r[e](t-e)}},H.quantize=function(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t(n/(e-1));return i},H.path=Co,H.polygonArea=function(t){for(var e,i=-1,n=t.length,o=t[n-1],r=0;++i<n;)e=o,o=t[i],r+=e[1]*o[0]-e[0]*o[1];return r/2},H.polygonCentroid=function(t){for(var e,i,n=-1,o=t.length,r=0,s=0,a=t[o-1],l=0;++n<o;)e=a,a=t[n],l+=i=e[0]*a[1]-a[0]*e[1],r+=(e[0]+a[0])*i,s+=(e[1]+a[1])*i;return[r/(l*=3),s/l]},H.polygonHull=function(t){if((i=t.length)<3)return null;var e,i,n=new Array(i),o=new Array(i);for(e=0;e<i;++e)n[e]=[+t[e][0],+t[e][1],e];for(n.sort(yd),e=0;e<i;++e)o[e]=[n[e][0],-n[e][1]];var r=bd(n),s=bd(o),a=s[0]===r[0],l=s[s.length-1]===r[r.length-1],c=[];for(e=r.length-1;0<=e;--e)c.push(t[n[r[e]][2]]);for(e=+a;e<s.length-l;++e)c.push(t[n[s[e]][2]]);return c},H.polygonContains=function(t,e){for(var i,n,o=t.length,r=t[o-1],s=e[0],a=e[1],l=r[0],c=r[1],u=!1,d=0;d<o;++d)i=(r=t[d])[0],(n=r[1])>a!=a<c&&s<(l-i)*(a-n)/(c-n)+i&&(u=!u),l=i,c=n;return u},H.polygonLength=function(t){for(var e,i,n=-1,o=t.length,r=t[o-1],s=r[0],a=r[1],l=0;++n<o;)e=s,i=a,e-=s=(r=t[n])[0],i-=a=r[1],l+=Math.sqrt(e*e+i*i);return l},H.quadtree=Rr,H.randomUniform=Ed,H.randomNormal=wd,H.randomLogNormal=Cd,H.randomBates=xd,H.randomIrwinHall=Td,H.randomExponential=Dd,H.scaleBand=Nd,H.scalePoint=function(){return function t(e){var i=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(i())},e}(Nd.apply(null,arguments).paddingInner(1))},H.scaleIdentity=function t(e){var i;function n(t){return isNaN(t=+t)?i:t}return(n.invert=n).domain=n.range=function(t){return arguments.length?(e=kd.call(t,Kd),n):e.slice()},n.unknown=function(t){return arguments.length?(i=t,n):i},n.copy=function(){return t(e).unknown(i)},e=arguments.length?kd.call(e,Kd):[0,1],Gd(n)},H.scaleLinear=function t(){var e=jd(Pd,Pd);return e.copy=function(){return $d(e,t())},Id.apply(e,arguments),Gd(e)},H.scaleLog=function t(){var e=th(Vd()).domain([1,10]);return e.copy=function(){return $d(e,t()).base(e.base())},Id.apply(e,arguments),e},H.scaleSymlog=function t(){var e=nh(Vd());return e.copy=function(){return $d(e,t()).constant(e.constant())},Id.apply(e,arguments)},H.scaleOrdinal=Md,H.scaleImplicit=Ad,H.scalePow=lh,H.scaleSqrt=function(){return lh.apply(null,arguments).exponent(.5)},H.scaleQuantile=function t(){var e,o=[],i=[],n=[];function r(){var t=0,e=Math.max(1,i.length);for(n=new Array(e-1);++t<e;)n[t-1]=_(o,t/e);return s}function s(t){return isNaN(t=+t)?e:i[g(n,t)]}return s.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[0<e?n[e-1]:o[0],e<n.length?n[e]:o[o.length-1]]},s.domain=function(t){if(!arguments.length)return o.slice();o=[];for(var e,i=0,n=t.length;i<n;++i)null==(e=t[i])||isNaN(e=+e)||o.push(e);return o.sort(a),r()},s.range=function(t){return arguments.length?(i=Sd.call(t),r()):i.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return n.slice()},s.copy=function(){return t().domain(o).range(i).unknown(e)},Id.apply(s,arguments)},H.scaleQuantize=function t(){var e,i=0,n=1,o=1,r=[.5],s=[0,1];function a(t){return t<=t?s[g(r,t,0,o)]:e}function l(){var t=-1;for(r=new Array(o);++t<o;)r[t]=((t+1)*n-(t-o)*i)/(o+1);return a}return a.domain=function(t){return arguments.length?(i=+t[0],n=+t[1],l()):[i,n]},a.range=function(t){return arguments.length?(o=(s=Sd.call(t)).length-1,l()):s.slice()},a.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:e<1?[i,r[0]]:o<=e?[r[o-1],n]:[r[e-1],r[e]]},a.unknown=function(t){return arguments.length&&(e=t),a},a.thresholds=function(){return r.slice()},a.copy=function(){return t().domain([i,n]).range(s).unknown(e)},Id.apply(Gd(a),arguments)},H.scaleThreshold=function t(){var e,i=[.5],n=[0,1],o=1;function r(t){return t<=t?n[g(i,t,0,o)]:e}return r.domain=function(t){return arguments.length?(i=Sd.call(t),o=Math.min(i.length,n.length-1),r):i.slice()},r.range=function(t){return arguments.length?(n=Sd.call(t),o=Math.min(i.length,n.length-1),r):n.slice()},r.invertExtent=function(t){var e=n.indexOf(t);return[i[e-1],i[e]]},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return t().domain(i).range(n).unknown(e)},Id.apply(r,arguments)},H.scaleTime=function(){return Id.apply(Hf(Bh,Ph,Ch,_h,yh,mh,fh,hh,H.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},H.scaleUtc=function(){return Id.apply(Hf(up,lp,Uh,Wh,Vh,zh,fh,hh,H.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},H.scaleSequential=function t(){var e=Gd(zf()(Pd));return e.copy=function(){return $f(e,t())},Od.apply(e,arguments)},H.scaleSequentialLog=function t(){var e=th(zf()).domain([1,10]);return e.copy=function(){return $f(e,t()).base(e.base())},Od.apply(e,arguments)},H.scaleSequentialPow=Vf,H.scaleSequentialSqrt=function(){return Vf.apply(null,arguments).exponent(.5)},H.scaleSequentialSymlog=function t(){var e=nh(zf());return e.copy=function(){return $f(e,t()).constant(e.constant())},Od.apply(e,arguments)},H.scaleSequentialQuantile=function t(){var o=[],e=Pd;function r(t){if(!isNaN(t=+t))return e((g(o,t)-1)/(o.length-1))}return r.domain=function(t){if(!arguments.length)return o.slice();o=[];for(var e,i=0,n=t.length;i<n;++i)null==(e=t[i])||isNaN(e=+e)||o.push(e);return o.sort(a),r},r.interpolator=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return t(e).domain(o)},Od.apply(r,arguments)},H.scaleDiverging=function t(){var e=Gd(jf()(Pd));return e.copy=function(){return $f(e,t())},Od.apply(e,arguments)},H.scaleDivergingLog=function t(){var e=th(jf()).domain([.1,1,10]);return e.copy=function(){return $f(e,t()).base(e.base())},Od.apply(e,arguments)},H.scaleDivergingPow=Wf,H.scaleDivergingSqrt=function(){return Wf.apply(null,arguments).exponent(.5)},H.scaleDivergingSymlog=function t(){var e=nh(jf());return e.copy=function(){return $f(e,t()).constant(e.constant())},Od.apply(e,arguments)},H.tickFormat=Wd,H.schemeCategory10=qf,H.schemeAccent=Uf,H.schemeDark2=Yf,H.schemePaired=Xf,H.schemePastel1=Zf,H.schemePastel2=Qf,H.schemeSet1=Jf,H.schemeSet2=tg,H.schemeSet3=eg,H.interpolateBrBG=og,H.schemeBrBG=ng,H.interpolatePRGn=sg,H.schemePRGn=rg,H.interpolatePiYG=lg,H.schemePiYG=ag,H.interpolatePuOr=ug,H.schemePuOr=cg,H.interpolateRdBu=hg,H.schemeRdBu=dg,H.interpolateRdGy=fg,H.schemeRdGy=pg,H.interpolateRdYlBu=mg,H.schemeRdYlBu=gg,H.interpolateRdYlGn=yg,H.schemeRdYlGn=vg,H.interpolateSpectral=_g,H.schemeSpectral=bg,H.interpolateBuGn=wg,H.schemeBuGn=Eg,H.interpolateBuPu=Tg,H.schemeBuPu=Cg,H.interpolateGnBu=Dg,H.schemeGnBu=xg,H.interpolateOrRd=Og,H.schemeOrRd=Ig,H.interpolatePuBuGn=kg,H.schemePuBuGn=Rg,H.interpolatePuBu=Ag,H.schemePuBu=Sg,H.interpolatePuRd=Ng,H.schemePuRd=Mg,H.interpolateRdPu=Lg,H.schemeRdPu=Kg,H.interpolateYlGnBu=Fg,H.schemeYlGnBu=Pg,H.interpolateYlGn=Hg,H.schemeYlGn=Bg,H.interpolateYlOrBr=$g,H.schemeYlOrBr=zg,H.interpolateYlOrRd=jg,H.schemeYlOrRd=Vg,H.interpolateBlues=Gg,H.schemeBlues=Wg,H.interpolateGreens=Ug,H.schemeGreens=qg,H.interpolateGreys=Xg,H.schemeGreys=Yg,H.interpolatePurples=Qg,H.schemePurples=Zg,H.interpolateReds=tm,H.schemeReds=Jg,H.interpolateOranges=im,H.schemeOranges=em,H.interpolateCubehelixDefault=nm,H.interpolateRainbow=function(t){(t<0||1<t)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return sm.h=360*t-100,sm.s=1.5-1.5*e,sm.l=.8-.9*e,sm+""},H.interpolateWarm=om,H.interpolateCool=rm,H.interpolateSinebow=function(t){var e;return t=(.5-t)*Math.PI,am.r=255*(e=Math.sin(t))*e,am.g=255*(e=Math.sin(t+lm))*e,am.b=255*(e=Math.sin(t+cm))*e,am+""},H.interpolateViridis=dm,H.interpolateMagma=hm,H.interpolateInferno=pm,H.interpolatePlasma=fm,H.create=function(t){return Dt(j(t).call(document.documentElement))},H.creator=j,H.local=Ot,H.matcher=Y,H.mouse=At,H.namespace=V,H.namespaces=$,H.clientPoint=St,H.select=Dt,H.selectAll=function(t){return"string"==typeof t?new Tt([document.querySelectorAll(t)],[document.documentElement]):new Tt([null==t?[]:t],Ct)},H.selection=xt,H.selector=G,H.selectorAll=U,H.style=it,H.touch=Mt,H.touches=function(t,e){null==e&&(e=kt().touches);for(var i=0,n=e?e.length:0,o=new Array(n);i<n;++i)o[i]=St(t,e[i]);return o},H.window=et,H.customEvent=Et,H.arc=function(){var B=Om,H=Rm,z=gm(0),$=null,V=km,j=Sm,W=Am,G=null;function e(){var t,e,i,n=+B.apply(this,arguments),o=+H.apply(this,arguments),r=V.apply(this,arguments)-xm,s=j.apply(this,arguments)-xm,a=mm(s-r),l=r<s;if(G=G||(t=Co()),o<n&&(e=o,o=n,n=e),Cm<o)if(Dm-Cm<a)G.moveTo(o*ym(r),o*Em(r)),G.arc(0,0,o,r,s,!l),Cm<n&&(G.moveTo(n*ym(s),n*Em(s)),G.arc(0,0,n,s,r,l));else{var c,u,d=r,h=s,p=r,f=s,g=a,m=a,v=W.apply(this,arguments)/2,y=Cm<v&&($?+$.apply(this,arguments):wm(n*n+o*o)),b=_m(mm(o-n)/2,+z.apply(this,arguments)),_=b,E=b;if(Cm<y){var w=Im(y/n*Em(v)),C=Im(y/o*Em(v));(g-=2*w)>Cm?(p+=w*=l?1:-1,f-=w):(g=0,p=f=(r+s)/2),(m-=2*C)>Cm?(d+=C*=l?1:-1,h-=C):(m=0,d=h=(r+s)/2)}var T=o*ym(d),x=o*Em(d),D=n*ym(f),I=n*Em(f);if(Cm<b){var O,R=o*ym(h),k=o*Em(h),S=n*ym(p),A=n*Em(p);if(a<Tm&&(O=function(){var t=S-T,e=A-x,i=D-R,n=I-k,o=n*t-i*e;if(!(o*o<Cm))return[T+(o=(i*(x-k)-n*(T-R))/o)*t,x+o*e]}())){var M=T-O[0],N=x-O[1],K=R-O[0],L=k-O[1],P=1/Em((1<(i=(M*K+N*L)/(wm(M*M+N*N)*wm(K*K+L*L)))?0:i<-1?Tm:Math.acos(i))/2),F=wm(O[0]*O[0]+O[1]*O[1]);_=_m(b,(n-F)/(P-1)),E=_m(b,(o-F)/(1+P))}}Cm<m?Cm<E?(c=Mm(S,A,T,x,o,E,l),u=Mm(R,k,D,I,o,E,l),G.moveTo(c.cx+c.x01,c.cy+c.y01),E<b?G.arc(c.cx,c.cy,E,vm(c.y01,c.x01),vm(u.y01,u.x01),!l):(G.arc(c.cx,c.cy,E,vm(c.y01,c.x01),vm(c.y11,c.x11),!l),G.arc(0,0,o,vm(c.cy+c.y11,c.cx+c.x11),vm(u.cy+u.y11,u.cx+u.x11),!l),G.arc(u.cx,u.cy,E,vm(u.y11,u.x11),vm(u.y01,u.x01),!l))):(G.moveTo(T,x),G.arc(0,0,o,d,h,!l)):G.moveTo(T,x),Cm<n&&Cm<g?Cm<_?(c=Mm(D,I,R,k,n,-_,l),u=Mm(T,x,S,A,n,-_,l),G.lineTo(c.cx+c.x01,c.cy+c.y01),_<b?G.arc(c.cx,c.cy,_,vm(c.y01,c.x01),vm(u.y01,u.x01),!l):(G.arc(c.cx,c.cy,_,vm(c.y01,c.x01),vm(c.y11,c.x11),!l),G.arc(0,0,n,vm(c.cy+c.y11,c.cx+c.x11),vm(u.cy+u.y11,u.cx+u.x11),l),G.arc(u.cx,u.cy,_,vm(u.y11,u.x11),vm(u.y01,u.x01),!l))):G.arc(0,0,n,f,p,l):G.lineTo(D,I)}else G.moveTo(0,0);if(G.closePath(),t)return G=null,t+""||null}return e.centroid=function(){var t=(+B.apply(this,arguments)+ +H.apply(this,arguments))/2,e=(+V.apply(this,arguments)+ +j.apply(this,arguments))/2-Tm/2;return[ym(e)*t,Em(e)*t]},e.innerRadius=function(t){return arguments.length?(B="function"==typeof t?t:gm(+t),e):B},e.outerRadius=function(t){return arguments.length?(H="function"==typeof t?t:gm(+t),e):H},e.cornerRadius=function(t){return arguments.length?(z="function"==typeof t?t:gm(+t),e):z},e.padRadius=function(t){return arguments.length?($=null==t?null:"function"==typeof t?t:gm(+t),e):$},e.startAngle=function(t){return arguments.length?(V="function"==typeof t?t:gm(+t),e):V},e.endAngle=function(t){return arguments.length?(j="function"==typeof t?t:gm(+t),e):j},e.padAngle=function(t){return arguments.length?(W="function"==typeof t?t:gm(+t),e):W},e.context=function(t){return arguments.length?(G=null==t?null:t,e):G},e},H.area=Bm,H.line=Fm,H.pie=function(){var f=zm,g=Hm,m=null,v=gm(0),y=gm(Dm),b=gm(0);function e(i){var t,e,n,o,r,s=i.length,a=0,l=new Array(s),c=new Array(s),u=+v.apply(this,arguments),d=Math.min(Dm,Math.max(-Dm,y.apply(this,arguments)-u)),h=Math.min(Math.abs(d)/s,b.apply(this,arguments)),p=h*(d<0?-1:1);for(t=0;t<s;++t)0<(r=c[l[t]=t]=+f(i[t],t,i))&&(a+=r);for(null!=g?l.sort(function(t,e){return g(c[t],c[e])}):null!=m&&l.sort(function(t,e){return m(i[t],i[e])}),t=0,n=a?(d-s*p)/a:0;t<s;++t,u=o)e=l[t],o=u+(0<(r=c[e])?r*n:0)+p,c[e]={data:i[e],index:t,value:r,startAngle:u,endAngle:o,padAngle:h};return c}return e.value=function(t){return arguments.length?(f="function"==typeof t?t:gm(+t),e):f},e.sortValues=function(t){return arguments.length?(g=t,m=null,e):g},e.sort=function(t){return arguments.length?(m=t,g=null,e):m},e.startAngle=function(t){return arguments.length?(v="function"==typeof t?t:gm(+t),e):v},e.endAngle=function(t){return arguments.length?(y="function"==typeof t?t:gm(+t),e):y},e.padAngle=function(t){return arguments.length?(b="function"==typeof t?t:gm(+t),e):b},e},H.areaRadial=qm,H.radialArea=qm,H.lineRadial=Gm,H.radialLine=Gm,H.pointRadial=Um,H.linkHorizontal=function(){return Qm(Jm)},H.linkVertical=function(){return Qm(tv)},H.linkRadial=function(){var t=Qm(ev);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},H.symbol=function(){var e=gm(iv),i=gm(64),n=null;function o(){var t;if(n=n||(t=Co()),e.apply(this,arguments).draw(n,+i.apply(this,arguments)),t)return n=null,t+""||null}return o.type=function(t){return arguments.length?(e="function"==typeof t?t:gm(t),o):e},o.size=function(t){return arguments.length?(i="function"==typeof t?t:gm(+t),o):i},o.context=function(t){return arguments.length?(n=null==t?null:t,o):n},o},H.symbols=yv,H.symbolCircle=iv,H.symbolCross=nv,H.symbolDiamond=sv,H.symbolSquare=dv,H.symbolStar=uv,H.symbolTriangle=pv,H.symbolWye=vv,H.curveBasisClosed=function(t){return new wv(t)},H.curveBasisOpen=function(t){return new Cv(t)},H.curveBasis=function(t){return new Ev(t)},H.curveBundle=xv,H.curveCardinalClosed=kv,H.curveCardinalOpen=Av,H.curveCardinal=Ov,H.curveCatmullRomClosed=Pv,H.curveCatmullRomOpen=Bv,H.curveCatmullRom=Kv,H.curveLinearClosed=function(t){return new Hv(t)},H.curveLinear=Km,H.curveMonotoneX=function(t){return new Wv(t)},H.curveMonotoneY=function(t){return new Gv(t)},H.curveNatural=function(t){return new Uv(t)},H.curveStep=function(t){return new Xv(t,.5)},H.curveStepAfter=function(t){return new Xv(t,1)},H.curveStepBefore=function(t){return new Xv(t,0)},H.stack=function(){var d=gm([]),h=Qv,p=Zv,f=Jv;function e(t){var e,i,n=d.apply(this,arguments),o=t.length,r=n.length,s=new Array(r);for(e=0;e<r;++e){for(var a,l=n[e],c=s[e]=new Array(o),u=0;u<o;++u)c[u]=a=[0,+f(t[u],l,u,t)],a.data=t[u];c.key=l}for(e=0,i=h(s);e<r;++e)s[i[e]].index=e;return p(s,i),s}return e.keys=function(t){return arguments.length?(d="function"==typeof t?t:gm(Ym.call(t)),e):d},e.value=function(t){return arguments.length?(f="function"==typeof t?t:gm(+t),e):f},e.order=function(t){return arguments.length?(h=null==t?Qv:"function"==typeof t?t:gm(Ym.call(t)),e):h},e.offset=function(t){return arguments.length?(p=null==t?Zv:t,e):p},e},H.stackOffsetExpand=function(t,e){if(0<(n=t.length)){for(var i,n,o,r=0,s=t[0].length;r<s;++r){for(o=i=0;i<n;++i)o+=t[i][r][1]||0;if(o)for(i=0;i<n;++i)t[i][r][1]/=o}Zv(t,e)}},H.stackOffsetDiverging=function(t,e){if(1<(a=t.length))for(var i,n,o,r,s,a,l=0,c=t[e[0]].length;l<c;++l)for(r=s=0,i=0;i<a;++i)0<=(o=(n=t[e[i]][l])[1]-n[0])?(n[0]=r,n[1]=r+=o):o<0?(n[1]=s,n[0]=s+=o):n[0]=r},H.stackOffsetNone=Zv,H.stackOffsetSilhouette=function(t,e){if(0<(i=t.length)){for(var i,n=0,o=t[e[0]],r=o.length;n<r;++n){for(var s=0,a=0;s<i;++s)a+=t[s][n][1]||0;o[n][1]+=o[n][0]=-a/2}Zv(t,e)}},H.stackOffsetWiggle=function(t,e){if(0<(o=t.length)&&0<(n=(i=t[e[0]]).length)){for(var i,n,o,r=0,s=1;s<n;++s){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],d=u[s][1]||0,h=(d-(u[s-1][1]||0))/2,p=0;p<a;++p){var f=t[e[p]];h+=(f[s][1]||0)-(f[s-1][1]||0)}l+=d,c+=h*d}i[s-1][1]+=i[s-1][0]=r,l&&(r-=c/l)}i[s-1][1]+=i[s-1][0]=r,Zv(t,e)}},H.stackOrderAppearance=ty,H.stackOrderAscending=iy,H.stackOrderDescending=function(t){return iy(t).reverse()},H.stackOrderInsideOut=function(t){var e,i,n=t.length,o=t.map(ny),r=ty(t),s=0,a=0,l=[],c=[];for(e=0;e<n;++e)i=r[e],s<a?(s+=o[i],l.push(i)):(a+=o[i],c.push(i));return c.reverse().concat(l)},H.stackOrderNone=Qv,H.stackOrderReverse=function(t){return Qv(t).reverse()},H.timeInterval=dh,H.timeMillisecond=hh,H.timeMilliseconds=ph,H.utcMillisecond=hh,H.utcMilliseconds=ph,H.timeSecond=fh,H.timeSeconds=gh,H.utcSecond=fh,H.utcSeconds=gh,H.timeMinute=mh,H.timeMinutes=vh,H.timeHour=yh,H.timeHours=bh,H.timeDay=_h,H.timeDays=Eh,H.timeWeek=Ch,H.timeWeeks=kh,H.timeSunday=Ch,H.timeSundays=kh,H.timeMonday=Th,H.timeMondays=Sh,H.timeTuesday=xh,H.timeTuesdays=Ah,H.timeWednesday=Dh,H.timeWednesdays=Mh,H.timeThursday=Ih,H.timeThursdays=Nh,H.timeFriday=Oh,H.timeFridays=Kh,H.timeSaturday=Rh,H.timeSaturdays=Lh,H.timeMonth=Ph,H.timeMonths=Fh,H.timeYear=Bh,H.timeYears=Hh,H.utcMinute=zh,H.utcMinutes=$h,H.utcHour=Vh,H.utcHours=jh,H.utcDay=Wh,H.utcDays=Gh,H.utcWeek=Uh,H.utcWeeks=ep,H.utcSunday=Uh,H.utcSundays=ep,H.utcMonday=Yh,H.utcMondays=ip,H.utcTuesday=Xh,H.utcTuesdays=np,H.utcWednesday=Zh,H.utcWednesdays=op,H.utcThursday=Qh,H.utcThursdays=rp,H.utcFriday=Jh,H.utcFridays=sp,H.utcSaturday=tp,H.utcSaturdays=ap,H.utcMonth=lp,H.utcMonths=cp,H.utcYear=up,H.utcYears=dp,H.timeFormatDefaultLocale=Of,H.timeFormatLocale=gp,H.isoFormat=Rf,H.isoParse=kf,H.now=zi,H.timer=ji,H.timerFlush=Wi,H.timeout=Yi,H.interval=function(i,n,o){var r=new Vi,s=n;return null==n?r.restart(i,n,o):(n=+n,o=null==o?zi():+o,r.restart(function t(e){e+=s,r.restart(t,s+=n,o),i(e)},n,o)),r},H.transition=vn,H.active=function(t,e){var i,n,o=t.__transition;if(o)for(n in e=null==e?null:e+"",o)if((i=o[n]).state>Ji&&i.name===e)return new mn([[t]],zn,e,+n);return null},H.interrupt=un,H.voronoi=function(){var o=ry,r=sy,e=null;function i(n){return new Fy(n.map(function(t,e){var i=[Math.round(o(t,e,n)/Ky)*Ky,Math.round(r(t,e,n)/Ky)*Ky];return i.index=e,i.data=t,i}),e)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(t){return arguments.length?(o="function"==typeof t?t:oy(+t),i):o},i.y=function(t){return arguments.length?(r="function"==typeof t?t:oy(+t),i):r},i.extent=function(t){return arguments.length?(e=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):e&&[[e[0][0],e[0][1]],[e[1][0],e[1][1]]]},i.size=function(t){return arguments.length?(e=null==t?null:[[0,0],[+t[0],+t[1]]],i):e&&[e[1][0]-e[0][0],e[1][1]-e[0][1]]},i},H.zoom=function(){var p,r,a=Gy,u=qy,f=Zy,o=Yy,e=Xy,s=[0,1/0],g=[[-1/0,-1/0],[1/0,1/0]],l=250,d=_i,c=[],i=z("start","zoom","end"),h=500,m=150,v=0;function y(t){t.property("__zoom",Uy).on("wheel.zoom",n).on("mousedown.zoom",x).on("dblclick.zoom",D).filter(e).on("touchstart.zoom",I).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new zy(e,t.x,t.y)}function _(t,e,i){var n=e[0]-i[0]*t.k,o=e[1]-i[1]*t.k;return n===t.x&&o===t.y?t:new zy(t.k,n,o)}function E(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function w(t,l,c){t.on("start.zoom",function(){C(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).end()}).tween("zoom",function(){var t=arguments,n=C(this,t),e=u.apply(this,t),o=c||E(e),r=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),i=this.__zoom,s="function"==typeof l?l.apply(this,t):l,a=d(i.invert(o).concat(r/i.k),s.invert(o).concat(r/s.k));return function(t){if(1===t)t=s;else{var e=a(t),i=r/e[2];t=new zy(i,o[0]-e[0]*i,o[1]-e[1]*i)}n.zoom(null,t)}})}function C(t,e){for(var i,n=0,o=c.length;n<o;++n)if((i=c[n]).that===t)return i;return new T(t,e)}function T(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=u.apply(t,e)}function n(){if(a.apply(this,arguments)){var t=C(this,arguments),e=this.__zoom,i=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,o.apply(this,arguments)))),n=At(this);if(t.wheel)t.mouse[0][0]===n[0]&&t.mouse[0][1]===n[1]||(t.mouse[1]=e.invert(t.mouse[0]=n)),clearTimeout(t.wheel);else{if(e.k===i)return;t.mouse=[n,e.invert(n)],un(this),t.start()}Wy(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},m),t.zoom("mouse",f(_(b(e,i),t.mouse[0],t.mouse[1]),t.extent,g))}}function x(){if(!r&&a.apply(this,arguments)){var i=C(this,arguments),t=Dt(H.event.view).on("mousemove.zoom",function(){if(Wy(),!i.moved){var t=H.event.clientX-n,e=H.event.clientY-o;i.moved=v<t*t+e*e}i.zoom("mouse",f(_(i.that.__zoom,i.mouse[0]=At(i.that),i.mouse[1]),i.extent,g))},!0).on("mouseup.zoom",function(){t.on("mousemove.zoom mouseup.zoom",null),Pt(H.event.view,i.moved),Wy(),i.end()},!0),e=At(this),n=H.event.clientX,o=H.event.clientY;Lt(H.event.view),jy(),i.mouse=[e,this.__zoom.invert(e)],un(this),i.start()}}function D(){if(a.apply(this,arguments)){var t=this.__zoom,e=At(this),i=t.invert(e),n=t.k*(H.event.shiftKey?.5:2),o=f(_(b(t,n),e,i),u.apply(this,arguments),g);Wy(),0<l?Dt(this).transition().duration(l).call(w,o,e):Dt(this).call(y.transform,o)}}function I(){if(a.apply(this,arguments)){var t,e,i,n,o=C(this,arguments),r=H.event.changedTouches,s=r.length;for(jy(),e=0;e<s;++e)n=[n=Mt(this,r,(i=r[e]).identifier),this.__zoom.invert(n),i.identifier],o.touch0?o.touch1||(o.touch1=n):(o.touch0=n,t=!0);if(p&&(p=clearTimeout(p),!o.touch1))return o.end(),void((n=Dt(this).on("dblclick.zoom"))&&n.apply(this,arguments));t&&(p=setTimeout(function(){p=null},h),un(this),o.start())}}function O(){var t,e,i,n,o=C(this,arguments),r=H.event.changedTouches,s=r.length;for(Wy(),p=p&&clearTimeout(p),t=0;t<s;++t)i=Mt(this,r,(e=r[t]).identifier),o.touch0&&o.touch0[2]===e.identifier?o.touch0[0]=i:o.touch1&&o.touch1[2]===e.identifier&&(o.touch1[0]=i);if(e=o.that.__zoom,o.touch1){var a=o.touch0[0],l=o.touch0[1],c=o.touch1[0],u=o.touch1[1],d=(d=c[0]-a[0])*d+(d=c[1]-a[1])*d,h=(h=u[0]-l[0])*h+(h=u[1]-l[1])*h;e=b(e,Math.sqrt(d/h)),i=[(a[0]+c[0])/2,(a[1]+c[1])/2],n=[(l[0]+u[0])/2,(l[1]+u[1])/2]}else{if(!o.touch0)return;i=o.touch0[0],n=o.touch0[1]}o.zoom("touch",f(_(e,i,n),o.extent,g))}function R(){var t,e,i=C(this,arguments),n=H.event.changedTouches,o=n.length;for(jy(),r&&clearTimeout(r),r=setTimeout(function(){r=null},h),t=0;t<o;++t)e=n[t],i.touch0&&i.touch0[2]===e.identifier?delete i.touch0:i.touch1&&i.touch1[2]===e.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):i.end()}return y.transform=function(t,e){var i=t.selection?t.selection():t;i.property("__zoom",Uy),t!==i?w(t,e):i.interrupt().each(function(){C(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},y.scaleBy=function(t,e){y.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)})},y.scaleTo=function(t,r){y.transform(t,function(){var t=u.apply(this,arguments),e=this.__zoom,i=E(t),n=e.invert(i),o="function"==typeof r?r.apply(this,arguments):r;return f(_(b(e,o),i,n),t,g)})},y.translateBy=function(t,e,i){y.transform(t,function(){return f(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof i?i.apply(this,arguments):i),u.apply(this,arguments),g)})},y.translateTo=function(t,n,o){y.transform(t,function(){var t=u.apply(this,arguments),e=this.__zoom,i=E(t);return f($y.translate(i[0],i[1]).scale(e.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof o?-o.apply(this,arguments):-o),t,g)})},T.prototype={start:function(){return 1==++this.active&&(this.index=c.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(c.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){Et(new Hy(y,t,this.that.__zoom),i.apply,i,[t,this.that,this.args])}},y.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:By(+t),y):o},y.filter=function(t){return arguments.length?(a="function"==typeof t?t:By(!!t),y):a},y.touchable=function(t){return arguments.length?(e="function"==typeof t?t:By(!!t),y):e},y.extent=function(t){return arguments.length?(u="function"==typeof t?t:By([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),y):u},y.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],y):[s[0],s[1]]},y.translateExtent=function(t){return arguments.length?(g[0][0]=+t[0][0],g[1][0]=+t[1][0],g[0][1]=+t[0][1],g[1][1]=+t[1][1],y):[[g[0][0],g[0][1]],[g[1][0],g[1][1]]]},y.constrain=function(t){return arguments.length?(f=t,y):f},y.duration=function(t){return arguments.length?(l=+t,y):l},y.interpolate=function(t){return arguments.length?(d=t,y):d},y.on=function(){var t=i.on.apply(i,arguments);return t===i?y:t},y.clickDistance=function(t){return arguments.length?(v=(t=+t)*t,y):Math.sqrt(v)},y},H.zoomTransform=Vy,H.zoomIdentity=$y,Object.defineProperty(H,"__esModule",{value:!0})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).c3=e()}(this,function(){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){this.d3=window.d3?window.d3:"undefined"!=typeof require?require("d3"):void 0,this.api=t,this.config=this.getDefaultConfig(),this.data={},this.cache={},this.axes={}}function n(t){this.internal=new u(this),this.internal.loadConfig(t),this.internal.beforeInit(t),this.internal.init(),this.internal.afterInit(t),function e(i,n,o){Object.keys(i).forEach(function(t){n[t]=i[t].bind(o),0<Object.keys(i[t]).length&&e(i[t],n[t],o)})}(n.prototype,this,this)}function e(t,e){var i=this;i.component=t,i.params=e||{},i.d3=t.d3,i.scale=i.d3.scaleLinear(),i.range,i.orient="bottom",i.innerTickSize=6,i.outerTickSize=this.params.withOuterTick?6:0,i.tickPadding=3,i.tickValues=null,i.tickFormat,i.tickArguments,i.tickOffset=0,i.tickCulling=!0,i.tickCentered,i.tickTextCharSize,i.tickTextRotate=i.params.tickTextRotate,i.tickLength,i.axis=i.generateAxis()}e.prototype.axisX=function(t,e,i){t.attr("transform",function(t){return"translate("+Math.ceil(e(t)+i)+", 0)"})},e.prototype.axisY=function(t,e){t.attr("transform",function(t){return"translate(0,"+Math.ceil(e(t))+")"})},e.prototype.scaleExtent=function(t){var e=t[0],i=t[t.length-1];return e<i?[e,i]:[i,e]},e.prototype.generateTicks=function(t){var e,i,n=[];if(t.ticks)return t.ticks.apply(t,this.tickArguments);for(i=t.domain(),e=Math.ceil(i[0]);e<i[1];e++)n.push(e);return 0<n.length&&0<n[0]&&n.unshift(n[0]-(n[1]-n[0])),n},e.prototype.copyScale=function(){var t,e=this.scale.copy();return this.params.isCategory&&(t=this.scale.domain(),e.domain([t[0],t[1]-1])),e},e.prototype.textFormatted=function(t){var e=this.tickFormat?this.tickFormat(t):t;return void 0!==e?e:""},e.prototype.updateRange=function(){return this.range=this.scale.rangeExtent?this.scale.rangeExtent():this.scaleExtent(this.scale.range()),this.range},e.prototype.updateTickTextCharSize=function(t){var r=this;if(r.tickTextCharSize)return r.tickTextCharSize;var s={h:11.5,w:5.5};return t.select("text").text(function(t){return r.textFormatted(t)}).each(function(t){var e=this.getBoundingClientRect(),i=r.textFormatted(t),n=e.height,o=i?e.width/i.length:void 0;n&&o&&(s.h=n,s.w=o)}).text(""),r.tickTextCharSize=s},e.prototype.isVertical=function(){return"left"===this.orient||"right"===this.orient},e.prototype.tspanData=function(t,e,i){var n=this.params.tickMultiline?this.splitTickText(t,i):[].concat(this.textFormatted(t));return this.params.tickMultiline&&0<this.params.tickMultilineMax&&(n=this.ellipsify(n,this.params.tickMultilineMax)),n.map(function(t){return{index:e,splitted:t,length:n.length}})},e.prototype.splitTickText=function(t,e){var o,r,s,a=this,i=a.textFormatted(t),l=a.params.tickWidth;return"[object Array]"===Object.prototype.toString.call(i)?i:((!l||l<=0)&&(l=a.isVertical()?95:a.params.isCategory?Math.ceil(e(1)-e(0))-12:110),function t(e,i){r=void 0;for(var n=1;n<i.length;n++)if(" "===i.charAt(n)&&(r=n),o=i.substr(0,n+1),s=a.tickTextCharSize.w*o.length,l<s)return t(e.concat(i.substr(0,r||n)),i.slice(r?r+1:n));return e.concat(i)}([],i+""))},e.prototype.ellipsify=function(t,e){if(t.length<=e)return t;for(var i=t.slice(0,e),n=3,o=e-1;0<=o;o--){var r=i[o].length;if(i[o]=i[o].substr(0,r-n).padEnd(r,"."),(n-=r)<=0)break}return i},e.prototype.updateTickLength=function(){this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding},e.prototype.lineY2=function(t){var e=this.scale(t)+(this.tickCentered?0:this.tickOffset);return this.range[0]<e&&e<this.range[1]?this.innerTickSize:0},e.prototype.textY=function(){var t=this.tickTextRotate;return t?11.5-t/15*2.5*(0<t?1:-1):this.tickLength},e.prototype.textTransform=function(){var t=this.tickTextRotate;return t?"rotate("+t+")":""},e.prototype.textTextAnchor=function(){var t=this.tickTextRotate;return t?0<t?"start":"end":"middle"},e.prototype.tspanDx=function(){var t=this.tickTextRotate;return t?8*Math.sin(Math.PI*(t/180)):0},e.prototype.tspanDy=function(t,e){var i=this.tickTextCharSize.h;return 0===e&&(i=this.isVertical()?-((t.length-1)*(this.tickTextCharSize.h/2)-3):".71em"),i},e.prototype.generateAxis=function(){var E=this,w=E.d3,C=E.params;function T(t,b){var _;return t.each(function(){var t,e,i,n=T.g=w.select(this),o=this.__chart__||E.scale,r=this.__chart__=E.copyScale(),s=E.tickValues?E.tickValues:E.generateTicks(r),a=n.selectAll(".tick").data(s,r),l=a.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),c=a.exit().remove(),u=a.merge(l);C.isCategory?(E.tickOffset=Math.ceil((r(1)-r(0))/2),e=E.tickCentered?0:E.tickOffset,i=E.tickCentered?E.tickOffset:0):E.tickOffset=e=0,E.updateRange(),E.updateTickLength(),E.updateTickTextCharSize(n.select(".tick"));var d=u.select("line").merge(l.append("line")),h=u.select("text").merge(l.append("text")),p=u.selectAll("text").selectAll("tspan").data(function(t,e){return E.tspanData(t,e,r)}),f=p.enter().append("tspan").merge(p).text(function(t){return t.splitted});p.exit().remove();var g=n.selectAll(".domain").data([0]),m=g.enter().append("path").merge(g).attr("class","domain");switch(E.orient){case"bottom":t=E.axisX,d.attr("x1",e).attr("x2",e).attr("y2",function(t,e){return E.lineY2(t,e)}),h.attr("x",0).attr("y",function(t,e){return E.textY(t,e)}).attr("transform",function(t,e){return E.textTransform(t,e)}).style("text-anchor",function(t,e){return E.textTextAnchor(t,e)}),f.attr("x",0).attr("dy",function(t,e){return E.tspanDy(t,e)}).attr("dx",function(t,e){return E.tspanDx(t,e)}),m.attr("d","M"+E.range[0]+","+E.outerTickSize+"V0H"+E.range[1]+"V"+E.outerTickSize);break;case"top":t=E.axisX,d.attr("x1",e).attr("x2",e).attr("y2",function(t,e){return-1*E.lineY2(t,e)}),h.attr("x",0).attr("y",function(t,e){return-1*E.textY(t,e)-(C.isCategory?2:E.tickLength-2)}).attr("transform",function(t,e){return E.textTransform(t,e)}).style("text-anchor",function(t,e){return E.textTextAnchor(t,e)}),f.attr("x",0).attr("dy",function(t,e){return E.tspanDy(t,e)}).attr("dx",function(t,e){return E.tspanDx(t,e)}),m.attr("d","M"+E.range[0]+","+-E.outerTickSize+"V0H"+E.range[1]+"V"+-E.outerTickSize);break;case"left":t=E.axisY,d.attr("x2",-E.innerTickSize).attr("y1",i).attr("y2",i),h.attr("x",-E.tickLength).attr("y",E.tickOffset).style("text-anchor","end"),f.attr("x",-E.tickLength).attr("dy",function(t,e){return E.tspanDy(t,e)}),m.attr("d","M"+-E.outerTickSize+","+E.range[0]+"H0V"+E.range[1]+"H"+-E.outerTickSize);break;case"right":t=E.axisY,d.attr("x2",E.innerTickSize).attr("y1",i).attr("y2",i),h.attr("x",E.tickLength).attr("y",E.tickOffset).style("text-anchor","start"),f.attr("x",E.tickLength).attr("dy",function(t,e){return E.tspanDy(t,e)}),m.attr("d","M"+E.outerTickSize+","+E.range[0]+"H0V"+E.range[1]+"H"+E.outerTickSize)}if(r.rangeBand){var v=r,y=v.rangeBand()/2;o=r=function(t){return v(t)+y}}else o.rangeBand?o=r:c.call(t,r,E.tickOffset);l.call(t,o,E.tickOffset),_=(b?u.transition(b):u).style("opacity",1).call(t,r,E.tickOffset)}),_}return T.scale=function(t){return arguments.length?(E.scale=t,T):E.scale},T.orient=function(t){return arguments.length?(E.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",T):E.orient},T.tickFormat=function(t){return arguments.length?(E.tickFormat=t,T):E.tickFormat},T.tickCentered=function(t){return arguments.length?(E.tickCentered=t,T):E.tickCentered},T.tickOffset=function(){return E.tickOffset},T.tickInterval=function(){var t;return(t=C.isCategory?2*E.tickOffset:(T.g.select("path.domain").node().getTotalLength()-2*E.outerTickSize)/T.g.selectAll("line").size())==1/0?0:t},T.ticks=function(){return arguments.length?(E.tickArguments=arguments,T):E.tickArguments},T.tickCulling=function(t){return arguments.length?(E.tickCulling=t,T):E.tickCulling},T.tickValues=function(t){if("function"==typeof t)E.tickValues=function(){return t(E.scale.domain())};else{if(!arguments.length)return E.tickValues;E.tickValues=t}return T},T};function r(t){return Math.ceil(t)+.5}function o(t){return 10*Math.ceil(t/10)}function N(t){return t[1]-t[0]}function V(t,e,i){return K(t[e])?t[e]:i}function y(t){var e=t.getBoundingClientRect(),i=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)];return{x:i[0].x,y:Math.min(i[0].y,i[1].y),width:e.width,height:e.height}}function s(t){return Array.isArray(t)}function d(t){return null==t||c(t)&&0===t.length||"object"===a(t)&&0===Object.keys(t).length}function h(t){return"function"==typeof t}function w(t){return void 0===t}function D(t){return t||0===t}function I(t){return!d(t)}function m(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function l(t){!function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),this.owner=t,this.d3=t.d3,this.internal=e}var j={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",colorScale:"c3-colorscale",stanfordElements:"c3-stanford-elements",stanfordLine:"c3-stanford-line",stanfordLines:"c3-stanford-lines",stanfordRegion:"c3-stanford-region",stanfordRegions:"c3-stanford-regions",stanfordText:"c3-stanford-text",stanfordTexts:"c3-stanford-texts",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},K=function(t){return void 0!==t},c=function(t){return"string"==typeof t};l.prototype.init=function(){var t=this.owner,e=t.config,i=t.main;t.axes.x=i.append("g").attr("class",j.axis+" "+j.axisX).attr("clip-path",e.axis_x_inner?"":t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",j.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=i.append("g").attr("class",j.axis+" "+j.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",j.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=i.append("g").attr("class",j.axis+" "+j.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",j.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},l.prototype.getXAxis=function(t,e,i,n,o,r,s){var a=this.owner,l=a.config,c={isCategory:a.isCategorized(),withOuterTick:o,tickMultiline:l.axis_x_tick_multiline,tickMultilineMax:l.axis_x_tick_multiline?Number(l.axis_x_tick_multilineMax):0,tickWidth:l.axis_x_tick_width,tickTextRotate:s?0:l.axis_x_tick_rotate,withoutTransition:r},u=new this.internal(this,c).axis.scale(t).orient(e);return a.isTimeSeries()&&n&&"function"!=typeof n&&(n=n.map(function(t){return a.parseDate(t)})),u.tickFormat(i).tickValues(n),a.isCategorized()&&(u.tickCentered(l.axis_x_tick_centered),d(l.axis_x_tick_culling)&&(l.axis_x_tick_culling=!1)),u},l.prototype.updateXAxisTickValues=function(t,e){var i,n=this.owner,o=n.config;return(o.axis_x_tick_fit||o.axis_x_tick_count)&&(i=this.generateTickValues(n.mapTargetsToUniqueXs(t),o.axis_x_tick_count,n.isTimeSeries())),e?e.tickValues(i):(n.xAxis.tickValues(i),n.subXAxis.tickValues(i)),i},l.prototype.getYAxis=function(t,e,i,n,o,r,s){var a=this.owner,l=a.config,c={withOuterTick:o,withoutTransition:r,tickTextRotate:s?0:l.axis_y_tick_rotate},u=new this.internal(this,c).axis.scale(t).orient(e).tickFormat(i);return a.isTimeSeriesY()?u.ticks(l.axis_y_tick_time_type,l.axis_y_tick_time_interval):u.tickValues(n),u},l.prototype.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},l.prototype.getXAxisTickFormat=function(){var e=this.owner,i=e.config,n=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(t){return t};return i.axis_x_tick_format&&(h(i.axis_x_tick_format)?n=i.axis_x_tick_format:e.isTimeSeries()&&(n=function(t){return t?e.axisTimeFormat(i.axis_x_tick_format)(t):""})),h(n)?function(t){return n.call(e,t)}:n},l.prototype.getTickValues=function(t,e){return t||(e?e.tickValues():void 0)},l.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},l.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},l.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},l.prototype.getLabelOptionByAxisId=function(t){var e,i=this.owner.config;return"y"===t?e=i.axis_y_label:"y2"===t?e=i.axis_y2_label:"x"===t&&(e=i.axis_x_label),e},l.prototype.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return c(e)?e:e?e.text:null},l.prototype.setLabelText=function(t,e){var i=this.owner.config,n=this.getLabelOptionByAxisId(t);c(n)?"y"===t?i.axis_y_label=e:"y2"===t?i.axis_y2_label=e:"x"===t&&(i.axis_x_label=e):n&&(n.text=e)},l.prototype.getLabelPosition=function(t,e){var i=this.getLabelOptionByAxisId(t),n=i&&"object"===a(i)&&i.position?i.position:e;return{isInner:0<=n.indexOf("inner"),isOuter:0<=n.indexOf("outer"),isLeft:0<=n.indexOf("left"),isCenter:0<=n.indexOf("center"),isRight:0<=n.indexOf("right"),isTop:0<=n.indexOf("top"),isMiddle:0<=n.indexOf("middle"),isBottom:0<=n.indexOf("bottom")}},l.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},l.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},l.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},l.prototype.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},l.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},l.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},l.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},l.prototype.xForAxisLabel=function(t,e){var i=this.owner;return t?e.isLeft?0:e.isCenter?i.width/2:i.width:e.isBottom?-i.height:e.isMiddle?-i.height/2:0},l.prototype.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},l.prototype.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},l.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},l.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},l.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},l.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},l.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},l.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},l.prototype.dyForXAxisLabel=function(){var t=this.owner,e=t.config,i=this.getXAxisLabelPosition();return e.axis_rotated?i.isInner?"1.2em":-25-(t.config.axis_x_inner?0:this.getMaxTickWidth("x")):i.isInner?"-0.5em":e.axis_x_height?e.axis_x_height-10:"3em"},l.prototype.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},l.prototype.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},l.prototype.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},l.prototype.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},l.prototype.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},l.prototype.getMaxTickWidth=function(t,e){var i,n,o,r,s=this.owner,a=s.config,l=0;return e&&s.currentMaxTickWidths[t]||(s.svg&&(i=s.filterTargetsToShow(s.data.targets),"y"===t?(n=s.y.copy().domain(s.getYDomain(i,"y")),o=this.getYAxis(n,s.yOrient,a.axis_y_tick_format,s.yAxisTickValues,!1,!0,!0)):"y2"===t?(n=s.y2.copy().domain(s.getYDomain(i,"y2")),o=this.getYAxis(n,s.y2Orient,a.axis_y2_tick_format,s.y2AxisTickValues,!1,!0,!0)):(n=s.x.copy().domain(s.getXDomain(i)),o=this.getXAxis(n,s.xOrient,s.xAxisTickFormat,s.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(i,o)),(r=s.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(o).each(function(){s.d3.select(this).selectAll("text").each(function(){var t=this.getBoundingClientRect();l<t.width&&(l=t.width)}),r.remove()})),s.currentMaxTickWidths[t]=l<=0?s.currentMaxTickWidths[t]:l),s.currentMaxTickWidths[t]},l.prototype.updateLabels=function(t){var e=this.owner,i=e.main.select("."+j.axisX+" ."+j.axisXLabel),n=e.main.select("."+j.axisY+" ."+j.axisYLabel),o=e.main.select("."+j.axisY2+" ."+j.axisY2Label);(t?i.transition():i).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?n.transition():n).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?o.transition():o).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},l.prototype.getPadding=function(t,e,i,n){var o="number"==typeof t?t:t[e];return D(o)?"ratio"===t.unit?t[e]*n:this.convertPixelsToAxisPadding(o,n):i},l.prototype.convertPixelsToAxisPadding=function(t,e){var i=this.owner;return e*(t/(i.config.axis_rotated?i.width:i.height))},l.prototype.generateTickValues=function(t,e,i){var n,o,r,s,a,l,c,u=t;if(e)if(1===(n=h(e)?e():e))u=[t[0]];else if(2===n)u=[t[0],t[t.length-1]];else if(2<n){for(s=n-2,o=t[0],a=((r=t[t.length-1])-o)/(1+s),u=[o],l=0;l<s;l++)c=+o+a*(l+1),u.push(i?new Date(c):c);u.push(r)}return i||(u=u.sort(function(t,e){return t-e})),u},l.prototype.generateTransitions=function(t){var e=this.owner.axes;return{axisX:t?e.x.transition().duration(t):e.x,axisY:t?e.y.transition().duration(t):e.y,axisY2:t?e.y2.transition().duration(t):e.y2,axisSubX:t?e.subx.transition().duration(t):e.subx}},l.prototype.redraw=function(t,e){var i=this.owner,n=t?i.d3.transition().duration(t):null;i.axes.x.style("opacity",e?0:1).call(i.xAxis,n),i.axes.y.style("opacity",e?0:1).call(i.yAxis,n),i.axes.y2.style("opacity",e?0:1).call(i.y2Axis,n),i.axes.subx.style("opacity",e?0:1).call(i.subXAxis,n)};var t={version:"0.7.0",chart:{fn:n.prototype,internal:{fn:u.prototype,axis:{fn:l.prototype,internal:{fn:e.prototype}}}},generate:function(t){return new n(t)}};function p(t){return t/Math.pow(10,Math.ceil(Math.log(t)/Math.LN10-1e-12))==1}u.prototype.beforeInit=function(){},u.prototype.afterInit=function(){},u.prototype.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},u.prototype.initParams=function(){var t=this,e=t.d3,i=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeParse=(i.data_xLocaltime?e.timeParse:e.utcParse)(t.config.data_xFormat),t.axisTimeFormat=i.axis_x_localtime?e.timeFormat:e.utcFormat,t.defaultAxisTimeFormat=function(t){return t.getMilliseconds()?e.timeFormat(".%L")(t):t.getSeconds()?e.timeFormat(":%S")(t):t.getMinutes()?e.timeFormat("%I:%M")(t):t.getHours()?e.timeFormat("%I %p")(t):t.getDay()&&1!==t.getDate()?e.timeFormat("%-m/%-d")(t):1!==t.getDate()?e.timeFormat("%-m/%-d")(t):t.getMonth()?e.timeFormat("%-m/%-d")(t):e.timeFormat("%Y/%-m/%-d")(t)},t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=i.axis_rotated?i.axis_x_inner?"right":"left":i.axis_x_inner?"top":"bottom",t.yOrient=i.axis_rotated?i.axis_y_inner?"top":"bottom":i.axis_y_inner?"right":"left",t.y2Orient=i.axis_rotated?i.axis_y2_inner?"bottom":"top":i.axis_y2_inner?"left":"right",t.subXOrient=i.axis_rotated?"left":"bottom",t.isLegendRight="right"===i.legend_position,t.isLegendInset="inset"===i.legend_position,t.isLegendTop="top-left"===i.legend_inset_anchor||"top-right"===i.legend_inset_anchor,t.isLegendLeft="top-left"===i.legend_inset_anchor||"bottom-left"===i.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=i.axis_rotated&&!i.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},u.prototype.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},u.prototype.initWithData=function(t){var e,i,n=this,o=n.d3,r=n.config,s=!0;n.axis=new l(n),r.bindto?"function"==typeof r.bindto.node?n.selectChart=r.bindto:n.selectChart=o.select(r.bindto):n.selectChart=o.selectAll([]),n.selectChart.empty()&&(n.selectChart=o.select(document.createElement("div")).style("opacity",0),n.observeInserted(n.selectChart),s=!1),n.selectChart.html("").classed("c3",!0),n.data.xs={},n.data.targets=n.convertDataToTargets(t),r.data_filter&&(n.data.targets=n.data.targets.filter(r.data_filter)),r.data_hide&&n.addHiddenTargetIds(!0===r.data_hide?n.mapToIds(n.data.targets):r.data_hide),r.legend_hide&&n.addHiddenLegendIds(!0===r.legend_hide?n.mapToIds(n.data.targets):r.legend_hide),n.isStanfordGraphType()&&n.initStanfordData(),n.updateSizes(),n.updateScales(),n.x.domain(o.extent(n.getXDomain(n.data.targets))),n.y.domain(n.getYDomain(n.data.targets,"y")),n.y2.domain(n.getYDomain(n.data.targets,"y2")),n.subX.domain(n.x.domain()),n.subY.domain(n.y.domain()),n.subY2.domain(n.y2.domain()),n.orgXDomain=n.x.domain(),n.svg=n.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return r.onmouseover.call(n)}).on("mouseleave",function(){return r.onmouseout.call(n)}),n.config.svg_classname&&n.svg.attr("class",n.config.svg_classname),e=n.svg.append("defs"),n.clipChart=n.appendClip(e,n.clipId),n.clipXAxis=n.appendClip(e,n.clipIdForXAxis),n.clipYAxis=n.appendClip(e,n.clipIdForYAxis),n.clipGrid=n.appendClip(e,n.clipIdForGrid),n.clipSubchart=n.appendClip(e,n.clipIdForSubchart),n.updateSvgSize(),i=n.main=n.svg.append("g").attr("transform",n.getTranslate("main")),n.initPie&&n.initPie(),n.initDragZoom&&n.initDragZoom(),n.initSubchart&&n.initSubchart(),n.initTooltip&&n.initTooltip(),n.initLegend&&n.initLegend(),n.initTitle&&n.initTitle(),n.initZoom&&n.initZoom(),n.isStanfordGraphType()&&n.drawColorScale(),n.initSubchartBrush&&n.initSubchartBrush(),i.append("text").attr("class",j.text+" "+j.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),n.initRegion(),n.initGrid(),i.append("g").attr("clip-path",n.clipPath).attr("class",j.chart),r.grid_lines_front&&n.initGridLines(),n.initStanfordElements(),n.initEventRect(),n.initChartElements(),n.axis.init(),n.updateTargets(n.data.targets),r.axis_x_selection&&n.brush.selectionAsValue(n.getDefaultSelection()),s&&(n.updateDimension(),n.config.oninit.call(n),n.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),n.bindResize(),n.bindWindowFocus(),n.api.element=n.selectChart.node()},u.prototype.smoothLines=function(t,e){var r=this;"grid"===e&&t.each(function(){var t=r.d3.select(this),e=t.attr("x1"),i=t.attr("x2"),n=t.attr("y1"),o=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(i),y1:Math.ceil(n),y2:Math.ceil(o)})})},u.prototype.updateSizes=function(){var t=this,e=t.config,i=t.legend?t.getLegendHeight():0,n=t.legend?t.getLegendWidth():0,o=t.isLegendRight||t.isLegendInset?0:i,r=t.hasArcType(),s=e.axis_rotated||r?0:t.getHorizontalAxisHeight("x"),a=e.subchart_show&&!r?e.subchart_size_height+s:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:r?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+o+t.getCurrentPaddingBottom(),left:a+(r?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:r?0:t.getCurrentPaddingRight(),bottom:s+a+o+t.getCurrentPaddingBottom(),left:r?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+o,left:t.rotated_padding_left}:{top:t.currentHeight-a-o,right:NaN,bottom:s+o,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(i,n),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?n+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&!e.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&r&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},u.prototype.updateTargets=function(t){this.updateTargetsForText(t),this.updateTargetsForBar(t),this.updateTargetsForLine(t),this.hasArcType()&&this.updateTargetsForArc&&this.updateTargetsForArc(t),this.updateTargetsForSubchart&&this.updateTargetsForSubchart(t),this.showTargets()},u.prototype.showTargets=function(){var e=this;e.svg.selectAll("."+j.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},u.prototype.redraw=function(t,e){var i,n,o,r,s,a,l,c,u,d,h,p,f,g,m,v,y,b,_,E,w,C,T,x,D,I,O,R,k,S,A,M=this,N=M.main,K=M.d3,L=M.config,P=M.getShapeIndices(M.isAreaType),F=M.getShapeIndices(M.isBarType),B=M.getShapeIndices(M.isLineType),H=M.hasArcType(),z=M.filterTargetsToShow(M.data.targets),$=M.xv.bind(M);if(i=V(t=t||{},"withY",!0),n=V(t,"withSubchart",!0),o=V(t,"withTransition",!0),a=V(t,"withTransform",!1),l=V(t,"withUpdateXDomain",!1),c=V(t,"withUpdateOrgXDomain",!1),u=V(t,"withTrimXDomain",!0),f=V(t,"withUpdateXAxis",l),d=V(t,"withLegend",!1),h=V(t,"withEventRect",!0),p=V(t,"withDimension",!0),r=V(t,"withTransitionForExit",o),s=V(t,"withTransitionForAxis",o),_=o?L.transition_duration:0,E=r?_:0,w=s?_:0,e=e||M.axis.generateTransitions(w),d&&L.legend_show?M.updateLegend(M.mapToIds(M.data.targets),t,e):p&&M.updateDimension(!0),M.isCategorized()&&0===z.length&&M.x.domain([0,M.axes.x.selectAll(".tick").size()]),z.length?(M.updateXDomain(z,l,c,u),L.axis_x_tick_values||(I=M.axis.updateXAxisTickValues(z))):(M.xAxis.tickValues([]),M.subXAxis.tickValues([])),L.zoom_rescale&&!t.flow&&(k=M.x.orgDomain()),M.y.domain(M.getYDomain(z,"y",k)),M.y2.domain(M.getYDomain(z,"y2",k)),!L.axis_y_tick_values&&L.axis_y_tick_count&&M.yAxis.tickValues(M.axis.generateTickValues(M.y.domain(),L.axis_y_tick_count)),!L.axis_y2_tick_values&&L.axis_y2_tick_count&&M.y2Axis.tickValues(M.axis.generateTickValues(M.y2.domain(),L.axis_y2_tick_count)),M.axis.redraw(w,H),M.axis.updateLabels(o),(l||f)&&z.length)if(L.axis_x_tick_culling&&I){for(O=1;O<I.length;O++)if(I.length/O<L.axis_x_tick_culling_max){R=O;break}M.svg.selectAll("."+j.axisX+" .tick text").each(function(t){var e=I.indexOf(t);0<=e&&K.select(this).style("display",e%R?"none":"block")})}else M.svg.selectAll("."+j.axisX+" .tick text").style("display","block");g=M.generateDrawArea?M.generateDrawArea(P,!1):void 0,m=M.generateDrawBar?M.generateDrawBar(F):void 0,v=M.generateDrawLine?M.generateDrawLine(B,!1):void 0,y=M.generateXYForText(P,F,B,!0),b=M.generateXYForText(P,F,B,!1),M.updateCircleY(),S=(M.config.axis_rotated?M.circleY:M.circleX).bind(M),A=(M.config.axis_rotated?M.circleX:M.circleY).bind(M),i&&(M.subY.domain(M.getYDomain(z,"y")),M.subY2.domain(M.getYDomain(z,"y2"))),M.updateXgridFocus(),N.select("text."+j.text+"."+j.empty).attr("x",M.width/2).attr("y",M.height/2).text(L.data_empty_label_text).transition().style("opacity",z.length?0:1),h&&M.redrawEventRect(),M.updateGrid(_),M.updateStanfordElements(_),M.updateRegion(_),M.updateBar(E),M.updateLine(E),M.updateArea(E),M.updateCircle(S,A),M.hasDataLabel()&&M.updateText(y,b,E),M.redrawTitle&&M.redrawTitle(),M.redrawArc&&M.redrawArc(_,E,a),M.redrawSubchart&&M.redrawSubchart(n,e,_,E,P,F,B),M.isStanfordGraphType()&&M.drawColorScale(),N.selectAll("."+j.selectedCircles).filter(M.isBarType.bind(M)).selectAll("circle").remove(),t.flow&&(x=M.generateFlow({targets:z,flow:t.flow,duration:t.flow.duration,drawBar:m,drawLine:v,drawArea:g,cx:S,cy:A,xv:$,xForText:y,yForText:b})),M.isTabVisible()&&(_?(D=K.transition().duration(_),C=[],[M.redrawBar(m,!0,D),M.redrawLine(v,!0,D),M.redrawArea(g,!0,D),M.redrawCircle(S,A,!0,D),M.redrawText(y,b,t.flow,!0,D),M.redrawRegion(!0,D),M.redrawGrid(!0,D)].forEach(function(t){t.forEach(function(t){C.push(t)})}),T=M.generateWait(),C.forEach(function(t){T.add(t)}),T(function(){x&&x(),L.onrendered&&L.onrendered.call(M)})):(M.redrawBar(m),M.redrawLine(v),M.redrawArea(g),M.redrawCircle(S,A),M.redrawText(y,b,t.flow),M.redrawRegion(),M.redrawGrid(),x&&x(),L.onrendered&&L.onrendered.call(M))),M.mapToIds(M.data.targets).forEach(function(t){M.withoutFadeIn[t]=!0})},u.prototype.updateAndRedraw=function(t){var e,i=this.config;(t=t||{}).withTransition=V(t,"withTransition",!0),t.withTransform=V(t,"withTransform",!1),t.withLegend=V(t,"withLegend",!1),t.withUpdateXDomain=V(t,"withUpdateXDomain",!0),t.withUpdateOrgXDomain=V(t,"withUpdateOrgXDomain",!0),t.withTransitionForExit=!1,t.withTransitionForTransform=V(t,"withTransitionForTransform",t.withTransition),this.updateSizes(),t.withLegend&&i.legend_show||(e=this.axis.generateTransitions(t.withTransitionForAxis?i.transition_duration:0),this.updateScales(),this.updateSvgSize(),this.transformAll(t.withTransitionForTransform,e)),this.redraw(t,e)},u.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},u.prototype.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},u.prototype.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},u.prototype.isCustomX=function(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||I(t.data_xs))},u.prototype.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},u.prototype.getTranslate=function(t){var e,i,n=this,o=n.config;return"main"===t?(e=r(n.margin.left),i=r(n.margin.top)):"context"===t?(e=r(n.margin2.left),i=r(n.margin2.top)):"legend"===t?(e=n.margin3.left,i=n.margin3.top):"x"===t?(e=0,i=o.axis_rotated?0:n.height):"y"===t?(e=0,i=o.axis_rotated?n.height:0):"y2"===t?(e=o.axis_rotated?0:n.width,i=o.axis_rotated?1:0):"subx"===t?(e=0,i=o.axis_rotated?0:n.height2):"arc"===t&&(e=n.arcWidth/2,i=n.arcHeight/2-(n.hasType("gauge")?6:0)),"translate("+e+","+i+")"},u.prototype.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0},u.prototype.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},u.prototype.opacityForCircle=function(t){var e=(h(this.config.point_show)?this.config.point_show(t):this.config.point_show)||this.isStanfordType(t)?1:0;return D(t.value)?this.isScatterType(t)?.5:e:0},u.prototype.opacityForText=function(){return this.hasDataLabel()?1:0},u.prototype.xx=function(t){return t?this.x(t.x):null},u.prototype.xvCustom=function(t,e){var i=e?t[e]:t.value;return this.isTimeSeries()?i=this.parseDate(t.value):this.isCategorized()&&"string"==typeof t.value&&(i=this.config.axis_x_categories.indexOf(t.value)),Math.ceil(this.x(i))},u.prototype.yvCustom=function(t,e){var i=t.axis&&"y2"===t.axis?this.y2:this.y,n=e?t[e]:t.value;return Math.ceil(i(n))},u.prototype.xv=function(t){var e=t.value;return this.isTimeSeries()?e=this.parseDate(t.value):this.isCategorized()&&"string"==typeof t.value&&(e=this.config.axis_x_categories.indexOf(t.value)),Math.ceil(this.x(e))},u.prototype.yv=function(t){var e=t.axis&&"y2"===t.axis?this.y2:this.y;return Math.ceil(e(t.value))},u.prototype.subxx=function(t){return t?this.subX(t.x):null},u.prototype.transformMain=function(t,e){var i,n,o,r=this;e&&e.axisX?i=e.axisX:(i=r.main.select("."+j.axisX),t&&(i=i.transition())),e&&e.axisY?n=e.axisY:(n=r.main.select("."+j.axisY),t&&(n=n.transition())),e&&e.axisY2?o=e.axisY2:(o=r.main.select("."+j.axisY2),t&&(o=o.transition())),(t?r.main.transition():r.main).attr("transform",r.getTranslate("main")),i.attr("transform",r.getTranslate("x")),n.attr("transform",r.getTranslate("y")),o.attr("transform",r.getTranslate("y2")),r.main.select("."+j.chartArcs).attr("transform",r.getTranslate("arc"))},u.prototype.transformAll=function(t,e){this.transformMain(t,e),this.config.subchart_show&&this.transformContext(t,e),this.legend&&this.transformLegend(t)},u.prototype.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .overlay");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.selectChart.style("max-height",t.currentHeight+"px")},u.prototype.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},u.prototype.observeInserted=function(e){var i,n=this;"undefined"!=typeof MutationObserver?(i=new MutationObserver(function(t){t.forEach(function(t){"childList"===t.type&&t.previousSibling&&(i.disconnect(),n.intervalForObserveInserted=window.setInterval(function(){e.node().parentNode&&(window.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.brush&&n.brush.update(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})})).observe(e.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},u.prototype.bindResize=function(){var t=this,e=t.config;if(t.resizeFunction=t.generateResize(),t.resizeFunction.add(function(){e.onresize.call(t)}),e.resize_auto&&t.resizeFunction.add(function(){void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout),t.resizeTimeout=window.setTimeout(function(){delete t.resizeTimeout,t.updateAndRedraw({withUpdateXDomain:!1,withUpdateOrgXDomain:!1,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.brush&&t.brush.update()},100)}),t.resizeFunction.add(function(){e.onresized.call(t)}),t.resizeIfElementDisplayed=function(){null!=t.api&&t.api.element.offsetParent&&t.resizeFunction()},window.attachEvent)window.attachEvent("onresize",t.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",t.resizeIfElementDisplayed,!1);else{var i=window.onresize;i?i.add&&i.remove||(i=t.generateResize()).add(window.onresize):i=t.generateResize(),i.add(t.resizeFunction),window.onresize=function(){t.api.element.offsetParent&&i()}}},u.prototype.bindWindowFocus=function(){var t=this;this.windowFocusHandler||(this.windowFocusHandler=function(){t.redraw()},window.addEventListener("focus",this.windowFocusHandler))},u.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",this.windowFocusHandler),delete this.windowFocusHandler},u.prototype.generateResize=function(){var i=[];function t(){i.forEach(function(t){t()})}return t.add=function(t){i.push(t)},t.remove=function(t){for(var e=0;e<i.length;e++)if(i[e]===t){i.splice(e,1);break}},t},u.prototype.endall=function(t,e){var i=0;t.each(function(){++i}).on("end",function(){--i||e.apply(this,arguments)})},u.prototype.generateWait=function(){function t(t){var i=setInterval(function(){if(n.isTabVisible()){var e=0;o.forEach(function(t){if(t.empty())e+=1;else try{t.transition()}catch(t){e+=1}}),e===o.length&&(clearInterval(i),t&&t())}},50)}var n=this,o=[];return t.add=function(t){o.push(t)},t},u.prototype.parseDate=function(t){var e;return t instanceof Date?e=t:"string"==typeof t?e=this.dataTimeParse(t):"object"===a(t)?e=new Date(+t):"number"!=typeof t||isNaN(t)||(e=new Date(+t)),e&&!isNaN(+e)||window.console.error("Failed to parse x '"+t+"' to Date object"),e},u.prototype.isTabVisible=function(){return!document.hidden},u.prototype.getPathBox=y,u.prototype.CLASS=j,"SVGPathSeg"in window||(window.SVGPathSeg=function(t,e,i){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=i},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=i},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=i},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=i},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=i},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(t,e,i,n,o,r,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=i,this._x1=n,this._y1=o,this._x2=r,this._y2=s},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(t,e,i,n,o,r,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=i,this._x1=n,this._y1=o,this._x2=r,this._y2=s},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(t,e,i,n,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=i,this._x1=n,this._y1=o},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(t,e,i,n,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=i,this._x1=n,this._y1=o},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(t,e,i,n,o,r,s,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=i,this._r1=n,this._r2=o,this._angle=r,this._largeArcFlag=s,this._sweepFlag=a},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(t,e,i,n,o,r,s,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=i,this._r1=n,this._r2=o,this._angle=r,this._largeArcFlag=s,this._sweepFlag=a},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,i,n,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=i,this._x2=n,this._y2=o},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,i,n,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=i,this._x2=n,this._y2=o},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=i},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=i},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,i,n,o,r){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,i,n,o,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,i,n,o,r){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,i,n,o,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,i,n){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,i,n){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,i,n,o,r,s){return new window.SVGPathSegArcAbs(void 0,t,e,i,n,o,r,s)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,i,n,o,r,s){return new window.SVGPathSegArcRel(void 0,t,e,i,n,o,r,s)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,i,n){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,i,n){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",this.getAttribute("d"));var i=e.pathSegList.numberOfItems-1;if(i<=0)return 0;do{if(e.pathSegList.removeItem(i),t>e.getTotalLength())break;i--}while(0<i);return i})),"SVGPathSegList"in window||(window.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){if(this._pathElement){var e=!1;t.forEach(function(t){"d"==t.attributeName&&(e=!0)}),e&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(t){t._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},window.SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e>this.numberOfItems&&(e=this.numberOfItems),t._owningPathSegList&&(t=t.clone()),this._list.splice(e,0,t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._checkValidIndex(e),((this._list[e]=t)._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},window.SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._list.push(t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList._pathSegArrayAsString=function(t){var e="",i=!0;return t.forEach(function(t){i?(i=!1,e+=t._asPathString()):e+=" "+t._asPathString()}),e},window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];function e(){this.pathSegList=[]}var n=this;e.prototype.appendSegment=function(t){this.pathSegList.push(t)};function i(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()}i.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)},i.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},i.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},i.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},i.prototype.peekSegmentType=function(){var t=this._string[this._currentIndex];return this._pathSegTypeFromChar(t)},i.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},i.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||"0"<=t&&t<="9")&&e!=window.SVGPathSeg.PATHSEG_CLOSEPATH?e==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:e==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:e:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return t==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL},i.prototype._parseNumber=function(){var t=0,e=0,i=1,n=0,o=1,r=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,o=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var a=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=a)for(var l=this._currentIndex-1,c=1;a<=l;)e+=c*(this._string.charAt(l--)-"0"),c*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)i*=10,n+=(this._string.charAt(this._currentIndex)-"0")/i,this._currentIndex+=1}if(this._currentIndex!=s&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)t*=10,t+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var u=e+n;if(u*=o,t&&(u*=Math.pow(10,r*t)),s!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),u}},i.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var t=!1,e=this._string.charAt(this._currentIndex++);if("0"==e)t=!1;else{if("1"!=e)return;t=!0}return this._skipOptionalSpacesOrDelimiter(),t}},i.prototype.parseSegment=function(){var t=this._string[this._currentIndex],e=this._pathSegTypeFromChar(t);if(e==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((e=this._nextCommandHelper(t,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=e){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(n);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(n,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(n,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(n,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(n,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(n,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(n,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(n,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(n,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);default:throw"Unknown path seg type."}};var o=new e,r=new i(t);if(!r.initialCommandIsMoveTo())return[];for(;r.hasMoreData();){var s=r.parseSegment();if(!s)return[];o.appendSegment(s)}return o.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(t,e){return t>>=0,e=String(void 0!==e?e:" "),this.length>t?String(this):((t-=this.length)>e.length&&(e+=e.repeat(t/e.length)),String(this)+e.slice(0,t))}),(n.prototype.axis=function(){}).labels=function(e){var i=this.internal;arguments.length&&(Object.keys(e).forEach(function(t){i.axis.setLabelText(t,e[t])}),i.axis.updateLabels())},n.prototype.axis.max=function(t){var e=this.internal,i=e.config;if(!arguments.length)return{x:i.axis_x_max,y:i.axis_y_max,y2:i.axis_y2_max};"object"===a(t)?(D(t.x)&&(i.axis_x_max=t.x),D(t.y)&&(i.axis_y_max=t.y),D(t.y2)&&(i.axis_y2_max=t.y2)):i.axis_y_max=i.axis_y2_max=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},n.prototype.axis.min=function(t){var e=this.internal,i=e.config;if(!arguments.length)return{x:i.axis_x_min,y:i.axis_y_min,y2:i.axis_y2_min};"object"===a(t)?(D(t.x)&&(i.axis_x_min=t.x),D(t.y)&&(i.axis_y_min=t.y),D(t.y2)&&(i.axis_y2_min=t.y2)):i.axis_y_min=i.axis_y2_min=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},n.prototype.axis.range=function(t){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};K(t.max)&&this.axis.max(t.max),K(t.min)&&this.axis.min(t.min)},n.prototype.category=function(t,e){var i=this.internal,n=i.config;return 1<arguments.length&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},n.prototype.categories=function(t){var e=this.internal,i=e.config;return arguments.length&&(i.axis_x_categories=t,e.redraw()),i.axis_x_categories},n.prototype.resize=function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},n.prototype.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},n.prototype.destroy=function(){var e=this.internal;if(window.clearInterval(e.intervalForObserveInserted),void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),window.detachEvent)window.detachEvent("onresize",e.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",e.resizeIfElementDisplayed);else{var t=window.onresize;t&&t.add&&t.remove&&t.remove(e.resizeFunction)}return e.resizeFunction.remove(),e.unbindWindowFocus(),e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(t){e[t]=null}),null},n.prototype.color=function(t){return this.internal.color(t)},(n.prototype.data=function(e){var t=this.internal.data.targets;return void 0===e?t:t.filter(function(t){return 0<=[].concat(e).indexOf(t.id)})}).shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},n.prototype.data.values=function(t){var e,i=null;return t&&(i=(e=this.data(t))[0]?e[0].values.map(function(t){return t.value}):null),i},n.prototype.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},n.prototype.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},n.prototype.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},n.prototype.flow=function(t){var o,e,i,n,r,s,a,l=this.internal,c=[],u=l.getMaxDataCount(),d=0,h=0;if(t.json)e=l.convertJsonToData(t.json,t.keys);else if(t.rows)e=l.convertRowsToData(t.rows);else{if(!t.columns)return;e=l.convertColumnsToData(t.columns)}o=l.convertDataToTargets(e,!0),l.data.targets.forEach(function(t){var e,i,n=!1;for(e=0;e<o.length;e++)if(t.id===o[e].id){for(n=!0,t.values[t.values.length-1]&&(h=t.values[t.values.length-1].index+1),d=o[e].values.length,i=0;i<d;i++)o[e].values[i].index=h+i,l.isTimeSeries()||(o[e].values[i].x=h+i);t.values=t.values.concat(o[e].values),o.splice(e,1);break}n||c.push(t.id)}),l.data.targets.forEach(function(t){var e,i;for(e=0;e<c.length;e++)if(t.id===c[e])for(h=t.values[t.values.length-1].index+1,i=0;i<d;i++)t.values.push({id:t.id,index:h+i,x:l.isTimeSeries()?l.getOtherTargetX(h+i):h+i,value:null})}),l.data.targets.length&&o.forEach(function(t){var e,i=[];for(e=l.data.targets[0].values[0].index;e<h;e++)i.push({id:t.id,index:e,x:l.isTimeSeries()?l.getOtherTargetX(e):e,value:null});t.values.forEach(function(t){t.index+=h,l.isTimeSeries()||(t.x+=h)}),t.values=i.concat(t.values)}),l.data.targets=l.data.targets.concat(o),l.getMaxDataCount(),r=(n=l.data.targets[0]).values[0],K(t.to)?(d=0,a=l.isTimeSeries()?l.parseDate(t.to):t.to,n.values.forEach(function(t){t.x<a&&d++})):K(t.length)&&(d=t.length),u?1===u&&l.isTimeSeries()&&(s=(n.values[n.values.length-1].x-r.x)/2,i=[new Date(+r.x-s),new Date(+r.x+s)],l.updateXDomain(null,!0,!0,!1,i)):(s=l.isTimeSeries()?1<n.values.length?n.values[n.values.length-1].x-r.x:r.x-l.getXDomain(l.data.targets)[0]:1,i=[r.x-s,r.x],l.updateXDomain(null,!0,!0,!1,i)),l.updateTargets(l.data.targets),l.redraw({flow:{index:r.index,length:d,duration:D(t.duration)?t.duration:l.config.transition_duration,done:t.done,orgDataCount:u},withLegend:!0,withTransition:1<u,withTrimXDomain:!1,withUpdateXAxis:!0})},u.prototype.generateFlow=function(k){var S=this,A=S.config,M=S.d3;return function(){var t,e,n,o,r,s,a,l,c,u,i=k.targets,d=k.flow,h=k.drawBar,p=k.drawLine,f=k.drawArea,g=k.cx,m=k.cy,v=k.xv,y=k.xForText,b=k.yForText,_=k.duration,E=d.index,w=d.length,C=S.getValueOnIndex(S.data.targets[0].values,E),T=S.getValueOnIndex(S.data.targets[0].values,E+w),x=S.x.domain(),D=d.duration||_,I=d.done||function(){},O=S.generateWait();S.flowing=!0,S.data.targets.forEach(function(t){t.values.splice(0,w)}),e=S.updateXDomain(i,!0,!0),S.updateXGrid&&S.updateXGrid(!0),n=S.xgrid||M.selectAll([]),o=S.xgridLines||M.selectAll([]),r=S.mainRegion||M.selectAll([]),s=S.mainText||M.selectAll([]),a=S.mainBar||M.selectAll([]),l=S.mainLine||M.selectAll([]),c=S.mainArea||M.selectAll([]),u=S.mainCircle||M.selectAll([]),t="translate("+(d.orgDataCount?1===d.orgDataCount||(C&&C.x)===(T&&T.x)?S.x(x[0])-S.x(e[0]):S.isTimeSeries()?S.x(x[0])-S.x(e[0]):S.x(C.x)-S.x(T.x):1!==S.data.targets[0].values.length?S.x(x[0])-S.x(e[0]):S.isTimeSeries()?(C=S.getValueOnIndex(S.data.targets[0].values,0),T=S.getValueOnIndex(S.data.targets[0].values,S.data.targets[0].values.length-1),S.x(C.x)-S.x(T.x)):N(e)/2)+",0) scale("+N(x)/N(e)+",1)",S.hideXGridFocus();var R=M.transition().ease(M.easeLinear).duration(D);O.add(S.xAxis(S.axes.x,R)),O.add(a.transition(R).attr("transform",t)),O.add(l.transition(R).attr("transform",t)),O.add(c.transition(R).attr("transform",t)),O.add(u.transition(R).attr("transform",t)),O.add(s.transition(R).attr("transform",t)),O.add(r.filter(S.isRegionOnX).transition(R).attr("transform",t)),O.add(n.transition(R).attr("transform",t)),O.add(o.transition(R).attr("transform",t)),O(function(){var t,e=[],i=[];if(w){for(t=0;t<w;t++)e.push("."+j.shape+"-"+(E+t)),i.push("."+j.text+"-"+(E+t));S.svg.selectAll("."+j.shapes).selectAll(e).remove(),S.svg.selectAll("."+j.texts).selectAll(i).remove(),S.svg.select("."+j.xgrid).remove()}n.attr("transform",null).attr("x1",S.xgridAttr.x1).attr("x2",S.xgridAttr.x2).attr("y1",S.xgridAttr.y1).attr("y2",S.xgridAttr.y2).style("opacity",S.xgridAttr.opacity),o.attr("transform",null),o.select("line").attr("x1",A.axis_rotated?0:v).attr("x2",A.axis_rotated?S.width:v),o.select("text").attr("x",A.axis_rotated?S.width:0).attr("y",v),a.attr("transform",null).attr("d",h),l.attr("transform",null).attr("d",p),c.attr("transform",null).attr("d",f),u.attr("transform",null).attr("cx",g).attr("cy",m),s.attr("transform",null).attr("x",y).attr("y",b).style("fill-opacity",S.opacityForText.bind(S)),r.attr("transform",null),r.filter(S.isRegionOnX).attr("x",S.regionX.bind(S)).attr("width",S.regionWidth.bind(S)),I(),S.flowing=!1})}},n.prototype.focus=function(e){var t,i=this.internal;e=i.mapToTargetIds(e),t=i.svg.selectAll(i.selectorTargets(e.filter(i.isTargetToShow,i))),this.revert(),this.defocus(),t.classed(j.focused,!0).classed(j.defocused,!1),i.hasArcType()&&i.expandArc(e),i.toggleFocusLegend(e,!0),i.focusedTargetIds=e,i.defocusedTargetIds=i.defocusedTargetIds.filter(function(t){return e.indexOf(t)<0})},n.prototype.defocus=function(e){var t=this.internal;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))).classed(j.focused,!1).classed(j.defocused,!0),t.hasArcType()&&t.unexpandArc(e),t.toggleFocusLegend(e,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return e.indexOf(t)<0}),t.defocusedTargetIds=e},n.prototype.revert=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t)).classed(j.focused,!1).classed(j.defocused,!1),e.hasArcType()&&e.unexpandArc(t),e.config.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(t)).filter(function(){return e.d3.select(this).classed(j.legendItemFocused)}).classed(j.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]},(n.prototype.xgrids=function(t){var e=this.internal,i=e.config;return t&&(i.grid_x_lines=t,e.redrawWithoutRescale()),i.grid_x_lines}).add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t||[]))},n.prototype.xgrids.remove=function(t){this.internal.removeGridLines(t,!0)},(n.prototype.ygrids=function(t){var e=this.internal,i=e.config;return t&&(i.grid_y_lines=t,e.redrawWithoutRescale()),i.grid_y_lines}).add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t||[]))},n.prototype.ygrids.remove=function(t){this.internal.removeGridLines(t,!1)},n.prototype.groups=function(t){var e=this.internal,i=e.config;return w(t)||(i.data_groups=t,e.redraw()),i.data_groups},(n.prototype.legend=function(){}).show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},n.prototype.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!1})},n.prototype.load=function(e){var t=this.internal,i=t.config;e.xs&&t.addXs(e.xs),"names"in e&&n.prototype.data.names.bind(this)(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){i.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(i.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){i.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){i.data_colors[t]=e.colors[t]}),"cacheIds"in e&&t.hasCaches(e.cacheIds)?t.load(t.getCaches(e.cacheIds),e.done):"unload"in e?t.unload(t.mapToTargetIds("boolean"==typeof e.unload&&e.unload?null:e.unload),function(){t.loadFromArgs(e)}):t.loadFromArgs(e)},n.prototype.unload=function(t){var e=this.internal;(t=t||{})instanceof Array?t={ids:t}:"string"==typeof t&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()})},(n.prototype.regions=function(t){var e=this.internal,i=e.config;return t&&(i.regions=t,e.redrawWithoutRescale()),i.regions}).add=function(t){var e=this.internal,i=e.config;return t&&(i.regions=i.regions.concat(t),e.redrawWithoutRescale()),i.regions},n.prototype.regions.remove=function(t){var e,i,n,o=this.internal,r=o.config;return e=V(t=t||{},"duration",r.transition_duration),i=V(t,"classes",[j.region]),n=o.main.select("."+j.regions).selectAll(i.map(function(t){return"."+t})),(e?n.transition().duration(e):n).style("opacity",0).remove(),r.regions=r.regions.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){0<=i.indexOf(t)&&(e=!0)}),!e)}),r.regions},n.prototype.selected=function(t){var e=this.internal,i=e.d3;return e.main.selectAll("."+j.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+j.shape).filter(function(){return i.select(this).classed(j.SELECTED)}).nodes().map(function(t){var e=t.__data__;return e.data?e.data:e})},n.prototype.select=function(l,c,u){var d=this.internal,h=d.d3,p=d.config;p.data_selection_enabled&&d.main.selectAll("."+j.shapes).selectAll("."+j.shape).each(function(t,e){var i=h.select(this),n=t.data?t.data.id:t.id,o=d.getToggle(this,t).bind(d),r=p.data_selection_grouped||!l||0<=l.indexOf(n),s=!c||0<=c.indexOf(e),a=i.classed(j.SELECTED);i.classed(j.line)||i.classed(j.area)||(r&&s?p.data_selection_isselectable(t)&&!a&&o(!0,i.classed(j.SELECTED,!0),t,e):K(u)&&u&&a&&o(!1,i.classed(j.SELECTED,!1),t,e))})},n.prototype.unselect=function(l,c){var u=this.internal,d=u.d3,h=u.config;h.data_selection_enabled&&u.main.selectAll("."+j.shapes).selectAll("."+j.shape).each(function(t,e){var i=d.select(this),n=t.data?t.data.id:t.id,o=u.getToggle(this,t).bind(u),r=h.data_selection_grouped||!l||0<=l.indexOf(n),s=!c||0<=c.indexOf(e),a=i.classed(j.SELECTED);i.classed(j.line)||i.classed(j.area)||r&&s&&h.data_selection_isselectable(t)&&a&&o(!1,i.classed(j.SELECTED,!1),t,e)})},n.prototype.show=function(t,e){var i,n=this.internal;t=n.mapToTargetIds(t),e=e||{},n.removeHiddenTargetIds(t),(i=n.svg.selectAll(n.selectorTargets(t))).transition().style("display","initial","important").style("opacity",1,"important").call(n.endall,function(){i.style("opacity",null).style("opacity",1)}),e.withLegend&&n.showLegend(t),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},n.prototype.hide=function(t,e){var i,n=this.internal;t=n.mapToTargetIds(t),e=e||{},n.addHiddenTargetIds(t),(i=n.svg.selectAll(n.selectorTargets(t))).transition().style("opacity",0,"important").call(n.endall,function(){i.style("opacity",null).style("opacity",0),i.style("display","none")}),e.withLegend&&n.hideLegend(t),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},n.prototype.toggle=function(t,e){var i=this,n=this.internal;n.mapToTargetIds(t).forEach(function(t){n.isTargetToShow(t)?i.hide(t,e):i.show(t,e)})},(n.prototype.tooltip=function(){}).show=function(e){var t,i,n,o=this.internal;n=e.mouse?e.mouse:(e.data?i=e.data:void 0!==e.x&&(t=e.id?o.data.targets.filter(function(t){return t.id===e.id}):o.data.targets,i=o.filterByX(t,e.x).slice(0,1)[0]),i?o.getMousePosition(i):null),o.dispatchEvent("mousemove",n),o.config.tooltip_onshow.call(o,i)},n.prototype.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},n.prototype.transform=function(t,e){var i=this.internal,n=0<=["pie","donut"].indexOf(t)?{withTransform:!0}:null;i.transformTo(e,t,n)},u.prototype.transformTo=function(t,e,i){var n=!this.hasArcType(),o=i||{withTransitionForAxis:n};o.withTransitionForTransform=!1,this.transiting=!1,this.setTargetType(t,e),this.updateTargets(this.data.targets),this.updateAndRedraw(o)},n.prototype.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},n.prototype.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},(n.prototype.zoom=function(t){var e=this.internal;return t?(e.isTimeSeries()&&(t=t.map(function(t){return e.parseDate(t)})),e.config.subchart_show?e.brush.selectionAsValue(t,!0):(e.updateXDomain(null,!0,!1,!1,t),e.redraw({withY:e.config.zoom_rescale,withSubchart:!1})),e.config.zoom_onzoom.call(this,e.x.orgDomain()),t):e.x.domain()}).enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},n.prototype.unzoom=function(){var t=this.internal;t.config.subchart_show?t.brush.clear():(t.updateXDomain(null,!0,!1,!1,t.subX.domain()),t.redraw({withY:t.config.zoom_rescale,withSubchart:!1}))},n.prototype.zoom.max=function(t){var e=this.internal,i=e.config,n=e.d3;if(0!==t&&!t)return i.zoom_x_max;i.zoom_x_max=n.max([e.orgXDomain[1],t])},n.prototype.zoom.min=function(t){var e=this.internal,i=e.config,n=e.d3;if(0!==t&&!t)return i.zoom_x_min;i.zoom_x_min=n.min([e.orgXDomain[0],t])},n.prototype.zoom.range=function(t){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};K(t.max)&&this.domain.max(t.max),K(t.min)&&this.domain.min(t.min)},u.prototype.initPie=function(){var t=this.d3;this.pie=t.pie().value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)});var e=this.getOrderFunction();if(e&&(this.isOrderAsc()||this.isOrderDesc())){var i=e;e=function(t,e){return-1*i(t,e)}}this.pie.sort(e||null)},u.prototype.updateRadius=function(){var t=this,e=t.config,i=e.gauge_width||e.donut_width,n=t.filterTargetsToShow(t.data.targets).length*t.config.gauge_arcs_minWidth;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2*(t.hasType("gauge")?.85:1),t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=i?(t.radius-i)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0,t.gaugeArcWidth=i||(n<=t.radius-t.innerRadius?t.radius-t.innerRadius:n<=t.radius?n:t.radius)},u.prototype.updateArc=function(){this.svgArc=this.getSvgArc(),this.svgArcExpanded=this.getSvgArcExpanded(),this.svgArcExpandedSub=this.getSvgArcExpanded(.98)},u.prototype.updateAngle=function(e){var t,i,n,o,r=this.config,s=!1,a=0;return r?(this.pie(this.filterTargetsToShow(this.data.targets)).forEach(function(t){s||t.data.id!==e.data.id||(s=!0,(e=t).index=a),a++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),this.isGaugeType(e.data)&&(t=r.gauge_min,i=r.gauge_max,n=Math.PI*(r.gauge_fullCircle?2:1)/(i-t),o=e.value<t?0:e.value<i?e.value-t:i-t,e.startAngle=r.gauge_startingAngle,e.endAngle=e.startAngle+n*o),s?e:null):null},u.prototype.getSvgArc=function(){function t(t,e){var i;return e?o(t):(i=n.updateAngle(t))?o(i):"M 0 0"}var n=this,e=n.hasType("gauge"),i=n.gaugeArcWidth/n.filterTargetsToShow(n.data.targets).length,o=n.d3.arc().outerRadius(function(t){return e?n.radius-i*t.index:n.radius}).innerRadius(function(t){return e?n.radius-i*(t.index+1):n.innerRadius});return t.centroid=o.centroid,t},u.prototype.getSvgArcExpanded=function(e){e=e||1;var i=this,n=i.hasType("gauge"),o=i.gaugeArcWidth/i.filterTargetsToShow(i.data.targets).length,r=Math.min(i.radiusExpanded*e-i.radius,.8*o-100*(1-e)),s=i.d3.arc().outerRadius(function(t){return n?i.radius-o*t.index+r:i.radiusExpanded*e}).innerRadius(function(t){return n?i.radius-o*(t.index+1):i.innerRadius});return function(t){var e=i.updateAngle(t);return e?s(e):"M 0 0"}},u.prototype.getArc=function(t,e,i){return i||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},u.prototype.transformForArcLabel=function(t){var e,i,n,o,r,s=this,a=s.config,l=s.updateAngle(t),c="",u=s.hasType("gauge");if(l&&!u)e=this.svgArc.centroid(l),i=isNaN(e[0])?0:e[0],n=isNaN(e[1])?0:e[1],o=Math.sqrt(i*i+n*n),c="translate("+i*(r=s.hasType("donut")&&a.donut_label_ratio?h(a.donut_label_ratio)?a.donut_label_ratio(t,s.radius,o):a.donut_label_ratio:s.hasType("pie")&&a.pie_label_ratio?h(a.pie_label_ratio)?a.pie_label_ratio(t,s.radius,o):a.pie_label_ratio:s.radius&&o?(.375<36/s.radius?1.175-36/s.radius:.8)*s.radius/o:0)+","+n*r+")";else if(l&&u&&1<s.filterTargetsToShow(s.data.targets).length){var d=Math.sin(l.endAngle-Math.PI/2);c="translate("+(i=Math.cos(l.endAngle-Math.PI/2)*(s.radiusExpanded+25))+","+(n=d*(s.radiusExpanded+15-Math.abs(10*d))+3)+")"}return c},u.prototype.getArcRatio=function(t){var e=this.config,i=Math.PI*(this.hasType("gauge")&&!e.gauge_fullCircle?1:2);return t?(t.endAngle-t.startAngle)/i:null},u.prototype.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},u.prototype.textForArcLabel=function(t){var e,i,n,o,r;return this.shouldShowArcLabel()?(i=(e=this.updateAngle(t))?e.value:null,n=this.getArcRatio(e),o=t.data.id,this.hasType("gauge")||this.meetsArcLabelThreshold(n)?(r=this.getArcLabelFormat())?r(i,n,o):this.defaultArcValueFormat(i,n):""):""},u.prototype.textForGaugeMinMax=function(t,e){var i=this.getGaugeLabelExtents();return i?i(t,e):t},u.prototype.expandArc=function(t){var e,i=this;i.transiting?e=window.setInterval(function(){i.transiting||(window.clearInterval(e),0<i.legend.selectAll(".c3-legend-item-focused").size()&&i.expandArc(t))},10):(t=i.mapToTargetIds(t),i.svg.selectAll(i.selectorTargets(t,"."+j.chartArc)).each(function(t){i.shouldExpand(t.data.id)&&i.d3.select(this).selectAll("path").transition().duration(i.expandDuration(t.data.id)).attr("d",i.svgArcExpanded).transition().duration(2*i.expandDuration(t.data.id)).attr("d",i.svgArcExpandedSub).each(function(t){i.isDonutType(t.data)})}))},u.prototype.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+j.chartArc)).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("."+j.arc))},u.prototype.expandDuration=function(t){var e=this.config;return this.isDonutType(t)?e.donut_expand_duration:this.isGaugeType(t)?e.gauge_expand_duration:this.isPieType(t)?e.pie_expand_duration:50},u.prototype.shouldExpand=function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},u.prototype.shouldShowArcLabel=function(){var t=this.config,e=!0;return this.hasType("donut")?e=t.donut_label_show:this.hasType("pie")&&(e=t.pie_label_show),e},u.prototype.meetsArcLabelThreshold=function(t){var e=this.config;return(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)<=t},u.prototype.getArcLabelFormat=function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},u.prototype.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},u.prototype.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},u.prototype.updateTargetsForArc=function(t){var e,i=this.main,n=this.classChartArc.bind(this),o=this.classArcs.bind(this),r=this.classFocus.bind(this);(e=i.select("."+j.chartArcs).selectAll("."+j.chartArc).data(this.pie(t)).attr("class",function(t){return n(t)+r(t.data)}).enter().append("g").attr("class",n)).append("g").attr("class",o),e.append("text").attr("dy",this.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},u.prototype.initArc=function(){this.arcs=this.main.select("."+j.chart).append("g").attr("class",j.chartArcs).attr("transform",this.getTranslate("arc")),this.arcs.append("text").attr("class",j.chartArcsTitle).style("text-anchor","middle").text(this.getArcTitle())},u.prototype.redrawArc=function(t,e,i){var n,o,r,s,u=this,d=u.d3,a=u.config,l=u.main,c=u.hasType("gauge");if(o=(n=l.selectAll("."+j.arcs).selectAll("."+j.arc).data(u.arcData.bind(u))).enter().append("path").attr("class",u.classArc.bind(u)).style("fill",function(t){return u.color(t.data)}).style("cursor",function(t){return a.interaction_enabled&&a.data_selection_isselectable(t)?"pointer":null}).each(function(t){u.isGaugeType(t.data)&&(t.startAngle=t.endAngle=a.gauge_startingAngle),this._current=t}).merge(n),c&&(s=(r=l.selectAll("."+j.arcs).selectAll("."+j.arcLabelLine).data(u.arcData.bind(u))).enter().append("rect").attr("class",function(t){return j.arcLabelLine+" "+j.target+" "+j.target+"-"+t.data.id}).merge(r),1===u.filterTargetsToShow(u.data.targets).length?s.style("display","none"):s.style("fill",function(t){return u.levelColor?u.levelColor(t.data.values[0].value):u.color(t.data)}).style("display",a.gauge_labelLine_show?"":"none").each(function(t){var e=0,i=0,n=0,o="";if(u.hiddenTargetIds.indexOf(t.data.id)<0){var r=u.updateAngle(t),s=u.gaugeArcWidth/u.filterTargetsToShow(u.data.targets).length*(r.index+1),a=r.endAngle-Math.PI/2,l=u.radius-s,c=a-(0==l?0:1/l);e=u.radiusExpanded-u.radius+s,i=Math.cos(c)*l,n=Math.sin(c)*l,o="rotate("+180*a/Math.PI+", "+i+", "+n+")"}d.select(this).attr("x",i).attr("y",n).attr("width",e).attr("height",2).attr("transform",o).style("stroke-dasharray","0, "+(e+2)+", 0")})),o.attr("transform",function(t){return!u.isGaugeType(t.data)&&i?"scale(0)":""}).on("mouseover",a.interaction_enabled?function(t){var e,i;u.transiting||(e=u.updateAngle(t))&&(i=u.convertToArcData(e),u.expandArc(e.data.id),u.api.focus(e.data.id),u.toggleFocusLegend(e.data.id,!0),u.config.data_onmouseover(i,this))}:null).on("mousemove",a.interaction_enabled?function(t){var e,i=u.updateAngle(t);i&&(e=[u.convertToArcData(i)],u.showTooltip(e,this))}:null).on("mouseout",a.interaction_enabled?function(t){var e,i;u.transiting||(e=u.updateAngle(t))&&(i=u.convertToArcData(e),u.unexpandArc(e.data.id),u.api.revert(),u.revertLegend(),u.hideTooltip(),u.config.data_onmouseout(i,this))}:null).on("click",a.interaction_enabled?function(t,e){var i,n=u.updateAngle(t);n&&(i=u.convertToArcData(n),u.toggleShape&&u.toggleShape(this,i,e),u.config.data_onclick.call(u.api,i,this))}:null).each(function(){u.transiting=!0}).transition().duration(t).attrTween("d",function(i){var n,t=u.updateAngle(i);return t?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),n=d.interpolate(this._current,t),this._current=n(0),function(t){var e=n(t);return e.data=i.data,u.getArc(e,!0)}):function(){return"M 0 0"}}).attr("transform",i?"scale(1)":"").style("fill",function(t){return u.levelColor?u.levelColor(t.data.values[0].value):u.color(t.data.id)}).call(u.endall,function(){u.transiting=!1}),n.exit().transition().duration(e).style("opacity",0).remove(),l.selectAll("."+j.chartArc).select("text").style("opacity",0).attr("class",function(t){return u.isGaugeType(t.data)?j.gaugeValue:""}).text(u.textForArcLabel.bind(u)).attr("transform",u.transformForArcLabel.bind(u)).style("font-size",function(t){return u.isGaugeType(t.data)&&1===u.filterTargetsToShow(u.data.targets).length?Math.round(u.radius/5)+"px":""}).transition().duration(t).style("opacity",function(t){return u.isTargetToShow(t.data.id)&&u.isArcType(t.data)?1:0}),l.select("."+j.chartArcsTitle).style("opacity",u.hasType("donut")||c?1:0),c){var h=0,p=u.arcs.select("g."+j.chartArcsBackground).selectAll("path."+j.chartArcsBackground).data(u.data.targets);p.enter().append("path").attr("class",function(t,e){return j.chartArcsBackground+" "+j.chartArcsBackground+"-"+e}).merge(p).attr("d",function(t){if(0<=u.hiddenTargetIds.indexOf(t.id))return"M 0 0";var e={data:[{value:a.gauge_max}],startAngle:a.gauge_startingAngle,endAngle:-1*a.gauge_startingAngle*(a.gauge_fullCircle?Math.PI:1),index:h++};return u.getArc(e,!0,!0)}),p.exit().remove(),u.arcs.select("."+j.chartArcsGaugeUnit).attr("dy",".75em").text(a.gauge_label_show?a.gauge_units:""),u.arcs.select("."+j.chartArcsGaugeMin).attr("dx",-1*(u.innerRadius+(u.radius-u.innerRadius)/(a.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(a.gauge_label_show?u.textForGaugeMinMax(a.gauge_min,!1):""),u.arcs.select("."+j.chartArcsGaugeMax).attr("dx",u.innerRadius+(u.radius-u.innerRadius)/(a.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(a.gauge_label_show?u.textForGaugeMinMax(a.gauge_max,!0):"")}},u.prototype.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("g").attr("class",j.chartArcsBackground),t.append("text").attr("class",j.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",j.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",j.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},u.prototype.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},u.prototype.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},u.prototype.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},u.prototype.getCaches=function(t){var e,i=[];for(e=0;e<t.length;e++)t[e]in this.cache&&i.push(this.cloneTarget(this.cache[t[e]]));return i},u.prototype.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},u.prototype.generateTargetClass=function(t){return t||0===t?("-"+t).replace(/\s/g,"-"):""},u.prototype.generateClass=function(t,e){return" "+t+" "+t+this.generateTargetClass(e)},u.prototype.classText=function(t){return this.generateClass(j.text,t.index)},u.prototype.classTexts=function(t){return this.generateClass(j.texts,t.id)},u.prototype.classShape=function(t){return this.generateClass(j.shape,t.index)},u.prototype.classShapes=function(t){return this.generateClass(j.shapes,t.id)},u.prototype.classLine=function(t){return this.classShape(t)+this.generateClass(j.line,t.id)},u.prototype.classLines=function(t){return this.classShapes(t)+this.generateClass(j.lines,t.id)},u.prototype.classCircle=function(t){return this.classShape(t)+this.generateClass(j.circle,t.index)},u.prototype.classCircles=function(t){return this.classShapes(t)+this.generateClass(j.circles,t.id)},u.prototype.classBar=function(t){return this.classShape(t)+this.generateClass(j.bar,t.index)},u.prototype.classBars=function(t){return this.classShapes(t)+this.generateClass(j.bars,t.id)},u.prototype.classArc=function(t){return this.classShape(t.data)+this.generateClass(j.arc,t.data.id)},u.prototype.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(j.arcs,t.data.id)},u.prototype.classArea=function(t){return this.classShape(t)+this.generateClass(j.area,t.id)},u.prototype.classAreas=function(t){return this.classShapes(t)+this.generateClass(j.areas,t.id)},u.prototype.classRegion=function(t,e){return this.generateClass(j.region,e)+" "+("class"in t?t.class:"")},u.prototype.classEvent=function(t){return this.generateClass(j.eventRect,t.index)},u.prototype.classTarget=function(t){var e=this.config.data_classes[t],i="";return e&&(i=" "+j.target+"-"+e),this.generateClass(j.target,t)+i},u.prototype.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},u.prototype.classFocused=function(t){return" "+(0<=this.focusedTargetIds.indexOf(t.id)?j.focused:"")},u.prototype.classDefocused=function(t){return" "+(0<=this.defocusedTargetIds.indexOf(t.id)?j.defocused:"")},u.prototype.classChartText=function(t){return j.chartText+this.classTarget(t.id)},u.prototype.classChartLine=function(t){return j.chartLine+this.classTarget(t.id)},u.prototype.classChartBar=function(t){return j.chartBar+this.classTarget(t.id)},u.prototype.classChartArc=function(t){return j.chartArc+this.classTarget(t.data.id)},u.prototype.getTargetSelectorSuffix=function(t){return this.generateTargetClass(t).replace(/([?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"\\$1")},u.prototype.selectorTarget=function(t,e){return(e||"")+"."+j.target+this.getTargetSelectorSuffix(t)},u.prototype.selectorTargets=function(t,e){var i=this;return(t=t||[]).length?t.map(function(t){return i.selectorTarget(t,e)}):null},u.prototype.selectorLegend=function(t){return"."+j.legendItem+this.getTargetSelectorSuffix(t)},u.prototype.selectorLegends=function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null},u.prototype.getClipPath=function(t){return"url("+(0<=window.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+t+")"},u.prototype.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},u.prototype.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},u.prototype.getAxisClipY=function(t){return t?-20:-this.margin.top},u.prototype.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},u.prototype.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},u.prototype.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},u.prototype.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},u.prototype.getAxisClipWidth=function(t){var e=Math.max(30,this.margin.left),i=Math.max(30,this.margin.right);return t?this.width+2+e+i:this.margin.left+20},u.prototype.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},u.prototype.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},u.prototype.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},u.prototype.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},u.prototype.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},u.prototype.generateColor=function(){var t=this.config,e=this.d3,n=t.data_colors,o=I(t.color_pattern)?t.color_pattern:e.schemeCategory10,r=t.data_color,s=[];return function(t){var e,i=t.id||t.data&&t.data.id||t;return n[i]instanceof Function?e=n[i](t):n[i]?e=n[i]:(s.indexOf(i)<0&&s.push(i),e=o[s.indexOf(i)%o.length],n[i]=e),r instanceof Function?r(e,t):e}},u.prototype.generateLevelColor=function(){var t=this.config,n=t.color_pattern,e=t.color_threshold,o="value"===e.unit,r=e.values&&e.values.length?e.values:[],s=e.max||100;return I(e)&&I(n)?function(t){var e,i=n[n.length-1];for(e=0;e<r.length;e++)if((o?t:100*t/s)<r[e]){i=n[e];break}return i}:null},u.prototype.getDefaultConfig=function(){var e={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:!1,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_epochs:"epochs",data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",stanford_lines:[],stanford_regions:[],stanford_texts:[],stanford_scaleMin:void 0,stanford_scaleMax:void 0,stanford_scaleWidth:void 0,stanford_scaleFormat:void 0,stanford_colors:void 0,stanford_padding:{top:0,right:0,bottom:0,left:0},regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,i,n){return this.getTooltipContent?this.getTooltipContent(t,e,i,n):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},u.prototype.additionalConfig={},u.prototype.loadConfig=function(e){var i,n,o,r=this.config;Object.keys(r).forEach(function(t){i=e,n=t.split("_"),o=function t(){var e=n.shift();return e&&i&&"object"===a(i)&&e in i?(i=i[e],t()):e?void 0:i}(),K(o)&&(r[t]=o)})},u.prototype.convertUrlToData=function(t,e,i,n,o){var r,s,a=this,l=e||"csv";s="json"===l?(r=a.d3.json,a.convertJsonToData):(r="tsv"===l?a.d3.tsv:a.d3.csv,a.convertXsvToData),r(t,i).then(function(t){o.call(a,s.call(a,t,n))}).catch(function(t){throw t})},u.prototype.convertXsvToData=function(t){var e=t.columns;return 0===t.length?{keys:e,rows:[e.reduce(function(t,e){return Object.assign(t,((n=e)in(i={})?Object.defineProperty(i,n,{value:null,enumerable:!0,configurable:!0,writable:!0}):i[n]=null,i));var i,n},{})]}:{keys:e,rows:[].concat(t)}},u.prototype.convertJsonToData=function(e,t){var o,r=this,s=[];return t?(t.x?(o=t.value.concat(t.x),r.config.data_x=t.x):o=t.value,s.push(o),e.forEach(function(i){var n=[];o.forEach(function(t){var e=r.findValueInJson(i,t);w(e)&&(e=null),n.push(e)}),s.push(n)}),r.convertRowsToData(s)):(Object.keys(e).forEach(function(t){s.push([t].concat(e[t]))}),r.convertColumnsToData(s))},u.prototype.findValueInJson=function(t,e){for(var i=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),n=0;n<i.length;++n){var o=i[n];if(!(o in t))return;t=t[o]}return t},u.prototype.convertRowsToData=function(t){for(var e=[],i=t[0],n=1;n<t.length;n++){for(var o={},r=0;r<t[n].length;r++){if(w(t[n][r]))throw new Error("Source data is missing a component at ("+n+","+r+")!");o[i[r]]=t[n][r]}e.push(o)}return{keys:i,rows:e}},u.prototype.convertColumnsToData=function(t){for(var e=[],i=[],n=0;n<t.length;n++){for(var o=t[n][0],r=1;r<t[n].length;r++){if(w(e[r-1])&&(e[r-1]={}),w(t[n][r]))throw new Error("Source data is missing a component at ("+n+","+r+")!");e[r-1][o]=t[n][r]}i.push(o)}return{keys:i,rows:e}},u.prototype.convertDataToTargets=function(t,n){var e,i,o,r,c,u=this,d=u.config;if(s(t)?r=Object.keys(t[0]):(r=t.keys,t=t.rows),o=r.filter(u.isX,u),u.isStanfordGraphType()){if(c=r.filter(u.isEpochs,u),i=r.filter(u.isNotXAndNotEpochs,u),1!==o.length||1!==c.length||1!==i.length)throw new Error("You must define the 'x' key name and the 'epochs' for Stanford Diagrams")}else i=r.filter(u.isNotX,u);return i.forEach(function(i){var e=u.getXKey(i);u.isCustomX()||u.isTimeSeries()?0<=o.indexOf(e)?u.data.xs[i]=(n&&u.data.xs[i]?u.data.xs[i]:[]).concat(t.map(function(t){return t[e]}).filter(D).map(function(t,e){return u.generateTargetX(t,i,e)})):d.data_x?u.data.xs[i]=u.getOtherTargetXs():I(d.data_xs)&&(u.data.xs[i]=u.getXValuesOfXKey(e,u.data.targets)):u.data.xs[i]=t.map(function(t,e){return e})}),i.forEach(function(t){if(!u.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}),(e=i.map(function(s,a){var l=d.data_idConverter(s);return{id:l,id_org:s,values:t.map(function(t,e){var i,n,o=t[u.getXKey(s)],r=null===t[s]||isNaN(t[s])?null:+t[s];return u.isCustomX()&&u.isCategorized()&&!w(o)?(0===a&&0===e&&(d.axis_x_categories=[]),-1===(i=d.axis_x_categories.indexOf(o))&&(i=d.axis_x_categories.length,d.axis_x_categories.push(o))):i=u.generateTargetX(o,s,e),(w(t[s])||u.data.xs[s].length<=e)&&(i=void 0),n={x:i,value:r,id:l},u.isStanfordGraphType()&&(n.epochs=t[c]),n}).filter(function(t){return K(t.x)})}})).forEach(function(t){var e;d.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),e=0,t.values.forEach(function(t){t.index=e++}),u.data.xs[t.id].sort(function(t,e){return t-e})}),u.hasNegativeValue=u.hasNegativeValueInTargets(e),u.hasPositiveValue=u.hasPositiveValueInTargets(e),d.data_type&&u.setTargetType(u.mapToIds(e).filter(function(t){return!(t in d.data_types)}),d.data_type),e.forEach(function(t){u.addCache(t.id_org,t)}),e},u.prototype.isEpochs=function(t){var e=this.config;return e.data_epochs&&t===e.data_epochs},u.prototype.isX=function(t){var e,i,n,o=this.config;return o.data_x&&t===o.data_x||I(o.data_xs)&&(e=o.data_xs,i=t,n=!1,Object.keys(e).forEach(function(t){e[t]===i&&(n=!0)}),n)},u.prototype.isNotX=function(t){return!this.isX(t)},u.prototype.isNotXAndNotEpochs=function(t){return!this.isX(t)&&!this.isEpochs(t)},u.prototype.getXKey=function(t){var e=this.config;return e.data_x?e.data_x:I(e.data_xs)?e.data_xs[t]:null},u.prototype.getXValuesOfXKey=function(e,t){var i,n=this;return(t&&I(t)?n.mapToIds(t):[]).forEach(function(t){n.getXKey(t)===e&&(i=n.data.xs[t])}),i},u.prototype.getXValue=function(t,e){return t in this.data.xs&&this.data.xs[t]&&D(this.data.xs[t][e])?this.data.xs[t][e]:e},u.prototype.getOtherTargetXs=function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},u.prototype.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},u.prototype.addXs=function(e){var i=this;Object.keys(e).forEach(function(t){i.config.data_xs[t]=e[t]})},u.prototype.addName=function(t){var e;return t&&(e=this.config.data_names[t.id],t.name=void 0!==e?e:t.id),t},u.prototype.getValueOnIndex=function(t,e){var i=t.filter(function(t){return t.index===e});return i.length?i[0]:null},u.prototype.updateTargetX=function(t,n){var o=this;t.forEach(function(i){i.values.forEach(function(t,e){t.x=o.generateTargetX(n[e],i.id,e)}),o.data.xs[i.id]=n})},u.prototype.updateTargetXs=function(t,e){var i=this;t.forEach(function(t){e[t.id]&&i.updateTargetX([t],e[t.id])})},u.prototype.generateTargetX=function(t,e,i){return this.isTimeSeries()?t?this.parseDate(t):this.parseDate(this.getXValue(e,i)):this.isCustomX()&&!this.isCategorized()?D(t)?+t:this.getXValue(e,i):i},u.prototype.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},u.prototype.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(t){return t.values.length})},u.prototype.mapToIds=function(t){return t.map(function(t){return t.id})},u.prototype.mapToTargetIds=function(t){return t?[].concat(t):this.mapToIds(this.data.targets)},u.prototype.hasTarget=function(t,e){var i,n=this.mapToIds(t);for(i=0;i<n.length;i++)if(n[i]===e)return!0;return!1},u.prototype.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},u.prototype.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},u.prototype.filterTargetsToShow=function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},u.prototype.mapTargetsToUniqueXs=function(t){var e=this.d3.set(this.d3.merge(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return(e=this.isTimeSeries()?e.map(function(t){return new Date(+t)}):e.map(function(t){return+t})).sort(function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN})},u.prototype.addHiddenTargetIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenTargetIds.indexOf(t[e])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(t[e]))},u.prototype.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0})},u.prototype.addHiddenLegendIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenLegendIds.indexOf(t[e])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(t[e]))},u.prototype.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},u.prototype.getValuesAsIdKeyed=function(t){var i={};return t.forEach(function(e){i[e.id]=[],e.values.forEach(function(t){i[e.id].push(t.value)})}),i},u.prototype.checkValueInTargets=function(t,e){var i,n,o,r=Object.keys(t);for(i=0;i<r.length;i++)for(o=t[r[i]].values,n=0;n<o.length;n++)if(e(o[n].value))return!0;return!1},u.prototype.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t<0})},u.prototype.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return 0<t})},u.prototype.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&&"desc"===t.data_order.toLowerCase()},u.prototype.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&&"asc"===t.data_order.toLowerCase()},u.prototype.getOrderFunction=function(){var t=this.config,o=this.isOrderAsc(),e=this.isOrderDesc();if(o||e){var r=function(t,e){return t+Math.abs(e.value)};return function(t,e){var i=t.values.reduce(r,0),n=e.values.reduce(r,0);return o?n-i:i-n}}if(h(t.data_order))return t.data_order;if(s(t.data_order)){var i=t.data_order;return function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}}},u.prototype.orderTargets=function(t){var e=this.getOrderFunction();return e&&t.sort(e),t},u.prototype.filterByX=function(t,e){return this.d3.merge(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},u.prototype.filterRemoveNull=function(t){return t.filter(function(t){return D(t.value)})},u.prototype.filterByXDomain=function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},u.prototype.hasDataLabel=function(){var t=this.config;return!("boolean"!=typeof t.data_labels||!t.data_labels)||!("object"!==a(t.data_labels)||!I(t.data_labels))},u.prototype.getDataLabelLength=function(t,e,i){var n=this,o=[0,0];return n.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return n.dataLabelFormat(t.id)(t)}).each(function(t,e){o[e]=1.3*this.getBoundingClientRect()[i]}).remove(),o},u.prototype.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},u.prototype.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},u.prototype.findClosestFromTargets=function(t,e){var i,n=this;return i=t.map(function(t){return n.findClosest(t.values,e)}),n.findClosest(i,e)},u.prototype.findClosest=function(t,i){var n,o=this,r=o.config.point_sensitivity;return t.filter(function(t){return t&&o.isBarType(t.id)}).forEach(function(t){var e=o.main.select("."+j.bars+o.getTargetSelectorSuffix(t.id)+" ."+j.bar+"-"+t.index).node();!n&&o.isWithinBar(o.d3.mouse(e),e)&&(n=t)}),t.filter(function(t){return t&&!o.isBarType(t.id)}).forEach(function(t){var e=o.dist(t,i);e<r&&(r=e,n=t)}),n},u.prototype.dist=function(t,e){var i=this.config,n=i.axis_rotated?1:0,o=i.axis_rotated?0:1,r=this.circleY(t,t.index),s=this.x(t.x);return Math.sqrt(Math.pow(s-e[n],2)+Math.pow(r-e[o],2))},u.prototype.convertValuesToStep=function(t){var e,i=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;0<e;e--)i[e]=i[e-1];return i[0]={x:i[0].x-1,value:i[0].value,id:i[0].id},i[t.length+1]={x:i[t.length].x+1,value:i[t.length].value,id:i[t.length].id},i},u.prototype.updateDataAttributes=function(t,e){var i=this.config["data_"+t];return void 0===e||(Object.keys(e).forEach(function(t){i[t]=e[t]}),this.redraw({withLegend:!0})),i},u.prototype.load=function(i,n){var o=this;i&&(n.filter&&(i=i.filter(n.filter)),(n.type||n.types)&&i.forEach(function(t){var e=n.types&&n.types[t.id]?n.types[t.id]:n.type;o.setTargetType(t.id,e)}),o.data.targets.forEach(function(t){for(var e=0;e<i.length;e++)if(t.id===i[e].id){t.values=i[e].values,i.splice(e,1);break}}),o.data.targets=o.data.targets.concat(i)),o.updateTargets(o.data.targets),o.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.done&&n.done()},u.prototype.loadFromArgs=function(e){var i=this;e.data?i.load(i.convertDataToTargets(e.data),e):e.url?i.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(t){i.load(i.convertDataToTargets(t),e)}):e.json?i.load(i.convertDataToTargets(i.convertJsonToData(e.json,e.keys)),e):e.rows?i.load(i.convertDataToTargets(i.convertRowsToData(e.rows)),e):e.columns?i.load(i.convertDataToTargets(i.convertColumnsToData(e.columns)),e):i.load(null,e)},u.prototype.unload=function(t,e){var i=this;e=e||function(){},(t=t.filter(function(t){return i.hasTarget(i.data.targets,t)}))&&0!==t.length?(i.svg.selectAll(t.map(function(t){return i.selectorTarget(t)})).transition().style("opacity",0).remove().call(i.endall,e),t.forEach(function(e){i.withoutFadeIn[e]=!1,i.legend&&i.legend.selectAll("."+j.legendItem+i.getTargetSelectorSuffix(e)).remove(),i.data.targets=i.data.targets.filter(function(t){return t.id!==e})})):e()},u.prototype.getYDomainMin=function(t){var e,i,n,o,r,s,a=this,l=a.config,c=a.mapToIds(t),u=a.getValuesAsIdKeyed(t);if(0<l.data_groups.length)for(s=a.hasNegativeValueInTargets(t),e=0;e<l.data_groups.length;e++)if(0!==(o=l.data_groups[e].filter(function(t){return 0<=c.indexOf(t)})).length)for(n=o[0],s&&u[n]&&u[n].forEach(function(t,e){u[n][e]=t<0?t:0}),i=1;i<o.length;i++)r=o[i],u[r]&&u[r].forEach(function(t,e){a.axis.getId(r)!==a.axis.getId(n)||!u[n]||s&&0<+t||(u[n][e]+=+t)});return a.d3.min(Object.keys(u).map(function(t){return a.d3.min(u[t])}))},u.prototype.getYDomainMax=function(t){var e,i,n,o,r,s,a=this,l=a.config,c=a.mapToIds(t),u=a.getValuesAsIdKeyed(t);if(0<l.data_groups.length)for(s=a.hasPositiveValueInTargets(t),e=0;e<l.data_groups.length;e++)if(0!==(o=l.data_groups[e].filter(function(t){return 0<=c.indexOf(t)})).length)for(n=o[0],s&&u[n]&&u[n].forEach(function(t,e){u[n][e]=0<t?t:0}),i=1;i<o.length;i++)r=o[i],u[r]&&u[r].forEach(function(t,e){a.axis.getId(r)!==a.axis.getId(n)||!u[n]||s&&+t<0||(u[n][e]+=+t)});return a.d3.max(Object.keys(u).map(function(t){return a.d3.max(u[t])}))},u.prototype.getYDomain=function(t,e,i){var n,o,r,s,a,l,c,u,d,h,p=this,f=p.config,g=t.filter(function(t){return p.axis.getId(t.id)===e}),m=i?p.filterByXDomain(g,i):g,v="y2"===e?f.axis_y2_min:f.axis_y_min,y="y2"===e?f.axis_y2_max:f.axis_y_max,b=p.getYDomainMin(m),_=p.getYDomainMax(m),E="y2"===e?f.axis_y2_center:f.axis_y_center,w=p.hasType("bar",m)&&f.bar_zerobased||p.hasType("area",m)&&f.area_zerobased,C="y2"===e?f.axis_y2_inverted:f.axis_y_inverted,T=p.hasDataLabel()&&f.axis_rotated,x=p.hasDataLabel()&&!f.axis_rotated;return b=D(v)?v:D(y)?b<y?b:y-10:b,_=D(y)?y:D(v)?v<_?_:v+10:_,0===m.length?"y2"===e?p.y2.domain():p.y.domain():(isNaN(b)&&(b=0),isNaN(_)&&(_=b),b===_&&(b<0?_=0:b=0),d=0<=b&&0<=_,h=b<=0&&_<=0,(D(v)&&d||D(y)&&h)&&(w=!1),w&&(d&&(b=0),h&&(_=0)),r=s=.1*(o=Math.abs(_-b)),void 0!==E&&(_=E+(a=Math.max(Math.abs(b),Math.abs(_))),b=E-a),T?(l=p.getDataLabelLength(b,_,"width"),c=N(p.y.range()),r+=o*((u=[l[0]/c,l[1]/c])[1]/(1-u[0]-u[1])),s+=o*(u[0]/(1-u[0]-u[1]))):x&&(l=p.getDataLabelLength(b,_,"height"),r+=p.axis.convertPixelsToAxisPadding(l[1],o),s+=p.axis.convertPixelsToAxisPadding(l[0],o)),"y"===e&&I(f.axis_y_padding)&&(r=p.axis.getPadding(f.axis_y_padding,"top",r,o),s=p.axis.getPadding(f.axis_y_padding,"bottom",s,o)),"y2"===e&&I(f.axis_y2_padding)&&(r=p.axis.getPadding(f.axis_y2_padding,"top",r,o),s=p.axis.getPadding(f.axis_y2_padding,"bottom",s,o)),w&&(d&&(s=b),h&&(r=-_)),n=[b-s,_+r],C?n.reverse():n)},u.prototype.getXDomainMin=function(t){var e=this,i=e.config;return K(i.axis_x_min)?e.isTimeSeries()?this.parseDate(i.axis_x_min):i.axis_x_min:e.d3.min(t,function(t){return e.d3.min(t.values,function(t){return t.x})})},u.prototype.getXDomainMax=function(t){var e=this,i=e.config;return K(i.axis_x_max)?e.isTimeSeries()?this.parseDate(i.axis_x_max):i.axis_x_max:e.d3.max(t,function(t){return e.d3.max(t.values,function(t){return t.x})})},u.prototype.getXDomainPadding=function(t){var e,i,n,o,r=this.config,s=t[1]-t[0];return i=this.isCategorized()?0:this.hasType("bar")?1<(e=this.getMaxDataCount())?s/(e-1)/2:.5:.01*s,"object"===a(r.axis_x_padding)&&I(r.axis_x_padding)?(n=D(r.axis_x_padding.left)?r.axis_x_padding.left:i,o=D(r.axis_x_padding.right)?r.axis_x_padding.right:i):n=o="number"==typeof r.axis_x_padding?r.axis_x_padding:i,{left:n,right:o}},u.prototype.getXDomain=function(t){var e=[this.getXDomainMin(t),this.getXDomainMax(t)],i=e[0],n=e[1],o=this.getXDomainPadding(e),r=0,s=0;return i-n!=0||this.isCategorized()||(n=this.isTimeSeries()?(i=new Date(.5*i.getTime()),new Date(1.5*n.getTime())):(i=0===i?1:.5*i,0===n?-1:1.5*n)),!i&&0!==i||(r=this.isTimeSeries()?new Date(i.getTime()-o.left):i-o.left),!n&&0!==n||(s=this.isTimeSeries()?new Date(n.getTime()+o.right):n+o.right),[r,s]},u.prototype.updateXDomain=function(t,e,i,n,o){var r=this,s=r.config;return i&&(r.x.domain(o||r.d3.extent(r.getXDomain(t))),r.orgXDomain=r.x.domain(),s.zoom_enabled&&r.zoom.update(),r.subX.domain(r.x.domain()),r.brush&&r.brush.updateScale(r.subX)),e&&r.x.domain(o||(!r.brush||r.brush.empty()?r.orgXDomain:r.brush.selectionAsValue())),n&&r.x.domain(r.trimXDomain(r.x.orgDomain())),r.x.domain()},u.prototype.trimXDomain=function(t){var e=this.getZoomDomain(),i=e[0],n=e[1];return t[0]<=i&&(t[1]=+t[1]+(i-t[0]),t[0]=i),n<=t[1]&&(t[0]=+t[0]-(t[1]-n),t[1]=n),t},u.prototype.drag=function(t){var e,i,n,o,h,p,f,g,m=this,r=m.config,s=m.main,v=m.d3;m.hasArcType()||r.data_selection_enabled&&r.data_selection_multiple&&(e=m.dragStart[0],i=m.dragStart[1],n=t[0],o=t[1],h=Math.min(e,n),p=Math.max(e,n),f=r.data_selection_grouped?m.margin.top:Math.min(i,o),g=r.data_selection_grouped?m.height:Math.max(i,o),s.select("."+j.dragarea).attr("x",h).attr("y",f).attr("width",p-h).attr("height",g-f),s.selectAll("."+j.shapes).selectAll("."+j.shape).filter(function(t){return r.data_selection_isselectable(t)}).each(function(t,e){var i,n,o,r,s,a,l=v.select(this),c=l.classed(j.SELECTED),u=l.classed(j.INCLUDED),d=!1;if(l.classed(j.circle))i=1*l.attr("cx"),n=1*l.attr("cy"),s=m.togglePoint,d=h<i&&i<p&&f<n&&n<g;else{if(!l.classed(j.bar))return;i=(a=y(this)).x,n=a.y,o=a.width,r=a.height,s=m.togglePath,d=!(p<i||i+o<h||g<n||n+r<f)}d^u&&(l.classed(j.INCLUDED,!u),l.classed(j.SELECTED,!c),s.call(m,!c,l,t,e))}))},u.prototype.dragstart=function(t){var e=this.config;this.hasArcType()||e.data_selection_enabled&&(this.dragStart=t,this.main.select("."+j.chart).append("rect").attr("class",j.dragarea).style("opacity",.1),this.dragging=!0)},u.prototype.dragend=function(){var t=this.config;this.hasArcType()||t.data_selection_enabled&&(this.main.select("."+j.dragarea).transition().duration(100).style("opacity",0).remove(),this.main.selectAll("."+j.shape).classed(j.INCLUDED,!1),this.dragging=!1)},u.prototype.getYFormat=function(t){var n=this,o=t&&!n.hasType("gauge")?n.defaultArcValueFormat:n.yFormat,r=t&&!n.hasType("gauge")?n.defaultArcValueFormat:n.y2Format;return function(t,e,i){return("y2"===n.axis.getId(i)?r:o).call(n,t,e)}},u.prototype.yFormat=function(t){var e=this.config;return(e.axis_y_tick_format?e.axis_y_tick_format:this.defaultValueFormat)(t)},u.prototype.y2Format=function(t){var e=this.config;return(e.axis_y2_tick_format?e.axis_y2_tick_format:this.defaultValueFormat)(t)},u.prototype.defaultValueFormat=function(t){return D(t)?+t:""},u.prototype.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},u.prototype.dataLabelFormat=function(t){function e(t){return D(t)?+t:""}var i=this.config.data_labels;return"function"==typeof i.format?i.format:"object"===a(i.format)?i.format[t]?!0===i.format[t]?e:i.format[t]:function(){return""}:e},u.prototype.initGrid=function(){var t=this,e=t.config,i=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",j.grid),e.grid_x_show&&t.grid.append("g").attr("class",j.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",j.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",j.xgridFocus).append("line").attr("class",j.xgridFocus),t.xgrid=i.selectAll([]),e.grid_lines_front||t.initGridLines()},u.prototype.initGridLines=function(){var t=this.d3;this.gridLines=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",j.grid+" "+j.gridLines),this.gridLines.append("g").attr("class",j.xgridLines),this.gridLines.append("g").attr("class",j.ygridLines),this.xgridLines=t.selectAll([])},u.prototype.updateXGrid=function(t){var e=this,i=e.config,n=e.d3,o=e.generateGridData(i.grid_x_type,e.x),r=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=i.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-r},y2:function(t){return e.x(t)-r}}:{x1:function(t){return e.x(t)+r},x2:function(t){return e.x(t)+r},y1:0,y2:e.height},e.xgridAttr.opacity=function(){return+n.select(this).attr(i.axis_rotated?"y1":"x1")===(i.axis_rotated?e.height:0)?0:1};var s=e.main.select("."+j.xgrids).selectAll("."+j.xgrid).data(o),a=s.enter().append("line").attr("class",j.xgrid).attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",0);e.xgrid=a.merge(s),t||e.xgrid.attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",e.xgridAttr.opacity),s.exit().remove()},u.prototype.updateYGrid=function(){var t=this,e=t.config,i=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks),n=t.main.select("."+j.ygrids).selectAll("."+j.ygrid).data(i),o=n.enter().append("line").attr("class",j.ygrid);t.ygrid=o.merge(n),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),n.exit().remove(),t.smoothLines(t.ygrid,"grid")},u.prototype.gridTextAnchor=function(t){return t.position?t.position:"end"},u.prototype.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},u.prototype.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},u.prototype.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},u.prototype.updateGrid=function(t){var e,i,n,o,r=this,s=r.main,a=r.config,l=r.xv.bind(r),c=r.yv.bind(r),u=r.xGridTextX.bind(r),d=r.yGridTextX.bind(r);r.grid.style("visibility",r.hasArcType()?"hidden":"visible"),s.select("line."+j.xgridFocus).style("visibility","hidden"),a.grid_x_show&&r.updateXGrid(),(i=(e=s.select("."+j.xgridLines).selectAll("."+j.xgridLine).data(a.grid_x_lines)).enter().append("g").attr("class",function(t){return j.xgridLine+(t.class?" "+t.class:"")})).append("line").attr("x1",a.axis_rotated?0:l).attr("x2",a.axis_rotated?r.width:l).attr("y1",a.axis_rotated?l:0).attr("y2",a.axis_rotated?l:r.height).style("opacity",0),i.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",a.axis_rotated?"":"rotate(-90)").attr("x",a.axis_rotated?d:u).attr("y",l).attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),r.xgridLines=i.merge(e),e.exit().transition().duration(t).style("opacity",0).remove(),a.grid_y_show&&r.updateYGrid(),(o=(n=s.select("."+j.ygridLines).selectAll("."+j.ygridLine).data(a.grid_y_lines)).enter().append("g").attr("class",function(t){return j.ygridLine+(t.class?" "+t.class:"")})).append("line").attr("x1",a.axis_rotated?c:0).attr("x2",a.axis_rotated?c:r.width).attr("y1",a.axis_rotated?0:c).attr("y2",a.axis_rotated?r.height:c).style("opacity",0),o.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",a.axis_rotated?"rotate(-90)":"").attr("x",a.axis_rotated?u:d).attr("y",c).attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),r.ygridLines=o.merge(n),r.ygridLines.select("line").transition().duration(t).attr("x1",a.axis_rotated?c:0).attr("x2",a.axis_rotated?c:r.width).attr("y1",a.axis_rotated?0:c).attr("y2",a.axis_rotated?r.height:c).style("opacity",1),r.ygridLines.select("text").transition().duration(t).attr("x",a.axis_rotated?r.xGridTextX.bind(r):r.yGridTextX.bind(r)).attr("y",c).text(function(t){return t.text}).style("opacity",1),n.exit().transition().duration(t).style("opacity",0).remove()},u.prototype.redrawGrid=function(t,e){var i=this,n=i.config,o=i.xv.bind(i),r=i.xgridLines.select("line"),s=i.xgridLines.select("text");return[(t?r.transition(e):r).attr("x1",n.axis_rotated?0:o).attr("x2",n.axis_rotated?i.width:o).attr("y1",n.axis_rotated?o:0).attr("y2",n.axis_rotated?o:i.height).style("opacity",1),(t?s.transition(e):s).attr("x",n.axis_rotated?i.yGridTextX.bind(i):i.xGridTextX.bind(i)).attr("y",o).text(function(t){return t.text}).style("opacity",1)]},u.prototype.showXGridFocus=function(t){var e=this.config,i=t.filter(function(t){return t&&D(t.value)}),n=this.main.selectAll("line."+j.xgridFocus),o=this.xx.bind(this);e.tooltip_show&&(this.hasType("scatter")||this.hasType("stanford")||this.hasArcType()||(n.style("visibility","visible").data([i[0]]).attr(e.axis_rotated?"y1":"x1",o).attr(e.axis_rotated?"y2":"x2",o),this.smoothLines(n,"grid")))},u.prototype.hideXGridFocus=function(){this.main.select("line."+j.xgridFocus).style("visibility","hidden")},u.prototype.updateXgridFocus=function(){var t=this.config;this.main.select("line."+j.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?this.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:this.height)},u.prototype.generateGridData=function(t,e){var i,n,o,r,s=[],a=this.main.select("."+j.axisX).selectAll(".tick").size();if("year"===t)for(n=(i=this.getXDomain())[0].getFullYear(),o=i[1].getFullYear(),r=n;r<=o;r++)s.push(new Date(r+"-01-01 00:00:00"));else(s=e.ticks(10)).length>a&&(s=s.filter(function(t){return(""+t).indexOf(".")<0}));return s},u.prototype.getGridFilterToRemove=function(t){return t?function(e){var i=!1;return[].concat(t).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(i=!0)}),i}:function(){return!0}},u.prototype.removeGridLines=function(t,e){function i(t){return!o(t)}var n=this.config,o=this.getGridFilterToRemove(t),r=e?j.xgridLines:j.ygridLines,s=e?j.xgridLine:j.ygridLine;this.main.select("."+r).selectAll("."+s).filter(o).transition().duration(n.transition_duration).style("opacity",0).remove(),e?n.grid_x_lines=n.grid_x_lines.filter(i):n.grid_y_lines=n.grid_y_lines.filter(i)},u.prototype.initEventRect=function(){var t=this,e=t.config;t.main.select("."+j.chart).append("g").attr("class",j.eventRects).style("fill-opacity",0),t.eventRect=t.main.select("."+j.eventRects).append("rect").attr("class",j.eventRect),e.zoom_enabled&&t.zoom&&(t.eventRect.call(t.zoom).on("dblclick.zoom",null),e.zoom_initialRange&&t.eventRect.transition().duration(0).call(t.zoom.transform,t.zoomTransform(e.zoom_initialRange)))},u.prototype.redrawEventRect=function(){var t,e,o=this,r=o.d3,s=o.config;function a(){o.svg.select("."+j.eventRect).style("cursor",null),o.hideXGridFocus(),o.hideTooltip(),o.unexpandCircles(),o.unexpandBars()}t=o.width,e=o.height,o.main.select("."+j.eventRects).style("cursor",s.zoom_enabled?s.axis_rotated?"ns-resize":"ew-resize":null),o.eventRect.attr("x",0).attr("y",0).attr("width",t).attr("height",e).on("mouseout",s.interaction_enabled?function(){s&&(o.hasArcType()||a())}:null).on("mousemove",s.interaction_enabled?function(){var t,e,i,n;o.dragging||o.hasArcType(t)||(t=o.filterTargetsToShow(o.data.targets),e=r.mouse(this),i=o.findClosestFromTargets(t,e),!o.mouseover||i&&i.id===o.mouseover.id||(s.data_onmouseout.call(o.api,o.mouseover),o.mouseover=void 0),i?(n=(o.isScatterOrStanfordType(i)||!s.tooltip_grouped?[i]:o.filterByX(t,i.x)).map(function(t){return o.addName(t)}),o.showTooltip(n,this),s.point_focus_expand_enabled&&(o.unexpandCircles(),n.forEach(function(t){o.expandCircles(t.index,t.id,!1)})),o.expandBars(i.index,i.id,!0),o.showXGridFocus(n),(o.isBarType(i.id)||o.dist(i,e)<s.point_sensitivity)&&(o.svg.select("."+j.eventRect).style("cursor","pointer"),o.mouseover||(s.data_onmouseover.call(o.api,i),o.mouseover=i))):a())}:null).on("click",s.interaction_enabled?function(){var t,e,i;o.hasArcType(t)||(t=o.filterTargetsToShow(o.data.targets),e=r.mouse(this),(i=o.findClosestFromTargets(t,e))&&(o.isBarType(i.id)||o.dist(i,e)<s.point_sensitivity)&&(o.isScatterOrStanfordType(i)||!s.data_selection_grouped?[i]:o.filterByX(t,i.x)).forEach(function(t){o.main.selectAll("."+j.shapes+o.getTargetSelectorSuffix(t.id)).selectAll("."+j.shape+"-"+t.index).each(function(){(s.data_selection_grouped||o.isWithinShape(this,t))&&(o.toggleShape(this,t,t.index),s.data_onclick.call(o.api,t,this))})}))}:null).call(s.interaction_enabled&&s.data_selection_draggable&&o.drag?r.drag().on("drag",function(){o.drag(r.mouse(this))}).on("start",function(){o.dragstart(r.mouse(this))}).on("end",function(){o.dragend()}):function(){})},u.prototype.getMousePosition=function(t){return[this.x(t.x),this.getYScale(t.id)(t.value)]},u.prototype.dispatchEvent=function(t,e){var i="."+j.eventRect,n=this.main.select(i).node(),o=n.getBoundingClientRect(),r=o.left+(e?e[0]:0),s=o.top+(e?e[1]:0),a=document.createEvent("MouseEvents");a.initMouseEvent(t,!0,!0,window,0,r,s,r,s,!1,!1,!1,!1,0,null),n.dispatchEvent(a)},u.prototype.initLegend=function(){var t=this;if(t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),!t.config.legend_show)return t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets));t.updateLegendWithDefaults()},u.prototype.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},u.prototype.updateSizeForLegend=function(t,e){var i=this,n=i.config,o={top:i.isLegendTop?i.getCurrentPaddingTop()+n.legend_inset_y+5.5:i.currentHeight-t-i.getCurrentPaddingBottom()-n.legend_inset_y,left:i.isLegendLeft?i.getCurrentPaddingLeft()+n.legend_inset_x+.5:i.currentWidth-e-i.getCurrentPaddingRight()-n.legend_inset_x+.5};i.margin3={top:i.isLegendRight?0:i.isLegendInset?o.top:i.currentHeight-t,right:NaN,bottom:0,left:i.isLegendRight?i.currentWidth-e:i.isLegendInset?o.left:0}},u.prototype.transformLegend=function(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},u.prototype.updateLegendStep=function(t){this.legendStep=t},u.prototype.updateLegendItemWidth=function(t){this.legendItemWidth=t},u.prototype.updateLegendItemHeight=function(t){this.legendItemHeight=t},u.prototype.getLegendWidth=function(){return this.config.legend_show?this.isLegendRight||this.isLegendInset?this.legendItemWidth*(this.legendStep+1):this.currentWidth:0},u.prototype.getLegendHeight=function(){var t=0;return this.config.legend_show&&(t=this.isLegendRight?this.currentHeight:Math.max(20,this.legendItemHeight)*(this.legendStep+1)),t},u.prototype.opacityForLegend=function(t){return t.classed(j.legendItemHidden)?null:1},u.prototype.opacityForUnfocusedLegend=function(t){return t.classed(j.legendItemHidden)?null:.3},u.prototype.toggleFocusLegend=function(e,t){var i=this;e=i.mapToTargetIds(e),i.legend.selectAll("."+j.legendItem).filter(function(t){return 0<=e.indexOf(t)}).classed(j.legendItemFocused,t).transition().duration(100).style("opacity",function(){return(t?i.opacityForLegend:i.opacityForUnfocusedLegend).call(i,i.d3.select(this))})},u.prototype.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+j.legendItem).classed(j.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(e.select(this))})},u.prototype.showLegend=function(t){var e=this,i=e.config;i.legend_show||(i.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(e.d3.select(this))})},u.prototype.hideLegend=function(t){var e=this.config;e.legend_show&&d(t)&&(e.legend_show=!1,this.legend.style("visibility","hidden")),this.addHiddenLegendIds(t),this.legend.selectAll(this.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},u.prototype.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},u.prototype.updateLegend=function(g,t,e){var i,n,o,r,s,a,l,c,u,d,h,p,f,m,v,y,b=this,_=b.config,E=4,w=10,C=0,T=0,x=10,D=_.legend_item_tile_width+5,I=0,O={},R={},k={},S=[0],A={},M=0;function N(t,e,i){var n,o,r,s,a=0===i,l=i===g.length-1,c=(r=t,s=e,b.legendItemTextBox[s]||(b.legendItemTextBox[s]=b.getTextRect(r.textContent,j.legendItem,r)),b.legendItemTextBox[s]),u=c.width+D+(!l||b.isLegendRight||b.isLegendInset?w:0)+_.legend_padding,d=c.height+E,h=b.isLegendRight||b.isLegendInset?d:u,p=b.isLegendRight||b.isLegendInset?b.getLegendHeight():b.getLegendWidth();function f(t,e){e||(n=(p-I-h)/2)<x&&(n=(p-h)/2,I=0,M++),A[t]=M,S[M]=b.isLegendInset?10:n,O[t]=I,I+=h}a&&(T=C=M=I=0),!_.legend_show||b.isLegendToShow(e)?(R[e]=u,k[e]=d,(!C||C<=u)&&(C=u),(!T||T<=d)&&(T=d),o=b.isLegendRight||b.isLegendInset?T:C,_.legend_equally?(Object.keys(R).forEach(function(t){R[t]=C}),Object.keys(k).forEach(function(t){k[t]=T}),(n=(p-o*g.length)/2)<x?(M=I=0,g.forEach(function(t){f(t)})):f(e,!0)):f(e)):R[e]=k[e]=A[e]=O[e]=0}g=g.filter(function(t){return!K(_.data_names[t])||null!==_.data_names[t]}),h=V(t=t||{},"withTransition",!0),p=V(t,"withTransitionForTransform",!0),b.isLegendInset&&(M=_.legend_inset_step?_.legend_inset_step:g.length,b.updateLegendStep(M)),r=b.isLegendRight?(i=function(t){return C*A[t]},function(t){return S[A[t]]+O[t]}):b.isLegendInset?(i=function(t){return C*A[t]+10},function(t){return S[A[t]]+O[t]}):(i=function(t){return S[A[t]]+O[t]},function(t){return T*A[t]}),n=function(t,e){return i(t,e)+4+_.legend_item_tile_width},s=function(t,e){return r(t,e)+9},o=function(t,e){return i(t,e)},a=function(t,e){return r(t,e)-5},l=function(t,e){return i(t,e)-2},c=function(t,e){return i(t,e)-2+_.legend_item_tile_width},u=function(t,e){return r(t,e)+4},(d=b.legend.selectAll("."+j.legendItem).data(g).enter().append("g").attr("class",function(t){return b.generateClass(j.legendItem,t)}).style("visibility",function(t){return b.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){_.legend_item_onclick?_.legend_item_onclick.call(b,t):b.d3.event.altKey?(b.api.hide(),b.api.show(t)):(b.api.toggle(t),b.isTargetToShow(t)?b.api.focus(t):b.api.revert())}).on("mouseover",function(t){_.legend_item_onmouseover?_.legend_item_onmouseover.call(b,t):(b.d3.select(this).classed(j.legendItemFocused,!0),!b.transiting&&b.isTargetToShow(t)&&b.api.focus(t))}).on("mouseout",function(t){_.legend_item_onmouseout?_.legend_item_onmouseout.call(b,t):(b.d3.select(this).classed(j.legendItemFocused,!1),b.api.revert())})).append("text").text(function(t){return K(_.data_names[t])?_.data_names[t]:t}).each(function(t,e){N(this,t,e)}).style("pointer-events","none").attr("x",b.isLegendRight||b.isLegendInset?n:-200).attr("y",b.isLegendRight||b.isLegendInset?-200:s),d.append("rect").attr("class",j.legendItemEvent).style("fill-opacity",0).attr("x",b.isLegendRight||b.isLegendInset?o:-200).attr("y",b.isLegendRight||b.isLegendInset?-200:a),d.append("line").attr("class",j.legendItemTile).style("stroke",b.color).style("pointer-events","none").attr("x1",b.isLegendRight||b.isLegendInset?l:-200).attr("y1",b.isLegendRight||b.isLegendInset?-200:u).attr("x2",b.isLegendRight||b.isLegendInset?c:-200).attr("y2",b.isLegendRight||b.isLegendInset?-200:u).attr("stroke-width",_.legend_item_tile_height),y=b.legend.select("."+j.legendBackground+" rect"),b.isLegendInset&&0<C&&0===y.size()&&(y=b.legend.insert("g","."+j.legendItem).attr("class",j.legendBackground).append("rect")),f=b.legend.selectAll("text").data(g).text(function(t){return K(_.data_names[t])?_.data_names[t]:t}).each(function(t,e){N(this,t,e)}),(h?f.transition():f).attr("x",n).attr("y",s),m=b.legend.selectAll("rect."+j.legendItemEvent).data(g),(h?m.transition():m).attr("width",function(t){return R[t]}).attr("height",function(t){return k[t]}).attr("x",o).attr("y",a),v=b.legend.selectAll("line."+j.legendItemTile).data(g),(h?v.transition():v).style("stroke",b.levelColor?function(t){return b.levelColor(b.cache[t].values[0].value)}:b.color).attr("x1",l).attr("y1",u).attr("x2",c).attr("y2",u),y&&(h?y.transition():y).attr("height",b.getLegendHeight()-12).attr("width",C*(M+1)+10),b.legend.selectAll("."+j.legendItem).classed(j.legendItemHidden,function(t){return!b.isTargetToShow(t)}),b.updateLegendItemWidth(C),b.updateLegendItemHeight(T),b.updateLegendStep(M),b.updateSizes(),b.updateScales(),b.updateSvgSize(),b.transformAll(p,e),b.legendHasRendered=!0},u.prototype.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",j.regions)},u.prototype.updateRegion=function(t){var e=this,i=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible");var n=e.main.select("."+j.regions).selectAll("."+j.region).data(i.regions),o=n.enter().append("rect").attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)).style("fill-opacity",0);e.mainRegion=o.merge(n).attr("class",e.classRegion.bind(e)),n.exit().transition().duration(t).style("opacity",0).remove()},u.prototype.redrawRegion=function(t,e){var i=this.mainRegion;return[(t?i.transition(e):i).attr("x",this.regionX.bind(this)).attr("y",this.regionY.bind(this)).attr("width",this.regionWidth.bind(this)).attr("height",this.regionHeight.bind(this)).style("fill-opacity",function(t){return D(t.opacity)?t.opacity:.1})]},u.prototype.regionX=function(t){var e=this.config,i="y"===t.axis?this.y:this.y2;return"y"===t.axis||"y2"===t.axis?e.axis_rotated&&"start"in t?i(t.start):0:e.axis_rotated?0:"start"in t?this.x(this.isTimeSeries()?this.parseDate(t.start):t.start):0},u.prototype.regionY=function(t){var e=this.config,i="y"===t.axis?this.y:this.y2;return"y"===t.axis||"y2"===t.axis?e.axis_rotated?0:"end"in t?i(t.end):0:e.axis_rotated&&"start"in t?this.x(this.isTimeSeries()?this.parseDate(t.start):t.start):0},u.prototype.regionWidth=function(t){var e,i=this,n=i.config,o=i.regionX(t),r="y"===t.axis?i.y:i.y2;return(e="y"===t.axis||"y2"===t.axis?n.axis_rotated&&"end"in t?r(t.end):i.width:n.axis_rotated?i.width:"end"in t?i.x(i.isTimeSeries()?i.parseDate(t.end):t.end):i.width)<o?0:e-o},u.prototype.regionHeight=function(t){var e,i=this.config,n=this.regionY(t),o="y"===t.axis?this.y:this.y2;return(e="y"===t.axis||"y2"===t.axis?i.axis_rotated?this.height:"start"in t?o(t.start):this.height:i.axis_rotated&&"end"in t?this.x(this.isTimeSeries()?this.parseDate(t.end):t.end):this.height)<n?0:e-n},u.prototype.isRegionOnX=function(t){return!t.axis||"x"===t.axis},u.prototype.getScale=function(t,e,i){return(i?this.d3.scaleTime():this.d3.scaleLinear()).range([t,e])},u.prototype.getX=function(t,e,i,n){var o,r=this.getScale(t,e,this.isTimeSeries()),s=i?r.domain(i):r;for(o in r=this.isCategorized()?(n=n||function(){return 0},function(t,e){var i=s(t)+n(t);return e?i:Math.ceil(i)}):function(t,e){var i=s(t);return e?i:Math.ceil(i)},s)r[o]=s[o];return r.orgDomain=function(){return s.domain()},this.isCategorized()&&(r.domain=function(t){return arguments.length?(s.domain(t),r):[(t=this.orgDomain())[0],t[1]+1]}),r},u.prototype.getY=function(t,e,i){var n=this.getScale(t,e,this.isTimeSeriesY());return i&&n.domain(i),n},u.prototype.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},u.prototype.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},u.prototype.updateScales=function(){var e=this,t=e.config,i=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,i?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,i?t.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,i?t.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,i?t.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,i?t.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,t.axis_y_tick_format,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,t.axis_y2_tick_format,e.y2AxisTickValues,t.axis_y2_tick_outer),i||e.brush&&e.brush.updateScale(e.subX),e.updateArc&&e.updateArc()},u.prototype.selectPoint=function(t,e,i){var n=this,o=n.config,r=(o.axis_rotated?n.circleY:n.circleX).bind(n),s=(o.axis_rotated?n.circleX:n.circleY).bind(n),a=n.pointSelectR.bind(n);o.data_onselected.call(n.api,e,t.node()),n.main.select("."+j.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+j.selectedCircle+"-"+i).data([e]).enter().append("circle").attr("class",function(){return n.generateClass(j.selectedCircle,i)}).attr("cx",r).attr("cy",s).attr("stroke",function(){return n.color(e)}).attr("r",function(t){return 1.4*n.pointSelectR(t)}).transition().duration(100).attr("r",a)},u.prototype.unselectPoint=function(t,e,i){this.config.data_onunselected.call(this.api,e,t.node()),this.main.select("."+j.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+j.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove()},u.prototype.togglePoint=function(t,e,i,n){t?this.selectPoint(e,i,n):this.unselectPoint(e,i,n)},u.prototype.selectPath=function(t,e){var i=this;i.config.data_onselected.call(i,e,t.node()),i.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return i.d3.rgb(i.color(e)).brighter(.75)})},u.prototype.unselectPath=function(t,e){var i=this;i.config.data_onunselected.call(i,e,t.node()),i.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return i.color(e)})},u.prototype.togglePath=function(t,e,i,n){t?this.selectPath(e,i,n):this.unselectPath(e,i,n)},u.prototype.getToggle=function(t,e){var i;return"circle"===t.nodeName?i=this.isStepType(e)?function(){}:this.togglePoint:"path"===t.nodeName&&(i=this.togglePath),i},u.prototype.toggleShape=function(t,e,i){var n=this.d3,o=this.config,r=n.select(t),s=r.classed(j.SELECTED),a=this.getToggle(t,e).bind(this);o.data_selection_enabled&&o.data_selection_isselectable(e)&&(o.data_selection_multiple||this.main.selectAll("."+j.shapes+(o.data_selection_grouped?this.getTargetSelectorSuffix(e.id):"")).selectAll("."+j.shape).each(function(t,e){var i=n.select(this);i.classed(j.SELECTED)&&a(!1,i.classed(j.SELECTED,!1),t,e)}),r.classed(j.SELECTED,!s),a(!s,r,e,i))},u.prototype.initBar=function(){this.main.select("."+j.chart).append("g").attr("class",j.chartBars)},u.prototype.updateTargetsForBar=function(t){var e=this.config,i=this.classChartBar.bind(this),n=this.classBars.bind(this),o=this.classFocus.bind(this);this.main.select("."+j.chartBars).selectAll("."+j.chartBar).data(t).attr("class",function(t){return i(t)+o(t)}).enter().append("g").attr("class",i).style("pointer-events","none").append("g").attr("class",n).style("cursor",function(t){return e.data_selection_isselectable(t)?"pointer":null})},u.prototype.updateBar=function(t){function e(t){return i.color(t.id)}var i=this,n=i.barData.bind(i),o=i.classBar.bind(i),r=i.initialOpacity.bind(i),s=i.main.selectAll("."+j.bars).selectAll("."+j.bar).data(n),a=s.enter().append("path").attr("class",o).style("stroke",e).style("fill",e);i.mainBar=a.merge(s).style("opacity",r),s.exit().transition().duration(t).style("opacity",0)},u.prototype.redrawBar=function(t,e,i){return[(e?this.mainBar.transition(i):this.mainBar).attr("d",t).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},u.prototype.getBarW=function(t,e){var i=this.config,n="number"==typeof i.bar_width?i.bar_width:e?t.tickInterval()*i.bar_width_ratio/e:0;return i.bar_width_max&&n>i.bar_width_max?i.bar_width_max:n},u.prototype.getBars=function(t,e){return(e?this.main.selectAll("."+j.bars+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+j.bar+(D(t)?"-"+t:""))},u.prototype.expandBars=function(t,e,i){i&&this.unexpandBars(),this.getBars(t,e).classed(j.EXPANDED,!0)},u.prototype.unexpandBars=function(t){this.getBars(t).classed(j.EXPANDED,!1)},u.prototype.generateDrawBar=function(t,e){var r=this.config,s=this.generateGetBarPoints(t,e);return function(t,e){var i=s(t,e),n=r.axis_rotated?1:0,o=r.axis_rotated?0:1;return"M "+i[0][n]+","+i[0][o]+" L"+i[1][n]+","+i[1][o]+" L"+i[2][n]+","+i[2][o]+" L"+i[3][n]+","+i[3][o]+" z"}},u.prototype.generateGetBarPoints=function(t,e){var s=this,i=e?s.subXAxis:s.xAxis,n=t.__max__+1,a=s.getBarW(i,n),l=s.getShapeX(a,n,t,!!e),c=s.getShapeY(!!e),u=s.getShapeOffset(s.isBarType,t,!!e),d=a*(s.config.bar_space/2),h=e?s.getSubYScale:s.getYScale;return function(t,e){var i=h.call(s,t.id)(0),n=u(t,e)||i,o=l(t),r=c(t);return s.config.axis_rotated&&(0<t.value&&r<i||t.value<0&&i<r)&&(r=i),[[o+d,n],[o+d,r-(i-n)],[o+a-d,r-(i-n)],[o+a-d,n]]}},u.prototype.isWithinBar=function(t,e){var i=e.getBoundingClientRect(),n=e.pathSegList.getItem(0),o=e.pathSegList.getItem(1),r=Math.min(n.x,o.x),s=Math.min(n.y,o.y),a=r+i.width+2,l=s+i.height+2,c=s-2;return r-2<t[0]&&t[0]<a&&c<t[1]&&t[1]<l},u.prototype.getShapeIndices=function(t){var e,i,n=this.config,o={},r=0;return this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(e=0;e<n.data_groups.length;e++)if(!(n.data_groups[e].indexOf(t.id)<0))for(i=0;i<n.data_groups[e].length;i++)if(n.data_groups[e][i]in o){o[t.id]=o[n.data_groups[e][i]];break}w(o[t.id])&&(o[t.id]=r++)}),o.__max__=r-1,o},u.prototype.getShapeX=function(i,n,o,t){var r=t?this.subX:this.x;return function(t){var e=t.id in o?o[t.id]:0;return t.x||0===t.x?r(t.x)-i*(n/2-e):0}},u.prototype.getShapeY=function(e){var i=this;return function(t){return(e?i.getSubYScale(t.id):i.getYScale(t.id))(t.value)}},u.prototype.getShapeOffset=function(t,a,e){var l=this,c=l.orderTargets(l.filterTargetsToShow(l.data.targets.filter(t,l))),u=c.map(function(t){return t.id});return function(i,n){var o=e?l.getSubYScale(i.id):l.getYScale(i.id),r=o(0),s=r;return c.forEach(function(t){var e=l.isStepType(i)?l.convertValuesToStep(t.values):t.values;t.id!==i.id&&a[t.id]===a[i.id]&&u.indexOf(t.id)<u.indexOf(i.id)&&(void 0!==e[n]&&+e[n].x==+i.x||(n=-1,e.forEach(function(t,e){t.x===i.x&&(n=e)})),n in e&&0<=e[n].value*i.value&&(s+=o(e[n].value)-r))}),s}},u.prototype.isWithinShape=function(t,e){var i,n=this.d3.select(t);return this.isTargetToShow(e.id)?"circle"===t.nodeName?i=this.isStepType(e)?this.isWithinStep(t,this.getYScale(e.id)(e.value)):this.isWithinCircle(t,1.5*this.pointSelectR(e)):"path"===t.nodeName&&(i=!n.classed(j.bar)||this.isWithinBar(this.d3.mouse(t),t)):i=!1,i},u.prototype.getInterpolate=function(t){var e=this.d3,i={linear:e.curveLinear,"linear-closed":e.curveLinearClosed,basis:e.curveBasis,"basis-open":e.curveBasisOpen,"basis-closed":e.curveBasisClosed,bundle:e.curveBundle,cardinal:e.curveCardinal,"cardinal-open":e.curveCardinalOpen,"cardinal-closed":e.curveCardinalClosed,monotone:e.curveMonotoneX,step:e.curveStep,"step-before":e.curveStepBefore,"step-after":e.curveStepAfter};return this.isSplineType(t)?i[this.config.spline_interpolation_type]||i.cardinal:this.isStepType(t)?i[this.config.line_step_type]:i.linear},u.prototype.initLine=function(){this.main.select("."+j.chart).append("g").attr("class",j.chartLines)},u.prototype.updateTargetsForLine=function(t){var e,i=this,n=i.config,o=i.classChartLine.bind(i),r=i.classLines.bind(i),s=i.classAreas.bind(i),a=i.classCircles.bind(i),l=i.classFocus.bind(i);(e=i.main.select("."+j.chartLines).selectAll("."+j.chartLine).data(t).attr("class",function(t){return o(t)+l(t)}).enter().append("g").attr("class",o).style("opacity",0).style("pointer-events","none")).append("g").attr("class",r),e.append("g").attr("class",s),e.append("g").attr("class",function(t){return i.generateClass(j.selectedCircles,t.id)}),e.append("g").attr("class",a).style("cursor",function(t){return n.data_selection_isselectable(t)?"pointer":null}),t.forEach(function(e){i.main.selectAll("."+j.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+j.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},u.prototype.updateLine=function(t){var e=this,i=e.main.selectAll("."+j.lines).selectAll("."+j.line).data(e.lineData.bind(e)),n=i.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color);e.mainLine=n.merge(i).style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null),i.exit().transition().duration(t).style("opacity",0)},u.prototype.redrawLine=function(t,e,i){return[(e?this.mainLine.transition(i):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},u.prototype.generateDrawLine=function(t,s){function e(t){return(s?a.subxx:a.xx).call(a,t)}function i(t,e){return 0<l.data_groups.length?n(t,e)[0][1]:u.call(a,t.id)(t.value)}var a=this,l=a.config,c=a.d3.line(),n=a.generateGetLinePoints(t,s),u=s?a.getSubYScale:a.getYScale;return c=l.axis_rotated?c.x(i).y(e):c.x(e).y(i),l.line_connectNull||(c=c.defined(function(t){return null!=t.value})),function(t){var e=l.line_connectNull?a.filterRemoveNull(t.values):t.values,i=s?a.subX:a.x,n=u.call(a,t.id),o=0,r=0;return(a.isLineType(t)?l.data_regions[t.id]?a.lineWithRegions(e,i,n,l.data_regions[t.id]):(a.isStepType(t)&&(e=a.convertValuesToStep(e)),c.curve(a.getInterpolate(t))(e)):(e[0]&&(o=i(e[0].x),r=n(e[0].value)),l.axis_rotated?"M "+r+" "+o:"M "+o+" "+r))||"M 0 0"}},u.prototype.generateGetLinePoints=function(t,e){var s=this,a=s.config,i=t.__max__+1,l=s.getShapeX(0,i,t,!!e),c=s.getShapeY(!!e),u=s.getShapeOffset(s.isLineType,t,!!e),d=e?s.getSubYScale:s.getYScale;return function(t,e){var i=d.call(s,t.id)(0),n=u(t,e)||i,o=l(t),r=c(t);return a.axis_rotated&&(0<t.value&&r<i||t.value<0&&i<r)&&(r=i),[[o,r-(i-n)],[o,r-(i-n)],[o,r-(i-n)],[o,r-(i-n)]]}},u.prototype.lineWithRegions=function(t,l,c,e){var i,n,o,r,u,s,a,d,h,p,f,g=this,m=g.config,v="M",y=g.isCategorized()?.5:0,b=[];function _(t,e){var i;for(i=0;i<e.length;i++)if(e[i].start<t&&t<=e[i].end)return!0;return!1}if(K(e))for(i=0;i<e.length;i++)b[i]={},w(e[i].start)?b[i].start=t[0].x:b[i].start=g.isTimeSeries()?g.parseDate(e[i].start):e[i].start,w(e[i].end)?b[i].end=t[t.length-1].x:b[i].end=g.isTimeSeries()?g.parseDate(e[i].end):e[i].end;function E(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}for(p=m.axis_rotated?function(t){return c(t.value)}:function(t){return l(t.x)},f=m.axis_rotated?function(t){return l(t.x)}:function(t){return c(t.value)},o=g.isTimeSeries()?function(t,e,i,n){var o=t.x.getTime(),r=e.x-t.x,s=new Date(o+r*i),a=new Date(o+r*(i+n));return E(m.axis_rotated?[[c(u(i)),l(s)],[c(u(i+n)),l(a)]]:[[l(s),c(u(i))],[l(a),c(u(i+n))]])}:function(t,e,i,n){return E(m.axis_rotated?[[c(u(i),!0),l(r(i))],[c(u(i+n),!0),l(r(i+n))]]:[[l(r(i),!0),c(u(i))],[l(r(i+n),!0),c(u(i+n))]])},i=0;i<t.length;i++){if(w(b)||!_(t[i].x,b))v+=" "+p(t[i])+" "+f(t[i]);else for(r=g.getScale(t[i-1].x+y,t[i].x+y,g.isTimeSeries()),u=g.getScale(t[i-1].value,t[i].value),s=l(t[i].x)-l(t[i-1].x),a=c(t[i].value)-c(t[i-1].value),h=2*(d=2/Math.sqrt(Math.pow(s,2)+Math.pow(a,2))),n=d;n<=1;n+=h)v+=o(t[i-1],t[i],n,d);t[i].x}return v},u.prototype.updateArea=function(t){var e=this,i=e.d3,n=e.main.selectAll("."+j.areas).selectAll("."+j.area).data(e.lineData.bind(e)),o=n.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+i.select(this).style("opacity"),0});e.mainArea=o.merge(n).style("opacity",e.orgAreaOpacity),n.exit().transition().duration(t).style("opacity",0)},u.prototype.redrawArea=function(t,e,i){return[(e?this.mainArea.transition(i):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},u.prototype.generateDrawArea=function(t,e){function i(t){return(e?r.subxx:r.xx).call(r,t)}function n(t,e){return 0<s.data_groups.length?l(t,e)[0][1]:c.call(r,t.id)(r.getAreaBaseValue(t.id))}function o(t,e){return 0<s.data_groups.length?l(t,e)[1][1]:c.call(r,t.id)(t.value)}var r=this,s=r.config,a=r.d3.area(),l=r.generateGetAreaPoints(t,e),c=e?r.getSubYScale:r.getYScale;return a=s.axis_rotated?a.x0(n).x1(o).y(i):a.x(i).y0(s.area_above?0:n).y1(o),s.line_connectNull||(a=a.defined(function(t){return null!==t.value})),function(t){var e=s.line_connectNull?r.filterRemoveNull(t.values):t.values,i=0,n=0;return(r.isAreaType(t)?(r.isStepType(t)&&(e=r.convertValuesToStep(e)),a.curve(r.getInterpolate(t))(e)):(e[0]&&(i=r.x(e[0].x),n=r.getYScale(t.id)(e[0].value)),s.axis_rotated?"M "+n+" "+i:"M "+i+" "+n))||"M 0 0"}},u.prototype.getAreaBaseValue=function(){return 0},u.prototype.generateGetAreaPoints=function(t,e){var s=this,a=s.config,i=t.__max__+1,l=s.getShapeX(0,i,t,!!e),c=s.getShapeY(!!e),u=s.getShapeOffset(s.isAreaType,t,!!e),d=e?s.getSubYScale:s.getYScale;return function(t,e){var i=d.call(s,t.id)(0),n=u(t,e)||i,o=l(t),r=c(t);return a.axis_rotated&&(0<t.value&&r<i||t.value<0&&i<r)&&(r=i),[[o,n],[o,r-(i-n)],[o,r-(i-n)],[o,n]]}},u.prototype.updateCircle=function(t,e){var i=this,n=i.main.selectAll("."+j.circles).selectAll("."+j.circle).data(i.lineOrScatterOrStanfordData.bind(i)),o=n.enter().append("circle").attr("shape-rendering","crispEdges").attr("class",i.classCircle.bind(i)).attr("cx",t).attr("cy",e).attr("r",i.pointR.bind(i)).style("fill",i.isStanfordGraphType()?i.getStanfordPointColor.bind(i):i.color);i.mainCircle=o.merge(n).style("opacity",i.isStanfordGraphType()?1:i.initialOpacityForCircle.bind(i)),n.exit().style("opacity",0)},u.prototype.redrawCircle=function(t,e,i,n){var o=this.main.selectAll("."+j.selectedCircle);return[(i?this.mainCircle.transition(n):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.isStanfordGraphType()?this.getStanfordPointColor.bind(this):this.color).attr("cx",t).attr("cy",e),(i?o.transition(n):o).attr("cx",t).attr("cy",e)]},u.prototype.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},u.prototype.updateCircleY=function(){var t,i,e=this;0<e.config.data_groups.length?(t=e.getShapeIndices(e.isLineType),i=e.generateGetLinePoints(t),e.circleY=function(t,e){return i(t,e)[0][1]}):e.circleY=function(t){return e.getYScale(t.id)(t.value)}},u.prototype.getCircles=function(t,e){return(e?this.main.selectAll("."+j.circles+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+j.circle+(D(t)?"-"+t:""))},u.prototype.expandCircles=function(t,e,i){var n=this.pointExpandedR.bind(this);i&&this.unexpandCircles(),this.getCircles(t,e).classed(j.EXPANDED,!0).attr("r",n)},u.prototype.unexpandCircles=function(t){var e=this,i=e.pointR.bind(e);e.getCircles(t).filter(function(){return e.d3.select(this).classed(j.EXPANDED)}).classed(j.EXPANDED,!1).attr("r",i)},u.prototype.pointR=function(t){var e=this.config;return this.isStepType(t)?0:h(e.point_r)?e.point_r(t):e.point_r},u.prototype.pointExpandedR=function(t){var e=this.config;return e.point_focus_expand_enabled?h(e.point_focus_expand_r)?e.point_focus_expand_r(t):e.point_focus_expand_r?e.point_focus_expand_r:1.75*this.pointR(t):this.pointR(t)},u.prototype.pointSelectR=function(t){var e=this.config;return h(e.point_select_r)?e.point_select_r(t):e.point_select_r?e.point_select_r:4*this.pointR(t)},u.prototype.isWithinCircle=function(t,e){var i=this.d3,n=i.mouse(t),o=i.select(t),r=+o.attr("cx"),s=+o.attr("cy");return Math.sqrt(Math.pow(r-n[0],2)+Math.pow(s-n[1],2))<e},u.prototype.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},u.prototype.getCurrentWidth=function(){var t=this.config;return t.size_width?t.size_width:this.getParentWidth()},u.prototype.getCurrentHeight=function(){var t=this.config,e=t.size_height?t.size_height:this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},u.prototype.getCurrentPaddingTop=function(){var t=this.config,e=D(t.padding_top)?t.padding_top:0;return this.title&&this.title.node()&&(e+=this.getTitlePadding()),e},u.prototype.getCurrentPaddingBottom=function(){var t=this.config;return D(t.padding_bottom)?t.padding_bottom:0},u.prototype.getCurrentPaddingLeft=function(t){var e=this.config;return D(e.padding_left)?e.padding_left:e.axis_rotated?!e.axis_x_show||e.axis_x_inner?1:Math.max(o(this.getAxisWidthByAxisId("x",t)),40):!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:o(this.getAxisWidthByAxisId("y",t))},u.prototype.getCurrentPaddingRight=function(){var t=this.config,e=0,i=this.isLegendRight?this.getLegendWidth()+20:0;return e=D(t.padding_right)?t.padding_right+1:t.axis_rotated?10+i:!t.axis_y2_show||t.axis_y2_inner?2+i+(this.axis.getY2AxisLabelPosition().isOuter?20:0):o(this.getAxisWidthByAxisId("y2"))+i,this.colorScale&&this.colorScale.node()&&(e+=this.getColorScalePadding()),e},u.prototype.getParentRectValue=function(e){for(var i,n=this.selectChart.node();n&&"BODY"!==n.tagName;){try{i=n.getBoundingClientRect()[e]}catch(t){"width"===e&&(i=n.offsetWidth)}if(i)break;n=n.parentNode}return i},u.prototype.getParentWidth=function(){return this.getParentRectValue("width")},u.prototype.getParentHeight=function(){var t=this.selectChart.style("height");return 0<t.indexOf("px")?+t.replace("px",""):0},u.prototype.getSvgLeft=function(t){var e=this.config,i=e.axis_rotated||!e.axis_rotated&&!e.axis_y_inner,n=e.axis_rotated?j.axisX:j.axisY,o=this.main.select("."+n).node(),r=o&&i?o.getBoundingClientRect():{right:0},s=this.selectChart.node().getBoundingClientRect(),a=this.hasArcType(),l=r.right-s.left-(a?0:this.getCurrentPaddingLeft(t));return 0<l?l:0},u.prototype.getAxisWidthByAxisId=function(t,e){var i=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(i.isInner?20:40)},u.prototype.getHorizontalAxisHeight=function(t){var e=this.config,i=30;return"x"!==t||e.axis_x_show?"x"===t&&e.axis_x_height?e.axis_x_height:"y"!==t||e.axis_y_show?"y2"!==t||e.axis_y2_show?("x"===t&&!e.axis_rotated&&e.axis_x_tick_rotate&&(i=30+this.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(e.axis_x_tick_rotate))/180)),"y"===t&&e.axis_rotated&&e.axis_y_tick_rotate&&(i=30+this.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(e.axis_y_tick_rotate))/180)),i+(this.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):this.rotated_padding_top:!e.legend_show||this.isLegendRight||this.isLegendInset?1:10:8},u.prototype.initBrush=function(t){var o=this,e=o.d3;return o.brush=(o.config.axis_rotated?e.brushY():e.brushX()).on("brush",function(){var t=e.event.sourceEvent;t&&"zoom"===t.type||o.redrawForBrush()}).on("end",function(){var t=e.event.sourceEvent;t&&"zoom"===t.type||o.brush.empty()&&t&&"end"!==t.type&&o.brush.clear()}),o.brush.updateExtent=function(){var t,e=this.scale.range();return t=o.config.axis_rotated?[[0,e[0]],[o.width2,e[1]]]:[[e[0],0],[e[1],o.height2]],this.extent(t),this},o.brush.updateScale=function(t){return this.scale=t,this},o.brush.update=function(t){this.updateScale(t||o.subX).updateExtent(),o.context.select("."+j.brush).call(this)},o.brush.clear=function(){o.context.select("."+j.brush).call(o.brush.move,null)},o.brush.selection=function(){return e.brushSelection(o.context.select("."+j.brush).node())},o.brush.selectionAsValue=function(t,e){var i,n;return t?(o.context&&(i=[this.scale(t[0]),this.scale(t[1])],n=o.context.select("."+j.brush),e&&(n=n.transition()),o.brush.move(n,i)),[]):(i=o.brush.selection()||[0,0],[this.scale.invert(i[0]),this.scale.invert(i[1])])},o.brush.empty=function(){var t=o.brush.selection();return!t||t[0]===t[1]},o.brush.updateScale(t)},u.prototype.initSubchart=function(){var t=this.config,e=this.context=this.svg.append("g").attr("transform",this.getTranslate("context")),i=t.subchart_show?"visible":"hidden";e.style("visibility",i),e.append("g").attr("clip-path",this.clipPathForSubchart).attr("class",j.chart),e.select("."+j.chart).append("g").attr("class",j.chartBars),e.select("."+j.chart).append("g").attr("class",j.chartLines),e.append("g").attr("clip-path",this.clipPath).attr("class",j.brush),this.axes.subx=e.append("g").attr("class",j.axisX).attr("transform",this.getTranslate("subx")).attr("clip-path",t.axis_rotated?"":this.clipPathForXAxis)},u.prototype.initSubchartBrush=function(){this.initBrush(this.subX).updateExtent(),this.context.select("."+j.brush).call(this.brush)},u.prototype.updateTargetsForSubchart=function(t){var e,i,n,o,r=this,s=r.context,a=r.config,l=r.classChartBar.bind(r),c=r.classBars.bind(r),u=r.classChartLine.bind(r),d=r.classLines.bind(r),h=r.classAreas.bind(r);a.subchart_show&&((n=(o=s.select("."+j.chartBars).selectAll("."+j.chartBar).data(t)).enter().append("g").style("opacity",0)).merge(o).attr("class",l),n.append("g").attr("class",c),(e=(i=s.select("."+j.chartLines).selectAll("."+j.chartLine).data(t)).enter().append("g").style("opacity",0)).merge(i).attr("class",u),e.append("g").attr("class",d),e.append("g").attr("class",h),s.selectAll("."+j.brush+" rect").attr(a.axis_rotated?"width":"height",a.axis_rotated?r.width2:r.height2))},u.prototype.updateBarForSubchart=function(t){var e=this.context.selectAll("."+j.bars).selectAll("."+j.bar).data(this.barData.bind(this)),i=e.enter().append("path").attr("class",this.classBar.bind(this)).style("stroke","none").style("fill",this.color);e.exit().transition().duration(t).style("opacity",0).remove(),this.contextBar=i.merge(e).style("opacity",this.initialOpacity.bind(this))},u.prototype.redrawBarForSubchart=function(t,e,i){(e?this.contextBar.transition(Math.random().toString()).duration(i):this.contextBar).attr("d",t).style("opacity",1)},u.prototype.updateLineForSubchart=function(t){var e=this.context.selectAll("."+j.lines).selectAll("."+j.line).data(this.lineData.bind(this)),i=e.enter().append("path").attr("class",this.classLine.bind(this)).style("stroke",this.color);e.exit().transition().duration(t).style("opacity",0).remove(),this.contextLine=i.merge(e).style("opacity",this.initialOpacity.bind(this))},u.prototype.redrawLineForSubchart=function(t,e,i){(e?this.contextLine.transition(Math.random().toString()).duration(i):this.contextLine).attr("d",t).style("opacity",1)},u.prototype.updateAreaForSubchart=function(t){var e=this,i=e.d3,n=e.context.selectAll("."+j.areas).selectAll("."+j.area).data(e.lineData.bind(e)),o=n.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+i.select(this).style("opacity"),0});n.exit().transition().duration(t).style("opacity",0).remove(),e.contextArea=o.merge(n).style("opacity",0)},u.prototype.redrawAreaForSubchart=function(t,e,i){(e?this.contextArea.transition(Math.random().toString()).duration(i):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},u.prototype.redrawSubchart=function(t,e,i,n,o,r,s){var a,l,c,u=this,d=u.d3,h=u.config;u.context.style("visibility",h.subchart_show?"visible":"hidden"),h.subchart_show&&(d.event&&"zoom"===d.event.type&&u.brush.selectionAsValue(u.x.orgDomain()),t&&(u.brush.empty()||u.brush.selectionAsValue(u.x.orgDomain()),a=u.generateDrawArea(o,!0),l=u.generateDrawBar(r,!0),c=u.generateDrawLine(s,!0),u.updateBarForSubchart(i),u.updateLineForSubchart(i),u.updateAreaForSubchart(i),u.redrawBarForSubchart(l,i,i),u.redrawLineForSubchart(c,i,i),u.redrawAreaForSubchart(a,i,i)))},u.prototype.redrawForBrush=function(){var t,e=this,i=e.x,n=e.d3;e.redraw({withTransition:!1,withY:e.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withEventRect:!1,withDimension:!1}),t=n.event.selection||e.brush.scale.range(),e.main.select("."+j.eventRect).call(e.zoom.transform,n.zoomIdentity.scale(e.width/(t[1]-t[0])).translate(-t[0],0)),e.config.subchart_onbrush.call(e.api,i.orgDomain())},u.prototype.transformContext=function(t,e){var i;e&&e.axisSubX?i=e.axisSubX:(i=this.context.select("."+j.axisX),t&&(i=i.transition())),this.context.attr("transform",this.getTranslate("context")),i.attr("transform",this.getTranslate("subx"))},u.prototype.getDefaultSelection=function(){var t=this.config,e=h(t.axis_x_selection)?t.axis_x_selection(this.getXDomain(this.data.targets)):t.axis_x_selection;return this.isTimeSeries()&&(e=[this.parseDate(e[0]),this.parseDate(e[1])]),e},u.prototype.initText=function(){this.main.select("."+j.chart).append("g").attr("class",j.chartTexts),this.mainText=this.d3.selectAll([])},u.prototype.updateTargetsForText=function(t){var e=this.classChartText.bind(this),i=this.classTexts.bind(this),n=this.classFocus.bind(this),o=this.main.select("."+j.chartTexts).selectAll("."+j.chartText).data(t),r=o.enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none");r.append("g").attr("class",i),r.merge(o).attr("class",function(t){return e(t)+n(t)})},u.prototype.updateText=function(t,e,i){var n=this,o=n.config,r=n.barOrLineData.bind(n),s=n.classText.bind(n),a=n.main.selectAll("."+j.texts).selectAll("."+j.text).data(r),l=a.enter().append("text").attr("class",s).attr("text-anchor",function(t){return o.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").attr("x",t).attr("y",e).style("fill",function(t){return n.color(t)}).style("fill-opacity",0);n.mainText=l.merge(a).text(function(t,e,i){return n.dataLabelFormat(t.id)(t.value,t.id,e,i)}),a.exit().transition().duration(i).style("fill-opacity",0).remove()},u.prototype.redrawText=function(t,e,i,n,o){return[(n?this.mainText.transition(o):this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",i?0:this.opacityForText.bind(this))]},u.prototype.getTextRect=function(t,e,i){var n,o=this.d3.select("body").append("div").classed("c3",!0),r=o.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),s=this.d3.select(i).style("font");return r.selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).style("font",s).text(t).each(function(){n=this.getBoundingClientRect()}),o.remove(),n},u.prototype.generateXYForText=function(t,e,i,n){var o=this,r=o.generateGetAreaPoints(t,!1),s=o.generateGetBarPoints(e,!1),a=o.generateGetLinePoints(i,!1),l=n?o.getXForText:o.getYForText;return function(t,e){var i=o.isAreaType(t)?r:o.isBarType(t)?s:a;return l.call(o,i(t,e),t,this)}},u.prototype.getXForText=function(t,e,i){var n,o,r=i.getBoundingClientRect();return n=this.config.axis_rotated?(o=this.isBarType(e)?4:6,t[2][1]+o*(e.value<0?-1:1)):this.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(n>this.width?n=this.width-r.width:n<0&&(n=4)),n},u.prototype.getYForText=function(t,e,i){var n,o=i.getBoundingClientRect();return this.config.axis_rotated?n=(t[0][0]+t[2][0]+.6*o.height)/2:(n=t[2][1],e.value<0||0===e.value&&!this.hasPositiveValue?(n+=o.height,this.isBarType(e)&&this.isSafari()?n-=3:!this.isBarType(e)&&this.isChrome()&&(n+=3)):n+=this.isBarType(e)?-3:-6),null!==e.value||this.config.axis_rotated||(n<o.height?n=o.height:n>this.height&&(n=this.height-4)),n},u.prototype.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},u.prototype.redrawTitle=function(){this.title.attr("x",this.xForTitle.bind(this)).attr("y",this.yForTitle.bind(this))},u.prototype.xForTitle=function(){var t=this,e=t.config,i=e.title_position||"left";return 0<=i.indexOf("right")?t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-e.title_padding.right:0<=i.indexOf("center")?(t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2:e.title_padding.left},u.prototype.yForTitle=function(){return this.config.title_padding.top+this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).height},u.prototype.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},u.prototype.drawColorScale=function(){var t,e,i,n,o,r,s,a=this,l=a.d3,c=a.config,u=a.data.targets[0];if((t=isNaN(c.stanford_scaleWidth)?20:c.stanford_scaleWidth)<0)throw Error("Colorscale's barheight and barwidth must be greater than 0.");s=a.height-c.stanford_padding.bottom-c.stanford_padding.top,i=l.range(c.stanford_padding.bottom,s,5),r=l.scaleSequential(u.colors).domain([i[i.length-1],i[0]]),a.colorScale&&a.colorScale.remove(),a.colorScale=a.svg.append("g").attr("width",50).attr("height",s).attr("class",j.colorScale),a.colorScale.append("g").attr("transform","translate(0, ".concat(c.stanford_padding.top,")")).selectAll("bars").data(i).enter().append("rect").attr("y",function(t,e){return 5*e}).attr("x",0).attr("width",t).attr("height",5).attr("fill",function(t){return r(t)}),o=l.scaleLog().domain([u.minEpochs,u.maxEpochs]).domain([u.minEpochs,u.maxEpochs]).range([i[0]+c.stanford_padding.top+i[i.length-1]+5-1,i[0]+c.stanford_padding.top]),n=l.axisRight(o),"pow10"===c.stanford_scaleFormat?n.tickValues([1,10,100,1e3,1e4,1e5,1e6,1e7]):h(c.stanford_scaleFormat)?n.tickFormat(c.stanford_scaleFormat):n.tickFormat(l.format("d")),e=a.colorScale.append("g").attr("class","legend axis").attr("transform","translate(".concat(t,",0)")).call(n),"pow10"===c.stanford_scaleFormat&&e.selectAll(".tick text").text(null).filter(p).text(10).append("tspan").attr("dy","-.7em").text(function(t){return Math.round(Math.log(t)/Math.LN10)}),a.colorScale.attr("transform","translate(".concat(a.currentWidth-a.xForColorScale(),", 0)"))},u.prototype.xForColorScale=function(){return this.config.stanford_padding.right+this.colorScale.node().getBBox().width},u.prototype.getColorScalePadding=function(){return this.xForColorScale()+this.config.stanford_padding.left+20},u.prototype.isStanfordGraphType=function(){return"stanford"===this.config.data_type},u.prototype.initStanfordData=function(){var t,e,i,n=this.d3,o=this.config,r=this.data.targets[0];if(r.values.sort(v),t=r.values.map(function(t){return t.epochs}),i=isNaN(o.stanford_scaleMin)?n.min(t):o.stanford_scaleMin,(e=isNaN(o.stanford_scaleMax)?n.max(t):o.stanford_scaleMax)<i)throw Error("Number of minEpochs has to be smaller than maxEpochs");r.colors=h(o.stanford_colors)?o.stanford_colors:n.interpolateHslLong(n.hsl(250,1,.5),n.hsl(0,1,.5)),r.colorscale=n.scaleSequentialLog(r.colors).domain([i,e]),r.minEpochs=i,r.maxEpochs=e},u.prototype.getStanfordPointColor=function(t){return this.data.targets[0].colorscale(t.epochs)},u.prototype.getCentroid=function(t){var e,i,n,o,r,s=f(t),a=0,l=0;for(e=0,i=t.length-1;e<t.length;i=e,e+=1)o=t[e],r=t[i],n=o.x*r.y-r.x*o.y,a+=(o.x+r.x)*n,l+=(o.y+r.y)*n;return{x:a/(n=6*s),y:l/n}},u.prototype.getStanfordTooltipTitle=function(t){var e=this.axis.getLabelText("x"),i=this.axis.getLabelText("y");return"\n      <tr><th>".concat(e?m(e):"x","</th><th class='value'>").concat(t.x,"</th></tr>\n      <tr><th>").concat(i?m(i):"y","</th><th class='value'>").concat(t.value,"</th></tr>\n    ")},u.prototype.countEpochsInRegion=function(i){var t,e,n=this.data.targets[0];return t=n.values.reduce(function(t,e){return t+Number(e.epochs)},0),{value:e=n.values.reduce(function(t,e){return g(e,i)?t+Number(e.epochs):t},0),percentage:0!==e?(e/t*100).toFixed(1):0}};var f=function(t){var e,i,n,o,r=0;for(e=0,i=t.length-1;e<t.length;i=e,e+=1)n=t[e],o=t[i],r+=n.x*o.y,r-=n.y*o.x;return r/2},g=function(t,e){for(var i,n,o,r,s=t.x,a=t.value,l=!1,c=0,u=e.length-1;c<e.length;u=c++)i=e[c].x,n=e[c].y,r=e[u].x,a<n!=a<(o=e[u].y)&&s<(r-i)*(a-n)/(o-n)+i&&(l=!l);return l},v=function(t,e){return t.epochs<e.epochs?-1:t.epochs>e.epochs?1:0};return u.prototype.initStanfordElements=function(){this.stanfordElements=this.main.select("."+j.chart).append("g").attr("class",j.stanfordElements),this.stanfordElements.append("g").attr("class",j.stanfordLines),this.stanfordElements.append("g").attr("class",j.stanfordTexts),this.stanfordElements.append("g").attr("class",j.stanfordRegions)},u.prototype.updateStanfordElements=function(t){var e,i,n,o,r,s,a=this,l=a.main,c=a.config,u=a.xvCustom.bind(a),d=a.yvCustom.bind(a),h=a.countEpochsInRegion.bind(a);(i=(e=l.select("."+j.stanfordLines).style("shape-rendering","geometricprecision").selectAll("."+j.stanfordLine).data(c.stanford_lines)).enter().append("g").attr("class",function(t){return j.stanfordLine+(t.class?" "+t.class:"")})).append("line").attr("x1",function(t){return c.axis_rotated?d(t,"value_y1"):u(t,"value_x1")}).attr("x2",function(t){return c.axis_rotated?d(t,"value_y2"):u(t,"value_x2")}).attr("y1",function(t){return c.axis_rotated?u(t,"value_x1"):d(t,"value_y1")}).attr("y2",function(t){return c.axis_rotated?u(t,"value_x2"):d(t,"value_y2")}).style("opacity",0),a.stanfordLines=i.merge(e),a.stanfordLines.select("line").transition().duration(t).attr("x1",function(t){return c.axis_rotated?d(t,"value_y1"):u(t,"value_x1")}).attr("x2",function(t){return c.axis_rotated?d(t,"value_y2"):u(t,"value_x2")}).attr("y1",function(t){return c.axis_rotated?u(t,"value_x1"):d(t,"value_y1")}).attr("y2",function(t){return c.axis_rotated?u(t,"value_x2"):d(t,"value_y2")}).style("opacity",1),e.exit().transition().duration(t).style("opacity",0).remove(),(s=(r=l.select("."+j.stanfordTexts).selectAll("."+j.stanfordText).data(c.stanford_texts)).enter().append("g").attr("class",function(t){return j.stanfordText+(t.class?" "+t.class:"")})).append("text").attr("x",function(t){return c.axis_rotated?d(t,"y"):u(t,"x")}).attr("y",function(t){return c.axis_rotated?u(t,"x"):d(t,"y")}).style("opacity",0),a.stanfordTexts=s.merge(r),a.stanfordTexts.select("text").transition().duration(t).attr("x",function(t){return c.axis_rotated?d(t,"y"):u(t,"x")}).attr("y",function(t){return c.axis_rotated?u(t,"x"):d(t,"y")}).text(function(t){return t.content}).style("opacity",1),r.exit().transition().duration(t).style("opacity",0).remove(),(o=(n=l.select("."+j.stanfordRegions).selectAll("."+j.stanfordRegion).data(c.stanford_regions)).enter().append("g").attr("class",function(t){return j.stanfordRegion+(t.class?" "+t.class:"")})).append("polygon").attr("points",function(t){return t.points.map(function(t){return[c.axis_rotated?d(t,"y"):u(t,"x"),c.axis_rotated?u(t,"x"):d(t,"y")].join(",")}).join(" ")}).style("opacity",0),o.append("text").attr("x",function(t){return a.getCentroid(t.points).x}).attr("y",function(t){return a.getCentroid(t.points).y}).style("opacity",0),a.stanfordRegions=o.merge(n),a.stanfordRegions.select("polygon").transition().duration(t).attr("points",function(t){return t.points.map(function(t){return[c.axis_rotated?d(t,"y"):u(t,"x"),c.axis_rotated?u(t,"x"):d(t,"y")].join(",")}).join(" ")}).style("opacity",function(t){return t.opacity?t.opacity:.2}),a.stanfordRegions.select("text").transition().duration(t).attr("x",function(t){return c.axis_rotated?d(a.getCentroid(t.points),"y"):u(a.getCentroid(t.points),"x")}).attr("y",function(t){return c.axis_rotated?u(a.getCentroid(t.points),"x"):d(a.getCentroid(t.points),"y")}).text(function(t){var e,i,n;return t.text?(a.isStanfordGraphType()&&(e=(n=h(t.points)).value,i=n.percentage),t.text(e,i)):""}).attr("text-anchor","middle").attr("dominant-baseline","middle").style("opacity",1),n.exit().transition().duration(t).style("opacity",0).remove()},u.prototype.initTooltip=function(){var t,e=this,i=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",j.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),i.tooltip_init_show){if(e.isTimeSeries()&&c(i.tooltip_init_x)){for(i.tooltip_init_x=e.parseDate(i.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-i.tooltip_init_x!=0;t++);i.tooltip_init_x=t}e.tooltip.html(i.tooltip_contents.call(e,e.data.targets.map(function(t){return e.addName(t.values[i.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",i.tooltip_init_position.top).style("left",i.tooltip_init_position.left).style("display","block")}},u.prototype.getTooltipSortFunction=function(){var t=this.config;if(0!==t.data_groups.length&&void 0===t.tooltip_order){var i=this.orderTargets(this.data.targets).map(function(t){return t.id});return(this.isOrderAsc()||this.isOrderDesc())&&(i=i.reverse()),function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}}var n=t.tooltip_order;void 0===n&&(n=t.data_order);function o(t){return t?t.value:null}if(c(n)&&"asc"===n.toLowerCase())return function(t,e){return o(t)-o(e)};if(c(n)&&"desc"===n.toLowerCase())return function(t,e){return o(e)-o(t)};if(h(n)){var e=n;return void 0===t.tooltip_order&&(e=function(t,e){return n(t?{id:t.id,values:[t]}:null,e?{id:e.id,values:[e]}:null)}),e}return s(n)?function(t,e){return n.indexOf(t.id)-n.indexOf(e.id)}:void 0},u.prototype.getTooltipContent=function(t,e,i,n){var o,r,s,a,l,c,u=this,d=u.config,h=d.tooltip_format_title||e,p=d.tooltip_format_name||function(t){return t},f=d.tooltip_format_value||i,g=this.getTooltipSortFunction();for(g&&t.sort(g),r=0;r<t.length;r++)if(t[r]&&(t[r].value||0===t[r].value)){if(u.isStanfordGraphType())o||(s=u.getStanfordTooltipTitle(t[r]),o="<table class='"+u.CLASS.tooltip+"'>"+s),c=u.getStanfordPointColor(t[r]),l=m(d.data_epochs),a=t[r].epochs;else if(o||(s=m(h?h(t[r].x,t[r].index):t[r].x),o="<table class='"+u.CLASS.tooltip+"'>"+(s||0===s?"<tr><th colspan='2'>"+s+"</th></tr>":"")),void 0!==(a=m(f(t[r].value,t[r].ratio,t[r].id,t[r].index,t)))){if(null===t[r].name)continue;l=m(p(t[r].name,t[r].ratio,t[r].id,t[r].index)),c=u.levelColor?u.levelColor(t[r].value):n(t[r].id)}void 0!==a&&(o+="<tr class='"+u.CLASS.tooltipName+"-"+u.getTargetSelectorSuffix(t[r].id)+"'>",o+="<td class='name'><span style='background-color:"+c+"'></span>"+l+"</td>",o+="<td class='value'>"+a+"</td>",o+="</tr>")}return o+"</table>"},u.prototype.tooltipPosition=function(t,e,i,n){var o,r,s,a,l,c=this,u=c.config,d=c.d3,h=c.hasArcType(),p=d.mouse(n);return h?(r=(c.width-(c.isLegendRight?c.getLegendWidth():0))/2+p[0],a=(c.hasType("gauge")?c.height:c.height/2)+p[1]+20):(o=c.getSvgLeft(!0),a=u.axis_rotated?(s=(r=o+p[0]+100)+e,l=c.currentWidth-c.getCurrentPaddingRight(),c.x(t[0].x)+20):(s=(r=o+c.getCurrentPaddingLeft(!0)+c.x(t[0].x)+20)+e,l=o+c.currentWidth-c.getCurrentPaddingRight(),p[1]+15),l<s&&(r-=s-l+20),a+i>c.currentHeight&&(a-=i+30)),a<0&&(a=0),{top:a,left:r}},u.prototype.showTooltip=function(t,e){var i,n,o,r=this,s=r.config,a=r.hasArcType(),l=t.filter(function(t){return t&&D(t.value)}),c=s.tooltip_position||u.prototype.tooltipPosition;0!==l.length&&s.tooltip_show&&(r.tooltip.html(s.tooltip_contents.call(r,t,r.axis.getXAxisTickFormat(),r.getYFormat(a),r.color)).style("display","block"),i=r.tooltip.property("offsetWidth"),n=r.tooltip.property("offsetHeight"),o=c.call(this,l,i,n,e),r.tooltip.style("top",o.top+"px").style("left",o.left+"px"))},u.prototype.hideTooltip=function(){this.tooltip.style("display","none")},u.prototype.setTargetType=function(t,e){var i=this,n=i.config;i.mapToTargetIds(t).forEach(function(t){i.withoutFadeIn[t]=e===n.data_types[t],n.data_types[t]=e}),t||(n.data_type=e)},u.prototype.hasType=function(i,t){var n=this.config.data_types,o=!1;return(t=t||this.data.targets)&&t.length?t.forEach(function(t){var e=n[t.id];(e&&0<=e.indexOf(i)||!e&&"line"===i)&&(o=!0)}):Object.keys(n).length?Object.keys(n).forEach(function(t){n[t]===i&&(o=!0)}):o=this.config.data_type===i,o},u.prototype.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},u.prototype.isLineType=function(t){var e=this.config,i=c(t)?t:t.id;return!e.data_types[i]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[i])},u.prototype.isStepType=function(t){var e=c(t)?t:t.id;return 0<=["step","area-step"].indexOf(this.config.data_types[e])},u.prototype.isSplineType=function(t){var e=c(t)?t:t.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[e])},u.prototype.isAreaType=function(t){var e=c(t)?t:t.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[e])},u.prototype.isBarType=function(t){var e=c(t)?t:t.id;return"bar"===this.config.data_types[e]},u.prototype.isScatterType=function(t){var e=c(t)?t:t.id;return"scatter"===this.config.data_types[e]},u.prototype.isStanfordType=function(t){var e=c(t)?t:t.id;return"stanford"===this.config.data_types[e]},u.prototype.isScatterOrStanfordType=function(t){return this.isScatterType(t)||this.isStanfordType(t)},u.prototype.isPieType=function(t){var e=c(t)?t:t.id;return"pie"===this.config.data_types[e]},u.prototype.isGaugeType=function(t){var e=c(t)?t:t.id;return"gauge"===this.config.data_types[e]},u.prototype.isDonutType=function(t){var e=c(t)?t:t.id;return"donut"===this.config.data_types[e]},u.prototype.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},u.prototype.lineData=function(t){return this.isLineType(t)?[t]:[]},u.prototype.arcData=function(t){return this.isArcType(t.data)?[t]:[]},u.prototype.barData=function(t){return this.isBarType(t)?t.values:[]},u.prototype.lineOrScatterOrStanfordData=function(t){return this.isLineType(t)||this.isScatterType(t)||this.isStanfordType(t)?t.values:[]},u.prototype.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},u.prototype.isSafari=function(){var t=window.navigator.userAgent;return 0<=t.indexOf("Safari")&&t.indexOf("Chrome")<0},u.prototype.isChrome=function(){return 0<=window.navigator.userAgent.indexOf("Chrome")},u.prototype.initZoom=function(){var e,i=this,n=i.d3,o=i.config;return i.zoom=n.zoom().on("start",function(){if("scroll"===o.zoom_type){var t=n.event.sourceEvent;t&&"brush"===t.type||(e=t,o.zoom_onzoomstart.call(i.api,t))}}).on("zoom",function(){if("scroll"===o.zoom_type){var t=n.event.sourceEvent;t&&"brush"===t.type||(i.redrawForZoom(),o.zoom_onzoom.call(i.api,i.x.orgDomain()))}}).on("end",function(){if("scroll"===o.zoom_type){var t=n.event.sourceEvent;t&&"brush"===t.type||t&&e.clientX===t.clientX&&e.clientY===t.clientY||o.zoom_onzoomend.call(i.api,i.x.orgDomain())}}),i.zoom.updateDomain=function(){return n.event&&n.event.transform&&i.x.domain(n.event.transform.rescaleX(i.subX).domain()),this},i.zoom.updateExtent=function(){return this.scaleExtent([1,1/0]).translateExtent([[0,0],[i.width,i.height]]).extent([[0,0],[i.width,i.height]]),this},i.zoom.update=function(){return this.updateExtent().updateDomain()},i.zoom.updateExtent()},u.prototype.zoomTransform=function(t){var e=[this.x(t[0]),this.x(t[1])];return this.d3.zoomIdentity.scale(this.width/(e[1]-e[0])).translate(-e[0],0)},u.prototype.initDragZoom=function(){var e=this,i=e.d3,n=e.config,t=e.context=e.svg,o=e.margin.left+20.5,r=e.margin.top+.5;if("drag"===n.zoom_type&&n.zoom_enabled){var s=function(t){return t&&t.map(function(t){return e.x.invert(t)})},a=e.dragZoomBrush=i.brushX().on("start",function(){e.api.unzoom(),e.svg.select("."+j.dragZoom).classed("disabled",!1),n.zoom_onzoomstart.call(e.api,i.event.sourceEvent)}).on("brush",function(){n.zoom_onzoom.call(e.api,s(i.event.selection))}).on("end",function(){if(null!=i.event.selection){var t=s(i.event.selection);n.zoom_disableDefaultBehavior||e.api.zoom(t),e.svg.select("."+j.dragZoom).classed("disabled",!0),n.zoom_onzoomend.call(e.api,t)}});t.append("g").classed(j.dragZoom,!0).attr("clip-path",e.clipPath).attr("transform","translate("+o+","+r+")").call(a)}},u.prototype.getZoomDomain=function(){var t=this.config,e=this.d3;return[e.min([this.orgXDomain[0],t.zoom_x_min]),e.max([this.orgXDomain[1],t.zoom_x_max])]},u.prototype.redrawForZoom=function(){var t=this,e=t.d3,i=t.config,n=t.zoom,o=t.x;i.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length&&(n.update(),i.zoom_disableDefaultBehavior||(t.isCategorized()&&o.orgDomain()[0]===t.orgXDomain[0]&&o.domain([t.orgXDomain[0]-1e-10,o.orgDomain()[1]]),t.redraw({withTransition:!1,withY:i.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),e.event.sourceEvent&&"mousemove"===e.event.sourceEvent.type&&(t.cancelClick=!0)))},t}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(u){u.extend(u.fn,{validate:function(t){if(this.length){var n=u.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new u.validator(t,this[0]),u.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(t){n.submitButton=t.currentTarget,u(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==u(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(i){function t(){var t,e;return n.submitButton&&(n.settings.submitHandler||n.formSubmitted)&&(t=u("<input type='hidden'/>").attr("name",n.submitButton.name).val(u(n.submitButton).val()).appendTo(n.currentForm)),!n.settings.submitHandler||(e=n.settings.submitHandler.call(n,n.currentForm,i),t&&t.remove(),void 0!==e&&e)}return n.settings.debug&&i.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,t()):n.form()?n.pendingRequest?!(n.formSubmitted=!0):t():(n.focusInvalid(),!1)})),n)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,e,i;return u(this[0]).is("form")?t=this.validate().form():(i=[],t=!0,e=u(this[0].form).validate(),this.each(function(){(t=e.element(this)&&t)||(i=i.concat(e.errorList))}),e.errorList=i),t},rules:function(t,e){var i,n,o,r,s,a,l=this[0];if(null!=l&&(!l.form&&l.hasAttribute("contenteditable")&&(l.form=this.closest("form")[0],l.name=this.attr("name")),null!=l.form)){if(t)switch(n=(i=u.data(l.form,"validator").settings).rules,o=u.validator.staticRules(l),t){case"add":u.extend(o,u.validator.normalizeRule(e)),delete o.messages,n[l.name]=o,e.messages&&(i.messages[l.name]=u.extend(i.messages[l.name],e.messages));break;case"remove":return e?(a={},u.each(e.split(/\s/),function(t,e){a[e]=o[e],delete o[e]}),a):(delete n[l.name],o)}return(r=u.validator.normalizeRules(u.extend({},u.validator.classRules(l),u.validator.attributeRules(l),u.validator.dataRules(l),u.validator.staticRules(l)),l)).required&&(s=r.required,delete r.required,r=u.extend({required:s},r)),r.remote&&(s=r.remote,delete r.remote,r=u.extend(r,{remote:s})),r}}}),u.extend(u.expr.pseudos||u.expr[":"],{blank:function(t){return!u.trim(""+u(t).val())},filled:function(t){var e=u(t).val();return null!==e&&!!u.trim(""+e)},unchecked:function(t){return!u(t).prop("checked")}}),u.validator=function(t,e){this.settings=u.extend(!0,{},u.validator.defaults,t),this.currentForm=e,this.init()},u.validator.format=function(i,t){return 1===arguments.length?function(){var t=u.makeArray(arguments);return t.unshift(i),u.validator.format.apply(this,t)}:(void 0===t||(2<arguments.length&&t.constructor!==Array&&(t=u.makeArray(arguments).slice(1)),t.constructor!==Array&&(t=[t]),u.each(t,function(t,e){i=i.replace(new RegExp("\\{"+t+"\\}","g"),function(){return e})})),i)},u.extend(u.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:u([]),errorLabelContainer:u([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||-1!==u.inArray(e.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(t,e,i){"radio"===t.type?this.findByName(t.name).addClass(e).removeClass(i):u(t).addClass(e).removeClass(i)},unhighlight:function(t,e,i){"radio"===t.type?this.findByName(t.name).removeClass(e).addClass(i):u(t).removeClass(e).addClass(i)}},setDefaults:function(t){u.extend(u.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:u.validator.format("Please enter no more than {0} characters."),minlength:u.validator.format("Please enter at least {0} characters."),rangelength:u.validator.format("Please enter a value between {0} and {1} characters long."),range:u.validator.format("Please enter a value between {0} and {1}."),max:u.validator.format("Please enter a value less than or equal to {0}."),min:u.validator.format("Please enter a value greater than or equal to {0}."),step:u.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=u(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||u(this.currentForm),this.containers=u(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,n=this.groups={};function t(t){!this.form&&this.hasAttribute("contenteditable")&&(this.form=u(this).closest("form")[0],this.name=u(this).attr("name"));var e=u.data(this.form,"validator"),i="on"+t.type.replace(/^validate/,""),n=e.settings;n[i]&&!u(this).is(n.ignore)&&n[i].call(e,this,t)}u.each(this.settings.groups,function(i,t){"string"==typeof t&&(t=t.split(/\s/)),u.each(t,function(t,e){n[e]=i})}),i=this.settings.rules,u.each(i,function(t,e){i[t]=u.validator.normalizeRule(e)}),u(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&u(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),u.extend(this.submitted,this.errorMap),this.invalid=u.extend({},this.errorMap),this.valid()||u(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(t){var e,i,n=this.clean(t),o=this.validationTargetFor(n),r=this,s=!0;return void 0===o?delete this.invalid[n.name]:(this.prepareElement(o),this.currentElements=u(o),(i=this.groups[o.name])&&u.each(this.groups,function(t,e){e===i&&t!==o.name&&(n=r.validationTargetFor(r.clean(r.findByName(t))))&&n.name in r.invalid&&(r.currentElements.push(n),s=r.check(n)&&s)}),e=!1!==this.check(o),s=s&&e,this.invalid[o.name]=!e,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),u(t).attr("aria-invalid",!e)),s},showErrors:function(e){if(e){var i=this;u.extend(this.errorMap,e),this.errorList=u.map(this.errorMap,function(t,e){return{message:t,element:i.findByName(e)[0]}}),this.successList=u.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){u.fn.resetForm&&u(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)void 0!==t[e]&&null!==t[e]&&!1!==t[e]&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{u(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===u.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return u(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var t=this.name||u(this).attr("name");return!t&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=u(this).closest("form")[0],this.name=t),!(t in i||!e.objectLength(u(this).rules()))&&(i[t]=!0)})},clean:function(t){return u(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return u(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=u([]),this.toHide=u([])},reset:function(){this.resetInternals(),this.currentElements=u([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(t){var e,i,n=u(t),o=t.type;return"radio"===o||"checkbox"===o?this.findByName(t.name).filter(":checked").val():"number"===o&&void 0!==t.validity?t.validity.badInput?"NaN":n.val():(e=t.hasAttribute("contenteditable")?n.text():n.val(),"file"===o?"C:\\fakepath\\"===e.substr(0,12)?e.substr(12):0<=(i=e.lastIndexOf("/"))?e.substr(i+1):0<=(i=e.lastIndexOf("\\"))?e.substr(i+1):e:"string"==typeof e?e.replace(/\r/g,""):e)},check:function(e){e=this.validationTargetFor(this.clean(e));var t,i,n,o,r=u(e).rules(),s=u.map(r,function(t,e){return e}).length,a=!1,l=this.elementValue(e);if("function"==typeof r.normalizer?o=r.normalizer:"function"==typeof this.settings.normalizer&&(o=this.settings.normalizer),o){if("string"!=typeof(l=o.call(e,l)))throw new TypeError("The normalizer should return a string value.");delete r.normalizer}for(i in r){n={method:i,parameters:r[i]};try{if("dependency-mismatch"===(t=u.validator.methods[i].call(this,l,e,n.parameters))&&1===s){a=!0;continue}if(a=!1,"pending"===t)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!t)return this.formatAndAdd(e,n),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+n.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+n.method+"' method."),t}}if(!a)return this.objectLength(r)&&this.successList.push(e),!0},customDataMessage:function(t,e){return u(t).data("msg"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())||u(t).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(t,e){"string"==typeof e&&(e={method:e});var i=this.findDefined(this.customMessage(t.name,e.method),this.customDataMessage(t,e.method),!this.settings.ignoreTitle&&t.title||void 0,u.validator.messages[e.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),n=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,e.parameters,t):n.test(i)&&(i=u.validator.format(i.replace(n,"{$1}"),e.parameters)),i},formatAndAdd:function(t,e){var i=this.defaultMessage(t,e);this.errorList.push({message:i,element:t,method:e.method}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return u(this.errorList).map(function(){return this.element})},showLabel:function(t,e){var i,n,o,r,s=this.errorsFor(t),a=this.idOrName(t),l=u(t).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(e)):(i=s=u("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(e||""),this.settings.wrapper&&(i=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,u(t)):i.insertAfter(t),s.is("label")?s.attr("for",a):0===s.parents("label[for='"+this.escapeCssMeta(a)+"']").length&&(o=s.attr("id"),l?l.match(new RegExp("\\b"+this.escapeCssMeta(o)+"\\b"))||(l+=" "+o):l=o,u(t).attr("aria-describedby",l),(n=this.groups[t.name])&&(r=this,u.each(r.groups,function(t,e){e===n&&u("[name='"+r.escapeCssMeta(t)+"']",r.currentForm).attr("aria-describedby",s.attr("id"))})))),!e&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,t)),this.toShow=this.toShow.add(s)},errorsFor:function(t){var e=this.escapeCssMeta(this.idOrName(t)),i=u(t).attr("aria-describedby"),n="label[for='"+e+"'], label[for='"+e+"'] *";return i&&(n=n+", #"+this.escapeCssMeta(i).replace(/\s+/g,", #")),this.errors().filter(n)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),u(t).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(t){return u(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,e){switch(e.nodeName.toLowerCase()){case"select":return u("option:selected",e).length;case"input":if(this.checkable(e))return this.findByName(e.name).filter(":checked").length}return t.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(t,e){return!!u(t,e.form).length},function:function(t,e){return t(e)}},optional:function(t){var e=this.elementValue(t);return!u.validator.methods.required.call(this,e,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,u(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],u(t).removeClass(this.settings.pendingClass),e&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(u(this.currentForm).submit(),this.submitButton&&u("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!e&&0===this.pendingRequest&&this.formSubmitted&&(u(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,e){return e="string"==typeof e&&e||"remote",u.data(t,"previousValue")||u.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:e})})},destroy:function(){this.resetForm(),u(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,e){t.constructor===String?this.classRuleSettings[t]=e:u.extend(this.classRuleSettings,t)},classRules:function(t){var e={},i=u(t).attr("class");return i&&u.each(i.split(" "),function(){this in u.validator.classRuleSettings&&u.extend(e,u.validator.classRuleSettings[this])}),e},normalizeAttributeRule:function(t,e,i,n){/min|max|step/.test(i)&&(null===e||/number|range|text/.test(e))&&(n=Number(n),isNaN(n)&&(n=void 0)),n||0===n?t[i]=n:e===i&&"range"!==e&&(t[i]=!0)},attributeRules:function(t){var e,i,n={},o=u(t),r=t.getAttribute("type");for(e in u.validator.methods)i="required"===e?(""===(i=t.getAttribute(e))&&(i=!0),!!i):o.attr(e),this.normalizeAttributeRule(n,r,e,i);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(t){var e,i,n={},o=u(t),r=t.getAttribute("type");for(e in u.validator.methods)i=o.data("rule"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()),this.normalizeAttributeRule(n,r,e,i);return n},staticRules:function(t){var e={},i=u.data(t.form,"validator");return i.settings.rules&&(e=u.validator.normalizeRule(i.settings.rules[t.name])||{}),e},normalizeRules:function(n,o){return u.each(n,function(t,e){if(!1!==e){if(e.param||e.depends){var i=!0;switch(typeof e.depends){case"string":i=!!u(e.depends,o.form).length;break;case"function":i=e.depends.call(o,o)}i?n[t]=void 0===e.param||e.param:(u.data(o.form,"validator").resetElements(u(o)),delete n[t])}}else delete n[t]}),u.each(n,function(t,e){n[t]=u.isFunction(e)&&"normalizer"!==t?e(o):e}),u.each(["minlength","maxlength"],function(){n[this]&&(n[this]=Number(n[this]))}),u.each(["rangelength","range"],function(){var t;n[this]&&(u.isArray(n[this])?n[this]=[Number(n[this][0]),Number(n[this][1])]:"string"==typeof n[this]&&(t=n[this].replace(/[\[\]]/g,"").split(/[\s,]+/),n[this]=[Number(t[0]),Number(t[1])]))}),u.validator.autoCreateRanges&&(null!=n.min&&null!=n.max&&(n.range=[n.min,n.max],delete n.min,delete n.max),null!=n.minlength&&null!=n.maxlength&&(n.rangelength=[n.minlength,n.maxlength],delete n.minlength,delete n.maxlength)),n},normalizeRule:function(t){if("string"==typeof t){var e={};u.each(t.split(/\s/),function(){e[this]=!0}),t=e}return t},addMethod:function(t,e,i){u.validator.methods[t]=e,u.validator.messages[t]=void 0!==i?i:u.validator.messages[t],e.length<3&&u.validator.addClassRules(t,u.validator.normalizeRule(t))},methods:{required:function(t,e,i){if(!this.depend(i,e))return"dependency-mismatch";if("select"!==e.nodeName.toLowerCase())return this.checkable(e)?0<this.getLength(t,e):0<t.length;var n=u(e).val();return n&&0<n.length},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(t,e,i){var n=u.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||i<=n},maxlength:function(t,e,i){var n=u.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n<=i},rangelength:function(t,e,i){var n=u.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n>=i[0]&&n<=i[1]},min:function(t,e,i){return this.optional(e)||i<=t},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},step:function(t,e,i){function n(t){var e=(""+t).match(/(?:\.(\d+))?$/);return e&&e[1]?e[1].length:0}function o(t){return Math.round(t*Math.pow(10,r))}var r,s=u(e).attr("type"),a="Step attribute on input type "+s+" is not supported.",l=new RegExp("\\b"+s+"\\b"),c=!0;if(s&&!l.test(["text","number","range"].join()))throw new Error(a);return r=n(i),(n(t)>r||o(t)%o(i)!=0)&&(c=!1),this.optional(e)||c},equalTo:function(t,e,i){var n=u(i);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){u(e).valid()}),t===n.val()},remote:function(r,s,t,a){if(this.optional(s))return"dependency-mismatch";a="string"==typeof a&&a||"remote";var l,e,i,c=this.previousValue(s,a);return this.settings.messages[s.name]||(this.settings.messages[s.name]={}),c.originalMessage=c.originalMessage||this.settings.messages[s.name][a],this.settings.messages[s.name][a]=c.message,t="string"==typeof t&&{url:t}||t,i=u.param(u.extend({data:r},t.data)),c.old===i?c.valid:(c.old=i,(l=this).startRequest(s),(e={})[s.name]=r,u.ajax(u.extend(!0,{mode:"abort",port:"validate"+s.name,dataType:"json",data:e,context:l.currentForm,success:function(t){var e,i,n,o=!0===t||"true"===t;l.settings.messages[s.name][a]=c.originalMessage,o?(n=l.formSubmitted,l.resetInternals(),l.toHide=l.errorsFor(s),l.formSubmitted=n,l.successList.push(s),l.invalid[s.name]=!1,l.showErrors()):(e={},i=t||l.defaultMessage(s,{method:a,parameters:r}),e[s.name]=c.message=i,l.invalid[s.name]=!0,l.showErrors(e)),c.valid=o,l.stopRequest(s,o)}},t)),"pending")}}});var n,o={};return u.ajaxPrefilter?u.ajaxPrefilter(function(t,e,i){var n=t.port;"abort"===t.mode&&(o[n]&&o[n].abort(),o[n]=i)}):(n=u.ajax,u.ajax=function(t){var e=("mode"in t?t:u.ajaxSettings).mode,i=("port"in t?t:u.ajaxSettings).port;return"abort"===e?(o[i]&&o[i].abort(),o[i]=n.apply(this,arguments),o[i]):n.apply(this,arguments)}),u}),function(t,e){"function"==typeof define&&define.amd?define(["tether"],e):"object"==typeof exports?module.exports=e(require("tether")):t.Shepherd=e(t.Tether)}(this,function(n){"use strict";var t=function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t};function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){for(var n=!0;n;){var o=t,r=e,s=i;n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return;t=c,e=r,i=s,n=!0,a=c=void 0}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=n.Utils,a=i.Evented,l=i.addClass,c=i.extend,u=i.hasClass,d=i.removeClass,h=i.uniqueId,p=new a;function f(t){return void 0===t}function g(t){return"object"==typeof t}var m={"top right":"bottom left","top left":"bottom right","top center":"bottom center","middle right":"middle left","middle left":"middle right","middle center":"middle center","bottom left":"top right","bottom right":"top left","bottom center":"top center",top:"bottom center",left:"middle right",right:"middle left",bottom:"top center",center:"middle center",middle:"middle center"};function v(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}var y=/^(.+) (top|left|right|bottom|center|\[[a-z ]+\])$/;var b=(e(_,a),t(_,[{key:"bindMethods",value:function(){var e=this;["_show","show","hide","isOpen","cancel","complete","scrollTo","destroy","render"].map(function(t){e[t]=e[t].bind(e)})}},{key:"setOptions",value:function(t){var e=arguments.length<=0||void 0===t?{}:t;this.options=e,this.destroy(),this.id=this.options.id||this.id||"step-"+h();var i=this.options.when;if(i)for(var n in i)if({}.hasOwnProperty.call(i,n)){var o=i[n];this.on(n,o,this)}var r=JSON.stringify(this.options.buttons),s=f(r)||"true"===r,a="{}"===r||"[]"===r||"null"===r||"false"===r,l=!s&&function(t){return t&&t.constructor===Array}(this.options.buttons),c=!s&&function(t){return t&&t.constructor===Object}(this.options.buttons);s?this.options.buttons=[{text:"Next",action:this.tour.next,classes:"btn"}]:!a&&c?this.options.buttons=[this.options.buttons]:!a&&l||(this.options.buttons=!1)}},{key:"getTour",value:function(){return this.tour}},{key:"bindAdvance",value:function(){function t(t){e.isOpen()&&(f(o)?e.el&&t.target===e.el&&e.tour.next():function(t,e){var i=void 0;return f(t.matches)?f(t.matchesSelector)?f(t.msMatchesSelector)?f(t.webkitMatchesSelector)?f(t.mozMatchesSelector)?f(t.oMatchesSelector)||(i=t.oMatchesSelector):i=t.mozMatchesSelector:i=t.webkitMatchesSelector:i=t.msMatchesSelector:i=t.matchesSelector:i=t.matches,i.call(t,e)}(t.target,o)&&e.tour.next())}var e=this,i=function(t,e){if(null===t||f(t))return t;if(g(t))return t;for(var i=t.split(" "),n={},o=e.length-1,r=i.length-1;0<=r;r--){if(0===o){n[e[o]]=i.slice(0,r+1).join(" ");break}n[e[o]]=i[r],o--}return n}(this.options.advanceOn,["selector","event"]),n=i.event,o=i.selector;document.body.addEventListener(n,t),this.on("destroy",function(){return document.body.removeEventListener(n,t)})}},{key:"getAttachTo",value:function(){var t=function(t){if(g(t))return t.hasOwnProperty("element")&&t.hasOwnProperty("on")?t:null;var e=y.exec(t);if(!e)return null;var i=e[2];return"["===i[0]&&(i=i.substring(1,i.length-1)),{element:e[1],on:i}}(this.options.attachTo)||{},e=c({},t);return"string"==typeof t.element&&(e.element=document.querySelector(t.element),e.element||console.error("The element for this Shepherd step was not found "+t.element)),e}},{key:"setupTether",value:function(){if(f(n))throw new Error("Using the attachment feature of Shepherd requires the Tether library");var t=this.getAttachTo(),e=m[t.on]||m.right;f(t.element)&&(t.element="viewport",e="middle center");var i={classPrefix:"shepherd",element:this.el,constraints:[{to:"window",pin:!0,attachment:"together"}],target:t.element,offset:t.offset||"0 0",attachment:e};this.tether&&this.tether.destroy(),this.tether=new n(c(i,this.options.tetherOptions))}},{key:"show",value:function(){var t=this;if(!f(this.options.beforeShowPromise)){var e=this.options.beforeShowPromise();if(!f(e))return e.then(function(){return t._show()})}this._show()}},{key:"_show",value:function(){var t=this;this.trigger("before-show"),this.el||this.render(),l(this.el,"shepherd-open"),document.body.setAttribute("data-shepherd-step",this.id),this.setupTether(),this.options.scrollTo&&setTimeout(function(){t.scrollTo()}),this.trigger("show")}},{key:"hide",value:function(){this.trigger("before-hide"),d(this.el,"shepherd-open"),document.body.removeAttribute("data-shepherd-step"),this.tether&&this.tether.destroy(),this.tether=null,this.trigger("hide")}},{key:"isOpen",value:function(){return this.el&&u(this.el,"shepherd-open")}},{key:"cancel",value:function(){this.tour.cancel(),this.trigger("cancel")}},{key:"complete",value:function(){this.tour.complete(),this.trigger("complete")}},{key:"scrollTo",value:function(){var t=this.getAttachTo().element;f(this.options.scrollToHandler)?f(t)||t.scrollIntoView():this.options.scrollToHandler(t)}},{key:"destroy",value:function(){!f(this.el)&&this.el.parentNode&&(this.el.parentNode.removeChild(this.el),delete this.el),this.tether&&this.tether.destroy(),this.tether=null,this.trigger("destroy")}},{key:"render",value:function(){var n=this;f(this.el)||this.destroy(),this.el=v("<div class='shepherd-step "+(this.options.classes||"")+"' data-id='"+this.id+"' "+(this.options.idAttribute?'id="'+this.options.idAttribute+'"':"")+"></div>");var e=document.createElement("div");e.className="shepherd-content",this.el.appendChild(e);var i,t,o=document.createElement("div");if(o.className="shepherd-header",e.appendChild(o),this.options.title&&(o.innerHTML+="<h3 class='shepherd-title'>"+this.options.title+"</h3>",this.el.className+=" shepherd-has-title"),this.options.showCancelLink){var r=v("<a href class='shepherd-cancel-link'>✕</a>");o.appendChild(r),this.el.className+=" shepherd-has-cancel-link",this.bindCancelLink(r)}f(this.options.text)||(i=v("<div class='shepherd-text'></div>"),"function"==typeof(t=n.options.text)&&(t=t.call(n,i)),t instanceof HTMLElement?i.appendChild(t):("string"==typeof t&&(t=[t]),t.map(function(t){i.innerHTML+="<p>"+t+"</p>"})),e.appendChild(i)),this.options.buttons&&function(){var t=document.createElement("div");t.className="shepherd-footer";var i=v("<ul class='shepherd-buttons'></ul>");n.options.buttons.map(function(t){var e=v("<li><button class='btn btn-sm "+(t.classes||"")+"'>"+t.text+"</button>");i.appendChild(e),n.bindButtonEvents(t,e.querySelector("button"))}),t.appendChild(i),e.appendChild(t)}(),document.body.appendChild(this.el),this.setupTether(),this.options.advanceOn&&this.bindAdvance()}},{key:"bindCancelLink",value:function(t){var e=this;t.addEventListener("click",function(t){t.preventDefault(),e.cancel()})}},{key:"bindButtonEvents",value:function(i,n){var e=this;for(var t in i.events=i.events||{},f(i.action)||(i.events.click=i.action),i.events)if({}.hasOwnProperty.call(i.events,t)){var o=i.events[t];"string"==typeof o&&function(){var t=o;o=function(){return e.tour.show(t)}}(),n.addEventListener(t,o)}this.on("destroy",function(){for(var t in i.events)if({}.hasOwnProperty.call(i.events,t)){var e=i.events[t];n.removeEventListener(t,e)}})}}]),_);function _(t,e){return s(this,_),r(Object.getPrototypeOf(_.prototype),"constructor",this).call(this,t,e),this.tour=t,this.bindMethods(),this.setOptions(e),this}var E=(e(w,a),t(w,[{key:"bindMethods",value:function(){var e=this;["next","back","cancel","complete","hide"].map(function(t){e[t]=e[t].bind(e)})}},{key:"addStep",value:function(t,e){return f(e)&&(e=t),e instanceof b?e.tour=this:("string"!=typeof t&&"number"!=typeof t||(e.id=t.toString()),e=c({},this.options.defaults,e),e=new b(this,e)),this.steps.push(e),this}},{key:"removeStep",value:function(t){for(var e=this.getCurrentStep(),i=0;i<this.steps.length;++i){var n=this.steps[i];if(n.id===t){n.hide(),n.destroy(),this.steps.splice(i,1);break}}e&&e.id===t&&(this.currentStep=void 0,this.steps.length?this.show(0):this.hide())}},{key:"getById",value:function(t){for(var e=0;e<this.steps.length;++e){var i=this.steps[e];if(i.id===t)return i}}},{key:"getCurrentStep",value:function(){return this.currentStep}},{key:"next",value:function(){var t=this.steps.indexOf(this.currentStep);t===this.steps.length-1?(this.hide(t),this.trigger("complete"),this.done()):this.show(t+1,!0)}},{key:"back",value:function(){var t=this.steps.indexOf(this.currentStep);this.show(t-1,!1)}},{key:"cancel",value:function(){this.currentStep&&this.currentStep.hide(),this.trigger("cancel"),this.done()}},{key:"complete",value:function(){this.currentStep&&this.currentStep.hide(),this.trigger("complete"),this.done()}},{key:"hide",value:function(){this.currentStep&&this.currentStep.hide(),this.trigger("hide"),this.done()}},{key:"done",value:function(){p.activeTour=null,d(document.body,"shepherd-active"),this.trigger("inactive",{tour:this})}},{key:"show",value:function(t,e){var i=arguments.length<=0||void 0===t?0:t,n=arguments.length<=1||void 0===e||e;this.currentStep?this.currentStep.hide():(l(document.body,"shepherd-active"),this.trigger("active",{tour:this})),p.activeTour=this;var o=void 0;if(o="string"==typeof i?this.getById(i):this.steps[i])if(f(o.options.showOn)||o.options.showOn())this.trigger("show",{step:o,previous:this.currentStep}),this.currentStep&&this.currentStep.hide(),(this.currentStep=o).show();else{var r=this.steps.indexOf(o),s=n?r+1:r-1;this.show(s,n)}}},{key:"start",value:function(){this.trigger("start"),this.currentStep=null,this.next()}}]),w);function w(){var i=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];s(this,w),r(Object.getPrototypeOf(w.prototype),"constructor",this).call(this,t),this.bindMethods(),this.options=t,this.steps=this.options.steps||[];return["complete","cancel","hide","start","show","active","inactive"].map(function(t){var e;e=t,i.on(e,function(t){(t=t||{}).tour=i,p.trigger(e,t)})}),this}return c(p,{Tour:E,Step:b,Evented:a}),p}),function(){var s,t,e,i,d,h,n,o,P,F,a=[].slice,r={}.hasOwnProperty;function l(){}function B(t,e){var i,n,o;if(this.element=t,this.version=B.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(B.instances.push(this),this.element.dropzone=this,i=null!=(o=B.optionsForElement(this.element))?o:{},this.options=P({},this.defaultOptions,i,null!=e?e:{}),this.options.forceFallback||!B.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(n=this.getExistingFallback())&&n.parentNode&&n.parentNode.removeChild(n),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=B.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=B.getElements(this.options.clickable,"clickable")),this.init()}n=function(){},l.prototype.addEventListener=l.prototype.on,l.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},l.prototype.emit=function(){var t,e,i,n,o;if(i=arguments[0],t=2<=arguments.length?a.call(arguments,1):[],this._callbacks=this._callbacks||{},e=this._callbacks[i])for(n=0,o=e.length;n<o;n++)e[n].apply(this,t);return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=l.prototype.off,l.prototype.removeEventListener=l.prototype.off,l.prototype.off=function(t,e){var i,n,o,r;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(!(i=this._callbacks[t]))return this;if(1===arguments.length)return delete this._callbacks[t],this;for(n=o=0,r=i.length;o<r;n=++o)if(i[n]===e){i.splice(n,1);break}return this},function(t,e){for(var i in e)r.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(B,t=l),B.prototype.Emitter=t,B.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],B.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,filesizeBase:1e3,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return n},forceFallback:!1,fallback:function(){var t,e,i,n,o,r;for(this.element.className=this.element.className+" dz-browser-not-supported",n=0,o=(r=this.element.getElementsByTagName("div")).length;n<o;n++)t=r[n],/(^| )dz-message($| )/.test(t.className)&&((e=t).className="dz-message");return e||(e=B.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e)),(i=e.getElementsByTagName("span")[0])&&(i.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,i,n;return e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},i=t.width/t.height,e.optWidth=this.options.thumbnailWidth,e.optHeight=this.options.thumbnailHeight,null==e.optWidth&&null==e.optHeight?(e.optWidth=e.srcWidth,e.optHeight=e.srcHeight):null==e.optWidth?e.optWidth=i*e.optHeight:null==e.optHeight&&(e.optHeight=1/i*e.optWidth),n=e.optWidth/e.optHeight,t.height<e.optHeight||t.width<e.optWidth?(e.trgHeight=e.srcHeight,e.trgWidth=e.srcWidth):n<i?(e.srcHeight=t.height,e.srcWidth=e.srcHeight*n):(e.srcWidth=t.width,e.srcHeight=e.srcWidth/n),e.srcX=(t.width-e.srcWidth)/2,e.srcY=(t.height-e.srcHeight)/2,e},drop:function(t){return this.element.classList.remove("dz-drag-hover")},dragstart:n,dragend:function(t){return this.element.classList.remove("dz-drag-hover")},dragenter:function(t){return this.element.classList.add("dz-drag-hover")},dragover:function(t){return this.element.classList.add("dz-drag-hover")},dragleave:function(t){return this.element.classList.remove("dz-drag-hover")},paste:n,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,i,n,o,r,s,a,l,c,u,d,h,p;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=B.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),n=0,s=(c=e.previewElement.querySelectorAll("[data-dz-name]")).length;n<s;n++)c[n].textContent=e.name;for(o=0,a=(u=e.previewElement.querySelectorAll("[data-dz-size]")).length;o<a;o++)u[o].innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=B.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),p=this,t=function(t){return t.preventDefault(),t.stopPropagation(),e.status===B.UPLOADING?B.confirm(p.options.dictCancelUploadConfirmation,function(){return p.removeFile(e)}):p.options.dictRemoveFileConfirmation?B.confirm(p.options.dictRemoveFileConfirmation,function(){return p.removeFile(e)}):p.removeFile(e)},h=[],r=0,l=(d=e.previewElement.querySelectorAll("[data-dz-remove]")).length;r<l;r++)i=d[r],h.push(i.addEventListener("click",t));return h}},removedfile:function(t){var e;return t.previewElement&&null!=(e=t.previewElement)&&e.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var i,n,o,r;if(t.previewElement){for(t.previewElement.classList.remove("dz-file-preview"),n=0,o=(r=t.previewElement.querySelectorAll("[data-dz-thumbnail]")).length;n<o;n++)(i=r[n]).alt=t.name,i.src=e;return setTimeout(function(){return t.previewElement.classList.add("dz-image-preview")},1)}},error:function(t,e){var i,n,o,r,s;if(t.previewElement){for(t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error),s=[],n=0,o=(r=t.previewElement.querySelectorAll("[data-dz-errormessage]")).length;n<o;n++)i=r[n],s.push(i.textContent=e);return s}},errormultiple:n,processing:function(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:n,uploadprogress:function(t,e,i){var n,o,r,s,a;if(t.previewElement){for(a=[],o=0,r=(s=t.previewElement.querySelectorAll("[data-dz-uploadprogress]")).length;o<r;o++)"PROGRESS"===(n=s[o]).nodeName?a.push(n.value=e):a.push(n.style.width=e+"%");return a}},totaluploadprogress:n,sending:n,sendingmultiple:n,success:function(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple:n,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:n,complete:function(t){if(t._removeLink&&(t._removeLink.textContent=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple:n,maxfilesexceeded:n,maxfilesreached:n,queuecomplete:n,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},P=function(){var t,e,i,n,o,r,s;for(n=arguments[0],r=0,s=(i=2<=arguments.length?a.call(arguments,1):[]).length;r<s;r++)for(t in e=i[r])o=e[t],n[t]=o;return n},B.prototype.getAcceptedFiles=function(){var t,e,i,n,o;for(o=[],e=0,i=(n=this.files).length;e<i;e++)(t=n[e]).accepted&&o.push(t);return o},B.prototype.getRejectedFiles=function(){var t,e,i,n,o;for(o=[],e=0,i=(n=this.files).length;e<i;e++)(t=n[e]).accepted||o.push(t);return o},B.prototype.getFilesWithStatus=function(t){var e,i,n,o,r;for(r=[],i=0,n=(o=this.files).length;i<n;i++)(e=o[i]).status===t&&r.push(e);return r},B.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(B.QUEUED)},B.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(B.UPLOADING)},B.prototype.getActiveFiles=function(){var t,e,i,n,o;for(o=[],e=0,i=(n=this.files).length;e<i;e++)(t=n[e]).status!==B.UPLOADING&&t.status!==B.QUEUED||o.push(t);return o},B.prototype.init=function(){var t,i,o,e,n,r,s,a,l,c,u,d,h,p,f,g,m,v,y;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(B.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(a=this,(o=function(){return a.hiddenFileInput&&document.body.removeChild(a.hiddenFileInput),a.hiddenFileInput=document.createElement("input"),a.hiddenFileInput.setAttribute("type","file"),(null==a.options.maxFiles||1<a.options.maxFiles)&&a.hiddenFileInput.setAttribute("multiple","multiple"),a.hiddenFileInput.className="dz-hidden-input",null!=a.options.acceptedFiles&&a.hiddenFileInput.setAttribute("accept",a.options.acceptedFiles),null!=a.options.capture&&a.hiddenFileInput.setAttribute("capture",a.options.capture),a.hiddenFileInput.style.visibility="hidden",a.hiddenFileInput.style.position="absolute",a.hiddenFileInput.style.top="0",a.hiddenFileInput.style.left="0",a.hiddenFileInput.style.height="0",a.hiddenFileInput.style.width="0",document.body.appendChild(a.hiddenFileInput),a.hiddenFileInput.addEventListener("change",function(){var t,e,i,n;if((e=a.hiddenFileInput.files).length)for(i=0,n=e.length;i<n;i++)t=e[i],a.addFile(t);return o()})})()),this.URL=null!=(r=window.URL)?r:window.webkitURL,e=0,n=(s=this.events).length;e<n;e++)t=s[e],this.on(t,this.options[t]);return this.on("uploadprogress",(l=this,function(){return l.updateTotalUploadProgress()})),this.on("removedfile",(c=this,function(){return c.updateTotalUploadProgress()})),this.on("canceled",(u=this,function(t){return u.emit("complete",t)})),this.on("complete",(d=this,function(t){if(0===d.getUploadingFiles().length&&0===d.getQueuedFiles().length)return setTimeout(function(){return d.emit("queuecomplete")},0)})),i=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:(v=this,function(t){return v.emit("dragstart",t)}),dragenter:(m=this,function(t){return i(t),m.emit("dragenter",t)}),dragover:(g=this,function(t){var e;try{e=t.dataTransfer.effectAllowed}catch(t){}return t.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy",i(t),g.emit("dragover",t)}),dragleave:(f=this,function(t){return f.emit("dragleave",t)}),drop:(p=this,function(t){return i(t),p.drop(t)}),dragend:(h=this,function(t){return h.emit("dragend",t)})}}],this.clickableElements.forEach((y=this,function(e){return y.listeners.push({element:e,events:{click:function(t){if(e!==y.element||t.target===y.element||B.elementInside(t.target,y.element.querySelector(".dz-message")))return y.hiddenFileInput.click()}}})})),this.enable(),this.options.init.call(this)},B.prototype.destroy=function(){var t;return this.disable(),this.removeAllFiles(!0),(null!=(t=this.hiddenFileInput)?t.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,B.instances.splice(B.instances.indexOf(this),1)},B.prototype.updateTotalUploadProgress=function(){var t,e,i,n,o,r,s;if(e=i=0,this.getActiveFiles().length){for(o=0,r=(s=this.getActiveFiles()).length;o<r;o++)i+=(t=s[o]).upload.bytesSent,e+=t.upload.total;n=100*i/e}else n=100;return this.emit("totaluploadprogress",n,e,i)},B.prototype._getParamName=function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")},B.prototype.getFallbackForm=function(){var t,e,i,n;return(t=this.getExistingFallback())?t:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',e=B.createElement(i),"FORM"!==this.element.tagName?(n=B.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(e):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=n?n:e)},B.prototype.getExistingFallback=function(){var t,e,i,n,o,r;for(e=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++)if(e=t[i],/(^| )fallback($| )/.test(e.className))return e},n=0,o=(r=["div","form"]).length;n<o;n++)if(i=r[n],t=e(this.element.getElementsByTagName(i)))return t},B.prototype.setupEventListeners=function(){var i,n,o,t,e,r,s;for(s=[],t=0,e=(r=this.listeners).length;t<e;t++)i=r[t],s.push(function(){var t,e;for(n in e=[],t=i.events)o=t[n],e.push(i.element.addEventListener(n,o,!1));return e}());return s},B.prototype.removeEventListeners=function(){var i,n,o,t,e,r,s;for(s=[],t=0,e=(r=this.listeners).length;t<e;t++)i=r[t],s.push(function(){var t,e;for(n in e=[],t=i.events)o=t[n],e.push(i.element.removeEventListener(n,o,!1));return e}());return s},B.prototype.disable=function(){var t,e,i,n,o;for(this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),o=[],e=0,i=(n=this.files).length;e<i;e++)t=n[e],o.push(this.cancelUpload(t));return o},B.prototype.enable=function(){return this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()},B.prototype.filesize=function(t){var e,i,n,o,r,s,a;for(i=n=null,e=s=0,a=(r=["TB","GB","MB","KB","b"]).length;s<a;e=++s)if(o=r[e],Math.pow(this.options.filesizeBase,4-e)/10<=t){i=t/Math.pow(this.options.filesizeBase,4-e),n=o;break}return"<strong>"+(i=Math.round(10*i)/10)+"</strong> "+n},B.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},B.prototype.drop=function(t){var e,i;t.dataTransfer&&(this.emit("drop",t),(e=t.dataTransfer.files).length&&((i=t.dataTransfer.items)&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(e)))},B.prototype.paste=function(t){var e,i;if(null!=(null!=t&&null!=(i=t.clipboardData)?i.items:void 0))return this.emit("paste",t),(e=t.clipboardData.items).length?this._addFilesFromItems(e):void 0},B.prototype.handleFiles=function(t){var e,i,n,o;for(o=[],i=0,n=t.length;i<n;i++)e=t[i],o.push(this.addFile(e));return o},B.prototype._addFilesFromItems=function(t){var e,i,n,o,r;for(r=[],n=0,o=t.length;n<o;n++)null!=(i=t[n]).webkitGetAsEntry&&(e=i.webkitGetAsEntry())?e.isFile?r.push(this.addFile(i.getAsFile())):e.isDirectory?r.push(this._addFilesFromDirectory(e,e.name)):r.push(void 0):null==i.getAsFile||null!=i.kind&&"file"!==i.kind?r.push(void 0):r.push(this.addFile(i.getAsFile()));return r},B.prototype._addFilesFromDirectory=function(t,o){var e,i,r;return e=t.createReader(),r=this,i=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++)(e=t[i]).isFile?e.file(function(t){if(!r.options.ignoreHiddenFiles||"."!==t.name.substring(0,1))return t.fullPath=o+"/"+t.name,r.addFile(t)}):e.isDirectory&&r._addFilesFromDirectory(e,o+"/"+e.name)},e.readEntries(i,function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(t):void 0})},B.prototype.accept=function(t,e){return t.size>1024*this.options.maxFilesize*1024?e(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):B.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(e(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,e):e(this.options.dictInvalidFileType)},B.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=B.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,(i=this,function(t){return t?(e.accepted=!1,i._errorProcessing([e],t)):(e.accepted=!0,i.options.autoQueue&&i.enqueueFile(e)),i._updateMaxFilesReachedClass()}));var i},B.prototype.enqueueFiles=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++)e=t[i],this.enqueueFile(e);return null},B.prototype.enqueueFile=function(t){if(t.status!==B.ADDED||!0!==t.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(t.status=B.QUEUED,this.options.autoProcessQueue)return setTimeout((e=this,function(){return e.processQueue()}),0);var e},B.prototype._thumbnailQueue=[],B.prototype._processingThumbnail=!1,B.prototype._enqueueThumbnail=function(t){if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(t),setTimeout((e=this,function(){return e._processThumbnailQueue()}),0);var e},B.prototype._processThumbnailQueue=function(){var t;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),(t=this,function(){return t._processingThumbnail=!1,t._processThumbnailQueue()}))},B.prototype.removeFile=function(t){if(t.status===B.UPLOADING&&this.cancelUpload(t),this.files=o(this.files,t),this.emit("removedfile",t),0===this.files.length)return this.emit("reset")},B.prototype.removeAllFiles=function(t){var e,i,n,o;for(null==t&&(t=!1),i=0,n=(o=this.files.slice()).length;i<n;i++)(e=o[i]).status===B.UPLOADING&&!t||this.removeFile(e);return null},B.prototype.createThumbnail=function(t,e){var i,n;return(i=new FileReader).onload=(n=this,function(){return"image/svg+xml"===t.type?(n.emit("thumbnail",t,i.result),void(null!=e&&e())):n.createThumbnailFromUrl(t,i.result,e)}),i.readAsDataURL(t)},B.prototype.createThumbnailFromUrl=function(l,t,c){var u,d;return(u=document.createElement("img")).onload=(d=this,function(){var t,e,i,n,o,r,s,a;if(l.width=u.width,l.height=u.height,null==(i=d.options.resize.call(d,l)).trgWidth&&(i.trgWidth=i.optWidth),null==i.trgHeight&&(i.trgHeight=i.optHeight),e=(t=document.createElement("canvas")).getContext("2d"),t.width=i.trgWidth,t.height=i.trgHeight,h(e,u,null!=(o=i.srcX)?o:0,null!=(r=i.srcY)?r:0,i.srcWidth,i.srcHeight,null!=(s=i.trgX)?s:0,null!=(a=i.trgY)?a:0,i.trgWidth,i.trgHeight),n=t.toDataURL("image/png"),d.emit("thumbnail",l,n),null!=c)return c()}),null!=c&&(u.onerror=c),u.src=t},B.prototype.processQueue=function(){var t,e,i,n;if(!((e=this.options.parallelUploads)<=(t=i=this.getUploadingFiles().length))&&0<(n=this.getQueuedFiles()).length){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,e-i));for(;t<e;){if(!n.length)return;this.processFile(n.shift()),t++}}},B.prototype.processFile=function(t){return this.processFiles([t])},B.prototype.processFiles=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++)(e=t[i]).processing=!0,e.status=B.UPLOADING,this.emit("processing",e);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)},B.prototype._getFilesWithXhr=function(o){var r;return function(){var t,e,i,n;for(n=[],t=0,e=(i=this.files).length;t<e;t++)(r=i[t]).xhr===o&&n.push(r);return n}.call(this)},B.prototype.cancelUpload=function(t){var e,i,n,o,r,s,a;if(t.status===B.UPLOADING){for(n=0,r=(i=this._getFilesWithXhr(t.xhr)).length;n<r;n++)(e=i[n]).status=B.CANCELED;for(t.xhr.abort(),o=0,s=i.length;o<s;o++)e=i[o],this.emit("canceled",e);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else(a=t.status)!==B.ADDED&&a!==B.QUEUED||(t.status=B.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));if(this.options.autoProcessQueue)return this.processQueue()},F=function(){var t,e;return e=arguments[0],t=2<=arguments.length?a.call(arguments,1):[],"function"==typeof e?e.apply(this,t):e},B.prototype.uploadFile=function(t){return this.uploadFiles([t])},B.prototype.uploadFiles=function(u){var d,t,i,e,n,o,r,s,a,l,c,h,p,f,g,m,v,y,b,_,E,w,C,T,x,D,I,O,R,k,S,A,M,N,K,L;for(y=new XMLHttpRequest,b=0,C=u.length;b<C;b++)(d=u[b]).xhr=y;for(e in h=F(this.options.method,u),m=F(this.options.url,u),y.open(h,m,!0),y.withCredentials=!!this.options.withCredentials,f=null,i=function(){var t,e,i;for(i=[],t=0,e=u.length;t<e;t++)d=u[t],i.push(N._errorProcessing(u,f||N.options.dictResponseError.replace("{{statusCode}}",y.status),y));return i},K=N=this,g=function(t){var e,i,n,o,r,s,a,l,c;if(null!=t)for(i=100*t.loaded/t.total,n=0,s=u.length;n<s;n++)(d=u[n]).upload={progress:i,total:t.total,bytesSent:t.loaded};else{for(e=!0,i=100,o=0,a=u.length;o<a;o++)100===(d=u[o]).upload.progress&&d.upload.bytesSent===d.upload.total||(e=!1),d.upload.progress=i,d.upload.bytesSent=d.upload.total;if(e)return}for(c=[],r=0,l=u.length;r<l;r++)d=u[r],c.push(K.emit("uploadprogress",d,i,d.upload.bytesSent));return c},y.onload=(L=this,function(e){var t;if(u[0].status!==B.CANCELED&&4===y.readyState){if(f=y.responseText,y.getResponseHeader("content-type")&&~y.getResponseHeader("content-type").indexOf("application/json"))try{f=JSON.parse(f)}catch(t){e=t,f="Invalid JSON response from server."}return g(),200<=(t=y.status)&&t<300?L._finished(u,f,e):i()}}),y.onerror=function(){if(u[0].status!==B.CANCELED)return i()},(null!=(O=y.upload)?O:y).onprogress=g,o={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&P(o,this.options.headers),o)n=o[e],y.setRequestHeader(e,n);if(t=new FormData,this.options.params)for(c in R=this.options.params)v=R[c],t.append(c,v);for(_=0,T=u.length;_<T;_++)d=u[_],this.emit("sending",d,y,t);if(this.options.uploadMultiple&&this.emit("sendingmultiple",u,y,t),"FORM"===this.element.tagName)for(E=0,x=(k=this.element.querySelectorAll("input, textarea, select, button")).length;E<x;E++)if(a=(s=k[E]).getAttribute("name"),l=s.getAttribute("type"),"SELECT"===s.tagName&&s.hasAttribute("multiple"))for(w=0,D=(S=s.options).length;w<D;w++)(p=S[w]).selected&&t.append(a,p.value);else(!l||"checkbox"!==(A=l.toLowerCase())&&"radio"!==A||s.checked)&&t.append(a,s.value);for(r=I=0,M=u.length-1;0<=M?I<=M:M<=I;r=0<=M?++I:--I)t.append(this._getParamName(r),u[r],u[r].name);return y.send(t)},B.prototype._finished=function(t,e,i){var n,o,r;for(o=0,r=t.length;o<r;o++)(n=t[o]).status=B.SUCCESS,this.emit("success",n,e,i),this.emit("complete",n);if(this.options.uploadMultiple&&(this.emit("successmultiple",t,e,i),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},B.prototype._errorProcessing=function(t,e,i){var n,o,r;for(o=0,r=t.length;o<r;o++)(n=t[o]).status=B.ERROR,this.emit("error",n,e,i),this.emit("complete",n);if(this.options.uploadMultiple&&(this.emit("errormultiple",t,e,i),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},(s=B).version="4.0.1",s.options={},s.optionsForElement=function(t){return t.getAttribute("id")?s.options[e(t.getAttribute("id"))]:void 0},s.instances=[],s.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},s.autoDiscover=!0,s.discover=function(){var t,e,r,i,n,o;for(document.querySelectorAll?r=document.querySelectorAll(".dropzone"):(r=[],(t=function(t){var e,i,n,o;for(o=[],i=0,n=t.length;i<n;i++)e=t[i],/(^| )dropzone($| )/.test(e.className)?o.push(r.push(e)):o.push(void 0);return o})(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),o=[],i=0,n=r.length;i<n;i++)e=r[i],!1!==s.optionsForElement(e)?o.push(new s(e)):o.push(void 0);return o},s.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],s.isBrowserSupported=function(){var t,e,i,n;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(e=0,i=(n=s.blacklistedBrowsers).length;e<i;e++)n[e].test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},o=function(t,e){var i,n,o,r;for(r=[],n=0,o=t.length;n<o;n++)(i=t[n])!==e&&r.push(i);return r},e=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})},s.createElement=function(t){var e;return(e=document.createElement("div")).innerHTML=t,e.childNodes[0]},s.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},s.getElement=function(t,e){var i;if("string"==typeof t?i=document.querySelector(t):null!=t.nodeType&&(i=t),null==i)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},s.getElements=function(t,e){var i,n,o,r,s,a,l;if(t instanceof Array){n=[];try{for(o=0,s=t.length;o<s;o++)i=t[o],n.push(this.getElement(i,e))}catch(t){t,n=null}}else if("string"==typeof t)for(n=[],r=0,a=(l=document.querySelectorAll(t)).length;r<a;r++)i=l[r],n.push(i);else null!=t.nodeType&&(n=[t]);if(null==n||!n.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},s.confirm=function(t,e,i){return window.confirm(t)?e():null!=i?i():void 0},s.isValidFile=function(t,e){var i,n,o,r,s;if(!e)return!0;for(e=e.split(","),i=(n=t.type).replace(/\/.*$/,""),r=0,s=e.length;r<s;r++)if("."===(o=(o=e[r]).trim()).charAt(0)){if(-1!==t.name.toLowerCase().indexOf(o.toLowerCase(),t.name.length-o.length))return!0}else if(/\/\*$/.test(o)){if(i===o.replace(/\/.*$/,""))return!0}else if(n===o)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new s(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=s:window.Dropzone=s,s.ADDED="added",s.QUEUED="queued",s.ACCEPTED=s.QUEUED,s.UPLOADING="uploading",s.PROCESSING=s.UPLOADING,s.CANCELED="canceled",s.ERROR="error",s.SUCCESS="success",d=function(t){var e,i,n,o,r,s,a,l;for(t.naturalWidth,r=t.naturalHeight,(e=document.createElement("canvas")).width=1,e.height=r,(i=e.getContext("2d")).drawImage(t,0,0),n=i.getImageData(0,0,1,r).data,l=0,s=o=r;l<s;)0===n[4*(s-1)+3]?o=s:l=s,s=o+l>>1;return 0==(a=s/r)?1:a},h=function(t,e,i,n,o,r,s,a,l,c){var u;return u=d(e),t.drawImage(e,i,n,o,r,s,a,l,c/u)},i=function(e,i){var t,n,o,r,s,a,l,c,u;if(u=!(o=!1),n=e.document,c=n.documentElement,t=n.addEventListener?"addEventListener":"attachEvent",l=n.addEventListener?"removeEventListener":"detachEvent",a=n.addEventListener?"":"on",r=function(t){if("readystatechange"!==t.type||"complete"===n.readyState)return("load"===t.type?e:n)[l](a+t.type,r,!1),!o&&(o=!0)?i.call(e,t.type||t):void 0},s=function(){try{c.doScroll("left")}catch(t){return t,void setTimeout(s,50)}return r("poll")},"complete"!==n.readyState){if(n.createEventObject&&c.doScroll){try{u=!e.frameElement}catch(t){}u&&s()}return n[t](a+"DOMContentLoaded",r,!1),n[t](a+"readystatechange",r,!1),e[t](a+"load",r,!1)}},s._autoDiscoverFunction=function(){if(s.autoDiscover)return s.discover()},i(window,s._autoDiscoverFunction)}.call(this),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?t(require("jquery")):t(jQuery)}(function(r){var t,e,i="[object OperaMini]"===Object.prototype.toString.call(window.operamini),n="placeholder"in document.createElement("input")&&!i,o="placeholder"in document.createElement("textarea")&&!i,s=r.valHooks,a=r.propHooks,l={};function c(t,e){var i=r(this);if(this.value===i.attr("placeholder")&&i.hasClass(l.customClass))if(this.value="",i.removeClass(l.customClass),i.data("placeholder-password")){if(i=i.hide().nextAll('input[type="password"]:first').show().attr("id",i.removeAttr("id").data("placeholder-id")),!0===t)return i[0].value=e;i.focus()}else this==d()&&this.select()}function u(t){var e,i=r(this),n=this.id;if(t&&"blur"===t.type){if(i.hasClass(l.customClass))return;if("password"===this.type&&0<(e=i.prevAll('input[type="text"]:first')).length&&e.is(":visible"))return}if(""===this.value){if("password"===this.type){if(!i.data("placeholder-textinput")){try{e=i.clone().prop({type:"text"})}catch(t){e=r("<input>").attr(r.extend(function(t){var i={},n=/^jQuery\d+$/;return r.each(t.attributes,function(t,e){e.specified&&!n.test(e.name)&&(i[e.name]=e.value)}),i}(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-enabled":!0,"placeholder-password":i,"placeholder-id":n}).bind("focus.placeholder",c),i.data({"placeholder-textinput":e,"placeholder-id":n}).before(e)}this.value="",i=i.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",i.data("placeholder-id")).show()}else{var o=i.data("placeholder-password");o&&(o[0].value="",i.attr("id",i.data("placeholder-id")).show().nextAll('input[type="password"]:last').hide().removeAttr("id"))}i.addClass(l.customClass),i[0].value=i.attr("placeholder")}else i.removeClass(l.customClass)}function d(){try{return document.activeElement}catch(t){}}n&&o?((e=r.fn.placeholder=function(){return this}).input=!0,e.textarea=!0):((e=r.fn.placeholder=function(t){return l=r.extend({},{customClass:"placeholder"},t),this.filter((n?"textarea":":input")+"[placeholder]").not("."+l.customClass).bind({"focus.placeholder":c,"blur.placeholder":u}).data("placeholder-enabled",!0).trigger("blur.placeholder")}).input=n,e.textarea=o,t={get:function(t){var e=r(t),i=e.data("placeholder-password");return i?i[0].value:e.data("placeholder-enabled")&&e.hasClass(l.customClass)?"":t.value},set:function(t,e){var i,n,o=r(t);return""!==e&&(i=o.data("placeholder-textinput"),n=o.data("placeholder-password"),i?(c.call(i[0],!0,e)||(t.value=e),i[0].value=e):n&&(c.call(t,!0,e)||(n[0].value=e),t.value=e)),o.data("placeholder-enabled")?""===e?(t.value=e,t!=d()&&u.call(t)):(o.hasClass(l.customClass)&&c.call(t),t.value=e):t.value=e,o}},n||(s.input=t,a.value=t),o||(s.textarea=t,a.value=t),r(function(){r(document).delegate("form","submit.placeholder",function(){var t=r("."+l.customClass,this).each(function(){c.call(this,!0,"")});setTimeout(function(){t.each(u)},10)})}),r(window).bind("beforeunload.placeholder",function(){r("."+l.customClass).each(function(){this.value=""})}))}),function(t){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else if("object"==typeof exports)t(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";t(jQuery,moment)}}(function(X,Z){"use strict";if(!Z)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");function i(r,c){function s(t){if("string"!=typeof t||1<t.length)throw new TypeError("isEnabled expects a single character string parameter");switch(t){case"y":return-1!==R.indexOf("Y");case"M":return-1!==R.indexOf("M");case"d":return-1!==R.toLowerCase().indexOf("d");case"h":case"H":return-1!==R.toLowerCase().indexOf("h");case"m":return-1!==R.indexOf("m");case"s":return-1!==R.indexOf("s");default:return!1}}function a(){return s("h")||s("m")||s("s")}function l(){return s("y")||s("M")||s("d")}function u(){var t=X("<div>").addClass("timepicker-hours").append(X("<table>").addClass("table-condensed")),e=X("<div>").addClass("timepicker-minutes").append(X("<table>").addClass("table-condensed")),i=X("<div>").addClass("timepicker-seconds").append(X("<table>").addClass("table-condensed")),n=[function(){var t=X("<tr>"),e=X("<tr>"),i=X("<tr>");return s("h")&&(t.append(X("<td>").append(X("<a>").attr({href:"#",tabindex:"-1",title:"Increment Hour"}).addClass("btn").attr("data-action","incrementHours").append(X("<span>").addClass(c.icons.up)))),e.append(X("<td>").append(X("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:"Pick Hour"}).attr("data-action","showHours"))),i.append(X("<td>").append(X("<a>").attr({href:"#",tabindex:"-1",title:"Decrement Hour"}).addClass("btn").attr("data-action","decrementHours").append(X("<span>").addClass(c.icons.down))))),s("m")&&(s("h")&&(t.append(X("<td>").addClass("separator")),e.append(X("<td>").addClass("separator").html(":")),i.append(X("<td>").addClass("separator"))),t.append(X("<td>").append(X("<a>").attr({href:"#",tabindex:"-1",title:"Increment Minute"}).addClass("btn").attr("data-action","incrementMinutes").append(X("<span>").addClass(c.icons.up)))),e.append(X("<td>").append(X("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:"Pick Minute"}).attr("data-action","showMinutes"))),i.append(X("<td>").append(X("<a>").attr({href:"#",tabindex:"-1",title:"Decrement Minute"}).addClass("btn").attr("data-action","decrementMinutes").append(X("<span>").addClass(c.icons.down))))),s("s")&&(s("m")&&(t.append(X("<td>").addClass("separator")),e.append(X("<td>").addClass("separator").html(":")),i.append(X("<td>").addClass("separator"))),t.append(X("<td>").append(X("<a>").attr({href:"#",tabindex:"-1",title:"Increment Second"}).addClass("btn").attr("data-action","incrementSeconds").append(X("<span>").addClass(c.icons.up)))),e.append(X("<td>").append(X("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:"Pick Second"}).attr("data-action","showSeconds"))),i.append(X("<td>").append(X("<a>").attr({href:"#",tabindex:"-1",title:"Decrement Second"}).addClass("btn").attr("data-action","decrementSeconds").append(X("<span>").addClass(c.icons.down))))),O||(t.append(X("<td>").addClass("separator")),e.append(X("<td>").append(X("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:"Toggle Period"}))),i.append(X("<td>").addClass("separator"))),X("<div>").addClass("timepicker-picker").append(X("<table>").addClass("table-condensed").append([t,e,i]))}()];return s("h")&&n.push(t),s("m")&&n.push(e),s("s")&&n.push(i),n}function e(){var t=X("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),e=X("<div>").addClass("datepicker").append(function(){var t=X("<thead>").append(X("<tr>").append(X("<th>").addClass("prev").attr("data-action","previous").append(X("<span>").addClass(c.icons.previous))).append(X("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",c.calendarWeeks?"6":"5")).append(X("<th>").addClass("next").attr("data-action","next").append(X("<span>").addClass(c.icons.next)))),e=X("<tbody>").append(X("<tr>").append(X("<td>").attr("colspan",c.calendarWeeks?"8":"7")));return[X("<div>").addClass("datepicker-days").append(X("<table>").addClass("table-condensed").append(t).append(X("<tbody>"))),X("<div>").addClass("datepicker-months").append(X("<table>").addClass("table-condensed").append(t.clone()).append(e.clone())),X("<div>").addClass("datepicker-years").append(X("<table>").addClass("table-condensed").append(t.clone()).append(e.clone())),X("<div>").addClass("datepicker-decades").append(X("<table>").addClass("table-condensed").append(t.clone()).append(e.clone()))]}()),i=X("<div>").addClass("timepicker").append(u()),n=X("<ul>").addClass("list-unstyled"),o=X("<li>").addClass("picker-switch"+(c.collapse?" accordion-toggle":"")).append(function(){var t=[];return c.showTodayButton&&t.push(X("<td>").append(X("<a>").attr({"data-action":"today",title:"Go to today"}).append(X("<span>").addClass(c.icons.today)))),!c.sideBySide&&l()&&a()&&t.push(X("<td>").append(X("<a>").attr({"data-action":"togglePicker",title:"Select Time"}).append(X("<span>").addClass(c.icons.time)))),c.showClear&&t.push(X("<td>").append(X("<a>").attr({"data-action":"clear",title:"Clear selection"}).append(X("<span>").addClass(c.icons.clear)))),c.showClose&&t.push(X("<td>").append(X("<a>").attr({"data-action":"close",title:"Close the picker"}).append(X("<span>").addClass(c.icons.close)))),X("<table>").addClass("table-condensed").append(X("<tbody>").append(X("<tr>").append(t)))}());return c.inline&&t.removeClass("dropdown-menu"),O&&t.addClass("usetwentyfour"),s("s")&&!O&&t.addClass("wider"),c.sideBySide&&l()&&a()?(t.addClass("timepicker-sbs"),t.append(X("<div>").addClass("row").append(e.addClass("col-sm-6")).append(i.addClass("col-sm-6"))),t.append(o),t):("top"===c.toolbarPlacement&&n.append(o),l()&&n.append(X("<li>").addClass(c.collapse&&a()?"collapse in":"").append(e)),"default"===c.toolbarPlacement&&n.append(o),a()&&n.append(X("<li>").addClass(c.collapse&&l()?"collapse":"").append(i)),"bottom"===c.toolbarPlacement&&n.append(o),t.append(n))}function i(){var t,e=(F||r).position(),i=(F||r).offset(),n=c.widgetPositioning.vertical,o=c.widgetPositioning.horizontal;if(c.widgetParent)t=c.widgetParent.append(B);else if(r.is("input"))t=r.after(B).parent();else{if(c.inline)return void r.append(B);(t=r).children().first().after(B)}if("auto"===n&&(n=i.top+1.5*B.height()>=X(window).height()+X(window).scrollTop()&&B.height()+r.outerHeight()<i.top?"top":"bottom"),"auto"===o&&(o=t.width()<i.left+B.outerWidth()/2&&i.left+B.outerWidth()>X(window).width()?"right":"left"),"top"===n?B.addClass("top").removeClass("bottom"):B.addClass("bottom").removeClass("top"),"right"===o?B.addClass("pull-right"):B.removeClass("pull-right"),"relative"!==t.css("position")&&(t=t.parents().filter(function(){return"relative"===X(this).css("position")}).first()),0===t.length)throw new Error("datetimepicker component should be placed within a relative positioned container");B.css({top:"top"===n?"auto":e.top+r.outerHeight(),bottom:"top"===n?e.top+r.outerHeight():"auto",left:"left"===o?t===r?0:e.left:"auto",right:"left"===o?"auto":t.outerWidth()-r.outerWidth()-(t===r?0:e.left)})}function n(t){"dp.change"===t.type&&(t.date&&t.date.isSame(t.oldDate)||!t.date&&!t.oldDate)||r.trigger(t)}function o(t){"y"===t&&(t="YYYY"),n({type:"dp.update",change:t,viewDate:L.clone()})}function d(t){B&&(t&&(S=Math.max(H,Math.min(3,S+t))),B.find(".datepicker > div").hide().filter(".datepicker-"+z[S].clsName).show())}function h(t,e){if(!t.isValid())return!1;if(c.disabledDates&&"d"===e&&function(t){return!0===c.disabledDates[t.format("YYYY-MM-DD")]}(t))return!1;if(c.enabledDates&&"d"===e&&!function(t){return!0===c.enabledDates[t.format("YYYY-MM-DD")]}(t))return!1;if(c.minDate&&t.isBefore(c.minDate,e))return!1;if(c.maxDate&&t.isAfter(c.maxDate,e))return!1;if(c.daysOfWeekDisabled&&"d"===e&&-1!==c.daysOfWeekDisabled.indexOf(t.day()))return!1;if(c.disabledHours&&("h"===e||"m"===e||"s"===e)&&function(t){return!0===c.disabledHours[t.format("H")]}(t))return!1;if(c.enabledHours&&("h"===e||"m"===e||"s"===e)&&!function(t){return!0===c.enabledHours[t.format("H")]}(t))return!1;if(c.disabledTimeIntervals&&("h"===e||"m"===e||"s"===e)){var i=!1;if(X.each(c.disabledTimeIntervals,function(){return t.isBetween(this[0],this[1])?!(i=!0):void 0}),i)return!1}return!0}function p(){var t,e,i,n,o=B.find(".datepicker-days"),r=o.find("th"),s=[];if(l()){for(r.eq(0).find("span").attr("title","Previous Month"),r.eq(1).attr("title","Select Month"),r.eq(2).find("span").attr("title","Next Month"),o.find(".disabled").removeClass("disabled"),r.eq(1).text(L.format(c.dayViewHeaderFormat)),h(L.clone().subtract(1,"M"),"M")||r.eq(0).addClass("disabled"),h(L.clone().add(1,"M"),"M")||r.eq(2).addClass("disabled"),t=L.clone().startOf("M").startOf("w").startOf("d"),n=0;n<42;n++)0===t.weekday()&&(e=X("<tr>"),c.calendarWeeks&&e.append('<td class="cw">'+t.week()+"</td>"),s.push(e)),i="",t.isBefore(L,"M")&&(i+=" old"),t.isAfter(L,"M")&&(i+=" new"),t.isSame(K,"d")&&!P&&(i+=" active"),h(t,"d")||(i+=" disabled"),t.isSame(Z(),"d")&&(i+=" today"),0!==t.day()&&6!==t.day()||(i+=" weekend"),e.append('<td data-action="selectDay" data-day="'+t.format("L")+'" class="day'+i+'">'+t.date()+"</td>"),t.add(1,"d");o.find("tbody").empty().append(s),function(){var t=B.find(".datepicker-months"),e=t.find("th"),i=t.find("tbody").find("span");e.eq(0).find("span").attr("title","Previous Year"),e.eq(1).attr("title","Select Year"),e.eq(2).find("span").attr("title","Next Year"),t.find(".disabled").removeClass("disabled"),h(L.clone().subtract(1,"y"),"y")||e.eq(0).addClass("disabled"),e.eq(1).text(L.year()),h(L.clone().add(1,"y"),"y")||e.eq(2).addClass("disabled"),i.removeClass("active"),K.isSame(L,"y")&&!P&&i.eq(K.month()).addClass("active"),i.each(function(t){h(L.clone().month(t),"M")||X(this).addClass("disabled")})}(),function(){var t=B.find(".datepicker-years"),e=t.find("th"),i=L.clone().subtract(5,"y"),n=L.clone().add(6,"y"),o="";for(e.eq(0).find("span").attr("title","Previous Decade"),e.eq(1).attr("title","Select Decade"),e.eq(2).find("span").attr("title","Next Decade"),t.find(".disabled").removeClass("disabled"),c.minDate&&c.minDate.isAfter(i,"y")&&e.eq(0).addClass("disabled"),e.eq(1).text(i.year()+"-"+n.year()),c.maxDate&&c.maxDate.isBefore(n,"y")&&e.eq(2).addClass("disabled");!i.isAfter(n,"y");)o+='<span data-action="selectYear" class="year'+(i.isSame(K,"y")&&!P?" active":"")+(h(i,"y")?"":" disabled")+'">'+i.year()+"</span>",i.add(1,"y");t.find("td").html(o)}(),function(){var t=B.find(".datepicker-decades"),e=t.find("th"),i=Z(L.isBefore(Z({y:1999}))?{y:1899}:{y:1999}),n=i.clone().add(100,"y"),o="";for(e.eq(0).find("span").attr("title","Previous Century"),e.eq(2).find("span").attr("title","Next Century"),t.find(".disabled").removeClass("disabled"),(i.isSame(Z({y:1900}))||c.minDate&&c.minDate.isAfter(i,"y"))&&e.eq(0).addClass("disabled"),e.eq(1).text(i.year()+"-"+n.year()),(i.isSame(Z({y:2e3}))||c.maxDate&&c.maxDate.isBefore(n,"y"))&&e.eq(2).addClass("disabled");!i.isAfter(n,"y");)o+='<span data-action="selectDecade" class="decade'+(i.isSame(K,"y")?" active":"")+(h(i,"y")?"":" disabled")+'" data-selection="'+(i.year()+6)+'">'+(i.year()+1)+" - "+(i.year()+12)+"</span>",i.add(12,"y");o+="<span></span><span></span><span></span>",t.find("td").html(o)}()}}function t(){var t,e,i=B.find(".timepicker span[data-time-component]");O||(t=B.find(".timepicker [data-action=togglePeriod]"),e=K.clone().add(12<=K.hours()?-12:12,"h"),t.text(K.format("A")),h(e,"h")?t.removeClass("disabled"):t.addClass("disabled")),i.filter("[data-time-component=hours]").text(K.format(O?"HH":"hh")),i.filter("[data-time-component=minutes]").text(K.format("mm")),i.filter("[data-time-component=seconds]").text(K.format("ss")),function(){var t=B.find(".timepicker-hours table"),e=L.clone().startOf("d"),i=[],n=X("<tr>");for(11<L.hour()&&!O&&e.hour(12);e.isSame(L,"d")&&(O||L.hour()<12&&e.hour()<12||11<L.hour());)e.hour()%4==0&&(n=X("<tr>"),i.push(n)),n.append('<td data-action="selectHour" class="hour'+(h(e,"h")?"":" disabled")+'">'+e.format(O?"HH":"hh")+"</td>"),e.add(1,"h");t.empty().append(i)}(),function(){for(var t=B.find(".timepicker-minutes table"),e=L.clone().startOf("h"),i=[],n=X("<tr>"),o=1===c.stepping?5:c.stepping;L.isSame(e,"h");)e.minute()%(4*o)==0&&(n=X("<tr>"),i.push(n)),n.append('<td data-action="selectMinute" class="minute'+(h(e,"m")?"":" disabled")+'">'+e.format("mm")+"</td>"),e.add(o,"m");t.empty().append(i)}(),function(){for(var t=B.find(".timepicker-seconds table"),e=L.clone().startOf("m"),i=[],n=X("<tr>");L.isSame(e,"m");)e.second()%20==0&&(n=X("<tr>"),i.push(n)),n.append('<td data-action="selectSecond" class="second'+(h(e,"s")?"":" disabled")+'">'+e.format("ss")+"</td>"),e.add(5,"s");t.empty().append(i)}()}function f(){B&&(p(),t())}function g(t){var e=P?null:K;return t?(t=t.clone().locale(c.locale),1!==c.stepping&&t.minutes(Math.round(t.minutes()/c.stepping)*c.stepping%60).seconds(0),void(h(t)?(L=(K=t).clone(),I.val(K.format(R)),r.data("date",K.format(R)),P=!1,f(),n({type:"dp.change",date:K.clone(),oldDate:e})):(c.keepInvalid||I.val(P?"":K.format(R)),n({type:"dp.error",date:t})))):(P=!0,I.val(""),r.data("date",""),n({type:"dp.change",date:!1,oldDate:e}),void f())}function m(){var e=!1;return B&&(B.find(".collapse").each(function(){var t=X(this).data("collapse");return!t||!t.transitioning||!(e=!0)}),e||(F&&F.hasClass("btn")&&F.toggleClass("active"),B.hide(),X(window).off("resize",i),B.off("click","[data-action]"),B.off("mousedown",!1),B.remove(),B=!1,n({type:"dp.hide",date:K.clone()}))),N}function v(){g(null)}function y(t){return X(t.currentTarget).is(".disabled")||U[X(t.currentTarget).data("action")].apply(N,arguments),!1}function b(){var t;return I.prop("disabled")||!c.ignoreReadonly&&I.prop("readonly")||B||(void 0!==I.val()&&0!==I.val().trim().length?g(Y(I.val().trim())):c.useCurrent&&P&&(I.is("input")&&0===I.val().trim().length||c.inline)&&(t=Z(),"string"==typeof c.useCurrent&&(t={year:function(t){return t.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(t){return t.date(1).hours(0).seconds(0).minutes(0)},day:function(t){return t.hours(0).seconds(0).minutes(0)},hour:function(t){return t.seconds(0).minutes(0)},minute:function(t){return t.seconds(0)}}[c.useCurrent](t)),g(t)),B=e(),function(){var t=X("<tr>"),e=L.clone().startOf("w").startOf("d");for(!0===c.calendarWeeks&&t.append(X("<th>").addClass("cw").text("#"));e.isBefore(L.clone().endOf("w"));)t.append(X("<th>").addClass("dow").text(e.format("dd"))),e.add(1,"d");B.find(".datepicker-days thead").append(t)}(),function(){for(var t=[],e=L.clone().startOf("y").startOf("d");e.isSame(L,"y");)t.push(X("<span>").attr("data-action","selectMonth").addClass("month").text(e.format("MMM"))),e.add(1,"M");B.find(".datepicker-months td").empty().append(t)}(),B.find(".timepicker-hours").hide(),B.find(".timepicker-minutes").hide(),B.find(".timepicker-seconds").hide(),f(),d(),X(window).on("resize",i),B.on("click","[data-action]",y),B.on("mousedown",!1),F&&F.hasClass("btn")&&F.toggleClass("active"),B.show(),i(),c.focusOnShow&&!I.is(":focus")&&I.focus(),n({type:"dp.show"})),N}function _(){return B?m():b()}function E(t){var e,i,n,o,r=null,s=[],a={},l=t.which;for(e in q[l]="p",q)q.hasOwnProperty(e)&&"p"===q[e]&&(s.push(e),parseInt(e,10)!==l&&(a[e]=!0));for(e in c.keyBinds)if(c.keyBinds.hasOwnProperty(e)&&"function"==typeof c.keyBinds[e]&&((n=e.split(" ")).length===s.length&&G[l]===n[n.length-1])){for(o=!0,i=n.length-2;0<=i;i--)if(!(G[n[i]]in a)){o=!1;break}if(o){r=c.keyBinds[e];break}}r&&(r.call(N,B),t.stopPropagation(),t.preventDefault())}function w(t){q[t.which]="r",t.stopPropagation(),t.preventDefault()}function C(t){var e=X(t.target).val().trim(),i=e?Y(e):null;return g(i),t.stopImmediatePropagation(),!1}function T(t){var e={};return X.each(t,function(){var t=Y(this);t.isValid()&&(e[t.format("YYYY-MM-DD")]=!0)}),!!Object.keys(e).length&&e}function x(t){var e={};return X.each(t,function(){e[this]=!0}),!!Object.keys(e).length&&e}function D(){var t=c.format||"L LT";R=t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return(K.localeData().longDateFormat(t)||t).replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return K.localeData().longDateFormat(t)||t})}),(k=c.extraFormats?c.extraFormats.slice():[]).indexOf(t)<0&&k.indexOf(R)<0&&k.push(R),O=R.toLowerCase().indexOf("a")<1&&R.replace(/\[.*?\]/g,"").indexOf("h")<1,s("y")&&(H=2),s("M")&&(H=1),s("d")&&(H=0),S=Math.max(H,S),P||g(K)}var I,O,R,k,S,A,M,N={},K=Z().startOf("d"),L=K.clone(),P=!0,F=!1,B=!1,H=0,z=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],$=["days","months","years","decades"],V=["top","bottom","auto"],j=["left","right","auto"],W=["default","top","bottom"],G={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t",delete:46,46:"delete"},q={},U={next:function(){var t=z[S].navFnc;L.add(z[S].navStep,t),p(),o(t)},previous:function(){var t=z[S].navFnc;L.subtract(z[S].navStep,t),p(),o(t)},pickerSwitch:function(){d(1)},selectMonth:function(t){var e=X(t.target).closest("tbody").find("span").index(X(t.target));L.month(e),S===H?(g(K.clone().year(L.year()).month(L.month())),c.inline||m()):(d(-1),p()),o("M")},selectYear:function(t){var e=parseInt(X(t.target).text(),10)||0;L.year(e),S===H?(g(K.clone().year(L.year())),c.inline||m()):(d(-1),p()),o("YYYY")},selectDecade:function(t){var e=parseInt(X(t.target).data("selection"),10)||0;L.year(e),S===H?(g(K.clone().year(L.year())),c.inline||m()):(d(-1),p()),o("YYYY")},selectDay:function(t){var e=L.clone();X(t.target).is(".old")&&e.subtract(1,"M"),X(t.target).is(".new")&&e.add(1,"M"),g(e.date(parseInt(X(t.target).text(),10))),a()||c.keepOpen||c.inline||m()},incrementHours:function(){var t=K.clone().add(1,"h");h(t,"h")&&g(t)},incrementMinutes:function(){var t=K.clone().add(c.stepping,"m");h(t,"m")&&g(t)},incrementSeconds:function(){var t=K.clone().add(1,"s");h(t,"s")&&g(t)},decrementHours:function(){var t=K.clone().subtract(1,"h");h(t,"h")&&g(t)},decrementMinutes:function(){var t=K.clone().subtract(c.stepping,"m");h(t,"m")&&g(t)},decrementSeconds:function(){var t=K.clone().subtract(1,"s");h(t,"s")&&g(t)},togglePeriod:function(){g(K.clone().add(12<=K.hours()?-12:12,"h"))},togglePicker:function(t){var e,i=X(t.target),n=i.closest("ul"),o=n.find(".in"),r=n.find(".collapse:not(.in)");if(o&&o.length){if((e=o.data("collapse"))&&e.transitioning)return;o.collapse?(o.collapse("hide"),r.collapse("show")):(o.removeClass("in"),r.addClass("in")),i.is("span")?i.toggleClass(c.icons.time+" "+c.icons.date):i.find("span").toggleClass(c.icons.time+" "+c.icons.date)}},showPicker:function(){B.find(".timepicker > div:not(.timepicker-picker)").hide(),B.find(".timepicker .timepicker-picker").show()},showHours:function(){B.find(".timepicker .timepicker-picker").hide(),B.find(".timepicker .timepicker-hours").show()},showMinutes:function(){B.find(".timepicker .timepicker-picker").hide(),B.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){B.find(".timepicker .timepicker-picker").hide(),B.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var e=parseInt(X(t.target).text(),10);O||(12<=K.hours()?12!==e&&(e+=12):12===e&&(e=0)),g(K.clone().hours(e)),U.showPicker.call(N)},selectMinute:function(t){g(K.clone().minutes(parseInt(X(t.target).text(),10))),U.showPicker.call(N)},selectSecond:function(t){g(K.clone().seconds(parseInt(X(t.target).text(),10))),U.showPicker.call(N)},clear:v,today:function(){h(Z(),"d")&&g(Z())},close:m},Y=function(t){return(t=Z.isMoment(t)||t instanceof Date?Z(t):Z(t,k,c.useStrict)).locale(c.locale),t};if(N.destroy=function(){m(),I.off({change:C,blur:m,keydown:E,keyup:w,focus:c.allowInputToggle?m:""}),r.is("input")?I.off({focus:b}):F&&(F.off("click",_),F.off("mousedown",!1)),r.removeData("DateTimePicker"),r.removeData("date")},N.toggle=_,N.show=b,N.hide=m,N.disable=function(){return m(),F&&F.hasClass("btn")&&F.addClass("disabled"),I.prop("disabled",!0),N},N.enable=function(){return F&&F.hasClass("btn")&&F.removeClass("disabled"),I.prop("disabled",!1),N},N.ignoreReadonly=function(t){if(0===arguments.length)return c.ignoreReadonly;if("boolean"!=typeof t)throw new TypeError("ignoreReadonly () expects a boolean parameter");return c.ignoreReadonly=t,N},N.options=function(t){if(0===arguments.length)return X.extend(!0,{},c);if(!(t instanceof Object))throw new TypeError("options() options parameter should be an object");return X.extend(!0,c,t),X.each(c,function(t,e){if(void 0===N[t])throw new TypeError("option "+t+" is not recognized!");N[t](e)}),N},N.date=function(t){if(0===arguments.length)return P?null:K.clone();if(!(null===t||"string"==typeof t||Z.isMoment(t)||t instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return g(null===t?null:Y(t)),N},N.format=function(t){if(0===arguments.length)return c.format;if("string"!=typeof t&&("boolean"!=typeof t||!1!==t))throw new TypeError("format() expects a sting or boolean:false parameter "+t);return c.format=t,R&&D(),N},N.dayViewHeaderFormat=function(t){if(0===arguments.length)return c.dayViewHeaderFormat;if("string"!=typeof t)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return c.dayViewHeaderFormat=t,N},N.extraFormats=function(t){if(0===arguments.length)return c.extraFormats;if(!1!==t&&!(t instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return c.extraFormats=t,k&&D(),N},N.disabledDates=function(t){if(0===arguments.length)return c.disabledDates?X.extend({},c.disabledDates):c.disabledDates;if(!t)return c.disabledDates=!1,f(),N;if(!(t instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return c.disabledDates=T(t),c.enabledDates=!1,f(),N},N.enabledDates=function(t){if(0===arguments.length)return c.enabledDates?X.extend({},c.enabledDates):c.enabledDates;if(!t)return c.enabledDates=!1,f(),N;if(!(t instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return c.enabledDates=T(t),c.disabledDates=!1,f(),N},N.daysOfWeekDisabled=function(t){if(0===arguments.length)return c.daysOfWeekDisabled.splice(0);if("boolean"==typeof t&&!t)return c.daysOfWeekDisabled=!1,f(),N;if(!(t instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(c.daysOfWeekDisabled=t.reduce(function(t,e){return 6<(e=parseInt(e,10))||e<0||isNaN(e)||-1===t.indexOf(e)&&t.push(e),t},[]).sort(),c.useCurrent&&!c.keepInvalid){for(var e=0;!h(K,"d");){if(K.add(1,"d"),7===e)throw"Tried 7 times to find a valid date";e++}g(K)}return f(),N},N.maxDate=function(t){if(0===arguments.length)return c.maxDate?c.maxDate.clone():c.maxDate;if("boolean"==typeof t&&!1===t)return c.maxDate=!1,f(),N;"string"!=typeof t||"now"!==t&&"moment"!==t||(t=Z());var e=Y(t);if(!e.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+t);if(c.minDate&&e.isBefore(c.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+e.format(R));return c.maxDate=e,c.useCurrent&&!c.keepInvalid&&K.isAfter(t)&&g(c.maxDate),L.isAfter(e)&&(L=e.clone()),f(),N},N.minDate=function(t){if(0===arguments.length)return c.minDate?c.minDate.clone():c.minDate;if("boolean"==typeof t&&!1===t)return c.minDate=!1,f(),N;"string"!=typeof t||"now"!==t&&"moment"!==t||(t=Z());var e=Y(t);if(!e.isValid())throw new TypeError("minDate() Could not parse date parameter: "+t);if(c.maxDate&&e.isAfter(c.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+e.format(R));return c.minDate=e,c.useCurrent&&!c.keepInvalid&&K.isBefore(t)&&g(c.minDate),L.isBefore(e)&&(L=e.clone()),f(),N},N.defaultDate=function(t){if(0===arguments.length)return c.defaultDate?c.defaultDate.clone():c.defaultDate;if(!t)return c.defaultDate=!1,N;"string"!=typeof t||"now"!==t&&"moment"!==t||(t=Z());var e=Y(t);if(!e.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+t);if(!h(e))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return c.defaultDate=e,(c.defaultDate&&c.inline||""===I.val().trim()&&void 0===I.attr("placeholder"))&&g(c.defaultDate),N},N.locale=function(t){if(0===arguments.length)return c.locale;if(!Z.localeData(t))throw new TypeError("locale() locale "+t+" is not loaded from moment locales!");return c.locale=t,K.locale(c.locale),L.locale(c.locale),R&&D(),B&&(m(),b()),N},N.stepping=function(t){return 0===arguments.length?c.stepping:(t=parseInt(t,10),(isNaN(t)||t<1)&&(t=1),c.stepping=t,N)},N.useCurrent=function(t){var e=["year","month","day","hour","minute"];if(0===arguments.length)return c.useCurrent;if("boolean"!=typeof t&&"string"!=typeof t)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof t&&-1===e.indexOf(t.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+e.join(", "));return c.useCurrent=t,N},N.collapse=function(t){if(0===arguments.length)return c.collapse;if("boolean"!=typeof t)throw new TypeError("collapse() expects a boolean parameter");return c.collapse===t||(c.collapse=t,B&&(m(),b())),N},N.icons=function(t){if(0===arguments.length)return X.extend({},c.icons);if(!(t instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return X.extend(c.icons,t),B&&(m(),b()),N},N.useStrict=function(t){if(0===arguments.length)return c.useStrict;if("boolean"!=typeof t)throw new TypeError("useStrict() expects a boolean parameter");return c.useStrict=t,N},N.sideBySide=function(t){if(0===arguments.length)return c.sideBySide;if("boolean"!=typeof t)throw new TypeError("sideBySide() expects a boolean parameter");return c.sideBySide=t,B&&(m(),b()),N},N.viewMode=function(t){if(0===arguments.length)return c.viewMode;if("string"!=typeof t)throw new TypeError("viewMode() expects a string parameter");if(-1===$.indexOf(t))throw new TypeError("viewMode() parameter must be one of ("+$.join(", ")+") value");return c.viewMode=t,S=Math.max($.indexOf(t),H),d(),N},N.toolbarPlacement=function(t){if(0===arguments.length)return c.toolbarPlacement;if("string"!=typeof t)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===W.indexOf(t))throw new TypeError("toolbarPlacement() parameter must be one of ("+W.join(", ")+") value");return c.toolbarPlacement=t,B&&(m(),b()),N},N.widgetPositioning=function(t){if(0===arguments.length)return X.extend({},c.widgetPositioning);if("[object Object]"!=={}.toString.call(t))throw new TypeError("widgetPositioning() expects an object variable");if(t.horizontal){if("string"!=typeof t.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(t.horizontal=t.horizontal.toLowerCase(),-1===j.indexOf(t.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+j.join(", ")+")");c.widgetPositioning.horizontal=t.horizontal}if(t.vertical){if("string"!=typeof t.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(t.vertical=t.vertical.toLowerCase(),-1===V.indexOf(t.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+V.join(", ")+")");c.widgetPositioning.vertical=t.vertical}return f(),N},N.calendarWeeks=function(t){if(0===arguments.length)return c.calendarWeeks;if("boolean"!=typeof t)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return c.calendarWeeks=t,f(),N},N.showTodayButton=function(t){if(0===arguments.length)return c.showTodayButton;if("boolean"!=typeof t)throw new TypeError("showTodayButton() expects a boolean parameter");return c.showTodayButton=t,B&&(m(),b()),N},N.showClear=function(t){if(0===arguments.length)return c.showClear;if("boolean"!=typeof t)throw new TypeError("showClear() expects a boolean parameter");return c.showClear=t,B&&(m(),b()),N},N.widgetParent=function(t){if(0===arguments.length)return c.widgetParent;if("string"==typeof t&&(t=X(t)),null!==t&&"string"!=typeof t&&!(t instanceof X))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return c.widgetParent=t,B&&(m(),b()),N},N.keepOpen=function(t){if(0===arguments.length)return c.keepOpen;if("boolean"!=typeof t)throw new TypeError("keepOpen() expects a boolean parameter");return c.keepOpen=t,N},N.focusOnShow=function(t){if(0===arguments.length)return c.focusOnShow;if("boolean"!=typeof t)throw new TypeError("focusOnShow() expects a boolean parameter");return c.focusOnShow=t,N},N.inline=function(t){if(0===arguments.length)return c.inline;if("boolean"!=typeof t)throw new TypeError("inline() expects a boolean parameter");return c.inline=t,N},N.clear=function(){return v(),N},N.keyBinds=function(t){return c.keyBinds=t,N},N.debug=function(t){if("boolean"!=typeof t)throw new TypeError("debug() expects a boolean parameter");return c.debug=t,N},N.allowInputToggle=function(t){if(0===arguments.length)return c.allowInputToggle;if("boolean"!=typeof t)throw new TypeError("allowInputToggle() expects a boolean parameter");return c.allowInputToggle=t,N},N.showClose=function(t){if(0===arguments.length)return c.showClose;if("boolean"!=typeof t)throw new TypeError("showClose() expects a boolean parameter");return c.showClose=t,N},N.keepInvalid=function(t){if(0===arguments.length)return c.keepInvalid;if("boolean"!=typeof t)throw new TypeError("keepInvalid() expects a boolean parameter");return c.keepInvalid=t,N},N.datepickerInput=function(t){if(0===arguments.length)return c.datepickerInput;if("string"!=typeof t)throw new TypeError("datepickerInput() expects a string parameter");return c.datepickerInput=t,N},N.disabledTimeIntervals=function(t){if(0===arguments.length)return c.disabledTimeIntervals?X.extend({},c.disabledTimeIntervals):c.disabledTimeIntervals;if(!t)return c.disabledTimeIntervals=!1,f(),N;if(!(t instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return c.disabledTimeIntervals=t,f(),N},N.disabledHours=function(t){if(0===arguments.length)return c.disabledHours?X.extend({},c.disabledHours):c.disabledHours;if(!t)return c.disabledHours=!1,f(),N;if(!(t instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(c.disabledHours=x(t),c.enabledHours=!1,c.useCurrent&&!c.keepInvalid){for(var e=0;!h(K,"h");){if(K.add(1,"h"),24===e)throw"Tried 24 times to find a valid date";e++}g(K)}return f(),N},N.enabledHours=function(t){if(0===arguments.length)return c.enabledHours?X.extend({},c.enabledHours):c.enabledHours;if(!t)return c.enabledHours=!1,f(),N;if(!(t instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(c.enabledHours=x(t),c.disabledHours=!1,c.useCurrent&&!c.keepInvalid){for(var e=0;!h(K,"h");){if(K.add(1,"h"),24===e)throw"Tried 24 times to find a valid date";e++}g(K)}return f(),N},N.viewDate=function(t){if(0===arguments.length)return L.clone();if(!t)return L=K.clone(),N;if(!("string"==typeof t||Z.isMoment(t)||t instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return L=Y(t),o(),N},r.is("input"))I=r;else if(0===(I=r.find(c.datepickerInput)).size())I=r.find("input");else if(!I.is("input"))throw new Error('CSS class "'+c.datepickerInput+'" cannot be applied to non input element');if(r.hasClass("input-group")&&(F=0===r.find(".datepickerbutton").size()?r.find('[class^="input-group-"]'):r.find(".datepickerbutton")),!c.inline&&!I.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return X.extend(!0,c,(M={},(A=r.is("input")||c.inline?r.data():r.find("input").data()).dateOptions&&A.dateOptions instanceof Object&&(M=X.extend(!0,M,A.dateOptions)),X.each(c,function(t){var e="date"+t.charAt(0).toUpperCase()+t.slice(1);void 0!==A[e]&&(M[t]=A[e])}),M)),N.options(c),D(),I.on({change:C,blur:c.debug?"":m,keydown:E,keyup:w,focus:c.allowInputToggle?b:""}),r.is("input")?I.on({focus:b}):F&&(F.on("click",_),F.on("mousedown",!1)),I.prop("disabled")&&N.disable(),I.is("input")&&0!==I.val().trim().length?g(Y(I.val().trim())):c.defaultDate&&void 0===I.attr("placeholder")&&g(c.defaultDate),c.inline&&b(),N}X.fn.datetimepicker=function(e){return this.each(function(){var t=X(this);t.data("DateTimePicker")||(e=X.extend(!0,{},X.fn.datetimepicker.defaults,e),t.data("DateTimePicker",i(t,e)))})},X.fn.datetimepicker.defaults={format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:Z.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(t){if(t){var e=this.date()||Z();t.find(".datepicker").is(":visible")?this.date(e.clone().subtract(7,"d")):this.date(e.clone().add(1,"m"))}},down:function(t){if(t){var e=this.date()||Z();t.find(".datepicker").is(":visible")?this.date(e.clone().add(7,"d")):this.date(e.clone().subtract(1,"m"))}else this.show()},"control up":function(t){if(t){var e=this.date()||Z();t.find(".datepicker").is(":visible")?this.date(e.clone().subtract(1,"y")):this.date(e.clone().add(1,"h"))}},"control down":function(t){if(t){var e=this.date()||Z();t.find(".datepicker").is(":visible")?this.date(e.clone().add(1,"y")):this.date(e.clone().subtract(1,"h"))}},left:function(t){if(t){var e=this.date()||Z();t.find(".datepicker").is(":visible")&&this.date(e.clone().subtract(1,"d"))}},right:function(t){if(t){var e=this.date()||Z();t.find(".datepicker").is(":visible")&&this.date(e.clone().add(1,"d"))}},pageUp:function(t){if(t){var e=this.date()||Z();t.find(".datepicker").is(":visible")&&this.date(e.clone().subtract(1,"M"))}},pageDown:function(t){if(t){var e=this.date()||Z();t.find(".datepicker").is(":visible")&&this.date(e.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(t){t.find(".timepicker").is(":visible")&&t.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(Z())},delete:function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1}}),function(i,n){if("function"==typeof define&&define.amd)define(["moment","jquery"],function(t,e){return i.daterangepicker=n(t,e)});else if("object"==typeof module&&module.exports){var t="undefined"!=typeof window?window.jQuery:void 0;t||(t=require("jquery")).fn||(t.fn={}),module.exports=n(require("moment"),t)}else i.daterangepicker=n(i.moment,i.jQuery)}(this,function(B,H){function n(t,e,i){if(this.parentEl="body",this.element=H(t),this.startDate=B().startOf("day"),this.endDate=B().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyClass="btn-success",this.cancelClass="btn-default",this.locale={direction:"ltr",format:B.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:B.weekdaysMin(),monthNames:B.monthsShort(),firstDay:B.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof e&&null!==e||(e={}),"string"==typeof(e=H.extend(this.element.data(),e)).template||e.template instanceof H||(e.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'),this.parentEl=e.parentEl&&H(e.parentEl).length?H(e.parentEl):H(this.parentEl),this.container=H(e.template).appendTo(this.parentEl),"object"==typeof e.locale&&("string"==typeof e.locale.direction&&(this.locale.direction=e.locale.direction),"string"==typeof e.locale.format&&(this.locale.format=e.locale.format),"string"==typeof e.locale.separator&&(this.locale.separator=e.locale.separator),"object"==typeof e.locale.daysOfWeek&&(this.locale.daysOfWeek=e.locale.daysOfWeek.slice()),"object"==typeof e.locale.monthNames&&(this.locale.monthNames=e.locale.monthNames.slice()),"number"==typeof e.locale.firstDay&&(this.locale.firstDay=e.locale.firstDay),"string"==typeof e.locale.applyLabel&&(this.locale.applyLabel=e.locale.applyLabel),"string"==typeof e.locale.cancelLabel&&(this.locale.cancelLabel=e.locale.cancelLabel),"string"==typeof e.locale.weekLabel&&(this.locale.weekLabel=e.locale.weekLabel),"string"==typeof e.locale.customRangeLabel)){(d=document.createElement("textarea")).innerHTML=e.locale.customRangeLabel;var n=d.value;this.locale.customRangeLabel=n}if(this.container.addClass(this.locale.direction),"string"==typeof e.startDate&&(this.startDate=B(e.startDate,this.locale.format)),"string"==typeof e.endDate&&(this.endDate=B(e.endDate,this.locale.format)),"string"==typeof e.minDate&&(this.minDate=B(e.minDate,this.locale.format)),"string"==typeof e.maxDate&&(this.maxDate=B(e.maxDate,this.locale.format)),"object"==typeof e.startDate&&(this.startDate=B(e.startDate)),"object"==typeof e.endDate&&(this.endDate=B(e.endDate)),"object"==typeof e.minDate&&(this.minDate=B(e.minDate)),"object"==typeof e.maxDate&&(this.maxDate=B(e.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof e.applyClass&&(this.applyClass=e.applyClass),"string"==typeof e.cancelClass&&(this.cancelClass=e.cancelClass),"object"==typeof e.dateLimit&&(this.dateLimit=e.dateLimit),"string"==typeof e.opens&&(this.opens=e.opens),"string"==typeof e.drops&&(this.drops=e.drops),"boolean"==typeof e.showWeekNumbers&&(this.showWeekNumbers=e.showWeekNumbers),"boolean"==typeof e.showISOWeekNumbers&&(this.showISOWeekNumbers=e.showISOWeekNumbers),"string"==typeof e.buttonClasses&&(this.buttonClasses=e.buttonClasses),"object"==typeof e.buttonClasses&&(this.buttonClasses=e.buttonClasses.join(" ")),"boolean"==typeof e.showDropdowns&&(this.showDropdowns=e.showDropdowns),"boolean"==typeof e.showCustomRangeLabel&&(this.showCustomRangeLabel=e.showCustomRangeLabel),"boolean"==typeof e.singleDatePicker&&(this.singleDatePicker=e.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof e.timePicker&&(this.timePicker=e.timePicker),"boolean"==typeof e.timePickerSeconds&&(this.timePickerSeconds=e.timePickerSeconds),"number"==typeof e.timePickerIncrement&&(this.timePickerIncrement=e.timePickerIncrement),"boolean"==typeof e.timePicker24Hour&&(this.timePicker24Hour=e.timePicker24Hour),"boolean"==typeof e.autoApply&&(this.autoApply=e.autoApply),"boolean"==typeof e.autoUpdateInput&&(this.autoUpdateInput=e.autoUpdateInput),"boolean"==typeof e.linkedCalendars&&(this.linkedCalendars=e.linkedCalendars),"function"==typeof e.isInvalidDate&&(this.isInvalidDate=e.isInvalidDate),"function"==typeof e.isCustomDate&&(this.isCustomDate=e.isCustomDate),"boolean"==typeof e.alwaysShowCalendars&&(this.alwaysShowCalendars=e.alwaysShowCalendars),0!=this.locale.firstDay)for(var o=this.locale.firstDay;0<o;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),o--;var r,s,a;if(void 0===e.startDate&&void 0===e.endDate&&H(this.element).is("input[type=text]")){var l=H(this.element).val(),c=l.split(this.locale.separator);r=s=null,2==c.length?(r=B(c[0],this.locale.format),s=B(c[1],this.locale.format)):this.singleDatePicker&&""!==l&&(r=B(l,this.locale.format),s=B(l,this.locale.format)),null!==r&&null!==s&&(this.setStartDate(r),this.setEndDate(s))}if("object"==typeof e.ranges){for(a in e.ranges){r="string"==typeof e.ranges[a][0]?B(e.ranges[a][0],this.locale.format):B(e.ranges[a][0]),s="string"==typeof e.ranges[a][1]?B(e.ranges[a][1],this.locale.format):B(e.ranges[a][1]),this.minDate&&r.isBefore(this.minDate)&&(r=this.minDate.clone());var u=this.maxDate;if(this.dateLimit&&u&&r.clone().add(this.dateLimit).isAfter(u)&&(u=r.clone().add(this.dateLimit)),u&&s.isAfter(u)&&(s=u.clone()),!(this.minDate&&s.isBefore(this.minDate,this.timepicker?"minute":"day")||u&&r.isAfter(u,this.timepicker?"minute":"day"))){var d;(d=document.createElement("textarea")).innerHTML=a;n=d.value;this.ranges[n]=[r,s]}}var h="<ul>";for(a in this.ranges)h+='<li data-range-key="'+a+'">'+a+"</li>";this.showCustomRangeLabel&&(h+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"),h+="</ul>",this.container.find(".ranges").prepend(h)}"function"==typeof i&&(this.callback=i),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&"object"!=typeof e.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide(),this.timePicker?this.container.find(".ranges ul").hide():this.container.find(".ranges").hide()),(void 0===e.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),void 0!==e.ranges&&"right"==this.opens&&this.container.find(".ranges").prependTo(this.container.find(".calendar.left").parent()),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",H.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",H.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",H.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",H.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",H.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",H.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",H.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",H.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",H.proxy(this.showCalendars,this)).on("focus.daterangepicker",".daterangepicker_input input",H.proxy(this.formInputsFocused,this)).on("blur.daterangepicker",".daterangepicker_input input",H.proxy(this.formInputsBlurred,this)).on("change.daterangepicker",".daterangepicker_input input",H.proxy(this.formInputsChanged,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",H.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",H.proxy(this.clickCancel,this)).on("click.daterangepicker","li",H.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",H.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",H.proxy(this.updateFormInputs,this)),this.element.is("input")||this.element.is("button")?this.element.on({"click.daterangepicker":H.proxy(this.show,this),"focus.daterangepicker":H.proxy(this.show,this),"keyup.daterangepicker":H.proxy(this.elementChanged,this),"keydown.daterangepicker":H.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",H.proxy(this.toggle,this)),this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))}return n.prototype={constructor:n,setStartDate:function(t){"string"==typeof t&&(this.startDate=B(t,this.locale.format)),"object"==typeof t&&(this.startDate=B(t)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(t){"string"==typeof t&&(this.endDate=B(t,this.locale.format)),"object"==typeof t&&(this.endDate=B(t)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit)),this.previousRightTime=this.endDate.clone(),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active")),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){if(this.timePicker){var t,e,i,n;if(this.endDate){if(t=parseInt(this.container.find(".left .hourselect").val(),10),e=parseInt(this.container.find(".left .minuteselect").val(),10),i=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour)"PM"===(n=this.container.find(".left .ampmselect").val())&&t<12&&(t+=12),"AM"===n&&12===t&&(t=0)}else if(t=parseInt(this.container.find(".right .hourselect").val(),10),e=parseInt(this.container.find(".right .minuteselect").val(),10),i=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour)"PM"===(n=this.container.find(".right .ampmselect").val())&&t<12&&(t+=12),"AM"===n&&12===t&&(t=0);this.leftCalendar.month.hour(t).minute(e).second(i),this.rightCalendar.month.hour(t).minute(e).second(i)}this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(t){var e,i=(e="left"==t?this.leftCalendar:this.rightCalendar).month.month(),n=e.month.year(),o=e.month.hour(),r=e.month.minute(),s=e.month.second(),a=B([n,i]).daysInMonth(),l=B([n,i,1]),c=B([n,i,a]),u=B(l).subtract(1,"month").month(),d=B(l).subtract(1,"month").year(),h=B([d,u]).daysInMonth(),p=l.day();(e=[]).firstDay=l,e.lastDay=c;for(var f=0;f<6;f++)e[f]=[];var g=h-p+this.locale.firstDay+1;h<g&&(g-=7),p==this.locale.firstDay&&(g=h-6);for(var m=B([d,u,g,12,r,s]),v=(f=0,0),y=0;f<42;f++,v++,m=B(m).add(24,"hour"))0<f&&v%7==0&&(v=0,y++),e[y][v]=m.clone().hour(o).minute(r).second(s),m.hour(12),this.minDate&&e[y][v].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&e[y][v].isBefore(this.minDate)&&"left"==t&&(e[y][v]=this.minDate.clone()),this.maxDate&&e[y][v].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&e[y][v].isAfter(this.maxDate)&&"right"==t&&(e[y][v]=this.maxDate.clone());"left"==t?this.leftCalendar.calendar=e:this.rightCalendar.calendar=e;var b="left"==t?this.minDate:this.startDate,_=this.maxDate,E=("left"==t?this.startDate:this.endDate,"ltr"==this.locale.direction?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"}),w='<table class="table-condensed">';w+="<thead>",w+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(w+="<th></th>"),b&&!b.isBefore(e.firstDay)||this.linkedCalendars&&"left"!=t?w+="<th></th>":w+='<th class="prev available"><i class="fa fa-'+E.left+" glyphicon glyphicon-"+E.left+'"></i></th>';var C=this.locale.monthNames[e[1][1].month()]+e[1][1].format(" YYYY");if(this.showDropdowns){for(var T=e[1][1].month(),x=e[1][1].year(),D=_&&_.year()||x+5,I=b&&b.year()||x-50,O=x==I,R=x==D,k='<select class="monthselect">',S=0;S<12;S++)(!O||S>=b.month())&&(!R||S<=_.month())?k+="<option value='"+S+"'"+(S===T?" selected='selected'":"")+">"+this.locale.monthNames[S]+"</option>":k+="<option value='"+S+"'"+(S===T?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[S]+"</option>";k+="</select>";for(var A='<select class="yearselect">',M=I;M<=D;M++)A+='<option value="'+M+'"'+(M===x?' selected="selected"':"")+">"+M+"</option>";C=k+(A+="</select>")}if(w+='<th colspan="5" class="month">'+C+"</th>",_&&!_.isAfter(e.lastDay)||this.linkedCalendars&&"right"!=t&&!this.singleDatePicker?w+="<th></th>":w+='<th class="next available"><i class="fa fa-'+E.right+" glyphicon glyphicon-"+E.right+'"></i></th>',w+="</tr>",w+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(w+='<th class="week">'+this.locale.weekLabel+"</th>"),H.each(this.locale.daysOfWeek,function(t,e){w+="<th>"+e+"</th>"}),w+="</tr>",w+="</thead>",w+="<tbody>",null==this.endDate&&this.dateLimit){var N=this.startDate.clone().add(this.dateLimit).endOf("day");_&&!N.isBefore(_)||(_=N)}for(y=0;y<6;y++){w+="<tr>",this.showWeekNumbers?w+='<td class="week">'+e[y][0].week()+"</td>":this.showISOWeekNumbers&&(w+='<td class="week">'+e[y][0].isoWeek()+"</td>");for(v=0;v<7;v++){var K=[];e[y][v].isSame(new Date,"day")&&K.push("today"),5<e[y][v].isoWeekday()&&K.push("weekend"),e[y][v].month()!=e[1][1].month()&&K.push("off"),this.minDate&&e[y][v].isBefore(this.minDate,"day")&&K.push("off","disabled"),_&&e[y][v].isAfter(_,"day")&&K.push("off","disabled"),this.isInvalidDate(e[y][v])&&K.push("off","disabled"),e[y][v].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&K.push("active","start-date"),null!=this.endDate&&e[y][v].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&K.push("active","end-date"),null!=this.endDate&&e[y][v]>this.startDate&&e[y][v]<this.endDate&&K.push("in-range");var L=this.isCustomDate(e[y][v]);!1!==L&&("string"==typeof L?K.push(L):Array.prototype.push.apply(K,L));var P="",F=!1;for(f=0;f<K.length;f++)P+=K[f]+" ","disabled"==K[f]&&(F=!0);F||(P+="available"),w+='<td class="'+P.replace(/^\s+|\s+$/g,"")+'" data-title="r'+y+"c"+v+'">'+e[y][v].date()+"</td>"}w+="</tr>"}w+="</tbody>",w+="</table>",this.container.find(".calendar."+t+" .calendar-table").html(w)},renderTimePicker:function(t){if("right"!=t||this.endDate){var e,i,n,o=this.maxDate;if(!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(o=this.startDate.clone().add(this.dateLimit)),"left"==t)i=this.startDate.clone(),n=this.minDate;else if("right"==t){i=this.endDate.clone(),n=this.startDate;var r=this.container.find(".calendar.right .calendar-time div");if(""!=r.html()&&(i.hour(r.find(".hourselect option:selected").val()||i.hour()),i.minute(r.find(".minuteselect option:selected").val()||i.minute()),i.second(r.find(".secondselect option:selected").val()||i.second()),!this.timePicker24Hour)){var s=r.find(".ampmselect option:selected").val();"PM"===s&&i.hour()<12&&i.hour(i.hour()+12),"AM"===s&&12===i.hour()&&i.hour(0)}i.isBefore(this.startDate)&&(i=this.startDate.clone()),o&&i.isAfter(o)&&(i=o.clone())}e='<select class="hourselect">';for(var a=this.timePicker24Hour?0:1,l=this.timePicker24Hour?23:12,c=a;c<=l;c++){var u=c;this.timePicker24Hour||(u=12<=i.hour()?12==c?12:c+12:12==c?0:c);var d=i.clone().hour(u),h=!1;n&&d.minute(59).isBefore(n)&&(h=!0),o&&d.minute(0).isAfter(o)&&(h=!0),u!=i.hour()||h?e+=h?'<option value="'+c+'" disabled="disabled" class="disabled">'+c+"</option>":'<option value="'+c+'">'+c+"</option>":e+='<option value="'+c+'" selected="selected">'+c+"</option>"}e+="</select> ",e+=': <select class="minuteselect">';for(c=0;c<60;c+=this.timePickerIncrement){var p=c<10?"0"+c:c;d=i.clone().minute(c),h=!1;n&&d.second(59).isBefore(n)&&(h=!0),o&&d.second(0).isAfter(o)&&(h=!0),i.minute()!=c||h?e+=h?'<option value="'+c+'" disabled="disabled" class="disabled">'+p+"</option>":'<option value="'+c+'">'+p+"</option>":e+='<option value="'+c+'" selected="selected">'+p+"</option>"}if(e+="</select> ",this.timePickerSeconds){e+=': <select class="secondselect">';for(c=0;c<60;c++){p=c<10?"0"+c:c,d=i.clone().second(c),h=!1;n&&d.isBefore(n)&&(h=!0),o&&d.isAfter(o)&&(h=!0),i.second()!=c||h?e+=h?'<option value="'+c+'" disabled="disabled" class="disabled">'+p+"</option>":'<option value="'+c+'">'+p+"</option>":e+='<option value="'+c+'" selected="selected">'+p+"</option>"}e+="</select> "}if(!this.timePicker24Hour){e+='<select class="ampmselect">';var f="",g="";n&&i.clone().hour(12).minute(0).second(0).isBefore(n)&&(f=' disabled="disabled" class="disabled"'),o&&i.clone().hour(0).minute(0).second(0).isAfter(o)&&(g=' disabled="disabled" class="disabled"'),12<=i.hour()?e+='<option value="AM"'+f+'>AM</option><option value="PM" selected="selected"'+g+">PM</option>":e+='<option value="AM" selected="selected"'+f+'>AM</option><option value="PM"'+g+">PM</option>",e+="</select>"}this.container.find(".calendar."+t+" .calendar-time div").html(e)}},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var t,e={top:0,left:0},i=H(window).width();this.parentEl.is("body")||(e={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},i=this.parentEl[0].clientWidth+this.parentEl.offset().left),t="up"==this.drops?this.element.offset().top-this.container.outerHeight()-e.top:this.element.offset().top+this.element.outerHeight()-e.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:t,right:i-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:t,left:this.element.offset().left-e.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:t,left:this.element.offset().left-e.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>H(window).width()&&this.container.css({left:"auto",right:0}))},show:function(t){this.isShowing||(this._outsideClickProxy=H.proxy(function(t){this.outsideClick(t)},this),H(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),H(window).on("resize.daterangepicker",H.proxy(function(t){this.move(t)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(t){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),H(document).off(".daterangepicker"),H(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(t){this.isShowing?this.hide():this.show()},outsideClick:function(t){var e=H(t.target);"focusin"==t.type||e.closest(this.element).length||e.closest(this.container).length||e.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(t){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")){var e=t.target.getAttribute("data-range-key");if(e==this.locale.customRangeLabel)this.updateView();else{var i=this.ranges[e];this.container.find("input[name=daterangepicker_start]").val(i[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(i[1].format(this.locale.format))}}},clickRange:function(t){var e=t.target.getAttribute("data-range-key");if((this.chosenLabel=e)==this.locale.customRangeLabel)this.showCalendars();else{var i=this.ranges[e];this.startDate=i[0],this.endDate=i[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply()}},clickPrev:function(t){H(t.target).parents(".calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(t){H(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(t){if(H(t.target).hasClass("available")){var e=H(t.target).attr("data-title"),i=e.substr(1,1),n=e.substr(3,1),s=H(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[i][n]:this.rightCalendar.calendar[i][n];this.endDate&&!this.container.find("input[name=daterangepicker_start]").is(":focus")?this.container.find("input[name=daterangepicker_start]").val(s.format(this.locale.format)):this.endDate||this.container.find("input[name=daterangepicker_end]").is(":focus")||this.container.find("input[name=daterangepicker_end]").val(s.format(this.locale.format));var a=this.leftCalendar,l=this.rightCalendar,c=this.startDate;this.endDate||this.container.find(".calendar tbody td").each(function(t,e){if(!H(e).hasClass("week")){var i=H(e).attr("data-title"),n=i.substr(1,1),o=i.substr(3,1),r=H(e).parents(".calendar").hasClass("left")?a.calendar[n][o]:l.calendar[n][o];r.isAfter(c)&&r.isBefore(s)||r.isSame(s,"day")?H(e).addClass("in-range"):H(e).removeClass("in-range")}})}},clickDate:function(t){if(H(t.target).hasClass("available")){var e=H(t.target).attr("data-title"),i=e.substr(1,1),n=e.substr(3,1),o=H(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[i][n]:this.rightCalendar.calendar[i][n];if(this.endDate||o.isBefore(this.startDate,"day")){if(this.timePicker){var r=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour)"PM"===(l=this.container.find(".left .ampmselect").val())&&r<12&&(r+=12),"AM"===l&&12===r&&(r=0);var s=parseInt(this.container.find(".left .minuteselect").val(),10),a=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;o=o.clone().hour(r).minute(s).second(a)}this.endDate=null,this.setStartDate(o.clone())}else if(!this.endDate&&o.isBefore(this.startDate))this.setEndDate(this.startDate.clone());else{if(this.timePicker){var l;r=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour)"PM"===(l=this.container.find(".right .ampmselect").val())&&r<12&&(r+=12),"AM"===l&&12===r&&(r=0);s=parseInt(this.container.find(".right .minuteselect").val(),10),a=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;o=o.clone().hour(r).minute(s).second(a)}this.setEndDate(o.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply())}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView(),t.stopPropagation()}},calculateChosenLabel:function(){var t=!0,e=0;for(var i in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[i][0])&&this.endDate.isSame(this.ranges[i][1])){t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[i][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[i][1].format("YYYY-MM-DD")){t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").html();break}e++}t&&(this.showCustomRangeLabel?this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html():this.chosenLabel=null,this.showCalendars())},clickApply:function(t){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(t){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(t){var e=H(t.target).closest(".calendar").hasClass("left"),i=e?"left":"right",n=this.container.find(".calendar."+i),o=parseInt(n.find(".monthselect").val(),10),r=n.find(".yearselect").val();e||(r<this.startDate.year()||r==this.startDate.year()&&o<this.startDate.month())&&(o=this.startDate.month(),r=this.startDate.year()),this.minDate&&(r<this.minDate.year()||r==this.minDate.year()&&o<this.minDate.month())&&(o=this.minDate.month(),r=this.minDate.year()),this.maxDate&&(r>this.maxDate.year()||r==this.maxDate.year()&&o>this.maxDate.month())&&(o=this.maxDate.month(),r=this.maxDate.year()),e?(this.leftCalendar.month.month(o).year(r),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(o).year(r),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(t){var e=H(t.target).closest(".calendar"),i=e.hasClass("left"),n=parseInt(e.find(".hourselect").val(),10),o=parseInt(e.find(".minuteselect").val(),10),r=this.timePickerSeconds?parseInt(e.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var s=e.find(".ampmselect").val();"PM"===s&&n<12&&(n+=12),"AM"===s&&12===n&&(n=0)}if(i){var a=this.startDate.clone();a.hour(n),a.minute(o),a.second(r),this.setStartDate(a),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==a.format("YYYY-MM-DD")&&this.endDate.isBefore(a)&&this.setEndDate(a.clone())}else if(this.endDate){var l=this.endDate.clone();l.hour(n),l.minute(o),l.second(r),this.setEndDate(l)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},formInputsChanged:function(t){var e=H(t.target).closest(".calendar").hasClass("right"),i=B(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format),n=B(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);i.isValid()&&n.isValid()&&(e&&n.isBefore(i)&&(i=n.clone()),this.setStartDate(i),this.setEndDate(n),e?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))),this.updateView()},formInputsFocused:function(t){this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass("active"),H(t.target).addClass("active"),H(t.target).closest(".calendar").hasClass("right")&&(this.endDate=null,this.setStartDate(this.startDate.clone()),this.updateView())},formInputsBlurred:function(t){if(!this.endDate){var e=this.container.find('input[name="daterangepicker_end"]').val(),i=B(e,this.locale.format);i.isValid()&&(this.setEndDate(i),this.updateView())}},elementChanged:function(){if(this.element.is("input")&&this.element.val().length&&!(this.element.val().length<this.locale.format.length)){var t=this.element.val().split(this.locale.separator),e=null,i=null;2===t.length&&(e=B(t[0],this.locale.format),i=B(t[1],this.locale.format)),!this.singleDatePicker&&null!==e&&null!==i||(i=e=B(this.element.val(),this.locale.format)),e.isValid()&&i.isValid()&&(this.setStartDate(e),this.setEndDate(i),this.updateView())}},keydown:function(t){9!==t.keyCode&&13!==t.keyCode||this.hide()},updateElement:function(){this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},H.fn.daterangepicker=function(e,i){return this.each(function(){var t=H(this);t.data("daterangepicker")&&t.data("daterangepicker").remove(),t.data("daterangepicker",new n(t,e,i))}),this},n}),function(){var l,t,n,s,o={}.hasOwnProperty;function e(){return e.__super__.constructor.apply(this,arguments)}function i(t,e){this.form_field=t,this.options=null!=e?e:{},i.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}function r(){this.options_index=0,this.parsed=[]}r.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},r.prototype.add_group=function(t){var e,i,n,o,r,s;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),s=[],n=0,o=(r=t.childNodes).length;n<o;n++)i=r[n],s.push(this.add_option(i,e,t.disabled));return s},r.prototype.add_option=function(t,e,i){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:!0===i?i:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},r.prototype.escapeExpression=function(t){var e,i;return null==t||!1===t?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(i,function(t){return e[t]||"&amp;"})):t},(s=r).select_to_array=function(t){var e,i,n,o,r;for(i=new s,n=0,o=(r=t.childNodes).length;n<o;n++)e=r[n],i.add_node(e);return i.parsed},i.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},i.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||i.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||i.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||i.default_no_result_text},i.prototype.mouse_enter=function(){return this.mouse_on_container=!0},i.prototype.mouse_leave=function(){return this.mouse_on_container=!1},i.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},i.prototype.input_blur=function(){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},i.prototype.results_option_build=function(t){var e,i,n,o,r;for(e="",n=0,o=(r=this.results_data).length;n<o;n++)e+=(i=r[n]).group?this.result_add_group(i):this.result_add_option(i),(null!=t?t.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return e},i.prototype.result_add_option=function(t){var e,i;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),(i=document.createElement("li")).className=e.join(" "),i.style.cssText=t.style,i.setAttribute("data-option-array-index",t.array_index),i.innerHTML=t.search_text,this.outerHTML(i)):""},i.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&0<t.active_options?((e=document.createElement("li")).className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},i.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},i.prototype.reset_single_select_options=function(){var t,e,i,n,o;for(o=[],e=0,i=(n=this.results_data).length;e<i;e++)(t=n[e]).selected?o.push(t.selected=!1):o.push(void 0);return o},i.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},i.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},i.prototype.winnow_results=function(){var t,e,i,n,o,r,s,a,l,c,u,d;for(this.no_results_clear(),n=0,t=(r=this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l=new RegExp(t,"i"),i=this.get_search_regex(t),c=0,u=(d=this.results_data).length;c<u;c++)(e=d[c]).search_match=!1,o=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(0===(o=this.results_data[e.group_array_index]).active_options&&o.search_match&&(n+=1),o.active_options+=1),e.group&&!this.group_search||(e.search_text=e.group?e.label:e.text,e.search_match=this.search_string_match(e.search_text,i),e.search_match&&!e.group&&(n+=1),e.search_match?(r.length&&(s=e.search_text.search(l),a=e.search_text.substr(0,s+r.length)+"</em>"+e.search_text.substr(s+r.length),e.search_text=a.substr(0,s)+"<em>"+a.substr(s)),null!=o&&(o.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),n<1&&r.length?(this.update_results_content(""),this.no_results(r)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},i.prototype.get_search_regex=function(t){var e;return e=this.search_contains?"":"^",new RegExp(e+t,"i")},i.prototype.search_string_match=function(t,e){var i,n,o,r;if(e.test(t))return!0;if(this.enable_split_word_search&&(0<=t.indexOf(" ")||0===t.indexOf("["))&&(n=t.replace(/\[|\]/g,"").split(" ")).length)for(o=0,r=n.length;o<r;o++)if(i=n[o],e.test(i))return!0},i.prototype.choices_count=function(){var t,e,i;if(null!=this.selected_option_count)return this.selected_option_count;for(t=this.selected_option_count=0,e=(i=this.form_field.options).length;t<e;t++)i[t].selected&&(this.selected_option_count+=1);return this.selected_option_count},i.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},i.prototype.keyup_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&0<this.choices_count())return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},i.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},i.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},i.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected||!this.display_disabled_options&&t.disabled||t.empty)},i.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},i.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},i.prototype.search_results_touchend=function(t){return this.touch_started?this.search_results_mouseup(t):void 0},i.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:((e=document.createElement("div")).appendChild(t),e.innerHTML)},i.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?8<=document.documentMode:!(/iP(od|hone)/i.test(window.navigator.userAgent)||/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent))},i.default_multiple_text="Select Some Options",i.default_single_text="Select an Option",i.default_no_result_text="No results match",t=i,(l=jQuery).fn.extend({chosen:function(i){return t.browser_is_supported()?this.each(function(){var t,e;e=(t=l(this)).data("chosen"),"destroy"===i&&e instanceof n?e.destroy():e instanceof n||t.data("chosen",new n(this,i))}):this}}),function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.setup=function(){return this.form_field_jq=l(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},e.prototype.set_up_html=function(){var t,e;return(t=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),e={class:t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(e.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=l("<div />",e),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},e.prototype.register_observers=function(){var e=this;return this.container.bind("touchstart.chosen",function(t){e.container_mousedown(t)}),this.container.bind("touchend.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.search_results.bind("touchstart.chosen",function(t){e.search_results_touchstart(t)}),this.search_results.bind("touchmove.chosen",function(t){e.search_results_touchmove(t)}),this.search_results.bind("touchend.chosen",function(t){e.search_results_touchend(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.form_field_jq.bind("chosen:close.chosen",function(t){e.input_blur(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.search_field.bind("cut.chosen",function(t){e.clipboard_event_checker(t)}),this.search_field.bind("paste.chosen",function(t){e.clipboard_event_checker(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},e.prototype.destroy=function(){return l(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},e.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},e.prototype.container_mousedown=function(t){return this.is_disabled||(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null!=t&&l(t.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!t||l(t.target)[0]!==this.selected_item[0]&&!l(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),l(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},e.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},e.prototype.search_results_mousewheel=function(t){var e;return t.originalEvent&&(e=t.originalEvent.deltaY||-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},e.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},e.prototype.close_field=function(){return l(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},e.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},e.prototype.test_active_click=function(t){var e;return(e=l(t.target).closest(".chosen-container")).length&&this.container[0]===e[0]?this.active_field=!0:this.close_field()},e.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=s.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},e.prototype.result_do_highlight=function(t){var e,i,n,o;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),(n=parseInt(this.search_results.css("maxHeight"),10))+(o=this.search_results.scrollTop())<=(e=(i=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight()))return this.search_results.scrollTop(0<e-n?e-n:0);if(i<o)return this.search_results.scrollTop(i)}},e.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},e.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},e.prototype.update_results_content=function(t){return this.search_results.html(t)},e.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},e.prototype.set_tab_index=function(){var t;return this.form_field.tabIndex?(t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t):void 0},e.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=l("label[for='"+this.form_field.id+"']")),0<this.form_field_label.length?this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},e.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},e.prototype.search_results_mouseup=function(t){var e;return(e=l(t.target).hasClass("active-result")?l(t.target):l(t.target).parents(".active-result").first()).length?(this.result_highlight=e,this.result_select(t),this.search_field.focus()):void 0},e.prototype.search_results_mouseover=function(t){var e;return(e=l(t.target).hasClass("active-result")?l(t.target):l(t.target).parents(".active-result").first())?this.result_do_highlight(e):void 0},e.prototype.search_results_mouseout=function(t){return l(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},e.prototype.choice_build=function(t){var e,i,n=this;return e=l("<li />",{class:"search-choice"}).html("<span>"+t.html+"</span>"),t.disabled?e.addClass("search-choice-disabled"):((i=l("<a />",{class:"search-choice-close","data-option-array-index":t.array_index})).bind("click.chosen",function(t){return n.choice_destroy_link_click(t)}),e.append(i)),this.search_container.before(e)},e.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(l(t.target))},e.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&0<this.choices_count()&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},e.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},e.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},e.prototype.result_select=function(t){var e,i;return this.result_highlight?(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),(i=this.results_data[e[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),!this.is_multiple&&this.form_field.selectedIndex===this.current_selectedIndex||this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},e.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},e.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},e.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},e.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":l("<div/>").text(l.trim(this.search_field.val())).html()},e.prototype.winnow_results_set_highlight=function(){var t,e;return null!=(t=(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?e.first():this.search_results.find(".active-result").first())?this.result_do_highlight(t):void 0},e.prototype.no_results=function(t){var e;return(e=l('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(t),this.search_results.append(e),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},e.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},e.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},e.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(t.first()):(0<this.choices_count()&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},e.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last()).length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},e.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},e.prototype.keydown_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:this.results_showing&&t.preventDefault();break;case 32:this.disable_search&&t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},e.prototype.search_field_scale=function(){var t,e,i,n,o,r,s,a;if(this.is_multiple){for(n="position:absolute; left: -1000px; top: -1000px; display:none;",s=r=0,a=(o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;s<a;s++)n+=(i=o[s])+":"+this.search_field.css(i)+";";return(t=l("<div />",{style:n})).text(this.search_field.val()),l("body").append(t),r=t.width()+25,t.remove(),(e=this.container.outerWidth())-10<r&&(r=e-10),this.search_field.css({width:r+"px"})}},n=e}.call(this),function(){var e=[].slice;!function(a,o){"use strict";var r;function t(e,t){var i,n,o;null==t&&(t={}),this.$element=a(e),this.options=a.extend({},a.fn.bootstrapSwitch.defaults,{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")},t),this.prevOptions={},this.$wrapper=a("<div>",{class:(i=this,function(){var t;return(t=[""+i.options.baseClass].concat(i._getClasses(i.options.wrapperClass))).push(i.options.state?i.options.baseClass+"-on":i.options.baseClass+"-off"),null!=i.options.size&&t.push(i.options.baseClass+"-"+i.options.size),i.options.disabled&&t.push(i.options.baseClass+"-disabled"),i.options.readonly&&t.push(i.options.baseClass+"-readonly"),i.options.indeterminate&&t.push(i.options.baseClass+"-indeterminate"),i.options.inverse&&t.push(i.options.baseClass+"-inverse"),i.$element.attr("id")&&t.push(i.options.baseClass+"-id-"+i.$element.attr("id")),t.join(" ")}())}),this.$container=a("<div>",{class:this.options.baseClass+"-container"}),this.$on=a("<span>",{html:this.options.onText,class:this.options.baseClass+"-handle-on "+this.options.baseClass+"-"+this.options.onColor}),this.$off=a("<span>",{html:this.options.offText,class:this.options.baseClass+"-handle-off "+this.options.baseClass+"-"+this.options.offColor}),this.$label=a("<span>",{html:this.options.labelText,class:this.options.baseClass+"-label"}),this.$element.on("init.bootstrapSwitch",(n=this,function(){return n.options.onInit.apply(e,arguments)})),this.$element.on("switchChange.bootstrapSwitch",(o=this,function(t){if(!1===o.options.onSwitchChange.apply(e,arguments))return o.$element.is(":radio")?a("[name='"+o.$element.attr("name")+"']").trigger("previousState.bootstrapSwitch",!0):o.$element.trigger("previousState.bootstrapSwitch",!0)})),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._init(),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bootstrapSwitch",this.options.state)}(t.prototype._constructor=t).prototype.setPrevOptions=function(){return this.prevOptions=a.extend(!0,{},this.options)},t.prototype.state=function(t,e){return void 0===t?this.options.state:(this.options.disabled||this.options.readonly||this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")||(this.$element.is(":radio")?a("[name='"+this.$element.attr("name")+"']").trigger("setPreviousOptions.bootstrapSwitch"):this.$element.trigger("setPreviousOptions.bootstrapSwitch"),this.options.indeterminate&&this.indeterminate(!1),t=!!t,this.$element.prop("checked",t).trigger("change.bootstrapSwitch",e)),this.$element)},t.prototype.toggleState=function(t){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",t)},t.prototype.size=function(t){return void 0===t?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(this.options.baseClass+"-"+this.options.size),t&&this.$wrapper.addClass(this.options.baseClass+"-"+t),this._width(),this._containerPosition(),this.options.size=t,this.$element)},t.prototype.animate=function(t){return void 0===t?this.options.animate:(t=!!t)===this.options.animate?this.$element:this.toggleAnimate()},t.prototype.toggleAnimate=function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(this.options.baseClass+"-animate"),this.$element},t.prototype.disabled=function(t){return void 0===t?this.options.disabled:(t=!!t)===this.options.disabled?this.$element:this.toggleDisabled()},t.prototype.toggleDisabled=function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(this.options.baseClass+"-disabled"),this.$element},t.prototype.readonly=function(t){return void 0===t?this.options.readonly:(t=!!t)===this.options.readonly?this.$element:this.toggleReadonly()},t.prototype.toggleReadonly=function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(this.options.baseClass+"-readonly"),this.$element},t.prototype.indeterminate=function(t){return void 0===t?this.options.indeterminate:(t=!!t)===this.options.indeterminate?this.$element:this.toggleIndeterminate()},t.prototype.toggleIndeterminate=function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(this.options.baseClass+"-indeterminate"),this._containerPosition(),this.$element},t.prototype.inverse=function(t){return void 0===t?this.options.inverse:(t=!!t)===this.options.inverse?this.$element:this.toggleInverse()},t.prototype.toggleInverse=function(){var t,e;return this.$wrapper.toggleClass(this.options.baseClass+"-inverse"),e=this.$on.clone(!0),t=this.$off.clone(!0),this.$on.replaceWith(t),this.$off.replaceWith(e),this.$on=t,this.$off=e,this.options.inverse=!this.options.inverse,this.$element},t.prototype.onColor=function(t){var e;return e=this.options.onColor,void 0===t?e:(null!=e&&this.$on.removeClass(this.options.baseClass+"-"+e),this.$on.addClass(this.options.baseClass+"-"+t),this.options.onColor=t,this.$element)},t.prototype.offColor=function(t){var e;return e=this.options.offColor,void 0===t?e:(null!=e&&this.$off.removeClass(this.options.baseClass+"-"+e),this.$off.addClass(this.options.baseClass+"-"+t),this.options.offColor=t,this.$element)},t.prototype.onText=function(t){return void 0===t?this.options.onText:(this.$on.html(t),this._width(),this._containerPosition(),this.options.onText=t,this.$element)},t.prototype.offText=function(t){return void 0===t?this.options.offText:(this.$off.html(t),this._width(),this._containerPosition(),this.options.offText=t,this.$element)},t.prototype.labelText=function(t){return void 0===t?this.options.labelText:(this.$label.html(t),this._width(),this.options.labelText=t,this.$element)},t.prototype.handleWidth=function(t){return void 0===t?this.options.handleWidth:(this.options.handleWidth=t,this._width(),this._containerPosition(),this.$element)},t.prototype.labelWidth=function(t){return void 0===t?this.options.labelWidth:(this.options.labelWidth=t,this._width(),this._containerPosition(),this.$element)},t.prototype.baseClass=function(t){return this.options.baseClass},t.prototype.wrapperClass=function(t){return void 0===t?this.options.wrapperClass:(t=t||a.fn.bootstrapSwitch.defaults.wrapperClass,this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(t).join(" ")),this.options.wrapperClass=t,this.$element)},t.prototype.radioAllOff=function(t){return void 0===t?this.options.radioAllOff:((t=!!t)===this.options.radioAllOff||(this.options.radioAllOff=t),this.$element)},t.prototype.onInit=function(t){return void 0===t?this.options.onInit:(t=t||a.fn.bootstrapSwitch.defaults.onInit,this.options.onInit=t,this.$element)},t.prototype.onSwitchChange=function(t){return void 0===t?this.options.onSwitchChange:(t=t||a.fn.bootstrapSwitch.defaults.onSwitchChange,this.options.onSwitchChange=t,this.$element)},t.prototype.destroy=function(){var t;return(t=this.$element.closest("form")).length&&t.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element},t.prototype._width=function(){var t,i,n;return(t=this.$on.add(this.$off)).add(this.$label).css("width",""),i="auto"===this.options.handleWidth?Math.max(this.$on.width(),this.$off.width()):this.options.handleWidth,t.width(i),this.$label.width((n=this,function(t,e){return"auto"!==n.options.labelWidth?n.options.labelWidth:e<i?i:e})),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)},t.prototype._containerPosition=function(e,t){var i;if(null==e&&(e=this.options.state),this.$container.css("margin-left",(i=this,function(){var t;return t=[0,"-"+i._handleWidth+"px"],i.options.indeterminate?"-"+i._handleWidth/2+"px":e?i.options.inverse?t[1]:t[0]:i.options.inverse?t[0]:t[1]})),t)return setTimeout(function(){return t()},50)},t.prototype._init=function(){var t,e,i,n;return t=function(){return i.setPrevOptions(),i._width(),i._containerPosition(null,function(){if(i.options.animate)return i.$wrapper.addClass(i.options.baseClass+"-animate")})},(i=this).$wrapper.is(":visible")?t():e=o.setInterval((n=this,function(){if(n.$wrapper.is(":visible"))return t(),o.clearInterval(e)}),50)},t.prototype._elementHandlers=function(){return this.$element.on({"setPreviousOptions.bootstrapSwitch":(s=this,function(t){return s.setPrevOptions()}),"previousState.bootstrapSwitch":(r=this,function(t){return r.options=r.prevOptions,r.options.indeterminate&&r.$wrapper.addClass(r.options.baseClass+"-indeterminate"),r.$element.prop("checked",r.options.state).trigger("change.bootstrapSwitch",!0)}),"change.bootstrapSwitch":(o=this,function(t,e){var i;if(t.preventDefault(),t.stopImmediatePropagation(),i=o.$element.is(":checked"),o._containerPosition(i),i!==o.options.state)return o.options.state=i,o.$wrapper.toggleClass(o.options.baseClass+"-off").toggleClass(o.options.baseClass+"-on"),e?void 0:(o.$element.is(":radio")&&a("[name='"+o.$element.attr("name")+"']").not(o.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),o.$element.trigger("switchChange.bootstrapSwitch",[i]))}),"focus.bootstrapSwitch":(n=this,function(t){return t.preventDefault(),n.$wrapper.addClass(n.options.baseClass+"-focused")}),"blur.bootstrapSwitch":(i=this,function(t){return t.preventDefault(),i.$wrapper.removeClass(i.options.baseClass+"-focused")}),"keydown.bootstrapSwitch":(e=this,function(t){if(t.which&&!e.options.disabled&&!e.options.readonly)switch(t.which){case 37:return t.preventDefault(),t.stopImmediatePropagation(),e.state(!1);case 39:return t.preventDefault(),t.stopImmediatePropagation(),e.state(!0)}})});var e,i,n,o,r,s},t.prototype._handleHandlers=function(){var e,i;return this.$on.on("click.bootstrapSwitch",(e=this,function(t){return t.preventDefault(),t.stopPropagation(),e.state(!1),e.$element.trigger("focus.bootstrapSwitch")})),this.$off.on("click.bootstrapSwitch",(i=this,function(t){return t.preventDefault(),t.stopPropagation(),i.state(!0),i.$element.trigger("focus.bootstrapSwitch")}))},t.prototype._labelHandlers=function(){return this.$label.on({click:function(t){return t.stopPropagation()},"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":(o=this,function(t){if(!(o._dragStart||o.options.disabled||o.options.readonly))return t.preventDefault(),t.stopPropagation(),o._dragStart=(t.pageX||t.originalEvent.touches[0].pageX)-parseInt(o.$container.css("margin-left"),10),o.options.animate&&o.$wrapper.removeClass(o.options.baseClass+"-animate"),o.$element.trigger("focus.bootstrapSwitch")}),"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":(n=this,function(t){var e;if(null!=n._dragStart&&(t.preventDefault(),!((e=(t.pageX||t.originalEvent.touches[0].pageX)-n._dragStart)<-n._handleWidth||0<e)))return n._dragEnd=e,n.$container.css("margin-left",n._dragEnd+"px")}),"mouseup.bootstrapSwitch touchend.bootstrapSwitch":(i=this,function(t){var e;if(i._dragStart)return t.preventDefault(),i.options.animate&&i.$wrapper.addClass(i.options.baseClass+"-animate"),i._dragEnd?(e=i._dragEnd>-i._handleWidth/2,i._dragEnd=!1,i.state(i.options.inverse?!e:e)):i.state(!i.options.state),i._dragStart=!1}),"mouseleave.bootstrapSwitch":(e=this,function(t){return e.$label.trigger("mouseup.bootstrapSwitch")})});var e,i,n,o},t.prototype._externalLabelHandler=function(){var e,i;return(e=this.$element.closest("label")).on("click",(i=this,function(t){if(t.preventDefault(),t.stopImmediatePropagation(),t.target===e[0])return i.toggleState()}))},t.prototype._formHandler=function(){var t;if(!(t=this.$element.closest("form")).data("bootstrap-switch"))return t.on("reset.bootstrapSwitch",function(){return o.setTimeout(function(){return t.find("input").filter(function(){return a(this).data("bootstrap-switch")}).each(function(){return a(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)},t.prototype._getClasses=function(t){var e,i,n,o;if(!a.isArray(t))return[this.options.baseClass+"-"+t];for(i=[],n=0,o=t.length;n<o;n++)e=t[n],i.push(this.options.baseClass+"-"+e);return i},r=t,a.fn.bootstrapSwitch=function(){var i,n,o;return n=arguments[0],i=2<=arguments.length?e.call(arguments,1):[],(o=this).each(function(){var t,e;if((e=(t=a(this)).data("bootstrap-switch"))||t.data("bootstrap-switch",e=new r(this,n)),"string"==typeof n)return o=e[n].apply(e,i)}),o},a.fn.bootstrapSwitch.Constructor=r,a.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp;",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}(window.jQuery,window)}.call(this),function(y){"use strict";function b(t){var e=arguments,i=!0,n=1;return t=t.replace(/%s/g,function(){var t=e[n++];return void 0===t?(i=!1,""):t}),i?t:""}function n(t){for(var e=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],i=0;i<e.length;i++)t=t.replace(e[i].letters,e[i].base);return t}function a(e,t){var i=this,n=e.attr("name")||t.name||"";this.options=t,this.$el=e.hide(),this.$label=this.$el.closest("label"),0===this.$label.length&&this.$el.attr("id")&&(this.$label=y(b('label[for="%s"]',this.$el.attr("id").replace(/:/g,"\\:")))),this.$parent=y(b('<div class="ms-parent %s" %s/>',e.attr("class")||"",b('title="%s"',e.attr("title")))),this.$choice=y(b(['<button type="button" class="ms-choice">','<span class="placeholder">%s</span>',"<div></div>","</button>"].join(""),this.options.placeholder)),this.$drop=y(b('<div class="ms-drop %s"%s></div>',this.options.position,b(' style="width: %s"',this.options.dropWidth))),this.$el.after(this.$parent),this.$parent.append(this.$choice),this.$parent.append(this.$drop),this.$el.prop("disabled")&&this.$choice.addClass("disabled"),this.$parent.css("width",this.options.width||this.$el.css("width")||this.$el.outerWidth()+20),this.selectAllName='data-name="selectAll'+n+'"',this.selectGroupName='data-name="selectGroup'+n+'"',this.selectItemName='data-name="selectItem'+n+'"',this.options.keepOpen||y(document).click(function(t){y(t.target)[0]!==i.$choice[0]&&y(t.target).parents(".ms-choice")[0]!==i.$choice[0]&&(y(t.target)[0]===i.$drop[0]||y(t.target).parents(".ms-drop")[0]!==i.$drop[0]&&t.target!==e[0])&&i.options.isOpen&&i.close()})}a.prototype={constructor:a,init:function(){var i=this,n=y("<ul></ul>");this.$drop.html(""),this.options.filter&&this.$drop.append(['<div class="ms-search">','<input type="text" autocomplete="off" autocorrect="off" autocapitilize="off" spellcheck="false">',"</div>"].join("")),this.options.selectAll&&!this.options.single&&n.append(['<li class="ms-select-all">',"<label>",b('<input type="checkbox" %s /> ',this.selectAllName),this.options.selectAllDelimiter[0],this.options.selectAllText,this.options.selectAllDelimiter[1],"</label>","</li>"].join("")),y.each(this.$el.children(),function(t,e){n.append(i.optionToHtml(t,e))}),n.append(b('<li class="ms-no-results">%s</li>',this.options.noMatchesFound)),this.$drop.append(n),this.$drop.find("ul").css("max-height",this.options.maxHeight+"px"),this.$drop.find(".multiple").css("width",this.options.multipleWidth+"px"),this.$searchInput=this.$drop.find(".ms-search input"),this.$selectAll=this.$drop.find("input["+this.selectAllName+"]"),this.$selectGroups=this.$drop.find("input["+this.selectGroupName+"]"),this.$selectItems=this.$drop.find("input["+this.selectItemName+"]:enabled"),this.$disableItems=this.$drop.find("input["+this.selectItemName+"]:disabled"),this.$noResults=this.$drop.find(".ms-no-results"),this.events(),this.updateSelectAll(!0),this.update(!0),this.options.isOpen&&this.open()},optionToHtml:function(t,e,i,n){var o,r=this,s=y(e),a=s.attr("class")||"",l=b('title="%s"',s.attr("title")),c=this.options.multiple?"multiple":"",u=this.options.single?"radio":"checkbox";if(s.is("option")){var d,h=s.val(),p=r.options.textTemplate(s),f=s.prop("selected"),g=b('style="%s"',this.options.styler(h));return o=n||s.prop("disabled"),(d=y([b('<li class="%s %s" %s %s>',c,a,l,g),b('<label class="%s">',o?"disabled":""),b('<input type="%s" %s%s%s%s>',u,this.selectItemName,f?' checked="checked"':"",o?' disabled="disabled"':"",b(' data-group="%s"',i)),b("<span>%s</span>",p),"</label>","</li>"].join(""))).find("input").val(h),d}if(s.is("optgroup")){var m=r.options.labelTemplate(s),v=y("<div/>");return i="group_"+t,o=s.prop("disabled"),v.append(['<li class="group">',b('<label class="optgroup %s" data-group="%s">',o?"disabled":"",i),this.options.hideOptgroupCheckboxes||this.options.single?"":b('<input type="checkbox" %s %s>',this.selectGroupName,o?'disabled="disabled"':""),m,"</label>","</li>"].join("")),y.each(s.children(),function(t,e){v.append(r.optionToHtml(t,e,i,o))}),v.html()}},events:function(){function e(t){t.preventDefault(),n[n.options.isOpen?"close":"open"]()}var n=this;this.$label&&this.$label.off("click").on("click",function(t){"label"===t.target.nodeName.toLowerCase()&&t.target===this&&(e(t),n.options.filter&&n.options.isOpen||n.focus(),t.stopPropagation())}),this.$choice.off("click").on("click",e).off("focus").on("focus",this.options.onFocus).off("blur").on("blur",this.options.onBlur),this.$parent.off("keydown").on("keydown",function(t){switch(t.which){case 27:n.close(),n.$choice.focus()}}),this.$searchInput.off("keydown").on("keydown",function(t){9===t.keyCode&&t.shiftKey&&n.close()}).off("keyup").on("keyup",function(t){if(n.options.filterAcceptOnEnter&&(13===t.which||32==t.which)&&n.$searchInput.val())return n.$selectAll.click(),n.close(),void n.focus();n.filter()}),this.$selectAll.off("click").on("click",function(){var t=y(this).prop("checked"),e=n.$selectItems.filter(":visible");e.length===n.$selectItems.length?n[t?"checkAll":"uncheckAll"]():(n.$selectGroups.prop("checked",t),e.prop("checked",t),n.options[t?"onCheckAll":"onUncheckAll"](),n.update())}),this.$selectGroups.off("click").on("click",function(){var t=y(this).parent().attr("data-group"),e=n.$selectItems.filter(":visible").filter(b('[data-group="%s"]',t)),i=e.length!==e.filter(":checked").length;e.prop("checked",i),n.updateSelectAll(),n.update(),n.options.onOptgroupClick({label:y(this).parent().text(),checked:i,children:e.get(),instance:n})}),this.$selectItems.off("click").on("click",function(){if(n.updateSelectAll(),n.update(),n.updateOptGroupSelect(),n.options.onClick({label:y(this).parent().text(),value:y(this).val(),checked:y(this).prop("checked"),instance:n}),n.options.single&&n.options.isOpen&&!n.options.keepOpen&&n.close(),n.options.single){var t=y(this).val();n.$selectItems.filter(function(){return y(this).val()!==t}).each(function(){y(this).prop("checked",!1)}),n.update()}})},open:function(){if(!this.$choice.hasClass("disabled")){if(this.options.isOpen=!0,this.$choice.find(">div").addClass("open"),this.$drop[this.animateMethod("show")](),this.$selectAll.parent().show(),this.$noResults.hide(),this.$el.children().length||(this.$selectAll.parent().hide(),this.$noResults.show()),this.options.container){var t=this.$drop.offset();this.$drop.appendTo(y(this.options.container)),this.$drop.offset({top:t.top,left:t.left})}this.options.filter&&(this.$searchInput.val(""),this.$searchInput.focus(),this.filter()),this.options.onOpen()}},close:function(){this.options.isOpen=!1,this.$choice.find(">div").removeClass("open"),this.$drop[this.animateMethod("hide")](),this.options.container&&(this.$parent.append(this.$drop),this.$drop.css({top:"auto",left:"auto"})),this.options.onClose()},animateMethod:function(t){return{show:{fade:"fadeIn",slide:"slideDown"},hide:{fade:"fadeOut",slide:"slideUp"}}[t][this.options.animate]||t},update:function(t){var e=this.options.displayValues?this.getSelects():this.getSelects("text"),i=this.$choice.find(">span"),n=e.length;0===n?i.addClass("placeholder").html(this.options.placeholder):this.options.allSelected&&n===this.$selectItems.length+this.$disableItems.length?i.removeClass("placeholder").html(this.options.allSelected):this.options.ellipsis&&n>this.options.minimumCountSelected?i.removeClass("placeholder").text(e.slice(0,this.options.minimumCountSelected).join(this.options.delimiter)+"..."):this.options.countSelected&&n>this.options.minimumCountSelected?i.removeClass("placeholder").html(this.options.countSelected.replace("#",e.length).replace("%",this.$selectItems.length+this.$disableItems.length)):i.removeClass("placeholder").text(e.join(this.options.delimiter)),this.options.addTitle&&i.prop("title",this.getSelects("text")),this.$el.val(this.getSelects()).trigger("change"),this.$drop.find("li").removeClass("selected"),this.$drop.find("input:checked").each(function(){y(this).parents("li").first().addClass("selected")}),t||this.$el.trigger("change")},updateSelectAll:function(t){var e=this.$selectItems;t||(e=e.filter(":visible")),this.$selectAll.prop("checked",e.length&&e.length===e.filter(":checked").length),!t&&this.$selectAll.prop("checked")&&this.options.onCheckAll()},updateOptGroupSelect:function(){var o=this.$selectItems.filter(":visible");y.each(this.$selectGroups,function(t,e){var i=y(e).parent().attr("data-group"),n=o.filter(b('[data-group="%s"]',i));y(e).prop("checked",n.length&&n.length===n.filter(":checked").length)})},getSelects:function(t){var s=this,a=[],e=[];return this.$drop.find(b("input[%s]:checked",this.selectItemName)).each(function(){a.push(y(this).parents("li").first().text()),e.push(y(this).val())}),"text"===t&&this.$selectGroups.length&&(a=[],this.$selectGroups.each(function(){var t=[],e=y.trim(y(this).parent().text()),i=y(this).parent().data("group"),n=s.$drop.find(b('[%s][data-group="%s"]',s.selectItemName,i)),o=n.filter(":checked");if(o.length){if(t.push("["),t.push(e),n.length>o.length){var r=[];o.each(function(){r.push(y(this).parent().text())}),t.push(": "+r.join(", "))}t.push("]"),a.push(t.join(""))}})),"text"===t?a:e},setSelects:function(t){var o=this;this.$selectItems.prop("checked",!1),this.$disableItems.prop("checked",!1),y.each(t,function(t,e){o.$selectItems.filter(b('[value="%s"]',e)).prop("checked",!0),o.$disableItems.filter(b('[value="%s"]',e)).prop("checked",!0)}),this.$selectAll.prop("checked",this.$selectItems.length===this.$selectItems.filter(":checked").length+this.$disableItems.filter(":checked").length),y.each(o.$selectGroups,function(t,e){var i=y(e).parent().attr("data-group"),n=o.$selectItems.filter('[data-group="'+i+'"]');y(e).prop("checked",n.length&&n.length===n.filter(":checked").length)}),this.update()},enable:function(){this.$choice.removeClass("disabled")},disable:function(){this.$choice.addClass("disabled")},checkAll:function(){this.$selectItems.prop("checked",!0),this.$selectGroups.prop("checked",!0),this.$selectAll.prop("checked",!0),this.update(),this.options.onCheckAll()},uncheckAll:function(){this.$selectItems.prop("checked",!1),this.$selectGroups.prop("checked",!1),this.$selectAll.prop("checked",!1),this.update(),this.options.onUncheckAll()},focus:function(){this.$choice.focus(),this.options.onFocus()},blur:function(){this.$choice.blur(),this.options.onBlur()},refresh:function(){this.init()},filter:function(){var i=this,e=y.trim(this.$searchInput.val()).toLowerCase();0===e.length?(this.$selectAll.parent().show(),this.$selectItems.parent().show(),this.$disableItems.parent().show(),this.$selectGroups.parent().show(),this.$noResults.hide()):(this.$selectItems.each(function(){var t=y(this).parent();t[n(t.text().toLowerCase()).indexOf(n(e))<0?"hide":"show"]()}),this.$disableItems.parent().hide(),this.$selectGroups.each(function(){var t=y(this).parent(),e=t.attr("data-group");t[i.$selectItems.filter(":visible").filter(b('[data-group="%s"]',e)).length?"show":"hide"]()}),this.$selectItems.parent().filter(":visible").length?(this.$selectAll.parent().show(),this.$noResults.hide()):(this.$selectAll.parent().hide(),this.$noResults.show())),this.updateOptGroupSelect(),this.updateSelectAll(),this.options.onFilter(e)}},y.fn.multipleSelect=function(){var n,o=arguments[0],r=arguments,s=["getSelects","setSelects","enable","disable","open","close","checkAll","uncheckAll","focus","blur","refresh","close"];return this.each(function(){var t=y(this),e=t.data("multipleSelect"),i=y.extend({},y.fn.multipleSelect.defaults,t.data(),"object"==typeof o&&o);if(e||(e=new a(t,i),t.data("multipleSelect",e)),"string"==typeof o){if(y.inArray(o,s)<0)throw"Unknown method: "+o;n=e[o](r[1])}else e.init(),r[1]&&(n=e[r[1]].apply(e,[].slice.call(r,2)))}),void 0!==n?n:this},y.fn.multipleSelect.defaults={name:"",isOpen:!1,placeholder:"",selectAll:!0,selectAllDelimiter:["[","]"],minimumCountSelected:3,ellipsis:!1,multiple:!1,multipleWidth:80,single:!1,filter:!1,width:void 0,dropWidth:void 0,maxHeight:250,container:null,position:"bottom",keepOpen:!1,animate:"none",displayValues:!1,delimiter:", ",addTitle:!1,filterAcceptOnEnter:!1,hideOptgroupCheckboxes:!1,selectAllText:"Select all",allSelected:"All selected",countSelected:"# of % selected",noMatchesFound:"No matches found",styler:function(){return!1},textTemplate:function(t){return t.html()},labelTemplate:function(t){return t.attr("label")},onOpen:function(){return!1},onClose:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onFocus:function(){return!1},onBlur:function(){return!1},onOptgroupClick:function(){return!1},onClick:function(){return!1},onFilter:function(){return!1}}}(jQuery),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):t(jQuery)}(function(Rt,kt){"use strict";var t,St={beforeShow:i,move:i,change:i,show:i,hide:i,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},At=[],Mt=!!/msie/i.exec(window.navigator.userAgent),Nt=((t=document.createElement("div").style).cssText="background-color:rgba(0,0,0,.5)",e(t.backgroundColor,"rgba")||e(t.backgroundColor,"hsla")),Kt=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),Lt=function(){var t="";if(Mt)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function e(t,e){return!!~(""+t).indexOf(e)}function Pt(t,e,i,n){for(var o=[],r=0;r<t.length;r++){var s=t[r];if(s){var a=tinycolor(s),l=a.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";l+=tinycolor.equals(e,s)?" sp-thumb-active":"";var c=a.toString(n.preferredFormat||"rgb"),u=Nt?"background-color:"+a.toRgbString():"filter:"+a.toFilter();o.push('<span title="'+c+'" data-color="'+a.toRgbString()+'" class="'+l+'"><span class="sp-thumb-inner" style="'+u+';" /></span>')}else{o.push(Rt("<div />").append(Rt('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",n.noColorSelectedText)).html())}}return"<div class='sp-cf "+i+"'>"+o.join("")+"</div>"}function r(t,e){var c=function(t,e){var i=Rt.extend({},St,t);return i.callbacks={move:Bt(i.move,e),change:Bt(i.change,e),show:Bt(i.show,e),hide:Bt(i.hide,e),beforeShow:Bt(i.beforeShow,e)},i}(e,t),n=c.flat,i=c.showSelectionPalette,o=c.localStorageKey,r=c.theme,s=c.callbacks,a=function(i,n,o){var r;return function(){var t=this,e=arguments;o&&clearTimeout(r),!o&&r||(r=setTimeout(function(){r=null,i.apply(t,e)},n))}}(Dt,10),l=!1,u=!1,d=0,h=0,p=0,f=0,g=0,m=0,v=0,y=0,b=0,_=0,E=1,w=[],C=[],T={},x=c.selectionPalette.slice(0),D=c.maxSelectionSize,I="sp-dragging",O=null,R=t.ownerDocument,k=(R.body,Rt(t)),S=!1,A=Rt(Lt,R).addClass(r),M=A.find(".sp-picker-container"),N=A.find(".sp-color"),K=A.find(".sp-dragger"),L=A.find(".sp-hue"),P=A.find(".sp-slider"),F=A.find(".sp-alpha-inner"),B=A.find(".sp-alpha"),H=A.find(".sp-alpha-handle"),z=A.find(".sp-input"),$=A.find(".sp-palette"),V=A.find(".sp-initial"),j=A.find(".sp-cancel"),W=A.find(".sp-clear"),G=A.find(".sp-choose"),q=A.find(".sp-palette-toggle"),U=k.is("input"),Y=U&&"color"===k.attr("type")&&zt(),X=U&&!n,Z=X?Rt(Kt).addClass(r).addClass(c.className).addClass(c.replacerClassName):Rt([]),Q=X?Z:k,J=Z.find(".sp-preview-inner"),tt=c.color||U&&k.val(),et=!1,it=c.preferredFormat,nt=!c.showButtons||c.clickoutFiresChange,ot=!tt,rt=c.allowEmpty&&!Y;function st(){if(c.showPaletteOnly&&(c.showPalette=!0),q.text(c.showPaletteOnly?c.togglePaletteMoreText:c.togglePaletteLessText),c.palette){w=c.palette.slice(0),C=Rt.isArray(w[0])?w:[w],T={};for(var t=0;t<C.length;t++)for(var e=0;e<C[t].length;e++){var i=tinycolor(C[t][e]).toRgbString();T[i]=!0}}A.toggleClass("sp-flat",n),A.toggleClass("sp-input-disabled",!c.showInput),A.toggleClass("sp-alpha-enabled",c.showAlpha),A.toggleClass("sp-clear-enabled",rt),A.toggleClass("sp-buttons-disabled",!c.showButtons),A.toggleClass("sp-palette-buttons-disabled",!c.togglePaletteOnly),A.toggleClass("sp-palette-disabled",!c.showPalette),A.toggleClass("sp-palette-only",c.showPaletteOnly),A.toggleClass("sp-initial-disabled",!c.showInitial),A.addClass(c.className).addClass(c.containerClassName),Dt()}function at(){if(o&&window.localStorage){try{var t=window.localStorage[o].split(",#");1<t.length&&(delete window.localStorage[o],Rt.each(t,function(t,e){lt(e)}))}catch(t){}try{x=window.localStorage[o].split(";")}catch(t){}}}function lt(t){if(i){var e=tinycolor(t).toRgbString();if(!T[e]&&-1===Rt.inArray(e,x))for(x.push(e);x.length>D;)x.shift();if(o&&window.localStorage)try{window.localStorage[o]=x.join(";")}catch(t){}}}function ct(){var i=Et(),t=Rt.map(C,function(t,e){return Pt(t,i,"sp-palette-row sp-palette-row-"+e,c)});at(),x&&t.push(Pt(function(){var t=[];if(c.showPalette)for(var e=0;e<x.length;e++){var i=tinycolor(x[e]).toRgbString();T[i]||t.push(x[e])}return t.reverse().slice(0,c.maxSelectionSize)}(),i,"sp-palette-row sp-palette-row-selection",c)),$.html(t.join(""))}function ut(){if(c.showInitial){var t=et,e=Et();V.html(Pt([t,e],e,"sp-palette-row-initial",c))}}function dt(){(h<=0||d<=0||f<=0)&&Dt(),u=!0,A.addClass(I),O=null,k.trigger("dragstart.spectrum",[Et()])}function ht(){u=!1,A.removeClass(I),k.trigger("dragstop.spectrum",[Et()])}function pt(){var t=z.val();if(null!==t&&""!==t||!rt){var e=tinycolor(t);e.isValid()?(_t(e),xt(!0)):z.addClass("sp-validation-error")}else _t(null),xt(!0)}function ft(){l?yt():gt()}function gt(){var t=Rt.Event("beforeShow.spectrum");l?Dt():(k.trigger(t,[Et()]),!1===s.beforeShow(Et())||t.isDefaultPrevented()||(function(){for(var t=0;t<At.length;t++)At[t]&&At[t].hide()}(),l=!0,Rt(R).bind("keydown.spectrum",mt),Rt(R).bind("click.spectrum",vt),Rt(window).bind("resize.spectrum",a),Z.addClass("sp-active"),A.removeClass("sp-hidden"),Dt(),Ct(),et=Et(),ut(),s.show(et),k.trigger("show.spectrum",[et])))}function mt(t){27===t.keyCode&&yt()}function vt(t){2!=t.button&&(u||(nt?xt(!0):bt(),yt()))}function yt(){l&&!n&&(l=!1,Rt(R).unbind("keydown.spectrum",mt),Rt(R).unbind("click.spectrum",vt),Rt(window).unbind("resize.spectrum",a),Z.removeClass("sp-active"),A.addClass("sp-hidden"),s.hide(Et()),k.trigger("hide.spectrum",[Et()]))}function bt(){_t(et,!0)}function _t(t,e){var i,n;tinycolor.equals(t,Et())?Ct():(!t&&rt?ot=!0:(ot=!1,n=(i=tinycolor(t)).toHsv(),y=n.h%360/360,b=n.s,_=n.v,E=n.a),Ct(),i&&i.isValid()&&!e&&(it=c.preferredFormat||i.getFormat()))}function Et(t){return t=t||{},rt&&ot?null:tinycolor.fromRatio({h:y,s:b,v:_,a:Math.round(100*E)/100},{format:t.format||it})}function wt(){Ct(),s.move(Et()),k.trigger("move.spectrum",[Et()])}function Ct(){z.removeClass("sp-validation-error"),Tt();var t=tinycolor.fromRatio({h:y,s:1,v:1});N.css("background-color",t.toHexString());var e=it;E<1&&(0!==E||"name"!==e)&&("hex"!==e&&"hex3"!==e&&"hex6"!==e&&"name"!==e||(e="rgb"));var i=Et({format:e}),n="";if(J.removeClass("sp-clear-display"),J.css("background-color","transparent"),!i&&rt)J.addClass("sp-clear-display");else{var o=i.toHexString(),r=i.toRgbString();if(Nt||1===i.alpha?J.css("background-color",r):(J.css("background-color","transparent"),J.css("filter",i.toFilter())),c.showAlpha){var s=i.toRgb();s.a=0;var a=tinycolor(s).toRgbString(),l="linear-gradient(left, "+a+", "+o+")";Mt?F.css("filter",tinycolor(a).toFilter({gradientType:1},o)):(F.css("background","-webkit-"+l),F.css("background","-moz-"+l),F.css("background","-ms-"+l),F.css("background","linear-gradient(to right, "+a+", "+o+")"))}n=i.toString(e)}c.showInput&&z.val(n),c.showPalette&&ct(),ut()}function Tt(){var t=b,e=_;if(rt&&ot)H.hide(),P.hide(),K.hide();else{H.show(),P.show(),K.show();var i=t*d,n=h-e*h;i=Math.max(-p,Math.min(d-p,i-p)),n=Math.max(-p,Math.min(h-p,n-p)),K.css({top:n+"px",left:i+"px"});var o=E*g;H.css({left:o-m/2+"px"});var r=y*f;P.css({top:r-v+"px"})}}function xt(t){var e=Et(),i="",n=!tinycolor.equals(e,et);e&&(i=e.toString(it),lt(e)),U&&k.val(i),t&&n&&(s.change(e),k.trigger("change",[e]))}function Dt(){l&&(d=N.width(),h=N.height(),p=K.height(),L.width(),f=L.height(),v=P.height(),g=B.width(),m=H.width(),n||(A.css("position","absolute"),c.offset?A.offset(c.offset):A.offset(function(t,e){var i=t.outerWidth(),n=t.outerHeight(),o=e.outerHeight(),r=t[0].ownerDocument,s=r.documentElement,a=s.clientWidth+Rt(r).scrollLeft(),l=s.clientHeight+Rt(r).scrollTop(),c=e.offset();return c.top+=o,c.left-=Math.min(c.left,c.left+i>a&&i<a?Math.abs(c.left+i-a):0),c.top-=Math.min(c.top,c.top+n>l&&n<l?Math.abs(n+o-0):0),c}(A,Q))),Tt(),c.showPalette&&ct(),k.trigger("reflow.spectrum"))}function It(){yt(),S=!0,k.attr("disabled",!0),Q.addClass("sp-disabled")}!function(){if(Mt&&A.find("*:not(input)").attr("unselectable","on"),st(),X&&k.after(Z).hide(),rt||W.hide(),n)k.after(A).hide();else{var t="parent"===c.appendTo?k.parent():Rt(c.appendTo);1!==t.length&&(t=Rt("body")),t.append(A)}function e(t){return t.data&&t.data.ignore?(_t(Rt(t.target).closest(".sp-thumb-el").data("color")),wt()):(_t(Rt(t.target).closest(".sp-thumb-el").data("color")),wt(),xt(!0),c.hideAfterPaletteSelect&&yt()),!1}at(),Q.bind("click.spectrum touchstart.spectrum",function(t){S||ft(),t.stopPropagation(),Rt(t.target).is("input")||t.preventDefault()}),!k.is(":disabled")&&!0!==c.disabled||It(),A.click(Ft),z.change(pt),z.bind("paste",function(){setTimeout(pt,1)}),z.keydown(function(t){13==t.keyCode&&pt()}),j.text(c.cancelText),j.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),bt(),yt()}),W.attr("title",c.clearText),W.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),ot=!0,wt(),n&&xt(!0)}),G.text(c.chooseText),G.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),Mt&&z.is(":focus")&&z.trigger("change"),z.hasClass("sp-validation-error")||(xt(!0),yt())}),q.text(c.showPaletteOnly?c.togglePaletteMoreText:c.togglePaletteLessText),q.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),c.showPaletteOnly=!c.showPaletteOnly,c.showPaletteOnly||n||A.css("left","-="+(M.outerWidth(!0)+5)),st()}),Ht(B,function(t,e,i){E=t/g,ot=!1,i.shiftKey&&(E=Math.round(10*E)/10),wt()},dt,ht),Ht(L,function(t,e){y=parseFloat(e/f),ot=!1,c.showAlpha||(E=1),wt()},dt,ht),Ht(N,function(t,e,i){if(i.shiftKey){if(!O){var n=b*d,o=h-_*h,r=Math.abs(t-n)>Math.abs(e-o);O=r?"x":"y"}}else O=null;var s=!O||"y"===O;O&&"x"!==O||(b=parseFloat(t/d)),s&&(_=parseFloat((h-e)/h)),ot=!1,c.showAlpha||(E=1),wt()},dt,ht),tt?(_t(tt),Ct(),it=c.preferredFormat||tinycolor(tt).format,lt(tt)):Ct(),n&&gt();var i=Mt?"mousedown.spectrum":"click.spectrum touchstart.spectrum";$.delegate(".sp-thumb-el",i,e),V.delegate(".sp-thumb-el:nth-child(1)",i,{ignore:!0},e)}();var Ot={show:gt,hide:yt,toggle:ft,reflow:Dt,option:function(t,e){return t===kt?Rt.extend({},c):e===kt?c[t]:(c[t]=e,"preferredFormat"===t&&(it=c.preferredFormat),void st())},enable:function(){S=!1,k.attr("disabled",!1),Q.removeClass("sp-disabled")},disable:It,offset:function(t){c.offset=t,Dt()},set:function(t){_t(t),xt()},get:Et,destroy:function(){k.show(),Q.unbind("click.spectrum touchstart.spectrum"),A.remove(),Z.remove(),At[Ot.id]=null},container:A};return Ot.id=At.push(Ot)-1,Ot}function i(){}function Ft(t){t.stopPropagation()}function Bt(t,e){var i=Array.prototype.slice,n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}function Ht(s,a,e,t){a=a||function(){},e=e||function(){},t=t||function(){};var l=document,c=!1,u={},d=0,h=0,p="ontouchstart"in window,i={};function f(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function n(t){if(c){if(Mt&&l.documentMode<9&&!t.button)return g();var e=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],i=e&&e.pageX||t.pageX,n=e&&e.pageY||t.pageY,o=Math.max(0,Math.min(i-u.left,h)),r=Math.max(0,Math.min(n-u.top,d));p&&f(t),a.apply(s,[o,r,t])}}function g(){c&&(Rt(l).unbind(i),Rt(l.body).removeClass("sp-dragging"),setTimeout(function(){t.apply(s,arguments)},0)),c=!1}i.selectstart=f,i.dragstart=f,i["touchmove mousemove"]=n,i["touchend mouseup"]=g,Rt(s).bind("touchstart mousedown",function(t){(t.which?3==t.which:2==t.button)||c||!1!==e.apply(s,arguments)&&(c=!0,d=Rt(s).height(),h=Rt(s).width(),u=Rt(s).offset(),Rt(l).bind(i),Rt(l.body).addClass("sp-dragging"),n(t),f(t))})}function zt(){return Rt.fn.spectrum.inputTypeColorSupport()}var s="spectrum.id";Rt.fn.spectrum=function(i,t){if("string"!=typeof i)return this.spectrum("destroy").each(function(){var t=r(this,Rt.extend({},i,Rt(this).data()));Rt(this).data(s,t.id)});var n=this,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=At[Rt(this).data(s)];if(t){var e=t[i];if(!e)throw new Error("Spectrum: no such method: '"+i+"'");"get"==i?n=t.get():"container"==i?n=t.container:"option"==i?n=t.option.apply(t,o):"destroy"==i?(t.destroy(),Rt(this).removeData(s)):e.apply(t,o)}}),n},Rt.fn.spectrum.load=!0,Rt.fn.spectrum.loadOpts={},Rt.fn.spectrum.draggable=Ht,Rt.fn.spectrum.defaults=St,Rt.fn.spectrum.inputTypeColorSupport=function t(){if(void 0===t._cachedResult){var e=Rt("<input type='color'/>")[0];t._cachedResult="color"===e.type&&""!==e.value}return t._cachedResult},Rt.spectrum={},Rt.spectrum.localization={},Rt.spectrum.palettes={},Rt.fn.spectrum.processNativeColorInputs=function(){var t=Rt("input[type=color]");t.length&&!zt()&&t.spectrum({preferredFormat:"hex6"})},function(){var r=/^[\s,#]+/,s=/\s+$/,n=0,c=Math,a=c.round,u=c.min,d=c.max,t=c.random,h=function(t,e){if(e=e||{},(t=t||"")instanceof h)return t;if(!(this instanceof h))return new h(t,e);var i=function(t){var e={r:0,g:0,b:0},i=1,n=!1,o=!1;"string"==typeof t&&(t=function(t){t=t.replace(r,"").replace(s,"").toLowerCase();var e,i=!1;if(D[t])t=D[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=P.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=P.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=P.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=P.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=P.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=P.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=P.hex8.exec(t))return{a:function(t){return S(t)/255}(e[1]),r:S(e[2]),g:S(e[3]),b:S(e[4]),format:i?"name":"hex8"};if(e=P.hex6.exec(t))return{r:S(e[1]),g:S(e[2]),b:S(e[3]),format:i?"name":"hex"};if(e=P.hex3.exec(t))return{r:S(e[1]+""+e[1]),g:S(e[2]+""+e[2]),b:S(e[3]+""+e[3]),format:i?"name":"hex"};return!1}(t));"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=function(t,e,i){return{r:255*R(t,255),g:255*R(e,255),b:255*R(i,255)}}(t.r,t.g,t.b),n=!0,o="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=M(t.s),t.v=M(t.v),e=function(t,e,i){t=6*R(t,360),e=R(e,100),i=R(i,100);var n=c.floor(t),o=t-n,r=i*(1-e),s=i*(1-o*e),a=i*(1-(1-o)*e),l=n%6;return{r:255*[i,s,r,r,a,i][l],g:255*[a,i,i,s,r,r][l],b:255*[r,r,a,i,i,s][l]}}(t.h,t.s,t.v),n=!0,o="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=M(t.s),t.l=M(t.l),e=function(t,e,i){var n,o,r;function s(t,e,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=R(t,360),e=R(e,100),i=R(i,100),0===e)n=o=r=i;else{var a=i<.5?i*(1+e):i+e-i*e,l=2*i-a;n=s(l,a,t+1/3),o=s(l,a,t),r=s(l,a,t-1/3)}return{r:255*n,g:255*o,b:255*r}}(t.h,t.s,t.l),n=!0,o="hsl"),t.hasOwnProperty("a")&&(i=t.a));return i=O(i),{ok:n,format:t.format||o,r:u(255,d(e.r,0)),g:u(255,d(e.g,0)),b:u(255,d(e.b,0)),a:i}}(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=a(100*this._a)/100,this._format=e.format||i.format,this._gradientType=e.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=i.ok,this._tc_id=n++};function o(t,e,i){t=R(t,255),e=R(e,255),i=R(i,255);var n,o,r=d(t,e,i),s=u(t,e,i),a=(r+s)/2;if(r==s)n=o=0;else{var l=r-s;switch(o=.5<a?l/(2-r-s):l/(r+s),r){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:o,l:a}}function l(t,e,i){t=R(t,255),e=R(e,255),i=R(i,255);var n,o,r=d(t,e,i),s=u(t,e,i),a=r,l=r-s;if(o=0===r?0:l/r,r==s)n=0;else{switch(r){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:o,v:a}}function e(t,e,i,n){var o=[A(a(t).toString(16)),A(a(e).toString(16)),A(a(i).toString(16))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function p(t,e,i,n){return[A(function(t){return Math.round(255*parseFloat(t)).toString(16)}(n)),A(a(t).toString(16)),A(a(e).toString(16)),A(a(i).toString(16))].join("")}function i(t,e){e=0===e?0:e||10;var i=h(t).toHsl();return i.s-=e/100,i.s=k(i.s),h(i)}function f(t,e){e=0===e?0:e||10;var i=h(t).toHsl();return i.s+=e/100,i.s=k(i.s),h(i)}function g(t){return h(t).desaturate(100)}function m(t,e){e=0===e?0:e||10;var i=h(t).toHsl();return i.l+=e/100,i.l=k(i.l),h(i)}function v(t,e){e=0===e?0:e||10;var i=h(t).toRgb();return i.r=d(0,u(255,i.r-a(-e/100*255))),i.g=d(0,u(255,i.g-a(-e/100*255))),i.b=d(0,u(255,i.b-a(-e/100*255))),h(i)}function y(t,e){e=0===e?0:e||10;var i=h(t).toHsl();return i.l-=e/100,i.l=k(i.l),h(i)}function b(t,e){var i=h(t).toHsl(),n=(a(i.h)+e)%360;return i.h=n<0?360+n:n,h(i)}function _(t){var e=h(t).toHsl();return e.h=(e.h+180)%360,h(e)}function E(t){var e=h(t).toHsl(),i=e.h;return[h(t),h({h:(i+120)%360,s:e.s,l:e.l}),h({h:(i+240)%360,s:e.s,l:e.l})]}function w(t){var e=h(t).toHsl(),i=e.h;return[h(t),h({h:(i+90)%360,s:e.s,l:e.l}),h({h:(i+180)%360,s:e.s,l:e.l}),h({h:(i+270)%360,s:e.s,l:e.l})]}function C(t){var e=h(t).toHsl(),i=e.h;return[h(t),h({h:(i+72)%360,s:e.s,l:e.l}),h({h:(i+216)%360,s:e.s,l:e.l})]}function T(t,e,i){e=e||6,i=i||30;var n=h(t).toHsl(),o=360/i,r=[h(t)];for(n.h=(n.h-(o*e>>1)+720)%360;--e;)n.h=(n.h+o)%360,r.push(h(n));return r}function x(t,e){e=e||6;for(var i=h(t).toHsv(),n=i.h,o=i.s,r=i.v,s=[],a=1/e;e--;)s.push(h({h:n,s:o,v:r})),r=(r+a)%1;return s}h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=O(t),this._roundA=a(100*this._a)/100,this},toHsv:function(){var t=l(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=l(this._r,this._g,this._b),e=a(360*t.h),i=a(100*t.s),n=a(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=o(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=o(this._r,this._g,this._b),e=a(360*t.h),i=a(100*t.s),n=a(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return e(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return p(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*R(this._r,255))+"%",g:a(100*R(this._g,255))+"%",b:a(100*R(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*R(this._r,255))+"%, "+a(100*R(this._g,255))+"%, "+a(100*R(this._b,255))+"%)":"rgba("+a(100*R(this._r,255))+"%, "+a(100*R(this._g,255))+"%, "+a(100*R(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(I[e(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+p(this._r,this._g,this._b,this._a),i=e,n=this._gradientType?"GradientType = 1, ":"";t&&(i=h(t).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&0<=this._a;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(i,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},h.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]="a"===n?t[n]:M(t[n]));t=i}return h(t,e)},h.equals=function(t,e){return!(!t||!e)&&h(t).toRgbString()==h(e).toRgbString()},h.random=function(){return h.fromRatio({r:t(),g:t(),b:t()})},h.mix=function(t,e,i){i=0===i?0:i||50;var n,o=h(t).toRgb(),r=h(e).toRgb(),s=i/100,a=2*s-1,l=r.a-o.a,c=1-(n=((n=a*l==-1?a:(a+l)/(1+a*l))+1)/2),u={r:r.r*n+o.r*c,g:r.g*n+o.g*c,b:r.b*n+o.b*c,a:r.a*s+o.a*(1-s)};return h(u)},h.readability=function(t,e){var i=h(t),n=h(e),o=i.toRgb(),r=n.toRgb(),s=i.getBrightness(),a=n.getBrightness(),l=Math.max(o.r,r.r)-Math.min(o.r,r.r)+Math.max(o.g,r.g)-Math.min(o.g,r.g)+Math.max(o.b,r.b)-Math.min(o.b,r.b);return{brightness:Math.abs(s-a),color:l}},h.isReadable=function(t,e){var i=h.readability(t,e);return 125<i.brightness&&500<i.color},h.mostReadable=function(t,e){for(var i=null,n=0,o=!1,r=0;r<e.length;r++){var s=h.readability(t,e[r]),a=125<s.brightness&&500<s.color,l=s.brightness/125*3+s.color/500;(a&&!o||a&&o&&n<l||!a&&!o&&n<l)&&(o=a,n=l,i=h(e[r]))}return i};var D=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=h.hexNames=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}(D);function O(t){return t=parseFloat(t),(isNaN(t)||t<0||1<t)&&(t=1),t}function R(t,e){!function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}(t)||(t="100%");var i=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=u(e,d(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),c.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function k(t){return u(1,d(0,t))}function S(t){return parseInt(t,16)}function A(t){return 1==t.length?"0"+t:""+t}function M(t){return t<=1&&(t=100*t+"%"),t}var N,K,L,P=(K="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",L="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{rgb:new RegExp("rgb"+K),rgba:new RegExp("rgba"+L),hsl:new RegExp("hsl"+K),hsla:new RegExp("hsla"+L),hsv:new RegExp("hsv"+K),hsva:new RegExp("hsva"+L),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=h}(),Rt(function(){Rt.fn.spectrum.load&&Rt.fn.spectrum.processNativeColorInputs()})}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?exports.cropit=e(require("jquery")):t.cropit=e(t.jQuery)}(this,function(i){return r={},n.m=o=[function(t,e,i){var n=Array.prototype.slice;function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return t.each(function(){var t=a.default.data(this,c.PLUGIN_KEY);t&&e(t)})}function s(t,e,i){var n=t.first().data(c.PLUGIN_KEY);return n&&a.default.isFunction(n[e])?n[e](i):null}var a=o(i(1)),l=o(i(2)),c=i(4),u=i(6),d={init:function(e){return this.each(function(){if(!a.default.data(this,c.PLUGIN_KEY)){var t=new l.default(a.default,this,e);a.default.data(this,c.PLUGIN_KEY,t)}})},destroy:function(){return this.each(function(){a.default.removeData(this,c.PLUGIN_KEY)})},isZoomable:function(){return s(this,"isZoomable")},export:function(t){return s(this,"getCroppedImageData",t)}};a.default.fn.cropit=function(t){return d[t]?d[t].apply(this,Array.prototype.slice.call(arguments,1)):0<=["imageState","imageSrc","offset","previewSize","imageSize","zoom","initialZoom","exportZoom","minZoom","maxZoom"].indexOf(t)?function(t,e,i){return(0,u.exists)(i)?r(t,function(t){t[e]=i}):t.first().data(c.PLUGIN_KEY)[e]}.apply(void 0,[this].concat(n.call(arguments))):0<=["rotateCW","rotateCCW","disable","reenable"].indexOf(t)?function(t,e){return r(t,function(t){t[e]()})}.apply(void 0,[this].concat(n.call(arguments))):d.init.apply(this,arguments)}},function(t,e){t.exports=i},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t};function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t){return t&&t.__esModule?t:{default:t}}var s=r(i(1)),a=r(i(3)),l=i(4),c=i(5),u=i(6),d=(n(h,[{key:"init",value:function(){var t=this;this.image=new Image,this.preImage=new Image,this.image.onload=this.onImageLoaded.bind(this),this.preImage.onload=this.onPreImageLoaded.bind(this),this.image.onerror=this.preImage.onerror=function(){t.onImageError.call(t,l.ERRORS.IMAGE_FAILED_TO_LOAD)},this.$preview=this.options.$preview.css("position","relative"),this.$fileInput=this.options.$fileInput.attr({accept:"image/*"}),this.$zoomSlider=this.options.$zoomSlider.attr({min:0,max:1,step:.01}),this.previewSize={width:this.options.width||this.$preview.innerWidth(),height:this.options.height||this.$preview.innerHeight()},this.$image=(0,s.default)("<img />").addClass(l.CLASS_NAMES.PREVIEW_IMAGE).attr("alt","").css({transformOrigin:"top left",webkitTransformOrigin:"top left",willChange:"transform"}),this.$imageContainer=(0,s.default)("<div />").addClass(l.CLASS_NAMES.PREVIEW_IMAGE_CONTAINER).css({position:"absolute",overflow:"hidden",left:0,top:0,width:"100%",height:"100%"}).append(this.$image),this.$preview.append(this.$imageContainer),this.options.imageBackground&&(s.default.isArray(this.options.imageBackgroundBorderWidth)?this.bgBorderWidthArray=this.options.imageBackgroundBorderWidth:this.bgBorderWidthArray=[0,1,2,3].map(function(){return t.options.imageBackgroundBorderWidth}),this.$bg=(0,s.default)("<img />").addClass(l.CLASS_NAMES.PREVIEW_BACKGROUND).attr("alt","").css({position:"relative",left:this.bgBorderWidthArray[3],top:this.bgBorderWidthArray[0],transformOrigin:"top left",webkitTransformOrigin:"top left",willChange:"transform"}),this.$bgContainer=(0,s.default)("<div />").addClass(l.CLASS_NAMES.PREVIEW_BACKGROUND_CONTAINER).css({position:"absolute",zIndex:0,top:-this.bgBorderWidthArray[0],right:-this.bgBorderWidthArray[1],bottom:-this.bgBorderWidthArray[2],left:-this.bgBorderWidthArray[3]}).append(this.$bg),0<this.bgBorderWidthArray[0]&&this.$bgContainer.css("overflow","hidden"),this.$preview.prepend(this.$bgContainer)),this.initialZoom=this.options.initialZoom,this.imageLoaded=!1,this.moveContinue=!1,this.zoomer=new a.default,this.options.allowDragNDrop&&s.default.event.props.push("dataTransfer"),this.bindListeners(),this.options.imageState&&this.options.imageState.src&&this.loadImage(this.options.imageState.src)}},{key:"bindListeners",value:function(){this.$fileInput.on("change.cropit",this.onFileChange.bind(this)),this.$imageContainer.on(l.EVENTS.PREVIEW,this.onPreviewEvent.bind(this)),this.$zoomSlider.on(l.EVENTS.ZOOM_INPUT,this.onZoomSliderChange.bind(this)),this.options.allowDragNDrop&&(this.$imageContainer.on("dragover.cropit dragleave.cropit",this.onDragOver.bind(this)),this.$imageContainer.on("drop.cropit",this.onDrop.bind(this)))}},{key:"unbindListeners",value:function(){this.$fileInput.off("change.cropit"),this.$imageContainer.off(l.EVENTS.PREVIEW),this.$imageContainer.off("dragover.cropit dragleave.cropit drop.cropit"),this.$zoomSlider.off(l.EVENTS.ZOOM_INPUT)}},{key:"onFileChange",value:function(t){this.options.onFileChange(t),this.$fileInput.get(0).files&&this.loadFile(this.$fileInput.get(0).files[0])}},{key:"loadFile",value:function(t){var e=new FileReader;t&&t.type.match("image")?(e.readAsDataURL(t),e.onload=this.onFileReaderLoaded.bind(this),e.onerror=this.onFileReaderError.bind(this)):t&&this.onFileReaderError()}},{key:"onFileReaderLoaded",value:function(t){this.loadImage(t.target.result)}},{key:"onFileReaderError",value:function(){this.options.onFileReaderError()}},{key:"onDragOver",value:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy",this.$preview.toggleClass(l.CLASS_NAMES.DRAG_HOVERED,"dragover"===t.type)}},{key:"onDrop",value:function(t){var e=this;t.preventDefault(),t.stopPropagation(),Array.prototype.slice.call(t.dataTransfer.files,0).some(function(t){return!!t.type.match("image")&&(e.loadFile(t),!0)}),this.$preview.removeClass(l.CLASS_NAMES.DRAG_HOVERED)}},{key:"loadImage",value:function(t){var e=this;if(t)if(this.options.onImageLoading(),this.setImageLoadingClass(),0===t.indexOf("data"))this.preImage.src=t;else{var i=new XMLHttpRequest;i.onload=function(t){300<=t.target.status?e.onImageError.call(e,l.ERRORS.IMAGE_FAILED_TO_LOAD):e.loadFile(t.target.response)},i.open("GET",t),i.responseType="blob",i.send()}}},{key:"onPreImageLoaded",value:function(){if(this.shouldRejectImage({imageWidth:this.preImage.width,imageHeight:this.preImage.height,previewSize:this.previewSize,maxZoom:this.options.maxZoom,exportZoom:this.options.exportZoom,smallImage:this.options.smallImage}))return this.onImageError(l.ERRORS.SMALL_IMAGE),void(this.image.src&&this.setImageLoadedClass());this.image.src=this.preImage.src}},{key:"onImageLoaded",value:function(){this.rotation=0,this.setupZoomer(this.options.imageState&&this.options.imageState.zoom||this._initialZoom),this.options.imageState&&this.options.imageState.offset?this.offset=this.options.imageState.offset:this.centerImage(),this.options.imageState={},this.$image.attr("src",this.image.src),this.options.imageBackground&&this.$bg.attr("src",this.image.src),this.setImageLoadedClass(),this.imageLoaded=!0,this.options.onImageLoaded()}},{key:"onImageError",value:function(){this.options.onImageError.apply(this,arguments),this.removeImageLoadingClass()}},{key:"setImageLoadingClass",value:function(){this.$preview.removeClass(l.CLASS_NAMES.IMAGE_LOADED).addClass(l.CLASS_NAMES.IMAGE_LOADING)}},{key:"setImageLoadedClass",value:function(){this.$preview.removeClass(l.CLASS_NAMES.IMAGE_LOADING).addClass(l.CLASS_NAMES.IMAGE_LOADED)}},{key:"removeImageLoadingClass",value:function(){this.$preview.removeClass(l.CLASS_NAMES.IMAGE_LOADING)}},{key:"getEventPosition",value:function(t){if(t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&(t=t.originalEvent.touches[0]),t.clientX&&t.clientY)return{x:t.clientX,y:t.clientY}}},{key:"onPreviewEvent",value:function(t){if(this.imageLoaded)return this.moveContinue=!1,this.$imageContainer.off(l.EVENTS.PREVIEW_MOVE),"mousedown"===t.type||"touchstart"===t.type?(this.origin=this.getEventPosition(t),this.moveContinue=!0,this.$imageContainer.on(l.EVENTS.PREVIEW_MOVE,this.onMove.bind(this))):(0,s.default)(document.body).focus(),t.stopPropagation(),!1}},{key:"onMove",value:function(t){var e=this.getEventPosition(t);return this.moveContinue&&e&&(this.offset={x:this.offset.x+e.x-this.origin.x,y:this.offset.y+e.y-this.origin.y}),this.origin=e,t.stopPropagation(),!1}},{key:"fixOffset",value:function(t){if(!this.imageLoaded)return t;var e={x:t.x,y:t.y};return this.options.freeMove||(this.imageWidth*this.zoom>=this.previewSize.width?e.x=Math.min(0,Math.max(e.x,this.previewSize.width-this.imageWidth*this.zoom)):e.x=Math.max(0,Math.min(e.x,this.previewSize.width-this.imageWidth*this.zoom)),this.imageHeight*this.zoom>=this.previewSize.height?e.y=Math.min(0,Math.max(e.y,this.previewSize.height-this.imageHeight*this.zoom)):e.y=Math.max(0,Math.min(e.y,this.previewSize.height-this.imageHeight*this.zoom))),e.x=(0,u.round)(e.x),e.y=(0,u.round)(e.y),e}},{key:"centerImage",value:function(){this.image.width&&this.image.height&&this.zoom&&(this.offset={x:(this.previewSize.width-this.imageWidth*this.zoom)/2,y:(this.previewSize.height-this.imageHeight*this.zoom)/2})}},{key:"onZoomSliderChange",value:function(){if(this.imageLoaded){this.zoomSliderPos=Number(this.$zoomSlider.val());var t=this.zoomer.getZoom(this.zoomSliderPos);t!==this.zoom&&(this.zoom=t)}}},{key:"enableZoomSlider",value:function(){this.$zoomSlider.removeAttr("disabled"),this.options.onZoomEnabled()}},{key:"disableZoomSlider",value:function(){this.$zoomSlider.attr("disabled",!0),this.options.onZoomDisabled()}},{key:"setupZoomer",value:function(t){this.zoomer.setup({imageSize:this.imageSize,previewSize:this.previewSize,exportZoom:this.options.exportZoom,maxZoom:this.options.maxZoom,minZoom:this.options.minZoom,smallImage:this.options.smallImage}),this.zoom=(0,u.exists)(t)?t:this._zoom,this.isZoomable()?this.enableZoomSlider():this.disableZoomSlider()}},{key:"fixZoom",value:function(t){return this.zoomer.fixZoom(t)}},{key:"isZoomable",value:function(){return this.zoomer.isZoomable()}},{key:"renderImage",value:function(){var t="\n      translate("+this.rotatedOffset.x+"px, "+this.rotatedOffset.y+"px)\n      scale("+this.zoom+")\n      rotate("+this.rotation+"deg)";this.$image.css({transform:t,webkitTransform:t}),this.options.imageBackground&&this.$bg.css({transform:t,webkitTransform:t})}},{key:"rotateCW",value:function(){this.shouldRejectImage({imageWidth:this.image.height,imageHeight:this.image.width,previewSize:this.previewSize,maxZoom:this.options.maxZoom,exportZoom:this.options.exportZoom,smallImage:this.options.smallImage})?this.rotation=(this.rotation+180)%360:this.rotation=(this.rotation+90)%360}},{key:"rotateCCW",value:function(){this.shouldRejectImage({imageWidth:this.image.height,imageHeight:this.image.width,previewSize:this.previewSize,maxZoom:this.options.maxZoom,exportZoom:this.options.exportZoom,smallImage:this.options.smallImage})?this.rotation=(this.rotation+180)%360:this.rotation=(this.rotation+270)%360}},{key:"shouldRejectImage",value:function(t){var e=t.imageWidth,i=t.imageHeight,n=t.previewSize,o=t.maxZoom,r=t.exportZoom;return"reject"===t.smallImage&&(e*o<n.width*r||i*o<n.height*r)}},{key:"getCroppedImageData",value:function(t){if(this.image.src){var e=(t=s.default.extend({},{type:"image/png",quality:.75,originalSize:!1,fillBg:"#fff"},t)).originalSize?1/this.zoom:this.options.exportZoom,i={width:this.zoom*e*this.image.width,height:this.zoom*e*this.image.height},n=(0,s.default)("<canvas />").attr({width:this.previewSize.width*e,height:this.previewSize.height*e}).get(0),o=n.getContext("2d");return"image/jpeg"===t.type&&(o.fillStyle=t.fillBg,o.fillRect(0,0,n.width,n.height)),o.translate(this.rotatedOffset.x*e,this.rotatedOffset.y*e),o.rotate(this.rotation*Math.PI/180),o.drawImage(this.image,0,0,i.width,i.height),n.toDataURL(t.type,t.quality)}}},{key:"disable",value:function(){this.unbindListeners(),this.disableZoomSlider(),this.$el.addClass(l.CLASS_NAMES.DISABLED)}},{key:"reenable",value:function(){this.bindListeners(),this.enableZoomSlider(),this.$el.removeClass(l.CLASS_NAMES.DISABLED)}},{key:"$",value:function(t){return this.$el?this.$el.find(t):null}},{key:"offset",set:function(t){t&&(0,u.exists)(t.x)&&(0,u.exists)(t.y)&&(this._offset=this.fixOffset(t),this.renderImage(),this.options.onOffsetChange(t))},get:function(){return this._offset}},{key:"zoom",set:function(t){if(t=this.fixZoom(t),this.imageLoaded){var e=this.zoom,i=this.previewSize.width/2-(this.previewSize.width/2-this.offset.x)*t/e,n=this.previewSize.height/2-(this.previewSize.height/2-this.offset.y)*t/e;this._zoom=t,this.offset={x:i,y:n}}else this._zoom=t;this.zoomSliderPos=this.zoomer.getSliderPos(this.zoom),this.$zoomSlider.val(this.zoomSliderPos),this.options.onZoomChange(t)},get:function(){return this._zoom}},{key:"rotatedOffset",get:function(){return{x:this.offset.x+(90===this.rotation?this.image.height*this.zoom:0)+(180===this.rotation?this.image.width*this.zoom:0),y:this.offset.y+(180===this.rotation?this.image.height*this.zoom:0)+(270===this.rotation?this.image.width*this.zoom:0)}}},{key:"rotation",set:function(t){this._rotation=t,this.imageLoaded&&this.setupZoomer()},get:function(){return this._rotation}},{key:"imageState",get:function(){return{src:this.image.src,offset:this.offset,zoom:this.zoom}}},{key:"imageSrc",get:function(){return this.image.src},set:function(t){this.loadImage(t)}},{key:"imageWidth",get:function(){return this.rotation%180==0?this.image.width:this.image.height}},{key:"imageHeight",get:function(){return this.rotation%180==0?this.image.height:this.image.width}},{key:"imageSize",get:function(){return{width:this.imageWidth,height:this.imageHeight}}},{key:"initialZoom",get:function(){return this.options.initialZoom},set:function(t){this.options.initialZoom=t,this._initialZoom="min"===t?0:"image"===t?1:0}},{key:"exportZoom",get:function(){return this.options.exportZoom},set:function(t){this.options.exportZoom=t,this.setupZoomer()}},{key:"minZoom",get:function(){return this.options.minZoom},set:function(t){this.options.minZoom=t,this.setupZoomer()}},{key:"maxZoom",get:function(){return this.options.maxZoom},set:function(t){this.options.maxZoom=t,this.setupZoomer()}},{key:"previewSize",get:function(){return this._previewSize},set:function(t){!t||t.width<=0||t.height<=0||(this._previewSize={width:t.width,height:t.height},this.$preview.innerWidth(this.previewSize.width).innerHeight(this.previewSize.height),this.imageLoaded&&this.setupZoomer())}}]),h);function h(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),this.$el=(0,s.default)(e);var n=(0,c.loadDefaults)(this.$el);this.options=s.default.extend({},n,i),this.init()}e.default=d,t.exports=e.default},function(t,e){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var i=(function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}(o,[{key:"setup",value:function(t){var e=t.imageSize,i=t.previewSize,n=t.exportZoom,o=t.maxZoom,r=t.minZoom,s=t.smallImage,a=i.width/e.width,l=i.height/e.height;this.minZoom="fit"===r?Math.min(a,l):Math.max(a,l),"allow"===s&&(this.minZoom=Math.min(this.minZoom,1)),this.maxZoom=Math.max(this.minZoom,o/n)}},{key:"getZoom",value:function(t){return this.minZoom&&this.maxZoom?t*(this.maxZoom-this.minZoom)+this.minZoom:null}},{key:"getSliderPos",value:function(t){return this.minZoom&&this.maxZoom?this.minZoom===this.maxZoom?0:(t-this.minZoom)/(this.maxZoom-this.minZoom):null}},{key:"isZoomable",value:function(){return this.minZoom&&this.maxZoom?this.minZoom!==this.maxZoom:null}},{key:"fixZoom",value:function(t){return Math.max(this.minZoom,Math.min(this.maxZoom,t))}}]),o);function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.minZoom=this.maxZoom=1}e.default=i,t.exports=e.default},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.PLUGIN_KEY="cropit";e.CLASS_NAMES={PREVIEW:"cropit-preview",PREVIEW_IMAGE_CONTAINER:"cropit-preview-image-container",PREVIEW_IMAGE:"cropit-preview-image",PREVIEW_BACKGROUND_CONTAINER:"cropit-preview-background-container",PREVIEW_BACKGROUND:"cropit-preview-background",FILE_INPUT:"cropit-image-input",ZOOM_SLIDER:"cropit-image-zoom-input",DRAG_HOVERED:"cropit-drag-hovered",IMAGE_LOADING:"cropit-image-loading",IMAGE_LOADED:"cropit-image-loaded",DISABLED:"cropit-disabled"};e.ERRORS={IMAGE_FAILED_TO_LOAD:{code:0,message:"Image failed to load."},SMALL_IMAGE:{code:1,message:"Image is too small."}};function i(t){return t.map(function(t){return t+".cropit"}).join(" ")}var n={PREVIEW:i(["mousedown","mouseup","mouseleave","touchstart","touchend","touchcancel","touchleave"]),PREVIEW_MOVE:i(["mousemove","touchmove"]),ZOOM_INPUT:i(["mousemove","touchmove","change"])};e.EVENTS=n},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),o={elements:[{name:"$preview",description:"The HTML element that displays image preview.",defaultSelector:"."+n.CLASS_NAMES.PREVIEW},{name:"$fileInput",description:"File input element.",defaultSelector:"input."+n.CLASS_NAMES.FILE_INPUT},{name:"$zoomSlider",description:"Range input element that controls image zoom.",defaultSelector:"input."+n.CLASS_NAMES.ZOOM_SLIDER}].map(function(t){return t.type="jQuery element",t.default="$imageCropper.find('"+t.defaultSelector+"')",t}),values:[{name:"width",type:"number",description:"Width of image preview in pixels. If set, it will override the CSS property.",default:null},{name:"height",type:"number",description:"Height of image preview in pixels. If set, it will override the CSS property.",default:null},{name:"imageBackground",type:"boolean",description:"Whether or not to display the background image beyond the preview area.",default:!1},{name:"imageBackgroundBorderWidth",type:"array or number",description:"Width of background image border in pixels.\n        The four array elements specify the width of background image width on the top, right, bottom, left side respectively.\n        The background image beyond the width will be hidden.\n        If specified as a number, border with uniform width on all sides will be applied.",default:[0,0,0,0]},{name:"exportZoom",type:"number",description:"The ratio between the desired image size to export and the preview size.\n        For example, if the preview size is `300px * 200px`, and `exportZoom = 2`, then\n        the exported image size will be `600px * 400px`.\n        This also affects the maximum zoom level, since the exported image cannot be zoomed to larger than its original size.",default:1},{name:"allowDragNDrop",type:"boolean",description:"When set to true, you can load an image by dragging it from local file browser onto the preview area.",default:!0},{name:"minZoom",type:"string",description:"This options decides the minimal zoom level of the image.\n        If set to `'fill'`, the image has to fill the preview area, i.e. both width and height must not go smaller than the preview area.\n        If set to `'fit'`, the image can shrink further to fit the preview area, i.e. at least one of its edges must not go smaller than the preview area.",default:"fill"},{name:"maxZoom",type:"number",description:"Determines how big the image can be zoomed. E.g. if set to 1.5, the image can be zoomed to 150% of its original size.",default:1},{name:"initialZoom",type:"string",description:"Determines the zoom when an image is loaded.\n        When set to `'min'`, image is zoomed to the smallest when loaded.\n        When set to `'image'`, image is zoomed to 100% when loaded.",default:"min"},{name:"freeMove",type:"boolean",description:"When set to true, you can freely move the image instead of being bound to the container borders",default:!1},{name:"smallImage",type:"string",description:"When set to `'reject'`, `onImageError` would be called when cropit loads an image that is smaller than the container.\n        When set to `'allow'`, images smaller than the container can be zoomed down to its original size, overiding `minZoom` option.\n        When set to `'stretch'`, the minimum zoom of small images would follow `minZoom` option.",default:"reject"}],callbacks:[{name:"onFileChange",description:"Called when user selects a file in the select file input.",params:[{name:"event",type:"object",description:"File change event object"}]},{name:"onFileReaderError",description:"Called when `FileReader` encounters an error while loading the image file."},{name:"onImageLoading",description:"Called when image starts to be loaded."},{name:"onImageLoaded",description:"Called when image is loaded."},{name:"onImageError",description:"Called when image cannot be loaded.",params:[{name:"error",type:"object",description:"Error object."},{name:"error.code",type:"number",description:"Error code. `0` means generic image loading failure. `1` means image is too small."},{name:"error.message",type:"string",description:"A message explaining the error."}]},{name:"onZoomEnabled",description:"Called when image the zoom slider is enabled."},{name:"onZoomDisabled",description:"Called when image the zoom slider is disabled."},{name:"onZoomChange",description:"Called when zoom changes.",params:[{name:"zoom",type:"number",description:"New zoom."}]},{name:"onOffsetChange",description:"Called when image offset changes.",params:[{name:"offset",type:"object",description:"New offset, with `x` and `y` values."}]}].map(function(t){return t.type="function",t})};e.loadDefaults=function(e){var i={};return e&&o.elements.forEach(function(t){i[t.name]=e.find(t.defaultSelector)}),o.values.forEach(function(t){i[t.name]=t.default}),o.callbacks.forEach(function(t){i[t.name]=function(){}}),i},e.default=o},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.exists=function(t){return void 0!==t};e.round=function(t){return+(Math.round(100*t)+"e-2")}}],n.c=r,n.p="",n(0);function n(t){if(r[t])return r[t].exports;var e=r[t]={exports:{},id:t,loaded:!1};return o[t].call(e.exports,e,e.exports,n),e.loaded=!0,e.exports}var o,r}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Noty",[],e):"object"==typeof exports?exports.Noty=e():t.Noty=e()}(this,function(){return eBe={},fBe.m=dBe=[function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.css=e.deepExtend=e.animationEndEvents=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.inArray=function(t,e,i){var n=void 0;if(i){for(n in e)if(e.hasOwnProperty(n)&&e[n]===t)return!0}else for(n in e)if(e.hasOwnProperty(n)&&e[n]===t)return!0;return!1},e.stopPropagation=function(t){void 0!==(t=t||window.event).stopPropagation?t.stopPropagation():t.cancelBubble=!0},e.generateID=function(){var t="noty_"+(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")+"_";return t+="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},e.outerHeight=function(t){var e=t.offsetHeight,i=window.getComputedStyle(t);return e+=parseInt(i.marginTop)+parseInt(i.marginBottom)},e.addListener=c,e.hasClass=u,e.addClass=function(t,e){var i=h(t),n=i+e;if(u(i,e))return;t.className=n.substring(1)},e.removeClass=function(t,e){var i=h(t),n=void 0;if(!u(t,e))return;n=i.replace(" "+e+" "," "),t.className=n.substring(1,n.length-1)},e.remove=d,e.classList=h,e.visibilityChangeFlow=function(){var t=void 0,e=void 0;void 0!==document.hidden?(t="hidden",e="visibilitychange"):void 0!==document.msHidden?(t="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange");function i(){n.PageHidden?setTimeout(function(){Object.keys(n.Store).forEach(function(t){n.Store.hasOwnProperty(t)&&n.Store[t].options.visibilityControl&&n.Store[t].stop()})},100):setTimeout(function(){Object.keys(n.Store).forEach(function(t){n.Store.hasOwnProperty(t)&&n.Store[t].options.visibilityControl&&n.Store[t].resume()}),n.queueRenderAll()},100)}e&&c(document,e,function(){n.PageHidden=document[t],i()});c(window,"blur",function(){n.PageHidden=!0,i()}),c(window,"focus",function(){n.PageHidden=!1,i()})},e.createAudioElements=function(t){if(t.hasSound){var i=document.createElement("audio");t.options.sounds.sources.forEach(function(t){var e=document.createElement("source");e.src=t,e.type="audio/"+function(t){return t.match(/\.([^.]+)$/)[1]}(t),i.appendChild(e)}),t.barDom?t.barDom.appendChild(i):document.querySelector("body").appendChild(i),i.volume=t.options.sounds.volume,t.soundPlayed||(i.play(),t.soundPlayed=!0),i.onended=function(){d(i)}}};var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(1));e.animationEndEvents="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";e.deepExtend=function t(e){e=e||{};for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var o in n)n.hasOwnProperty(o)&&(Array.isArray(n[o])?e[o]=n[o]:"object"===r(n[o])&&null!==n[o]?e[o]=t(e[o],n[o]):e[o]=n[o])}return e};var s,o;e.css=(s=["Webkit","O","Moz","ms"],o={},function(t,e){var i=arguments,n=void 0,o=void 0;if(2===i.length)for(n in e)e.hasOwnProperty(n)&&void 0!==(o=e[n])&&e.hasOwnProperty(n)&&l(t,n,o);else l(t,i[1],i[2])});function a(t){return t=function(t){return t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()})}(t),o[t]||(o[t]=function(t){var e=document.body.style;if(t in e)return t;for(var i=s.length,n=t.charAt(0).toUpperCase()+t.slice(1),o=void 0;i--;)if((o=s[i]+n)in e)return o;return t}(t))}function l(t,e,i){e=a(e),t.style[e]=i}function c(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];e=e.split(" ");for(var o=0;o<e.length;o++)document.addEventListener?t.addEventListener(e[o],i,n):document.attachEvent&&t.attachEvent("on"+e[o],i)}function u(t,e){return 0<=("string"==typeof t?t:h(t)).indexOf(" "+e+" ")}function d(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t){return(" "+(t&&t.className||"")+" ").replace(/\s+/gi," ")}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Defaults=i.Store=i.Queues=i.DefaultMaxVisible=i.docTitle=i.DocModalCount=i.PageHidden=void 0,i.getQueueCounts=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"global",i=0,t=a;l.hasOwnProperty(e)&&(t=l[e].maxVisible,Object.keys(c).forEach(function(t){c[t].options.queue!==e||c[t].closed||i++}));return{current:i,maxVisible:t}},i.addToQueue=function(t){l.hasOwnProperty(t.options.queue)||(l[t.options.queue]={maxVisible:a,queue:[]});l[t.options.queue].queue.push(t)},i.removeFromQueue=function(e){if(l.hasOwnProperty(e.options.queue)){var i=[];Object.keys(l[e.options.queue].queue).forEach(function(t){l[e.options.queue].queue[t].id!==e.id&&i.push(l[e.options.queue].queue[t])}),l[e.options.queue].queue=i}},i.queueRender=u,i.queueRenderAll=function(){Object.keys(l).forEach(function(t){u(t)})},i.ghostFix=function(t){var e=n.generateID("ghost"),i=document.createElement("div");i.setAttribute("id",e),n.css(i,{height:n.outerHeight(t.barDom)+"px"}),t.barDom.insertAdjacentHTML("afterend",i.outerHTML),n.remove(t.barDom),i=document.getElementById(e),n.addClass(i,"noty_fix_effects_height"),n.addListener(i,n.animationEndEvents,function(){n.remove(i)})},i.build=function(t){!function(t){if(t.options.container)return t.layoutDom=document.querySelector(t.options.container);var e="noty_layout__"+t.options.layout;t.layoutDom=document.querySelector("div#"+e),t.layoutDom||(t.layoutDom=document.createElement("div"),t.layoutDom.setAttribute("id",e),t.layoutDom.setAttribute("role","alert"),t.layoutDom.setAttribute("aria-live","polite"),n.addClass(t.layoutDom,"noty_layout"),document.querySelector("body").appendChild(t.layoutDom))}(t);var e='<div class="noty_body">'+t.options.text+"</div>"+function(e){if(d(e)){var i=document.createElement("div");return n.addClass(i,"noty_buttons"),Object.keys(e.options.buttons).forEach(function(t){i.appendChild(e.options.buttons[t].dom)}),e.options.buttons.forEach(function(t){i.appendChild(t.dom)}),i.outerHTML}return""}(t)+'<div class="noty_progressbar"></div>';t.barDom=document.createElement("div"),t.barDom.setAttribute("id",t.id),n.addClass(t.barDom,"noty_bar noty_type__"+t.options.type+" noty_theme__"+t.options.theme),t.barDom.innerHTML=e,f(t,"onTemplate")},i.hasButtons=d,i.handleModal=function(t){t.options.modal&&(0===o&&function(){var t=document.querySelector("body"),e=document.createElement("div");n.addClass(e,"noty_modal"),t.insertBefore(e,t.firstChild),n.addClass(e,"noty_modal_open"),n.addListener(e,n.animationEndEvents,function(){n.removeClass(e,"noty_modal_open")})}(),i.DocModalCount=o+=1)},i.handleModalClose=function(t){if(t.options.modal&&0<o&&(i.DocModalCount=o-=1,o<=0)){var e=document.querySelector(".noty_modal");e&&(n.removeClass(e,"noty_modal_open"),n.addClass(e,"noty_modal_close"),n.addListener(e,n.animationEndEvents,function(){n.remove(e)}))}},i.queueClose=h,i.dequeueClose=p,i.fire=f,i.openFlow=function(t){f(t,"afterShow"),h(t),n.addListener(t.barDom,"mouseenter",function(){p(t)}),n.addListener(t.barDom,"mouseleave",function(){h(t)})},i.closeFlow=function(t){delete c[t.id],t.closing=!1,f(t,"afterClose"),n.remove(t.barDom),0!==t.layoutDom.querySelectorAll(".noty_bar").length||t.options.container||n.remove(t.layoutDom);(n.inArray("docVisible",t.options.titleCount.conditions)||n.inArray("docHidden",t.options.titleCount.conditions))&&s.decrement();u(t.options.queue)};var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(e(0));i.PageHidden=!1;var o=i.DocModalCount=0,r={originalTitle:null,count:0,changed:!1,timer:-1},s=i.docTitle={increment:function(){r.count++,s._update()},decrement:function(){r.count--,r.count<=0?s._clear():s._update()},_update:function(){var t=document.title;r.changed?document.title="("+r.count+") "+r.originalTitle:(r.originalTitle=t,document.title="("+r.count+") "+t,r.changed=!0)},_clear:function(){r.changed&&(r.count=0,document.title=r.originalTitle,r.changed=!1)}},a=i.DefaultMaxVisible=5,l=i.Queues={global:{maxVisible:a,queue:[]}},c=i.Store={};i.Defaults={type:"alert",layout:"topRight",theme:"mint",text:"",timeout:!1,progressBar:!0,closeWith:["click"],animation:{open:"noty_effects_open",close:"noty_effects_close"},id:!1,force:!1,killer:!1,queue:"global",container:!1,buttons:[],callbacks:{beforeShow:null,onShow:null,afterShow:null,onClose:null,afterClose:null,onClick:null,onHover:null,onTemplate:null},sounds:{sources:[],volume:1,conditions:[]},titleCount:{conditions:[]},modal:!1,visibilityControl:!1};function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"global";if(l.hasOwnProperty(t)){var e=l[t].queue.shift();e&&e.show()}}function d(t){return!(!t.options.buttons||!Object.keys(t.options.buttons).length)}function h(t){t.options.timeout&&(t.options.progressBar&&t.progressDom&&n.css(t.progressDom,{transition:"width "+t.options.timeout+"ms linear",width:"0%"}),clearTimeout(t.closeTimer),t.closeTimer=setTimeout(function(){t.close()},t.options.timeout))}function p(t){t.options.timeout&&t.closeTimer&&(clearTimeout(t.closeTimer),t.closeTimer=-1,t.options.progressBar&&t.progressDom&&n.css(t.progressDom,{transition:"width 0ms linear",width:"100%"}))}function f(e,t){e.listeners.hasOwnProperty(t)&&e.listeners[t].forEach(function(t){"function"==typeof t&&t.apply(e)})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotyButton=void 0;var s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(0));e.NotyButton=function t(e,i,n){var o=this,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dom=document.createElement("button"),this.dom.innerHTML=e,this.id=r.id=r.id||s.generateID("button"),this.cb=n,Object.keys(r).forEach(function(t){o.dom.setAttribute(t,r[t])}),s.addClass(this.dom,i||"noty_btn"),this}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t};function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}e.Push=(n(r,[{key:"on",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:function(){};return"function"==typeof i&&this.listeners.hasOwnProperty(t)&&this.listeners[t].push(i),this}},{key:"fire",value:function(t,e){var i=this,n=1<arguments.length&&void 0!==e?e:[];this.listeners.hasOwnProperty(t)&&this.listeners[t].forEach(function(t){"function"==typeof t&&t.apply(i,n)})}},{key:"create",value:function(){console.log("NOT IMPLEMENTED YET")}},{key:"isSupported",value:function(){var t=!1;try{t=window.Notification||window.webkitNotifications||navigator.mozNotification||window.external&&void 0!==window.external.msIsSiteMode()}catch(t){}return t}},{key:"getPermissionStatus",value:function(){var t="default";if(window.Notification&&window.Notification.permissionLevel)t=window.Notification.permissionLevel;else if(window.webkitNotifications&&window.webkitNotifications.checkPermission)switch(window.webkitNotifications.checkPermission()){case 1:t="default";break;case 0:t="granted";break;default:t="denied"}else window.Notification&&window.Notification.permission?t=window.Notification.permission:navigator.mozNotification?t="granted":window.external&&void 0!==window.external.msIsSiteMode()&&(t=window.external.msIsSiteMode()?"granted":"default");return t.toString().toLowerCase()}},{key:"getEndpoint",value:function(t){var e=t.endpoint,i=t.subscriptionId;return i&&-1===e.indexOf(i)&&(e+="/"+i),e}},{key:"isSWRegistered",value:function(){try{return"activated"===navigator.serviceWorker.controller.state}catch(t){return!1}}},{key:"unregisterWorker",value:function(){var s=this;"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(t){var e=!0,i=!1,n=void 0;try{for(var o,r=t[Symbol.iterator]();!(e=(o=r.next()).done);e=!0)o.value.unregister(),s.fire("onSubscriptionCancel")}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}})}},{key:"requestSubscription",value:function(t){function e(t){"granted"===t?(i.fire("onPermissionGranted"),"serviceWorker"in navigator?navigator.serviceWorker.register(i.workerPath).then(function(){navigator.serviceWorker.ready.then(function(t){o.fire("onWorkerSuccess"),t.pushManager.subscribe({userVisibleOnly:n}).then(function(t){var e=t.getKey("p256dh"),i=t.getKey("auth");o.subData={endpoint:o.getEndpoint(t),p256dh:e?window.btoa(String.fromCharCode.apply(null,new Uint8Array(e))):null,auth:i?window.btoa(String.fromCharCode.apply(null,new Uint8Array(i))):null},o.fire("onSubscriptionSuccess",[o.subData])}).catch(function(t){o.fire("onWorkerError",[t])})})}):o.fire("onWorkerNotSupported")):"denied"===t&&(i.fire("onPermissionDenied"),i.unregisterWorker())}var i=this,n=!(0<arguments.length&&void 0!==t)||t,o=this,r=this.getPermissionStatus();"default"===r?window.Notification&&window.Notification.requestPermission?window.Notification.requestPermission(e):window.webkitNotifications&&window.webkitNotifications.checkPermission&&window.webkitNotifications.requestPermission(e):e(r)}}]),r);function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"/service-worker.js";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.subData={},this.workerPath=t,this.listeners={onPermissionGranted:[],onPermissionDenied:[],onSubscriptionSuccess:[],onSubscriptionCancel:[],onWorkerError:[],onWorkerSuccess:[],onWorkerNotSupported:[]},this}},function(e,t,j){(function($,V){var t;t=function(){"use strict";function c(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,e=void 0,o=void 0,a=function(t,e){h[n]=t,h[n+1]=e,2===(n+=2)&&(o?o(p):y())};var t="undefined"!=typeof window?window:void 0,r=t||{},s=r.MutationObserver||r.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==$&&"[object process]"==={}.toString.call($),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(p,1)}}var h=new Array(1e3);function p(){for(var t=0;t<n;t+=2){(0,h[t])(h[t+1]),h[t]=void 0,h[t+1]=void 0}n=0}var f,g,m,v,y=void 0;function b(t,e){var i=arguments,n=this,o=new this.constructor(w);void 0===o[E]&&B(o);var r,s=n._state;return s?(r=i[s-1],a(function(){return P(s,o,r,n._result)})):M(n,o,t,e),o}function _(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(w);return R(e,t),e}y=l?function(){return $.nextTick(p)}:s?(g=0,m=new s(p),v=document.createTextNode(""),m.observe(v,{characterData:!0}),function(){v.data=g=++g%2}):u?((f=new MessageChannel).port1.onmessage=p,function(){return f.port2.postMessage(0)}):void 0===t?function(){try{var t=j(9);return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(p)}:d()}catch(t){return d()}}():d();var E=Math.random().toString(36).substring(16);function w(){}var C=void 0,T=1,x=2,D=new K;function I(t){try{return t.then}catch(t){return D.error=t,D}}function O(t,e,i){e.constructor===t.constructor&&i===b&&e.constructor.resolve===_?function(e,t){t._state===T?S(e,t._result):t._state===x?A(e,t._result):M(t,void 0,function(t){return R(e,t)},function(t){return A(e,t)})}(t,e):i===D?(A(t,D.error),D.error=null):void 0===i?S(t,e):c(i)?function(t,n,o){a(function(e){var i=!1,t=function(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}(o,n,function(t){i||(i=!0,n!==t?R(e,t):S(e,t))},function(t){i||(i=!0,A(e,t))},e._label);!i&&t&&(i=!0,A(e,t))},t)}(t,e,i):S(t,e)}function R(t,e){t===e?A(t,new TypeError("You cannot resolve a promise with itself")):!function(t){var e=typeof t;return null!==t&&("object"==e||"function"==e)}(e)?S(t,e):O(t,e,I(e))}function k(t){t._onerror&&t._onerror(t._result),N(t)}function S(t,e){t._state===C&&(t._result=e,t._state=T,0!==t._subscribers.length&&a(N,t))}function A(t,e){t._state===C&&(t._state=x,t._result=e,a(k,t))}function M(t,e,i,n){var o=t._subscribers,r=o.length;t._onerror=null,o[r]=e,o[r+T]=i,o[r+x]=n,0===r&&t._state&&a(N,t)}function N(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n=void 0,o=void 0,r=t._result,s=0;s<e.length;s+=3)n=e[s],o=e[s+i],n?P(i,n,o,r):o(r);t._subscribers.length=0}}function K(){this.error=null}var L=new K;function P(t,e,i,n){var o=c(i),r=void 0,s=void 0,a=void 0,l=void 0;if(o){if((r=function(t,e){try{return t(e)}catch(t){return L.error=t,L}}(i,n))===L?(l=!0,s=r.error,r.error=null):a=!0,e===r)return void A(e,new TypeError("A promises callback cannot return that same promise."))}else r=n,a=!0;e._state!==C||(o&&a?R(e,r):l?A(e,s):t===T?S(e,r):t===x&&A(e,r))}var F=0;function B(t){t[E]=F++,t._state=void 0,t._result=void 0,t._subscribers=[]}function H(t,e){this._instanceConstructor=t,this.promise=new t(w),this.promise[E]||B(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):A(this.promise,new Error("Array Methods must be provided an Array"))}function z(t){this[E]=F++,this._result=this._state=void 0,this._subscribers=[],w!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof z?function(e,t){try{t(function(t){R(e,t)},function(t){A(e,t)})}catch(t){A(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return H.prototype._enumerate=function(t){for(var e=0;this._state===C&&e<t.length;e++)this._eachEntry(t[e],e)},H.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===_){var o=I(e);if(o===b&&e._state!==C)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(i===z){var r=new i(w);O(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new i(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},H.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===C&&(this._remaining--,t===x?A(n,i):this._result[e]=i),0===this._remaining&&S(n,this._result)},H.prototype._willSettleAt=function(t,e){var i=this;M(t,void 0,function(t){return i._settledAt(T,e,t)},function(t){return i._settledAt(x,e,t)})},z.all=function(t){return new H(this,t).promise},z.race=function(o){var r=this;return i(o)?new r(function(t,e){for(var i=o.length,n=0;n<i;n++)r.resolve(o[n]).then(t,e)}):new r(function(t,e){return e(new TypeError("You must pass an array to race."))})},z.resolve=_,z.reject=function(t){var e=new this(w);return A(e,t),e},z._setScheduler=function(t){o=t},z._setAsap=function(t){a=t},z._asap=a,z.prototype={constructor:z,then:b,catch:function(t){return this.then(null,t)}},z.polyfill=function(){var t=void 0;if(void 0!==V)t=V;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=z},z.Promise=z},e.exports=t()}).call(t,j(7),j(8))},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t};function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i(5);var r,s=i(4),a=(r=s)&&r.__esModule?r:{default:r},l=h(i(0)),c=h(i(1)),u=i(2),d=i(3);function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}var p,f=(n(g,[{key:"on",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:function(){};return"function"==typeof i&&this.listeners.hasOwnProperty(t)&&this.listeners[t].push(i),this}},{key:"show",value:function(){var i=this;if(this.showing||this.shown)return this;!0===this.options.killer?g.closeAll():"string"==typeof this.options.killer&&g.closeAll(this.options.killer);var t=c.getQueueCounts(this.options.queue);if(t.current>=t.maxVisible||c.PageHidden&&this.options.visibilityControl)return c.addToQueue(this),c.PageHidden&&this.hasSound&&l.inArray("docHidden",this.options.sounds.conditions)&&l.createAudioElements(this),c.PageHidden&&l.inArray("docHidden",this.options.titleCount.conditions)&&c.docTitle.increment(),this;if(c.Store[this.id]=this,c.fire(this,"beforeShow"),this.showing=!0,this.closing)return this.showing=!1,this;if(c.build(this),c.handleModal(this),this.options.force?this.layoutDom.insertBefore(this.barDom,this.layoutDom.firstChild):this.layoutDom.appendChild(this.barDom),this.hasSound&&!this.soundPlayed&&l.inArray("docVisible",this.options.sounds.conditions)&&l.createAudioElements(this),l.inArray("docVisible",this.options.titleCount.conditions)&&c.docTitle.increment(),this.shown=!0,this.closed=!1,c.hasButtons(this)&&Object.keys(this.options.buttons).forEach(function(e){var t=i.barDom.querySelector("#"+i.options.buttons[e].id);l.addListener(t,"click",function(t){l.stopPropagation(t),i.options.buttons[e].cb(i)})}),this.progressDom=this.barDom.querySelector(".noty_progressbar"),l.inArray("click",this.options.closeWith)&&(l.addClass(this.barDom,"noty_close_with_click"),l.addListener(this.barDom,"click",function(t){l.stopPropagation(t),c.fire(i,"onClick"),i.close()},!1)),l.addListener(this.barDom,"mouseenter",function(){c.fire(i,"onHover")},!1),this.options.timeout&&l.addClass(this.barDom,"noty_has_timeout"),this.options.progressBar&&l.addClass(this.barDom,"noty_has_progressbar"),l.inArray("button",this.options.closeWith)){l.addClass(this.barDom,"noty_close_with_button");var e=document.createElement("div");l.addClass(e,"noty_close_button"),e.innerHTML="×",this.barDom.appendChild(e),l.addListener(e,"click",function(t){l.stopPropagation(t),i.close()},!1)}return c.fire(this,"onShow"),null===this.options.animation.open?this.promises.show=new a.default(function(t){t()}):"function"==typeof this.options.animation.open?this.promises.show=new a.default(this.options.animation.open.bind(this)):(l.addClass(this.barDom,this.options.animation.open),this.promises.show=new a.default(function(t){l.addListener(i.barDom,l.animationEndEvents,function(){l.removeClass(i.barDom,i.options.animation.open),t()})})),this.promises.show.then(function(){var t=i;setTimeout(function(){c.openFlow(t)},100)}),this}},{key:"stop",value:function(){return c.dequeueClose(this),this}},{key:"resume",value:function(){return c.queueClose(this),this}},{key:"setTimeout",value:(p=function(t){if(this.stop(),this.options.timeout=t,this.barDom){this.options.timeout?l.addClass(this.barDom,"noty_has_timeout"):l.removeClass(this.barDom,"noty_has_timeout");var e=this;setTimeout(function(){e.resume()},100)}return this},m.toString=function(){return p.toString()},m)},{key:"setText",value:function(t,e){var i=1<arguments.length&&void 0!==e&&e;return this.barDom&&(this.barDom.querySelector(".noty_body").innerHTML=t),i&&(this.options.text=t),this}},{key:"setType",value:function(t,e){var i=this,n=1<arguments.length&&void 0!==e&&e;return this.barDom&&(l.classList(this.barDom).split(" ").forEach(function(t){"noty_type__"===t.substring(0,11)&&l.removeClass(i.barDom,t)}),l.addClass(this.barDom,"noty_type__"+t)),n&&(this.options.type=t),this}},{key:"setTheme",value:function(t,e){var i=this,n=1<arguments.length&&void 0!==e&&e;return this.barDom&&(l.classList(this.barDom).split(" ").forEach(function(t){"noty_theme__"===t.substring(0,12)&&l.removeClass(i.barDom,t)}),l.addClass(this.barDom,"noty_theme__"+t)),n&&(this.options.theme=t),this}},{key:"close",value:function(){var e=this;return this.closed||(this.shown?(c.fire(this,"onClose"),this.closing=!0,null===this.options.animation.close||!1===this.options.animation.close?this.promises.close=new a.default(function(t){t()}):"function"==typeof this.options.animation.close?this.promises.close=new a.default(this.options.animation.close.bind(this)):(l.addClass(this.barDom,this.options.animation.close),this.promises.close=new a.default(function(t){l.addListener(e.barDom,l.animationEndEvents,function(){e.options.force?l.remove(e.barDom):c.ghostFix(e),t()})})),this.promises.close.then(function(){c.closeFlow(e),c.handleModalClose(e)}),this.closed=!0):c.removeFromQueue(this)),this}}],[{key:"closeAll",value:function(t){var e=0<arguments.length&&void 0!==t&&t;return Object.keys(c.Store).forEach(function(t){e?c.Store[t].options.queue===e&&c.Store[t].killable&&c.Store[t].close():c.Store[t].killable&&c.Store[t].close()}),this}},{key:"clearQueue",value:function(t){var e=0<arguments.length&&void 0!==t?t:"global";return c.Queues.hasOwnProperty(e)&&(c.Queues[e].queue=[]),this}},{key:"overrideDefaults",value:function(t){return c.Defaults=l.deepExtend({},c.Defaults,t),this}},{key:"setMaxVisible",value:function(t,e){var i=0<arguments.length&&void 0!==t?t:c.DefaultMaxVisible,n=1<arguments.length&&void 0!==e?e:"global";return c.Queues.hasOwnProperty(n)||(c.Queues[n]={maxVisible:i,queue:[]}),c.Queues[n].maxVisible=i,this}},{key:"button",value:function(t,e,i,n){var o=1<arguments.length&&void 0!==e?e:null,r=i,s=3<arguments.length&&void 0!==n?n:{};return new u.NotyButton(t,o,r,s)}},{key:"version",value:function(){return"3.2.0-beta"}},{key:"Push",value:function(t){return new d.Push(t)}},{key:"Queues",get:function(){return c.Queues}},{key:"PageHidden",get:function(){return c.PageHidden}}]),g);function g(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),this.options=l.deepExtend({},c.Defaults,t),c.Store[this.options.id]?c.Store[this.options.id]:(this.id=this.options.id||l.generateID("bar"),this.closeTimer=-1,this.barDom=null,this.layoutDom=null,this.progressDom=null,this.showing=!1,this.shown=!1,this.closed=!1,this.closing=!1,this.killable=this.options.timeout||0<this.options.closeWith.length,this.hasSound=0<this.options.sounds.sources.length,this.soundPlayed=!1,this.listeners={beforeShow:[],onShow:[],afterShow:[],onClose:[],afterClose:[],onClick:[],onHover:[],onTemplate:[]},this.promises={show:null,close:null},this.on("beforeShow",this.options.callbacks.beforeShow),this.on("onShow",this.options.callbacks.onShow),this.on("afterShow",this.options.callbacks.afterShow),this.on("onClose",this.options.callbacks.onClose),this.on("afterClose",this.options.callbacks.afterClose),this.on("onClick",this.options.callbacks.onClick),this.on("onHover",this.options.callbacks.onHover),this.on("onTemplate",this.options.callbacks.onTemplate),this)}function m(t){return p.apply(this,arguments)}e.default=f,"undefined"!=typeof window&&l.visibilityChangeFlow(),t.exports=e.default},function(t,e){var i,n,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){var t=a(h);u=!0;for(var e=c.length;e;){for(l=c,c=[];++d<e;)l&&l[d].run();d=-1,e=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new f(t,e)),1!==c.length||u||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(pMe,qMe){var rMe;rMe=function(){return this}();try{rMe=rMe||Function("return this")()||eval("this")}catch(t){"object"==typeof window&&(rMe=window)}pMe.exports=rMe},function(t,e){}],fBe.c=eBe,fBe.i=function(t){return t},fBe.d=function(t,e,i){fBe.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},fBe.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return fBe.d(e,"a",e),e},fBe.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},fBe.p="",fBe(fBe.s=6);function fBe(t){if(eBe[t])return eBe[t].exports;var e=eBe[t]={i:t,l:!1,exports:{}};return dBe[t].call(e.exports,e,e.exports,fBe),e.l=!0,e.exports}var dBe,eBe}),function(g){function m(t,e){var i=t.attr("id");window["minutes_H"+i]==e.minutes&&window["seconds_H"+i]==e.seconds&&window["hours_H"+i]==e.hours?(window["hours_H"+i].toString().length<2&&(window["hours_H"+i]="0"+window["hours_H"+i]),x(t,window["hours_H"+i]+e.timeSeparator+"00"+e.timeSeparator+"00"),window["seconds_H"+i]=60-e.tickInterval,window["minutes_H"+i]=59,0!=window["hours_H"+i]?window["hours_H"+i]--:(delete window["hours_H"+i],delete window["minutes_H"+i],delete window["seconds_H"+i],clearInterval(window["timer_H"+i]),u(t,e))):(window["hours_H"+i].toString().length<2&&(window["hours_H"+i]="0"+window["hours_H"+i]),window["minutes_H"+i].toString().length<2&&(window["minutes_H"+i]="0"+window["minutes_H"+i]),window["seconds_H"+i].toString().length<2&&(window["seconds_H"+i]="0"+window["seconds_H"+i]),x(t,window["hours_H"+i]+e.timeSeparator+window["minutes_H"+i]+e.timeSeparator+window["seconds_H"+i]),window["seconds_H"+i]-=e.tickInterval,0!=window["minutes_H"+i]&&window["seconds_H"+i]<0&&(window["minutes_H"+i]--,window["seconds_H"+i]=60-e.tickInterval),0==window["minutes_H"+i]&&window["seconds_H"+i]<0&&0!=window["hours_H"+i]&&(window["hours_H"+i]--,window["minutes_H"+i]=59,window["seconds_H"+i]=60-e.tickInterval),0==window["minutes_H"+i]&&window["seconds_H"+i]<0&&0==window["hours_H"+i]&&(delete window["hours_H"+i],delete window["minutes_H"+i],delete window["seconds_H"+i],clearInterval(window["timer_H"+i]),u(t,e))),i=null}function v(t,e){var i=t.attr("id");window["minutes_M"+i]==e.minutes&&window["seconds_M"+i]==e.seconds?(window["minutes_M"+i].toString().length<2&&(window["minutes_M"+i]="0"+window["minutes_M"+i]),x(t,window["minutes_M"+i]+e.timeSeparator+"00"),window["seconds_M"+i]=60-e.tickInterval,0!=window["minutes_M"+i]?window["minutes_M"+i]--:(delete window["hours_M"+i],delete window["minutes_M"+i],delete window["seconds_M"+i],clearInterval(window["timer_M"+i]),u(t,e))):(window["minutes_M"+i].toString().length<2&&(window["minutes_M"+i]="0"+window["minutes_M"+i]),window["seconds_M"+i].toString().length<2&&(window["seconds_M"+i]="0"+window["seconds_M"+i]),x(t,window["minutes_M"+i]+e.timeSeparator+window["seconds_M"+i]),window["seconds_M"+i]-=e.tickInterval,0!=window["minutes_M"+i]&&window["seconds_M"+i]<0&&(window["minutes_M"+i]--,window["seconds_M"+i]=60-e.tickInterval),0==window["minutes_M"+i]&&window["seconds_M"+i]<0&&(delete window["hours_M"+i],delete window["minutes_M"+i],delete window["seconds_M"+i],clearInterval(window["timer_M"+i]),u(t,e))),i=null}function y(t,e){var i=t.attr("id");window["seconds_S"+i].toString().length<2&&(window["seconds_S"+i]="0"+window["seconds_S"+i]),x(t,window["seconds_S"+i]+" sec"),window["seconds_S"+i]-=e.tickInterval,window["seconds_S"+i]<0&&(delete window["hours_S"+i],delete window["minutes_S"+i],delete window["seconds_S"+i],clearInterval(window["timer_S"+i]),u(t,e)),i=null}function b(t,e){var i=t.attr("id");window["minutes_HM"+i]==e.minutes&&window["hours_HM"+i]==e.hours?(window["hours_HM"+i].toString().length<2&&(window["hours_HM"+i]="0"+window["hours_HM"+i]),window["minutes_HM"+i].toString().length<2&&(window["minutes_HM"+i]="0"+window["minutes_HM"+i]),x(t,window["hours_HM"+i]+e.timeSeparator+window["minutes_HM"+i]+e.timeSeparator+"00"),0!=window["hours_HM"+i]&&0==window["minutes_HM"+i]?(window["hours_HM"+i]--,window["minutes_HM"+i]=59,window["seconds_HM"+i]=60-e.tickInterval):(0==window["hours_HM"+i]&&window["minutes_HM"+i],window["seconds_HM"+i]=60-e.tickInterval,window["minutes_HM"+i]--),0==window["hours_HM"+i]&&0==window["minutes_HM"+i]&&60==window["seconds_HM"+i]&&(delete window["hours_HM"+i],delete window["minutes_HM"+i],delete window["seconds_HM"+i],clearInterval(window["timer_HM"+i]),u(t,e))):(window["hours_HM"+i].toString().length<2&&(window["hours_HM"+i]="0"+window["hours_HM"+i]),window["minutes_HM"+i].toString().length<2&&(window["minutes_HM"+i]="0"+window["minutes_HM"+i]),window["seconds_HM"+i].toString().length<2&&(window["seconds_HM"+i]="0"+window["seconds_HM"+i]),x(t,window["hours_HM"+i]+e.timeSeparator+window["minutes_HM"+i]+e.timeSeparator+window["seconds_HM"+i]),window["seconds_HM"+i]-=e.tickInterval,0!=window["minutes_HM"+i]&&window["seconds_HM"+i]<0&&(window["minutes_HM"+i]--,window["seconds_HM"+i]=60-e.tickInterval),0==window["minutes_HM"+i]&&window["seconds_HM"+i]<0&&0!=window["hours_HM"+i]&&(window["hours_HM"+i]--,window["minutes_HM"+i]=59,window["seconds_HM"+i]=60-e.tickInterval),0==window["minutes_HM"+i]&&window["seconds_HM"+i]<0&&0==window["hours_HM"+i]&&(delete window["hours_HM"+i],delete window["minutes_HM"+i],delete window["seconds_HM"+i],clearInterval(window["timer_HM"+i]),u(t,e))),i=null}function _(t,e){var i=t.attr("id");window["minutes_MS"+i]==e.minutes&&window["seconds_MS"+i]==e.seconds?(window["minutes_MS"+i].toString().length<2&&(window["minutes_MS"+i]="0"+window["minutes_MS"+i]),window["seconds_MS"+i].toString().length<2&&(window["seconds_MS"+i]="0"+window["seconds_MS"+i]),x(t,window["minutes_MS"+i]+e.timeSeparator+window["seconds_MS"+i]),0!=window["minutes_MS"+i]&&0==window["seconds_MS"+i]?(window["minutes_MS"+i]--,window["seconds_MS"+i]=60-e.tickInterval):0==window["minutes_MS"+i]&&0==window["seconds_MS"+i]?(delete window["hours_MS"+i],delete window["minutes_MS"+i],delete window["seconds_MS"+i],clearInterval(window["timer_MS"+i]),u(t,e)):window["seconds_MS"+i]-=e.tickInterval):(window["minutes_MS"+i].toString().length<2&&(window["minutes_MS"+i]="0"+window["minutes_MS"+i]),window["seconds_MS"+i].toString().length<2&&(window["seconds_MS"+i]="0"+window["seconds_MS"+i]),x(t,window["minutes_MS"+i]+e.timeSeparator+window["seconds_MS"+i]),window["seconds_MS"+i]-=e.tickInterval,0!=window["minutes_MS"+i]&&window["seconds_MS"+i]<0&&(window["minutes_MS"+i]--,window["seconds_MS"+i]=60-e.tickInterval),0==window["minutes_MS"+i]&&window["seconds_MS"+i]<0&&(delete window["hours_MS"+i],delete window["minutes_MS"+i],delete window["seconds_MS"+i],clearInterval(window["timer_MS"+i]),u(t,e))),i=null}function E(t,e){var i=t.attr("id");window["seconds_HS"+i]==e.seconds&&window["hours_HS"+i]==e.hours?(window["hours_HS"+i].toString().length<2&&(window["hours_HS"+i]="0"+window["hours_HS"+i]),window["seconds_HS"+i].toString().length<2&&(window["seconds_HS"+i]="0"+window["seconds_HS"+i]),x(t,window["hours_HS"+i]+e.timeSeparator+"00"+e.timeSeparator+window["seconds_HS"+i]),0==window["hours_HS"+i]&&0==window["seconds_HS"+i]?(delete window["hours_HS"+i],delete window["minutes_HS"+i],delete window["seconds_HS"+i],clearInterval(window["timer_HS"+i]),u(t,e)):0!=window["hours_HS"+i]&&0==window["seconds_HS"+i]?(window["hours_HS"+i]--,window["minutes_HS"+i]=59,window["seconds_HS"+i]=60-e.tickInterval):window["seconds_HS"+i]-=e.tickInterval):(window["hours_HS"+i].toString().length<2&&(window["hours_HS"+i]="0"+window["hours_HS"+i]),window["minutes_HS"+i].toString().length<2&&(window["minutes_HS"+i]="0"+window["minutes_HS"+i]),window["seconds_HS"+i].toString().length<2&&(window["seconds_HS"+i]="0"+window["seconds_HS"+i]),x(t,window["hours_HS"+i]+e.timeSeparator+window["minutes_HS"+i]+e.timeSeparator+window["seconds_HS"+i]),window["seconds_HS"+i]-=e.tickInterval,0!=window["minutes_HS"+i]&&window["seconds_HS"+i]<0&&(window["minutes_HS"+i]--,window["seconds_HS"+i]=60-e.tickInterval),0==window["minutes_HS"+i]&&window["seconds_HS"+i]<0&&0!=window["hours_HS"+i]&&(window["hours_HS"+i]--,window["minutes_HS"+i]=59,window["seconds_HS"+i]=60-e.tickInterval),0==window["minutes_HS"+i]&&window["seconds_HS"+i]<0&&0==window["hours_HS"+i]&&(delete window["hours_HS"+i],delete window["minutes_HS"+i],delete window["seconds_HS"+i],clearInterval(window["timer_HS"+i]),u(t,e))),i=null}function w(t,e){var i=t.attr("id");window["minutes_HMS"+i]==e.minutes&&window["seconds_HMS"+i]==e.seconds&&window["hours_HMS"+i]==e.hours?(window["hours_HMS"+i].toString().length<2&&(window["hours_HMS"+i]="0"+window["hours_HMS"+i]),window["minutes_HMS"+i].toString().length<2&&(window["minutes_HMS"+i]="0"+window["minutes_HMS"+i]),window["seconds_HMS"+i].toString().length<2&&(window["seconds_HMS"+i]="0"+window["seconds_HMS"+i]),x(t,window["hours_HMS"+i]+e.timeSeparator+window["minutes_HMS"+i]+e.timeSeparator+window["seconds_HMS"+i]),0==window["hours_HMS"+i]&&0==window["minutes_HMS"+i]&&0==window["seconds_HMS"+i]?(delete window["hours_HMS"+i],delete window["minutes_HMS"+i],delete window["seconds_HMS"+i],clearInterval(window["timer_HMS"+i]),u(t,e)):0!=window["hours_HMS"+i]&&0==window["minutes_HMS"+i]&&0==window["seconds_HMS"+i]?(window["hours_HMS"+i]--,window["minutes_HMS"+i]=59,window["seconds_HMS"+i]=60-e.tickInterval):0==window["hours_HMS"+i]&&0!=window["minutes_HMS"+i]&&0==window["seconds_HMS"+i]?(window["minutes_HMS"+i]--,window["seconds_HMS"+i]=60-e.tickInterval):0!=window["hours_HMS"+i]&&0!=window["minutes_HMS"+i]&&0==window["seconds_HMS"+i]?(window["minutes_HMS"+i]--,window["seconds_HMS"+i]=60-e.tickInterval):window["seconds_HMS"+i]-=e.tickInterval):(window["hours_HMS"+i].toString().length<2&&(window["hours_HMS"+i]="0"+window["hours_HMS"+i]),window["minutes_HMS"+i].toString().length<2&&(window["minutes_HMS"+i]="0"+window["minutes_HMS"+i]),window["seconds_HMS"+i].toString().length<2&&(window["seconds_HMS"+i]="0"+window["seconds_HMS"+i]),x(t,window["hours_HMS"+i]+e.timeSeparator+window["minutes_HMS"+i]+e.timeSeparator+window["seconds_HMS"+i]),window["seconds_HMS"+i]-=e.tickInterval,0!=window["minutes_HMS"+i]&&window["seconds_HMS"+i]<0&&(window["minutes_HMS"+i]--,window["seconds_HMS"+i]=60-e.tickInterval),0==window["minutes_HMS"+i]&&window["seconds_HMS"+i]<0&&0!=window["hours_HMS"+i]&&(window["hours_HMS"+i]--,window["minutes_HMS"+i]=59,window["seconds_HMS"+i]=60-e.tickInterval),0==window["minutes_HMS"+i]&&window["seconds_HMS"+i]<0&&0==window["hours_HMS"+i]&&(delete window["hours_HMS"+i],delete window["minutes_HMS"+i],delete window["seconds_HMS"+i],clearInterval(window["timer_HMS"+i]),u(t,e))),i=null}function C(t,e,i){var n=t.attr("id"),o="withnoStart"==i?window["dateTime"+n]:window["endDate"+n],r="withnoStart"==i?window["startTime"+n]:window["startDate"+n],s=Math.floor((o-r)/864e5),a=Math.floor((o-r)%864e5/36e5),l=Math.floor((o-r)%864e5/6e4)%60,c=Math.floor((o-r)%864e5/1e3)%60%60;0<o-r?(s.toString().length<2&&(s="0"+s),a.toString().length<2&&(a="0"+a),l.toString().length<2&&(l="0"+l),c.toString().length<2&&(c="0"+c),x(t,s+e.timeSeparator+a+e.timeSeparator+l+e.timeSeparator+c),"withnoStart"==i?window["startTime"+n].setSeconds(window["startTime"+n].getSeconds()+e.tickInterval):window["startDate"+n].setSeconds(window["startDate"+n].getSeconds()+e.tickInterval)):(x(t,"00"+e.timeSeparator+"00"+e.timeSeparator+"00"+e.timeSeparator+"00"),"withnoStart"==i?(delete window["dateTime"+n],delete window["startTime"+n],clearInterval(window["timer_givenDate"+n])):"withStart"==i&&(delete window["startDate"+n],delete window["endDate"+n],clearInterval(window["timer_startDate"+n])),u(t,e)),n=null}function T(t,e){if(1==window["currentTime"+t.attr("id")]){var i=new Date,n=i.getHours(),o=i.getMinutes(),r=i.getSeconds();n.toString().length<2&&(n="0"+n),o.toString().length<2&&(o="0"+o),r.toString().length<2&&(r="0"+r),x(t,n+e.timeSeparator+o+e.timeSeparator+r)}else alert("Set Current Time option.")}function u(t,e){null!=e.timeUp&&1==g.isFunction(e.timeUp)&&e.timeUp.apply(t,[]),null!=e.expiryUrl&&(window.location=e.expiryUrl)}function x(t,e){var i=e;if(void 0!==window["regexpMatchFormat_"+t.attr("id")]&&void 0!==window["regexpReplaceWith_"+t.attr("id")]){var n=new RegExp(window["regexpMatchFormat_"+t.attr("id")]);i=e.replace(n,window["regexpReplaceWith_"+t.attr("id")])}t.html(i)}function D(t,e,i,n){g("#"+i.pauseButton).click(function(){"resume"!=g(this).val()?(g("#"+i.pauseButton).val("resume").text("Resume"),clearInterval(window["timer_"+e+t.attr("id")])):"resume"==g(this).val()&&(g("#"+i.pauseButton).val("pause").text("Pause"),window["timer_"+e+t.attr("id")]=setInterval(function(){n(t,i)},1e3*i.tickInterval))})}function I(t,e,i,n){g("#"+i.stopButton).click(function(){"start"!=g(this).val()?(g("#"+i.stopButton).val("start").text("Start"),clearInterval(window["timer_"+e+t.attr("id")]),window["hours_"+e+t.attr("id")]=i.hours,window["minutes_"+e+t.attr("id")]=i.minutes,window["seconds_"+e+t.attr("id")]=i.seconds,n(t,i)):"start"==g(this).val()&&(g("#"+i.stopButton).val("stop").text("Stop"),window["timer_"+e+t.attr("id")]=setInterval(function(){n(t,i)},1e3*i.tickInterval))})}g.fn.countdowntimer=function(t){return this.each(function(){!function(t,e){var i=g.extend({},g.fn.countdowntimer.defaults,e);(t=t).addClass("style");var n,o,r,s;n=i.size,o=i.borderColor,r=i.fontColor,s=i.backgroundColor,null!=e.regexpMatchFormat&&null!=e.regexpReplaceWith&&null==e.timeSeparator&&(window["regexpMatchFormat_"+t.attr("id")]=e.regexpMatchFormat,window["regexpReplaceWith_"+t.attr("id")]=e.regexpReplaceWith);if(null!=e.borderColor||null!=e.fontColor||null!=e.backgroundColor){var a={background:s,color:r,"border-color":o};t.css(a)}else t.addClass("colorDefinition");if(null!=e.size)switch(n){case"xl":t.addClass("size_xl");break;case"lg":t.addClass("size_lg");break;case"md":t.addClass("size_md");break;case"sm":t.addClass("size_sm");break;case"xs":t.addClass("size_xs")}else"sm"==n&&t.addClass("size_sm");if(null!=e.startDate||null!=e.dateAndTime||null!=e.currentTime||null==e.hours&&null==e.minutes&&null==e.seconds)if(null!=e.startDate&&null!=e.dateAndTime&&null==e.currentTime){startDate="",endDate="",timer_startDate="",window["startDate"+t.attr("id")]=new Date(i.startDate),window["endDate"+t.attr("id")]=new Date(i.dateAndTime),C(t,i,l="withStart"),window["timer_startDate"+t.attr("id")]=setInterval(function(){C(t,i,l)},1e3*i.tickInterval)}else if(null==e.startDate&&null!=e.dateAndTime&&null==e.currentTime){startTime="",dateTime="",timer_givenDate="";var l,c=i.startDate.getHours()<10?"0"+i.startDate.getHours():i.startDate.getHours(),u=i.startDate.getMinutes()<10?"0"+i.startDate.getMinutes():i.startDate.getMinutes(),d=i.startDate.getSeconds()<10?"0"+i.startDate.getSeconds():i.startDate.getSeconds(),h=i.startDate.getMonth()+1<10?"0"+(i.startDate.getMonth()+1):i.startDate.getMonth()+1,p=i.startDate.getDate()<10?"0"+i.startDate.getDate():i.startDate.getDate(),f=i.startDate.getFullYear();window["startTime"+t.attr("id")]=new Date(f+"/"+h+"/"+p+" "+c+":"+u+":"+d),window["dateTime"+t.attr("id")]=new Date(i.dateAndTime),C(t,i,l="withnoStart"),window["timer_givenDate"+t.attr("id")]=setInterval(function(){C(t,i,l)},1e3*i.tickInterval)}else null!=e.currentTime?(currentTime="",timer_currentDate="",window["currentTime"+t.attr("id")]=i.currentTime,T(t,i),window["timer_currentDate"+t.attr("id")]=setInterval(function(){T(t,i)},1e3*i.tickInterval)):(countSeconds="",timer_secondsTimer="",window["countSeconds"+t.attr("id")]=i.seconds,window["timer_secondsTimer"+t.attr("id")]=setInterval(function(){!function(t){var e=t.attr("id");window["countSeconds"+e].toString().length<2&&(window["countSeconds"+e]="0"+window["countSeconds"+e]);x(t,window["countSeconds"+e]+" sec"),window["countSeconds"+e]--,-1==window["countSeconds"+e]&&(delete window["countSeconds"+e],clearInterval(window["timer_secondsTimer"+e]));e=null}(t)},1e3));else null!=e.hours&&null==e.minutes&&null==e.seconds?(hours_H="",minutes_H="",seconds_H="",timer_H="",window["hours_H"+t.attr("id")]=i.hours,window["minutes_H"+t.attr("id")]=i.minutes,window["seconds_H"+t.attr("id")]=i.seconds,null!=e.pauseButton&&D(t,"H",i,m),null!=e.stopButton&&I(t,"H",i,m),m(t,i),window["timer_H"+t.attr("id")]=setInterval(function(){m(t,i)},1e3*i.tickInterval)):null==e.hours&&null!=e.minutes&&null==e.seconds?(hours_M="",minutes_M="",seconds_M="",timer_M="",window["hours_M"+t.attr("id")]=i.hours,window["minutes_M"+t.attr("id")]=i.minutes,window["seconds_M"+t.attr("id")]=i.seconds,null!=e.pauseButton&&D(t,"M",i,v),null!=e.stopButton&&I(t,"M",i,v),v(t,i),window["timer_M"+t.attr("id")]=setInterval(function(){v(t,i)},1e3*i.tickInterval)):null==e.hours&&null==e.minutes&&null!=e.seconds?(hours_S="",minutes_S="",seconds_S="",timer_S="",window["hours_S"+t.attr("id")]=i.hours,window["minutes_S"+t.attr("id")]=i.minutes,window["seconds_S"+t.attr("id")]=i.seconds,null!=e.pauseButton&&D(t,"S",i,y),null!=e.stopButton&&I(t,"S",i,y),y(t,i),window["timer_S"+t.attr("id")]=setInterval(function(){y(t,i)},1e3*i.tickInterval)):null!=e.hours&&null!=e.minutes&&null==e.seconds?(hours_HM="",minutes_HM="",seconds_HM="",timer_HM="",window["hours_HM"+t.attr("id")]=i.hours,window["minutes_HM"+t.attr("id")]=i.minutes,window["seconds_HM"+t.attr("id")]=i.seconds,null!=e.pauseButton&&D(t,"HM",i,b),null!=e.stopButton&&I(t,"HM",i,b),b(t,i),window["timer_HM"+t.attr("id")]=setInterval(function(){b(t,i)},1e3*i.tickInterval)):null==e.hours&&null!=e.minutes&&null!=e.seconds?(hours_MS="",minutes_MS="",seconds_MS="",timer_MS="",window["hours_MS"+t.attr("id")]=i.hours,window["minutes_MS"+t.attr("id")]=i.minutes,window["seconds_MS"+t.attr("id")]=i.seconds,null!=e.pauseButton&&D(t,"MS",i,_),null!=e.stopButton&&I(t,"MS",i,_),_(t,i),window["timer_MS"+t.attr("id")]=setInterval(function(){_(t,i)},1e3*i.tickInterval)):null!=e.hours&&null==e.minutes&&null!=e.seconds?(hours_HS="",minutes_HS="",seconds_HS="",timer_HS="",window["hours_HS"+t.attr("id")]=i.hours,window["minutes_HS"+t.attr("id")]=i.minutes,window["seconds_HS"+t.attr("id")]=i.seconds,null!=e.pauseButton&&D(t,"HS",i,E),null!=e.stopButton&&I(t,"HS",i,E),E(t,i),window["timer_HS"+t.attr("id")]=setInterval(function(){E(t,i)},1e3*i.tickInterval)):null!=e.hours&&null!=e.minutes&&null!=e.seconds&&(hours_HMS="",minutes_HMS="",seconds_HMS="",timer_HMS="",window["hours_HMS"+t.attr("id")]=i.hours,window["minutes_HMS"+t.attr("id")]=i.minutes,window["seconds_HMS"+t.attr("id")]=i.seconds,null!=e.pauseButton&&D(t,"HMS",i,w),null!=e.stopButton&&I(t,"HMS",i,w),w(t,i),window["timer_HMS"+t.attr("id")]=setInterval(function(){w(t,i)},1e3*i.tickInterval))}(g(this),t)})},g.fn.countdowntimer.defaults={hours:0,minutes:0,seconds:60,startDate:new Date,dateAndTime:new Date("0000/00/00 00:00:00"),currentTime:!1,size:"sm",borderColor:"#F0068E",fontColor:"#FFFFFF",backgroundColor:"#000000",timeSeparator:":",tickInterval:1,timeUp:null,expiryUrl:null,regexpMatchFormat:null,regexpReplaceWith:null,pauseButton:null,stopButton:null}}(jQuery),function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=function(t,e){return void 0===e&&(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),i(e),e}:i(jQuery)}(function(u){var t=function(){if(u&&u.fn&&u.fn.select2&&u.fn.select2.amd)var t=u.fn.select2.amd;var e,i,n,p,r,s,f,g,m,v,y,b,o,a,_;function E(t,e){return o.call(t,e)}function l(t,e){var i,n,o,r,s,a,l,c,u,d,h,p=e&&e.split("/"),f=y.map,g=f&&f["*"]||{};if(t){for(s=(t=t.split("/")).length-1,y.nodeIdCompat&&_.test(t[s])&&(t[s]=t[s].replace(_,"")),"."===t[0].charAt(0)&&p&&(t=p.slice(0,p.length-1).concat(t)),u=0;u<t.length;u++)if("."===(h=t[u]))t.splice(u,1),u-=1;else if(".."===h){if(0===u||1===u&&".."===t[2]||".."===t[u-1])continue;0<u&&(t.splice(u-1,2),u-=2)}t=t.join("/")}if((p||g)&&f){for(u=(i=t.split("/")).length;0<u;u-=1){if(n=i.slice(0,u).join("/"),p)for(d=p.length;0<d;d-=1)if(o=(o=f[p.slice(0,d).join("/")])&&o[n]){r=o,a=u;break}if(r)break;!l&&g&&g[n]&&(l=g[n],c=u)}!r&&l&&(r=l,a=c),r&&(i.splice(0,a,r),t=i.join("/"))}return t}function w(e,i){return function(){var t=a.call(arguments,0);return"string"!=typeof t[0]&&1===t.length&&t.push(null),s.apply(p,t.concat([e,i]))}}function C(e){return function(t){m[e]=t}}function T(t){if(E(v,t)){var e=v[t];delete v[t],b[t]=!0,r.apply(p,e)}if(!E(m,t)&&!E(b,t))throw new Error("No "+t);return m[t]}function c(t){var e,i=t?t.indexOf("!"):-1;return-1<i&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function x(t){return t?c(t):[]}return t&&t.requirejs||(t?i=t:t={},m={},v={},y={},b={},o=Object.prototype.hasOwnProperty,a=[].slice,_=/\.js$/,f=function(t,e){var i,n=c(t),o=n[0],r=e[1];return t=n[1],o&&(i=T(o=l(o,r))),o?t=i&&i.normalize?i.normalize(t,function(e){return function(t){return l(t,e)}}(r)):l(t,r):(o=(n=c(t=l(t,r)))[0],t=n[1],o&&(i=T(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:i}},g={require:function(t){return w(t)},exports:function(t){var e=m[t];return void 0!==e?e:m[t]={}},module:function(t){return{id:t,uri:"",exports:m[t],config:function(t){return function(){return y&&y.config&&y.config[t]||{}}}(t)}}},r=function(t,e,i,n){var o,r,s,a,l,c,u,d=[],h=typeof i;if(c=x(n=n||t),"undefined"==h||"function"==h){for(e=!e.length&&i.length?["require","exports","module"]:e,l=0;l<e.length;l+=1)if("require"===(r=(a=f(e[l],c)).f))d[l]=g.require(t);else if("exports"===r)d[l]=g.exports(t),u=!0;else if("module"===r)o=d[l]=g.module(t);else if(E(m,r)||E(v,r)||E(b,r))d[l]=T(r);else{if(!a.p)throw new Error(t+" missing "+r);a.p.load(a.n,w(n,!0),C(r),{}),d[l]=m[r]}s=i?i.apply(m[t],d):void 0,t&&(o&&o.exports!==p&&o.exports!==m[t]?m[t]=o.exports:s===p&&u||(m[t]=s))}else t&&(m[t]=i)},e=i=s=function(t,e,i,n,o){if("string"==typeof t)return g[t]?g[t](e):T(f(t,x(e)).f);if(!t.splice){if((y=t).deps&&s(y.deps,y.callback),!e)return;e.splice?(t=e,e=i,i=null):t=p}return e=e||function(){},"function"==typeof i&&(i=n,n=o),n?r(p,t,e,i):setTimeout(function(){r(p,t,e,i)},4),s},s.config=function(t){return s(t)},e._defined=m,(n=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),E(m,t)||E(v,t)||(v[t]=[t,e,i])}).amd={jQuery:!0},t.requirejs=e,t.require=i,t.define=n),t.define("almond",function(){}),t.define("jquery",[],function(){var t=u||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(r){var t={};function u(t){var e=t.prototype,i=[];for(var n in e){"function"==typeof e[n]&&"constructor"!==n&&i.push(n)}return i}t.Extend=function(t,e){var i={}.hasOwnProperty;function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},t.Decorate=function(n,o){var t=u(o),e=u(n);function r(){var t=Array.prototype.unshift,e=o.prototype.constructor.length,i=n.prototype.constructor;0<e&&(t.call(arguments,n.prototype.constructor),i=o.prototype.constructor),i.apply(this,arguments)}o.displayName=n.displayName,r.prototype=new function(){this.constructor=r};for(var i=0;i<e.length;i++){var s=e[i];r.prototype[s]=n.prototype[s]}function a(t){var e=function(){};t in r.prototype&&(e=r.prototype[t]);var i=o.prototype[t];return function(){return Array.prototype.unshift.call(arguments,e),i.apply(this,arguments)}}for(var l=0;l<t.length;l++){var c=t[l];r.prototype[c]=a(c)}return r};function e(){this.listeners={}}return e.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},e.prototype.trigger=function(t){var e=Array.prototype.slice,i=e.call(arguments,1);this.listeners=this.listeners||{},null==i&&(i=[]),0===i.length&&i.push({}),(i[0]._type=t)in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},e.prototype.invoke=function(t,e){for(var i=0,n=t.length;i<n;i++)t[i].apply(this,e)},t.Observable=e,t.generateChars=function(t){for(var e="",i=0;i<t;i++){e+=Math.floor(36*Math.random()).toString(36)}return e},t.bind=function(t,e){return function(){t.apply(e,arguments)}},t._convertData=function(t){for(var e in t){var i=e.split("-"),n=t;if(1!==i.length){for(var o=0;o<i.length;o++){var r=i[o];(r=r.substring(0,1).toLowerCase()+r.substring(1))in n||(n[r]={}),o==i.length-1&&(n[r]=t[e]),n=n[r]}delete t[e]}}return t},t.hasScroll=function(t,e){var i=r(e),n=e.style.overflowX,o=e.style.overflowY;return(n!==o||"hidden"!==o&&"visible"!==o)&&("scroll"===n||"scroll"===o||(i.innerHeight()<e.scrollHeight||i.innerWidth()<e.scrollWidth))},t.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})},t.appendMany=function(t,e){if("1.7"===r.fn.jquery.substr(0,3)){var i=r();r.map(e,function(t){i=i.add(t)}),e=i}t.append(e)},t}),t.define("select2/results",["jquery","./utils"],function(h,t){function n(t,e,i){this.$element=t,this.data=i,this.options=e,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=h('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var e=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=h('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),n=this.options.get("translations").get(t.message);i.append(e(n(t.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i],o=this.option(n);e.push(o)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(t,e){e.find(".select2-results").append(t)},n.prototype.sort=function(t){return this.options.get("sorter")(t)},n.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option[aria-selected]"),e=t.filter("[aria-selected=true]");0<e.length?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var e=this;this.data.current(function(t){var n=h.map(t,function(t){return t.id.toString()});e.$results.find(".select2-results__option[aria-selected]").each(function(){var t=h(this),e=h.data(this,"data"),i=""+e.id;null!=e.element&&e.element.selected||null==e.element&&-1<h.inArray(i,n)?t.attr("aria-selected","true"):t.attr("aria-selected","false")})})},n.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},i=this.option(e);i.className+=" loading-results",this.$results.prepend(i)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var e=document.createElement("li");e.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};for(var n in t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==t.id&&delete i["aria-selected"],null!=t._resultId&&(e.id=t._resultId),t.title&&(e.title=t.title),t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]),i){var o=i[n];e.setAttribute(n,o)}if(t.children){var r=h(e),s=document.createElement("strong");s.className="select2-results__group";h(s);this.template(t,s);for(var a=[],l=0;l<t.children.length;l++){var c=t.children[l],u=this.option(c);a.push(u)}var d=h("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});d.append(a),r.append(s),r.append(d)}else this.template(t,e);return h.data(e,"data",t),e},n.prototype.bind=function(e,t){var l=this,i=e.id+"-results";this.$results.attr("id",i),e.on("results:all",function(t){l.clear(),l.append(t.data),e.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),e.on("results:append",function(t){l.append(t.data),e.isOpen()&&l.setClasses()}),e.on("query",function(t){l.hideMessages(),l.showLoading(t)}),e.on("select",function(){e.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),e.on("unselect",function(){e.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),e.on("open",function(){l.$results.attr("aria-expanded","true"),l.$results.attr("aria-hidden","false"),l.setClasses(),l.ensureHighlightVisible()}),e.on("close",function(){l.$results.attr("aria-expanded","false"),l.$results.attr("aria-hidden","true"),l.$results.removeAttr("aria-activedescendant")}),e.on("results:toggle",function(){var t=l.getHighlightedResults();0!==t.length&&t.trigger("mouseup")}),e.on("results:select",function(){var t=l.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?l.trigger("close",{}):l.trigger("select",{data:e})}}),e.on("results:previous",function(){var t=l.getHighlightedResults(),e=l.$results.find("[aria-selected]"),i=e.index(t);if(0!==i){var n=i-1;0===t.length&&(n=0);var o=e.eq(n);o.trigger("mouseenter");var r=l.$results.offset().top,s=o.offset().top,a=l.$results.scrollTop()+(s-r);0===n?l.$results.scrollTop(0):s-r<0&&l.$results.scrollTop(a)}}),e.on("results:next",function(){var t=l.getHighlightedResults(),e=l.$results.find("[aria-selected]"),i=e.index(t)+1;if(!(i>=e.length)){var n=e.eq(i);n.trigger("mouseenter");var o=l.$results.offset().top+l.$results.outerHeight(!1),r=n.offset().top+n.outerHeight(!1),s=l.$results.scrollTop()+r-o;0===i?l.$results.scrollTop(0):o<r&&l.$results.scrollTop(s)}}),e.on("results:focus",function(t){t.element.addClass("select2-results__option--highlighted")}),e.on("results:message",function(t){l.displayMessage(t)}),h.fn.mousewheel&&this.$results.on("mousewheel",function(t){var e=l.$results.scrollTop(),i=l.$results.get(0).scrollHeight-e+t.deltaY,n=0<t.deltaY&&e-t.deltaY<=0,o=t.deltaY<0&&i<=l.$results.height();n?(l.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):o&&(l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height()),t.preventDefault(),t.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var e=h(this),i=e.data("data");"true"!==e.attr("aria-selected")?l.trigger("select",{originalEvent:t,data:i}):l.options.get("multiple")?l.trigger("unselect",{originalEvent:t,data:i}):l.trigger("close",{})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var e=h(this).data("data");l.getHighlightedResults().removeClass("select2-results__option--highlighted"),l.trigger("results:focus",{data:e,element:h(this)})})},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]").index(t),i=this.$results.offset().top,n=t.offset().top,o=this.$results.scrollTop()+(n-i),r=n-i;o-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(o)}},n.prototype.template=function(t,e){var i=this.options.get("templateResult"),n=this.options.get("escapeMarkup"),o=i(t,e);null==o?e.style.display="none":"string"==typeof o?e.innerHTML=n(o):h(e).append(o)},n}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(i,t,o){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=i('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t},n.prototype.bind=function(t,e){var i=this,n=(t.id,t.id+"-results");this.container=t,this.$selection.on("focus",function(t){i.trigger("focus",t)}),this.$selection.on("blur",function(t){i._handleBlur(t)}),this.$selection.on("keydown",function(t){i.trigger("keypress",t),t.which===o.SPACE&&t.preventDefault()}),t.on("results:focus",function(t){i.$selection.attr("aria-activedescendant",t.data._resultId)}),t.on("selection:update",function(t){i.update(t.data)}),t.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",n),i._attachCloseHandler(t)}),t.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(t)}),t.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),t.on("disable",function(){i.$selection.attr("tabindex","-1")})},n.prototype._handleBlur=function(t){var e=this;window.setTimeout(function(){document.activeElement==e.$selection[0]||i.contains(e.$selection[0],document.activeElement)||e.trigger("blur",t)},1)},n.prototype._attachCloseHandler=function(t){i(document.body).on("mousedown.select2."+t.id,function(t){var e=i(t.target).closest(".select2");i(".select2.select2-container--open").each(function(){var t=i(this);this!=e[0]&&t.data("element").select2("close")})})},n.prototype._detachCloseHandler=function(t){i(document.body).off("mousedown.select2."+t.id)},n.prototype.position=function(t,e){e.find(".selection").append(t)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},n}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(t,e,i,n){function o(){o.__super__.constructor.apply(this,arguments)}return i.Extend(o,e),o.prototype.render=function(){var t=o.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},o.prototype.bind=function(e,t){var i=this;o.__super__.bind.apply(this,arguments);var n=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",function(t){1===t.which&&i.trigger("toggle",{originalEvent:t})}),this.$selection.on("focus",function(t){}),this.$selection.on("blur",function(t){}),e.on("focus",function(t){e.isOpen()||i.$selection.focus()}),e.on("selection:update",function(t){i.update(t.data)})},o.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},o.prototype.display=function(t,e){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(t,e))},o.prototype.selectionContainer=function(){return t("<span></span>")},o.prototype.update=function(t){if(0!==t.length){var e=t[0],i=this.$selection.find(".select2-selection__rendered"),n=this.display(e,i);i.empty().append(n),i.prop("title",e.title||e.text)}else this.clear()},o}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(n,t,a){function o(t,e){o.__super__.constructor.apply(this,arguments)}return a.Extend(o,t),o.prototype.render=function(){var t=o.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},o.prototype.bind=function(t,e){var i=this;o.__super__.bind.apply(this,arguments),this.$selection.on("click",function(t){i.trigger("toggle",{originalEvent:t})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!i.options.get("disabled")){var e=n(this).parent().data("data");i.trigger("unselect",{originalEvent:t,data:e})}})},o.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},o.prototype.display=function(t,e){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(t,e))},o.prototype.selectionContainer=function(){return n('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},o.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],i=0;i<t.length;i++){var n=t[i],o=this.selectionContainer(),r=this.display(n,o);o.append(r),o.prop("title",n.title||n.text),o.data("data",n),e.push(o)}var s=this.$selection.find(".select2-selection__rendered");a.appendMany(s,e)}},o}),t.define("select2/selection/placeholder",["../utils"],function(t){function e(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i)}return e.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},e.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();return i.html(this.display(e)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},e.prototype.update=function(t,e){var i=1==e.length&&e[0].id!=this.placeholder.id;if(1<e.length||i)return t.call(this,e);this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},e}),t.define("select2/selection/allowClear",["jquery","../keys"],function(n,o){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(t){n._handleClear(t)}),e.on("keypress",function(t){n._handleKeyboardClear(t,e)})},t.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){e.stopPropagation();for(var n=i.data("data"),o=0;o<n.length;o++){var r={data:n[o]};if(this.trigger("unselect",r),r.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},t.prototype._handleKeyboardClear=function(t,e,i){i.isOpen()||e.which!=o.DELETE&&e.which!=o.BACKSPACE||this._handleClear(e)},t.prototype.update=function(t,e){if(t.call(this,e),!(0<this.$selection.find(".select2-selection__placeholder").length||0===e.length)){var i=n('<span class="select2-selection__clear">&times;</span>');i.data("data",e),this.$selection.find(".select2-selection__rendered").prepend(i)}},t}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(n,t,s){function e(t,e,i){t.call(this,e,i)}return e.prototype.render=function(t){var e=n('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=e,this.$search=e.find("input");var i=t.call(this);return this._transferTabIndex(),i},e.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("open",function(){n.$search.trigger("focus")}),e.on("close",function(){n.$search.val(""),n.$search.removeAttr("aria-activedescendant"),n.$search.trigger("focus")}),e.on("enable",function(){n.$search.prop("disabled",!1),n._transferTabIndex()}),e.on("disable",function(){n.$search.prop("disabled",!0)}),e.on("focus",function(t){n.$search.trigger("focus")}),e.on("results:focus",function(t){n.$search.attr("aria-activedescendant",t.id)}),this.$selection.on("focusin",".select2-search--inline",function(t){n.trigger("focus",t)}),this.$selection.on("focusout",".select2-search--inline",function(t){n._handleBlur(t)}),this.$selection.on("keydown",".select2-search--inline",function(t){if(t.stopPropagation(),n.trigger("keypress",t),n._keyUpPrevented=t.isDefaultPrevented(),t.which===s.BACKSPACE&&""===n.$search.val()){var e=n.$searchContainer.prev(".select2-selection__choice");if(0<e.length){var i=e.data("data");n.searchRemoveChoice(i),t.preventDefault()}}});var o=document.documentMode,r=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(t){r?n.$selection.off("input.search input.searchcheck"):n.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(t){if(r&&"input"===t.type)n.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=s.SHIFT&&e!=s.CTRL&&e!=s.ALT&&e!=s.TAB&&n.handleSearch(t)}})},e.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},e.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},e.prototype.update=function(t,e){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),i&&this.$search.focus()},e.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},e.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},e.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";""!==this.$search.attr("placeholder")?t=this.$selection.find(".select2-selection__rendered").innerWidth():t=.75*(this.$search.val().length+1)+"em";this.$search.css("width",t)},e}),t.define("select2/selection/eventRelay",["jquery"],function(s){function t(){}return t.prototype.bind=function(t,e,i){var n=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],r=["opening","closing","selecting","unselecting"];t.call(this,e,i),e.on("*",function(t,e){if(-1!==s.inArray(t,o)){e=e||{};var i=s.Event("select2:"+t,{params:e});n.$element.trigger(i),-1!==s.inArray(t,r)&&(e.prevented=i.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,i){function n(t){this.dict=t||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(t){return this.dict[t]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(t){if(!(t in n._cache)){var e=i(t);n._cache[t]=e}return new n(n._cache[t])},n}),t.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"}}),t.define("select2/data/base",["../utils"],function(n){function i(t,e){i.__super__.constructor.call(this)}return n.Extend(i,n.Observable),i.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},i.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},i.prototype.bind=function(t,e){},i.prototype.destroy=function(){},i.prototype.generateResultId=function(t,e){var i=t.id+"-result-";return i+=n.generateChars(4),null!=e.id?i+="-"+e.id.toString():i+="-"+n.generateChars(4),i},i}),t.define("select2/data/select",["./base","../utils","jquery"],function(t,e,a){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,t),i.prototype.current=function(t){var i=[],n=this;this.$element.find(":selected").each(function(){var t=a(this),e=n.item(t);i.push(e)}),t(i)},i.prototype.select=function(o){var r=this;if(o.selected=!0,a(o.element).is("option"))return o.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(t){var e=[];(o=[o]).push.apply(o,t);for(var i=0;i<o.length;i++){var n=o[i].id;-1===a.inArray(n,e)&&e.push(n)}r.$element.val(e),r.$element.trigger("change")});else{var t=o.id;this.$element.val(t),this.$element.trigger("change")}},i.prototype.unselect=function(o){var r=this;if(this.$element.prop("multiple")){if(o.selected=!1,a(o.element).is("option"))return o.element.selected=!1,void this.$element.trigger("change");this.current(function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i].id;n!==o.id&&-1===a.inArray(n,e)&&e.push(n)}r.$element.val(e),r.$element.trigger("change")})}},i.prototype.bind=function(t,e){var i=this;(this.container=t).on("select",function(t){i.select(t.data)}),t.on("unselect",function(t){i.unselect(t.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){a.removeData(this,"data")})},i.prototype.query=function(n,t){var o=[],r=this;this.$element.children().each(function(){var t=a(this);if(t.is("option")||t.is("optgroup")){var e=r.item(t),i=r.matches(n,e);null!==i&&o.push(i)}}),t({results:o})},i.prototype.addOptions=function(t){e.appendMany(this.$element,t)},i.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup")).label=t.text:void 0!==(e=document.createElement("option")).textContent?e.textContent=t.text:e.innerText=t.text,void 0!==t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var i=a(e),n=this._normalizeItem(t);return n.element=e,a.data(e,"data",n),i},i.prototype.item=function(t){var e={};if(null!=(e=a.data(t[0],"data")))return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var i=t.children("option"),n=[],o=0;o<i.length;o++){var r=a(i[o]),s=this.item(r);n.push(s)}e.children=n}return(e=this._normalizeItem(e)).element=t[0],a.data(t[0],"data",e),e},i.prototype._normalizeItem=function(t){a.isPlainObject(t)||(t={id:t,text:t});return null!=(t=a.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),a.extend({},{selected:!1,disabled:!1},t)},i.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},i}),t.define("select2/data/array",["./select","../utils","jquery"],function(t,f,g){function n(t,e){var i=e.get("data")||[];n.__super__.constructor.call(this,t,e),this.addOptions(this.convertToOptions(i))}return f.Extend(n,t),n.prototype.select=function(i){var t=this.$element.find("option").filter(function(t,e){return e.value==i.id.toString()});0===t.length&&(t=this.option(i),this.addOptions(t)),n.__super__.select.call(this,i)},n.prototype.convertToOptions=function(t){var e=this,i=this.$element.find("option"),n=i.map(function(){return e.item(g(this)).id}).get(),o=[];function r(t){return function(){return g(this).val()==t.id}}for(var s=0;s<t.length;s++){var a=this._normalizeItem(t[s]);if(0<=g.inArray(a.id,n)){var l=i.filter(r(a)),c=this.item(l),u=g.extend(!0,{},a,c),d=this.option(u);l.replaceWith(d)}else{var h=this.option(a);if(a.children){var p=this.convertToOptions(a.children);f.appendMany(h,p)}o.push(h)}}return o},n}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(t,e,r){function i(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,t,e)}return e.Extend(i,t),i.prototype._applyDefaults=function(t){var e={data:function(t){return r.extend({},t,{q:t.term})},transport:function(t,e,i){var n=r.ajax(t);return n.then(e),n.fail(i),n}};return r.extend({},e,t,!0)},i.prototype.processResults=function(t){return t},i.prototype.query=function(i,n){var o=this;null!=this._request&&(r.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var e=r.extend({type:"GET"},this.ajaxOptions);function t(){var t=e.transport(e,function(t){var e=o.processResults(t,i);o.options.get("debug")&&window.console&&console.error&&(e&&e.results&&r.isArray(e.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),n(e)},function(){t.status&&"0"===t.status||o.trigger("results:message",{message:"errorLoading"})});o._request=t}"function"==typeof e.url&&(e.url=e.url.call(this.$element,i)),"function"==typeof e.data&&(e.data=e.data.call(this.$element,i)),this.ajaxOptions.delay&&null!=i.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(t,this.ajaxOptions.delay)):t()},i}),t.define("select2/data/tags",["jquery"],function(u){function t(t,e,i){var n=i.get("tags"),o=i.get("createTag");void 0!==o&&(this.createTag=o);var r=i.get("insertTag");if(void 0!==r&&(this.insertTag=r),t.call(this,e,i),u.isArray(n))for(var s=0;s<n.length;s++){var a=n[s],l=this._normalizeItem(a),c=this.option(l);this.$element.append(c)}}return t.prototype.query=function(t,c,u){var d=this;this._removeOldTags(),null!=c.term&&null==c.page?t.call(this,c,function t(e,i){for(var n=e.results,o=0;o<n.length;o++){var r=n[o],s=null!=r.children&&!t({results:r.children},!0);if((r.text||"").toUpperCase()===(c.term||"").toUpperCase()||s)return!i&&(e.data=n,void u(e))}if(i)return!0;var a=d.createTag(c);if(null!=a){var l=d.option(a);l.attr("data-select2-tag",!0),d.addOptions([l]),d.insertTag(n,a)}e.results=n,u(e)}):t.call(this,c,u)},t.prototype.createTag=function(t,e){var i=u.trim(e.term);return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(t,e,i){e.unshift(i)},t.prototype._removeOldTags=function(t){this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||u(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(d){function t(t,e,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),t.call(this,e,i)}return t.prototype.bind=function(t,e,i){t.call(this,e,i),this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(t,e,i){var n=this;e.term=e.term||"";var o=this.tokenizer(e,this.options,function(t){var e=n._normalizeItem(t);if(!n.$element.find("option").filter(function(){return d(this).val()===e.id}).length){var i=n.option(e);i.attr("data-select2-tag",!0),n._removeOldTags(),n.addOptions([i])}!function(t){n.trigger("select",{data:t})}(e)});o.term!==e.term&&(this.$search.length&&(this.$search.val(o.term),this.$search.focus()),e.term=o.term),t.call(this,e,i)},t.prototype.tokenizer=function(t,e,i,n){for(var o=i.get("tokenSeparators")||[],r=e.term,s=0,a=this.createTag||function(t){return{id:t.term,text:t.term}};s<r.length;){var l=r[s];if(-1!==d.inArray(l,o)){var c=r.substr(0,s),u=a(d.extend({},e,{term:c}));null!=u?(n(u),r=r.substr(s+1)||"",s=0):s++}else s++}return{term:r}},t}),t.define("select2/data/minimumInputLength",[],function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,i)},t}),t.define("select2/data/maximumInputLength",[],function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",0<this.maximumInputLength&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,i)},t}),t.define("select2/data/maximumSelectionLength",[],function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),t.call(this,e,i)}return t.prototype.query=function(i,n,o){var r=this;this.current(function(t){var e=null!=t?t.length:0;0<r.maximumSelectionLength&&e>=r.maximumSelectionLength?r.trigger("results:message",{message:"maximumSelected",args:{maximum:r.maximumSelectionLength}}):i.call(r,n,o)})},t}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t},i.prototype.bind=function(){},i.prototype.position=function(t,e){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),t.define("select2/dropdown/search",["jquery","../utils"],function(o,t){function e(){}return e.prototype.render=function(t){var e=t.call(this),i=o('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),e.prepend(i),e},e.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),this.$search.on("keydown",function(t){n.trigger("keypress",t),n._keyUpPrevented=t.isDefaultPrevented()}),this.$search.on("input",function(t){o(this).off("keyup")}),this.$search.on("keyup input",function(t){n.handleSearch(t)}),e.on("open",function(){n.$search.attr("tabindex",0),n.$search.focus(),window.setTimeout(function(){n.$search.focus()},0)}),e.on("close",function(){n.$search.attr("tabindex",-1),n.$search.val("")}),e.on("focus",function(){e.isOpen()||n.$search.focus()}),e.on("results:all",function(t){null!=t.query.term&&""!==t.query.term||(n.showSearch(t)?n.$searchContainer.removeClass("select2-search--hide"):n.$searchContainer.addClass("select2-search--hide"))})},e.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},e.prototype.showSearch=function(t,e){return!0},e}),t.define("select2/dropdown/hidePlaceholder",[],function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i,n)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var i=e.slice(0),n=e.length-1;0<=n;n--){var o=e[n];this.placeholder.id===o.id&&i.splice(n,1)}return i},t}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(o){function t(t,e,i,n){this.lastParams={},t.call(this,e,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("query",function(t){n.lastParams=t,n.loading=!0}),e.on("query:append",function(t){n.lastParams=t,n.loading=!0}),this.$results.on("scroll",function(){var t=o.contains(document.documentElement,n.$loadingMore[0]);if(!n.loading&&t){var e=n.$results.offset().top+n.$results.outerHeight(!1);n.$loadingMore.offset().top+n.$loadingMore.outerHeight(!1)<=e+50&&n.loadMore()}})},t.prototype.loadMore=function(){this.loading=!0;var t=o.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},t.prototype.createLoadingMore=function(){var t=o('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),e=this.options.get("translations").get("loadingMore");return t.html(e(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(f,a){function t(t,e,i){this.$dropdownParent=i.get("dropdownParent")||f(document.body),t.call(this,e,i)}return t.prototype.bind=function(t,e,i){var n=this,o=!1;t.call(this,e,i),e.on("open",function(){n._showDropdown(),n._attachPositioningHandler(e),o||(o=!0,e.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),e.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}))}),e.on("close",function(){n._hideDropdown(),n._detachPositioningHandler(e)}),this.$dropdownContainer.on("mousedown",function(t){t.stopPropagation()})},t.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},t.prototype.position=function(t,e,i){e.attr("class",i.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=i},t.prototype.render=function(t){var e=f("<span></span>"),i=t.call(this);return e.append(i),this.$dropdownContainer=e},t.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},t.prototype._attachPositioningHandler=function(t,e){var i=this,n="scroll.select2."+e.id,o="resize.select2."+e.id,r="orientationchange.select2."+e.id,s=this.$container.parents().filter(a.hasScroll);s.each(function(){f(this).data("select2-scroll-position",{x:f(this).scrollLeft(),y:f(this).scrollTop()})}),s.on(n,function(t){var e=f(this).data("select2-scroll-position");f(this).scrollTop(e.y)}),f(window).on(n+" "+o+" "+r,function(t){i._positionDropdown(),i._resizeDropdown()})},t.prototype._detachPositioningHandler=function(t,e){var i="scroll.select2."+e.id,n="resize.select2."+e.id,o="orientationchange.select2."+e.id;this.$container.parents().filter(a.hasScroll).off(i),f(window).off(i+" "+n+" "+o)},t.prototype._positionDropdown=function(){var t=f(window),e=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),n=null,o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(!1);var r={height:this.$container.outerHeight(!1)};r.top=o.top,r.bottom=o.top+r.height;var s=this.$dropdown.outerHeight(!1),a=t.scrollTop(),l=t.scrollTop()+t.height(),c=a<o.top-s,u=l>o.bottom+s,d={left:o.left,top:r.bottom},h=this.$dropdownParent;"static"===h.css("position")&&(h=h.offsetParent());var p=h.offset();d.top-=p.top,d.left-=p.left,e||i||(n="below"),u||!c||e?!c&&u&&e&&(n="below"):n="above",("above"==n||e&&"below"!==n)&&(d.top=r.top-p.top-s),null!=n&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+n),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+n)),this.$dropdownContainer.css(d)},t.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},t.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},t}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function t(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,i,n)}return t.prototype.showSearch=function(t,e){return!(function t(e){for(var i=0,n=0;n<e.length;n++){var o=e[n];o.children?i+=t(o.children):i++}return i}(e.data.results)<this.minimumResultsForSearch)&&t.call(this,e)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("close",function(t){n._handleSelectOnClose(t)})},t.prototype._handleSelectOnClose=function(t,e){if(e&&null!=e.originalSelect2Event){var i=e.originalSelect2Event;if("select"===i._type||"unselect"===i._type)return}var n=this.getHighlightedResults();if(!(n.length<1)){var o=n.data("data");null!=o.element&&o.element.selected||null==o.element&&o.selected||this.trigger("select",{data:o})}},t}),t.define("select2/dropdown/closeOnSelect",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",function(t){n._selectTriggered(t)}),e.on("unselect",function(t){n._selectTriggered(t)})},t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;i&&i.ctrlKey||this.trigger("close",{originalEvent:i,originalSelect2Event:e})},t}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,i="Please delete "+e+" character";return 1!=e&&(i+="s"),i},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(f,g,m,v,y,b,_,E,w,C,T,e,x,D,I,O,R,k,S,A,M,N,K,L,P,F,B,H,t){function i(){this.reset()}return i.prototype.apply=function(e){if(null==(e=f.extend(!0,{},this.defaults,e)).dataAdapter){if(null!=e.ajax?e.dataAdapter=I:null!=e.data?e.dataAdapter=D:e.dataAdapter=x,0<e.minimumInputLength&&(e.dataAdapter=C.Decorate(e.dataAdapter,k)),0<e.maximumInputLength&&(e.dataAdapter=C.Decorate(e.dataAdapter,S)),0<e.maximumSelectionLength&&(e.dataAdapter=C.Decorate(e.dataAdapter,A)),e.tags&&(e.dataAdapter=C.Decorate(e.dataAdapter,O)),null==e.tokenSeparators&&null==e.tokenizer||(e.dataAdapter=C.Decorate(e.dataAdapter,R)),null!=e.query){var t=g(e.amdBase+"compat/query");e.dataAdapter=C.Decorate(e.dataAdapter,t)}if(null!=e.initSelection){var i=g(e.amdBase+"compat/initSelection");e.dataAdapter=C.Decorate(e.dataAdapter,i)}}if(null==e.resultsAdapter&&(e.resultsAdapter=m,null!=e.ajax&&(e.resultsAdapter=C.Decorate(e.resultsAdapter,L)),null!=e.placeholder&&(e.resultsAdapter=C.Decorate(e.resultsAdapter,K)),e.selectOnClose&&(e.resultsAdapter=C.Decorate(e.resultsAdapter,B))),null==e.dropdownAdapter){if(e.multiple)e.dropdownAdapter=M;else{var n=C.Decorate(M,N);e.dropdownAdapter=n}if(0!==e.minimumResultsForSearch&&(e.dropdownAdapter=C.Decorate(e.dropdownAdapter,F)),e.closeOnSelect&&(e.dropdownAdapter=C.Decorate(e.dropdownAdapter,H)),null!=e.dropdownCssClass||null!=e.dropdownCss||null!=e.adaptDropdownCssClass){var o=g(e.amdBase+"compat/dropdownCss");e.dropdownAdapter=C.Decorate(e.dropdownAdapter,o)}e.dropdownAdapter=C.Decorate(e.dropdownAdapter,P)}if(null==e.selectionAdapter){if(e.multiple?e.selectionAdapter=y:e.selectionAdapter=v,null!=e.placeholder&&(e.selectionAdapter=C.Decorate(e.selectionAdapter,b)),e.allowClear&&(e.selectionAdapter=C.Decorate(e.selectionAdapter,_)),e.multiple&&(e.selectionAdapter=C.Decorate(e.selectionAdapter,E)),null!=e.containerCssClass||null!=e.containerCss||null!=e.adaptContainerCssClass){var r=g(e.amdBase+"compat/containerCss");e.selectionAdapter=C.Decorate(e.selectionAdapter,r)}e.selectionAdapter=C.Decorate(e.selectionAdapter,w)}if("string"==typeof e.language)if(0<e.language.indexOf("-")){var s=e.language.split("-")[0];e.language=[e.language,s]}else e.language=[e.language];if(f.isArray(e.language)){var a=new T;e.language.push("en");for(var l=e.language,c=0;c<l.length;c++){var u=l[c],d={};try{d=T.loadPath(u)}catch(t){try{u=this.defaults.amdLanguageBase+u,d=T.loadPath(u)}catch(t){e.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+u+'" could not be automatically loaded. A fallback will be used instead.');continue}}a.extend(d)}e.translations=a}else{var h=T.loadPath(this.defaults.amdLanguageBase+"en"),p=new T(e.language);p.extend(h),e.translations=p}return e},i.prototype.reset=function(){function a(t){return t.replace(/[^\u0000-\u007E]/g,function(t){return e[t]||t})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:C.escapeMarkup,language:t,matcher:function t(e,i){if(""===f.trim(e.term))return i;if(i.children&&0<i.children.length){for(var n=f.extend(!0,{},i),o=i.children.length-1;0<=o;o--)null==t(e,i.children[o])&&n.children.splice(o,1);return 0<n.children.length?n:t(e,n)}var r=a(i.text).toUpperCase(),s=a(e.term).toUpperCase();return-1<r.indexOf(s)?i:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},i.prototype.set=function(t,e){var i={};i[f.camelCase(t)]=e;var n=C._convertData(i);f.extend(this.defaults,n)},new i}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(n,r,o,s){function t(t,e){if(this.options=t,null!=e&&this.fromElement(e),this.options=o.apply(this.options),e&&e.is("input")){var i=n(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=s.Decorate(this.options.dataAdapter,i)}}return t.prototype.fromElement=function(t){var e=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var i={};i=r.fn.jquery&&"1."==r.fn.jquery.substr(0,2)&&t[0].dataset?r.extend(!0,{},t[0].dataset,t.data()):t.data();var n=r.extend(!0,{},i);for(var o in n=s._convertData(n))-1<r.inArray(o,e)||(r.isPlainObject(this.options[o])?r.extend(this.options[o],n[o]):this.options[o]=n[o]);return this},t.prototype.get=function(t){return this.options[t]},t.prototype.set=function(t,e){this.options[t]=e},t}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(o,c,i,n){var u=function(t,e){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),e=e||{},this.options=new c(e,t),u.__super__.constructor.call(this);var i=t.attr("tabindex")||0;t.data("old-tabindex",i),t.attr("tabindex","-1");var n=this.options.get("dataAdapter");this.dataAdapter=new n(t,this.options);var o=this.render();this._placeContainer(o);var r=this.options.get("selectionAdapter");this.selection=new r(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,o);var s=this.options.get("dropdownAdapter");this.dropdown=new s(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,o);var a=this.options.get("resultsAdapter");this.results=new a(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(t){l.trigger("selection:update",{data:t})}),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return i.Extend(u,i.Observable),u.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},u.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},u.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var n=this._resolveWidth(t,"style");return null!=n?n:this._resolveWidth(t,"element")}if("element"==e){var o=t.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"!=e)return e;var r=t.attr("style");if("string"!=typeof r)return null;for(var s=r.split(";"),a=0,l=s.length;a<l;a+=1){var c=s[a].replace(/\s/g,"").match(i);if(null!==c&&1<=c.length)return c[1]}return null},u.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},u.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})}),this.$element.on("focus.select2",function(t){e.trigger("focus",t)}),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=t?(this._observer=new t(function(t){o.each(t,e._syncA),o.each(t,e._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",e._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",e._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",e._syncS,!1))},u.prototype._registerDataEvents=function(){var i=this;this.dataAdapter.on("*",function(t,e){i.trigger(t,e)})},u.prototype._registerSelectionEvents=function(){var i=this,n=["toggle","focus"];this.selection.on("toggle",function(){i.toggleDropdown()}),this.selection.on("focus",function(t){i.focus(t)}),this.selection.on("*",function(t,e){-1===o.inArray(t,n)&&i.trigger(t,e)})},u.prototype._registerDropdownEvents=function(){var i=this;this.dropdown.on("*",function(t,e){i.trigger(t,e)})},u.prototype._registerResultsEvents=function(){var i=this;this.results.on("*",function(t,e){i.trigger(t,e)})},u.prototype._registerEvents=function(){var i=this;this.on("open",function(){i.$container.addClass("select2-container--open")}),this.on("close",function(){i.$container.removeClass("select2-container--open")}),this.on("enable",function(){i.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){i.$container.addClass("select2-container--disabled")}),this.on("blur",function(){i.$container.removeClass("select2-container--focus")}),this.on("query",function(e){i.isOpen()||i.trigger("open",{}),this.dataAdapter.query(e,function(t){i.trigger("results:all",{data:t,query:e})})}),this.on("query:append",function(e){this.dataAdapter.query(e,function(t){i.trigger("results:append",{data:t,query:e})})}),this.on("keypress",function(t){var e=t.which;i.isOpen()?e===n.ESC||e===n.TAB||e===n.UP&&t.altKey?(i.close(),t.preventDefault()):e===n.ENTER?(i.trigger("results:select",{}),t.preventDefault()):e===n.SPACE&&t.ctrlKey?(i.trigger("results:toggle",{}),t.preventDefault()):e===n.UP?(i.trigger("results:previous",{}),t.preventDefault()):e===n.DOWN&&(i.trigger("results:next",{}),t.preventDefault()):(e===n.ENTER||e===n.SPACE||e===n.DOWN&&t.altKey)&&(i.open(),t.preventDefault())})},u.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},u.prototype._syncSubtree=function(t,e){var i=!1,n=this;if(!t||!t.target||"OPTION"===t.target.nodeName||"OPTGROUP"===t.target.nodeName){if(e)if(e.addedNodes&&0<e.addedNodes.length)for(var o=0;o<e.addedNodes.length;o++){e.addedNodes[o].selected&&(i=!0)}else e.removedNodes&&0<e.removedNodes.length&&(i=!0);else i=!0;i&&this.dataAdapter.current(function(t){n.trigger("selection:update",{data:t})})}},u.prototype.trigger=function(t,e){var i=u.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===e&&(e={}),t in n){var o=n[t],r={prevented:!1,name:t,args:e};if(i.call(this,o,r),r.prevented)return void(e.prevented=!0)}i.call(this,t,e)},u.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},u.prototype.open=function(){this.isOpen()||this.trigger("query",{})},u.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},u.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},u.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},u.prototype.focus=function(t){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},u.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},u.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},u.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var e=t[0];o.isArray(e)&&(e=o.map(e,function(t){return t.toString()})),this.$element.val(e).trigger("change")},u.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},u.prototype.render=function(){var t=o('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},u}),t.define("jquery-mousewheel",["jquery"],function(t){return t}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(o,t,r,e){if(null==o.fn.select2){var s=["open","close","destroy"];o.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each(function(){var t=o.extend(!0,{},e);new r(o(this),t)}),this;if("string"!=typeof e)throw new Error("Invalid arguments for Select2: "+e);var i,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=o(this).data("select2");null==t&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),i=t[e].apply(t,n)}),-1<o.inArray(e,s)?this:i}}return null==o.fn.select2.defaults&&(o.fn.select2.defaults=e),r}),{define:t.define,require:t.require}}(),e=t.require("jquery.select2");return u.fn.select2.amd=t,e}),function(e,i){"function"==typeof define&&define.amd?define(["jquery"],function(t){return i(e,t)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=i(e,require("jquery")):e.lity=i(e,e.jQuery||e.Zepto)}("undefined"!=typeof window?window:this,function(t,u){"use strict";var d=t.document,h=u(t),p=u.Deferred,f=u("html"),g=[],m="aria-hidden",v="lity-"+m,o='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',y={esc:!0,handler:null,handlers:{image:w,inline:function(t,e){var i,n,o;try{i=u(t)}catch(t){return!1}return!!i.length&&(n=u('<i style="display:none !important"/>'),o=i.hasClass("lity-hide"),e.element().one("lity:remove",function(){n.before(i).remove(),o&&!i.closest(".lity-content").length&&i.addClass("lity-hide")}),i.removeClass("lity-hide").after(n))},youtube:function(t){var e=i.exec(t);return!!e&&C(E(t,c("https://www.youtube"+(e[2]||"")+".com/embed/"+e[4],u.extend({autoplay:1},l(e[5]||"")))))},vimeo:function(t){var e=n.exec(t);return!!e&&C(E(t,c("https://player.vimeo.com/video/"+e[3],u.extend({autoplay:1},l(e[4]||"")))))},googlemaps:function(t){var e=r.exec(t);return!!e&&C(E(t,c("https://www.google."+e[3]+"/maps?"+e[6],{output:0<e[6].indexOf("layer=c")?"svembed":"embed"})))},facebookvideo:function(t){var e=s.exec(t);if(!e)return!1;0!==t.indexOf("http")&&(t="https:"+t);return C(E(t,c("https://www.facebook.com/plugins/video.php?href="+t,u.extend({autoplay:1},l(e[4]||"")))))},iframe:C},template:'<div class="lity lity-controls lity-minimized" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" title="Close (Press escape to close)" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},e=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,i=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,n=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,r=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,s=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,a=function(){var t=d.createElement("div"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return e[i];return!1}();function b(t){var e=p();return a&&t.length?(t.one(a,e.resolve),setTimeout(e.resolve,500)):e.resolve(),e.promise()}function _(t,e,i){if(1===arguments.length)return u.extend({},t);if("string"==typeof e){if(void 0===i)return void 0===t[e]?null:t[e];t[e]=i}else u.extend(t,e);return this}function l(t){for(var e,i=decodeURI(t.split("#")[0]).split("&"),n={},o=0,r=i.length;o<r;o++)i[o]&&(n[(e=i[o].split("="))[0]]=e[1]);return n}function c(t,e){return t+(-1<t.indexOf("?")?"&":"?")+u.param(e)}function E(t,e){var i=t.indexOf("#");return-1===i?e:(0<i&&(t=t.substr(i)),e+t)}function w(t,e){function i(){r.reject(function(t){return u('<span class="lity-error"/>').append(t)}("Failed loading image"))}var n=e.opener()&&e.opener().data("lity-desc")||"Image with no description",o=u('<img src="'+t+'" alt="'+n+'"/>'),r=p();return o.on("load",function(){if(0===this.naturalWidth)return i();r.resolve(o)}).on("error",i),r.promise()}function C(t){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+t+'"/></div>'}function T(){return d.documentElement.clientHeight?d.documentElement.clientHeight:Math.round(h.height())}function x(t){var e=I();e&&(27===t.keyCode&&e.options("esc")&&e.close(),9===t.keyCode&&function(t,e){var i=e.element().find(o),n=i.index(d.activeElement);t.shiftKey&&n<=0?(i.get(i.length-1).focus(),t.preventDefault()):t.shiftKey||n!==i.length-1||(i.get(0).focus(),t.preventDefault())}(t,e))}function D(){u.each(g,function(t,e){e.resize()})}function I(){return 0===g.length?null:g[0]}function O(t,e,i,n){var o,r,s,a=this,l=!1,c=!1;e=u.extend({},y,e),r=u(e.template),a.element=function(){return r},a.opener=function(){return i},a.options=u.proxy(_,a,e),a.handlers=u.proxy(_,a,e.handlers),a.resize=function(){l&&!c&&s.css("max-height",T()+"px").trigger("lity:resize",[a])},a.close=function(){if(l&&!c){c=!0,function(e){e.element().attr(m,"true"),1===g.length&&(f.removeClass("lity-active"),h.off({resize:D,keydown:x})),((g=u.grep(g,function(t){return e!==t})).length?g[0].element():u(".lity-hidden")).removeClass("lity-hidden").each(function(){var t=u(this),e=t.data(v);e?t.attr(m,e):t.removeAttr(m),t.removeData(v)})}(a);var t=p();if(n&&(d.activeElement===r[0]||u.contains(r[0],d.activeElement)))try{n.focus()}catch(t){}return s.trigger("lity:close",[a]),r.removeClass("lity-opened").addClass("lity-closed"),b(s.add(r)).always(function(){s.trigger("lity:remove",[a]),r.remove(),r=void 0,t.resolve()}),t.promise()}},o=function(i,n,o,t){var r,s="inline",a=u.extend({},o);return t&&a[t]?(r=a[t](i,n),s=t):(u.each(["inline","iframe"],function(t,e){delete a[e],a[e]=o[e]}),u.each(a,function(t,e){return!e||(!(!e.test||e.test(i,n))||(!1!==(r=e(i,n))?(s=t,!1):void 0))})),{handler:s,content:r||""}}(t,a,e.handlers,e.handler),r.attr(m,"false").addClass("lity-loading lity-opened lity-"+o.handler).appendTo("body").focus().on("click","[data-lity-close]",function(t){u(t.target).is("[data-lity-close]")&&a.close()}).trigger("lity:open",[a]),function(t){1===g.unshift(t)&&(f.addClass("lity-active"),h.on({resize:D,keydown:x})),u("body > *").not(t.element()).addClass("lity-hidden").each(function(){var t=u(this);void 0===t.data(v)&&t.data(v,t.attr(m)||null)}).attr(m,"true")}(a),u.when(o.content).always(function(t){s=u(t).css("max-height",T()+"px"),r.find(".lity-loader").each(function(){var t=u(this);b(t).always(function(){t.remove()})}),r.removeClass("lity-loading").find(".lity-content").empty().append(s),l=!0,s.trigger("lity:ready",[a])})}function R(t,e,i){t.preventDefault?(t.preventDefault(),t=(i=u(this)).data("lity-target")||i.attr("href")||i.attr("src")):i=u(i);var n=new O(t,u.extend({},i.data("lity-options")||i.data("lity"),e),i,d.activeElement);if(!t.preventDefault)return n}return w.test=function(t){return e.test(t)},R.version="2.3.1",R.options=u.proxy(_,R,y),R.handlers=u.proxy(_,R,y.handlers),R.current=I,u(d).on("click.lity","[data-lity]",R),R});var CKEDITOR_BASEPATH="js/ckeditor/";!function(){var l,c,e,i,n,o,r,s,t,a,u,d,h,p,f,g,m,v,y,b,_,E,w,C,T,x,D,I,O,R,k,S,A,M,N,K,L,P,F,B,H,z,$,V,j,W,G,q,U,Y,X,Z,Q,J,tt,et,it,nt,ot,rt,st,at,lt,ct,ut,dt,ht,pt,ft,gt,mt,vt,yt,bt,_t,Et,wt,Ct,Tt,xt,Dt,It,Ot,Rt,kt,St,At,Mt,Nt,Kt,Lt,Pt,Ft,Bt,Ht,zt,$t,Vt;window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var e,o=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,i={timestamp:"HBDD",version:"4.8.0",revision:"230f715",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:o},status:"unloaded",basePath:function(){var t=window.CKEDITOR_BASEPATH||"";if(!t)for(var e=document.getElementsByTagName("script"),i=0;i<e.length;i++){var n=e[i].src.match(o);if(n){t=n[1];break}}if(-1==t.indexOf(":/")&&"//"!=t.slice(0,2)&&(t=0===t.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+t:location.href.match(/^[^\?]*\/(?:)/)[0]+t),!t)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return t}(),getUrl:function(t){return-1==t.indexOf(":/")&&0!==t.indexOf("/")&&(t=this.basePath+t),this.timestamp&&"/"!=t.charAt(t.length-1)&&!/[&?]t=/.test(t)&&(t+=(0<=t.indexOf("?")?"&":"?")+"t="+this.timestamp),t},domReady:(e=[],function(t){if(e.push(t),"complete"===document.readyState&&setTimeout(r,1),1==e.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",r),window.attachEvent("onload",r),t=!1;try{t=!window.frameElement}catch(t){}document.documentElement.doScroll&&t&&function e(){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(e,1)}r()}()}})},n=window.CKEDITOR_GETURL;function r(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",r,!1),t()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",r),t())}catch(t){}}function t(){for(var t;t=e.shift();)t()}if(n){var s=i.getUrl;i.getUrl=function(t){return n.call(i,t)||s.call(i,t)}}return i}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(t){var e,i=CKEDITOR.event.prototype;for(e in i)null==t[e]&&(t[e]=i[e])},CKEDITOR.event.prototype=(Gt.prototype={getListenerIndex:function(t){for(var e=0,i=this.listeners;e<i.length;e++)if(i[e].fn==t)return e;return-1}},{define:function(t,e){var i=jt.call(this,t);CKEDITOR.tools.extend(i,e,!0)},on:function(o,r,s,a,t){function e(t,e,i,n){return!(t={name:o,sender:this,editor:t,data:e,listenerData:a,stop:i,cancel:n,removeListener:l})!==r.call(s,t)&&t.data}function l(){n.removeListener(o,r)}var i=jt.call(this,o);if(i.getListenerIndex(r)<0){i=i.listeners,s=s||this,isNaN(t)&&(t=10);var n=this;e.fn=r,e.priority=t;for(var c=i.length-1;0<=c;c--)if(i[c].priority<=t)return i.splice(c+1,0,e),{removeListener:l};i.unshift(e)}return{removeListener:l}},once:function(){var t=Array.prototype.slice.call(arguments),e=t[1];return t[1]=function(t){return t.removeListener(),e.apply(this,arguments)},this.on.apply(this,t)},capture:function(){CKEDITOR.event.useCapture=1;var t=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,t},fire:(l=0,c=0,function(t,e,i){var n=Wt(this)[t];t=l;var o=c;if(l=c=0,n&&(s=n.listeners).length)for(var r,s=s.slice(0),a=0;a<s.length;a++){if(n.errorProof)try{r=s[a].call(this,i,e,qt,Ut)}catch(t){}else r=s[a].call(this,i,e,qt,Ut);if(!1===r?c=1:void 0!==r&&(e=r),l||c)break}return e=!c&&(void 0===e||e),l=t,c=o,e}),fireOnce:function(t,e,i){return e=this.fire(t,e,i),delete Wt(this)[t],e},removeListener:function(t,e){var i=Wt(this)[t];if(i){var n=i.getListenerIndex(e);0<=n&&i.listeners.splice(n,1)}},removeAllListeners:function(){var t,e=Wt(this);for(t in e)delete e[t]},hasListeners:function(t){return(t=Wt(this)[t])&&0<t.listeners.length}})),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(t,e){return t in{instanceReady:1,loaded:1}&&(this[t]=!0),CKEDITOR.event.prototype.fire.call(this,t,e,this)},CKEDITOR.editor.prototype.fireOnce=function(t,e){return t in{instanceReady:1,loaded:1}&&(this[t]=!0),CKEDITOR.event.prototype.fireOnce.call(this,t,e,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var t=navigator.userAgent.toLowerCase(),e=t.match(/edge[ \/](\d+.?\d*)/),i=-1<t.indexOf("trident/");(i={ie:i=!(!e&&!i),edge:!!e,webkit:!i&&-1<t.indexOf(" applewebkit/"),air:-1<t.indexOf(" adobeair/"),mac:-1<t.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||document.documentMode<10),mobile:-1<t.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(t),isCustomDomain:function(){if(!this.ie)return!1;var t=document.domain,e=window.location.hostname;return t!=e&&t!="["+e+"]"},secure:"https:"==location.protocol}).gecko="Gecko"==navigator.product&&!i.webkit&&!i.ie,i.webkit&&(-1<t.indexOf("chrome")?i.chrome=!0:i.safari=!0);var n=0;return i.ie&&(n=e?parseFloat(e[1]):i.quirks||!document.documentMode?parseFloat(t.match(/msie (\d+)/)[1]):document.documentMode,i.ie9Compat=9==n,i.ie8Compat=8==n,i.ie7Compat=7==n,i.ie6Compat=n<7||i.quirks),i.gecko&&(e=t.match(/rv:([\d\.]+)/))&&(n=1e4*(e=e[1].split("."))[0]+100*(e[1]||0)+1*(e[2]||0)),i.air&&(n=parseFloat(t.match(/ adobeair\/(\d+)/)[1])),i.webkit&&(n=parseFloat(t.match(/ applewebkit\/(\d+)/)[1])),i.version=n,i.isCompatible=!(i.ie&&n<7||i.gecko&&n<4e4||i.webkit&&n<534),i.hidpi=2<=window.devicePixelRatio,i.needsBrFiller=i.gecko||i.webkit||i.ie&&10<n,i.needsNbspFiller=i.ie&&n<11,i.cssClass="cke_browser_"+(i.ie?"ie":i.gecko?"gecko":i.webkit?"webkit":"unknown"),i.quirks&&(i.cssClass+=" cke_browser_quirks"),i.ie&&(i.cssClass+=" cke_browser_ie"+(i.quirks?"6 cke_browser_iequirks":i.version)),i.air&&(i.cssClass+=" cke_browser_air"),i.iOS&&(i.cssClass+=" cke_browser_ios"),i.hidpi&&(i.cssClass+=" cke_hidpi"),i}()),"unloaded"==CKEDITOR.status&&(CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var t=document.createElement("script");t.type="text/javascript",t.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(t)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(t){(this._.pending||(this._.pending=[])).push(t)},CKEDITOR.domReady(function(){var t=CKEDITOR.loadFullCore,e=CKEDITOR.loadFullCoreTimeout;t&&(CKEDITOR.status="basic_ready",t&&t._load?t():e&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*e))}),CKEDITOR.status="basic_loaded"),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(t,e){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:t,additionalData:e})},CKEDITOR.error=function(t,e){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:t,additionalData:e})},CKEDITOR.on("log",function(t){if(window.console&&window.console.log){var e=console[t.data.type]?t.data.type:"log",i=t.data.errorCode;(t=t.data.additionalData)?console[e]("[CKEDITOR] Error code: "+i+".",t):console[e]("[CKEDITOR] Error code: "+i+"."),console[e]("[CKEDITOR] For more information about this error go to https://docs.ckeditor.com/ckeditor4/docs/#!/guide/dev_errors-section-"+i)}},null,null,999),CKEDITOR.dom={},d=[],h=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",p=/&/g,f=/>/g,g=/</g,m=/"/g,v=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,y={lt:"<",gt:">",amp:"&",quot:'"',nbsp:" ",shy:"­"},CKEDITOR.on("reset",function(){d=[]}),CKEDITOR.tools={arrayCompare:function(t,e){if(!t&&!e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!=e[i])return!1;return!0},getIndex:function(t,e){for(var i=0;i<t.length;++i)if(e(t[i]))return i;return-1},clone:function(t){var e;if(t&&t instanceof Array){e=[];for(var i=0;i<t.length;i++)e[i]=CKEDITOR.tools.clone(t[i]);return e}if(null===t||"object"!=typeof t||t instanceof String||t instanceof Number||t instanceof Boolean||t instanceof Date||t instanceof RegExp||t.nodeType||t.window===t)return t;for(i in e=new t.constructor,t)e[i]=CKEDITOR.tools.clone(t[i]);return e},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},extend:function(t){var e,i,n=arguments.length;"boolean"==typeof(e=arguments[n-1])?n--:"boolean"==typeof(e=arguments[n-2])&&(i=arguments[n-1],n-=2);for(var o=1;o<n;o++){var r,s=arguments[o];for(r in s)!0!==e&&null!=t[r]||(!i||r in i)&&(t[r]=s[r])}return t},prototypedCopy:function(t){function e(){}return e.prototype=t,new e},copy:function(t){var e,i={};for(e in t)i[e]=t[e];return i},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},cssVendorPrefix:function(t,e,i){return i?h+t+":"+e+";"+t+":"+e:((i={})[t]=e,i[h+t]=e,i)},cssStyleToDomStyle:(a=document.createElement("div").style,u=void 0!==a.cssFloat?"cssFloat":void 0!==a.styleFloat?"styleFloat":"float",function(t){return"float"==t?u:t.replace(/-./g,function(t){return t.substr(1).toUpperCase()})}),buildStyleHtml:function(t){t=[].concat(t);for(var e,i=[],n=0;n<t.length;n++)(e=t[n])&&(/@import|[{}]/.test(e)?i.push("<style>"+e+"</style>"):i.push('<link type="text/css" rel=stylesheet href="'+e+'">'));return i.join("")},htmlEncode:function(t){return null==t?"":String(t).replace(p,"&amp;").replace(f,"&gt;").replace(g,"&lt;")},htmlDecode:function(t){return t.replace(v,Yt)},htmlEncodeAttr:function(t){return CKEDITOR.tools.htmlEncode(t).replace(m,"&quot;")},htmlDecodeAttr:function(t){return CKEDITOR.tools.htmlDecode(t)},transformPlainTextToHtml:function(t,e){var i=e==CKEDITOR.ENTER_BR,n=(n=this.htmlEncode(t.replace(/\r\n/g,"\n"))).replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),o=e==CKEDITOR.ENTER_P?"p":"div";if(!i){var r=/\n{2}/g;if(r.test(n)){var s="<"+o+">",a="</"+o+">";n=s+n.replace(r,function(){return a+s})+a}}return n=n.replace(/\n/g,"<br>"),i||(n=n.replace(new RegExp("<br>(?=</"+o+">)"),function(t){return CKEDITOR.tools.repeat(t,2)})),(n=n.replace(/^ | $/g,"&nbsp;")).replace(/(>|\s) /g,function(t,e){return e+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:(t=0,function(){return++t}),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var t="e",e=0;e<8;e++)t+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t},override:function(t,e){var i=e(t);return i.prototype=t.prototype,i},setTimeout:function(t,e,i,n,o){return o=o||window,i=i||o,o.setTimeout(function(){n?t.apply(i,[].concat(n)):t.apply(i)},e||0)},trim:(s=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,function(t){return t.replace(s,"")}),ltrim:(r=/^[ \t\n\r]+/g,function(t){return t.replace(r,"")}),rtrim:(o=/[ \t\n\r]+$/g,function(t){return t.replace(o,"")}),indexOf:function(t,e){if("function"==typeof e){for(var i=0,n=t.length;i<n;i++)if(e(t[i]))return i}else{if(t.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i}return-1},search:function(t,e){var i=CKEDITOR.tools.indexOf(t,e);return 0<=i?t[i]:null},bind:function(t,e){return function(){return t.apply(e,arguments)}},createClass:function(t){var e=t.$,i=t.base,n=t.privates||t._,o=t.proto;if(t=t.statics,e=e||function(){i&&this.base.apply(this,arguments)},n){var r=e;e=function(){var t,e=this._||(this._={});for(t in n){var i=n[t];e[t]="function"==typeof i?CKEDITOR.tools.bind(i,this):i}r.apply(this,arguments)}}return i&&(e.prototype=this.prototypedCopy(i.prototype),(e.prototype.constructor=e).base=i,e.baseProto=i.prototype,e.prototype.base=function(){this.base=i.prototype.base,i.apply(this,arguments),this.base=arguments.callee}),o&&this.extend(e.prototype,o,!0),t&&this.extend(e,t,!0),e},addFunction:function(t,e){return d.push(function(){return t.apply(e||this,arguments)})-1},removeFunction:function(t){d[t]=null},callFunction:function(t){var e=d[t];return e&&e.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:(n=/^-?\d+\.?\d*px$/,function(t){return i=CKEDITOR.tools.trim(t+"")+"px",n.test(i)?i:t||""}),convertToPx:function(t){return e||(e=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(e)),/%$/.test(t)?t:(e.setStyle("width",t),e.$.clientWidth)},repeat:function(t,e){return Array(e+1).join(t)},tryThese:function(){for(var t,e=0,i=arguments.length;e<i;e++){var n=arguments[e];try{t=n();break}catch(t){}}return t},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(i){return function(){var t=arguments,e=this;window.setTimeout(function(){i.apply(e,t)},0)}},normalizeCssText:function(t,e){var i,n=[],o=CKEDITOR.tools.parseCssText(t,!0,e);for(i in o)n.push(i+":"+o[i]);return n.sort(),n.length?n.join(";")+";":""},convertRgbToHex:function(t){return t.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(t,e,i,n){for(t=[e,i,n],e=0;e<3;e++)t[e]=("0"+parseInt(t[e],10).toString(16)).slice(-2);return"#"+t.join("")})},normalizeHex:function(t){return t.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(t,e,i,n){return 3==(t=e.toLowerCase()).length&&(t=[(t=t.split(""))[0],t[0],t[1],t[1],t[2],t[2]].join("")),"#"+t+n})},parseCssText:function(t,n,e){var o={};return e&&(t=new CKEDITOR.dom.element("span").setAttribute("style",t).getAttribute("style")||""),(t=t&&CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(t)))&&";"!=t&&t.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(t,e,i){n&&("font-family"==(e=e.toLowerCase())&&(i=i.replace(/\s*,\s*/g,",")),i=CKEDITOR.tools.trim(i)),o[e]=i}),o},writeCssText:function(t,e){var i,n=[];for(i in t)n.push(i+":"+t[i]);return e&&n.sort(),n.join("; ")},objectCompare:function(t,e,i){var n;if(!t&&!e)return!0;if(!t||!e)return!1;for(n in t)if(t[n]!=e[n])return!1;if(!i)for(n in e)if(t[n]!=e[n])return!1;return!0},objectKeys:function(t){var e,i=[];for(e in t)i.push(e);return i},convertArrayToObject:function(t,e){var i={};1==arguments.length&&(e=!0);for(var n=0,o=t.length;n<o;++n)i[t[n]]=e;return i},fixDomain:function(){for(var e;;)try{e=window.parent.document.domain;break}catch(t){if(!(e=e?e.replace(/.+?(?:\.|$)/,""):document.domain))break;document.domain=e}return!!e},eventsBuffer:function(e,t,i){function n(){r=(new Date).getTime(),o=!1,i?t.call(i):t()}var o,r=0;return{input:function(){if(!o){var t=(new Date).getTime()-r;t<e?o=setTimeout(n,e-t):n()}},reset:function(){o&&clearTimeout(o),o=r=0}}},enableHtml5Elements:function(t,e){for(var i,n="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),o=n.length;o--;)i=t.createElement(n[o]),e&&t.appendChild(i)},checkIfAnyArrayItemMatches:function(t,e){for(var i=0,n=t.length;i<n;++i)if(t[i].match(e))return!0;return!1},checkIfAnyObjectPropertyMatches:function(t,e){for(var i in t)if(i.match(e))return!0;return!1},keystrokeToString:function(t,e){var i=this.keystrokeToArray(t,e);return i.display=i.display.join("+"),i.aria=i.aria.join("+"),i},keystrokeToArray:function(t,e){var i=16711680&e,n=65535&e,o=CKEDITOR.env.mac,r=[],s=[];return i&CKEDITOR.CTRL&&(r.push(o?"⌘":t[17]),s.push(o?t[224]:t[17])),i&CKEDITOR.ALT&&(r.push(o?"⌥":t[18]),s.push(t[18])),i&CKEDITOR.SHIFT&&(r.push(o?"⇧":t[16]),s.push(t[16])),n&&(t[n]?(r.push(t[n]),s.push(t[n])):(r.push(String.fromCharCode(n)),s.push(String.fromCharCode(n)))),{display:r,aria:s}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(t){t=t.toLowerCase();for(var e,i=document.cookie.split(";"),n=0;n<i.length;n++)if(e=i[n].split("="),decodeURIComponent(CKEDITOR.tools.trim(e[0]).toLowerCase())===t)return decodeURIComponent(1<e.length?e[1]:"");return null},setCookie:function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+";path=/"},getCsrfToken:function(){if(!(t=CKEDITOR.tools.getCookie("ckCsrfToken"))||40!=t.length){var t=[],e="";if(window.crypto&&window.crypto.getRandomValues)t=new Uint8Array(40),window.crypto.getRandomValues(t);else for(var i=0;i<40;i++)t.push(Math.floor(256*Math.random()));for(i=0;i<t.length;i++){var n="abcdefghijklmnopqrstuvwxyz0123456789".charAt(t[i]%36);e+=.5<Math.random()?n.toUpperCase():n}t=e,CKEDITOR.tools.setCookie("ckCsrfToken",t)}return t},escapeCss:function(t){return t?window.CSS&&CSS.escape?CSS.escape(t):isNaN(parseInt(t.charAt(0),10))?t:"\\3"+t.charAt(0)+" "+t.substring(1,t.length):""},getMouseButton:function(t){var e=(t=t.data)&&t.$;return!(!t||!e)&&(CKEDITOR.env.ie&&CKEDITOR.env.version<9?4===e.button?CKEDITOR.MOUSE_BUTTON_MIDDLE:1===e.button?CKEDITOR.MOUSE_BUTTON_LEFT:CKEDITOR.MOUSE_BUTTON_RIGHT:e.button)},convertHexStringToBytes:function(t){var e,i=[],n=t.length/2;for(e=0;e<n;e++)i.push(parseInt(t.substr(2*e,2),16));return i},convertBytesToBase64:function(t){var e,i="",n=t.length;for(e=0;e<n;e+=3){var o,r=t.slice(e,e+3),s=r.length,a=[];if(s<3)for(o=s;o<3;o++)r[o]=0;for(a[0]=(252&r[0])>>2,a[1]=(3&r[0])<<4|r[1]>>4,a[2]=(15&r[1])<<2|(192&r[2])>>6,a[3]=63&r[2],o=0;o<4;o++)i=o<=s?i+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a[o]):i+"="}return i},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(e){var t={},i=this._findColor(e);return i.length&&(t.color=i[0],CKEDITOR.tools.array.forEach(i,function(t){e=e.replace(t,"")})),(e=CKEDITOR.tools.trim(e))&&(t.unprocessed=e),t},margin:function(t){function e(t){i.top=n[t[0]],i.right=n[t[1]],i.bottom=n[t[2]],i.left=n[t[3]]}var i={},n=t.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset)/g)||["0px"];switch(n.length){case 1:e([0,0,0,0]);break;case 2:e([0,1,0,1]);break;case 3:e([0,1,2,1]);break;case 4:e([0,1,2,3])}return i},border:function(t){var i={};return t=t.split(/\s+/),CKEDITOR.tools.array.forEach(t,function(t){if(!i.color){var e=CKEDITOR.tools.style.parse._findColor(t);if(e.length)return void(i.color=e[0])}i.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,t)?!i.width&&CKEDITOR.tools.style.parse._widthRegExp.test(t)&&(i.width=t):i.style=t}),i},_findColor:function(t){var e=[],i=CKEDITOR.tools.array;return(e=(e=e.concat(t.match(this._rgbaRegExp)||[])).concat(t.match(this._hslaRegExp)||[])).concat(i.filter(t.split(/\s+/),function(t){return!!t.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||t.toLowerCase()in CKEDITOR.tools.style.parse._colors}))}}},array:{filter:function(i,n,o){var r=[];return this.forEach(i,function(t,e){n.call(o,t,e,i)&&r.push(t)}),r},forEach:function(t,e,i){var n,o=t.length;for(n=0;n<o;n++)e.call(i,t[n],n,t)},map:function(t,e,i){for(var n=[],o=0;o<t.length;o++)n.push(e.call(i,t[o],o,t));return n},reduce:function(t,e,i,n){for(var o=0;o<t.length;o++)i=e.call(n,i,t[o],o,t);return i},every:function(t,e,i){return!t.length||(e=this.filter(t,e,i),t.length===e.length)}},object:{findKey:function(t,e){if("object"!=typeof t)return null;for(var i in t)if(t[i]===e)return i;return null},merge:function(t,e){var i=CKEDITOR.tools,n=i.clone(t),o=i.clone(e);return i.array.forEach(i.objectKeys(o),function(t){n[t]="object"==typeof o[t]&&"object"==typeof n[t]?i.object.merge(n[t],o[t]):o[t]}),n}}},CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.MOUSE_BUTTON_LEFT=0,CKEDITOR.MOUSE_BUTTON_MIDDLE=1,CKEDITOR.MOUSE_BUTTON_RIGHT=2,CKEDITOR.dtd=(b=CKEDITOR.tools.extend,_=function(t,e){for(var i=CKEDITOR.tools.clone(t),n=1;n<arguments.length;n++)for(var o in e=arguments[n])delete i[o];return i},w={},C={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},T={command:1,link:1,meta:1,noscript:1,script:1,style:1},x={},I={center:1,dir:1,noframes:1},b(E={},{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},D={"#":1},{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),b(w,C,E,I),b(_={a:_(E,{a:1,button:1}),abbr:E,address:w,area:x,article:w,aside:w,audio:b({source:1,track:1},w),b:E,base:x,bdi:E,bdo:E,blockquote:w,body:w,br:x,button:_(E,{a:1,button:1}),canvas:E,caption:w,cite:E,code:E,col:x,colgroup:{col:1},command:x,datalist:b({option:1},E),dd:w,del:E,details:b({summary:1},w),dfn:E,div:w,dl:{dt:1,dd:1},dt:w,em:E,embed:x,fieldset:b({legend:1},w),figcaption:w,figure:b({figcaption:1},w),footer:w,form:w,h1:E,h2:E,h3:E,h4:E,h5:E,h6:E,head:b({title:1,base:1},T),header:w,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:x,html:b({head:1,body:1},w,T),i:E,iframe:D,img:x,input:x,ins:E,kbd:E,keygen:x,label:E,legend:E,li:w,link:x,main:w,map:w,mark:E,menu:b({li:1},w),meta:x,meter:_(E,{meter:1}),nav:w,noscript:b({link:1,meta:1,style:1},E),object:b({param:1},E),ol:{li:1},optgroup:{option:1},option:D,output:E,p:E,param:x,pre:E,progress:_(E,{progress:1}),q:E,rp:E,rt:E,ruby:b({rp:1,rt:1},E),s:E,samp:E,script:D,section:w,select:{optgroup:1,option:1},small:E,source:x,span:E,strong:E,style:D,sub:E,summary:b({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},E),sup:E,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:w,textarea:D,tfoot:{tr:1},th:w,thead:{tr:1},time:_(E,{time:1}),title:D,tr:{th:1,td:1},track:x,u:E,ul:{li:1},var:E,video:b({source:1,track:1},w),wbr:x,acronym:E,applet:b({param:1},w),basefont:x,big:E,center:w,dialog:x,dir:{li:1},font:E,isindex:x,noframes:w,strike:E,tt:E},{$block:b({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},C,I),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:E,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:b({body:1,head:1,html:1},_.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),_),CKEDITOR.dom.event=function(t){this.$=t},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var t=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(t+=CKEDITOR.CTRL),this.$.shiftKey&&(t+=CKEDITOR.SHIFT),this.$.altKey&&(t+=CKEDITOR.ALT),t},preventDefault:function(t){var e=this.$;e.preventDefault?e.preventDefault():e.returnValue=!1,t&&this.stopPropagation()},stopPropagation:function(){var t=this.$;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},getTarget:function(){var t=this.$.target||this.$.srcElement;return t?new CKEDITOR.dom.node(t):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var t=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(t.documentElement.scrollLeft||t.body.scrollLeft),y:this.$.pageY||this.$.clientY+(t.documentElement.scrollTop||t.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(t){t&&(this.$=t)},CKEDITOR.dom.domObject.prototype={getPrivate:function(){var t;return(t=this.getCustomData("_"))||this.setCustomData("_",t={}),t},on:function(t){var e=this.getCustomData("_cke_nativeListeners");return e||(e={},this.setCustomData("_cke_nativeListeners",e)),e[t]||(e=e[t]=function(e,i){return function(t){"undefined"!=typeof CKEDITOR&&e.fire(i,new CKEDITOR.dom.event(t))}}(this,t),this.$.addEventListener?this.$.addEventListener(t,e,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+t,e)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(t){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(t)){var e=this.getCustomData("_cke_nativeListeners"),i=e&&e[t];i&&(this.$.removeEventListener?this.$.removeEventListener(t,i,!1):this.$.detachEvent&&this.$.detachEvent("on"+t,i),delete e[t])}},removeAllListeners:function(){var t,e=this.getCustomData("_cke_nativeListeners");for(t in e){var i=e[t];this.$.detachEvent?this.$.detachEvent("on"+t,i):this.$.removeEventListener&&this.$.removeEventListener(t,i,!1),delete e[t]}CKEDITOR.event.prototype.removeAllListeners.call(this)}},O=CKEDITOR.dom.domObject.prototype,R={},CKEDITOR.on("reset",function(){R={}}),O.equals=function(t){try{return t&&t.$===this.$}catch(t){return!1}},O.setCustomData=function(t,e){var i=this.getUniqueId();return(R[i]||(R[i]={}))[t]=e,this},O.getCustomData=function(t){var e=this.$["data-cke-expando"];return(e=e&&R[e])&&t in e?e[t]:null},O.removeCustomData=function(t){var e,i,n;return(e=(e=this.$["data-cke-expando"])&&R[e])&&(i=e[t],n=t in e,delete e[t]),n?i:null},O.clearCustomData=function(){this.removeAllListeners();var t=this.$["data-cke-expando"];t&&delete R[t]},O.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(O),CKEDITOR.dom.node=function(t){return t?new CKEDITOR.dom[t.nodeType==CKEDITOR.NODE_DOCUMENT?"document":t.nodeType==CKEDITOR.NODE_ELEMENT?"element":t.nodeType==CKEDITOR.NODE_TEXT?"text":t.nodeType==CKEDITOR.NODE_COMMENT?"comment":t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](t):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(t,e){return t.append(this,e),t},clone:function(n,o){var t=this.$.cloneNode(n);return function t(e){if(e["data-cke-expando"]&&(e["data-cke-expando"]=!1),(e.nodeType==CKEDITOR.NODE_ELEMENT||e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(o||e.nodeType!=CKEDITOR.NODE_ELEMENT||e.removeAttribute("id",!1),n)){e=e.childNodes;for(var i=0;i<e.length;i++)t(e[i])}}(t),t=new CKEDITOR.dom.node(t),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&function t(e){if(e.type==CKEDITOR.NODE_ELEMENT||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(e.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var i=e.getName();":"==i[0]&&e.renameNode(i.substring(1))}if(n)for(i=0;i<e.getChildCount();i++)t(e.getChild(i))}}(t),t},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(t){return t.$.parentNode.insertBefore(this.$,t.$.nextSibling),t},insertBefore:function(t){return t.$.parentNode.insertBefore(this.$,t.$),t},insertBeforeMe:function(t){return this.$.parentNode.insertBefore(t.$,this.$),t},getAddress:function(t){for(var e=[],i=this.getDocument().$.documentElement,n=this.$;n&&n!=i;){var o=n.parentNode;o&&e.unshift(this.getIndex.call({$:n},t)),n=o}return e},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(t){function n(t,e){var i=e?t.nextSibling:t.previousSibling;return i&&i.nodeType==CKEDITOR.NODE_TEXT?o(i)?n(i,e):i:null}function o(t){return!t.nodeValue||t.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var e,i=this.$,r=-1;if(!this.$.parentNode||t&&i.nodeType==CKEDITOR.NODE_TEXT&&o(i)&&!n(i)&&!n(i,!0))return-1;for(;t&&i!=this.$&&i.nodeType==CKEDITOR.NODE_TEXT&&(e||o(i))||(r++,e=i.nodeType==CKEDITOR.NODE_TEXT),i=i.previousSibling;);return r},getNextSourceNode:function(t,e,i){if(i&&!i.call){var n=i;i=function(t){return!t.equals(n)}}var o;if(!(t=!t&&this.getFirst&&this.getFirst())){if(this.type==CKEDITOR.NODE_ELEMENT&&i&&!1===i(this,!0))return null;t=this.getNext()}for(;!t&&(o=(o||this).getParent());){if(i&&!1===i(o,!0))return null;t=o.getNext()}return!t||i&&!1===i(t)?null:e&&e!=t.type?t.getNextSourceNode(!1,e,i):t},getPreviousSourceNode:function(t,e,i){if(i&&!i.call){var n=i;i=function(t){return!t.equals(n)}}var o;if(!(t=!t&&this.getLast&&this.getLast())){if(this.type==CKEDITOR.NODE_ELEMENT&&i&&!1===i(this,!0))return null;t=this.getPrevious()}for(;!t&&(o=(o||this).getParent());){if(i&&!1===i(o,!0))return null;t=o.getPrevious()}return!t||i&&!1===i(t)?null:e&&t.type!=e?t.getPreviousSourceNode(!1,e,i):t},getPrevious:function(t){for(var e,i=this.$;(e=(i=i.previousSibling)&&10!=i.nodeType&&new CKEDITOR.dom.node(i))&&t&&!t(e););return e},getNext:function(t){for(var e,i=this.$;(e=(i=i.nextSibling)&&new CKEDITOR.dom.node(i))&&t&&!t(e););return e},getParent:function(t){var e=this.$.parentNode;return e&&(e.nodeType==CKEDITOR.NODE_ELEMENT||t&&e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(e):null},getParents:function(t){for(var e=this,i=[];i[t?"push":"unshift"](e),e=e.getParent(););return i},getCommonAncestor:function(t){if(t.equals(this))return this;if(t.contains&&t.contains(this))return t;var e=this.contains?this:this.getParent();do{if(e.contains(t))return e}while(e=e.getParent());return null},getPosition:function(t){var e=this.$,i=t.$;if(e.compareDocumentPosition)return e.compareDocumentPosition(i);if(e==i)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&t.type==CKEDITOR.NODE_ELEMENT){if(e.contains){if(e.contains(i))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(i.contains(e))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in e)return e.sourceIndex<0||i.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:e.sourceIndex<i.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}e=this.getAddress(),t=t.getAddress();i=Math.min(e.length,t.length);for(var n=0;n<i;n++)if(e[n]!=t[n])return e[n]<t[n]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return e.length<t.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var i,n,o=this.$;for(t||(o=o.parentNode),i="function"==typeof e?(n=!0,e):(n=!1,function(t){return t="string"==typeof t.nodeName?t.nodeName.toLowerCase():"","string"==typeof e?t==e:t in e});o;){if(i(n?new CKEDITOR.dom.node(o):o))return new CKEDITOR.dom.node(o);try{o=o.parentNode}catch(t){o=null}}return null},hasAscendant:function(t,e){var i=this.$;for(e||(i=i.parentNode);i;){if(i.nodeName&&i.nodeName.toLowerCase()==t)return!0;i=i.parentNode}return!1},move:function(t,e){t.append(this.remove(),e)},remove:function(t){var e=this.$,i=e.parentNode;if(i){if(t)for(;t=e.firstChild;)i.insertBefore(e.removeChild(t),e);i.removeChild(e)}return this},replace:function(t){this.insertBefore(t),t.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var t;this.getFirst&&(t=this.getFirst());){if(t.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.ltrim(t.getText()),i=t.getLength();if(!e){t.remove();continue}e.length<i&&(t.split(i-e.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var t;this.getLast&&(t=this.getLast());){if(t.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.rtrim(t.getText()),i=t.getLength();if(!e){t.remove();continue}e.length<i&&(t.split(e.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(t=this.$.lastChild)&&1==t.type&&"br"==t.nodeName.toLowerCase()&&t.parentNode.removeChild(t)},isReadOnly:function(t){var e=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(e=this.getParent()),CKEDITOR.env.edge&&e&&e.is("textarea","input")&&(t=!0),!t&&e&&void 0!==e.$.isContentEditable)return!(e.$.isContentEditable||e.data("cke-editable"));for(;e;){if(e.data("cke-editable"))return!1;if(e.hasAttribute("contenteditable"))return"false"==e.getAttribute("contenteditable");e=e.getParent()}return!0}}),CKEDITOR.dom.window=function(t){CKEDITOR.dom.domObject.call(this,t)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var t=this.$.document,e="CSS1Compat"==t.compatMode;return{width:(e?t.documentElement.clientWidth:t.body.clientWidth)||0,height:(e?t.documentElement.clientHeight:t.body.clientHeight)||0}},getScrollPosition:function(){var t=this.$;return"pageXOffset"in t?{x:t.pageXOffset||0,y:t.pageYOffset||0}:{x:(t=t.document).documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}},getFrame:function(){var t=this.$.frameElement;return t?new CKEDITOR.dom.element.get(t):null}}),CKEDITOR.dom.document=function(t){CKEDITOR.dom.domObject.call(this,t)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(t){if(this.$.createStyleSheet)this.$.createStyleSheet(t);else{var e=new CKEDITOR.dom.element("link");e.setAttributes({rel:"stylesheet",type:"text/css",href:t}),this.getHead().append(e)}},appendStyleText:function(t){if(this.$.createStyleSheet){var e=this.$.createStyleSheet("");e.cssText=t}else{var i=new CKEDITOR.dom.element("style",this);i.append(new CKEDITOR.dom.text(t,this)),this.getHead().append(i)}return e||i.$.sheet},createElement:function(t,e){var i=new CKEDITOR.dom.element(t,this);return e&&(e.attributes&&i.setAttributes(e.attributes),e.styles&&i.setStyles(e.styles)),i},createText:function(t){return new CKEDITOR.dom.text(t,this)},focus:function(){this.getWindow().focus()},getActive:function(){var t;try{t=this.$.activeElement}catch(t){return null}return new CKEDITOR.dom.element(t)},getById:function(t){return(t=this.$.getElementById(t))?new CKEDITOR.dom.element(t):null},getByAddress:function(t,e){for(var i=this.$.documentElement,n=0;i&&n<t.length;n++){var o=t[n];if(e)for(var r=-1,s=0;s<i.childNodes.length;s++){var a=i.childNodes[s];if((!0!==e||3!=a.nodeType||!a.previousSibling||3!=a.previousSibling.nodeType)&&++r==o){i=a;break}}else i=i.childNodes[o]}return i?new CKEDITOR.dom.node(i):null},getElementsByTag:function(t,e){return CKEDITOR.env.ie&&document.documentMode<=8||!e||(t=e+":"+t),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(t))},getHead:function(){var t=this.$.getElementsByTagName("head")[0];return t?new CKEDITOR.dom.element(t):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(t){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(t=t.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(t),this.$.close()},find:function(t){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(t))},findOne:function(t){return(t=this.$.querySelector(t))?new CKEDITOR.dom.element(t):null},_getHtml5ShivFrag:function(){var t=this.getCustomData("html5ShivFrag");return t||(t=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(t,!0),this.setCustomData("html5ShivFrag",t)),t}}),CKEDITOR.dom.nodeList=function(t){this.$=t},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(t){return t<0||t>=this.$.length?null:(t=this.$[t])?new CKEDITOR.dom.node(t):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,function(t){return new CKEDITOR.dom.node(t)})}},CKEDITOR.dom.element=function(t,e){"string"==typeof t&&(t=(e?e.$:document).createElement(t)),CKEDITOR.dom.domObject.call(this,t)},CKEDITOR.dom.element.get=function(t){return(t="string"==typeof t?document.getElementById(t)||document.getElementsByName(t)[0]:t)&&(t.$?t:new CKEDITOR.dom.element(t))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(t,e){var i=new CKEDITOR.dom.element("div",e);return i.setHtml(t),i.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(t,e,i,n){var o=e.getCustomData("list_marker_id")||e.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),r=e.getCustomData("list_marker_names")||e.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return t[o]=e,r[i]=1,e.setCustomData(i,n)},CKEDITOR.dom.element.clearAllMarkers=function(t){for(var e in t)CKEDITOR.dom.element.clearMarkers(t,t[e],1)},CKEDITOR.dom.element.clearMarkers=function(t,e,i){var n,o=e.getCustomData("list_marker_names"),r=e.getCustomData("list_marker_id");for(n in o)e.removeCustomData(n);e.removeCustomData("list_marker_names"),i&&(e.removeCustomData("list_marker_id"),delete t[r])},function(){function i(t,e){return-1<(" "+t+" ").replace(s," ").indexOf(" "+e+" ")}function n(t){var e=!0;return t.$.id||(t.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),e=!1),function(){e||t.removeAttribute("id")}}function o(t,e){var i=CKEDITOR.tools.escapeCss(t.$.id);return"#"+i+" "+e.split(/,\s*/).join(", #"+i+" ")}function r(t){for(var e=0,i=0,n=h[t].length;i<n;i++)e+=parseFloat(this.getComputedStyle(h[t][i])||0,10)||0;return e}var e,t=void 0!==(t=document.createElement("_").classList)&&null!==String(t.add).match(/\[Native code\]/gi),s=/[\n\t\r]/g;function a(t,e){var i=t.childNodes;if(0<=e&&e<i.length)return i[e]}function l(t,e){return this.$.setAttribute(t,e),this}function c(t,e,i){if(e&&e.type==CKEDITOR.NODE_ELEMENT){for(var n=[];e.data("cke-bookmark")||e.isEmptyInlineRemoveable();)if(n.push(e),!(e=i?e.getNext():e.getPrevious())||e.type!=CKEDITOR.NODE_ELEMENT)return;if(t.isIdentical(e)){for(var o=i?t.getLast():t.getFirst();n.length;)n.shift().move(t,!i);e.moveChildren(t,!i),e.remove(),o&&o.type==CKEDITOR.NODE_ELEMENT&&o.mergeSiblings()}}}function u(t){var e=this.$.attributes.getNamedItem(t);if("input"==this.getName())switch(t){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return"checkbox"==(t=this.getAttribute("type"))||"radio"==t?"on"!=this.$.value:!!this.$.value}return!!e&&e.specified}function d(){try{this.$.focus()}catch(t){}}CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:t?function(t){return this.$.classList.add(t),this}:function(t){var e=this.$.className;return e&&(i(e,t)||(e+=" "+t)),this.$.className=e||t,this},removeClass:t?function(t){var e=this.$;return e.classList.remove(t),e.className||e.removeAttribute("class"),this}:function(t){var e=this.getAttribute("class");return e&&i(e,t)&&((e=e.replace(new RegExp("(?:^|\\s+)"+t+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",e):this.removeAttribute("class")),this},hasClass:function(t){return i(this.$.className,t)},append:function(t,e){return"string"==typeof t&&(t=this.getDocument().createElement(t)),e?this.$.insertBefore(t.$,this.$.firstChild):this.$.appendChild(t.$),t},appendHtml:function(t){if(this.$.childNodes.length){var e=new CKEDITOR.dom.element("div",this.getDocument());e.setHtml(t),e.moveChildren(this)}else this.setHtml(t)},appendText:function(t){null!=this.$.text&&CKEDITOR.env.ie&&CKEDITOR.env.version<9?this.$.text+=t:this.append(new CKEDITOR.dom.text(t))},appendBogus:function(t){if(t||CKEDITOR.env.needsBrFiller){for(t=this.getLast();t&&t.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(t.getText());)t=t.getPrevious();t&&t.is&&t.is("br")||(t=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&t.setAttribute("type","_moz"),this.append(t))}},breakParent:function(t,e){var i=new CKEDITOR.dom.range(this.getDocument());i.setStartAfter(this),i.setEndAfter(t);var n,o=i.extractContents(!1,e||!1);if(i.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(i=new CKEDITOR.dom.element("div");n=o.getFirst();)n.$.style.backgroundColor&&(n.$.style.backgroundColor=n.$.style.backgroundColor),i.append(n);i.insertAfter(this),i.remove(!0)}else o.insertAfterNode(this)},contains:document.compareDocumentPosition?function(t){return!!(16&this.$.compareDocumentPosition(t.$))}:function(t){var e=this.$;return t.type!=CKEDITOR.NODE_ELEMENT?e.contains(t.getParent().$):e!=t.$&&e.contains(t.$)},focus:function(t){t?CKEDITOR.tools.setTimeout(d,100,this):d.call(this)},getHtml:function(){var t=this.$.innerHTML;return CKEDITOR.env.ie?t.replace(/<\?[^>]*>/g,""):t},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var t=this.$.ownerDocument.createElement("div");return t.appendChild(this.$.cloneNode(!0)),t.innerHTML},getClientRect:function(){var t=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return t.width||(t.width=t.right-t.left),t.height||(t.height=t.bottom-t.top),t},setHtml:CKEDITOR.env.ie&&CKEDITOR.env.version<9?function(e){try{var i=this.$;if(this.getParent())return i.innerHTML=e;var t=this.getDocument()._getHtml5ShivFrag();return t.appendChild(i),i.innerHTML=e,t.removeChild(i),e}catch(t){for(this.$.innerHTML="",(i=new CKEDITOR.dom.element("body",this.getDocument())).$.innerHTML=e,i=i.getChildren();i.count();)this.append(i.getItem(0));return e}}:function(t){return this.$.innerHTML=t},setText:(e=document.createElement("p"),e.innerHTML="x",e=e.textContent,function(t){this.$[e?"textContent":"innerText"]=t}),getAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t){switch(t){case"class":t="className";break;case"http-equiv":t="httpEquiv";break;case"name":return this.$.name;case"tabindex":return 0!==(t=this.$.getAttribute(t,2))&&0===this.$.tabIndex&&(t=null),t;case"checked":return((t=this.$.attributes.getNamedItem(t)).specified?t.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[t];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(t,2)}:function(t){return this.$.getAttribute(t,2)},getAttributes:function(t){var e,i={},n=this.$.attributes;for(t=CKEDITOR.tools.isArray(t)?t:[],e=0;e<n.length;e++)-1===CKEDITOR.tools.indexOf(t,n[e].name)&&(i[n[e].name]=n[e].value);return i},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(t){var e=this.getWindow().$.getComputedStyle(this.$,null);return e?e.getPropertyValue(t):""}:function(t){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(t)]},getDtd:function(){var t=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return t},t},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var t=this.$.tabIndex;return 0!==t||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?t:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var t=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&document.documentMode<=8){var e=this.$.scopeName;"HTML"!=e&&(t=e.toLowerCase()+":"+t)}return this.getName=function(){return t},this.getName()},getValue:function(){return this.$.value},getFirst:function(t){var e=this.$.firstChild;return(e=e&&new CKEDITOR.dom.node(e))&&t&&!t(e)&&(e=e.getNext(t)),e},getLast:function(t){var e=this.$.lastChild;return(e=e&&new CKEDITOR.dom.node(e))&&t&&!t(e)&&(e=e.getPrevious(t)),e},getStyle:function(t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(t)]},is:function(){var t=this.getName();if("object"==typeof arguments[0])return!!arguments[0][t];for(var e=0;e<arguments.length;e++)if(arguments[e]==t)return!0;return!1},isEditable:function(t){var e=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[e]||CKEDITOR.dtd.$empty[e]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount())&&(!1===t||!(!(t=CKEDITOR.dtd[e]||CKEDITOR.dtd.span)||!t["#"]))},isIdentical:function(t){var e=this.clone(0,1);if(t=t.clone(0,1),e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),e.$.isEqualNode)return e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.isEqualNode(t.$);if(e=e.getOuterHtml(),t=t.getOuterHtml(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&this.is("a")){var i=this.getParent();i.type==CKEDITOR.NODE_ELEMENT&&((i=i.clone()).setHtml(e),e=i.getHtml(),i.setHtml(t),t=i.getHtml())}return e==t},isVisible:function(){var t,e,i=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return i&&CKEDITOR.env.webkit&&(!(t=this.getWindow()).equals(CKEDITOR.document.getWindow())&&(e=t.$.frameElement)&&(i=new CKEDITOR.dom.element(e).isVisible())),!!i},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var t=this.getChildren(),e=0,i=t.count();e<i;e++){var n=t.getItem(e);if((n.type!=CKEDITOR.NODE_ELEMENT||!n.data("cke-bookmark"))&&(n.type==CKEDITOR.NODE_ELEMENT&&!n.isEmptyInlineRemoveable()||n.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(n.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var t=this.$.attributes,e=0;e<t.length;e++){var i=t[e];switch(i.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(i.specified)return!0}}return!1}:function(){var t=this.$.attributes,e=t.length,i={"data-cke-expando":1,_moz_dirty:1};return 0<e&&(2<e||!i[t[0].nodeName]||2==e&&!i[t[1].nodeName])},hasAttribute:CKEDITOR.env.ie?CKEDITOR.env.version<8?function(t){return"name"==t?!!this.$.name:u.call(this,t)}:u:function(t){return!!this.$.attributes.getNamedItem(t)},hide:function(){this.setStyle("display","none")},moveChildren:function(t,e){var i,n=this.$;if(n!=(t=t.$))if(e)for(;i=n.lastChild;)t.insertBefore(n.removeChild(i),t.firstChild);else for(;i=n.firstChild;)t.appendChild(n.removeChild(i))},mergeSiblings:function(t){(!1===t||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(c(this,this.getNext(),!0),c(this,this.getPrevious()))},show:function(){this.setStyles({display:"",visibility:""})},setAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t,e){return"class"==t?this.$.className=e:"style"==t?this.$.style.cssText=e:"tabindex"==t?this.$.tabIndex=e:"checked"==t?this.$.checked=e:"contenteditable"==t?l.call(this,"contentEditable",e):l.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(t,e){if("src"==t&&e.match(/^http:\/\//))try{l.apply(this,arguments)}catch(t){}else l.apply(this,arguments);return this}:l,setAttributes:function(t){for(var e in t)this.setAttribute(e,t[e]);return this},setValue:function(t){return this.$.value=t,this},removeAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t){"class"==t?t="className":"tabindex"==t?t="tabIndex":"contenteditable"==t&&(t="contentEditable"),this.$.removeAttribute(t)}:function(t){this.$.removeAttribute(t)},removeAttributes:function(t){if(CKEDITOR.tools.isArray(t))for(var e=0;e<t.length;e++)this.removeAttribute(t[e]);else for(e in t=t||this.getAttributes())t.hasOwnProperty(e)&&this.removeAttribute(e)},removeStyle:function(t){if((n=this.$.style).removeProperty||"border"!=t&&"margin"!=t&&"padding"!=t)n.removeProperty?n.removeProperty(t):n.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(t)),this.$.style.cssText||this.removeAttribute("style");else{var e,i=["top","left","right","bottom"];"border"==t&&(e=["color","style","width"]);for(var n=[],o=0;o<i.length;o++)if(e)for(var r=0;r<e.length;r++)n.push([t,i[o],e[r]].join("-"));else n.push([t,i[o]].join("-"));for(t=0;t<n.length;t++)this.removeStyle(n[t])}},setStyle:function(t,e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(t)]=e,this},setStyles:function(t){for(var e in t)this.setStyle(e,t[e]);return this},setOpacity:function(t){CKEDITOR.env.ie&&CKEDITOR.env.version<9?(t=Math.round(100*t),this.setStyle("filter",100<=t?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+t+")")):this.setStyle("opacity",t)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var t=this.getElementsByTag("*"),e=0,i=t.count();e<i;e++)t.getItem(e).setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var t=this;"html"!=t.getName();){if("static"!=t.getComputedStyle("position"))return t;t=t.getParent()}return null},getDocumentPosition:function(t){var e=0,i=0,n=this.getDocument(),o=n.getBody(),r="BackCompat"==n.$.compatMode;if(!document.documentElement.getBoundingClientRect||CKEDITOR.env.ie&&8===CKEDITOR.env.version)for(l=this,c=null;l&&"body"!=l.getName()&&"html"!=l.getName();){for(e+=l.$.offsetLeft-l.$.scrollLeft,i+=l.$.offsetTop-l.$.scrollTop,l.equals(this)||(e+=l.$.clientLeft||0,i+=l.$.clientTop||0);c&&!c.equals(l);)e-=c.$.scrollLeft,i-=c.$.scrollTop,c=c.getParent();l=(s=(c=l).$.offsetParent)?new CKEDITOR.dom.element(s):null}else{var s=this.$.getBoundingClientRect(),a=n.$.documentElement,l=a.clientTop||o.$.clientTop||0,c=a.clientLeft||o.$.clientLeft||0,u=!0;CKEDITOR.env.ie&&(u=n.getDocumentElement().contains(this),n=n.getBody().contains(this),u=r&&n||!r&&u),u&&(i=CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(e=o.$.scrollLeft||a.scrollLeft,o.$.scrollTop||a.scrollTop):(e=(i=r?o.$:a).scrollLeft,i.scrollTop),e=s.left+e-c,i=s.top+i-l)}return t&&(s=this.getWindow(),l=t.getWindow(),!s.equals(l)&&s.$.frameElement&&(e+=(t=new CKEDITOR.dom.element(s.$.frameElement).getDocumentPosition(t)).x,i+=t.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||r||(e+=this.$.clientLeft?1:0,i+=this.$.clientTop?1:0),{x:e,y:i}},scrollIntoView:function(t){var e=this.getParent();if(e)do{if((e.$.clientWidth&&e.$.clientWidth<e.$.scrollWidth||e.$.clientHeight&&e.$.clientHeight<e.$.scrollHeight)&&!e.is("body")&&this.scrollIntoParent(e,t,1),e.is("html")){var i=e.getWindow();try{var n=i.$.frameElement;n&&(e=new CKEDITOR.dom.element(n))}catch(t){}}}while(e=e.getParent())},scrollIntoParent:function(i,t,e){var n,o,r,s;function a(t,e){/body|html/.test(i.getName())?i.getWindow().$.scrollBy(t,e):(i.$.scrollLeft+=t,i.$.scrollTop+=e)}function l(t,e){var i={x:0,y:0};if(!t.is(u?"body":"html")){var n=t.$.getBoundingClientRect();i.x=n.left,i.y=n.top}return(n=t.getWindow()).equals(e)||(n=l(CKEDITOR.dom.element.get(n.$.frameElement),e),i.x+=n.x,i.y+=n.y),i}function c(t,e){return parseInt(t.getComputedStyle("margin-"+e)||0,10)||0}var u="BackCompat"==(r=(i=i||this.getWindow()).getDocument()).$.compatMode;i instanceof CKEDITOR.dom.window&&(i=u?r.getBody():r.getDocumentElement()),CKEDITOR.env.webkit&&(r=this.getEditor(!1))&&(r._.previousScrollTop=null),o=l(this,r=i.getWindow());var d=l(i,r),h=this.$.offsetHeight;n=this.$.offsetWidth;var p=i.$.clientHeight,f=i.$.clientWidth;r=o.x-c(this,"left")-d.x||0,s=o.y-c(this,"top")-d.y||0,n=o.x+n+c(this,"right")-(d.x+f)||0,o=o.y+h+c(this,"bottom")-(d.y+p)||0,(s<0||0<o)&&a(0,!0===t?s:!1===t?o:s<0?s:o),e&&(r<0||0<n)&&a(r<0?r:n,0)},setState:function(t,e,i){switch(e=e||"cke",t){case CKEDITOR.TRISTATE_ON:this.addClass(e+"_on"),this.removeClass(e+"_off"),this.removeClass(e+"_disabled"),i&&this.setAttribute("aria-pressed",!0),i&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(e+"_disabled"),this.removeClass(e+"_off"),this.removeClass(e+"_on"),i&&this.setAttribute("aria-disabled",!0),i&&this.removeAttribute("aria-pressed");break;default:this.addClass(e+"_off"),this.removeClass(e+"_on"),this.removeClass(e+"_disabled"),i&&this.removeAttribute("aria-pressed"),i&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var e=this.$;try{e.contentWindow.document}catch(t){e.src=e.src}return e&&new CKEDITOR.dom.document(e.contentWindow.document)},copyAttributes:function(t,e){var i=this.$.attributes;e=e||{};for(var n=0;n<i.length;n++){var o,r=i[n],s=r.nodeName.toLowerCase();s in e||("checked"==s&&(o=this.getAttribute(s))?t.setAttribute(s,o):CKEDITOR.env.ie&&!this.hasAttribute(s)||(null===(o=this.getAttribute(s))&&(o=r.nodeValue),t.setAttribute(s,o)))}""!==this.$.style.cssText&&(t.$.style.cssText=this.$.style.cssText)},renameNode:function(t){if(this.getName()!=t){var e=this.getDocument();t=new CKEDITOR.dom.element(t,e),this.copyAttributes(t),this.moveChildren(t),this.getParent(!0)&&this.$.parentNode.replaceChild(t.$,this.$),t.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=t.$,delete this.getName}},getChild:function(t){var e=this.$;if(t.slice)for(t=t.slice();0<t.length&&e;)e=a(e,t.shift());else e=a(e,t);return e?new CKEDITOR.dom.node(e):null},getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function e(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(t){t.data.getTarget().getAscendant(e,!0)||t.data.preventDefault()})},getDirection:function(t){return t?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(t,e){return t="data-"+t,void 0===e?this.getAttribute(t):(!1===e?this.removeAttribute(t):this.setAttribute(t,e),null)},getEditor:function(t){var e,i,n,o=CKEDITOR.instances;for(e in t=t||void 0===t,o)if((i=o[e]).element.equals(this)&&i.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!t&&(n=i.editable())&&(n.equals(this)||n.contains(this)))return i;return null},find:function(t){var e=n(this);return t=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(o(this,t))),e(),t},findOne:function(t){var e=n(this);return t=this.$.querySelector(o(this,t)),e(),t?new CKEDITOR.dom.element(t):null},forEach:function(t,e,i){if(!(i||e&&this.type!=e))var n=t(this);if(!1!==n){i=this.getChildren();for(var o=0;o<i.count();o++)(n=i.getItem(o)).type==CKEDITOR.NODE_ELEMENT?n.forEach(t,e):e&&n.type!=e||t(n)}}});var h={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(t,e,i){"number"==typeof e&&(!i||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(e-=r.call(this,t)),this.setStyle(t,e+"px"))},CKEDITOR.dom.element.prototype.getSize=function(t,e){var i=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(t)],this.$["client"+CKEDITOR.tools.capitalize(t)])||0;return e&&(i-=r.call(this,t)),i}}(),CKEDITOR.dom.documentFragment=function(t){t=t||CKEDITOR.document,this.$=t.type==CKEDITOR.NODE_DOCUMENT?t.$.createDocumentFragment():t},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(t){(t=t.$).parentNode.insertBefore(this.$,t.nextSibling)},getHtml:function(){var t=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(t),t.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function n(t,e){var i=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,i.collapsed)return this.end(),null;i.optimize()}var n,o=i.startContainer;n=i.endContainer;var r,s=i.startOffset,a=i.endOffset,l=this.guard,c=this.type,u=t?"getPreviousSourceNode":"getNextSourceNode";if(!t&&!this._.guardLTR){var d=n.type==CKEDITOR.NODE_ELEMENT?n:n.getParent(),h=n.type==CKEDITOR.NODE_ELEMENT?n.getChild(a):n.getNext();this._.guardLTR=function(t,e){return!(e&&d.equals(t)||h&&t.equals(h)||t.type==CKEDITOR.NODE_ELEMENT&&e&&t.equals(i.root))}}if(t&&!this._.guardRTL){var p=o.type==CKEDITOR.NODE_ELEMENT?o:o.getParent(),f=o.type==CKEDITOR.NODE_ELEMENT?s?o.getChild(s-1):null:o.getPrevious();this._.guardRTL=function(t,e){return!(e&&p.equals(t)||f&&t.equals(f)||t.type==CKEDITOR.NODE_ELEMENT&&e&&t.equals(i.root))}}var g=t?this._.guardRTL:this._.guardLTR;for(r=l?function(t,e){return!1!==g(t,e)&&l(t,e)}:g,this.current?n=this.current[u](!1,c,r):(t?n.type==CKEDITOR.NODE_ELEMENT&&(n=0<a?n.getChild(a-1):!1===r(n,!0)?null:n.getPreviousSourceNode(!0,c,r)):(n=o).type==CKEDITOR.NODE_ELEMENT&&((n=n.getChild(s))||(n=!1===r(o,!0)?null:o.getNextSourceNode(!0,c,r))),n&&!1===r(n)&&(n=null));n&&!this._.end;){if(this.current=n,this.evaluator&&!1===this.evaluator(n)){if(e&&this.evaluator)return!1}else if(!e)return n;n=n[u](!1,c,r)}return this.end(),this.current=null}function t(t){for(var e,i=null;e=n.call(this,t);)i=e;return i}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(t){this.range=t,this._={}},proto:{end:function(){this._.end=1},next:function(){return n.call(this)},previous:function(){return n.call(this,1)},checkForward:function(){return!1!==n.call(this,0,1)},checkBackward:function(){return!1!==n.call(this,1,1)},lastForward:function(){return t.call(this)},lastBackward:function(){return t.call(this,1)},reset:function(){delete this.current,this._={}}}});var e={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},i={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(t){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in i||!e[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||t&&this.is(t))},CKEDITOR.dom.walker.blockBoundary=function(e){return function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary(e))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(n,o){function r(t){return t&&t.getName&&"span"==t.getName()&&t.data("cke-bookmark")}return function(t){var e,i;return e=t&&t.type!=CKEDITOR.NODE_ELEMENT&&(i=t.getParent())&&r(i),e=n?e:e||r(t),!!(o^e)}},CKEDITOR.dom.walker.whitespaces=function(i){return function(t){var e;return t&&t.type==CKEDITOR.NODE_TEXT&&(e=!CKEDITOR.tools.trim(t.getText())||CKEDITOR.env.webkit&&t.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(i^e)}},CKEDITOR.dom.walker.invisible=function(e){var i=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.env.webkit?1:0;return function(t){return t=i(t)?1:(t.type==CKEDITOR.NODE_TEXT&&(t=t.getParent()),t.$.offsetWidth<=n),!!(e^t)}},CKEDITOR.dom.walker.nodeType=function(e,i){return function(t){return!!(i^t.type==e)}},CKEDITOR.dom.walker.bogus=function(i){function n(t){return!r(t)&&!s(t)}return function(t){var e=CKEDITOR.env.needsBrFiller?t.is&&t.is("br"):t.getText&&o.test(t.getText());return e&&(e=t.getParent(),t=t.getNext(n),e=e.isBlockBoundary()&&(!t||t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary())),!!(i^e)}},CKEDITOR.dom.walker.temp=function(e){return function(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t=t&&t.hasAttribute("data-cke-temp"),!!(e^t)}};var o=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,r=CKEDITOR.dom.walker.whitespaces(),s=CKEDITOR.dom.walker.bookmark(),a=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(e){return function(t){return t=r(t)||s(t)||a(t),!!(e^t)}};var l=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(n){return function(t){for(var e=0,i=t.getChildCount();e<i;++e)if(!l(t.getChild(e)))return!!n;return!n}};var c=CKEDITOR.dom.walker.empty(),u=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(t){var e,i={};for(e in t)CKEDITOR.dtd[e]["#"]&&(i[e]=1);return i}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(e){return function(t){return t=!l(t)&&!!(t.type==CKEDITOR.NODE_TEXT||t.type==CKEDITOR.NODE_ELEMENT&&(t.is(CKEDITOR.dtd.$inline)||t.is("hr")||"false"==t.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&t.is(u)&&c(t))),!!(e^t)}},CKEDITOR.dom.element.prototype.getBogus=function(){for(var t,e=this;e=e.getPreviousSourceNode(),s(t=e)||r(t)||t.type==CKEDITOR.NODE_ELEMENT&&t.is(CKEDITOR.dtd.$inline)&&!t.is(CKEDITOR.dtd.$empty););return!(!e||!(CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&o.test(e.getText())))&&e}}(),CKEDITOR.dom.range=function(t){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var e=t instanceof CKEDITOR.dom.document;this.document=e?t:t.getDocument(),this.root=e?t.getBody():t},M={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},N=CKEDITOR.dom.walker.bogus(),K=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,L=CKEDITOR.dom.walker.editable(),P=CKEDITOR.dom.walker.ignored(!0),CKEDITOR.dom.range.prototype={clone:function(){var t=new CKEDITOR.dom.range(this.root);return t._setStartContainer(this.startContainer),t.startOffset=this.startOffset,t._setEndContainer(this.endContainer),t.endOffset=this.endOffset,t.collapsed=this.collapsed,t},collapse:function(t){t?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(t){var e=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||Zt(this,2,e,!1,void 0===t||t),e},deleteContents:function(t){this.collapsed||Zt(this,0,null,t)},extractContents:function(t,e){var i=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||Zt(this,1,i,t,void 0===e||e),i},createBookmark:function(t){var e,i,n,o,r=this.collapsed;return(e=this.document.createElement("span")).data("cke-bookmark",1),e.setStyle("display","none"),e.setHtml("&nbsp;"),t&&(n="cke_bm_"+CKEDITOR.tools.getNextNumber(),e.setAttribute("id",n+(r?"C":"S"))),r||((i=e.clone()).setHtml("&nbsp;"),t&&i.setAttribute("id",n+"E"),(o=this.clone()).collapse(),o.insertNode(i)),(o=this.clone()).collapse(!0),o.insertNode(e),i?(this.setStartAfter(e),this.setEndBefore(i)):this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),{startNode:t?n+(r?"C":"S"):e,endNode:t?n+"E":i,serializable:t,collapsed:r}},createBookmark2:(A=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0),function(t){var e=this.collapsed,i={container:this.startContainer,offset:this.startOffset},n={container:this.endContainer,offset:this.endOffset};return t&&(ie(i),ne(i,this.root),e||(ie(n),ne(n,this.root))),{start:i.container.getAddress(t),end:e?null:n.container.getAddress(t),startOffset:i.offset,endOffset:n.offset,normalized:t,collapsed:e,is2:!0}}),moveToBookmark:function(t){if(t.is2){var e=this.document.getByAddress(t.start,t.normalized),i=t.startOffset,n=t.end&&this.document.getByAddress(t.end,t.normalized);t=t.endOffset,this.setStart(e,i),n?this.setEnd(n,t):this.collapse(!0)}else e=(i=t.serializable)?this.document.getById(t.startNode):t.startNode,t=i?this.document.getById(t.endNode):t.endNode,this.setStartBefore(e),e.remove(),t?(this.setEndBefore(t),t.remove()):this.collapse(!0)},getBoundaryNodes:function(){var t,e=this.startContainer,i=this.endContainer,n=this.startOffset,o=this.endOffset;if(e.type==CKEDITOR.NODE_ELEMENT)if(n<(t=e.getChildCount()))e=e.getChild(n);else if(t<1)e=e.getPreviousSourceNode();else{for(e=e.$;e.lastChild;)e=e.lastChild;e=(e=new CKEDITOR.dom.node(e)).getNextSourceNode()||e}if(i.type==CKEDITOR.NODE_ELEMENT)if(o<(t=i.getChildCount()))i=i.getChild(o).getPreviousSourceNode(!0);else if(t<1)i=i.getPreviousSourceNode();else{for(i=i.$;i.lastChild;)i=i.lastChild;i=new CKEDITOR.dom.node(i)}return e.getPosition(i)&CKEDITOR.POSITION_FOLLOWING&&(e=i),{startNode:e,endNode:i}},getCommonAncestor:function(t,e){var i=this.startContainer,n=this.endContainer;return i=i.equals(n)?t&&i.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?i.getChild(this.startOffset):i:i.getCommonAncestor(n),e&&!i.is?i.getParent():i},optimize:function(){var t=this.startContainer,e=this.startOffset;t.type!=CKEDITOR.NODE_ELEMENT&&(e?e>=t.getLength()&&this.setStartAfter(t):this.setStartBefore(t)),t=this.endContainer,e=this.endOffset,t.type!=CKEDITOR.NODE_ELEMENT&&(e?e>=t.getLength()&&this.setEndAfter(t):this.setEndBefore(t))},optimizeBookmark:function(){var t=this.startContainer,e=this.endContainer;t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setStartAt(t,CKEDITOR.POSITION_BEFORE_START),e&&e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setEndAt(e,CKEDITOR.POSITION_AFTER_END)},trim:function(t,e){var i=this.startContainer,n=this.startOffset,o=this.collapsed;if((!t||o)&&i&&i.type==CKEDITOR.NODE_TEXT){if(n)if(n>=i.getLength())n=i.getIndex()+1,i=i.getParent();else{var r=i.split(n);n=i.getIndex()+1,i=i.getParent(),this.startContainer.equals(this.endContainer)?this.setEnd(r,this.endOffset-this.startOffset):i.equals(this.endContainer)&&(this.endOffset+=1)}else n=i.getIndex(),i=i.getParent();if(this.setStart(i,n),o)return void this.collapse(!0)}i=this.endContainer,n=this.endOffset,e||o||!i||i.type!=CKEDITOR.NODE_TEXT||(n=n?(n>=i.getLength()||i.split(n),i.getIndex()+1):i.getIndex(),i=i.getParent(),this.setEnd(i,n))},enlarge:function(t,e){function i(t){return t&&t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable")?null:t}var o=new RegExp(/[^\s\ufeff]/);switch(t){case CKEDITOR.ENLARGE_INLINE:var n=1;case CKEDITOR.ENLARGE_ELEMENT:function r(t,e){var i,n;for((i=new CKEDITOR.dom.range(f)).setStart(t,e),i.setEndAt(f,CKEDITOR.POSITION_BEFORE_END),(i=new CKEDITOR.dom.walker(i)).guard=function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary())};n=i.next();){if(n.type!=CKEDITOR.NODE_TEXT)return!1;if(h=n!=t?n.getText():n.substring(e),o.test(h))return!1}return!0}if(this.collapsed)break;var s,a,l,c,u,d,h,p=this.getCommonAncestor(),f=this.root,g=!1;d=this.startContainer;var m=this.startOffset;for(d.type==CKEDITOR.NODE_TEXT?(m&&(g=!!(d=!CKEDITOR.tools.trim(d.substring(0,m)).length&&d)),d&&((c=d.getPrevious())||(l=d.getParent()))):(m&&(c=d.getChild(m-1)||d.getLast()),c||(l=d)),l=i(l);l||c;){if(l&&!c){if(!u&&l.equals(p)&&(u=!0),n?l.isBlockBoundary():!f.contains(l))break;g&&"inline"==l.getComputedStyle("display")||(g=!1,u?s=l:this.setStartBefore(l)),c=l.getPrevious()}for(;c;)if(d=!1,c.type==CKEDITOR.NODE_COMMENT)c=c.getPrevious();else{if(c.type==CKEDITOR.NODE_TEXT)h=c.getText(),o.test(h)&&(c=null),d=/[\s\ufeff]$/.test(h);else if((c.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||e&&c.is("br"))&&!c.data("cke-bookmark"))if(g&&CKEDITOR.dtd.$removeEmpty[c.getName()]){if(h=c.getText(),o.test(h))c=null;else{m=c.$.getElementsByTagName("*");for(var v,y=0;v=m[y++];)if(!CKEDITOR.dtd.$removeEmpty[v.nodeName.toLowerCase()]){c=null;break}}c&&(d=!!h.length)}else c=null;if(d&&(g?u?s=l:l&&this.setStartBefore(l):g=!0),c){if(d=c.getPrevious(),!l&&!d){l=c,c=null;break}c=d}else l=null}l=l&&i(l.getParent())}for(d=this.endContainer,m=this.endOffset,l=c=null,u=g=!1,d.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(d.substring(m)).length?g=!0:(g=!d.getLength(),m==d.getLength()?(c=d.getNext())||(l=d.getParent()):r(d,m)&&(l=d.getParent())):(c=d.getChild(m))||(l=d);l||c;){if(l&&!c){if(!u&&l.equals(p)&&(u=!0),n?l.isBlockBoundary():!f.contains(l))break;g&&"inline"==l.getComputedStyle("display")||(g=!1,u?a=l:l&&this.setEndAfter(l)),c=l.getNext()}for(;c;){if(d=!1,c.type==CKEDITOR.NODE_TEXT)h=c.getText(),r(c,0)||(c=null),d=/^[\s\ufeff]/.test(h);else if(c.type==CKEDITOR.NODE_ELEMENT){if((0<c.$.offsetWidth||e&&c.is("br"))&&!c.data("cke-bookmark"))if(g&&CKEDITOR.dtd.$removeEmpty[c.getName()]){if(h=c.getText(),o.test(h))c=null;else for(m=c.$.getElementsByTagName("*"),y=0;v=m[y++];)if(!CKEDITOR.dtd.$removeEmpty[v.nodeName.toLowerCase()]){c=null;break}c&&(d=!!h.length)}else c=null}else d=1;if(d&&g&&(u?a=l:this.setEndAfter(l)),c){if(d=c.getNext(),!l&&!d){l=c,c=null;break}c=d}else l=null}l=l&&i(l.getParent())}s&&a&&(p=s.contains(a)?a:s,this.setStartBefore(p),this.setEndAfter(p));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:function b(t){if(t.type==CKEDITOR.NODE_ELEMENT&&"false"==t.getAttribute("contenteditable"))if(C){if(C.equals(t))return void(C=null)}else C=t;else if(C)return;var e=w(t);return e||(_=t),e}l=new CKEDITOR.dom.range(this.root),f=this.root,l.setStartAt(f,CKEDITOR.POSITION_AFTER_START),l.setEnd(this.startContainer,this.startOffset),l=new CKEDITOR.dom.walker(l);var _,E,w=CKEDITOR.dom.walker.blockBoundary(t==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),C=null;if(n=function(t){var e=b(t);return!e&&t.is&&t.is("br")&&(E=t),e},l.guard=b,l=l.lastBackward(),_=_||f,this.setStartAt(_,!_.is("br")&&(!l&&this.checkStartOfBlock()||l&&_.contains(l))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),t==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){l=this.clone(),l=new CKEDITOR.dom.walker(l);var T=CKEDITOR.dom.walker.whitespaces(),x=CKEDITOR.dom.walker.bookmark();if(l.evaluator=function(t){return!T(t)&&!x(t)},(l=l.previous())&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("br"))break}(l=this.clone()).collapse(),l.setEndAt(f,CKEDITOR.POSITION_BEFORE_END),(l=new CKEDITOR.dom.walker(l)).guard=t==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?n:b,_=C=E=null,l=l.lastForward(),_=_||f,this.setEndAt(_,!l&&this.checkEndOfBlock()||l&&_.contains(l)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),E&&this.setEndAfter(E)}},shrink:function(i,t,e){var n="boolean"==typeof e?e:!e||"boolean"!=typeof e.shrinkOnBlockBoundary||e.shrinkOnBlockBoundary,o=e&&e.skipBogus;if(!this.collapsed){i=i||CKEDITOR.SHRINK_TEXT;var r=this.clone(),s=this.startContainer,a=this.endContainer,l=this.startOffset,c=this.endOffset,u=e=1;s&&s.type==CKEDITOR.NODE_TEXT&&(l?l>=s.getLength()?r.setStartAfter(s):(r.setStartBefore(s),e=0):r.setStartBefore(s)),a&&a.type==CKEDITOR.NODE_TEXT&&(c?c>=a.getLength()?r.setEndAfter(a):(r.setEndAfter(a),u=0):r.setEndBefore(a)),r=new CKEDITOR.dom.walker(r);var d,h=CKEDITOR.dom.walker.bookmark(),p=CKEDITOR.dom.walker.bogus();return r.evaluator=function(t){return t.type==(i==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)},r.guard=function(t,e){return!!(o&&p(t)||h(t))||!(i==CKEDITOR.SHRINK_ELEMENT&&t.type==CKEDITOR.NODE_TEXT||e&&t.equals(d)||!1===n&&t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()||t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable"))&&(e||t.type!=CKEDITOR.NODE_ELEMENT||(d=t),!0)},e&&(s=r[i==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(s,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),u&&(r.reset(),(r=r[i==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(r,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!e&&!u)}},insertNode:function(t){this.optimizeBookmark(),this.trim(!1,!0);var e=this.startContainer,i=e.getChild(this.startOffset);i?t.insertBefore(i):e.append(t),t.getParent()&&t.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(t)},moveToPosition:function(t,e){this.setStartAt(t,e),this.collapse(!0)},moveToRange:function(t){this.setStart(t.startContainer,t.startOffset),this.setEnd(t.endContainer,t.endOffset)},selectNodeContents:function(t){this.setStart(t,0),this.setEnd(t,t.type==CKEDITOR.NODE_TEXT?t.getLength():t.getChildCount())},setStart:function(t,e){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(e=t.getIndex(),t=t.getParent()),this._setStartContainer(t),this.startOffset=e,this.endContainer||(this._setEndContainer(t),this.endOffset=e),Xt(this)},setEnd:function(t,e){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(e=t.getIndex()+1,t=t.getParent()),this._setEndContainer(t),this.endOffset=e,this.startContainer||(this._setStartContainer(t),this.startOffset=e),Xt(this)},setStartAfter:function(t){this.setStart(t.getParent(),t.getIndex()+1)},setStartBefore:function(t){this.setStart(t.getParent(),t.getIndex())},setEndAfter:function(t){this.setEnd(t.getParent(),t.getIndex()+1)},setEndBefore:function(t){this.setEnd(t.getParent(),t.getIndex())},setStartAt:function(t,e){switch(e){case CKEDITOR.POSITION_AFTER_START:this.setStart(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setStart(t,t.getLength()):this.setStart(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(t)}Xt(this)},setEndAt:function(t,e){switch(e){case CKEDITOR.POSITION_AFTER_START:this.setEnd(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setEnd(t,t.getLength()):this.setEnd(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(t)}Xt(this)},fixBlock:function(t,e){var i=this.createBookmark(),n=this.document.createElement(e);this.collapse(t),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(n),n.trim(),this.insertNode(n);var o=n.getBogus();return o&&o.remove(),n.appendBogus(),this.moveToBookmark(i),n},splitBlock:function(t,e){var i=new CKEDITOR.dom.elementPath(this.startContainer,this.root),n=new CKEDITOR.dom.elementPath(this.endContainer,this.root),o=i.block,r=n.block,s=null;return i.blockLimit.equals(n.blockLimit)?("br"!=t&&(o||(o=this.fixBlock(!0,t),r=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),r=r||this.fixBlock(!1,t)),i=o&&this.checkStartOfBlock(),n=r&&this.checkEndOfBlock(),this.deleteContents(),o&&o.equals(r)&&(n?(s=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(r,CKEDITOR.POSITION_AFTER_END),r=null):i?(s=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),o=null):(r=this.splitElement(o,e||!1),o.is("ul","ol")||o.appendBogus())),{previousBlock:o,nextBlock:r,wasStartOfBlock:i,wasEndOfBlock:n,elementPath:s}):null},splitElement:function(t,e){if(!this.collapsed)return null;this.setEndAt(t,CKEDITOR.POSITION_BEFORE_END);var i=this.extractContents(!1,e||!1),n=t.clone(!1,e||!1);return i.appendTo(n),n.insertAfter(t),this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),n},removeEmptyBlocksAtEnd:(k=CKEDITOR.dom.walker.whitespaces(),S=CKEDITOR.dom.walker.bookmark(!1),function(t){for(var e,i=this.createBookmark(),n=this[t?"endPath":"startPath"](),o=n.block||n.blockLimit;o&&!o.equals(n.root)&&!o.getFirst(ee(o));)e=o.getParent(),this[t?"setEndAt":"setStartAt"](o,CKEDITOR.POSITION_AFTER_END),o.remove(1),o=e;this.moveToBookmark(i)}),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(t,e){var i=e==CKEDITOR.START,n=this.clone();return n.collapse(i),n[i?"setStartAt":"setEndAt"](t,i?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(n)).evaluator=function(e){var i=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(1);return function(t){return!(!n(t)&&!i(t))||!e&&N(t)||t.type==CKEDITOR.NODE_ELEMENT&&t.is(CKEDITOR.dtd.$removeEmpty)}}(i),n[i?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var t=this.startContainer,e=this.startOffset;return CKEDITOR.env.ie&&e&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.ltrim(t.substring(0,e)),K.test(t)&&this.trim(0,1)),this.trim(),t=new CKEDITOR.dom.elementPath(this.startContainer,this.root),(e=this.clone()).collapse(!0),e.setStartAt(t.block||t.blockLimit,CKEDITOR.POSITION_AFTER_START),(t=new CKEDITOR.dom.walker(e)).evaluator=Qt(),t.checkBackward()},checkEndOfBlock:function(){var t=this.endContainer,e=this.endOffset;return CKEDITOR.env.ie&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.rtrim(t.substring(e)),K.test(t)&&this.trim(1,0)),this.trim(),t=new CKEDITOR.dom.elementPath(this.endContainer,this.root),(e=this.clone()).collapse(!1),e.setEndAt(t.block||t.blockLimit,CKEDITOR.POSITION_BEFORE_END),(t=new CKEDITOR.dom.walker(e)).evaluator=Qt(),t.checkForward()},getPreviousNode:function(t,e,i){var n=this.clone();return n.collapse(1),n.setStartAt(i||this.root,CKEDITOR.POSITION_AFTER_START),(i=new CKEDITOR.dom.walker(n)).evaluator=t,i.guard=e,i.previous()},getNextNode:function(t,e,i){var n=this.clone();return n.collapse(),n.setEndAt(i||this.root,CKEDITOR.POSITION_BEFORE_END),(i=new CKEDITOR.dom.walker(n)).evaluator=t,i.guard=e,i.next()},checkReadOnly:function(){var t=this.startContainer,e=this.endContainer;return!(te(t,e)&&te(e,t))},moveToElementEditablePosition:function(t,e){if(t.type==CKEDITOR.NODE_ELEMENT&&!t.isEditable(!1))return this.moveToPosition(t,e?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var i=0;t;){if(t.type==CKEDITOR.NODE_TEXT){e&&this.endContainer&&this.checkEndOfBlock()&&K.test(t.getText())?this.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(t,e?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),i=1;break}if(t.type==CKEDITOR.NODE_ELEMENT)if(t.isEditable())this.moveToPosition(t,e?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),i=1;else if(e&&t.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START);else if("false"==t.getAttribute("contenteditable")&&t.is(CKEDITOR.dtd.$block))return this.setStartBefore(t),this.setEndAfter(t),!0;var n=t,o=i,r=void 0;n.type==CKEDITOR.NODE_ELEMENT&&n.isEditable(!1)&&(r=n[e?"getLast":"getFirst"](P)),o||r||(r=n[e?"getPrevious":"getNext"](P)),t=r}return!!i},moveToClosestEditablePosition:function(t,e){var i,n,o,r=0,s=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return t?(i=new CKEDITOR.dom.range(this.root)).moveToPosition(t,s[e?0:1]):i=this.clone(),t&&!t.is(CKEDITOR.dtd.$block)?r=1:(n=i[e?"getNextEditableNode":"getPreviousEditableNode"]())&&(r=1,(o=n.type==CKEDITOR.NODE_ELEMENT)&&n.is(CKEDITOR.dtd.$block)&&"false"==n.getAttribute("contenteditable")?(i.setStartAt(n,CKEDITOR.POSITION_BEFORE_START),i.setEndAt(n,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&o&&n.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(i.setEnd(n,0),i.collapse()):i.moveToPosition(n,s[e?1:0])),r&&this.moveToRange(i),!!r},moveToElementEditStart:function(t){return this.moveToElementEditablePosition(t)},moveToElementEditEnd:function(t){return this.moveToElementEditablePosition(t,!0)},getEnclosedNode:function(){if((t=this.clone()).optimize(),t.startContainer.type!=CKEDITOR.NODE_ELEMENT||t.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var t=new CKEDITOR.dom.walker(t),e=CKEDITOR.dom.walker.bookmark(!1,!0),i=CKEDITOR.dom.walker.whitespaces(!0);t.evaluator=function(t){return i(t)&&e(t)};var n=t.next();return t.reset(),n&&n.equals(t.previous())?n:null},getTouchedStartNode:function(){var t=this.startContainer;return this.collapsed||t.type!=CKEDITOR.NODE_ELEMENT?t:t.getChild(this.startOffset)||t},getTouchedEndNode:function(){var t=this.endContainer;return this.collapsed||t.type!=CKEDITOR.NODE_ELEMENT?t:t.getChild(this.endOffset-1)||t},getNextEditableNode:Jt(),getPreviousEditableNode:Jt(1),_getTableElement:function(t){t=t||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var e=this.startContainer,i=this.endContainer,n=e.getAscendant("table",!0),o=i.getAscendant("table",!0);return CKEDITOR.env.safari&&n&&i.equals(this.root)?e.getAscendant(t,!0):this.getEnclosedNode()?this.getEnclosedNode().getAscendant(t,!0):n&&o&&(n.equals(o)||n.contains(o)||o.contains(n))?e.getAscendant(t,!0):null},scrollIntoView:function(){var t,e,i,n=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),o=this.clone();o.optimize(),(i=o.startContainer.type==CKEDITOR.NODE_TEXT)?(e=o.startContainer.getText(),t=o.startContainer.split(o.startOffset),n.insertAfter(o.startContainer)):o.insertNode(n),n.scrollIntoView(),i&&(o.startContainer.setText(e),t.remove()),n.remove()},_setStartContainer:function(t){this.startContainer=t},_setEndContainer:function(t){this.endContainer=t},_find:function(t,e){var i,n,o,r,s=this.getCommonAncestor(),a=this.getBoundaryNodes(),l=[];if(s&&s.find)for(n=s.find(t),i=0;i<n.count();i++)s=n.getItem(i),!e&&s.isReadOnly()||(o=s.getPosition(a.startNode)&CKEDITOR.POSITION_FOLLOWING||a.startNode.equals(s),r=s.getPosition(a.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||a.endNode.equals(s),o&&r&&l.push(s));return l}},CKEDITOR.dom.range.mergeRanges=function(t){return CKEDITOR.tools.array.reduce(t,function(t,e){var i=t[t.length-1],n=!1;if((e=e.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),i){var o=new CKEDITOR.dom.range(e.root),r=(n=new CKEDITOR.dom.walker(o),CKEDITOR.dom.walker.whitespaces());for(o.setStart(i.endContainer,i.endOffset),o.setEnd(e.startContainer,e.startOffset),o=n.next();r(o)||e.endContainer.equals(o);)o=n.next();n=!o}return n?i.setEnd(e.endContainer,e.endOffset):t.push(e),t},[])},CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,F=/^[\r\n\t ]+$/,B=CKEDITOR.dom.walker.bookmark(!1,!0),H=CKEDITOR.dom.walker.whitespaces(!0),z={dd:1,dt:1,li:1},oe.prototype={getNextParagraph:function(t){var e,i,n,o,r;if(t=t||"p",this._.nestedEditable){if(e=this._.nestedEditable.iterator.getNextParagraph(t))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,e;if(this.activeFilter=this.filter,re(this,t,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(t);this._.nestedEditable=null}if(!this.range.root.getDtd()[t])return null;if(!this._.started){var s=this.range.clone();i=s.startPath();var a=s.endPath(),l=!s.collapsed&&se(s,i.block),c=!s.collapsed&&se(s,a.block,1);s.shrink(CKEDITOR.SHRINK_ELEMENT,!0),l&&s.setStartAt(i.block,CKEDITOR.POSITION_BEFORE_END),c&&s.setEndAt(a.block,CKEDITOR.POSITION_AFTER_START),i=s.endContainer.hasAscendant("pre",!0)||s.startContainer.hasAscendant("pre",!0),s.enlarge(this.forceBrBreak&&!i||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),s.collapsed||(i=new CKEDITOR.dom.walker(s.clone()),a=CKEDITOR.dom.walker.bookmark(!0,!0),i.evaluator=a,this._.nextNode=i.next(),(i=new CKEDITOR.dom.walker(s.clone())).evaluator=a,i=i.previous(),this._.lastNode=i.getNextSourceNode(!0,null,s.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&((a=this.range.clone()).moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),a.checkEndOfBlock()&&(a=new CKEDITOR.dom.elementPath(a.endContainer,a.root),this._.lastNode=(a.block||a.blockLimit).getNextSourceNode(!0))),this._.lastNode&&s.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=s.document.createText(""),this._.lastNode.insertAfter(i)),s=null),this._.started=1,i=s}for(a=this._.nextNode,s=this._.lastNode,this._.nextNode=null;a;){l=0,c=a.hasAscendant("pre");var u=a.type!=CKEDITOR.NODE_ELEMENT,d=0;if(u)a.type==CKEDITOR.NODE_TEXT&&F.test(a.getText())&&(u=0);else{var h=a.getName();if(CKEDITOR.dtd.$block[h]&&"false"==a.getAttribute("contenteditable")){re(this,t,e=a);break}if(a.isBlockBoundary(this.forceBrBreak&&!c&&{br:1})){if("br"==h)u=1;else if(!i&&!a.getChildCount()&&"hr"!=h){n=(e=a).equals(s);break}i&&(i.setEndAt(a,CKEDITOR.POSITION_BEFORE_START),"br"!=h&&(this._.nextNode=a)),l=1}else{if(a.getFirst()){i||(i=this.range.clone()).setStartAt(a,CKEDITOR.POSITION_BEFORE_START),a=a.getFirst();continue}u=1}}if(u&&!i&&(i=this.range.clone()).setStartAt(a,CKEDITOR.POSITION_BEFORE_START),n=(!l||u)&&a.equals(s),i&&!l)for(;!a.getNext(ae)&&!n;){if((h=a.getParent()).isBlockBoundary(this.forceBrBreak&&!c&&{br:1})){l=1,u=0,n||h.equals(s),i.setEndAt(h,CKEDITOR.POSITION_BEFORE_END);break}u=1,n=(a=h).equals(s),d=1}if(u&&i.setEndAt(a,CKEDITOR.POSITION_AFTER_END),(n=!(a=this._getNextSourceNode(a,d,s)))||l&&i)break}if(!e){if(!i)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;a=(e=new CKEDITOR.dom.elementPath(i.startContainer,i.root)).blockLimit,l={div:1,th:1,td:1},!(e=e.block)&&a&&!this.enforceRealBlocks&&l[a.getName()]&&i.checkStartOfBlock()&&i.checkEndOfBlock()&&!a.equals(i.root)?e=a:!e||this.enforceRealBlocks&&e.is(z)?(e=this.range.document.createElement(t),i.extractContents().appendTo(e),e.trim(),i.insertNode(e),o=r=!0):"li"!=e.getName()?i.checkStartOfBlock()&&i.checkEndOfBlock()||(e=e.clone(!1),i.extractContents().appendTo(e),e.trim(),o=!(r=i.splitBlock()).wasStartOfBlock,r=!r.wasEndOfBlock,i.insertNode(e)):n||(this._.nextNode=e.equals(s)?null:this._getNextSourceNode(i.getBoundaryNodes().endNode,1,s))}return(o=o&&e.getPrevious())&&o.type==CKEDITOR.NODE_ELEMENT&&("br"==o.getName()?o.remove():o.getLast()&&"br"==o.getLast().$.nodeName.toLowerCase()&&o.getLast().remove()),r&&(o=e.getLast())&&o.type==CKEDITOR.NODE_ELEMENT&&"br"==o.getName()&&(!CKEDITOR.env.needsBrFiller||o.getPrevious(B)||o.getNext(B))&&o.remove(),this._.nextNode||(this._.nextNode=n||e.equals(s)||!s?null:this._getNextSourceNode(e,1,s)),e},_getNextSourceNode:function(t,e,i){function n(t){return!(t.equals(i)||t.equals(o))}var o=this.range.root;for(t=t.getNextSourceNode(e,null,n);!B(t);)t=t.getNextSourceNode(e,null,n);return t}},CKEDITOR.dom.range.prototype.createIterator=function(){return new oe(this)},CKEDITOR.command=function(e,i){var n;this.uiItems=[],this.exec=function(t){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&e.focus(),!1===this.fire("exec")||!1!==i.exec.call(this,e,t))},this.refresh=function(t,e){return!(this.readOnly||!t.readOnly)||(this.context&&!e.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[t.mode]&&this.disable(),!1===this.fire("refresh",{editor:t,path:e})||i.refresh&&!1!==i.refresh.apply(this,arguments)))},this.checkAllowed=function(t){return t||"boolean"!=typeof n?n=e.activeFilter.checkFeature(this):n},CKEDITOR.tools.extend(this,i,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!i.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&void 0!==this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(t){return!(this.state==t||t!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())&&(this.previousState=this.state,this.state=t,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function r(t,e,i,n,o){var r,s,a;for(r in t=[],e){s="boolean"==typeof(s=e[r])?{}:"function"==typeof s?{match:s}:k(s),"$"!=r.charAt(0)&&(s.elements=r),i&&(s.featureName=i.toLowerCase());var l=s;l.elements=y(l.elements,/\s+/)||null,l.propertiesOnly=l.propertiesOnly||!0===l.elements;var c=/\s*,\s*/,u=void 0;for(u in N){l[u]=y(l[u],c)||null;var d=l,h=K[u],p=y(l[K[u]],c),f=l[u],g=[],m=!0,v=void 0;for(v in p?m=!1:p={},f)"!"==v.charAt(0)&&(v=v.slice(1),g.push(v),m=!(p[v]=!0));for(;v=g.pop();)f[v]=f["!"+v],delete f["!"+v];d[h]=!m&&p||null}l.match=l.match||null,n.push(s),t.push(s)}for(e=o.elements,o=o.generic,i=0,n=t.length;i<n;++i){for(c in s=!0===(r=k(t[i])).classes||!0===r.styles||!0===r.attributes,l=r,u=h=c=void 0,N)l[c]=T(l[c]);for(u in d=!0,K){for(f in p=[],f=void 0,h=l[c=K[u]])-1<f.indexOf("*")?p.push(new RegExp("^"+f.replace(/\*/g,".*")+"$")):p.push(f);(h=p).length&&(l[c]=h,d=!1)}if(l.nothingRequired=d,l.noProperties=!(l.attributes||l.classes||l.styles),!0===r.elements||null===r.elements)o[s?"unshift":"push"](r);else for(a in l=r.elements,delete r.elements,l)e[a]?e[a][s?"unshift":"push"](r):e[a]=[r]}}function b(t,e,i,n){if((!t.match||t.match(e))&&(n||function(t,e){if(t.nothingRequired)return!0;var i,n,o,r;if(o=t.requiredClasses)for(r=e.classes,i=0;i<o.length;++i)if("string"==typeof(n=o[i])){if(-1==CKEDITOR.tools.indexOf(r,n))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(r,n))return!1;return c(e.styles,t.requiredStyles)&&c(e.attributes,t.requiredAttributes)}(t,e))&&(t.propertiesOnly||(i.valid=!0),i.allAttributes||(i.allAttributes=a(t.attributes,e.attributes,i.validAttributes)),i.allStyles||(i.allStyles=a(t.styles,e.styles,i.validStyles)),!i.allClasses)){if(t=t.classes,e=e.classes,n=i.validClasses,t)if(!0===t)t=!0;else{for(var o,r=0,s=e.length;r<s;++r)n[o=e[r]]||(n[o]=t(o));t=!1}else t=!1;i.allClasses=t}}function a(t,e,i){if(!t)return!1;if(!0===t)return!0;for(var n in e)i[n]||(i[n]=t(n));return!1}function _(t,e,i){if(!t.match||t.match(e)){if(t.noProperties)return!1;if(i.hadInvalidAttribute=s(t.attributes,e.attributes)||i.hadInvalidAttribute,i.hadInvalidStyle=s(t.styles,e.styles)||i.hadInvalidStyle,t=t.classes,e=e.classes,t){for(var n=!1,o=!0===t,r=e.length;r--;)(o||t(e[r]))&&(e.splice(r,1),n=!0);t=n}else t=!1;i.hadInvalidClass=t||i.hadInvalidClass}}function s(t,e){if(!t)return!1;var i,n=!1,o=!0===t;for(i in e)(o||t(i))&&(delete e[i],n=!0);return n}function l(t,e,i){return!(t.disabled||t.customConfig&&!i||!e)&&(t._.cachedChecks={},!0)}function y(t,e){if(!t)return!1;if(!0===t)return t;if("string"==typeof t)return"*"==(t=S(t))||CKEDITOR.tools.convertArrayToObject(t.split(e));if(CKEDITOR.tools.isArray(t))return!!t.length&&CKEDITOR.tools.convertArrayToObject(t);var i,n={},o=0;for(i in t)n[i]=t[i],o++;return!!o&&n}function c(t,e){if(!e)return!0;for(var i,n=0;n<e.length;++n)if("string"==typeof(i=e[n])){if(!(i in t))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(t,i))return!1;return!0}function u(t){if(!t)return{};t=t.split(/\s*,\s*/).sort();for(var e={};t.length;)e[t.shift()]="cke-test";return e}function d(t){var e,i,n,o,r={},s=1;for(t=S(t);e=t.match(L);)(i=e[2])?(n=h(i,"styles"),o=h(i,"attrs"),i=h(i,"classes")):n=o=i=null,r["$"+s++]={elements:e[1],classes:i,styles:n,attributes:o},t=t.slice(e[0].length);return r}function h(t,e){var i=t.match(n[e]);return i?S(i[1]):null}function E(t){var e=t.styleBackup=t.attributes.style,i=t.classBackup=t.attributes.class;t.styles||(t.styles=CKEDITOR.tools.parseCssText(e||"",1)),t.classes||(t.classes=i?i.split(/\s+/):[])}function p(t,e,i,n){var o,r=0;if(n.toHtml&&(e.name=e.name.replace(P,"$1")),n.doCallbacks&&t.elementCallbacks){t:{for(var s,a=0,l=(o=t.elementCallbacks).length;a<l;++a)if(s=o[a](e)){o=s;break t}o=void 0}if(o)return o}if(n.doTransform&&(o=t._.transformations[e.name])){for(E(e),a=0;a<o.length;++a)x(t,e,o[a]);w(e)}if(n.doFilter){t:{a=e.name,t=(l=t._).allowedRules.elements[a],o=l.allowedRules.generic,a=l.disallowedRules.elements[a],l=l.disallowedRules.generic,s=n.skipRequired;var c,u,d={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(t||o){if(E(e),a)for(c=0,u=a.length;c<u;++c)if(!1===_(a[c],e,d)){t=null;break t}if(l)for(c=0,u=l.length;c<u;++c)_(l[c],e,d);if(t)for(c=0,u=t.length;c<u;++c)b(t[c],e,d,s);if(o)for(c=0,u=o.length;c<u;++c)b(o[c],e,d,s);t=d}else t=null}if(!t||!t.valid)return i.push(e),1;u=t.validAttributes;var h=t.validStyles;o=t.validClasses;a=e.attributes;var p=e.styles;l=e.classes;s=e.classBackup;var f,g,m=e.styleBackup,v=[],y=(d=[],/^data-cke-/);if(c=!1,delete a.style,delete a.class,delete e.classBackup,delete e.styleBackup,!t.allAttributes)for(f in a)u[f]||y.test(f)&&(f==(g=f.replace(/^data-cke-saved-/,""))||u[g])||(delete a[f],c=!0);if(!t.allStyles||t.hadInvalidStyle){for(f in p)t.allStyles||h[f]?v.push(f+":"+p[f]):c=!0;v.length&&(a.style=v.sort().join("; "))}else m&&(a.style=m);if(!t.allClasses||t.hadInvalidClass){for(f=0;f<l.length;++f)(t.allClasses||o[l[f]])&&d.push(l[f]);d.length&&(a.class=d.sort().join(" ")),s&&d.length<s.split(/\s+/).length&&(c=!0)}else s&&(a.class=s);if(c&&(r=1),!n.skipFinalValidation&&!C(e))return i.push(e),1}return n.toHtml&&(e.name=e.name.replace(F,"cke:$1")),r}function w(t){var e,i=t.attributes;delete i.style,delete i.class,(e=CKEDITOR.tools.writeCssText(t.styles,!0))&&(i.style=e),t.classes.length&&(i.class=t.classes.sort().join(" "))}function C(t){switch(t.name){case"a":if(!(t.children.length||t.attributes.name||t.attributes.id))return!1;break;case"img":if(!t.attributes.src)return!1}return!0}function T(e){if(!e)return!1;if(!0===e)return!0;var i=function(t){var e,i=[];for(e in t)-1<e.indexOf("*")&&i.push(e.replace(/\*/g,".*"));return i.length?new RegExp("^(?:"+i.join("|")+")$"):null}(e);return function(t){return t in e||i&&t.match(i)}}function f(){return new CKEDITOR.htmlParser.element("br")}function g(t){return t.type==CKEDITOR.NODE_ELEMENT&&("br"==t.name||R.$block[t.name])}function m(t,e,i){var n=t.name;if(R.$empty[n]||!t.children.length)"hr"==n&&"br"==e?t.replaceWith(f()):(t.parent&&i.push({check:"it",el:t.parent}),t.remove());else if(R.$block[n]||"tr"==n)if("br"==e)t.previous&&!g(t.previous)&&(e=f()).insertBefore(t),t.next&&!g(t.next)&&(e=f()).insertAfter(t),t.replaceWithChildren();else{var o;n=t.children;t:{o=R[e];for(var r,s=0,a=n.length;s<a;++s)if((r=n[s]).type==CKEDITOR.NODE_ELEMENT&&!o[r.name]){o=!1;break t}o=!0}if(o)t.name=e,t.attributes={},i.push({check:"parent-down",el:t});else{var l,c;for(s=(o=t.parent).type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==o.name,a=n.length;0<a;)r=n[--a],s&&(r.type==CKEDITOR.NODE_TEXT||r.type==CKEDITOR.NODE_ELEMENT&&R.$inline[r.name])?(l||((l=new CKEDITOR.htmlParser.element(e)).insertAfter(t),i.push({check:"parent-down",el:l})),l.add(r,0)):(l=null,c=R[o.name]||R.span,r.insertAfter(t),o.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||r.type!=CKEDITOR.NODE_ELEMENT||c[r.name]||i.push({check:"el-up",el:r}));t.remove()}}else n in{style:1,script:1}?t.remove():(t.parent&&i.push({check:"it",el:t.parent}),t.replaceWithChildren())}function x(t,e,i){var n,o;for(n=0;n<i.length;++n)if(!((o=i[n]).check&&!t.check(o.check,!1)||o.left&&!o.left(e))){o.right(e,M);break}}function i(t,e){var i,n,o,r,s=e.getDefinition(),a=s.attributes,l=s.styles;if(t.name!=s.element)return!1;for(i in a)if("class"==i){for(s=a[i].split(/\s+/),o=t.classes.join("|");r=s.pop();)if(-1==o.indexOf(r))return!1}else if(t.attributes[i]!=a[i])return!1;for(n in l)if(t.styles[n]!=l[n])return!1;return!0}function v(t,i){var e,n;return"string"==typeof t?e=t:n=t instanceof CKEDITOR.style?t:(e=t[0],t[1]),[{element:e,left:n,right:function(t,e){e.transform(t,i)}}]}function D(e){return function(t){return i(t,e)}}function I(i){return function(t,e){e[i](t)}}var o,O,R=CKEDITOR.dtd,k=CKEDITOR.tools.copy,S=CKEDITOR.tools.trim,A=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(t){if(this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}},CKEDITOR.filter.instances[this.id]=this,t instanceof CKEDITOR.editor){t=this.editor=t,this.customConfig=!0;var e=t.config.allowedContent;!0===e?this.disabled=!0:(e||(this.customConfig=!1),this.allow(e,"config",1),this.allow(t.config.extraAllowedContent,"extra",1),this.allow(A[t.enterMode]+" "+A[t.shiftEnterMode],"default",1),this.disallow(t.config.disallowedContent))}else this.customConfig=!1,this.allow(t,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(t,e,i){if(!l(this,t,i))return!1;var n,o;if("string"==typeof t)t=d(t);else if(t instanceof CKEDITOR.style){if(t.toAllowedContentRules)return this.allow(t.toAllowedContentRules(this.editor),e,i);n=t.getDefinition(),t={},i=n.attributes,t[n.element]=n={styles:n.styles,requiredStyles:n.styles&&CKEDITOR.tools.objectKeys(n.styles)},i&&(i=k(i),n.classes=i.class?i.class.split(/\s+/):null,n.requiredClasses=n.classes,delete i.class,n.attributes=i,n.requiredAttributes=i&&CKEDITOR.tools.objectKeys(i))}else if(CKEDITOR.tools.isArray(t)){for(n=0;n<t.length;++n)o=this.allow(t[n],e,i);return o}return r(this,t,e,this.allowedContent,this._.allowedRules),!0},applyTo:function(t,s,e,i){if(this.disabled)return!1;var a,n,o,l=this,c=[],u=this.editor&&this.editor.config.protectedSource,d=!1,h={doFilter:!e,doTransform:!0,doCallbacks:!0,toHtml:s};for(t.forEach(function(t){if(t.type==CKEDITOR.NODE_ELEMENT){if("off"==t.attributes["data-cke-filter"])return!1;if(!s||"span"!=t.name||!~CKEDITOR.tools.objectKeys(t.attributes).join("|").indexOf("data-cke-"))if(1&(a=p(l,t,c,h)))d=!0;else if(2&a)return!1}else if(t.type==CKEDITOR.NODE_COMMENT&&t.value.match(/^\{cke_protected\}(?!\{C\})/)){var e;t:{var i,n,o,r=decodeURIComponent(t.value.replace(/^\{cke_protected\}/,""));if(e=[],u)for(n=0;n<u.length;++n)if((o=r.match(u[n]))&&o[0].length==r.length){e=!0;break t}1==(r=CKEDITOR.htmlParser.fragment.fromHtml(r)).children.length&&(i=r.children[0]).type==CKEDITOR.NODE_ELEMENT&&p(l,i,e,h),e=!e.length}e||c.push(t)}},null,!0),c.length&&(d=!0),t=[],i=A[i||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];e=c.pop();)e.type==CKEDITOR.NODE_ELEMENT?m(e,i,t):e.remove();for(;n=t.pop();)if((e=n.el).parent)switch(o=R[e.parent.name]||R.span,n.check){case"it":R.$removeEmpty[e.name]&&!e.children.length?m(e,i,t):C(e)||m(e,i,t);break;case"el-up":e.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||o[e.name]||m(e,i,t);break;case"parent-down":e.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||o[e.name]||m(e.parent,i,t)}return d},checkFeature:function(t){return!(!this.disabled&&t)||(t.toFeature&&(t=t.toFeature(this.editor)),!t.requiredContent||this.check(t.requiredContent))},disable:function(){this.disabled=!0},disallow:function(t){return!!l(this,t,!0)&&("string"==typeof t&&(t=d(t)),r(this,t,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(t){if(!this.disabled&&t){var e,i,n,o=[];for(e=0;e<t.length&&!n;++e)("string"==typeof(i=t[e])||i instanceof CKEDITOR.style)&&this.check(i)&&(n=i);if(n){for(e=0;e<t.length;++e)o.push(v(t[e],n));this.addTransformations(o)}}},addElementCallback:function(t){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(t)},addFeature:function(t){return!(!this.disabled&&t)||(t.toFeature&&(t=t.toFeature(this.editor)),this.allow(t.allowedContent,t.name),this.addTransformations(t.contentTransformations),this.addContentForms(t.contentForms),!t.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(t.requiredContent))},addTransformations:function(t){var e,i;if(!this.disabled&&t){var n,o=this._.transformations;for(n=0;n<t.length;++n){e=t[n];var r=void 0,s=void 0,a=void 0,l=void 0,c=void 0,u=void 0;for(i=[],s=0;s<e.length;++s)u="string"==typeof(a=e[s])?(l=(a=a.split(/\s*:\s*/))[0],c=null,a[1]):(l=a.check,c=a.left,a.right),r||(r=(r=a).element?r.element:l?l.match(/^([a-z0-9]+)/i)[0]:r.left.getDefinition().element),c instanceof CKEDITOR.style&&(c=D(c)),i.push({check:l==r?null:l,left:c,right:"string"==typeof u?I(u):u});o[e=r]||(o[e]=[]),o[e].push(i)}}},check:function(t,e,i){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(t)){for(var n=t.length;n--;)if(this.check(t[n],e,i))return!0;return!1}var o,r;if("string"==typeof t){if((r=t+"<"+(!1===e?"0":"1")+(i?"1":"0")+">")in this._.cachedChecks)return this._.cachedChecks[r];o=(n=d(t).$1).styles;var s=n.classes;n.name=n.elements,n.classes=s=s?s.split(/\s*,\s*/):[],n.styles=u(o),n.attributes=u(n.attributes),n.children=[],s.length&&(n.attributes.class=s.join(" ")),o&&(n.attributes.style=CKEDITOR.tools.writeCssText(n.styles)),o=n}else o=(n=t.getDefinition()).styles,s=n.attributes||{},o&&!CKEDITOR.tools.isEmpty(o)?(o=k(o),s.style=CKEDITOR.tools.writeCssText(o,!0)):o={},o={name:n.element,attributes:s,classes:s.class?s.class.split(/\s+/):[],styles:o,children:[]};s=CKEDITOR.tools.clone(o);var a,l=[];if(!1!==e&&(a=this._.transformations[o.name])){for(n=0;n<a.length;++n)x(this,o,a[n]);w(o)}return p(this,s,l,{doFilter:!0,doTransform:!1!==e,skipRequired:!i,skipFinalValidation:!i}),e=!(0<l.length)&&!!CKEDITOR.tools.objectCompare(o.attributes,s.attributes,!0),"string"==typeof t&&(this._.cachedChecks[r]=e),e},getAllowedEnterMode:(o=["p","div","br"],O={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR},function(t,e){var i,n=o.slice();if(this.check(A[t]))return t;for(e||(n=n.reverse());i=n.pop();)if(this.check(i))return O[i];return CKEDITOR.ENTER_BR}),clone:function(){var t=new CKEDITOR.filter,e=CKEDITOR.tools.clone;return t.allowedContent=e(this.allowedContent),t._.allowedRules=e(this._.allowedRules),t.disallowedContent=e(this.disallowedContent),t._.disallowedRules=e(this._.disallowedRules),t._.transformations=e(this._.transformations),t.disabled=this.disabled,t.editor=this.editor,t},destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var M,N={styles:1,attributes:1,classes:1},K={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},L=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,n={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},P=/^cke:(object|embed|param)$/,F=/^(object|embed|param)$/;M=CKEDITOR.filter.transformationsTools={sizeToStyle:function(t){this.lengthToStyle(t,"width"),this.lengthToStyle(t,"height")},sizeToAttribute:function(t){this.lengthToAttribute(t,"width"),this.lengthToAttribute(t,"height")},lengthToStyle:function(t,e,i){if(!((i=i||e)in t.styles)){var n=t.attributes[e];n&&(/^\d+$/.test(n)&&(n+="px"),t.styles[i]=n)}delete t.attributes[e]},lengthToAttribute:function(t,e,i){if(!((i=i||e)in t.attributes)){var n=t.styles[e],o=n&&n.match(/^(\d+)(?:\.\d*)?px$/);o?t.attributes[i]=o[1]:"cke-test"==n&&(t.attributes[i]="cke-test")}delete t.styles[e]},alignmentToStyle:function(t){if(!("float"in t.styles)){var e=t.attributes.align;"left"!=e&&"right"!=e||(t.styles.float=e)}delete t.attributes.align},alignmentToAttribute:function(t){if(!("align"in t.attributes)){var e=t.styles.float;"left"!=e&&"right"!=e||(t.attributes.align=e)}delete t.styles.float},splitBorderShorthand:function(e){function t(t){e.styles["border-top-width"]=i[t[0]],e.styles["border-right-width"]=i[t[1]],e.styles["border-bottom-width"]=i[t[2]],e.styles["border-left-width"]=i[t[3]]}if(e.styles.border){var i=e.styles.border.match(/([\.\d]+\w+)/g)||["0px"];switch(i.length){case 1:e.styles["border-width"]=i[0];break;case 2:t([0,1,0,1]);break;case 3:t([0,1,2,1]);break;case 4:t([0,1,2,3])}e.styles["border-style"]=e.styles["border-style"]||(e.styles.border.match(/(none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|initial|inherit)/)||[])[0],e.styles["border-style"]||delete e.styles["border-style"],delete e.styles.border}},listTypeToStyle:function(t){if(t.attributes.type)switch(t.attributes.type){case"a":t.styles["list-style-type"]="lower-alpha";break;case"A":t.styles["list-style-type"]="upper-alpha";break;case"i":t.styles["list-style-type"]="lower-roman";break;case"I":t.styles["list-style-type"]="upper-roman";break;case"1":t.styles["list-style-type"]="decimal";break;default:t.styles["list-style-type"]=t.attributes.type}},splitMarginShorthand:function(e){function t(t){e.styles["margin-top"]=i[t[0]],e.styles["margin-right"]=i[t[1]],e.styles["margin-bottom"]=i[t[2]],e.styles["margin-left"]=i[t[3]]}if(e.styles.margin){var i=e.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(i.length){case 1:t([0,0,0,0]);break;case 2:t([0,1,0,1]);break;case 3:t([0,1,2,1]);break;case 4:t([0,1,2,3])}delete e.styles.margin}},matchesStyle:i,transform:function(t,e){if("string"==typeof e)t.name=e;else{var i,n,o,r,s=e.getDefinition(),a=s.styles,l=s.attributes;for(i in t.name=s.element,l)if("class"==i)for(s=t.classes.join("|"),o=l[i].split(/\s+/);r=o.pop();)-1==s.indexOf(r)&&t.classes.push(r);else t.attributes[i]=l[i];for(n in a)t.styles[n]=a[n]}}}}(),CKEDITOR.focusManager=function(t){return t.focusManager?t.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:t},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(t){this._.timer&&clearTimeout(this._.timer),t&&(this.currentActive=t),this.hasFocus||this._.locked||((t=CKEDITOR.currentInstance)&&t.focusManager.blur(1),this.hasFocus=!0,(t=this._.editor.container)&&t.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(t){function e(){if(this.hasFocus){this.hasFocus=!1;var t=this._.editor.container;t&&t.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var i=CKEDITOR.focusManager._.blurDelay;t||!i?e.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,e.call(this)},i,this)}},add:function(t,e){if(!(i=t.getCustomData("focusmanager"))||i!=this){i&&i.remove(t);var i="focus",n="blur";e&&(CKEDITOR.env.ie?(i="focusin",n="focusout"):CKEDITOR.event.useCapture=1);var o={blur:function(){t.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(t)}};t.on(i,o.focus,this),t.on(n,o.blur,this),e&&(CKEDITOR.event.useCapture=0),t.setCustomData("focusmanager",this),t.setCustomData("focusmanager_handlers",o)}},remove:function(t){t.removeCustomData("focusmanager");var e=t.removeCustomData("focusmanager_handlers");t.removeListener("blur",e.blur),t.removeListener("focus",e.focus)}},CKEDITOR.keystrokeHandler=function(t){return t.keystrokeHandler?t.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:t},this)},CKEDITOR.keystrokeHandler.prototype={attach:function(t){t.on("keydown",le,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&t.on("keypress",ce,this)}},CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(t,e,i){t&&CKEDITOR.lang.languages[t]||(t=this.detect(e,t));var n=this;e=function(){n[t].dir=n.rtl[t]?"rtl":"ltr",i(t,n[t])},this[t]?e():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+t+".js"),e,this)},detect:function(t,e){var i=this.languages,n=(o=(e=e||navigator.userLanguage||navigator.language||t).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/))[1],o=o[2];return i[n+"-"+o]?n=n+"-"+o:i[n]||(n=null),CKEDITOR.lang.detect=n?function(){return n}:function(t){return t},n||t}},CKEDITOR.scriptLoader=(j={},W={},{load:function(t,n,e,i){var o="string"==typeof t;function r(t){n&&(o?n.call(e,t):n.call(e,a,l))}o&&(t=[t]),e=e||CKEDITOR;var s=t.length,a=[],l=[];if(0===s)r(!0);else{function c(t,e){(e?a:l).push(t),--s<=0&&(i&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),r(e))}function u(t,e){j[t]=1;var i=W[t];delete W[t];for(var n=0;n<i.length;n++)i[n](t,e)}function d(t){if(j[t])c(t,!0);else{var e=W[t]||(W[t]=[]);if(e.push(c),!(1<e.length)){var i=new CKEDITOR.dom.element("script");i.setAttributes({type:"text/javascript",src:t}),n&&(CKEDITOR.env.ie&&(CKEDITOR.env.version<=8||CKEDITOR.env.ie9Compat)?i.$.onreadystatechange=function(){"loaded"!=i.$.readyState&&"complete"!=i.$.readyState||(i.$.onreadystatechange=null,u(t,!0))}:(i.$.onload=function(){setTimeout(function(){u(t,!0)},0)},i.$.onerror=function(){u(t,!1)})),i.appendTo(CKEDITOR.document.getHead())}}}i&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var h=0;h<s;h++)d(t[h])}},queue:(V=[],function(t,e){var i=this;V.push({scriptUrl:t,callback:function(){e&&e.apply(this,arguments),V.shift(),ue.call(i)}}),1==V.length&&ue.call(this)})}),CKEDITOR.resourceManager=function(t,e){this.basePath=t,this.fileName=e,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(t,e){if(this.registered[t])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+t+'" is already registered.');var i=this.registered[t]=e||{};return i.name=t,i.path=this.getPath(t),CKEDITOR.fire(t+CKEDITOR.tools.capitalize(this.fileName)+"Ready",i),this.get(t)},get:function(t){return this.registered[t]||null},getPath:function(t){var e=this.externals[t];return CKEDITOR.getUrl(e&&e.dir||this.basePath+t+"/")},getFilePath:function(t){var e=this.externals[t];return CKEDITOR.getUrl(this.getPath(t)+(e?e.file:this.fileName+".js"))},addExternal:function(t,e,i){t=t.split(",");for(var n=0;n<t.length;n++){var o=t[n];i||(e=e.replace(/[^\/]+$/,function(t){return i=t,""})),this.externals[o]={dir:e,file:i||this.fileName+".js"}}},load:function(t,s,a){CKEDITOR.tools.isArray(t)||(t=t?[t]:[]);for(var l=this.loaded,e=this.registered,i=[],c={},u={},n=0;n<t.length;n++){var o=t[n];if(o)if(l[o]||e[o])u[o]=this.get(o);else{var r=this.getFilePath(o);i.push(r),r in c||(c[r]=[]),c[r].push(o)}}CKEDITOR.scriptLoader.load(i,function(t,e){if(e.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+c[e[0]].join(",")+'" was not found at "'+e[0]+'".');for(var i=0;i<t.length;i++)for(var n=c[t[i]],o=0;o<n.length;o++){var r=n[o];u[r]=this.get(r),l[r]=1}s.call(a,u)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(e){var d={};return function(t,a,l){var c={},u=function(t){e.call(this,t,function(t){CKEDITOR.tools.extend(c,t);var e,i=[];for(e in t){var n=t[e],o=n&&n.requires;if(!d[e]){if(n.icons)for(var r=n.icons.split(","),s=r.length;s--;)CKEDITOR.skin.addIcon(r[s],n.path+"icons/"+(CKEDITOR.env.hidpi&&n.hidpi?"hidpi/":"")+r[s]+".png");d[e]=1}if(o)for(o.split&&(o=o.split(",")),n=0;n<o.length;n++)c[o[n]]||i.push(o[n])}if(i.length)u.call(this,i);else{for(e in c)(n=c[e]).onLoad&&!n.onLoad._called&&(!1===n.onLoad()&&delete c[e],n.onLoad._called=1);a&&a.call(l||window,c)}},this)};u.call(this,t)}}),CKEDITOR.plugins.setLang=function(t,e,i){var n=this.get(t);t=n.langEntries||(n.langEntries={}),(n=n.lang||(n.lang=[])).split&&(n=n.split(",")),-1==CKEDITOR.tools.indexOf(n,e)&&n.push(e),t[e]=i},CKEDITOR.ui=function(t){return t.ui?t.ui:(this.items={},this.instances={},this.editor=t,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(t,e,i){i.name=t.toLowerCase();var n=this.items[t]={type:e,command:i.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(n,i)},get:function(t){return this.instances[t]},create:function(t){var e=this.items[t],i=e&&this._.handlers[e.type],n=e&&e.command&&this.editor.getCommand(e.command);i=i&&i.create.apply(this,e.args);return this.instances[t]=i,n&&n.uiItems.push(i),i&&!i.type&&(i.type=e.type),i},addHandler:function(t,e){this._.handlers[t]=e},space:function(t){return CKEDITOR.document.getById(this.spaceId(t))},spaceId:function(t){return this.editor.id+"_"+t}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function t(t,e,i){if(CKEDITOR.event.call(this),t=t&&CKEDITOR.tools.clone(t),void 0!==e){if(!(e instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!i)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&i==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!function(t,e){return e==CKEDITOR.ELEMENT_MODE_INLINE?t.is(CKEDITOR.dtd.$editable)||t.is("textarea"):e==CKEDITOR.ELEMENT_MODE_REPLACE?!t.is(CKEDITOR.dtd.$nonBodyContent):1}(e,i))throw Error('The specified element mode is not supported on element: "'+e.getName()+'".');this.element=e,this.elementMode=i,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(e.getId()||e.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||function(){do{var t="editor"+ ++s}while(CKEDITOR.instances[t]);return t}(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",n),this.on("selectionChange",function(t){r(this,t.data.path)}),this.on("activeFilterChange",function(){r(this,this.elementPath(),!0)}),this.on("mode",n),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?function(e,i){e.on("customConfigLoaded",function(){if(i){if(i.on)for(var t in i.on)e.on(t,i.on[t]);CKEDITOR.tools.extend(e.config,i,!0),delete e.config.on}t=e.config,e.readOnly=!!t.readOnly||(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.is("textarea")?e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"):e.element.isReadOnly():e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"))),e.blockless=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(e.element.is("textarea")||CKEDITOR.dtd[e.element.getName()].p),e.tabIndex=t.tabIndex||e.element&&e.element.getAttribute("tabindex")||0,e.activeEnterMode=e.enterMode=e.blockless?CKEDITOR.ENTER_BR:t.enterMode,e.activeShiftEnterMode=e.shiftEnterMode=e.blockless?CKEDITOR.ENTER_BR:t.shiftEnterMode,t.skin&&(CKEDITOR.skinName=t.skin),e.fireOnce("configLoaded"),e.dataProcessor=new CKEDITOR.htmlDataProcessor(e),e.filter=e.activeFilter=new CKEDITOR.filter(e),function(t){CKEDITOR.skin.loadPart("editor",function(){!function(n){CKEDITOR.lang.load(n.config.language,n.config.defaultLanguage,function(t,e){var i=n.config.title;n.langCode=t,n.lang=CKEDITOR.tools.prototypedCopy(e),n.title="string"==typeof i||!1===i?i:[n.lang.editor,n.name].join(", "),n.config.contentsLangDirection||(n.config.contentsLangDirection=n.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?n.element.getDirection(1):n.lang.dir),n.fire("langLoaded"),function(e){e.getStylesSet(function(t){e.once("loaded",function(){e.fire("stylesSet",{styles:t})},null,null,1),function(u){var d=u.config,t=d.plugins,e=d.extraPlugins,i=d.removePlugins;if(e){var n=new RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");t=(t=t.replace(n,""))+","+e}if(i){var h=new RegExp("(?:^|,)(?:"+i.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");t=t.replace(h,"")}CKEDITOR.env.air&&(t+=",adobeair"),CKEDITOR.plugins.load(t.split(","),function(t){var o=[],r=[],e=[];for(var i in u.plugins=t){var n,s=t[i],a=s.lang,l=null,c=s.requires;if(CKEDITOR.tools.isArray(c)&&(c=c.join(",")),c&&(n=c.match(h)))for(;c=n.pop();)CKEDITOR.error("editor-plugin-required",{plugin:c.replace(",",""),requiredBy:i});a&&!u.lang[i]&&(a.split&&(a=a.split(",")),l=0<=CKEDITOR.tools.indexOf(a,u.langCode)?u.langCode:(l=u.langCode.replace(/-.*/,""))!=u.langCode&&0<=CKEDITOR.tools.indexOf(a,l)?l:0<=CKEDITOR.tools.indexOf(a,"en")?"en":a[0],s.langEntries&&s.langEntries[l]?(u.lang[i]=s.langEntries[l],l=null):e.push(CKEDITOR.getUrl(s.path+"lang/"+l+".js"))),r.push(l),o.push(s)}CKEDITOR.scriptLoader.load(e,function(){for(var t=["beforeInit","init","afterInit"],e=0;e<t.length;e++)for(var i=0;i<o.length;i++){var n=o[i];0===e&&r[i]&&n.lang&&n.langEntries&&(u.lang[n.name]=n.langEntries[r[i]]),n[t[e]]&&n[t[e]](u)}for(u.fireOnce("pluginsLoaded"),d.keystrokes&&u.setKeystroke(u.config.keystrokes),i=0;i<u.config.blockedKeystrokes.length;i++)u.keystrokeHandler.blockedKeystrokes[u.config.blockedKeystrokes[i]]=1;u.status="loaded",u.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,u)})})}(e)})}(n)})}(t)})}(e)}),i&&null!=i.customConfig&&(e.config.customConfig=i.customConfig),function t(e){var i=e.config.customConfig;if(!i)return!1;var i=CKEDITOR.getUrl(i),n=a[i]||(a[i]={});n.fn?(n.fn.call(e,e.config),CKEDITOR.getUrl(e.config.customConfig)!=i&&t(e)||e.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(i,function(){n.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},t(e)});return!0}(e)||e.fireOnce("customConfigLoaded")}(this,t):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function n(){var t,e=this.commands;for(t in e)o(this,e[t])}function o(t,e){e[e.startDisabled?"disable":t.readOnly&&!e.readOnly?"disable":e.modes[t.mode]?"enable":"disable"]()}function r(t,e,i){if(e){var n,o,r=t.commands;for(o in r)n=r[o],(i||n.contextSensitive)&&n.refresh(t,e)}}function e(){var t=this.element;if(t&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var e=this.getData();return this.config.htmlEncodeOutput&&(e=CKEDITOR.tools.htmlEncode(e)),t.is("textarea")?t.setValue(e):t.setHtml(e),!0}return!1}t.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=t;var s=0,a={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(t,e){e.name=t.toLowerCase();var i=new CKEDITOR.command(this,e);return this.mode&&o(this,i),this.commands[t]=i},_attachToForm:function(){function e(t){i.updateElement(),i._.required&&!n.getValue()&&!1===i.fire("required")&&t.data.preventDefault()}var t,i=this,n=i.element,o=new CKEDITOR.dom.element(n.$.form);n.is("textarea")&&o&&(o.on("submit",e),(t=o.$.submit)&&t.call&&t.apply&&(o.$.submit=CKEDITOR.tools.override(o.$.submit,function(t){return function(){e(),t.apply?t.apply(this):t()}})),i.on("destroy",function(){o.removeListener("submit",e)}))},destroy:function(t){this.fire("beforeDestroy"),t||e.call(this),this.editable(null),this.filter&&(this.filter.destroy(),delete this.filter),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(t){if(!t){if(!(t=this.getSelection()))return null;t=t.getStartElement()}return t?new CKEDITOR.dom.elementPath(t,this.editable()):null},createRange:function(){var t=this.editable();return t?new CKEDITOR.dom.range(t):null},execCommand:function(t,e){var i=this.getCommand(t),n={name:t,commandData:e||{},command:i};return!(!i||i.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",n)||(n.returnValue=i.exec(n.commandData),i.async||!1===this.fire("afterCommandExec",n)))&&n.returnValue},getCommand:function(t){return this.commands[t]},getData:function(t){t||this.fire("beforeGetData");var e=this._.data;return"string"!=typeof e&&(e=(e=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?e.is("textarea")?e.getValue():e.getHtml():""),e={dataValue:e},t||this.fire("getData",e),e.dataValue},getSnapshot:function(){var t=this.fire("getSnapshot");return"string"!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),t},loadSnapshot:function(t){this.fire("loadSnapshot",t)},setData:function(t,e,i){var n=!0,o=e;e&&"object"==typeof e&&(i=e.internal,o=e.callback,n=!e.noSnapshot),!i&&n&&this.fire("saveSnapshot"),!o&&i||this.once("dataReady",function(t){!i&&n&&this.fire("saveSnapshot"),o&&o.call(t.editor)}),t={dataValue:t},i||this.fire("setData",t),this._.data=t.dataValue,i||this.fire("afterSetData",t)},setReadOnly:function(t){t=null==t||t,this.readOnly!=t&&(this.readOnly=t,this.keystrokeHandler.blockedKeystrokes[8]=+t,this.editable().setReadOnly(t),this.fire("readOnly"))},insertHtml:function(t,e,i){this.fire("insertHtml",{dataValue:t,mode:e,range:i})},insertText:function(t){this.fire("insertText",t)},insertElement:function(t){this.fire("insertElement",t)},getSelectedHtml:function(t){var e=this.editable(),i=(i=this.getSelection())&&i.getRanges();return e&&i&&0!==i.length?(e=function(t,e){for(var i,n,o,r=new CKEDITOR.dom.documentFragment,s=0;s<t.length;s++){var a=t[s],l=a.startContainer.getAscendant("tr",!0);h=void 0,h=(d=a).startContainer,p=d.endContainer,h.is&&(h.is("tr")||h.is("td")&&h.equals(p)&&d.endOffset===h.getChildCount())?(i||((i=l.getAscendant("table").clone()).append(l.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),r.append(i),i=i.findOne("thead, tbody, tfoot")),n&&n.equals(l)||(o=(n=l).clone(),i.append(o)),o.append((u=void 0,(u=(c=a).startContainer).is("tr")?c.cloneContents():u.clone(!0)))):r.append(a.cloneContents())}var c,u,d,h,p;return i?r:e.getHtmlFromRange(t[0])}(i,e),t?e.getHtml():e):null},extractSelectedHtml:function(t,e){var i,n=this.editable(),o=this.getSelection().getRanges(),r=new CKEDITOR.dom.documentFragment;if(!n||0===o.length)return null;for(i=0;i<o.length;i++)r.append(n.extractHtmlFromRange(o[i],e));return e||this.getSelection().selectRanges([o[0]]),t?r.getHtml():r},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return e.call(this)},setKeystroke:function(){for(var t,e,i=this.keystrokeHandler.keystrokes,n=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],o=n.length;o--;)t=n[o],e=0,CKEDITOR.tools.isArray(t)&&(e=t[1],t=t[0]),e?i[t]=e:delete i[t]},getCommandKeystroke:function(t){if(t="string"==typeof t?this.getCommand(t):t){var e,i=CKEDITOR.tools.object.findKey(this.commands,t),n=this.keystrokeHandler.keystrokes;if(t.fakeKeystroke)return t.fakeKeystroke;for(e in n)if(n.hasOwnProperty(e)&&n[e]==i)return e}return null},addFeature:function(t){return this.filter.addFeature(t)},setActiveFilter:function(t){t=t||this.filter,this.activeFilter!==t&&(this.activeFilter=t,this.fire("activeFilterChange"),t===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(t.getAllowedEnterMode(this.enterMode),t.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(t,e){t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.enterMode,e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.shiftEnterMode,this.activeEnterMode==t&&this.activeShiftEnterMode==e||(this.activeEnterMode=t,this.activeShiftEnterMode=e,this.fire("activeEnterModeChange"))},showNotification:function(t){alert(t)}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},G=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,q={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1},CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(t){for(var e,i,n,o=0;e=this._.htmlPartsRegex.exec(t);)if(o<(i=e.index)&&(o=t.substring(o,i),n?n.push(o):this.onText(o)),o=this._.htmlPartsRegex.lastIndex,!(i=e[1])||(i=i.toLowerCase(),n&&CKEDITOR.dtd.$cdata[i]&&(this.onCDATA(n.join("")),n=null),n))if(n)n.push(e[0]);else if(i=e[3]){if(i=i.toLowerCase(),!/="/.test(i)){var r,s={},a=e[4];if(e=!!e[5],a)for(;r=G.exec(a);){var l=r[1].toLowerCase();r=r[2]||r[3]||r[4]||"",s[l]=!r&&q[l]?l:CKEDITOR.tools.htmlDecodeAttr(r)}this.onTagOpen(i,s,e),!n&&CKEDITOR.dtd.$cdata[i]&&(n=[])}}else(i=e[2])&&this.onComment(i);else this.onTagClose(i);t.length>o&&this.onText(t.substring(o,t.length))}},CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(t){this._.output.push("<",t)},openTagClose:function(t,e){e?this._.output.push(" />"):this._.output.push(">")},attribute:function(t,e){"string"==typeof e&&(e=CKEDITOR.tools.htmlEncodeAttr(e)),this._.output.push(" ",t,'="',e,'"')},closeTag:function(t){this._.output.push("</",t,">")},text:function(t){this._.output.push(t)},comment:function(t){this._.output.push("\x3c!--",t,"--\x3e")},write:function(t){this._.output.push(t)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(t){var e=this._.output.join("");return t&&this.reset(),e}}}),CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var t=this.parent.children,e=CKEDITOR.tools.indexOf(t,this),i=this.previous,n=this.next;i&&(i.next=n),n&&(n.previous=i),t.splice(e,1),this.parent=null},replaceWith:function(t){var e=this.parent.children,i=CKEDITOR.tools.indexOf(e,this),n=t.previous=this.previous,o=t.next=this.next;n&&(n.next=t),o&&(o.previous=t),(e[i]=t).parent=this.parent,this.parent=null},insertAfter:function(t){var e=t.parent.children,i=CKEDITOR.tools.indexOf(e,t),n=t.next;e.splice(i+1,0,this),this.next=t.next,(this.previous=t).next=this,n&&(n.previous=this),this.parent=t.parent},insertBefore:function(t){var e=t.parent.children,i=CKEDITOR.tools.indexOf(e,t);e.splice(i,0,this),this.next=t,(this.previous=t.previous)&&(t.previous.next=this),(t.previous=this).parent=t.parent},getAscendant:function(e){for(var t="function"==typeof e?e:"string"==typeof e?function(t){return t.name==e}:function(t){return t.name in e},i=this.parent;i&&i.type==CKEDITOR.NODE_ELEMENT;){if(t(i))return i;i=i.parent}return null},wrapWith:function(t){return this.replaceWith(t),t.add(this),t},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(t){return t||{}}},CKEDITOR.htmlParser.comment=function(t){this.value=t,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(t,e){var i=this.value;return(i=t.onComment(e,i,this))?"string"!=typeof i?(this.replaceWith(i),!1):(this.value=i,!0):(this.remove(),!1)},writeHtml:function(t,e){e&&this.filter(e),t.comment(this.value)}}),CKEDITOR.htmlParser.text=function(t){this.value=t,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(t,e){if(!(this.value=t.onText(e,this.value,this)))return this.remove(),!1},writeHtml:function(t,e){e&&this.filter(e),t.text(this.value)}}),CKEDITOR.htmlParser.cdata=function(t){this.value=t},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(t){t.write(this.value)}}),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},U=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),Y={ol:1,ul:1},X=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),Z={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"},CKEDITOR.htmlParser.fragment.fromHtml=function(t,e,s){function o(t){var e;if(0<p.length)for(var i=0;i<p.length;i++){var n=p[i],o=n.name,r=CKEDITOR.dtd[o],s=g.name&&CKEDITOR.dtd[g.name];s&&!s[o]||t&&r&&!r[t]&&CKEDITOR.dtd[t]?o==g.name&&(l(g,g.parent,1),i--):(e||(a(),e=1),(n=n.clone()).parent=g,g=n,p.splice(i,1),i--)}}function a(){for(;f.length;)l(f.shift(),g)}function r(t){if(t._.isBlockLike&&"pre"!=t.name&&"textarea"!=t.name){var e,i=t.children.length,n=t.children[i-1];n&&n.type==CKEDITOR.NODE_TEXT&&((e=CKEDITOR.tools.rtrim(n.value))?n.value=e:t.children.length=i-1)}}function l(t,e,i){e=e||g||h;var n=g;void 0===t.previous&&(c(e,t)&&(g=e,d.onTagOpen(s,{}),t.returnPoint=e=g),r(t),de(t)&&!t.children.length||e.add(t),"pre"==t.name&&(v=!1),"textarea"==t.name&&(m=!1)),t.returnPoint?(g=t.returnPoint,delete t.returnPoint):g=i?e:n}function c(t,e){var i,n;if((t==h||"body"==t.name)&&s&&(!t.name||CKEDITOR.dtd[t.name][s]))return(i=e.attributes&&(n=e.attributes["data-cke-real-element-type"])?n:e.name)&&i in CKEDITOR.dtd.$inline&&!(i in CKEDITOR.dtd.head)&&!e.isOrphan||e.type==CKEDITOR.NODE_TEXT}function u(t,e){return(t in CKEDITOR.dtd.$listItem||t in CKEDITOR.dtd.$tableContent)&&(t==e||"dt"==t&&"dd"==e||"dd"==t&&"dt"==e)}var d=new CKEDITOR.htmlParser,h=e instanceof CKEDITOR.htmlParser.element?e:"string"==typeof e?new CKEDITOR.htmlParser.element(e):new CKEDITOR.htmlParser.fragment,p=[],f=[],g=h,m="textarea"==h.name,v="pre"==h.name;for(d.onTagOpen=function(t,e,i,n){if((e=new CKEDITOR.htmlParser.element(t,e)).isUnknown&&i&&(e.isEmpty=!0),e.isOptionalClose=n,de(e))p.push(e);else{if("pre"==t)v=!0;else{if("br"==t&&v)return void g.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==t&&(m=!0)}if("br"==t)f.push(e);else{for(;n=(i=g.name)?CKEDITOR.dtd[i]||(g._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):X,!(e.isUnknown||g.isUnknown||n[t]);)if(g.isOptionalClose)d.onTagClose(i);else if(t in Y&&i in Y)(i=(i=g.children)[i.length-1])&&"li"==i.name||l(i=new CKEDITOR.htmlParser.element("li"),g),e.returnPoint||(e.returnPoint=g),g=i;else if(t in CKEDITOR.dtd.$listItem&&!u(t,i))d.onTagOpen("li"==t?"ul":"dl",{},0,1);else if(i in U&&!u(t,i))e.returnPoint||(e.returnPoint=g),g=g.parent;else{if(i in CKEDITOR.dtd.$inline&&p.unshift(g),!g.parent){e.isOrphan=1;break}l(g,g.parent,1)}o(t),a(),e.parent=g,e.isEmpty?l(e):g=e}}},d.onTagClose=function(t){for(var e=p.length-1;0<=e;e--)if(t==p[e].name)return void p.splice(e,1);for(var i=[],n=[],o=g;o!=h&&o.name!=t;)o._.isBlockLike||n.unshift(o),i.push(o),o=o.returnPoint||o.parent;if(o!=h){for(e=0;e<i.length;e++){var r=i[e];l(r,r.parent)}(g=o)._.isBlockLike&&a(),l(o,o.parent),o==g&&(g=g.parent),p=p.concat(n)}"body"==t&&(s=!1)},d.onText=function(t){if(g._.hasInlineStarted&&!f.length||v||m||0!==(t=CKEDITOR.tools.ltrim(t)).length){var e=g.name,i=e?CKEDITOR.dtd[e]||(g._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):X;!m&&!i["#"]&&e in U?(d.onTagOpen(Z[e]||""),d.onText(t)):(a(),o(),v||m||(t=t.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),t=new CKEDITOR.htmlParser.text(t),c(g,t)&&this.onTagOpen(s,{},0,1),g.add(t))}},d.onCDATA=function(t){g.add(new CKEDITOR.htmlParser.cdata(t))},d.onComment=function(t){a(),o(),g.add(new CKEDITOR.htmlParser.comment(t))},d.parse(t),a();g!=h;)l(g,g.parent,1);return r(h),h},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(t,e){isNaN(e)&&(e=this.children.length);var i=0<e?this.children[e-1]:null;if(i){if(t._.isBlockLike&&i.type==CKEDITOR.NODE_TEXT&&(i.value=CKEDITOR.tools.rtrim(i.value),0===i.value.length))return this.children.pop(),void this.add(t);i.next=t}t.previous=i,(t.parent=this).children.splice(e,0,t),this._.hasInlineStarted||(this._.hasInlineStarted=t.type==CKEDITOR.NODE_TEXT||t.type==CKEDITOR.NODE_ELEMENT&&!t._.isBlockLike)},filter:function(t,e){e=this.getFilterContext(e),t.onRoot(e,this),this.filterChildren(t,!1,e)},filterChildren:function(t,e,i){if(this.childrenFilteredBy!=t.id)for(i=this.getFilterContext(i),e&&!this.parent&&t.onRoot(i,this),this.childrenFilteredBy=t.id,e=0;e<this.children.length;e++)!1===this.children[e].filter(t,i)&&e--},writeHtml:function(t,e){e&&this.filter(e),this.writeChildrenHtml(t)},writeChildrenHtml:function(t,e,i){var n=this.getFilterContext();for(i&&!this.parent&&e&&e.onRoot(n,this),e&&this.filterChildren(e,!1,n),e=0,n=(i=this.children).length;e<n;e++)i[e].writeHtml(t)},forEach:function(t,e,i){if(!(i||e&&this.type!=e))var n=t(this);if(!1!==n){i=this.children;for(var o=0;o<i.length;o++)(n=i[o]).type==CKEDITOR.NODE_ELEMENT?n.forEach(t,e):e&&n.type!=e||t(n)}},getFilterContext:function(t){return t||{}}},CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(t){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new he,this.attributeNameRules=new he,this.elementsRules={},this.attributesRules={},this.textRules=new he,this.commentRules=new he,this.rootRules=new he,t&&this.addRules(t,10)},proto:{addRules:function(t,e){var i;"number"==typeof e?i=e:e&&"priority"in e&&(i=e.priority),"number"!=typeof i&&(i=10),"object"!=typeof e&&(e={}),t.elementNames&&this.elementNameRules.addMany(t.elementNames,i,e),t.attributeNames&&this.attributeNameRules.addMany(t.attributeNames,i,e),t.elements&&pe(this.elementsRules,t.elements,i,e),t.attributes&&pe(this.attributesRules,t.attributes,i,e),t.text&&this.textRules.add(t.text,i,e),t.comment&&this.commentRules.add(t.comment,i,e),t.root&&this.rootRules.add(t.root,i,e)},applyTo:function(t){t.filter(this)},onElementName:function(t,e){return this.elementNameRules.execOnName(t,e)},onAttributeName:function(t,e){return this.attributeNameRules.execOnName(t,e)},onText:function(t,e,i){return this.textRules.exec(t,e,i)},onComment:function(t,e,i){return this.commentRules.exec(t,e,i)},onRoot:function(t,e){return this.rootRules.exec(t,e)},onElement:function(t,e){for(var i,n=[this.elementsRules["^"],this.elementsRules[e.name],this.elementsRules.$],o=0;o<3;o++)if(i=n[o]){if(!1===(i=i.exec(t,e,this)))return null;if(i&&i!=e)return this.onNode(t,i);if(e.parent&&!e.name)break}return e},onNode:function(t,e){var i=e.type;return i==CKEDITOR.NODE_ELEMENT?this.onElement(t,e):i==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(t,e.value)):i==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(t,e.value)):null},onAttribute:function(t,e,i,n){return(i=this.attributesRules[i])?i.exec(t,n,e,this):n}}}),(CKEDITOR.htmlParser.filterRulesGroup=he).prototype={add:function(t,e,i){this.rules.splice(this.findIndex(e),0,{value:t,priority:e,options:i})},addMany:function(t,e,i){for(var n=[this.findIndex(e),0],o=0,r=t.length;o<r;o++)n.push({value:t[o],priority:e,options:i});this.rules.splice.apply(this.rules,n)},findIndex:function(t){for(var e=this.rules,i=e.length-1;0<=i&&t<e[i].priority;)i--;return i+1},exec:function(t,e){var i,n,o,r,s=e instanceof CKEDITOR.htmlParser.node||e instanceof CKEDITOR.htmlParser.fragment,a=Array.prototype.slice.call(arguments,1),l=this.rules,c=l.length;for(r=0;r<c;r++)if(s&&(i=e.type,n=e.name),o=l[r],!(t.nonEditable&&!o.options.applyToAll||t.nestedEditable&&o.options.excludeNestedEditable)){if(!1===(o=o.value.apply(null,a))||s&&o&&(o.name!=n||o.type!=i))return o;null!=o&&(a[0]=e=o)}return e},execOnName:function(t,e){for(var i,n=0,o=this.rules,r=o.length;e&&n<r;n++)i=o[n],t.nonEditable&&!i.options.applyToAll||t.nestedEditable&&i.options.excludeNestedEditable||(e=e.replace(i.value[0],i.value[1]));return e}},function(){function i(t,e){function a(t){return t||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function i(r,s){return function(t){if(t.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var e,i,n=[],o=u(t);if(o)for(l(o,1)&&n.push(o);o;)p(o)&&(e=d(o))&&l(e)&&((i=d(e))&&!p(i)?n.push(e):(a(c).insertAfter(e),e.remove())),o=o.previous;for(o=0;o<n.length;o++)n[o].remove();(n=!r||!1!==("function"==typeof s?s(t):s))&&(n=!(!c&&!CKEDITOR.env.needsBrFiller&&t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(!(!c&&!CKEDITOR.env.needsBrFiller&&(7<document.documentMode||t.name in CKEDITOR.dtd.tr||t.name in CKEDITOR.dtd.$listItem))&&(!(n=u(t))||"form"==t.name&&"input"==n.name))),n&&t.add(a(r))}}}function l(t,e){return!(c&&!CKEDITOR.env.needsBrFiller||t.type!=CKEDITOR.NODE_ELEMENT||"br"!=t.name||t.attributes["data-cke-eol"])||!!(t.type==CKEDITOR.NODE_TEXT&&(i=t.value.match(g))&&(i.index&&(new CKEDITOR.htmlParser.text(t.value.substring(0,i.index)).insertBefore(t),t.value=i[0]),!CKEDITOR.env.needsBrFiller&&c&&(!e||t.parent.name in s)||!c&&((i=t.previous)&&"br"==i.name||!i||p(i))));var i}var n,o,r={elements:{}},c="html"==e,s=CKEDITOR.tools.extend({},v);for(n in s)"#"in m[n]||delete s[n];for(n in s)r.elements[n]=i(c,t.config.fillEmptyBlocks);return r.root=i(c,!1),r.elements.br=(o=c,function(t){if(t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var e=t.attributes;if("data-cke-bogus"in e||"data-cke-eol"in e)delete e["data-cke-bogus"];else{for(e=t.next;e&&h(e);)e=e.next;var i=d(t);!e&&p(t.parent)?f(t.parent,a(o)):p(e)&&i&&!p(i)&&a(o).insertBefore(e)}}}),r}function r(t,e){return t!=CKEDITOR.ENTER_BR&&!1!==e&&(t==CKEDITOR.ENTER_DIV?"div":"p")}function u(t){for(t=t.children[t.children.length-1];t&&h(t);)t=t.previous;return t}function d(t){for(t=t.previous;t&&h(t);)t=t.previous;return t}function h(t){return t.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(t.value)||t.type==CKEDITOR.NODE_ELEMENT&&t.attributes["data-cke-bookmark"]}function p(t){return t&&(t.type==CKEDITOR.NODE_ELEMENT&&t.name in v||t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function f(t,e){var i=t.children[t.children.length-1];t.children.push(e),e.parent=t,i&&((i.next=e).previous=i)}function t(t){"false"!=(t=t.attributes).contenteditable&&(t["data-cke-editable"]=t.contenteditable?"true":1),t.contenteditable="false"}function e(t){switch((t=t.attributes)["data-cke-editable"]){case"true":t.contenteditable="true";break;case"1":delete t.contenteditable}}function s(t,e){return t.replace(e,function(t,e,i){return 0===t.indexOf("<textarea")&&(t=e+a(i).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(t)+"</cke:encoded>"})}function a(t){return t.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(t,e){return decodeURIComponent(e)})}function l(t,e){var i=e._.dataStore;return t.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(t,e){return decodeURIComponent(e)}).replace(/\{cke_protected_(\d+)\}/g,function(t,e){return i&&i[e]||""})}CKEDITOR.htmlDataProcessor=function(o){var t,e,n=this;this.editor=o,this.dataFilter=t=new CKEDITOR.htmlParser.filter,this.htmlFilter=e=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,t.addRules(y),t.addRules(b,{applyToAll:!0}),t.addRules(i(o,"data"),{applyToAll:!0}),e.addRules(_),e.addRules(E,{applyToAll:!0}),e.addRules(i(o,"html"),{applyToAll:!0}),o.on("toHtml",function(t){var e,i,n=(n=(n=(n=(n=s(n=function(t){return t.replace(w,function(t,e,i){return"<"+e+i.replace(C,function(t,e){return T.test(e)&&-1==i.indexOf("data-cke-saved-"+e)?" data-cke-saved-"+t+" data-cke-"+CKEDITOR.rnd+"-"+t:t})+">"})}(n=s(n=function(t,o){var n=[],e=o.config.protectedSource,i=o._.dataStore||(o._.dataStore={id:1}),r=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g;e=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(e),t=t.replace(/\x3c!--[\s\S]*?--\x3e/g,function(t){return"\x3c!--{cke_tempcomment}"+(n.push(t)-1)+"--\x3e"});for(var s=0;s<e.length;s++)t=t.replace(e[s],function(t){return t=t.replace(r,function(t,e,i){return n[i]}),/cke_temp(comment)?/.test(t)?t:"\x3c!--{cke_temp}"+(n.push(t)-1)+"--\x3e"});return(t=(t=t.replace(r,function(t,e,i){return"\x3c!--"+c+(e?"{C}":"")+encodeURIComponent(n[i]).replace(/--/g,"%2D%2D")+"--\x3e"})).replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(t){return t.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(t,e){return i[i.id]=decodeURIComponent(e),"{cke_protected_"+i.id+++"}"})})).replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(t,e,i,n){return"<"+e+i+">"+l(a(n),o)+"</"+e+">"})}(n=(t=t.data).dataValue,o),D)),x)).replace(O,"$1cke:$2")).replace(k,"<cke:$1$2></cke:$1>")).replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")).replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");e=t.context||o.editable().getName(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&"pre"==e&&(e="div",n="<pre>"+n+"</pre>",i=1),(e=o.document.createElement(e)).setHtml("a"+n),n=(n=e.getHtml().substr(1)).replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),i&&(n=n.replace(/^<pre>|<\/pre>$/gi,"")),n=a(n=function(t){return t.replace(I,function(t,e){return decodeURIComponent(e)})}(n=n.replace(R,"$1$2"))),e=!1!==t.fixForBody&&r(t.enterMode,o.config.autoParagraph),n=CKEDITOR.htmlParser.fragment.fromHtml(n,t.context,e),!e||!(i=n).children.length&&CKEDITOR.dtd[i.name][e]&&(e=new CKEDITOR.htmlParser.element(e),i.add(e)),t.dataValue=n},null,null,5),o.on("toHtml",function(t){t.data.filter.applyTo(t.data.dataValue,!0,t.data.dontFilter,t.data.enterMode)&&o.fire("dataFiltered")},null,null,6),o.on("toHtml",function(t){t.data.dataValue.filterChildren(n.dataFilter,!0)},null,null,10),o.on("toHtml",function(t){var e=(t=t.data).dataValue,i=new CKEDITOR.htmlParser.basicWriter;e.writeChildrenHtml(i),e=i.getHtml(!0),t.dataValue=function(t){return t.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(t){return"\x3c!--"+c+"{C}"+encodeURIComponent(t).replace(/--/g,"%2D%2D")+"--\x3e"})}(e)},null,null,15),o.on("toDataFormat",function(t){var e=t.data.dataValue;t.data.enterMode!=CKEDITOR.ENTER_BR&&(e=e.replace(/^<br *\/?>/i,"")),t.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(e,t.data.context,r(t.data.enterMode,o.config.autoParagraph))},null,null,5),o.on("toDataFormat",function(t){t.data.dataValue.filterChildren(n.htmlFilter,!0)},null,null,10),o.on("toDataFormat",function(t){t.data.filter.applyTo(t.data.dataValue,!1,!0)},null,null,11),o.on("toDataFormat",function(t){var e=t.data.dataValue,i=n.writer;i.reset(),e.writeChildrenHtml(i),e=l(e=a(e=i.getHtml(!0)),o),t.data.dataValue=e},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(t,e,i,n){var o,r,s,a,l=this.editor;return e&&"object"==typeof e?(o=e.context,i=e.fixForBody,n=e.dontFilter,r=e.filter,s=e.enterMode,a=e.protectedWhitespaces):o=e,o||null===o||(o=l.editable().getName()),l.fire("toHtml",{dataValue:t,context:o,fixForBody:i,dontFilter:n,filter:r||l.filter,enterMode:s||l.enterMode,protectedWhitespaces:a}).dataValue},toDataFormat:function(t,e){var i,n,o;return e&&(i=e.context,n=e.filter,o=e.enterMode),i||null===i||(i=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:t,filter:n||this.editor.filter,context:i,enterMode:o||this.editor.enterMode}).dataValue}};var g=/(?:&nbsp;|\xa0)$/,c="{cke_protected}",m=CKEDITOR.dtd,o="caption colgroup col thead tfoot tbody".split(" "),v=CKEDITOR.tools.extend({},m.$blockLimit,m.$block),y={elements:{input:t,textarea:t}},b={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(t){if(t.attributes&&t.attributes.src){var e=t.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");0!==e.indexOf("javascript")&&0!==e.indexOf("data")||(t.attributes["data-cke-pa-src"]=t.attributes.src,delete t.attributes.src)}}}},_={elements:{embed:function(t){if((i=t.parent)&&"object"==i.name){var e=i.attributes.width,i=i.attributes.height;e&&(t.attributes.width=e),i&&(t.attributes.height=i)}},a:function(t){var e=t.attributes;if(!(t.children.length||e.name||e.id||t.attributes["data-cke-saved-name"]))return!1}}},E={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(t){var e=t.attributes;if(e){if(e["data-cke-temp"])return!1;for(var i=["name","href","src"],n=0;n<i.length;n++)"data-cke-saved-"+i[n]in e&&delete e[i[n]]}return t},table:function(t){t.children.slice(0).sort(function(t,e){var i,n;return t.type==CKEDITOR.NODE_ELEMENT&&e.type==t.type&&(i=CKEDITOR.tools.indexOf(o,t.name),n=CKEDITOR.tools.indexOf(o,e.name)),-1<i&&-1<n&&i!=n||(i=t.parent?t.getIndex():-1,n=e.parent?e.getIndex():-1),n<i?1:-1})},param:function(t){return t.children=[],t.isEmpty=!0,t},span:function(t){"Apple-style-span"==t.attributes.class&&delete t.name},html:function(t){delete t.attributes.contenteditable,delete t.attributes.class},body:function(t){delete t.attributes.spellcheck,delete t.attributes.contenteditable},style:function(t){var e=t.children[0];e&&e.value&&(e.value=CKEDITOR.tools.trim(e.value)),t.attributes.type||(t.attributes.type="text/css")},title:function(t){var e=t.children[0];e||f(t,e=new CKEDITOR.htmlParser.text),e.value=t.attributes["data-cke-title"]||""},input:e,textarea:e},attributes:{class:function(t){return CKEDITOR.tools.ltrim(t.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(E.attributes.style=function(t){return t.replace(/(^|;)([^\:]+)/g,function(t){return t.toLowerCase()})});var w=/<(a|area|img|input|source)\b([^>]*)>/gi,C=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,T=/^(href|src|name)$/i,x=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,D=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,I=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,O=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,R=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,k=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(t,e){this.name=t,this.attributes=e||{},this.children=[];var i=t||"",n=i.match(/^cke:(.*)/);n&&(i=n[1]),i=!!(CKEDITOR.dtd.$nonBodyContent[i]||CKEDITOR.dtd.$block[i]||CKEDITOR.dtd.$listItem[i]||CKEDITOR.dtd.$tableContent[i]||CKEDITOR.dtd.$nonEditable[i]||"br"==i),this.isEmpty=!!CKEDITOR.dtd.$empty[t],this.isUnknown=!CKEDITOR.dtd[t],this._={isBlockLike:i,hasInlineStarted:this.isEmpty||!i}},CKEDITOR.htmlParser.cssStyle=function(t){var n={};return((t instanceof CKEDITOR.htmlParser.element?t.attributes.style:t)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(t,e,i){"font-family"==e&&(i=i.replace(/["']/g,"")),n[e.toLowerCase()]=i}),{rules:n,populate:function(t){var e=this.toString();e&&(t instanceof CKEDITOR.dom.element?t.setAttribute("style",e):t instanceof CKEDITOR.htmlParser.element?t.attributes.style=e:t.style=e)},toString:function(){var t,e=[];for(t in n)n[t]&&e.push(t,":",n[t],";");return e.join("")}}},Q=CKEDITOR.htmlParser.fragment.prototype,CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:Q.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(t,e){var i,n,o,r,s=this;if((e=s.getFilterContext(e)).off)return!0;for(s.parent||t.onRoot(e,s);;){if(i=s.name,!(n=t.onElementName(e,i)))return this.remove(),!1;if(s.name=n,!(s=t.onElement(e,s)))return this.remove(),!1;if(s!==this)return this.replaceWith(s),!1;if(s.name==i)break;if(s.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(s),!1;if(!s.name)return this.replaceWithChildren(),!1}for(o in i=s.attributes){for(n=i[o];;){if(!(r=t.onAttributeName(e,o))){delete i[o];break}if(r==o)break;delete i[o],o=r}r&&(!1===(n=t.onAttribute(e,s,r,n))?delete i[r]:i[r]=n)}return s.isEmpty||this.filterChildren(t,!1,e),!0},filterChildren:Q.filterChildren,writeHtml:function(t,e){e&&this.filter(e);var i,n,o=this.name,r=[],s=this.attributes;for(i in t.openTag(o,s),s)r.push([i,s[i]]);for(t.sortAttributes&&r.sort(fe),i=0,n=r.length;i<n;i++)s=r[i],t.attribute(s[0],s[1]);t.openTagClose(o,this.isEmpty),this.writeChildrenHtml(t),this.isEmpty||t.closeTag(o)},writeChildrenHtml:Q.writeChildrenHtml,replaceWithChildren:function(){for(var t=this.children,e=t.length;e;)t[--e].insertAfter(this);this.remove()},forEach:Q.forEach,getFirst:function(t){if(!t)return this.children.length?this.children[0]:null;"function"!=typeof t&&(t=function(e){return function(t){return t.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof e?t.name==e:t.name in e)}}(t));for(var e=0,i=this.children.length;e<i;++e)if(t(this.children[e]))return this.children[e];return null},getHtml:function(){var t=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(t),t.getHtml()},setHtml:function(t){for(var e=0,i=(t=this.children=CKEDITOR.htmlParser.fragment.fromHtml(t).children).length;e<i;++e)t[e].parent=this},getOuterHtml:function(){var t=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(t),t.getHtml()},split:function(t){for(var e=this.children.splice(t,this.children.length-t),i=this.clone(),n=0;n<e.length;++n)e[n].parent=i;return(i.children=e)[0]&&(e[0].previous=null),0<t&&(this.children[t-1].next=null),this.parent.add(i,this.getIndex()+1),i},find:function(t,e){void 0===e&&(e=!1);var i,n=[];for(i=0;i<this.children.length;i++){var o=this.children[i];"function"==typeof t&&t(o)?n.push(o):"string"==typeof t&&o.name===t&&n.push(o),e&&o.find&&(n=n.concat(o.find(t,e)))}return n},addClass:function(t){if(!this.hasClass(t)){var e=this.attributes.class||"";this.attributes.class=e+(e?" ":"")+t}},removeClass:function(t){var e=this.attributes.class;e&&((e=CKEDITOR.tools.trim(e.replace(new RegExp("(?:\\s+|^)"+t+"(?:\\s+|$)")," ")))?this.attributes.class=e:delete this.attributes.class)},hasClass:function(t){var e=this.attributes.class;return!!e&&new RegExp("(?:^|\\s)"+t+"(?=\\s|$)").test(e)},getFilterContext:function(t){var e=[];if((t=t||{off:!1,nonEditable:!1,nestedEditable:!1}).off||"off"!=this.attributes["data-cke-processor"]||e.push("off",!0),t.nonEditable||"false"!=this.attributes.contenteditable?t.nonEditable&&!t.nestedEditable&&"true"==this.attributes.contenteditable&&e.push("nestedEditable",!0):e.push("nonEditable",!0),e.length){t=CKEDITOR.tools.copy(t);for(var i=0;i<e.length;i+=2)t[e[i]]=e[i+1]}return t}},!0),J=/{([^}]+)}/g,CKEDITOR.template=function(t){this.source=String(t)},CKEDITOR.template.prototype.output=function(i,t){var e=this.source.replace(J,function(t,e){return void 0!==i[e]?i[e]:t});return t?t.push(e):e},delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(t){(CKEDITOR.instances[t.name]=t).on("focus",function(){CKEDITOR.currentInstance!=t&&(CKEDITOR.currentInstance=t,CKEDITOR.fire("currentInstance"))}),t.on("blur",function(){CKEDITOR.currentInstance==t&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,t)},CKEDITOR.remove=function(t){delete CKEDITOR.instances[t.name]},tt={},CKEDITOR.addTemplate=function(t,e){var i=tt[t];return i||(i={name:t,source:e},CKEDITOR.fire("template",i),tt[t]=new CKEDITOR.template(i.source))},CKEDITOR.getTemplate=function(t){return tt[t]},et=[],CKEDITOR.addCss=function(t){et.push(t)},CKEDITOR.getCss=function(){return et.join("\n")},CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,CKEDITOR.inline=function(t,e){if(!CKEDITOR.env.isCompatible)return null;if((t=CKEDITOR.dom.element.get(t)).getEditor())throw'The editor instance "'+t.getEditor().name+'" is already attached to the provided element.';var i=new CKEDITOR.editor(e,t,CKEDITOR.ELEMENT_MODE_INLINE),n=t.is("textarea")?t:null;return n?(i.setData(n.getValue(),null,!0),(t=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!i.readOnly+'" class="cke_textarea_inline">'+n.getValue()+"</div>",CKEDITOR.document)).insertAfter(n),n.hide(),n.$.form&&i._attachToForm()):i.setData(t.getHtml(),null,!0),i.on("loaded",function(){i.fire("uiReady"),i.editable(t),i.container=t,i.ui.contentsElement=t,i.setData(i.getData(1)),i.resetDirty(),i.fire("contentDom"),i.mode="wysiwyg",i.fire("mode"),i.status="ready",i.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,i)},null,null,1e4),i.on("destroy",function(){n&&(i.container.clearCustomData(),i.container.remove(),n.show()),i.element.clearCustomData(),delete i.element}),i},CKEDITOR.inlineAll=function(){var t,e,i;for(i in CKEDITOR.dtd.$editable)for(var n=CKEDITOR.document.getElementsByTag(i),o=0,r=n.count();o<r;o++)"true"==(t=n.getItem(o)).getAttribute("contenteditable")&&(!(e={element:t,config:{}})!==CKEDITOR.fire("inline",e)&&CKEDITOR.inline(t,e.config))},CKEDITOR.domReady(function(){CKEDITOR.disableAutoInline||CKEDITOR.inlineAll()}),CKEDITOR.replaceClass="ckeditor",CKEDITOR.replace=function(t,e){return ge(t,e,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(t,e,i){return ge(t,e,i,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var t=document.getElementsByTagName("textarea"),e=0;e<t.length;e++){var i=null,n=t[e];if(n.name||n.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(n.className))continue}else if("function"==typeof arguments[0]&&!(i={})===arguments[0](n,i))continue;this.replace(n,i)}}},CKEDITOR.editor.prototype.addMode=function(t,e){(this._.modes||(this._.modes={}))[t]=e},CKEDITOR.editor.prototype.setMode=function(t,e){var i=this,n=this._.modes;if(t!=i.mode&&n&&n[t]){if(i.fire("beforeSetMode",t),i.mode){var o,r=i.checkDirty(),s=(n=i._.previousModeData,0);i.fire("beforeModeUnload"),i.editable(0),i._.previousMode=i.mode,i._.previousModeData=o=i.getData(1),"source"==i.mode&&n==o&&(i.fire("lockSnapshot",{forceUpdate:!0}),s=1),i.ui.space("contents").setHtml(""),i.mode=""}else i._.previousModeData=i.getData(1);this._.modes[t](function(){i.mode=t,void 0===r||r||i.resetDirty(),s?i.fire("unlockSnapshot"):"wysiwyg"==t&&i.fire("saveSnapshot"),setTimeout(function(){i.fire("mode"),e&&e.call(i)},0)})}},CKEDITOR.editor.prototype.resize=function(t,e,i,n){var o=this.container,r=this.ui.space("contents"),s=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;(n=n?this.container.getFirst(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasClass("cke_inner")}):o).setSize("width",t,!0),s&&(s.style.width="1%");var a=(n.$.offsetHeight||0)-(r.$.clientHeight||0);o=Math.max(e-(i?0:a),0),e=i?e+a:e,r.setStyle("height",o+"px"),s&&(s.style.width="100%"),this.fire("resize",{outerHeight:e,contentsHeight:o,outerWidth:t||n.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(t){return t?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)}),CKEDITOR.config.startupMode="wysiwyg",CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(t,e){this.base(e.$||e),this.editor=t,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var t;if(CKEDITOR.env.webkit&&!this.hasFocus&&(t=this.editor._.previousActive||this.getDocument().getActive(),this.contains(t)))t.focus();else{CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var e=this.$.scrollTop;this.$.focus(),this.$.scrollTop=e}else this.$.focus();else this.$.setActive()}catch(t){if(!CKEDITOR.env.ie)throw t}CKEDITOR.env.safari&&!this.isInline()&&((t=CKEDITOR.document.getActive()).equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(t,e){var i=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(t)&&(t="focus"==t?"focusin":"focusout",e=function(i,n){return function(t){var e=t.data.$.toElement||t.data.$.fromElement||t.data.$.relatedTarget;(e=e&&e.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(e):null)&&(n.equals(e)||n.contains(e))||i.call(this,t)}}(e,this),i[0]=t,i[1]=e),CKEDITOR.dom.element.prototype.on.apply(this,i)},attachListener:function(t){this._.listeners||(this._.listeners=[]);var e=Array.prototype.slice.call(arguments,1);return e=t.on.apply(t,e),this._.listeners.push(e),e},clearListeners:function(){var t=this._.listeners;try{for(;t.length;)t.pop().removeListener()}catch(t){}},restoreAttrs:function(){var t,e,i=this._.attrChanges;for(e in i)i.hasOwnProperty(e)&&(null!==(t=i[e])?this.setAttribute(e,t):this.removeAttribute(e))},attachClass:function(t){var e=this.getCustomData("classes");this.hasClass(t)||((e=e||[]).push(t),this.setCustomData("classes",e),this.addClass(t))},changeAttr:function(t,e){var i=this.getAttribute(t);e!==i&&(this._.attrChanges||(this._.attrChanges={}),t in this._.attrChanges||(this._.attrChanges[t]=i),this.setAttribute(t,e))},insertText:function(t){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(t),"text")},transformPlainTextToHtml:function(t){var e=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(t,e)},insertHtml:function(t,e,i){var n=this.editor;n.focus(),n.fire("saveSnapshot"),i=i||n.getSelection().getRanges()[0],at(this,e||"html",t,i),i.select(),we(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(t,e,i){at(this,i||"html",t,e),this.editor.fire("afterInsertHtml",{intoRange:e})},insertElement:function(t,e){(n=this.editor).focus(),n.fire("saveSnapshot");var i=n.activeEnterMode,n=n.getSelection(),o=t.getName();o=CKEDITOR.dtd.$block[o],e=e||n.getRanges()[0],this.insertElementIntoRange(t,e)&&(e.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),o&&((o=t.getNext(function(t){return be(t)&&!rt(t)}))&&o.type==CKEDITOR.NODE_ELEMENT&&o.is(CKEDITOR.dtd.$block)?o.getDtd()["#"]?e.moveToElementEditStart(o):e.moveToElementEditEnd(t):o||i==CKEDITOR.ENTER_BR||(o=e.fixBlock(!0,i==CKEDITOR.ENTER_DIV?"div":"p"),e.moveToElementEditStart(o)))),n.selectRanges([e]),we(this)},insertElementIntoSelection:function(t){this.insertElement(t)},insertElementIntoRange:function(t,e){var i,n,o=this.editor,r=o.config.enterMode,s=t.getName(),a=CKEDITOR.dtd.$block[s];if(e.checkReadOnly())return!1;if(e.deleteContents(1),e.startContainer.type==CKEDITOR.NODE_ELEMENT&&(e.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?lt(e):e.startContainer.is(CKEDITOR.dtd.$list)&&ct(e)),a)for(;(i=e.getCommonAncestor(0,1))&&(n=CKEDITOR.dtd[i.getName()])&&(!n||!n[s]);)i.getName()in CKEDITOR.dtd.span?e.splitElement(i):e.checkStartOfBlock()&&e.checkEndOfBlock()?(e.setStartBefore(i),e.collapse(!0),i.remove()):e.splitBlock(r==CKEDITOR.ENTER_DIV?"div":"p",o.editable());return e.insertNode(t),!0},setData:function(t,e){e||(t=this.editor.dataProcessor.toHtml(t)),this.setHtml(t),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(t){var e=this.getHtml();return t||(e=this.editor.dataProcessor.toDataFormat(e)),e},setReadOnly:function(t){this.setAttribute("contenteditable",!t)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var t=this.editor;this._.detach(),delete t.document,delete t.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function t(){var t,e=o.getDocument().$,i=e.getSelection();t:if(i.anchorNode&&i.anchorNode==o.$)t=!0;else{if(CKEDITOR.env.webkit&&(t=o.getDocument().getActive())&&t.equals(o)&&!i.anchorNode){t=!0;break t}t=void 0}t&&((t=new CKEDITOR.dom.range(o)).moveToElementEditStart(o),(e=e.createRange()).setStart(t.startContainer.$,t.startOffset),e.collapse(!0),i.removeAllRanges(),i.addRange(e))}var e,i,n,o=this;CKEDITOR.env.ie&&(CKEDITOR.env.version<9||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),e=o.getDocument().$,i=e.selection,n=o.getDocument().getActive(),"None"==i.type&&n.equals(o)&&(i=new CKEDITOR.dom.range(o),e=e.body.createTextRange(),i.moveToElementEditStart(o),(i=i.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(i=i.getParent()),e.moveToElementText(i.$),e.collapse(!0),e.select())):this.hasFocus?(this.focus(),t()):this.once("focus",function(){t()},null,null,-999)},getHtmlFromRange:function(t){return t.collapsed?new CKEDITOR.dom.documentFragment(t.document):(t={doc:this.getDocument(),range:t.clone()},ut.eol.detect(t,this),ut.bogus.exclude(t),ut.cell.shrink(t),t.fragment=t.range.cloneContents(),ut.tree.rebuild(t,this),ut.eol.fix(t,this),new CKEDITOR.dom.documentFragment(t.fragment.$))},extractHtmlFromRange:function(t,e){var i=dt,n={range:t,doc:t.document},o=this.getHtmlFromRange(t);if(t.collapsed)return t.optimize(),o;if(t.enlarge(CKEDITOR.ENLARGE_INLINE,1),i.table.detectPurge(n),n.bookmark=t.createBookmark(),delete n.range,(s=this.editor.createRange()).moveToPosition(n.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),n.targetBookmark=s.createBookmark(),i.list.detectMerge(n,this),i.table.detectRanges(n,this),i.block.detectMerge(n,this),n.tableContentsRanges?(i.table.deleteRanges(n),t.moveToBookmark(n.bookmark),n.range=t):(t.moveToBookmark(n.bookmark),(n.range=t).extractContents(i.detectExtractMerge(n))),t.moveToBookmark(n.targetBookmark),t.optimize(),i.fixUneditableRangePosition(t),i.list.merge(n,this),i.table.purge(n,this),i.block.merge(n,this),e){if(i=t.startPath(),n=t.checkStartOfBlock()&&t.checkEndOfBlock()&&i.block&&!t.root.equals(i.block)){t:{var r,s=0;if(n=i.block.getElementsByTag("span"))for(;r=n.getItem(s++);)if(!nt(r)){n=!0;break t}n=!1}n=!n}n&&(t.moveToPosition(i.block,CKEDITOR.POSITION_BEFORE_START),i.block.remove())}else i.autoParagraph(this.editor,t),ot(t.startContainer)&&t.startContainer.appendBogus();return t.startContainer.mergeSiblings(),o},setup:function(){var c=this.editor;if(this.attachListener(c,"beforeGetData",function(){var t=this.getData();this.is("textarea")||!1!==c.config.ignoreEmptyParagraph&&(t=t.replace(st,function(t,e){return e})),c.setData(t,null,1)},this),this.attachListener(c,"getSnapshot",function(t){t.data=this.getData(1)},this),this.attachListener(c,"afterSetData",function(){this.setData(c.getData(1))},this),this.attachListener(c,"loadSnapshot",function(t){this.setData(t.data,1)},this),this.attachListener(c,"beforeFocus",function(){var t=c.getSelection();(t=t&&t.getNative())&&"Control"==t.type||this.focus()},this),this.attachListener(c,"insertHtml",function(t){this.insertHtml(t.data.dataValue,t.data.mode,t.data.range)},this),this.attachListener(c,"insertElement",function(t){this.insertElement(t.data)},this),this.attachListener(c,"insertText",function(t){this.insertText(t.data)},this),this.setReadOnly(c.readOnly),this.attachClass("cke_editable"),c.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):c.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&c.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+c.config.contentsLangDirection),c.keystrokeHandler.blockedKeystrokes[8]=+c.readOnly,c.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",function(){c._.previousScrollTop=c.editable().$.scrollTop},null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version){var e=function(){var t=c.editable();null!=c._.previousScrollTop&&t.getDocument().equals(CKEDITOR.document)&&(t.$.scrollTop=c._.previousScrollTop,c._.previousScrollTop=null,this.removeListener("scroll",e))};this.on("scroll",e)}if(c.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,c.once("contentDom",function(){c.focusManager.focus(this)},this)),this.isInline()&&this.changeAttr("tabindex",c.tabIndex),!this.is("textarea")){c.document=this.getDocument(),c.window=this.getWindow();var t=c.document;this.changeAttr("spellcheck",!c.config.disableNativeSpellChecker);var i=c.config.contentsLangDirection;this.getDirection(1)!=i&&this.changeAttr("dir",i);var n=CKEDITOR.getCss();if(n){var o=(i=t.getHead()).getCustomData("stylesheet");o?n!=o.getText()&&(CKEDITOR.env.ie&&CKEDITOR.env.version<9?o.$.styleSheet.cssText=n:o.setText(n)):(n=t.appendStyleText(n),n=new CKEDITOR.dom.element(n.ownerNode||n.owningElement),i.setCustomData("stylesheet",n),n.data("cke-temp",1))}i=t.getCustomData("stylesheet_ref")||0,t.setCustomData("stylesheet_ref",i+1),this.setCustomData("cke_includeReadonly",!c.config.disableReadonlyStyling),this.attachListener(this,"click",function(t){t=t.data;var e=new CKEDITOR.dom.elementPath(t.getTarget(),this).contains("a");e&&2!=t.$.button&&e.isReadOnly()&&t.preventDefault()});var u={8:1,46:1};this.attachListener(c,"key",function(t){if(c.readOnly)return!0;var e,i=t.data.domEvent.getKey();if(0!==(t=c.getSelection()).getRanges().length){if(i in u){var n,o,r,s,a=t.getRanges()[0],l=a.startPath();i=8==i,CKEDITOR.env.ie&&CKEDITOR.env.version<11&&(n=t.getSelectedElement())||(n=function(t){function e(i){return function(t,e){if(e&&t.type==CKEDITOR.NODE_ELEMENT&&t.is(o)&&(n=t),!(e||!be(t)||i&&rt(t)))return!1}}var n,i=t.getRanges()[0];t=t.root;var o={table:1,ul:1,ol:1,dl:1};if(i.startPath().contains(o)){var r=i.clone();if(r.collapse(1),r.setStartAt(t,CKEDITOR.POSITION_AFTER_START),(t=new CKEDITOR.dom.walker(r)).guard=e(),t.checkBackward(),n)return(r=i.clone()).collapse(),r.setEndAt(n,CKEDITOR.POSITION_AFTER_END),(t=new CKEDITOR.dom.walker(r)).guard=e(!0),n=!1,t.checkForward(),n}return null}(t))?(c.fire("saveSnapshot"),a.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),n.remove(),a.select(),c.fire("saveSnapshot"),e=1):a.collapsed&&((o=l.block)&&(s=o[i?"getPrevious":"getNext"](it))&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("table")&&a[i?"checkStartOfBlock":"checkEndOfBlock"]()?(c.fire("saveSnapshot"),a[i?"checkEndOfBlock":"checkStartOfBlock"]()&&o.remove(),a["moveToElementEdit"+(i?"End":"Start")](s),a.select(),c.fire("saveSnapshot"),e=1):l.blockLimit&&l.blockLimit.is("td")&&(r=l.blockLimit.getAscendant("table"))&&a.checkBoundaryOfElement(r,i?CKEDITOR.START:CKEDITOR.END)&&(s=r[i?"getPrevious":"getNext"](it))?(c.fire("saveSnapshot"),a["moveToElementEdit"+(i?"End":"Start")](s),a.checkStartOfBlock()&&a.checkEndOfBlock()?s.remove():a.select(),c.fire("saveSnapshot"),e=1):(r=l.contains(["td","th","caption"]))&&a.checkBoundaryOfElement(r,i?CKEDITOR.START:CKEDITOR.END)&&(e=1))}return!e}}),c.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(t){t.data.getKeystroke()in u&&!this.getFirst(be)&&(this.appendBogus(),(t=c.createRange()).moveToPosition(this,CKEDITOR.POSITION_AFTER_START),t.select())}),this.attachListener(this,"dblclick",function(t){if(c.readOnly)return!1;t={element:t.data.getTarget()},c.fire("doubleclick",t)}),CKEDITOR.env.ie&&this.attachListener(this,"click",ye),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(t){var e=t.data.getTarget();e.is("img","hr","input","textarea","select")&&!e.isReadOnly()&&(c.getSelection().selectElement(e),e.is("input","textarea","select")&&t.data.preventDefault())}),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(t){(t=t.data.getTarget())&&t.is("img")&&c.getSelection().selectElement(t)}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(t){if(2==t.data.$.button&&!(t=t.data.getTarget()).getOuterHtml().replace(st,"")){var e=c.createRange();e.moveToElementEditStart(t),e.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(t){t.data.getTarget().is("input","select")&&t.data.preventDefault()}),this.attachListener(this,"mouseup",function(t){t.data.getTarget().is("input","textarea")&&t.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(c,"key",function(t){if(c.readOnly)return!0;if((e=t.data.domEvent.getKey())in u&&0!==(t=c.getSelection()).getRanges().length){var e=8==e,i=t.getRanges()[0];if(t=i.startPath(),i.collapsed)t:{var n=t.block;if(n&&i[e?"checkStartOfBlock":"checkEndOfBlock"]()&&i.moveToClosestEditablePosition(n,!e)&&i.collapsed){if(i.startContainer.type==CKEDITOR.NODE_ELEMENT){var o=i.startContainer.getChild(i.startOffset-(e?1:0));if(o&&o.type==CKEDITOR.NODE_ELEMENT&&o.is("hr")){c.fire("saveSnapshot"),o.remove(),t=!0;break t}}var r;t=!(i=i.startPath().block)||i&&i.contains(n)?void 0:(c.fire("saveSnapshot"),(r=(e?i:n).getBogus())&&r.remove(),o=(r=c.getSelection()).createBookmarks(),(e?n:i).moveChildren(e?i:n,!1),t.lastElement.mergeSiblings(),Ce(n,i,!e),r.selectBookmarks(o),!0)}else t=!1}else e=i,r=t.block,i=e.endPath().block,t=!(!r||!i||r.equals(i)||(c.fire("saveSnapshot"),(n=r.getBogus())&&n.remove(),e.enlarge(CKEDITOR.ENLARGE_INLINE),e.deleteContents(),i.getParent()&&(i.moveChildren(r,!1),t.lastElement.mergeSiblings(),Ce(r,i,!0)),(e=c.getSelection().getRanges()[0]).collapse(1),e.optimize(),""===e.startContainer.getHtml()&&e.startContainer.appendBogus(),e.select(),0));if(!t)return;return c.getSelection().scrollIntoView(),c.fire("saveSnapshot"),!1}},this,null,100)}}},_:{detach:function(){var t;if(this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs(),t=this.removeCustomData("classes"))for(;t.length;)this.removeClass(t.pop());if(!this.is("textarea")){var e=(t=this.getDocument()).getHead();if(e.getCustomData("stylesheet")){var i=t.getCustomData("stylesheet_ref");--i?t.setCustomData("stylesheet_ref",i):(t.removeCustomData("stylesheet_ref"),e.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(t){var e=this._.editable;return e&&t?0:(arguments.length&&(e=this._.editable=t?t instanceof CKEDITOR.editable?t:new CKEDITOR.editable(this,t):(e&&e.detach(),null)),e)},CKEDITOR.on("instanceLoaded",function(t){var i=t.editor;i.on("insertElement",function(t){(t=t.data).type==CKEDITOR.NODE_ELEMENT&&(t.is("input")||t.is("textarea"))&&("false"!=t.getAttribute("contentEditable")&&t.data("cke-editable",t.hasAttribute("contenteditable")?"true":"1"),t.setAttribute("contentEditable",!1))}),i.on("selectionChange",function(t){if(!i.readOnly){var e=i.getSelection();e&&!e.isLocked&&(e=i.checkDirty(),i.fire("lockSnapshot"),ve(t),i.fire("unlockSnapshot"),e||i.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(t){var o=t.editor;o.on("mode",function(){var t=o.editable();if(t&&t.isInline()){var e=o.title;if(t.changeAttr("role","textbox"),t.changeAttr("aria-label",e),e&&t.changeAttr("title",e),(n=o.fire("ariaEditorHelpLabel",{}).label)&&(e=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var i=CKEDITOR.tools.getNextId(),n=CKEDITOR.dom.element.createFromHtml('<span id="'+i+'" class="cke_voice_label">'+n+"</span>");e.append(n),t.changeAttr("aria-describedby",i)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),it=CKEDITOR.dom.walker.whitespaces(!0),nt=CKEDITOR.dom.walker.bookmark(!1,!0),ot=CKEDITOR.dom.walker.empty(),rt=CKEDITOR.dom.walker.bogus(),st=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,ht=CKEDITOR.dtd,pt={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},ft={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},delete(gt=CKEDITOR.tools.extend({},ht.$inline)).br,at=function(t,e,i,n){var o=t.editor,r=!1;if("unfiltered_html"==e&&(e="html",r=!0),!n.checkReadOnly()){var s,a,l;if(e=(t={type:e,dontFilter:r,editable:t,editor:o,range:n,blockLimit:b=new CKEDITOR.dom.elementPath(n.startContainer,n.root).blockLimit||n.root,mergeCandidates:[],zombies:[]}).range,n=t.mergeCandidates,"text"==t.type&&e.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(s=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",e.document),e.insertNode(s),e.setStartAfter(s)),r=new CKEDITOR.dom.elementPath(e.startContainer),t.endPath=b=new CKEDITOR.dom.elementPath(e.endContainer),!e.collapsed){o=b.block||b.blockLimit;var c=e.getCommonAncestor();o&&!o.equals(c)&&!o.contains(c)&&e.checkEndOfBlock()&&t.zombies.push(o),e.deleteContents()}for(;(a=De(e))&&Te(a)&&a.isBlockBoundary()&&r.contains(a);)e.moveToPosition(a,CKEDITOR.POSITION_BEFORE_END);for(function t(e,i,n,o){var r,s,a=e.clone();a.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),(r=new CKEDITOR.dom.walker(a).next())&&Te(r)&&pt[r.getName()]&&(s=r.getPrevious())&&Te(s)&&!s.getParent().equals(e.startContainer)&&n.contains(s)&&o.contains(r)&&r.isIdentical(s)&&(r.moveChildren(s),r.remove(),t(e,i,n,o))}(e,t.blockLimit,r,b),s&&(e.setEndBefore(s),e.collapse(),s.remove()),(o=(s=e.startPath()).contains(Ie,!1,1))&&(e.splitElement(o),t.inlineStylesRoot=o,t.inlineStylesPeak=s.lastElement),(o=(s=e.createBookmark()).startNode.getPrevious(be))&&Te(o)&&Ie(o)&&n.push(o),(o=s.startNode.getNext(be))&&Te(o)&&Ie(o)&&n.push(o),o=s.startNode;(o=o.getParent())&&Ie(o);)n.push(o);if(e.moveToBookmark(s),s=i){if(s=t.range,"text"==t.type&&t.inlineStylesRoot){for(e=(a=t.inlineStylesPeak).getDocument().createText("{cke-peak}"),n=t.inlineStylesRoot.getParent();!a.equals(n);)e=e.appendTo(a.clone()),a=a.getParent();i=e.getOuterHtml().split("{cke-peak}").join(i)}if(a=t.blockLimit.getName(),/^\s+|\s+$/.test(i)&&"span"in CKEDITOR.dtd[a]&&(i=(v='<span data-cke-marker="1">&nbsp;</span>')+i+v),i=t.editor.dataProcessor.toHtml(i,{context:null,fixForBody:!1,protectedWhitespaces:!!v,dontFilter:t.dontFilter,filter:t.editor.activeFilter,enterMode:t.editor.activeEnterMode}),(a=s.document.createElement("body")).setHtml(i),v&&(a.getFirst().remove(),a.getLast().remove()),(v=s.startPath().block)&&(1!=v.getChildCount()||!v.getBogus()))t:{var u;if(1==a.getChildCount()&&Te(u=a.getFirst())&&u.is(ft)&&!u.hasAttribute("contenteditable")){for(s=0,n=(v=u.getElementsByTag("*")).count();s<n;s++)if(!(e=v.getItem(s)).is(gt))break t;u.moveChildren(u.getParent(1)),u.remove()}}t.dataWrapper=a,s=i}if(s){var d;s=(u=t.range).document,a=t.blockLimit;var h,p,f,g,m,v=[];i=o=n=0,e=u.startContainer;var y,b=(r=t.endPath.elements[0]).getPosition(e);for(c=!(!r.getCommonAncestor(e)||b==CKEDITOR.POSITION_IDENTICAL||b&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),function(t,e){function i(t,e){if(e.isBlock&&e.isElement&&!e.node.is("br")&&Te(t)&&t.is("br"))return t.remove(),1}var n=e.endContainer.getChild(e.endOffset),o=e.endContainer.getChild(e.endOffset-1);n&&i(n,t[t.length-1]),o&&i(o,t[0])&&(e.setEnd(e.endContainer,e.endOffset-1),e.collapse())}(e=function t(e,i){var n,o,r,s,a=[],l=i.range.startContainer;n=i.range.startPath(),l=ht[l.getName()];for(var c=0,u=e.getChildren(),d=u.count(),h=-1,p=-1,f=0,g=n.contains(ht.$list);c<d;++c)Te(n=u.getItem(c))?(r=n.getName(),g&&r in CKEDITOR.dtd.$list?a=a.concat(t(n,i)):(s=!!l[r],"br"!=r||!n.data("cke-eol")||c&&c!=d-1||(f=(o=c?a[c-1].node:u.getItem(c+1))&&(!Te(o)||!o.is("br")),o=o&&Te(o)&&ht.$block[o.getName()]),-1!=h||s||(h=c),s||(p=c),a.push({isElement:1,isLineBreak:f,isBlock:n.isBlockBoundary(),hasBlockSibling:o,node:n,name:r,allowed:s}),o=f=0)):a.push({isElement:0,node:n,allowed:1});return-1<h&&(a[h].firstNotAllowed=1),-1<p&&(a[p].lastNotAllowed=1),a}(t.dataWrapper,t),u);n<e.length;n++){if(d=(b=e[n]).isLineBreak){d=u,g=a;var _=void 0,E=void 0;d=b.hasBlockSibling?1:(_=d.startContainer.getAscendant(ht.$block,1))&&_.is({div:1,p:1})?(E=_.getPosition(g))==CKEDITOR.POSITION_IDENTICAL||E==CKEDITOR.POSITION_CONTAINS?0:(g=d.splitElement(_),d.moveToPosition(g,CKEDITOR.POSITION_AFTER_START),1):0}if(d)i=0<n;else{if(d=u.startPath(),!b.isBlock&&_e(t.editor,d.block,d.blockLimit)&&(f=Ee(t.editor))&&((f=s.createElement(f)).appendBogus(),u.insertNode(f),CKEDITOR.env.needsBrFiller&&(h=f.getBogus())&&h.remove(),u.moveToPosition(f,CKEDITOR.POSITION_BEFORE_END)),(d=u.startPath().block)&&!d.equals(p)&&((h=d.getBogus())&&(h.remove(),v.push(d)),p=d),b.firstNotAllowed&&(o=1),o&&b.isElement){for(d=u.startContainer,g=null;d&&!ht[d.getName()][b.name];){if(d.equals(a)){d=null;break}d=(g=d).getParent()}if(d)g&&(m=u.splitElement(g),t.zombies.push(m),t.zombies.push(g));else{g=a.getName(),y=!n,d=n==e.length-1,_=[],E=(g=xe(b.node,g)).length;for(var w=0,C=void 0,T=0,x=-1;w<E;w++)T=" "==(C=g[w])?(T||y&&!w||(_.push(new CKEDITOR.dom.text(" ")),x=_.length),1):(_.push(C),0);d&&x==_.length&&_.pop(),y=_}}if(y){for(;d=y.pop();)u.insertNode(d);y=0}else u.insertNode(b.node);b.lastNotAllowed&&n<e.length-1&&((m=c?r:m)&&u.setEndAt(m,CKEDITOR.POSITION_AFTER_START),o=0),u.collapse()}}(h=1==e.length&&(h=e[0]).isElement&&"false"==h.node.getAttribute("contenteditable"))&&(i=!0,d=e[0].node,u.setStartAt(d,CKEDITOR.POSITION_BEFORE_START),u.setEndAt(d,CKEDITOR.POSITION_AFTER_END)),t.dontMoveCaret=i,t.bogusNeededBlocks=v}for(h=t.range,m=t.bogusNeededBlocks,y=h.createBookmark();p=t.zombies.pop();)p.getParent()&&((f=h.clone()).moveToElementEditStart(p),f.removeEmptyBlocksAtEnd());if(m)for(;p=m.pop();)CKEDITOR.env.needsBrFiller?p.appendBogus():p.append(h.document.createText(" "));for(;p=t.mergeCandidates.pop();)p.mergeSiblings();if(h.moveToBookmark(y),!t.dontMoveCaret){for(p=De(h);p&&Te(p)&&!p.is(ht.$empty);){if(p.isBlockBoundary())h.moveToPosition(p,CKEDITOR.POSITION_BEFORE_END);else{if(Ie(p)&&p.getHtml().match(/(\s|&nbsp;)$/g)){l=null;break}(l=h.clone()).moveToPosition(p,CKEDITOR.POSITION_BEFORE_END)}p=p.getLast(be)}l&&h.moveToRange(l)}}},lt=function(t){var e=t.startContainer,i=e.getAscendant("table",1),n=!1;ke(i.getElementsByTag("td")),ke(i.getElementsByTag("th")),(i=t.clone()).setStart(e,0),(i=Oe(i).lastBackward())||((i=t.clone()).setEndAt(e,CKEDITOR.POSITION_BEFORE_END),i=Oe(i).lastForward(),n=!0),(i=i||e).is("table")?(t.setStartAt(i,CKEDITOR.POSITION_BEFORE_START),t.collapse(!0),i.remove()):(i.is({tbody:1,thead:1,tfoot:1})&&(i=Re(i,"tr",n)),i.is("tr")&&(i=Re(i,i.getParent().is("thead")?"th":"td",n)),(e=i.getBogus())&&e.remove(),t.moveToPosition(i,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))},ct=function(t){var e,i=t.startContainer,n=!1;(e=t.clone()).setStart(i,0),(e=Se(e).lastBackward())||((e=t.clone()).setEndAt(i,CKEDITOR.POSITION_BEFORE_END),e=Se(e).lastForward(),n=!0),(e=e||i).is(CKEDITOR.dtd.$list)?(t.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),t.collapse(!0),e.remove()):((i=e.getBogus())&&i.remove(),t.moveToPosition(e,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),t.select())},ut={eol:{detect:function(t,e){var i=t.range,n=i.clone(),o=i.clone(),r=new CKEDITOR.dom.elementPath(i.startContainer,e),s=new CKEDITOR.dom.elementPath(i.endContainer,e);n.collapse(1),o.collapse(),r.block&&n.checkBoundaryOfElement(r.block,CKEDITOR.END)&&(i.setStartAfter(r.block),t.prependEolBr=1),s.block&&o.checkBoundaryOfElement(s.block,CKEDITOR.START)&&(i.setEndBefore(s.block),t.appendEolBr=1)},fix:function(t,e){var i,n=e.getDocument();t.appendEolBr&&(i=this.createEolBr(n),t.fragment.append(i)),!t.prependEolBr||i&&!i.getPrevious()||t.fragment.append(this.createEolBr(n),1)},createEolBr:function(t){return t.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(t){var e,i=(e=t.range.getBoundaryNodes()).startNode;!(e=e.endNode)||!rt(e)||i&&i.equals(e)||t.range.setEndBefore(e)}},tree:{rebuild:function(t,e){var i,n=(s=t.range).getCommonAncestor(),o=new CKEDITOR.dom.elementPath(n,e),r=new CKEDITOR.dom.elementPath(s.startContainer,e),s=new CKEDITOR.dom.elementPath(s.endContainer,e);if(n.type==CKEDITOR.NODE_TEXT&&(n=n.getParent()),o.blockLimit.is({tr:1,table:1})){var a=o.contains("table").getParent();i=function(t){return!t.equals(a)}}else if(o.block&&o.block.is(CKEDITOR.dtd.$listItem)&&(r=r.contains(CKEDITOR.dtd.$list),s=s.contains(CKEDITOR.dtd.$list),!r.equals(s))){var l=o.contains(CKEDITOR.dtd.$list).getParent();i=function(t){return!t.equals(l)}}i=i||function(t){return!t.equals(o.block)&&!t.equals(o.blockLimit)},this.rebuildFragment(t,e,n,i)},rebuildFragment:function(t,e,i,n){for(var o;i&&!i.equals(e)&&n(i);)o=i.clone(0,1),t.fragment.appendTo(o),t.fragment=o,i=i.getParent()}},cell:{shrink:function(t){var e=(t=t.range).startContainer,i=t.endContainer,n=t.startOffset,o=t.endOffset;e.type==CKEDITOR.NODE_ELEMENT&&e.equals(i)&&e.is("tr")&&++n==o&&t.shrink(CKEDITOR.SHRINK_TEXT)}}},dt={list:{detectMerge:function(t,e){var i=Ne(e,t.bookmark),n=i.startPath(),o=i.endPath(),r=n.contains(CKEDITOR.dtd.$list),s=o.contains(CKEDITOR.dtd.$list);t.mergeList=r&&s&&r.getParent().equals(s.getParent())&&!r.equals(s),t.mergeListItems=n.block&&o.block&&n.block.is(CKEDITOR.dtd.$listItem)&&o.block.is(CKEDITOR.dtd.$listItem),(t.mergeList||t.mergeListItems)&&((i=i.clone()).setStartBefore(t.bookmark.startNode),i.setEndAfter(t.bookmark.endNode),t.mergeListBookmark=i.createBookmark())},merge:function(t,e){if(t.mergeListBookmark){var i=t.mergeListBookmark.startNode,n=t.mergeListBookmark.endNode,o=new CKEDITOR.dom.elementPath(i,e),r=new CKEDITOR.dom.elementPath(n,e);if(t.mergeList){var s=o.contains(CKEDITOR.dtd.$list),a=r.contains(CKEDITOR.dtd.$list);s.equals(a)||(a.moveChildren(s),a.remove())}t.mergeListItems&&(o=o.contains(CKEDITOR.dtd.$listItem),r=r.contains(CKEDITOR.dtd.$listItem),o.equals(r)||Me(r,i,n)),i.remove(),n.remove()}}},block:{detectMerge:function(t,e){if(!t.tableContentsRanges&&!t.mergeListBookmark){var i=new CKEDITOR.dom.range(e);i.setStartBefore(t.bookmark.startNode),i.setEndAfter(t.bookmark.endNode),t.mergeBlockBookmark=i.createBookmark()}},merge:function(t,e){if(t.mergeBlockBookmark&&!t.purgeTableBookmark){var i=t.mergeBlockBookmark.startNode,n=t.mergeBlockBookmark.endNode,o=new CKEDITOR.dom.elementPath(i,e),r=new CKEDITOR.dom.elementPath(n,e);o=o.block,r=r.block,o&&r&&!o.equals(r)&&Me(r,i,n),i.remove(),n.remove()}}},table:(mt={td:1,th:1,caption:1},{detectPurge:function(t){var e=t.range;(i=e.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT);var i=new CKEDITOR.dom.walker(i),n=0;if(i.evaluator=function(t){t.type==CKEDITOR.NODE_ELEMENT&&t.is(mt)&&++n},i.checkForward(),1<n){i=e.startPath().contains("table");var o=e.endPath().contains("table");i&&o&&e.checkBoundaryOfElement(i,CKEDITOR.START)&&e.checkBoundaryOfElement(o,CKEDITOR.END)&&((e=t.range.clone()).setStartBefore(i),e.setEndAfter(o),t.purgeTableBookmark=e.createBookmark())}},detectRanges:function(t,e){var i,n,o=Ne(e,t.bookmark),r=o.clone(),s=o.getCommonAncestor();s.is(CKEDITOR.dtd.$tableContent)&&!s.is(mt)&&(s=s.getAscendant("table",!0)),n=s,s=new CKEDITOR.dom.elementPath(o.startContainer,n),n=new CKEDITOR.dom.elementPath(o.endContainer,n),s=s.contains("table"),n=n.contains("table"),(s||n)&&(s&&n&&Le(s,n)?((t.tableSurroundingRange=r).setStartAt(s,CKEDITOR.POSITION_AFTER_END),r.setEndAt(n,CKEDITOR.POSITION_BEFORE_START),(r=o.clone()).setEndAt(s,CKEDITOR.POSITION_AFTER_END),(i=o.clone()).setStartAt(n,CKEDITOR.POSITION_BEFORE_START),i=Ke(r).concat(Ke(i))):s?n||((t.tableSurroundingRange=r).setStartAt(s,CKEDITOR.POSITION_AFTER_END),o.setEndAt(s,CKEDITOR.POSITION_AFTER_END)):((t.tableSurroundingRange=r).setEndAt(n,CKEDITOR.POSITION_BEFORE_START),o.setStartAt(n,CKEDITOR.POSITION_AFTER_START)),t.tableContentsRanges=i||Ke(o))},deleteRanges:function(t){for(var e;e=t.tableContentsRanges.pop();)e.extractContents(),ot(e.startContainer)&&e.startContainer.appendBogus();t.tableSurroundingRange&&t.tableSurroundingRange.extractContents()},purge:function(t){if(t.purgeTableBookmark){var e=t.doc,i=t.range.clone();(e=e.createElement("p")).insertBefore(t.purgeTableBookmark.startNode),i.moveToBookmark(t.purgeTableBookmark),i.deleteContents(),t.range.moveToPosition(e,CKEDITOR.POSITION_AFTER_START)}}}),detectExtractMerge:function(t){return!(t.range.startPath().contains(CKEDITOR.dtd.$listItem)&&t.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(t){t.startContainer.getDtd()["#"]||t.moveToClosestEditablePosition(null,!0)},autoParagraph:function(t,e){var i,n=e.startPath();_e(t,n.block,n.blockLimit)&&(i=Ee(t))&&((i=e.document.createElement(i)).appendBogus(),e.insertNode(i),e.moveToPosition(i,CKEDITOR.POSITION_AFTER_START))}},function(){function u(t){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(t)}function h(t,e){if(0===t.length||u(t[0].getEnclosedNode()))return!1;var i,n;if((i=!e&&1===t.length)&&!(i=t[0].collapsed)){var o=t[0];i=o.startContainer.getAscendant({td:1,th:1},!0);var r=o.endContainer.getAscendant({td:1,th:1},!0);n=CKEDITOR.tools.trim,i=!(!i||!i.equals(r)||i.findOne("td, th, tr, tbody, table"))&&(!(o=o.cloneContents()).getFirst()||n(o.getFirst().getText())!==n(i.getText()))}if(i)return!1;for(n=0;n<t.length;n++)if(!(i=t[n]._getTableElement()))return!1;return!0}function p(t){var e=this.root.editor,i=e.getSelection(1);this.reset(),b=!0,i.root.once("selectionchange",function(t){t.cancel()},null,null,0),i.selectRanges([t[0]]),(i=this._.cache).ranges=new CKEDITOR.dom.rangeList(t),i.type=CKEDITOR.SELECTION_TEXT,i.selectedElement=t[0]._getTableElement(),i.selectedText=function(t){t=function(t){function e(t){t=t.find("td, th");var e,i=[];for(e=0;e<t.count();e++)i.push(t.getItem(e));return i}var i,n,o=[];for(n=0;n<t.length;n++)(i=t[n]._getTableElement()).is&&i.is({td:1,th:1})?o.push(i):o=o.concat(e(i));return o}(t);var e,i,n="",o=[];for(i=0;i<t.length;i++)e&&!e.equals(t[i].getAscendant("tr"))?(n+=o.join("\t")+"\n",e=t[i].getAscendant("tr"),o=[]):0===i&&(e=t[i].getAscendant("tr")),o.push(t[i].getText());return n+o.join("\t")}(t),i.nativeSel=null,this.isFake=1,this.rev=s++,e._.fakeSelection=this,b=!1,this.root.fire("selectionchange")}function m(){var t,e=this._.fakeSelection;if(e){var i;if(!(i=!(t=this.getSelection(1)))&&(i=!t.isHidden())){i=e;var n=t.getRanges(),o=i.getRanges(),r=n.length&&n[0]._getTableElement()&&n[0]._getTableElement().getAscendant("table",!0),s=o.length&&o[0]._getTableElement()&&o[0]._getTableElement().getAscendant("table",!0),a=1===n.length&&n[0]._getTableElement()&&n[0]._getTableElement().is("table"),l=1===o.length&&o[0]._getTableElement()&&o[0]._getTableElement().is("table");if(u(i.getSelectedElement()))i=!1;else{var c=1===n.length&&n[0].collapsed;o=h(n,!!CKEDITOR.env.webkit)&&h(o);i=!(!(r=!(!r||!s)&&(r.equals(s)||s.contains(r)))||!c&&!o)&&(a&&!l&&i.selectRanges(n),!0)}i=!i}i&&(e.reset(),e=0)}(e||(e=t||this.getSelection(1))&&e.getType()!=CKEDITOR.SELECTION_NONE)&&(this.fire("selectionCheck",e),(t=this.elementPath()).compare(this._.selectionPreviousPath)||(i=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(t.blockLimit),CKEDITOR.env.webkit&&!i&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=t,this.fire("selectionChange",{selection:e,path:t})))}function v(){i=!0,e||(t.call(this),e=CKEDITOR.tools.setTimeout(t,200,this))}function t(){e=null,i&&(CKEDITOR.tools.setTimeout(m,0,this),i=!1)}function r(t){return!(!d(t)&&(t.type!=CKEDITOR.NODE_ELEMENT||t.is(CKEDITOR.dtd.$empty)))}function f(i){function t(t,e){return!(!t||t.type==CKEDITOR.NODE_TEXT)&&i.clone()["moveToElementEdit"+(e?"End":"Start")](t)}if(!(i.root instanceof CKEDITOR.editable))return!1;var e=i.startContainer,n=i.getPreviousNode(r,null,e),o=i.getNextNode(r,null,e);return!(!t(n)&&!t(o,1)&&(n||o||e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()&&e.getBogus()))}function g(t){y(t,!1);var e=t.getDocument().createText(l);return t.setCustomData("cke-fillingChar",e),e}function y(t,e){var i=t&&t.removeCustomData("cke-fillingChar");if(i){if(!1!==e){var n=t.getDocument().getSelection().getNative(),o=n&&"None"!=n.type&&n.getRangeAt(0),r=l.length;if(i.getLength()>r&&o&&o.intersectsNode(i.$)){var s=[{node:n.anchorNode,offset:n.anchorOffset},{node:n.focusNode,offset:n.focusOffset}];n.anchorNode==i.$&&n.anchorOffset>r&&(s[0].offset-=r),n.focusNode==i.$&&n.focusOffset>r&&(s[1].offset-=r)}}i.setText(a(i.getText(),1)),s&&(n=(i=t.getDocument().$).getSelection(),(i=i.createRange()).setStart(s[0].node,s[0].offset),i.collapse(!0),n.removeAllRanges(),n.addRange(i),n.extend(s[1].node,s[1].offset))}}function a(t,e){return e?t.replace(c,function(t,e){return e?" ":""}):t.replace(l,"")}var b,e,i,n,o,_="function"!=typeof window.getSelection,s=1,l=CKEDITOR.tools.repeat("​",7),c=new RegExp(l+"( )?","g"),d=CKEDITOR.dom.walker.invisible(1),E=(n=w(),o=w(1),{37:n,38:n,39:o,40:o,8:C(),46:C(1)});function w(i){return function(t){var e=t.editor.createRange();return e.moveToClosestEditablePosition(t.selected,i)&&t.editor.getSelection().selectRanges([e]),!1}}function C(o){return function(t){var e,i=t.editor,n=i.createRange();return(e=n.moveToClosestEditablePosition(t.selected,o))||(e=n.moveToClosestEditablePosition(t.selected,!o)),e&&i.getSelection().selectRanges([n]),i.fire("saveSnapshot"),t.selected.remove(),e||(n.moveToElementEditablePosition(i.editable()),i.getSelection().selectRanges([n])),i.fire("saveSnapshot"),!1}}CKEDITOR.on("instanceCreated",function(t){function e(){var t=g.getSelection();t&&t.removeAllRanges()}var g=t.editor;g.on("contentDom",function(){function t(){(o=new CKEDITOR.dom.selection(g.getSelection())).lock()}function i(){l.removeListener("mouseup",i),d.removeListener("mouseup",i);var t=CKEDITOR.document.$.selection,e=t.createRange();"None"!=t.type&&e.parentElement()&&e.parentElement().ownerDocument==a.$&&e.select()}function n(t){if(CKEDITOR.env.ie){var e=(t=t.getRanges()[0])?t.startContainer.getAscendant(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&("false"==t.getAttribute("contenteditable")||"true"==t.getAttribute("contenteditable"))},!0):null;return t&&"false"==e.getAttribute("contenteditable")&&e}}var e,o,r,s,a=g.document,l=CKEDITOR.document,c=g.editable(),u=a.getBody(),d=a.getDocumentElement(),h=c.isInline();if((CKEDITOR.env.gecko&&c.attachListener(c,"focus",function(t){t.removeListener(),0!==e&&(t=g.getSelection().getNative())&&t.isCollapsed&&t.anchorNode==c.$&&((t=g.createRange()).moveToElementEditStart(c),t.select())},null,null,-2),c.attachListener(c,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){e&&CKEDITOR.env.webkit&&(e=g._.previousActive&&g._.previousActive.equals(a.getActive()))&&null!=g._.previousScrollTop&&g._.previousScrollTop!=c.$.scrollTop&&(c.$.scrollTop=g._.previousScrollTop),g.unlockSelection(e),e=0},null,null,-1),c.attachListener(c,"mousedown",function(){e=0}),(CKEDITOR.env.ie||h)&&(_?c.attachListener(c,"beforedeactivate",t,null,null,-1):c.attachListener(g,"selectionCheck",t,null,null,-1),c.attachListener(c,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){g.lockSelection(o),e=1},null,null,-1),c.attachListener(c,"mousedown",function(){e=0})),CKEDITOR.env.ie&&!h)&&(c.attachListener(c,"mousedown",function(t){2==t.data.$.button&&((t=g.document.getSelection())&&t.getType()!=CKEDITOR.SELECTION_NONE||(r=g.window.getScrollPosition()))}),c.attachListener(c,"mouseup",function(t){2==t.data.$.button&&r&&(g.document.$.documentElement.scrollLeft=r.x,g.document.$.documentElement.scrollTop=r.y),r=null}),"BackCompat"!=a.$.compatMode)){var p,f;if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)d.on("mousedown",function(t){function e(t){if(t=t.data.$,p){var e=u.$.createTextRange();try{e.moveToPoint(t.clientX,t.clientY)}catch(t){}p.setEndPoint(f.compareEndPoints("StartToStart",e)<0?"EndToEnd":"StartToStart",e),p.select()}}function i(){d.removeListener("mousemove",e),l.removeListener("mouseup",i),d.removeListener("mouseup",i),p.select()}if((t=t.data).getTarget().is("html")&&t.$.y<d.$.clientHeight&&t.$.x<d.$.clientWidth){p=u.$.createTextRange();try{p.moveToPoint(t.$.clientX,t.$.clientY)}catch(t){}f=p.duplicate(),d.on("mousemove",e),l.on("mouseup",i),d.on("mouseup",i)}});7<CKEDITOR.env.version&&CKEDITOR.env.version<11&&d.on("mousedown",function(t){t.data.getTarget().is("html")&&(l.on("mouseup",i),d.on("mouseup",i))})}(c.attachListener(c,"selectionchange",m,g),c.attachListener(c,"keyup",v,g),c.attachListener(c,"keydown",function(t){var e=this.getSelection(1);n(e)&&(e.selectElement(n(e)),t.data.preventDefault())},g),c.attachListener(c,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){g.forceNextSelectionCheck(),g.selectionChange(1)}),h&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko))?(c.attachListener(c,"mousedown",function(){s=1}),c.attachListener(a.getDocumentElement(),"mouseup",function(){s&&v.call(g),s=0})):c.attachListener(CKEDITOR.env.ie?c:a.getDocumentElement(),"mouseup",v,g);CKEDITOR.env.webkit&&c.attachListener(a,"keydown",function(t){switch(t.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:c.hasFocus&&y(c)}},null,null,-1),c.attachListener(c,"keydown",function(o){var r={37:1,39:1,8:1,46:1};return function(t){var e=t.data.getKeystroke();if(r[e]){var i=o.getSelection().getRanges(),n=i[0];1==i.length&&n.collapsed&&(e=n[e<38?"getPreviousEditableNode":"getNextEditableNode"]())&&e.type==CKEDITOR.NODE_ELEMENT&&"false"==e.getAttribute("contenteditable")&&(o.getSelection().fake(e),t.data.preventDefault(),t.cancel())}}}(g),null,null,-1)}),g.on("setData",function(){g.unlockSelection(),CKEDITOR.env.webkit&&e()}),g.on("contentDomUnload",function(){g.unlockSelection()}),CKEDITOR.env.ie9Compat&&g.on("beforeDestroy",e,null,null,9),g.on("dataReady",function(){delete g._.fakeSelection,delete g._.hiddenSelectionContainer,g.selectionChange(1)}),g.on("loadSnapshot",function(){var t=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),e=g.editable().getLast(t);e&&e.hasAttribute("data-cke-hidden-sel")&&(e.remove(),CKEDITOR.env.gecko&&(t=g.editable().getFirst(t))&&t.is("br")&&t.getAttribute("_moz_editor_bogus_node")&&t.remove())},null,null,100),g.on("key",function(t){if("wysiwyg"==g.mode){var e=g.getSelection();if(e.isFake){var i=E[t.data.keyCode];if(i)return i({editor:g,selected:e.getSelectedElement(),selection:e,keyEvent:t})}}})}),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",function(t){var i=t.editor;i.on("selectionChange",function(){var t=i.editable(),e=t.getCustomData("cke-fillingChar");e&&(e.getCustomData("ready")?(y(t),t.editor.fire("selectionCheck")):e.setCustomData("ready",1))},null,null,-1),i.on("beforeSetMode",function(){y(i.editable())},null,null,-1),i.on("getSnapshot",function(t){t.data&&(t.data=a(t.data))},i,null,20),i.on("toDataFormat",function(t){t.data.dataValue=a(t.data.dataValue)},null,null,0)}),CKEDITOR.editor.prototype.selectionChange=function(t){(t?m:v).call(this)},CKEDITOR.editor.prototype.getSelection=function(t){return!this._.savedSelection&&!this._.fakeSelection||t?(t=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(t):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(t){return(t=t||this.getSelection(1)).getType()!=CKEDITOR.SELECTION_NONE&&(t.isLocked||t.lock(),this._.savedSelection=t,!0)},CKEDITOR.editor.prototype.unlockSelection=function(t){var e=this._.savedSelection;return!!e&&(e.unlock(t),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var t=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return t.selectRanges([this]),t},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(t){if(t instanceof CKEDITOR.dom.selection){var e=t;t=t.root}var i,n,o=t instanceof CKEDITOR.dom.element;if(this.rev=e?e.rev:s++,this.document=t instanceof CKEDITOR.dom.document?t:t.getDocument(),this.root=o?t:this.document.getBody(),this.isLocked=0,this._={cache:{}},e)return CKEDITOR.tools.extend(this._.cache,e._.cache),this.isFake=e.isFake,this.isLocked=e.isLocked,this;if(t=this.getNative())if(t.getRangeAt)i=(n=t.rangeCount&&t.getRangeAt(0))&&new CKEDITOR.dom.node(n.commonAncestorContainer);else{try{n=t.createRange()}catch(t){}i=n&&CKEDITOR.dom.element.get(n.item&&n.item(0)||n.parentElement())}return i&&(i.type==CKEDITOR.NODE_ELEMENT||i.type==CKEDITOR.NODE_TEXT)&&(this.root.equals(i)||this.root.contains(i))||(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var T,x={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};function D(t){return new CKEDITOR.dom.node(t).getIndex()}function I(t,e){(t=t.duplicate()).collapse(e);var i=t.parentElement();if(!i.hasChildNodes())return{container:i,offset:0};for(var n,o,r,s,a=i.children,l=t.duplicate(),c=0,u=a.length-1,d=-1;c<=u;)if(n=a[d=Math.floor((c+u)/2)],l.moveToElementText(n),0<(r=l.compareEndPoints("StartToStart",t)))u=d-1;else{if(!(r<0))return{container:i,offset:D(n)};c=d+1}if(-1==d||d==a.length-1&&r<0){if(l.moveToElementText(i),l.setEndPoint("StartToStart",t),l=l.text.replace(/(\r\n|\r)/g,"\n").length,a=i.childNodes,!l)return(n=a[a.length-1]).nodeType!=CKEDITOR.NODE_TEXT?{container:i,offset:a.length}:{container:n,offset:n.nodeValue.length};for(i=a.length;0<l&&0<i;)(o=a[--i]).nodeType==CKEDITOR.NODE_TEXT&&(l-=(s=o).nodeValue.length);return{container:s,offset:-l}}if(l.collapse(0<r),l.setEndPoint(0<r?"StartToStart":"EndToStart",t),!(l=l.text.replace(/(\r\n|\r)/g,"\n").length))return{container:i,offset:D(n)+(0<r?0:1)};for(;0<l;)try{(o=n[0<r?"previousSibling":"nextSibling"]).nodeType==CKEDITOR.NODE_TEXT&&(l-=o.nodeValue.length,s=o),n=o}catch(t){return{container:i,offset:D(n)}}return{container:s,offset:0<r?-l:s.nodeValue.length+l}}CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:a,_createFillingCharSequenceNode:g,FILLING_CHAR_SEQUENCE:l}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=_?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:_?function(){var t=this._.cache;if(t.type)return t.type;var e=CKEDITOR.SELECTION_NONE;try{var i=this.getNative(),n=i.type;"Text"==n&&(e=CKEDITOR.SELECTION_TEXT),"Control"==n&&(e=CKEDITOR.SELECTION_ELEMENT),i.createRange().parentElement()&&(e=CKEDITOR.SELECTION_TEXT)}catch(t){}return t.type=e}:function(){var t=this._.cache;if(t.type)return t.type;var e=CKEDITOR.SELECTION_TEXT;if((i=this.getNative())&&i.rangeCount){if(1==i.rangeCount){var i,n=(i=i.getRangeAt(0)).startContainer;n==i.endContainer&&1==n.nodeType&&1==i.endOffset-i.startOffset&&x[n.childNodes[i.startOffset].nodeName.toLowerCase()]&&(e=CKEDITOR.SELECTION_ELEMENT)}}else e=CKEDITOR.SELECTION_NONE;return t.type=e},getRanges:(T=_?function(){var t=(s=this.getNative())&&s.createRange(),e=this.getType();if(!s)return[];if(e==CKEDITOR.SELECTION_TEXT)return s=new CKEDITOR.dom.range(this.root),e=I(t,!0),s.setStart(new CKEDITOR.dom.node(e.container),e.offset),e=I(t),s.setEnd(new CKEDITOR.dom.node(e.container),e.offset),s.endContainer.getPosition(s.startContainer)&CKEDITOR.POSITION_PRECEDING&&s.endOffset<=s.startContainer.getIndex()&&s.collapse(),[s];if(e!=CKEDITOR.SELECTION_ELEMENT)return[];e=[];for(var i=0;i<t.length;i++){for(var n=t.item(i),o=n.parentNode,r=0,s=new CKEDITOR.dom.range(this.root);r<o.childNodes.length&&o.childNodes[r]!=n;r++);s.setStart(new CKEDITOR.dom.node(o),r),s.setEnd(new CKEDITOR.dom.node(o),r+1),e.push(s)}return e}:function(){var t,e=[],i=this.getNative();if(!i)return e;for(var n=0;n<i.rangeCount;n++){var o=i.getRangeAt(n);(t=new CKEDITOR.dom.range(this.root)).setStart(new CKEDITOR.dom.node(o.startContainer),o.startOffset),t.setEnd(new CKEDITOR.dom.node(o.endContainer),o.endOffset),e.push(t)}return e},function(t){var e=this._.cache,i=e.ranges;return i||(e.ranges=i=new CKEDITOR.dom.rangeList(T.call(this))),t?function(i){for(var n=0;n<i.length;n++){var o=i[n];if(o.getCommonAncestor().isReadOnly()&&i.splice(n,1),!o.collapsed){if(o.startContainer.isReadOnly())for(var t,e=o.startContainer;e&&!((t=e.type==CKEDITOR.NODE_ELEMENT)&&e.is("body")||!e.isReadOnly());)t&&"false"==e.getAttribute("contentEditable")&&o.setStartAfter(e),e=e.getParent();e=o.startContainer,t=o.endContainer;var r=o.startOffset,s=o.endOffset,a=o.clone();e&&e.type==CKEDITOR.NODE_TEXT&&(r>=e.getLength()?a.setStartAfter(e):a.setStartBefore(e)),t&&t.type==CKEDITOR.NODE_TEXT&&(s?a.setEndAfter(t):a.setEndBefore(t)),(e=new CKEDITOR.dom.walker(a)).evaluator=function(t){if(t.type==CKEDITOR.NODE_ELEMENT&&t.isReadOnly()){var e=o.clone();return o.setEndBefore(t),o.collapsed&&i.splice(n--,1),t.getPosition(a.endContainer)&CKEDITOR.POSITION_CONTAINS||(e.setStartAfter(t),e.collapsed||i.splice(n+1,0,e)),!0}return!1},e.next()}}return i}(new CKEDITOR.dom.rangeList(i.slice())):i}),getStartElement:function(){var t,e=this._.cache;if(void 0!==e.startElement)return e.startElement;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var i=this.getRanges()[0];if(i){if(i.collapsed)(t=i.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent());else{for(i.optimize();t=i.startContainer,i.startOffset==(t.getChildCount?t.getChildCount():t.getLength())&&!t.isBlockBoundary();)i.setStartAfter(t);if((t=i.startContainer).type!=CKEDITOR.NODE_ELEMENT)return t.getParent();if((t=t.getChild(i.startOffset))&&t.type==CKEDITOR.NODE_ELEMENT)for(i=t.getFirst();i&&i.type==CKEDITOR.NODE_ELEMENT;)i=(t=i).getFirst();else t=i.startContainer}t=t.$}}return e.startElement=t?new CKEDITOR.dom.element(t):null},getSelectedElement:function(){var t=this._.cache;if(void 0!==t.selectedElement)return t.selectedElement;var o=this,e=CKEDITOR.tools.tryThese(function(){return o.getNative().createRange().item(0)},function(){for(var t,e,i=o.getRanges()[0].clone(),n=2;n&&!((t=i.getEnclosedNode())&&t.type==CKEDITOR.NODE_ELEMENT&&x[t.getName()]&&(e=t));n--)i.shrink(CKEDITOR.SHRINK_ELEMENT);return e&&e.$});return t.selectedElement=e?new CKEDITOR.dom.element(e):null},getSelectedText:function(){var t=this._.cache;if(void 0!==t.selectedText)return t.selectedText;var e=this.getNative();e=_?"Control"==e.type?"":e.createRange().text:e.toString();return t.selectedText=e},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(t){if(this.isLocked){if(t)var e=this.getSelectedElement(),i=this.getRanges(),n=this.isFake;this.isLocked=0,this.reset(),(t=t&&(e||i[0]&&i[0].getCommonAncestor()))&&t.getAscendant("body",1)&&(h(i)?p.call(this,i):n?this.fake(e):e?this.selectElement(e):this.selectRanges(i))}},reset:function(){this._.cache={},this.isFake=0;var t=this.root.editor;if(t&&t._.fakeSelection)if(this.rev==t._.fakeSelection.rev){delete t._.fakeSelection;var e=t._.hiddenSelectionContainer;if(e){var i=t.checkDirty();t.fire("lockSnapshot"),e.remove(),t.fire("unlockSnapshot"),i||t.resetDirty()}delete t._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=s++},selectElement:function(t){var e=new CKEDITOR.dom.range(this.root);e.setStartBefore(t),e.setEndAfter(t),this.selectRanges([e])},selectRanges:function(t){var e=this.root.editor,i=e&&e._.hiddenSelectionContainer;if(this.reset(),i){i=this.root;for(var n,o=0;o<t.length;++o)(n=t[o]).endContainer.equals(i)&&(n.endOffset=Math.min(n.endOffset,i.getChildCount()))}if(t.length)if(this.isLocked){var r=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(t),this.lock(),r&&!r.equals(this.root)&&r.focus()}else{var s,a,l;if(1==t.length&&!(l=t[0]).collapsed&&(s=l.getEnclosedNode())&&s.type==CKEDITOR.NODE_ELEMENT&&((l=l.clone()).shrink(CKEDITOR.SHRINK_ELEMENT,!0),(a=l.getEnclosedNode())&&a.type==CKEDITOR.NODE_ELEMENT&&(s=a),"false"==s.getAttribute("contenteditable"))||(s=void 0),s)this.fake(s);else if(e&&e.plugins.tableselection&&CKEDITOR.plugins.tableselection.isSupportedEnvironment&&h(t)&&!b)p.call(this,t);else{if(_){var c,u,d;if(a=CKEDITOR.dom.walker.whitespaces(!0),s=/\ufeff|\u00a0/,l={table:1,tbody:1,tr:1},1<t.length&&(e=t[t.length-1],t[0].setEnd(e.endContainer,e.endOffset)),t=(e=t[0]).collapsed,(i=e.getEnclosedNode())&&i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in x&&(!i.is("a")||!i.getText()))try{return(d=i.$.createControlRange()).addElement(i.$),void d.select()}catch(t){}(e.startContainer.type==CKEDITOR.NODE_ELEMENT&&e.startContainer.getName()in l||e.endContainer.type==CKEDITOR.NODE_ELEMENT&&e.endContainer.getName()in l)&&(e.shrink(CKEDITOR.NODE_ELEMENT,!0),t=e.collapsed),l=(d=e.createBookmark()).startNode,t||(r=d.endNode),(d=e.document.$.body.createTextRange()).moveToElementText(l.$),d.moveStart("character",1),r?((s=e.document.$.body.createTextRange()).moveToElementText(r.$),d.setEndPoint("EndToEnd",s),d.moveEnd("character",-1)):(c=l.getNext(a),u=l.hasAscendant("pre"),c=!(c&&c.getText&&c.getText().match(s))&&(u||!l.hasPrevious()||l.getPrevious().is&&l.getPrevious().is("br")),(u=e.document.createElement("span")).setHtml("&#65279;"),u.insertBefore(l),c&&e.document.createText("\ufeff").insertBefore(l)),e.setStartBefore(l),l.remove(),t?(c?(d.moveStart("character",-1),d.select(),e.document.$.selection.clear()):d.select(),e.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START),u.remove()):(e.setEndBefore(r),r.remove(),d.select())}else{if(!(r=this.getNative()))return;for(this.removeAllRanges(),d=0;d<t.length;d++)if(d<t.length-1&&(c=t[d],u=t[d+1],(s=c.clone()).setStart(c.endContainer,c.endOffset),s.setEnd(u.startContainer,u.startOffset),!s.collapsed&&(s.shrink(CKEDITOR.NODE_ELEMENT,!0),e=s.getCommonAncestor(),s=s.getEnclosedNode(),e.isReadOnly()||s&&s.isReadOnly())))u.setStart(c.startContainer,c.startOffset),t.splice(d--,1);else{e=t[d],u=this.document.$.createRange(),e.collapsed&&CKEDITOR.env.webkit&&f(e)&&(s=g(this.root),e.insertNode(s),(c=s.getNext())&&!s.getPrevious()&&c.type==CKEDITOR.NODE_ELEMENT&&"br"==c.getName()?(y(this.root),e.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START)):e.moveToPosition(s,CKEDITOR.POSITION_AFTER_END)),u.setStart(e.startContainer.$,e.startOffset);try{u.setEnd(e.endContainer.$,e.endOffset)}catch(t){if(!(0<=t.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw t;e.collapse(1),u.setEnd(e.endContainer.$,e.endOffset)}r.addRange(u)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(t,e){var i=this.root.editor;void 0===e&&t.hasAttribute("aria-label")&&(e=t.getAttribute("aria-label")),this.reset(),function(t,e){var i=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&CKEDITOR.env.version<14?"display:none":"position:fixed;top:0;left:-1000px")+'">'+(e||"&nbsp;")+"</div>",t.document);t.fire("lockSnapshot"),t.editable().append(i);var n=t.getSelection(1),o=t.createRange(),r=n.root.on("selectionchange",function(t){t.cancel()},null,null,0);o.setStartAt(i,CKEDITOR.POSITION_AFTER_START),o.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),n.selectRanges([o]),r.removeListener(),t.fire("unlockSnapshot"),t._.hiddenSelectionContainer=i}(i,e);var n=this._.cache,o=new CKEDITOR.dom.range(this.root);o.setStartBefore(t),o.setEndAfter(t),n.ranges=new CKEDITOR.dom.rangeList(o),n.selectedElement=n.startElement=t,n.type=CKEDITOR.SELECTION_ELEMENT,n.selectedText=n.nativeSel=null,this.isFake=1,this.rev=s++,(i._.fakeSelection=this).root.fire("selectionchange")},isHidden:function(){var t=this.getCommonAncestor();return t&&t.type==CKEDITOR.NODE_TEXT&&(t=t.getParent()),!(!t||!t.data("cke-hidden-sel"))},isInTable:function(t){return h(this.getRanges(),t)},isCollapsed:function(){var t=this.getRanges();return 1===t.length&&t[0].collapsed},createBookmarks:function(t){return t=this.getRanges().createBookmarks(t),this.isFake&&(t.isFake=1),t},createBookmarks2:function(t){return t=this.getRanges().createBookmarks2(t),this.isFake&&(t.isFake=1),t},selectBookmarks:function(t){for(var e,i=[],n=0;n<t.length;n++){var o=new CKEDITOR.dom.range(this.root);o.moveToBookmark(t[n]),i.push(o)}return t.isFake&&((e=h(i)?i[0]._getTableElement():i[0].getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),t.isFake=0)),t.isFake&&!h(i)?this.fake(e):this.selectRanges(i),this},getCommonAncestor:function(){var t=this.getRanges();return t.length?t[0].startContainer.getCommonAncestor(t[t.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var t=this.getNative();try{t&&t[_?"empty":"removeAllRanges"]()}catch(t){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function D(t,e){for(var i,n;(t=t.getParent())&&!t.equals(e);)if(t.getAttribute("data-nostyle"))i=t;else if(!n){var o=t.getAttribute("contentEditable");"false"==o?i=t:"true"==o&&(n=1)}return i}function I(t,e,i,n){return(t.getPosition(e)|n)==n&&(!i.childRule||i.childRule(t))}function O(t){var e=t.document;if(t.collapsed)e=S(this,e),t.insertNode(e),t.moveToPosition(e,CKEDITOR.POSITION_BEFORE_END);else{var i,n=this.element,o=this._.definition,r=(h=o.ignoreReadonly)||o.includeReadonly;null==r&&(r=t.root.getCustomData("cke_includeReadonly"));var s=CKEDITOR.dtd[n];s||(i=!0,s=CKEDITOR.dtd.span),t.enlarge(CKEDITOR.ENLARGE_INLINE,1),t.trim();var a,l=t.createBookmark(),c=l.startNode,u=l.endNode,d=c;if(!h){var h=D(c,p=t.getCommonAncestor()),p=D(u,p);h&&(d=h.getNextSourceNode(!0)),p&&(u=p)}for(d.getPosition(u)==CKEDITOR.POSITION_FOLLOWING&&(d=0);d;){if(h=!1,d.equals(u))h=!(d=null);else{p=(_=d.type==CKEDITOR.NODE_ELEMENT?d.getName():null)&&"false"==d.getAttribute("contentEditable");var f=_&&d.getAttribute("data-nostyle");if(_&&d.data("cke-bookmark")){d=d.getNextSourceNode(!0);continue}if(p&&r&&CKEDITOR.dtd.$block[_])for(var g=void 0,m=0,v=(x=(T=R(v=d)).length)&&new CKEDITOR.dom.range(v.getDocument());m<x;++m){g=T[m];var y=CKEDITOR.filter.instances[g.data("cke-filter")];y&&!y.check(this)||(v.selectNodeContents(g),O.call(this,v))}if(T=_?!s[_]||f?0:p&&!r?0:I(d,u,o,M):1){if(T=o,x=n,m=i,!(g=d.getParent())||!(g.getDtd()||CKEDITOR.dtd.span)[x]&&!m||T.parentRule&&!T.parentRule(g))h=!0;else if(a||_&&CKEDITOR.dtd.$removeEmpty[_]&&(d.getPosition(u)|M)!=M||(a=t.clone()).setStartBefore(d),(_=d.type)==CKEDITOR.NODE_TEXT||p||_==CKEDITOR.NODE_ELEMENT&&!d.getChildCount()){for(var b,_=d;(h=!_.getNext(A))&&s[(b=_.getParent()).getName()]&&I(b,c,o,N);)_=b;a.setEndAfter(_)}}else h=!0;d=d.getNextSourceNode(f||p)}if(h&&a&&!a.collapsed){p=(h=S(this,e)).hasAttributes(),f=a.getCommonAncestor(),_={};for(var E,w,C,T={},x=(g={},{});h&&f;){if(f.getName()==n){for(E in o.attributes)!x[E]&&(C=f.getAttribute(w))&&(h.getAttribute(E)==C?T[E]=1:x[E]=1);for(w in o.styles)!g[w]&&(C=f.getStyle(w))&&(h.getStyle(w)==C?_[w]=1:g[w]=1)}f=f.getParent()}for(E in T)h.removeAttribute(E);for(w in _)h.removeStyle(w);p&&!h.hasAttributes()&&(h=null),h?(a.extractContents().appendTo(h),a.insertNode(h),k.call(this,h),h.mergeSiblings(),CKEDITOR.env.ie||h.$.normalize()):(h=new CKEDITOR.dom.element("span"),a.extractContents().appendTo(h),a.insertNode(h),k.call(this,h),h.remove(!0)),a=null}}t.moveToBookmark(l),t.shrink(CKEDITOR.SHRINK_TEXT),t.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function e(t){function e(){for(var t=new CKEDITOR.dom.elementPath(s.getParent()),e=new CKEDITOR.dom.elementPath(u.getParent()),i=null,n=null,o=0;o<t.elements.length;o++){var r=t.elements[o];if(r==t.block||r==t.blockLimit)break;d.checkElementRemovable(r,!0)&&(i=r)}for(o=0;o<e.elements.length&&((r=e.elements[o])!=e.block&&r!=e.blockLimit);o++)d.checkElementRemovable(r,!0)&&(n=r);n&&u.breakParent(n),i&&s.breakParent(i)}t.enlarge(CKEDITOR.ENLARGE_INLINE,1);var i=t.createBookmark(),s=i.startNode,n=this._.definition.alwaysRemoveElement;if(t.collapsed){for(var o,r,a=new CKEDITOR.dom.elementPath(s.getParent(),t.root),l=0;l<a.elements.length&&(r=a.elements[l])&&r!=a.block&&r!=a.blockLimit;l++)if(this.checkElementRemovable(r)){var c;!n&&t.collapsed&&(t.checkBoundaryOfElement(r,CKEDITOR.END)||(c=t.checkBoundaryOfElement(r,CKEDITOR.START)))?(o=r).match=c?"start":"end":(r.mergeSiblings(),r.is(this.element)?h.call(this,r):p(r,f(this)[r.getName()]))}if(o){for(n=s,l=0;!(r=a.elements[l]).equals(o);l++)r.match||((r=r.clone()).append(n),n=r);n["start"==o.match?"insertBefore":"insertAfter"](o)}}else{var u=i.endNode,d=this;for(e(),a=s;!a.equals(u);)o=a.getNextSourceNode(),a.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(a)&&(a.getName()==this.element?h.call(this,a):p(a,f(this)[a.getName()]),o.type==CKEDITOR.NODE_ELEMENT&&o.contains(s)&&(e(),o=s.getNext())),a=o}t.moveToBookmark(i),t.shrink(CKEDITOR.NODE_ELEMENT,!0)}function R(t){var e=[];return t.forEach(function(t){if("true"==t.getAttribute("contenteditable"))return e.push(t),!1},CKEDITOR.NODE_ELEMENT,!0),e}function i(t){var e=t.getEnclosedNode()||t.getCommonAncestor(!1,!0);(t=new CKEDITOR.dom.elementPath(e,t.root).contains(this.element,1))&&!t.isReadOnly()&&a(t,this)}function n(t){var e=t.getCommonAncestor(!0,!0);if(t=new CKEDITOR.dom.elementPath(e,t.root).contains(this.element,1)){var i=(e=this._.definition).attributes;if(i)for(var n in i)t.removeAttribute(n,i[n]);if(e.styles)for(var o in e.styles)e.styles.hasOwnProperty(o)&&t.removeStyle(o)}}function o(t){var e=t.createBookmark(!0),i=t.createIterator();i.enforceRealBlocks=!0,this._.enterMode&&(i.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var n,o=t.document;n=i.getNextParagraph();)n.isReadOnly()||i.activeFilter&&!i.activeFilter.check(this)||s(n,S(this,o,n));t.moveToBookmark(e)}function r(t){var e,i,n=t.createBookmark(1),o=t.createIterator();for(o.enforceRealBlocks=!0,o.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;e=o.getNextParagraph();)this.checkElementRemovable(e)&&(e.is("pre")?((i=this._.enterMode==CKEDITOR.ENTER_BR?null:t.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&e.copyAttributes(i),s(e,i)):h.call(this,e));t.moveToBookmark(n)}function s(t,e){(i=!e)&&(e=t.getDocument().createElement("div"),t.copyAttributes(e));var i,n,o=e&&e.is("pre"),r=t.is("pre"),s=!o&&r;if(o&&!r){if(r=e,(s=t.getBogus())&&s.remove(),s=(s=(s=(s=l(s=t.getHtml(),/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")).replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1")).replace(/([ \t\n\r]+|&nbsp;)/g," ")).replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var a=t.getDocument().createElement("div");a.append(r),r.$.outerHTML="<pre>"+s+"</pre>",r.copyAttributes(a.getFirst()),r=a.getFirst().remove()}else r.setHtml(s);e=r}else s?e=function(t,e){var i;1<t.length&&(i=new CKEDITOR.dom.documentFragment(e.getDocument()));for(var n=0;n<t.length;n++){var o=(o=(o=l(o=l(o=l(o=(o=t[n]).replace(/(\r\n|\r)/g,"\n"),/^[ \t]*\n/,""),/\n$/,""),/^[ \t]+|[ \t]+$/g,function(t,e){return 1==t.length?"&nbsp;":e?" "+CKEDITOR.tools.repeat("&nbsp;",t.length-1):CKEDITOR.tools.repeat("&nbsp;",t.length-1)+" "})).replace(/\n/g,"<br>")).replace(/[ \t]{2,}/g,function(t){return CKEDITOR.tools.repeat("&nbsp;",t.length-1)+" "});if(i){var r=e.clone();r.setHtml(o),i.append(r)}else e.setHtml(o)}return i||e}(i?[t.getHtml()]:function(t){var i=[];return l(t.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(t,e,i){return e+"</pre>"+i+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(t,e){i.push(e)}),i}(t),e):t.moveChildren(e);(e.replace(t),o)?(n=(i=e).getPrevious(E))&&n.type==CKEDITOR.NODE_ELEMENT&&n.is("pre")&&(o=l(n.getHtml(),/\n$/,"")+"\n\n"+l(i.getHtml(),/^\n/,""),CKEDITOR.env.ie?i.$.outerHTML="<pre>"+o+"</pre>":i.setHtml(o),n.remove()):i&&c(e)}function l(t,e,i){var n="",o="";return t=t.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(t,e,i){return e&&(n=e),i&&(o=i),""}),n+t.replace(e,i)+o}function h(t,e){var i,n=(o=this._.definition).attributes,o=o.styles,r=f(this)[t.getName()],s=CKEDITOR.tools.isEmpty(n)&&CKEDITOR.tools.isEmpty(o);for(i in n)("class"==i||this._.definition.fullMatch)&&t.getAttribute(i)!=d(i,n[i])||e&&"data-"==i.slice(0,5)||(s=t.hasAttribute(i),t.removeAttribute(i));for(var a in o)this._.definition.fullMatch&&t.getStyle(a)!=d(a,o[a],!0)||(s=s||!!t.getStyle(a),t.removeStyle(a));p(t,r,v[t.getName()]),s&&(this._.definition.alwaysRemoveElement?c(t,1):!CKEDITOR.dtd.$block[t.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!t.hasAttributes()?c(t):t.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function k(t){for(var e,i=f(this),n=t.getElementsByTag(this.element),o=n.count();0<=--o;)(e=n.getItem(o)).isReadOnly()||h.call(this,e,!0);for(var r in i)if(r!=this.element)for(o=(n=t.getElementsByTag(r)).count()-1;0<=o;o--)(e=n.getItem(o)).isReadOnly()||p(e,i[r])}function p(t,e,i){if(e=e&&e.attributes)for(var n=0;n<e.length;n++){var o,r=e[n][0];if(o=t.getAttribute(r)){var s=e[n][1];(null===s||s.test&&s.test(o)||"string"==typeof s&&o==s)&&t.removeAttribute(r)}}i||c(t)}function c(t,e){if(!t.hasAttributes()||e)if(CKEDITOR.dtd.$block[t.getName()]){var i=t.getPrevious(E),n=t.getNext(E);!i||i.type!=CKEDITOR.NODE_TEXT&&i.isBlockBoundary({br:1})||t.append("br",1),!n||n.type!=CKEDITOR.NODE_TEXT&&n.isBlockBoundary({br:1})||t.append("br"),t.remove(!0)}else i=t.getFirst(),n=t.getLast(),t.remove(!0),i&&(i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings(),n&&!i.equals(n)&&n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings())}function S(t,e,i){var n;return"*"==(n=t.element)&&(n="span"),n=new CKEDITOR.dom.element(n,e),i&&i.copyAttributes(n),n=a(n,t),e.getCustomData("doc_processing_style")&&n.hasAttribute("id")?n.removeAttribute("id"):e.setCustomData("doc_processing_style",1),n}function a(t,e){var i=(n=e._.definition).attributes,n=CKEDITOR.style.getStyleText(n);if(i)for(var o in i)t.setAttribute(o,i[o]);return n&&t.setAttribute("style",n),t}function u(t,i){for(var e in t)t[e]=t[e].replace(_,function(t,e){return i[e]})}function f(t){if(t._.overrides)return t._.overrides;var e=t._.overrides={},i=t._.definition.overrides;if(i){CKEDITOR.tools.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++){var o,r;if("string"==typeof(a=i[n])?o=a.toLowerCase():(o=a.element?a.element.toLowerCase():t.element,r=a.attributes),a=e[o]||(e[o]={}),r){var s,a=a.attributes=a.attributes||[];for(s in r)a.push([s.toLowerCase(),r[s]])}}}return e}function d(t,e,i){var n=new CKEDITOR.dom.element("span");return n[i?"setStyle":"setAttribute"](t,e),n[i?"getStyle":"getAttribute"](t)}function g(t,e){function i(t,e){return"font-family"==e.toLowerCase()?t.replace(/["']/g,""):t}for(var n in"string"==typeof t&&(t=CKEDITOR.tools.parseCssText(t)),"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e,!0)),t)if(!(n in e)||i(e[n],n)!=i(t[n],n)&&"inherit"!=t[n]&&"inherit"!=e[n])return!1;return!0}function m(t,e,i){var n,o,r=t.document,s=t.getRanges();if(e=e?this.removeFromRange:this.applyToRange,t.isFake&&t.isInTable())for(n=[],o=0;o<s.length;o++)n.push(s[o].clone());for(var a=s.createIterator();o=a.getNextRange();)e.call(this,o,i);t.selectRanges(n||s),r.removeCustomData("doc_processing_style")}var v={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},y={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},b=/\s*(?:;\s*|$)/,_=/#\((.+?)\)/g,A=CKEDITOR.dom.walker.bookmark(0,1),E=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(t,e){if("string"==typeof t.type)return new CKEDITOR.style.customHandlers[t.type](t);var i=t.attributes;i&&i.style&&(t.styles=CKEDITOR.tools.extend({},t.styles,CKEDITOR.tools.parseCssText(i.style)),delete i.style),e&&(u((t=CKEDITOR.tools.clone(t)).attributes,e),u(t.styles,e)),i=this.element=t.element?"string"==typeof t.element?t.element.toLowerCase():t.element:"*",this.type=t.type||(v[i]?CKEDITOR.STYLE_BLOCK:y[i]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:t}},CKEDITOR.style.prototype={apply:function(t){if(t instanceof CKEDITOR.dom.document)return m.call(this,t.getSelection());if(this.checkApplicable(t.elementPath(),t)){var e=this._.enterMode;e||(this._.enterMode=t.activeEnterMode),m.call(this,t.getSelection(),0,t),this._.enterMode=e}},remove:function(t){if(t instanceof CKEDITOR.dom.document)return m.call(this,t.getSelection(),1);if(this.checkApplicable(t.elementPath(),t)){var e=this._.enterMode;e||(this._.enterMode=t.activeEnterMode),m.call(this,t.getSelection(),1,t),this._.enterMode=e}},applyToRange:function(t){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?O:this.type==CKEDITOR.STYLE_BLOCK?o:this.type==CKEDITOR.STYLE_OBJECT?i:null,this.applyToRange(t)},removeFromRange:function(t){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?e:this.type==CKEDITOR.STYLE_BLOCK?r:this.type==CKEDITOR.STYLE_OBJECT?n:null,this.removeFromRange(t)},applyToObject:function(t){a(t,this)},checkActive:function(t,e){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(t.block||t.blockLimit,!0,e);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var i,n=t.elements,o=0;o<n.length;o++)if(i=n[o],this.type!=CKEDITOR.STYLE_INLINE||i!=t.block&&i!=t.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var r=i.getName();if(!("string"==typeof this.element?r==this.element:r in this.element))continue}if(this.checkElementRemovable(i,!0,e))return!0}}return!1},checkApplicable:function(t,e,i){if(e&&e instanceof CKEDITOR.filter&&(i=e),i&&!i.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!t.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!t.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(t,e){var i=this._.definition;if(!t||!i.ignoreReadonly&&t.isReadOnly())return!1;var n=t.getName();if("string"==typeof this.element?n==this.element:n in this.element){if(!e&&!t.hasAttributes())return!0;if(n=i._AC)i=n;else{n={};var o=0,r=i.attributes;if(r)for(var s in r)o++,n[s]=r[s];(s=CKEDITOR.style.getStyleText(i))&&(n.style||o++,n.style=s),n._length=o,i=i._AC=n}if(!i._length)return!0;for(var a in i)if("_length"!=a)if(n=t.getAttribute(a)||"","style"==a?g(i[a],n):i[a]==n){if(!e)return!0}else if(e)return!1;if(e)return!0}return!1},checkElementRemovable:function(t,e,i){if(this.checkElementMatch(t,e,i))return!0;if(e=f(this)[t.getName()]){var n;if(!(e=e.attributes))return!0;for(i=0;i<e.length;i++)if(n=e[i][0],n=t.getAttribute(n)){var o=e[i][1];if(null===o)return!0;if("string"==typeof o){if(n==o)return!0}else if(o.test(n))return!0}}return!1},buildPreview:function(t){var e=this._.definition,i=[],n=e.element;"bdo"==n&&(n="span");i=["<",n];var o=e.attributes;if(o)for(var r in o)i.push(" ",r,'="',o[r],'"');return(o=CKEDITOR.style.getStyleText(e))&&i.push(' style="',o,'"'),i.push(">",t||e.name,"</",n,">"),i.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(t){if(e=t._ST)return e;var e=t.styles,i=t.attributes&&t.attributes.style||"",n="";for(var o in i.length&&(i=i.replace(b,";")),e){var r=e[o],s=(o+":"+r).replace(b,";");"inherit"==r?n+=s:i+=s}return i.length&&(i=CKEDITOR.tools.normalizeCssText(i,!0)),t._ST=i+n},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(t){function e(t){this._={definition:t},this.setup&&this.setup(t)}return e.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},t,!0),this.customHandlers[t.type]=e};var M=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,N=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(t,e){this.requiredContent=this.allowedContent=this.style=t,CKEDITOR.tools.extend(this,e,!0)},CKEDITOR.styleCommand.prototype.exec=function(t){t.focus(),this.state==CKEDITOR.TRISTATE_OFF?t.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&t.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(t,e,i){CKEDITOR.stylesSet.addExternal(t,e,""),CKEDITOR.stylesSet.load(t,i)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(t,e){var o=this._.styleStateChangeCallbacks;o||(o=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(t){for(var e=0;e<o.length;e++){var i=o[e],n=i.style.checkActive(t.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;i.fn.call(this,n)}})),o.push({style:t,fn:e})},applyStyle:function(t){t.apply(this)},removeStyle:function(t){t.remove(this)},getStylesSet:function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var i=this;if(!1===(t=i.config.stylesCombo_stylesSet||i.config.stylesSet))e(null);else if(t instanceof Array)i._.stylesDefinitions=t,e(t);else{var t,n=(t=(t=t||"default").split(":"))[0];CKEDITOR.stylesSet.addExternal(n,t[1]?t.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(n,function(t){i._.stylesDefinitions=t[n],e(i._.stylesDefinitions)})}}}}),CKEDITOR.dom.comment=function(t,e){"string"==typeof t&&(t=(e?e.$:document).createComment(t)),CKEDITOR.dom.domObject.call(this,t)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}}),function(){var t,u={},d={};for(t in CKEDITOR.dtd.$blockLimit)t in CKEDITOR.dtd.$list||(u[t]=1);for(t in CKEDITOR.dtd.$block)t in CKEDITOR.dtd.$blockLimit||t in CKEDITOR.dtd.$empty||(d[t]=1);CKEDITOR.dom.elementPath=function(t,e){var i,n=null,o=null,r=[],s=t;e=e||t.getDocument().getBody(),s=s||e;do{if(s.type==CKEDITOR.NODE_ELEMENT){if(r.push(s),!this.lastElement&&((this.lastElement=s).is(CKEDITOR.dtd.$object)||"false"==s.getAttribute("contenteditable")))continue;if(s.equals(e))break;if(!o&&(i=s.getName(),"true"==s.getAttribute("contenteditable")?o=s:!n&&d[i]&&(n=s),u[i])){if(i=!n&&"div"==i){t:{for(var a=0,l=(i=s.getChildren()).count();a<l;a++){var c=i.getItem(a);if(c.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[c.getName()]){i=!0;break t}}i=!1}i=!i}i?n=s:o=s}}}while(s=s.getParent());o=o||e,this.block=n,this.blockLimit=o,this.root=e,this.elements=r}}(),CKEDITOR.dom.elementPath.prototype={compare:function(t){var e=this.elements;if(!(t=t&&t.elements)||e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!e[i].equals(t[i]))return!1;return!0},contains:function(e,t,i){var n,o=0;"string"==typeof e&&(n=function(t){return t.getName()==e}),e instanceof CKEDITOR.dom.element?n=function(t){return t.equals(e)}:CKEDITOR.tools.isArray(e)?n=function(t){return-1<CKEDITOR.tools.indexOf(e,t.getName())}:"function"==typeof e?n=e:"object"==typeof e&&(n=function(t){return t.getName()in e});var r=this.elements,s=r.length;for(t&&(i?o+=1:--s),i&&(r=Array.prototype.slice.call(r,0)).reverse();o<s;o++)if(n(r[o]))return r[o];return null},isContextFor:function(t){return!(t in CKEDITOR.dtd.$block)||!!(this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit).getDtd()[t]},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(t,e){"string"==typeof t&&(t=(e?e.$:document).createTextNode(t)),this.$=t},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(t){this.$.nodeValue=t},split:function(t){var e=this.$.parentNode,i=e.childNodes.length,n=this.getLength(),o=this.getDocument(),r=new CKEDITOR.dom.text(this.$.splitText(t),o);return e.childNodes.length==i&&(n<=t?(r=o.createText("")).insertAfter(this):((t=o.createText("")).insertAfter(r),t.remove())),r},substring:function(t,e){return"number"!=typeof e?this.$.nodeValue.substr(t):this.$.nodeValue.substring(t,e)}}),function(){function r(t,e,i){var n=t.serializable,o=e[i?"endContainer":"startContainer"],r=i?"endOffset":"startOffset",s=n?e.document.getById(t.startNode):t.startNode;return t=n?e.document.getById(t.endNode):t.endNode,o.equals(s.getPrevious())?(e.startOffset=e.startOffset-o.getLength()-t.getPrevious().getLength(),o=t.getNext()):o.equals(t.getPrevious())&&(e.startOffset-=o.getLength(),o=t.getNext()),o.equals(s.getParent())&&e[r]++,o.equals(t.getParent())&&e[r]++,e[i?"endContainer":"startContainer"]=o,e}CKEDITOR.dom.rangeList=function(t){return t instanceof CKEDITOR.dom.rangeList?t:(t?t instanceof CKEDITOR.dom.range&&(t=[t]):t=[],CKEDITOR.tools.extend(t,e))};var e={createIterator:function(){var r,s=this,a=CKEDITOR.dom.walker.bookmark(),l=[];return{getNextRange:function(t){var e=s[r=void 0===r?0:r+1];if(e&&1<s.length){if(!r)for(var i=s.length-1;0<=i;i--)l.unshift(s[i].createBookmark(!0));if(t)for(var n=0;s[r+n+1];){var o=e.document;for(t=0,i=o.getById(l[n].endNode),o=o.getById(l[n+1].startNode);;){if(i=i.getNextSourceNode(!1),o.equals(i))t=1;else if(a(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary())continue;break}if(!t)break;n++}for(e.moveToBookmark(l.shift());n--;)(i=s[++r]).moveToBookmark(l.shift()),e.setEnd(i.endContainer,i.endOffset)}return e}}},createBookmarks:function(t){for(var e,i=[],n=0;n<this.length;n++){i.push(e=this[n].createBookmark(t,!0));for(var o=n+1;o<this.length;o++)this[o]=r(e,this[o]),this[o]=r(e,this[o],!0)}return i},createBookmarks2:function(t){for(var e=[],i=0;i<this.length;i++)e.push(this[i].createBookmark2(t));return e},moveToBookmarks:function(t){for(var e=0;e<this.length;e++)this[e].moveToBookmark(t[e])}}}(),function(){function r(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function i(t){var e=CKEDITOR.skin["ua_"+t],i=CKEDITOR.env;if(e){e=e.split(",").sort(function(t,e){return e<t?-1:1});for(var n,o=0;o<e.length;o++)if(n=e[o],i.ie&&(n.replace(/^ie/,"")==i.version||i.quirks&&"iequirks"==n)&&(n="ie"),i[n]){t+="_"+e[o];break}}return CKEDITOR.getUrl(r()+t+".css")}function n(t,e){o[t]||(CKEDITOR.document.appendStyleSheet(i(t)),o[t]=1),e&&e()}function s(t){var e=t.getById(l);return e||((e=t.getHead().append("style")).setAttribute("id",l),e.setAttribute("type","text/css")),e}function a(t,e,i){var n,o,r;if(CKEDITOR.env.webkit)for(e=e.split("}").slice(0,-1),o=0;o<e.length;o++)e[o]=e[o].split("{");for(var s=0;s<t.length;s++)if(CKEDITOR.env.webkit)for(o=0;o<e.length;o++){for(r=e[o][1],n=0;n<i.length;n++)r=r.replace(i[n][0],i[n][1]);t[s].$.sheet.addRule(e[o][0],r)}else{for(r=e,n=0;n<i.length;n++)r=r.replace(i[n][0],i[n][1]);CKEDITOR.env.ie&&CKEDITOR.env.version<11?t[s].$.styleSheet.cssText+=r:t[s].$.innerHTML+=r}}var o={};CKEDITOR.skin={path:r,loadPart:function(t,e){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(r()+"skin.js"),function(){n(t,e)}):n(t,e)},getPath:function(t){return CKEDITOR.getUrl(i(t))},icons:{},addIcon:function(t,e,i,n){t=t.toLowerCase(),this.icons[t]||(this.icons[t]={path:e,offset:i||0,bgsize:n||"16px"})},getIconStyle:function(t,e,i,n,o){var r;return t&&(t=t.toLowerCase(),e&&(r=this.icons[t+"-rtl"]),r=r||this.icons[t]),t=i||r&&r.path||"",n=n||r&&r.offset,o=o||r&&r.bgsize||"16px",(t=t&&t.replace(/'/g,"\\'"))&&"background-image:url('"+CKEDITOR.getUrl(t)+"');background-position:0 "+n+"px;background-size:"+o+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(t){var o=s(CKEDITOR.document);return(this.setUiColor=function(t){this.uiColor=t;var e=CKEDITOR.skin.chameleon,i="",n="";"function"==typeof e&&(i=e(this,"editor"),n=e(this,"panel")),a([o],i,t=[[u,t]]),a(c,n,t)}).call(this,t)}});var l="cke_ui_color",c=[],u=/\$color/g;CKEDITOR.on("instanceLoaded",function(t){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var i=t.editor;t=function(t){if(!(t=(t.data[0]||t.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument()).getById("cke_ui_color")){t=s(t),c.push(t);var e=i.getUiColor();e&&a([t],CKEDITOR.skin.chameleon(i,"panel"),[[u,e]])}},i.on("panelShow",t),i.on("menuShow",t),i.config.uiColor&&i.setUiColor(i.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var t=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);t.appendTo(CKEDITOR.document.getHead());try{var e=t.getComputedStyle("border-top-color"),i=t.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!e||e!=i)}catch(t){CKEDITOR.env.hc=!1}t.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),t=CKEDITOR._.pending)for(delete CKEDITOR._.pending,e=0;e<t.length;e++)CKEDITOR.editor.prototype.constructor.apply(t[e][0],t[e][1]),CKEDITOR.add(t[e][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=(vt=function(t,e){for(var i=t.match(/[^#]./g),n=0;n<3;n++){var o,r=n;o=parseInt(i[n],16),o=("0"+(e<0?0|o*(1+e):0|o+(255-o)*e).toString(16)).slice(-2),i[r]=o}return"#"+i.join("")},yt={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")},function(t,e){var i=vt(t.uiColor,.4);return i={id:"."+t.id,defaultBorder:vt(i,-.2),toolbarElementsBorder:vt(i,-.25),defaultBackground:i,lightBackground:vt(i,.8),darkBackground:vt(i,-.15),ckeButtonOn:vt(i,.4),ckeResizer:vt(i,-.4),ckeColorauto:vt(i,.8),dialogBody:vt(i,.7),dialogTab:vt(i,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:vt(i,-.6),menubuttonHover:vt(i,.1),menubuttonIcon:vt(i,.5),menubuttonIconHover:vt(i,.3)},yt[e].output(i).replace(/\[/g,"{").replace(/\]/g,"}")}),CKEDITOR.plugins.add("dialogui",{onLoad:function(){function c(t){this._||(this._={}),this._.default=this._.initValue=t.default||"",this._.required=t.required||!1;for(var e=[this._],i=1;i<arguments.length;i++)e.push(arguments[i]);return e.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,e),this._}function g(t){for(var e in t)!o.test(e)&&"title"!=e&&"type"!=e||delete t[e];return t}function a(t){(t=t.data.getKeystroke())==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):t==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")}var l,u,d,t={build:function(t,e,i){return new CKEDITOR.ui.dialog.textInput(t,e,i)}},e={build:function(t,e,i){return new CKEDITOR.ui.dialog[e.type](t,e,i)}},i={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(t){this.setValue(this.getInitValue(),t)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},n=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(t,e){this._.domOnChangeRegistered||(t.on("load",function(){this.getInputElement().on("change",function(){t.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",e)}},!0),o=/^on([A-Z]\w+)/;CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(i,n,t,o){if(!(arguments.length<4)){var r=c.call(this,n);r.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var e={role:n.role||"presentation"};n.includeLabel&&(e["aria-labelledby"]=r.labelId),CKEDITOR.ui.dialog.uiElement.call(this,i,n,t,"div",null,e,function(){var t=[],e=n.required?" cke_required":"";return"horizontal"!=n.labelLayout?t.push('<label class="cke_dialog_ui_labeled_label'+e+'" ',' id="'+r.labelId+'"',r.inputId?' for="'+r.inputId+'"':"",(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",n.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',n.controlStyle?' style="'+n.controlStyle+'"':"",' role="presentation">',o.call(this,i,n),"</div>"):(e={type:"hbox",widths:n.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+e+'" id="'+r.labelId+'" for="'+r.inputId+'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(n.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(n.controlStyle?' style="'+n.controlStyle+'"':"")+">"+o.call(this,i,n)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(i,e,t)),t.join("")})}},textInput:function(e,i,t){if(!(arguments.length<3)){c.call(this,i);var n=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",o={class:"cke_dialog_ui_input_"+i.type,id:n,type:i.type};i.validate&&(this.validate=i.validate),i.maxLength&&(o.maxlength=i.maxLength),i.size&&(o.size=i.size),i.inputStyle&&(o.style=i.inputStyle);var r=this,s=!1;e.on("load",function(){r.getInputElement().on("keydown",function(t){13==t.data.getKeystroke()&&(s=!0)}),r.getInputElement().on("keyup",function(t){13==t.data.getKeystroke()&&s&&(e.getButton("ok")&&setTimeout(function(){e.getButton("ok").click()},0),s=!1),r.bidi&&a.call(r,t)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,e,i,t,function(){var t=['<div class="cke_dialog_ui_input_',i.type,'" role="presentation"'];for(var e in i.width&&t.push('style="width:'+i.width+'" '),t.push("><input "),o["aria-labelledby"]=this._.labelId,this._.required&&(o["aria-required"]=this._.required),o)t.push(e+'="'+o[e]+'" ');return t.push(" /></div>"),t.join("")})}},textarea:function(t,e,i){if(!(arguments.length<3)){c.call(this,e);var n=this,o=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",r={};e.validate&&(this.validate=e.validate),r.rows=e.rows||5,r.cols=e.cols||20,r.class="cke_dialog_ui_input_textarea "+(e.class||""),void 0!==e.inputStyle&&(r.style=e.inputStyle),e.dir&&(r.dir=e.dir),n.bidi&&t.on("load",function(){n.getInputElement().on("keyup",a)},n),CKEDITOR.ui.dialog.labeledElement.call(this,t,e,i,function(){r["aria-labelledby"]=this._.labelId,this._.required&&(r["aria-required"]=this._.required);var t,e=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',o,'" '];for(t in r)e.push(t+'="'+CKEDITOR.tools.htmlEncode(r[t])+'" ');return e.push(">",CKEDITOR.tools.htmlEncode(n._.default),"</textarea></div>"),e.join("")})}},checkbox:function(o,r,t){if(!(arguments.length<3)){var s=c.call(this,r,{default:!!r.default});r.validate&&(this.validate=r.validate),CKEDITOR.ui.dialog.uiElement.call(this,o,r,t,"span",null,null,function(){var t=CKEDITOR.tools.extend({},r,{id:r.id?r.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),e=[],i=CKEDITOR.tools.getNextId()+"_label",n={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":i};return g(t),r.default&&(n.checked="checked"),void 0!==t.inputStyle&&(t.style=t.inputStyle),s.checkbox=new CKEDITOR.ui.dialog.uiElement(o,t,e,"input",null,n),e.push(' <label id="',i,'" for="',n.id,'"'+(r.labelStyle?' style="'+r.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(r.label),"</label>"),e.join("")})}},radio:function(d,h,t){if(!(arguments.length<3)){c.call(this,h),this._.default||(this._.default=this._.initValue=h.items[0][1]),h.validate&&(this.validate=h.validate);var p=[],f=this;h.role="radiogroup",h.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,d,h,t,function(){for(var t=[],e=[],i=(h.id?h.id:CKEDITOR.tools.getNextId())+"_radio",n=0;n<h.items.length;n++){var o=h.items[n],r=void 0!==o[2]?o[2]:o[0],s=void 0!==o[1]?o[1]:o[0],a=(l=CKEDITOR.tools.getNextId()+"_radio_input")+"_label",l=CKEDITOR.tools.extend({},h,{id:l,title:null,type:null},!0),c=(r=CKEDITOR.tools.extend({},l,{title:r},!0),{type:"radio",class:"cke_dialog_ui_radio_input",name:i,value:s,"aria-labelledby":a}),u=[];f._.default==s&&(c.checked="checked"),g(l),g(r),void 0!==l.inputStyle&&(l.style=l.inputStyle),l.keyboardFocusable=!0,p.push(new CKEDITOR.ui.dialog.uiElement(d,l,u,"input",null,c)),u.push(" "),new CKEDITOR.ui.dialog.uiElement(d,r,u,"label",null,{id:a,for:c.id},o[0]),t.push(u.join(""))}return new CKEDITOR.ui.dialog.hbox(d,p,t,e),e.join("")}),this._.children=p}},button:function(t,e,i){if(arguments.length){"function"==typeof e&&(e=e(t.getParentEditor())),c.call(this,e,{disabled:e.disabled||!1}),CKEDITOR.event.implementOn(this);var n=this;t.on("load",function(){var t=this.getElement();t.on("click",function(t){n.click(),t.data.preventDefault()}),t.on("keydown",function(t){t.data.getKeystroke()in{32:1}&&(n.click(),t.data.preventDefault())}),t.unselectable()},this);var o=CKEDITOR.tools.extend({},e);delete o.style;var r=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,t,o,i,"a",null,{style:e.style,href:"javascript:void(0)",title:e.label,hidefocus:"true",class:e.class,role:"button","aria-labelledby":r},'<span id="'+r+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(e.label)+"</span>")}},select:function(s,a,t){if(!(arguments.length<3)){var l=c.call(this,a);a.validate&&(this.validate=a.validate),l.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,s,a,t,function(){var t=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),e=[],i=[],n={id:l.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};e.push('<div class="cke_dialog_ui_input_',a.type,'" role="presentation"'),a.width&&e.push('style="width:'+a.width+'" '),e.push(">"),void 0!==a.size&&(n.size=a.size),void 0!==a.multiple&&(n.multiple=a.multiple),g(t);for(var o,r=0;r<a.items.length&&(o=a.items[r]);r++)i.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==o[1]?o[1]:o[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(o[0]));return void 0!==t.inputStyle&&(t.style=t.inputStyle),l.select=new CKEDITOR.ui.dialog.uiElement(s,t,e,"select",null,n,i.join("")),e.push("</div>"),e.join("")})}},file:function(t,e,i){if(!(arguments.length<3)){void 0===e.default&&(e.default="");var n=CKEDITOR.tools.extend(c.call(this,e),{definition:e,buttons:[]});e.validate&&(this.validate=e.validate),t.on("load",function(){CKEDITOR.document.getById(n.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,t,e,i,function(){n.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var t=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',n.frameId,'" title="',e.label,'" src="javascript:void('];return t.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),t.push(')"></iframe>'),t.join("")})}},fileButton:function(i,n,t){var e=this;if(!(arguments.length<3)){c.call(this,n),n.validate&&(this.validate=n.validate);var o=CKEDITOR.tools.extend({},n),r=o.onClick;o.className=(o.className?o.className+" ":"")+"cke_dialog_ui_button",o.onClick=function(t){var e=n.for;r&&!1===r.call(this,t)||(i.getContentElement(e[0],e[1]).submit(),this.disable())},i.on("load",function(){i.getContentElement(n.for[0],n.for[1])._.buttons.push(e)}),CKEDITOR.ui.dialog.button.call(this,i,o,t)}},html:(l=/^\s*<[\w:]+\s+([^>]*)?>/,u=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,d=/\/$/,function(t,e,i){if(!(arguments.length<3)){var n=[],o=e.html;"<"!=o.charAt(0)&&(o="<span>"+o+"</span>");var r=e.focus;if(r){var s=this.focus;this.focus=function(){("function"==typeof r?r:s).call(this),this.fire("focus")},e.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,t,e,n,"span",null,null,""),n=n.join("").match(l),o=o.match(u)||["","",""],d.test(o[1])&&(o[1]=o[1].slice(0,-1),o[2]="/"+o[2]),i.push([o[1]," ",n[1]||"",o[2]].join(""))}}),fieldset:function(t,e,i,n,o){var r=o.label;this._={children:e},CKEDITOR.ui.dialog.uiElement.call(this,t,o,n,"fieldset",null,null,function(){var t=[];r&&t.push("<legend"+(o.labelStyle?' style="'+o.labelStyle+'"':"")+">"+r+"</legend>");for(var e=0;e<i.length;e++)t.push(i[e]);return t.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(t){var e=CKEDITOR.document.getById(this._.labelId);return e.getChildCount()<1?new CKEDITOR.dom.text(t,CKEDITOR.document).appendTo(e):e.getChild(0).$.nodeValue=t,this},getLabel:function(){var t=CKEDITOR.document.getById(this._.labelId);return!t||t.getChildCount()<1?"":t.getChild(0).getText()},eventProcessors:n},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var t=this.getElement();t&&t.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(t,e){this.on("click",function(){e.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&t.$.focus()},0)},select:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&(t.$.focus(),t.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(t){if(this.bidi){var e=t&&t.charAt(0);(e="‪"==e?"ltr":"‫"==e?"rtl":null)&&(t=t.slice(1)),this.setDirectionMarker(e)}return t=t||"",CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var t=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&t){var e=this.getDirectionMarker();e&&(t=("ltr"==e?"‪":"‫")+t)}return t},setDirectionMarker:function(t){var e=this.getInputElement();t?e.setAttributes({dir:t,"data-cke-dir-marker":t}):this.getDirectionMarker()&&e.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(t,e,i){var n=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),o=this.getInputElement().$;return n.$.text=t,n.$.value=null==e?t:e,null==i?CKEDITOR.env.ie?o.add(n.$):o.add(n.$,null):o.add(n.$,i),this},remove:function(t){return this.getInputElement().$.remove(t),this},clear:function(){for(var t=this.getInputElement().$;0<t.length;)t.remove(0);return this},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(t,e){this.getInputElement().$.checked=t,e||this.fire("change",{value:t})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(t,e){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?n.onChange.apply(this,arguments):(t.on("load",function(){var e=this._.checkbox.getElement();e.on("propertychange",function(t){"checked"==(t=t.data.$).propertyName&&this.fire("change",{value:e.$.checked})},this)},this),this.on("change",e),null)}},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(t,e){for(var i,n=this._.children,o=0;o<n.length&&(i=n[o]);o++)i.getElement().$.checked=i.getValue()==t;e||this.fire("change",{value:t})},getValue:function(){for(var t=this._.children,e=0;e<t.length;e++)if(t[e].getElement().$.checked)return t[e].getValue();return null},accessKeyUp:function(){var t,e=this._.children;for(t=0;t<e.length;t++)if(e[t].getElement().$.checked)return void e[t].getElement().focus();e[0].getElement().focus()},eventProcessors:{onChange:function(t,e){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?n.onChange.apply(this,arguments):(t.on("load",function(){for(var t=this._.children,e=this,i=0;i<t.length;i++)t[i].getElement().on("propertychange",function(t){"checked"==(t=t.data.$).propertyName&&this.$.checked&&e.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",e),null)}}},i,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,i,{getInputElement:function(){var t=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<t.$.forms.length?new CKEDITOR.dom.element(t.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(t){function e(t,e,i,n){t.on("formLoaded",function(){t.getInputElement().on(i,n,t)})}var i,n,o=/^on([A-Z]\w+)/;for(n in t)(i=n.match(o))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,t[n]):e(this,this._.dialog,i[1].toLowerCase(),t[n]));return this},reset:function(){function t(){n.$.open();var t="";o.size&&(t=o.size-(CKEDITOR.env.ie?7:0));var e=i.frameId+"_input";for(n.$.write(['<html dir="'+l+'" lang="'+c+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+l+'" lang="'+c+'" action="',CKEDITOR.tools.htmlEncode(o.action),'"><label id="',i.labelId,'" for="',e,'" style="display:none">',CKEDITOR.tools.htmlEncode(o.label),'</label><input style="width:100%" id="',e,'" aria-labelledby="',i.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(o.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<t?t:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+s+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+a+")}","<\/script>"].join("")),n.$.close(),t=0;t<r.length;t++)r[t].enable()}var i=this._,n=CKEDITOR.document.getById(i.frameId).getFrameDocument(),o=i.definition,r=i.buttons,s=this.formLoadedNumber,a=this.formUnloadNumber,l=i.dialog._.editor.lang.dir,c=i.dialog._.editor.langCode;s||(s=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),a=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(s),CKEDITOR.tools.removeFunction(a)})),CKEDITOR.env.gecko?setTimeout(t,500):t()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(t,e){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",e)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",t),CKEDITOR.dialog.addUIElement("password",t),CKEDITOR.dialog.addUIElement("textarea",e),CKEDITOR.dialog.addUIElement("checkbox",e),CKEDITOR.dialog.addUIElement("radio",e),CKEDITOR.dialog.addUIElement("button",e),CKEDITOR.dialog.addUIElement("select",e),CKEDITOR.dialog.addUIElement("file",e),CKEDITOR.dialog.addUIElement("fileButton",e),CKEDITOR.dialog.addUIElement("html",e),CKEDITOR.dialog.addUIElement("fieldset",{build:function(t,e,i){for(var n,o=e.children,r=[],s=[],a=0;a<o.length&&(n=o[a]);a++){var l=[];r.push(l),s.push(CKEDITOR.dialog._.uiElementBuilders[n.type].build(t,n,l))}return new CKEDITOR.ui.dialog[e.type](t,s,r,i,e)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function m(){for(var t=this._.tabIdList.length,e=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+t,i=e-1;e-t<i;i--)if(this._.tabs[this._.tabIdList[i%t]][0].$.offsetHeight)return this._.tabIdList[i%t];return null}function r(t,e){for(var i=t.$.getElementsByTagName("input"),n=0,o=i.length;n<o;n++){var r=new CKEDITOR.dom.element(i[n]);"text"==r.getAttribute("type").toLowerCase()&&(e?(r.setAttribute("value",r.getCustomData("fake_value")||""),r.removeCustomData("fake_value")):(r.setCustomData("fake_value",r.getAttribute("value")),r.setAttribute("value","")))}}function n(t,e,i){this.element=e,this.focusIndex=i,this.tabIndex=0,this.isFocusable=function(){return!e.getAttribute("disabled")&&e.isVisible()},this.focus=function(){t._.currentFocusIndex=this.focusIndex,this.element.focus()},e.on("keydown",function(t){t.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),e.on("focus",function(){this.fire("mouseover")}),e.on("blur",function(){this.fire("mouseout")})}function s(t,e){this._={dialog:t},CKEDITOR.tools.extend(this,e)}function c(t){t.data.preventDefault(1)}function l(t){var i=CKEDITOR.document.getWindow(),e=t.config,n=CKEDITOR.skinName||t.config.skin,o=e.dialog_backgroundCoverColor||("moono-lisa"==n?"black":"white"),r=(n=e.dialog_backgroundCoverOpacity,e.baseFloatZIndex),s=(e=CKEDITOR.tools.genKey(o,n,r),D[e]);s?s.show():(r=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",r,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+o,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(o="<html><body style=\\'background-color:"+o+";\\'></body></html>",r.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),r.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+o+"' );document.close();")+"})())"),r.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),r.push("</div>"),(s=CKEDITOR.dom.element.createFromHtml(r.join(""))).setOpacity(void 0!==n?n:.5),s.on("keydown",c),s.on("keypress",c),s.on("keyup",c),s.appendTo(CKEDITOR.document.getBody()),D[e]=s),t.focusManager.add(s),_=s;function a(){var t=i.getScrollPosition(),e=CKEDITOR.dialog._.currentTop;if(s.setStyles({left:t.x+"px",top:t.y+"px"}),e)for(;t=e.getPosition(),e.move(t.x,t.y),e=e._.parentDialog;);}if(f=t=function(){var t=i.getViewPaneSize();s.setStyles({width:t.width+"px",height:t.height+"px"})},i.on("resize",t),t(),CKEDITOR.env.mac&&CKEDITOR.env.webkit||s.focus(),CKEDITOR.env.ie6Compat){function l(){a(),arguments.callee.prevScrollHandler.apply(this,arguments)}i.$.setTimeout(function(){l.prevScrollHandler=window.onscroll||function(){},window.onscroll=l},0),a()}}function o(t){_&&(t.focusManager.remove(_),t=CKEDITOR.document.getWindow(),_.hide(),t.removeListener("resize",f),CKEDITOR.env.ie6Compat&&t.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),f=null)}var u=CKEDITOR.tools.cssLength,v='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';function t(t){t.reset&&t.reset(1)}function i(t,e){return e=e||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:t.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(t){!1!==(t=t.data.dialog).fire("cancel",{hide:!0}).hide&&t.hide()}},e,!0)}function a(t,e){return e=e||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:t.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(t){!1!==(t=t.data.dialog).fire("ok",{hide:!0}).hide&&t.hide()}},e,!0)}CKEDITOR.dialog=function(n,t){function o(t){var e=f._.focusList;if(t=t||0,!(e.length<1)){var i=f._.currentFocusIndex;f._.tabBarMode&&t<0&&(i=0);try{e[i].getInputElement().$.blur()}catch(t){}var n=i,o=1<f._.pageCount;do{if(n+=t,o&&!f._.tabBarMode&&(n==e.length||-1==n))return f._.tabBarMode=!0,f._.tabs[f._.currentTabId][0].focus(),void(f._.currentFocusIndex=-1);if((n=(n+e.length)%e.length)==i)break}while(t&&!e[n].isFocusable());e[n].focus(),"text"==e[n].type&&e[n].select()}}function e(t){if(f==CKEDITOR.dialog._.currentTop){var e=t.data.getKeystroke(),i="rtl"==n.lang.dir;if(s=a=0,9==e||e==CKEDITOR.SHIFT+9)o(e==CKEDITOR.SHIFT+9?-1:1),s=1;else if(e==CKEDITOR.ALT+121&&!f._.tabBarMode&&1<f.getPageCount())f._.tabBarMode=!0,f._.tabs[f._.currentTabId][0].focus(),f._.currentFocusIndex=-1,s=1;else if(-1!=CKEDITOR.tools.indexOf([37,38,39,40],e)&&f._.tabBarMode)e=-1!=CKEDITOR.tools.indexOf([i?39:37,38],e)?m.call(f):function(){for(var t=this._.tabIdList.length,e=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),i=e+1;i<e+t;i++)if(this._.tabs[this._.tabIdList[i%t]][0].$.offsetHeight)return this._.tabIdList[i%t];return null}.call(f),f.selectPage(e),f._.tabs[e][0].focus(),s=1;else if(13!=e&&32!=e||!f._.tabBarMode)if(13==e)(e=t.data.getTarget()).is("a","button","select","textarea")||e.is("input")&&"button"==e.$.type||((e=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(e.click,0,e),s=1),a=1;else{if(27!=e)return;(e=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(e.click,0,e):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),a=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,o(1),s=1;r(t)}}function r(t){s?t.data.preventDefault(1):a&&t.data.stopPropagation()}var s,a,i=CKEDITOR.dialog._.dialogDefinitions[t],l=CKEDITOR.tools.clone(y),c=n.config.dialog_buttonsOrder||"OS",u=n.lang.dir,d={};if(("OS"==c&&CKEDITOR.env.mac||"rtl"==c&&"ltr"==u||"ltr"==c&&"rtl"==u)&&l.buttons.reverse(),i=CKEDITOR.tools.extend(i(n),l),i=CKEDITOR.tools.clone(i),i=new b(this,i),l=function(t){var e=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",v).output({id:CKEDITOR.tools.getNextNumber(),editorId:t.id,langDir:t.lang.dir,langCode:t.langCode,editorDialogClass:"cke_editor_"+t.name.replace(/\./g,"\\.")+"_dialog",closeTitle:t.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),i=e.getChild([0,0,0,0,0]),n=i.getChild(0),o=i.getChild(1);return t.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(i),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(t="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+t+'" tabIndex="-1"></iframe>').appendTo(i.getParent())),n.unselectable(),o.unselectable(),{element:e,parts:{dialog:e.getChild(0),title:n,close:o,tabs:i.getChild(2),contents:i.getChild([3,0,0,0]),footer:i.getChild([3,0,1,0])}}}(n),this._={editor:n,element:l.element,name:t,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=l.parts,CKEDITOR.tools.setTimeout(function(){n.fire("ariaWidget",this.parts.contents)},0,this),(l={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"})["rtl"==u?"right":"left"]=0,this.parts.dialog.setStyles(l),CKEDITOR.event.call(this),this.definition=i=CKEDITOR.fire("dialogDefinition",{name:t,definition:i},n).definition,!("removeDialogTabs"in n._)&&n.config.removeDialogTabs){for(l=n.config.removeDialogTabs.split(";"),u=0;u<l.length;u++)if(2==(c=l[u].split(":")).length){var h=c[0];d[h]||(d[h]=[]),d[h].push(c[1])}n._.removeDialogTabs=d}if(n._.removeDialogTabs&&(d=n._.removeDialogTabs[t]))for(u=0;u<d.length;u++)i.removeContents(d[u]);i.onLoad&&this.on("load",i.onLoad),i.onShow&&this.on("show",i.onShow),i.onHide&&this.on("hide",i.onHide),i.onOk&&this.on("ok",function(t){n.fire("saveSnapshot"),setTimeout(function(){n.fire("saveSnapshot")},0),!1===i.onOk.call(this,t)&&(t.data.hide=!1)}),this.state=CKEDITOR.DIALOG_STATE_IDLE,i.onCancel&&this.on("cancel",function(t){!1===i.onCancel.call(this,t)&&(t.data.hide=!1)});function p(t){var e,i=f._.contents;for(e in i)for(var n in i[e])if(t.call(this,i[e][n]))return}var f=this;this.on("ok",function(n){p(function(t){if(t.validate){var e=t.validate(this),i="string"==typeof e||!1===e;return i&&(n.data.hide=!1,n.stop()),function(t,e){var i=this.getInputElement();i&&(t?i.removeAttribute("aria-invalid"):i.setAttribute("aria-invalid",!0)),t||(this.select?this.select():this.focus()),e&&alert(e),this.fire("validated",{valid:t,msg:e})}.call(t,!i,"string"==typeof e?e:void 0),i}})},this,null,0),this.on("cancel",function(e){p(function(t){if(t.isChanged())return n.config.dialog_noConfirmCancel||confirm(n.lang.common.confirmCancel)||(e.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(t){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),t.data.preventDefault()},this),this.changeFocus=o;var g=this._.element;for(n.focusManager.add(g,1),this.on("show",function(){g.on("keydown",e,this),CKEDITOR.env.gecko&&g.on("keypress",r,this)}),this.on("hide",function(){g.removeListener("keydown",e),CKEDITOR.env.gecko&&g.removeListener("keypress",r),p(function(t){(function(){var t=this.getInputElement();t&&t.removeAttribute("aria-invalid")}).apply(t)})}),this.on("iframeAdded",function(t){new CKEDITOR.dom.document(t.data.iframe.$.contentWindow.document).on("keydown",e,this,null,0)}),this.on("show",function(){!function(){var t=f._.focusList;t.sort(function(t,e){return t.tabIndex!=e.tabIndex?e.tabIndex-t.tabIndex:t.focusIndex-e.focusIndex});for(var e=t.length,i=0;i<e;i++)t[i].focusIndex=i}();var t=1<f._.pageCount;n.config.dialog_startupFocusTab&&t?(f._.tabBarMode=!0,f._.tabs[f._.currentTabId][0].focus(),f._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=t?-1:this._.focusList.length-1,i.onFocus?(t=i.onFocus.call(this))&&t.focus():o(1))},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var t=this.getElement(),e=t.getFirst();e.remove(),e.appendTo(t)},this),function(a){function i(t){var e=a.getSize(),i=CKEDITOR.document.getWindow().getViewPaneSize(),n=t.data.$.screenX,o=t.data.$.screenY,r=n-l.x,s=o-l.y;l={x:n,y:o},c.x+=r,c.y+=s,a.move(c.x+h[3]<d?-h[3]:c.x-h[1]>i.width-e.width-d?i.width-e.width+("rtl"==u.lang.dir?0:h[1]):c.x,c.y+h[0]<d?-h[0]:c.y-h[2]>i.height-e.height-d?i.height-e.height+h[2]:c.y,1),t.data.preventDefault()}function n(){if(CKEDITOR.document.removeListener("mousemove",i),CKEDITOR.document.removeListener("mouseup",n),CKEDITOR.env.ie6Compat){var t=_.getChild(0).getFrameDocument();t.removeListener("mousemove",i),t.removeListener("mouseup",n)}}var l=null,c=null,u=a.getParentEditor(),d=u.config.dialog_magnetDistance,h=CKEDITOR.skin.margins||[0,0,0,0];void 0===d&&(d=20),a.parts.title.on("mousedown",function(t){if(l={x:t.data.$.screenX,y:t.data.$.screenY},CKEDITOR.document.on("mousemove",i),CKEDITOR.document.on("mouseup",n),c=a.getPosition(),CKEDITOR.env.ie6Compat){var e=_.getChild(0).getFrameDocument();e.on("mousemove",i),e.on("mouseup",n)}t.data.preventDefault()},a)}(this),function(l){function i(t){var e="rtl"==m.lang.dir,i=g.width,n=g.height,o=i+(t.data.$.screenX-f.x)*(e?-1:1)*(l._.moved?1:2),r=n+(t.data.$.screenY-f.y)*(l._.moved?1:2),s=l._.element.getFirst(),a=(s=e&&s.getComputedStyle("right"),l.getPosition());a.y+r>p.height&&(r=p.height-a.y),(e?s:a.x)+o>p.width&&(o=p.width-(e?s:a.x)),u!=CKEDITOR.DIALOG_RESIZE_WIDTH&&u!=CKEDITOR.DIALOG_RESIZE_BOTH||(i=Math.max(c.minWidth||0,o-d)),u!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&u!=CKEDITOR.DIALOG_RESIZE_BOTH||(n=Math.max(c.minHeight||0,r-h)),l.resize(i,n),l._.moved||l.layout(),t.data.preventDefault()}function n(){if(CKEDITOR.document.removeListener("mouseup",n),CKEDITOR.document.removeListener("mousemove",i),o&&(o.remove(),o=null),CKEDITOR.env.ie6Compat){var t=_.getChild(0).getFrameDocument();t.removeListener("mouseup",n),t.removeListener("mousemove",i)}}var c=l.definition,u=c.resizable;if(u!=CKEDITOR.DIALOG_RESIZE_NONE){var d,h,p,f,g,o,m=l.getParentEditor(),e=CKEDITOR.tools.addFunction(function(t){g=l.getSize();var e=l.parts.contents;e.$.getElementsByTagName("iframe").length&&(o=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),e.append(o)),h=g.height-l.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),d=g.width-l.parts.contents.getSize("width",1),f={x:t.screenX,y:t.screenY},p=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",i),CKEDITOR.document.on("mouseup",n),CKEDITOR.env.ie6Compat&&((e=_.getChild(0).getFrameDocument()).on("mousemove",i),e.on("mouseup",n)),t.preventDefault&&t.preventDefault()});l.on("load",function(){var t="";u==CKEDITOR.DIALOG_RESIZE_WIDTH?t=" cke_resizer_horizontal":u==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(t=" cke_resizer_vertical"),t=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+t+" cke_resizer_"+m.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(m.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+e+', event )">'+("ltr"==m.lang.dir?"◢":"◣")+"</div>"),l.parts.footer.append(t,1)}),m.on("destroy",function(){CKEDITOR.tools.removeFunction(e)})}}(this),new CKEDITOR.dom.text(i.title,CKEDITOR.document).appendTo(this.parts.title),u=0;u<i.contents.length;u++)(d=i.contents[u])&&this.addPage(d);for(this.parts.tabs.on("click",function(t){var e=t.data.getTarget();e.hasClass("cke_dialog_tab")&&(e=e.$.id,this.selectPage(e.substring(4,e.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,o(1)),t.data.preventDefault())},this),u=[],d=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:i.buttons},u).getChild(),this.parts.footer.setHtml(u.join("")),u=0;u<d.length;u++)this._.buttons[d[u].id]=d[u]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(t,e){this._.contentSize&&this._.contentSize.width==t&&this._.contentSize.height==e||(CKEDITOR.dialog.fire("resize",{dialog:this,width:t,height:e},this._.editor),this.fire("resize",{width:t,height:e},this._.editor),this.parts.contents.setStyles({width:t+"px",height:e+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:t,height:e})},getSize:function(){var t=this._.element.getFirst();return{width:t.$.offsetWidth||0,height:t.$.offsetHeight||0}},move:function(t,e,i){var n=this._.element.getFirst(),o="rtl"==this._.editor.lang.dir,r="fixed"==n.getComputedStyle("position");CKEDITOR.env.ie&&n.setStyle("zoom","100%"),r&&this._.position&&this._.position.x==t&&this._.position.y==e||(this._.position={x:t,y:e},r||(t+=(r=CKEDITOR.document.getWindow().getScrollPosition()).x,e+=r.y),o&&(r=this.getSize(),t=CKEDITOR.document.getWindow().getViewPaneSize().width-r.width-t),(e={top:(0<e?e:0)+"px"})[o?"right":"left"]=(0<t?t:0)+"px",n.setStyles(e),i&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var t=this._.element,e=this.definition;for(var i in t.getParent()&&t.getParent().equals(CKEDITOR.document.getBody())?t.setStyle("display","block"):t.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||e.width||e.minWidth,this._.contentSize&&this._.contentSize.height||e.height||e.minHeight),this.reset(),null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?((CKEDITOR.dialog._.currentTop=this)._.parentDialog=null,l(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),t.on("keydown",O),t.on("keyup",R),this._.hasFocus=!1,e.contents)if(e.contents[i]){t=e.contents[i];var n=this._.tabs[t.id],o=t.requiredContent,r=0;if(n){for(var s in this._.contents[t.id]){var a=this._.contents[t.id][s];"hbox"!=a.type&&"vbox"!=a.type&&a.getInputElement()&&(a.requiredContent&&!this._.editor.activeFilter.check(a.requiredContent)?a.disable():(a.enable(),r++))}!r||o&&!this._.editor.activeFilter.check(o)?n[0].addClass("cke_dialog_tab_disabled"):n[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),function(t){function e(){t.layout()}var i=CKEDITOR.document.getWindow();i.on("resize",e),t.on("hide",function(){i.removeListener("resize",e)})}(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(t){t.setInitValue&&t.setInitValue()})},100,this)},layout:function(){var t=this.parts.dialog,e=this.getSize(),i=CKEDITOR.document.getWindow().getViewPaneSize(),n=(i.width-e.width)/2,o=(i.height-e.height)/2;CKEDITOR.env.ie6Compat||(e.height+(0<o?o:0)>i.height||e.width+(0<n?n:0)>i.width?t.setStyle("position","absolute"):t.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:n,this._.moved?this._.position.y:o)},foreach:function(t){for(var e in this._.contents)for(var i in this._.contents[e])t.call(this,this._.contents[e][i]);return this},reset:function(){return this.foreach(t),this},setupContent:function(){var e=arguments;this.foreach(function(t){t.setup&&t.setup.apply(t,e)})},commitContent:function(){var e=arguments;this.foreach(function(t){CKEDITOR.env.ie&&this._.currentFocusIndex==t.focusIndex&&t.getInputElement().$.blur(),t.commit&&t.commit.apply(t,e)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var t=this._.element;for(t.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),S(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var e=this._.parentDialog.getElement().getFirst();e.setStyle("z-index",parseInt(e.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else o(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,t.removeListener("keydown",O),t.removeListener("keyup",R);var i=this._.editor;i.focus(),setTimeout(function(){i.focusManager.unlock(),CKEDITOR.env.iOS&&i.window.focus()},0)}delete this._.parentDialog,this.foreach(function(t){t.resetInitValue&&t.resetInitValue()}),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(t){if(!t.requiredContent||this._.editor.filter.check(t.requiredContent)){for(var e=[],i=t.label?' title="'+CKEDITOR.tools.htmlEncode(t.label)+'"':"",n=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:t.elements,expand:!!t.expand,padding:t.padding,style:t.style||"width: 100%;"},e),o=this._.contents[t.id]={},r=n.getChild(),s=0;n=r.shift();)n.notAllowed||"hbox"==n.type||"vbox"==n.type||s++,"function"==typeof(o[n.id]=n).getChild&&r.push.apply(r,n.getChild());s||(t.hidden=!0),(e=CKEDITOR.dom.element.createFromHtml(e.join(""))).setAttribute("role","tabpanel"),n=CKEDITOR.env,o="cke_"+t.id+"_"+CKEDITOR.tools.getNextNumber(),i=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",i,t.hidden?' style="display:none"':"",' id="',o,'"',n.gecko&&!n.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',t.label,"</a>"].join("")),e.setAttribute("aria-labelledby",o),this._.tabs[t.id]=[i,e],this._.tabIdList.push(t.id),t.hidden||this._.pageCount++,this._.lastTab=i,this.updateStyle(),e.setAttribute("name",t.id),e.appendTo(this.parts.contents),i.unselectable(),this.parts.tabs.append(i),t.accessKey&&(k(this,this,"CTRL+"+t.accessKey,M,A),this._.accessKeyMap["CTRL+"+t.accessKey]=t.id)}},selectPage:function(t){if(this._.currentTabId!=t&&!this._.tabs[t][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:t,currentPage:this._.currentTabId})){for(var e in this._.tabs){var i=this._.tabs[e][0],n=this._.tabs[e][1];e!=t&&(i.removeClass("cke_dialog_tab_selected"),n.hide()),n.setAttribute("aria-hidden",e!=t)}var o=this._.tabs[t];o[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(r(o[1]),o[1].show(),setTimeout(function(){r(o[1],1)},0)):o[1].show(),this._.currentTabId=t,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,t)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(t){var e=this._.tabs[t]&&this._.tabs[t][0];e&&1!=this._.pageCount&&e.isVisible()&&(t==this._.currentTabId&&this.selectPage(m.call(this)),e.hide(),this._.pageCount--,this.updateStyle())},showPage:function(t){(t=this._.tabs[t]&&this._.tabs[t][0])&&(t.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(t,e){var i=this._.contents[t];return i&&i[e]},getValueOf:function(t,e){return this.getContentElement(t,e).getValue()},setValueOf:function(t,e,i){return this.getContentElement(t,e).setValue(i)},getButton:function(t){return this._.buttons[t]},click:function(t){return this._.buttons[t].click()},disableButton:function(t){return this._.buttons[t].disable()},enableButton:function(t){return this._.buttons[t].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(t,e){if(void 0===e)e=this._.focusList.length,this._.focusList.push(new n(this,t,e));else{this._.focusList.splice(e,0,new n(this,t,e));for(var i=e+1;i<this._.focusList.length;i++)this._.focusList[i].focusIndex++}},setState:function(t){if(this.state!=t){if((this.state=t)==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var e=this.getParentEditor().lang.dir,i={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==e?"right":"left"}};i.styles["margin-"+("rtl"==e?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",i),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else t==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",t)}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(t,e){this._.dialogDefinitions[t]&&"function"!=typeof e||(this._.dialogDefinitions[t]=e)},exists:function(t){return!!this._.dialogDefinitions[t]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(t,e,i){return!((t=t.config.removeDialogTabs)&&t.match(new RegExp("(?:^|;)"+e+":"+i+"(?:$|;)","i")))},okButton:(a.type="button",a.override=function(e){return CKEDITOR.tools.extend(function(t){return a(t,e)},{type:"button"},!0)},a),cancelButton:(i.type="button",i.override=function(e){return CKEDITOR.tools.extend(function(t){return i(t,e)},{type:"button"},!0)},i),addUIElement:function(t,e){this._.uiElementBuilders[t]=e}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var y={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},d=function(t,e,i){for(var n,o=0;n=t[o];o++)if(n.id==e||i&&n[i]&&(n=d(n[i],e,i)))return n;return null},h=function(t,e,i,n,o){if(i){for(var r,s=0;r=t[s];s++){if(r.id==i)return t.splice(s,0,e),e;if(n&&r[n]&&(r=h(r[n],e,i,n,!0)))return r}if(o)return null}return t.push(e),e},p=function(t,e,i){for(var n,o=0;n=t[o];o++){if(n.id==e)return t.splice(o,1);if(i&&n[i]&&(n=p(n[i],e,i)))return n}return null},b=function(t,e){this.dialog=t;for(var i,n=e.contents,o=0;i=n[o];o++)n[o]=i&&new s(t,i);CKEDITOR.tools.extend(this,e)};b.prototype={getContents:function(t){return d(this.contents,t)},getButton:function(t){return d(this.buttons,t)},addContents:function(t,e){return h(this.contents,t,e)},addButton:function(t,e){return h(this.buttons,t,e)},removeContents:function(t){p(this.contents,t)},removeButton:function(t){p(this.buttons,t)}},s.prototype={get:function(t){return d(this.elements,t,"children")},add:function(t,e){return h(this.elements,t,e,"children")},remove:function(t){p(this.elements,t,"children")}};var f,_,e,g,E,w,C,T,x,D={},I={},O=function(t){var e=t.data.$.ctrlKey||t.data.$.metaKey,i=t.data.$.altKey,n=t.data.$.shiftKey,o=String.fromCharCode(t.data.$.keyCode);(e=I[(e?"CTRL+":"")+(i?"ALT+":"")+(n?"SHIFT+":"")+o])&&e.length&&((e=e[e.length-1]).keydown&&e.keydown.call(e.uiElement,e.dialog,e.key),t.data.preventDefault())},R=function(t){var e=t.data.$.ctrlKey||t.data.$.metaKey,i=t.data.$.altKey,n=t.data.$.shiftKey,o=String.fromCharCode(t.data.$.keyCode);(e=I[(e?"CTRL+":"")+(i?"ALT+":"")+(n?"SHIFT+":"")+o])&&e.length&&((e=e[e.length-1]).keyup&&(e.keyup.call(e.uiElement,e.dialog,e.key),t.data.preventDefault()))},k=function(t,e,i,n,o){(I[i]||(I[i]=[])).push({uiElement:t,dialog:e,key:i,keyup:o||t.accessKeyUp,keydown:n||t.accessKeyDown})},S=function(t){for(var e in I){for(var i=I[e],n=i.length-1;0<=n;n--)i[n].dialog!=t&&i[n].uiElement!=t||i.splice(n,1);0===i.length&&delete I[e]}},A=function(t,e){t._.accessKeyMap[e]&&t.selectPage(t._.accessKeyMap[e])},M=function(){};CKEDITOR.ui.dialog={uiElement:function(i,n,t,e,o,r,s){if(!(arguments.length<4)){var a=(e.call?e(n):e)||"div",l=["<",a," "],c=(o&&o.call?o(n):o)||{},u=(r&&r.call?r(n):r)||{},d=(s&&s.call?s.call(this,i,n):s)||"",h=this.domId=u.id||CKEDITOR.tools.getNextId()+"_uiElement";n.requiredContent&&!i.getParentEditor().filter.check(n.requiredContent)&&(c.display="none",this.notAllowed=!0),u.id=h;var p={};n.type&&(p["cke_dialog_ui_"+n.type]=1),n.className&&(p[n.className]=1),n.disabled&&(p.cke_disabled=1);var f=u.class&&u.class.split?u.class.split(" "):[];for(h=0;h<f.length;h++)f[h]&&(p[f[h]]=1);for(h in f=[],p)f.push(h);for(h in u.class=f.join(" "),n.title&&(u.title=n.title),p=(n.style||"").split(";"),n.align&&(f=n.align,c["margin-left"]="left"==f?0:"auto",c["margin-right"]="right"==f?0:"auto"),c)p.push(h+":"+c[h]);for(n.hidden&&p.push("display:none"),h=p.length-1;0<=h;h--)""===p[h]&&p.splice(h,1);for(h in 0<p.length&&(u.style=(u.style?u.style+"; ":"")+p.join("; ")),u)l.push(h+'="'+CKEDITOR.tools.htmlEncode(u[h])+'" ');l.push(">",d,"</",a,">"),t.push(l.join("")),(this._||(this._={})).dialog=i,"boolean"==typeof n.isChanged&&(this.isChanged=function(){return n.isChanged}),"function"==typeof n.isChanged&&(this.isChanged=n.isChanged),"function"==typeof n.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(e){return function(t){e.call(this,n.setValue.call(this,t))}})),"function"==typeof n.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(t){return function(){return n.getValue.call(this,t.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(n),this.accessKeyUp&&this.accessKeyDown&&n.accessKey&&k(this,i,"CTRL+"+n.accessKey);var g=this;i.on("load",function(){var t=g.getInputElement();if(t){var e=g.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";t.on("focus",function(){i._.tabBarMode=!1,i._.hasFocus=!0,g.fire("focus"),e&&this.addClass(e)}),t.on("blur",function(){g.fire("blur"),e&&this.removeClass(e)})}}),CKEDITOR.tools.extend(this,n),this.keyboardFocusable&&(this.tabIndex=n.tabIndex||0,this.focusIndex=i._.focusList.push(this)-1,this.on("focus",function(){i._.currentFocusIndex=g.focusIndex}))}},hbox:function(t,e,n,i,o){if(!(arguments.length<4)){this._||(this._={});var r,s=this._.children=e,a=o&&o.widths||null,l=o&&o.height||null,c={role:"presentation"};o&&o.align&&(c.align=o.align),CKEDITOR.ui.dialog.uiElement.call(this,t,o||{type:"hbox"},i,"table",{},c,function(){var t=['<tbody><tr class="cke_dialog_ui_hbox">'];for(r=0;r<n.length;r++){var e="cke_dialog_ui_hbox_child",i=[];0===r&&(e="cke_dialog_ui_hbox_first"),r==n.length-1&&(e="cke_dialog_ui_hbox_last"),t.push('<td class="',e,'" role="presentation" '),a?a[r]&&i.push("width:"+u(a[r])):i.push("width:"+Math.floor(100/n.length)+"%"),l&&i.push("height:"+u(l)),o&&void 0!==o.padding&&i.push("padding:"+u(o.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s[r].align&&i.push("text-align:"+s[r].align),0<i.length&&t.push('style="'+i.join("; ")+'" '),t.push(">",n[r],"</td>")}return t.push("</tr></tbody>"),t.join("")})}},vbox:function(n,t,o,e,r){if(!(arguments.length<3)){this._||(this._={});var s=this._.children=t,a=r&&r.width||null,l=r&&r.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,n,r||{type:"vbox"},e,"div",null,{role:"presentation"},function(){var t=['<table role="presentation" cellspacing="0" border="0" '];t.push('style="'),r&&r.expand&&t.push("height:100%;"),t.push("width:"+u(a||"100%"),";"),CKEDITOR.env.webkit&&t.push("float:none;"),t.push('"'),t.push('align="',CKEDITOR.tools.htmlEncode(r&&r.align||("ltr"==n.getParentEditor().lang.dir?"left":"right")),'" '),t.push("><tbody>");for(var e=0;e<o.length;e++){var i=[];t.push('<tr><td role="presentation" '),a&&i.push("width:"+u(a||"100%")),l?i.push("height:"+u(l[e])):r&&r.expand&&i.push("height:"+Math.floor(100/o.length)+"%"),r&&void 0!==r.padding&&i.push("padding:"+u(r.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s[e].align&&i.push("text-align:"+s[e].align),0<i.length&&t.push('style="',i.join("; "),'" '),t.push(' class="cke_dialog_ui_vbox_child">',o[e],"</td></tr>")}return t.push("</tbody></table>"),t.join("")})}}},CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(t,e){return this.getInputElement().setValue(t),e||this.fire("change",{value:t}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var t=this.getInputElement();(t=t.getParent())&&-1==t.$.className.search("cke_dialog_page_contents"););return t&&(t=t.getAttribute("name"),this._.dialog._.currentTabId!=t&&this._.dialog.selectPage(t)),this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(t){function e(t,e,i,n){e.on("load",function(){t.getInputElement().on(i,n,t)})}var i,n,o=/^on([A-Z]\w+)/;for(n in t)(i=n.match(o))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,t[n]):e(this,this._.dialog,i[1].toLowerCase(),t[n]));return this},eventProcessors:{onLoad:function(t,e){t.on("load",e,this)},onShow:function(t,e){t.on("show",e,this)},onHide:function(t,e){t.on("hide",e,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var t=this.getElement();this.getInputElement().setAttribute("disabled","true"),t.addClass("cke_disabled")},enable:function(){var t=this.getElement();this.getInputElement().removeAttribute("disabled"),t.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(t){return arguments.length<1?this._.children.concat():(t.splice||(t=[t]),t.length<2?this._.children[t[0]]:this._.children[t[0]]&&this._.children[t[0]].getChild?this._.children[t[0]].getChild(t.slice(1,t.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,e={build:function(t,e,i){for(var n,o=e.children,r=[],s=[],a=0;a<o.length&&(n=o[a]);a++){var l=[];r.push(l),s.push(CKEDITOR.dialog._.uiElementBuilders[n.type].build(t,n,l))}return new CKEDITOR.ui.dialog[e.type](t,s,r,i,e)}},CKEDITOR.dialog.addUIElement("hbox",e),CKEDITOR.dialog.addUIElement("vbox",e),CKEDITOR.dialogCommand=function(t,e){this.dialogName=t,CKEDITOR.tools.extend(this,e,!0)},CKEDITOR.dialogCommand.prototype={exec:function(t){var e=this.tabId;t.openDialog(this.dialogName,function(t){e&&t.selectPage(e)})},canUndo:!1,editorFocus:1},g=/^([a]|[^a])+$/,E=/^\d*$/,w=/^\d*(?:\.\d+)?$/,C=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,T=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,x=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/,CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var s=arguments;return function(){var t,e,i=this&&this.getValue?this.getValue():s[0],n=CKEDITOR.VALIDATE_AND,o=[];for(e=0;e<s.length&&"function"==typeof s[e];e++)o.push(s[e]);e<s.length&&"string"==typeof s[e]&&(t=s[e],e++),e<s.length&&"number"==typeof s[e]&&(n=s[e]);var r=n==CKEDITOR.VALIDATE_AND;for(e=0;e<o.length;e++)r=n==CKEDITOR.VALIDATE_AND?r&&o[e](i):r||o[e](i);return!!r||t}},regex:function(e,i){return function(t){return t=this&&this.getValue?this.getValue():t,!!e.test(t)||i}},notEmpty:function(t){return this.regex(g,t)},integer:function(t){return this.regex(E,t)},number:function(t){return this.regex(w,t)},cssLength:function(t){return this.functions(function(t){return T.test(CKEDITOR.tools.trim(t))},t)},htmlLength:function(t){return this.functions(function(t){return C.test(CKEDITOR.tools.trim(t))},t)},inlineStyle:function(t){return this.functions(function(t){return x.test(CKEDITOR.tools.trim(t))},t)},equals:function(e,t){return this.functions(function(t){return t==e},t)},notEqual:function(e,t){return this.functions(function(t){return t!=e},t)}},CKEDITOR.on("instanceDestroyed",function(t){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var e;e=CKEDITOR.dialog._.currentTop;)e.hide();for(var i in D)D[i].remove();D={}}for(var n in t=t.editor._.storedDialogs)t[n].destroy()}),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(t,e){var i=null,n=CKEDITOR.dialog._.dialogDefinitions[t];if(null===CKEDITOR.dialog._.currentTop&&l(this),"function"==typeof n)i=(i=this._.storedDialogs||(this._.storedDialogs={}))[t]||(i[t]=new CKEDITOR.dialog(this,t)),e&&e.call(i,i),i.show();else{if("failed"==n)throw o(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+t+'" failed when loading definition.');"string"==typeof n&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(n),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[t]&&(CKEDITOR.dialog._.dialogDefinitions[t]="failed"),this.openDialog(t,e)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),i}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){e.on("doubleclick",function(t){t.data.dialog&&e.openDialog(t.data.dialog)},null,null,999)}}),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(t){var e=t.addCommand("about",new CKEDITOR.dialogCommand("about"));e.modes={wysiwyg:1,source:1},e.canUndo=!1,e.readOnly=1,t.ui.addButton&&t.ui.addButton("About",{label:t.lang.about.dlgTitle,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(e){var i=this;e.addCommand("a11yHelp",{exec:function(){var t=e.langCode;t=i.availableLangs[t]?t:i.availableLangs[t.replace(/-.*/,"")]?t.replace(/-.*/,""):"en",CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(i.path+"dialogs/lang/"+t+".js"),function(){e.lang.a11yhelp=i.langEntries[t],e.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),e.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),e.on("ariaEditorHelpLabel",function(t){t.data.label=e.lang.common.editorHelp})}}),CKEDITOR.plugins.add("basicstyles",{init:function(r){function t(t,e,i,n){if(n){n=new CKEDITOR.style(n);var o=a[i];o.unshift(n),r.attachStyleStateChange(n,function(t){r.readOnly||r.getCommand(i).setState(t)}),r.addCommand(i,new CKEDITOR.styleCommand(n,{contentForms:o})),r.ui.addButton&&r.ui.addButton(t,{label:e,command:i,toolbar:"basicstyles,"+(s+=10)})}}var s=0,a={bold:["strong","b",["span",function(t){return"bold"==(t=t.styles["font-weight"])||700<=+t}]],italic:["em","i",["span",function(t){return"italic"==t.styles["font-style"]}]],underline:["u",["span",function(t){return"underline"==t.styles["text-decoration"]}]],strike:["s","strike",["span",function(t){return"line-through"==t.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},e=r.config,i=r.lang.basicstyles;t("Bold",i.bold,"bold",e.coreStyles_bold),t("Italic",i.italic,"italic",e.coreStyles_italic),t("Underline",i.underline,"underline",e.coreStyles_underline),t("Strike",i.strike,"strike",e.coreStyles_strike),t("Subscript",i.subscript,"subscript",e.coreStyles_subscript),t("Superscript",i.superscript,"superscript",e.coreStyles_superscript),r.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},bt={exec:function(t){var e=t.getCommand("blockquote").state,i=t.getSelection(),n=i&&i.getRanges()[0];if(n){var o=i.createBookmarks();if(CKEDITOR.env.ie){var r,s=o[0].startNode,a=o[0].endNode;if(s&&"blockquote"==s.getParent().getName())for(r=s;r=r.getNext();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){s.move(r,!0);break}if(a&&"blockquote"==a.getParent().getName())for(r=a;r=r.getPrevious();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){a.move(r);break}}if((l=n.createIterator()).enlargeBr=t.config.enterMode!=CKEDITOR.ENTER_BR,e==CKEDITOR.TRISTATE_OFF){for(s=[];e=l.getNextParagraph();)s.push(e);for(s.length<1&&(e=t.document.createElement(t.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),a=o.shift(),n.insertNode(e),e.append(new CKEDITOR.dom.text("\ufeff",t.document)),n.moveToBookmark(a),n.selectNodeContents(e),n.collapse(!0),a=n.createBookmark(),s.push(e),o.unshift(a)),r=s[0].getParent(),n=[],a=0;a<s.length;a++)e=s[a],r=r.getCommonAncestor(e.getParent());for(e={table:1,tbody:1,tr:1,ol:1,ul:1};e[r.getName()];)r=r.getParent();for(a=null;0<s.length;){for(e=s.shift();!e.getParent().equals(r);)e=e.getParent();e.equals(a)||n.push(e),a=e}for(;0<n.length;)if("blockquote"==(e=n.shift()).getName()){for(a=new CKEDITOR.dom.documentFragment(t.document);e.getFirst();)a.append(e.getFirst().remove()),s.push(a.getLast());a.replace(e)}else s.push(e);for((n=t.document.createElement("blockquote")).insertBefore(s[0]);0<s.length;)e=s.shift(),n.append(e)}else if(e==CKEDITOR.TRISTATE_ON){for(a=[],r={};e=l.getNextParagraph();){for(s=n=null;e.getParent();){if("blockquote"==e.getParent().getName()){n=e.getParent(),s=e;break}e=e.getParent()}n&&s&&!s.getCustomData("blockquote_moveout")&&(a.push(s),CKEDITOR.dom.element.setMarker(r,s,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(r),e=[],s=[],r={};0<a.length;)n=(l=a.shift()).getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),s.push(l.getNext())):l.remove().insertAfter(n):l.remove().insertBefore(n),n.getCustomData("blockquote_processed")||(s.push(n),CKEDITOR.dom.element.setMarker(r,n,"blockquote_processed",!0)),e.push(l);for(CKEDITOR.dom.element.clearAllMarkers(r),a=s.length-1;0<=a;a--){t:{for(var l=0,c=(r=n=s[a]).getChildCount(),u=void 0;l<c&&(u=r.getChild(l));l++)if(u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()){r=!1;break t}r=!0}r&&n.remove()}if(t.config.enterMode==CKEDITOR.ENTER_BR)for(n=!0;e.length;)if("div"==(l=e.shift()).getName()){for(a=new CKEDITOR.dom.documentFragment(t.document),!n||!l.getPrevious()||l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary()||a.append(t.document.createElement("br")),n=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(a);n&&a.append(t.document.createElement("br")),a.replace(l),n=!1}}i.selectBookmarks(o),t.focus()}},refresh:function(t,e){this.setState(t.elementPath(e.block||e.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"},CKEDITOR.plugins.add("blockquote",{init:function(t){t.blockless||(t.addCommand("blockquote",bt),t.ui.addButton&&t.ui.addButton("Blockquote",{label:t.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}}),CKEDITOR.plugins.add("notification",{init:function(r){r._.notificationArea=new Fe(r),r.showNotification=function(t,e,i){var n,o;return"progress"==e?n=i:o=i,(t=new CKEDITOR.plugins.notification(r,{message:t,type:e,progress:n,duration:o})).show(),t},r.on("key",function(t){if(27==t.data.keyCode){var e=r._.notificationArea.notifications;e.length&&(function(t){var e=new CKEDITOR.dom.element("div");e.setStyles({position:"fixed","margin-left":"-9999px"}),e.setAttributes({"aria-live":"assertive","aria-atomic":"true"}),e.setText(t),CKEDITOR.document.getBody().append(e),setTimeout(function(){e.remove()},100)}(r.lang.notification.closed),e[e.length-1].hide(),t.cancel())}})}}),Pe.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(t){var e=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:t})&&(e=!1);var i=this.element,n=i.findOne(".cke_notification_message"),o=i.findOne(".cke_notification_progress"),r=t.type;i.removeAttribute("role"),t.progress&&"progress"!=this.type&&(r="progress"),r&&(i.removeClass(this._getClass()),i.removeAttribute("aria-label"),this.type=r,i.addClass(this._getClass()),i.setAttribute("aria-label",this.type),"progress"!=this.type||o?"progress"!=this.type&&o&&o.remove():(o=this._createProgressElement()).insertBefore(n)),void 0!==t.message&&(this.message=t.message,n.setHtml(this.message)),void 0!==t.progress&&(this.progress=t.progress,o&&o.setStyle("width",this._getPercentageProgress())),e&&t.important&&(i.setAttribute("role","alert"),this.isVisible()||this.area.add(this)),this.duration=t.duration,this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var t,e,i=this,n=this.editor.lang.common.close;return(t=new CKEDITOR.dom.element("div")).addClass("cke_notification"),t.addClass(this._getClass()),t.setAttributes({id:this.id,role:"alert","aria-label":this.type}),"progress"==this.type&&t.append(this._createProgressElement()),(e=new CKEDITOR.dom.element("p")).addClass("cke_notification_message"),e.setHtml(this.message),t.append(e),e=CKEDITOR.dom.element.createFromHtml('<a class="cke_notification_close" href="javascript:void(0)" title="'+n+'" role="button" tabindex="-1"><span class="cke_label">X</span></a>'),t.append(e),e.on("click",function(){i.editor.focus(),i.hide()}),t},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var t=new CKEDITOR.dom.element("span");return t.addClass("cke_notification_progress"),t.setStyle("width",this._getPercentageProgress()),t},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var t,e=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),"number"==typeof this.duration?t=this.duration:"info"!=this.type&&"success"!=this.type||(t="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5e3),t&&(e._hideTimeoutId=setTimeout(function(){e.hide()},t))}},Fe.prototype={add:function(t){this.notifications.push(t),this.element.append(t.element),1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners()),this._layout()},remove:function(t){var e=CKEDITOR.tools.indexOf(this.notifications,t);e<0||(this.notifications.splice(e,1),t.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var t=this.editor,e=t.config,i=new CKEDITOR.dom.element("div");return i.addClass("cke_notifications_area"),i.setAttribute("id","cke_notifications_area_"+t.name),i.setStyle("z-index",e.baseFloatZIndex-2),i},_attachListeners:function(){var t=CKEDITOR.document.getWindow(),e=this.editor;t.on("scroll",this._uiBuffer.input),t.on("resize",this._uiBuffer.input),e.on("change",this._changeBuffer.input),e.on("floatingSpaceLayout",this._layout,this,null,20),e.on("blur",this._layout,this,null,20)},_removeListeners:function(){var t=CKEDITOR.document.getWindow(),e=this.editor;t.removeListener("scroll",this._uiBuffer.input),t.removeListener("resize",this._uiBuffer.input),e.removeListener("change",this._changeBuffer.input),e.removeListener("floatingSpaceLayout",this._layout),e.removeListener("blur",this._layout)},_layout:function(){function t(){o.setStyle("left",g(m+s.width-c-u))}var e,i,n,o=this.element,r=this.editor,s=r.ui.contentsElement.getClientRect(),a=r.ui.contentsElement.getDocumentPosition(),l=o.getClientRect(),c=this._notificationWidth,u=this._notificationMargin,d=(n=CKEDITOR.document.getWindow()).getScrollPosition(),h=n.getViewPaneSize(),p=CKEDITOR.document.getBody(),f=p.getDocumentPosition(),g=CKEDITOR.tools.cssLength;c&&u||(n=this.element.getChild(0),c=this._notificationWidth=n.getClientRect().width,u=this._notificationMargin=parseInt(n.getComputedStyle("margin-left"),10)+parseInt(n.getComputedStyle("margin-right"),10)),r.toolbar&&(i=(e=r.ui.space("top")).getClientRect()),e&&e.isVisible()&&i.bottom>s.top&&i.bottom<s.bottom-l.height?o.setStyles({position:"fixed",top:g(i.bottom)}):0<s.top?o.setStyles({position:"absolute",top:g(a.y)}):a.y+s.height-l.height>d.y?o.setStyles({position:"fixed",top:0}):o.setStyles({position:"absolute",top:g(a.y+s.height-l.height)});var m="fixed"==o.getStyle("position")?s.left:"static"!=p.getComputedStyle("position")?a.x-f.x:a.x;s.width<c+u?a.x+c+u>d.x+h.width?t():o.setStyle("left",g(m)):a.x+c+u>d.x+h.width?o.setStyle("left",g(m)):a.x+s.width/2+c/2+u>d.x+h.width?o.setStyle("left",g(m-a.x+d.x+h.width-c-u)):s.left+s.width-c-u<0?t():s.left+s.width/2-c/2<0?o.setStyle("left",g(m-a.x+d.x)):o.setStyle("left",g(m+s.width/2-c/2-u/2))}},CKEDITOR.plugins.notification=Pe,function(){var t='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');t=(t=t+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"')+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcut}</span>{arrowHtml}</a>';var m=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),v=CKEDITOR.addTemplate("button",t);CKEDITOR.plugins.add("button",{beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(e){CKEDITOR.tools.extend(this,e,{title:e.label,click:e.click||function(t){t.execCommand(e.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(t){return new CKEDITOR.ui.button(t)}},CKEDITOR.ui.button.prototype={render:function(n,t){function e(){var t=n.mode;t&&(t=this.modes[t]?void 0!==f[t]?f[t]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t=n.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:t,this.setState(t),this.refresh&&this.refresh())}var i,o,r,s=CKEDITOR.env,a=this._.id=CKEDITOR.tools.getNextId(),l="",c=this.command;this._.editor=n;var u={id:a,button:this,editor:n,focus:function(){CKEDITOR.document.getById(a).focus()},execute:function(){this.button.click(n)},attach:function(t){this.button.attach(t)}},d=CKEDITOR.tools.addFunction(function(t){if(u.onkey)return t=new CKEDITOR.dom.event(t),!1!==u.onkey(u,t.getKeystroke())}),h=CKEDITOR.tools.addFunction(function(t){var e;return u.onfocus&&(e=!1!==u.onfocus(u,new CKEDITOR.dom.event(t))),e}),p=0;if(u.clickFn=i=CKEDITOR.tools.addFunction(function(){p&&(n.unlockSelection(1),p=0),u.execute(),s.iOS&&n.focus()}),this.modes){var f={};n.on("beforeModeUnload",function(){n.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(f[n.mode]=this._.state)},this),n.on("activeFilterChange",e,this),n.on("mode",e,this),this.readOnly||n.on("readOnly",e,this)}else(c=c&&n.getCommand(c))&&(c.on("state",function(){this.setState(c.state)},this),l+=c.state==CKEDITOR.TRISTATE_ON?"on":c.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&n.on("contentDirChanged",function(t){var e=CKEDITOR.document.getById(this._.id),i=e.getFirst();(t=t.data)!=n.lang.dir?e.addClass("cke_"+t):e.removeClass("cke_ltr").removeClass("cke_rtl"),i.setAttribute("style",CKEDITOR.skin.getIconStyle(g,"rtl"==t,this.icon,this.iconOffset))},this),c?(o=n.getCommandKeystroke(c))&&(r=CKEDITOR.tools.keystrokeToString(n.lang.common.keyboard,o)):l+="off";var g=o=this.name||this.command;return this.icon&&!/\./.test(this.icon)&&(g=this.icon,this.icon=null),l={id:a,name:o,iconName:g,label:this.label,cls:this.className||"",state:l,ariaDisabled:"disabled"==l?"true":"false",title:this.title+(r?" ("+r.display+")":""),ariaShortcut:r?n.lang.common.keyboardShortcut+" "+r.aria:"",titleJs:s.gecko&&!s.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:d,focusFn:h,clickFn:i,style:CKEDITOR.skin.getIconStyle(g,"rtl"==n.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?m.output():""},v.output(l,t),this.onRender&&this.onRender(),u},setState:function(t){if(this._.state==t)return!1;this._.state=t;var e=CKEDITOR.document.getById(this._.id);return!!e&&(e.setState(t,"cke_button"),t==CKEDITOR.TRISTATE_DISABLED?e.setAttribute("aria-disabled",!0):e.removeAttribute("aria-disabled"),this.hasArrow?(t=t==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(t)):t==CKEDITOR.TRISTATE_ON?e.setAttribute("aria-pressed",!0):e.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(t){if(this._.feature)return this._.feature;var e=this;return this.allowedContent||this.requiredContent||!this.command||(e=t.getCommand(this.command)||e),this._.feature=e}},CKEDITOR.ui.prototype.addButton=function(t,e){this.add(t,CKEDITOR.UI_BUTTON,e)}}(),function(){function C(a){function l(t,e){if(e.length){t.items?t.items.push(a.ui.create("-")):t.items=[];for(var i;i=e.shift();)i="string"==typeof i?i:i.name,n&&-1!=CKEDITOR.tools.indexOf(n,i)||(i=a.ui.create(i))&&a.addFeature(i)&&t.items.push(i)}}var n=(n=a.config.removeButtons)&&n.split(","),t=a.config.toolbar;return"string"==typeof t&&(t=a.config["toolbar_"+t]),a.toolbar=t?function(t){var e,i,n,o=[];for(e=0;e<t.length;++e)n={},"/"==(i=t[e])?o.push(i):CKEDITOR.tools.isArray(i)?(l(n,CKEDITOR.tools.clone(i)),o.push(n)):i.items&&(l(n,CKEDITOR.tools.clone(i.items)),n.name=i.name,o.push(n));return o}(t):function(){for(var t=function(){var t,e,i,n={};for(t in a.ui.items)e=a.ui.items[t],i=(i=e.toolbar||"others").split(","),e=i[0],i=parseInt(i[1]||-1,10),n[e]||(n[e]=[]),n[e].push({name:t,order:i});for(e in n)n[e]=n[e].sort(function(t,e){return t.order==e.order?0:e.order<0?-1:t.order<0?1:t.order<e.order?-1:1});return n}(),e=CKEDITOR.tools.clone(a.config.toolbarGroups)||c(a),i=0;i<e.length;i++){var n=e[i];if("/"!=n){"string"==typeof n&&(n=e[i]={name:n});var o,r=n.groups;if(r)for(var s=0;s<r.length;s++)(o=t[o=r[s]])&&l(n,o);(o=t[n.name])&&l(n,o)}}return e}()}function c(t){return t._.toolbarGroups||(t._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}function T(){this.toolbars=[],this.focusCommandExecuted=!1}T.prototype.focus=function(){for(var t,e=0;t=this.toolbars[e++];)for(var i,n=0;i=t.items[n++];)if(i.focus)return void i.focus()};var t={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(t){t.toolbox&&(t.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){t.toolbox.focus()},100):t.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(E){var s,w=function(t,e){var i,n=(o="rtl"==E.lang.dir)?37:39,o=o?39:37,r=void 0===(r=E.config.toolbarGroupCycling)||r;switch(e){case 9:case CKEDITOR.SHIFT+9:for(;!i||!i.items.length;)if((i=9==e?(i?i.next:t.toolbar.next)||E.toolbox.toolbars[0]:(i?i.previous:t.toolbar.previous)||E.toolbox.toolbars[E.toolbox.toolbars.length-1]).items.length)for(t=i.items[s?i.items.length-1:0];t&&!t.focus;)(t=s?t.previous:t.next)||(i=0);return t&&t.focus(),!1;case n:for(i=t;!(i=i.next)&&r&&(i=t.toolbar.items[0]),i&&!i.focus;);return i?i.focus():w(t,9),!1;case 40:return t.button&&t.button.hasArrow?t.execute():w(t,40==e?n:o),!1;case o:case 38:for(i=t;!(i=i.previous)&&r&&(i=t.toolbar.items[t.toolbar.items.length-1]),i&&!i.focus;);return i?i.focus():(s=1,w(t,CKEDITOR.SHIFT+9),s=0),!1;case 27:return E.focus(),!1;case 13:case 32:return t.execute(),!1}return!0};E.on("uiSpace",function(t){if(t.data.space==E.config.toolbarLocation){t.removeListener(),E.toolbox=new T;var e,i,n=['<span id="',o=CKEDITOR.tools.getNextId(),'" class="cke_voice_label">',E.lang.toolbar.toolbars,"</span>",'<span id="'+E.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',o,'" onmousedown="return false;">'],o=!1!==E.config.toolbarStartupExpanded;E.config.toolbarCanCollapse&&E.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&n.push('<span class="cke_toolbox_main"'+(o?">":' style="display:none">'));for(var r=E.toolbox.toolbars,s=C(E),a=s.length,l=0;l<a;l++){var c,u,d,h=0,p=s[l],f="/"!==p&&("/"===s[l+1]||l==a-1);if(p)if(e&&(n.push("</span>"),i=e=0),"/"===p)n.push('<span class="cke_toolbar_break"></span>');else{d=p.items||p;for(var g=0;g<d.length;g++){var m,v=d[g];if(v){function y(t){t=t.render(E,n),0<(b=h.items.push(t)-1)&&(t.previous=h.items[b-1],t.previous.next=t),t.toolbar=h,t.onkey=w,t.onfocus=function(){E.toolbox.focusCommandExecuted||E.focus()}}if(v.type==CKEDITOR.UI_SEPARATOR)i=e&&v;else{if(m=!1!==v.canGroup,!h){c=CKEDITOR.tools.getNextId(),h={id:c,items:[]},u=p.name&&(E.lang.toolbar.toolbarGroups[p.name]||p.name),n.push('<span id="',c,'" class="cke_toolbar'+(f?' cke_toolbar_last"':'"'),u?' aria-labelledby="'+c+'_label"':"",' role="toolbar">'),u&&n.push('<span id="',c,'_label" class="cke_voice_label">',u,"</span>"),n.push('<span class="cke_toolbar_start"></span>');var b=r.push(h)-1;0<b&&(h.previous=r[b-1],h.previous.next=h)}m?e||(n.push('<span class="cke_toolgroup" role="presentation">'),e=1):e&&(n.push("</span>"),e=0),i&&(y(i),i=0),y(v)}}}e&&(n.push("</span>"),i=e=0),h&&n.push('<span class="cke_toolbar_end"></span></span>')}}if(E.config.toolbarCanCollapse&&n.push("</span>"),E.config.toolbarCanCollapse&&E.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var _=CKEDITOR.tools.addFunction(function(){E.execCommand("toolbarCollapse")});E.on("destroy",function(){CKEDITOR.tools.removeFunction(_)}),E.addCommand("toolbarCollapse",{readOnly:1,exec:function(t){var e=t.ui.space("toolbar_collapser"),i=e.getPrevious(),n=t.ui.space("contents"),o=i.getParent(),r=parseInt(n.$.style.height,10),s=o.$.offsetHeight,a=e.hasClass("cke_toolbox_collapser_min");a?(i.show(),e.removeClass("cke_toolbox_collapser_min"),e.setAttribute("title",t.lang.toolbar.toolbarCollapse)):(i.hide(),e.addClass("cke_toolbox_collapser_min"),e.setAttribute("title",t.lang.toolbar.toolbarExpand)),e.getFirst().setText(a?"▲":"◀"),n.setStyle("height",r-(o.$.offsetHeight-s)+"px"),t.fire("resize",{outerHeight:t.container.$.offsetHeight,contentsHeight:n.$.offsetHeight,outerWidth:t.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),E.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),n.push('<a title="'+(o?E.lang.toolbar.toolbarCollapse:E.lang.toolbar.toolbarExpand)+'" id="'+E.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),o||n.push(" cke_toolbox_collapser_min"),n.push('" onclick="CKEDITOR.tools.callFunction('+_+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}n.push("</span>"),t.data.html+=n.join("")}}),E.on("destroy",function(){if(this.toolbox){var t,e,i,n,o=0;for(t=this.toolbox.toolbars;o<t.length;o++)for(i=t[o].items,e=0;e<i.length;e++)(n=i[e]).clickFn&&CKEDITOR.tools.removeFunction(n.clickFn),n.keyDownFn&&CKEDITOR.tools.removeFunction(n.keyDownFn)}}),E.on("uiReady",function(){var t=E.ui.space("toolbox");t&&E.focusManager.add(t,1)}),E.addCommand("toolbarFocus",t),E.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),E.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),E.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(t,e){return e.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(t,e,i){var n=c(this.editor),o=0===e,r={name:t};if(i){if(i=CKEDITOR.tools.search(n,function(t){return t.name==i}))return i.groups||(i.groups=[]),e&&0<=(e=CKEDITOR.tools.indexOf(i.groups,e))?void i.groups.splice(e+1,0,t):void(o?i.groups.splice(0,0,t):i.groups.push(t));e=null}e=e&&CKEDITOR.tools.indexOf(n,function(t){return t.name==e}),o?n.splice(0,0,t):"number"==typeof e?n.splice(e+1,0,r):n.push(t)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",CKEDITOR.plugins.add("clipboard",{requires:"notification,toolbar",init:function(s){var t,a=$e();if(s.config.forcePasteAsPlainText?t="plain-text":s.config.pasteFilter?t=s.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in s.config||(t="semantic-content"),s.pasteFilter=a.get(t),He(s),We(s),CKEDITOR.env.gecko){var o,r=["image/png","image/jpeg","image/gif"];s.on("paste",function(t){var e=t.data,i=e.dataTransfer;if(!e.dataValue&&"paste"==e.method&&i&&1==i.getFilesCount()&&o!=i.id&&(i=i.getFile(0),-1!=CKEDITOR.tools.indexOf(r,i.type))){var n=new FileReader;n.addEventListener("load",function(){t.data.dataValue='<img src="'+n.result+'" />',s.fire("paste",t.data)},!1),n.addEventListener("abort",function(){s.fire("paste",t.data)},!1),n.addEventListener("error",function(){s.fire("paste",t.data)},!1),n.readAsDataURL(i),o=e.dataTransfer.id,t.stop()}},null,null,1)}s.on("paste",function(t){if(t.data.dataTransfer||(t.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!t.data.dataValue){var e=t.data.dataTransfer,i=e.getData("text/html");i?(t.data.dataValue=i,t.data.type="html"):(i=e.getData("text/plain"))&&(t.data.dataValue=s.editable().transformPlainTextToHtml(i),t.data.type="text")}},null,null,1),s.on("paste",function(i){var t=i.data.dataValue,n=CKEDITOR.dtd.$block;if(-1<t.indexOf("Apple-")&&(t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=i.data.type&&(t=t.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(t,e){return e.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<t.indexOf('<br class="Apple-interchange-newline">')&&(i.data.startsWithEOL=1,i.data.preSniffing="html",t=t.replace(/<br class="Apple-interchange-newline">/,"")),t=t.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),t.match(/^<[^<]+cke_(editable|contents)/i)){var e,o,r=new CKEDITOR.dom.element("div");for(r.setHtml(t);1==r.getChildCount()&&(e=r.getFirst())&&e.type==CKEDITOR.NODE_ELEMENT&&(e.hasClass("cke_editable")||e.hasClass("cke_contents"));)r=o=e;o&&(t=o.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?t=t.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(t,e){return e.toLowerCase()in n?(i.data.preSniffing="html","<"+e):t}):CKEDITOR.env.webkit?t=t.replace(/<\/(\w+)><div><br><\/div>$/,function(t,e){return e in n?(i.data.endsWithEOL=1,"</"+e+">"):t}):CKEDITOR.env.gecko&&(t=t.replace(/(\s)<br>$/,"$1")),i.data.dataValue=t},null,null,3),s.on("paste",function(t){t=t.data;var e,i=s._.nextPasteType||t.type,n=t.dataValue,o=s.config.clipboard_defaultContentType||"html",r=t.dataTransfer.getTransferType(s);e="html"==i||"html"==t.preSniffing?"html":function(t){if(CKEDITOR.env.webkit){if(!t.match(/^[^<]*$/g)&&!t.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!t.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!t.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!t.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}(n),delete s._.nextPasteType,"htmlifiedtext"==e&&(n=ze(s.config,n)),"text"==i&&"html"==e?n=Ve(s,n,a.get("plain-text")):r==CKEDITOR.DATA_TRANSFER_EXTERNAL&&s.pasteFilter&&!t.dontFilter&&(n=Ve(s,n,s.pasteFilter)),t.startsWithEOL&&(n='<br data-cke-eol="1">'+n),t.endsWithEOL&&(n+='<br data-cke-eol="1">'),"auto"==i&&(i="html"==e||"html"==o?"html":"text"),t.type=i,t.dataValue=n,delete t.preSniffing,delete t.startsWithEOL,delete t.endsWithEOL},null,null,6),s.on("paste",function(t){(t=t.data).dataValue&&(s.insertHtml(t.dataValue,t.type,t.range),setTimeout(function(){s.fire("afterPaste")},0))},null,null,1e3)}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:(!CKEDITOR.env.ie||16<=CKEDITOR.env.version)&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",canClipboardApiBeTrusted:function(t,e){return!!(t.getTransferType(e)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!t.isEmpty()||CKEDITOR.env.gecko&&(t.getData("text/html")||t.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.edge&&16<=CKEDITOR.env.version)},getDropTarget:function(t){var e=t.editable();return CKEDITOR.env.ie&&CKEDITOR.env.version<9||e.isInline()?e:t.document},fixSplitNodesAfterDrop:function(t,o,e,i){function n(t,e,i){var n=t;if(n.type==CKEDITOR.NODE_TEXT&&(n=t.getParent()),n.equals(e)&&i!=e.getChildCount())return t=o.startContainer.getChild(o.startOffset-1),e=o.startContainer.getChild(o.startOffset),t&&t.type==CKEDITOR.NODE_TEXT&&e&&e.type==CKEDITOR.NODE_TEXT&&(i=t.getLength(),t.setText(t.getText()+e.getText()),e.remove(),o.setStart(t,i),o.collapse(!0)),!0}var r=o.startContainer;"number"==typeof i&&"number"==typeof e&&r.type==CKEDITOR.NODE_ELEMENT&&(n(t.startContainer,r,e)||n(t.endContainer,r,i))},isDropRangeAffectedByDragRange:function(t,e){var i=e.startContainer,n=e.endOffset;return!!(t.endContainer.equals(i)&&t.endOffset<=n||t.startContainer.getParent().equals(i)&&t.startContainer.getIndex()<n||t.endContainer.getParent().equals(i)&&t.endContainer.getIndex()<n)},internalDrop:function(t,e,i,n){var o,r,s=CKEDITOR.plugins.clipboard,a=n.editable();n.fire("saveSnapshot"),n.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&CKEDITOR.env.version<10&&this.fixSplitNodesAfterDrop(t,e,s.dragStartContainerChildCount,s.dragEndContainerChildCount),(r=this.isDropRangeAffectedByDragRange(t,e))||(o=t.createBookmark(!1)),s=e.clone().createBookmark(!1),r&&(o=t.createBookmark(!1)),t=o.startNode,e=o.endNode,r=s.startNode,e&&t.getPosition(r)&CKEDITOR.POSITION_PRECEDING&&e.getPosition(r)&CKEDITOR.POSITION_FOLLOWING&&r.insertBefore(t),(t=n.createRange()).moveToBookmark(o),a.extractHtmlFromRange(t,1),(e=n.createRange()).moveToBookmark(s),Be(n,{dataTransfer:i,method:"drop",range:e},1),n.fire("unlockSnapshot")},getRangeAtDropPosition:function(t,e){var i=t.data.$,n=i.clientX,o=i.clientY,r=e.getSelection(!0).getRanges()[0],s=e.createRange();if(t.data.testRange)return t.data.testRange;if(document.caretRangeFromPoint&&e.document.$.caretRangeFromPoint(n,o))i=e.document.$.caretRangeFromPoint(n,o),s.setStart(CKEDITOR.dom.node(i.startContainer),i.startOffset),s.collapse(!0);else if(i.rangeParent)s.setStart(CKEDITOR.dom.node(i.rangeParent),i.rangeOffset),s.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&r&&e.editable().hasFocus)return r;if(!document.body.createTextRange)return null;e.focus(),i=e.document.getBody().$.createTextRange();try{for(var a=!1,l=0;l<20&&!a;l++){if(!a)try{i.moveToPoint(n,o-l),a=!0}catch(t){}if(!a)try{i.moveToPoint(n,o+l),a=!0}catch(t){}}if(a){var c="cke-temp-"+(new Date).getTime();i.pasteHTML('<span id="'+c+'">​</span>');var u=e.document.getById(c);s.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START),u.remove()}else{var d=e.document.$.elementFromPoint(n,o),h=new CKEDITOR.dom.element(d);if(h.equals(e.editable())||"html"==h.getName())return r&&r.startContainer&&!r.startContainer.equals(e.editable())?r:null;n<h.getClientRect().left?s.setStartAt(h,CKEDITOR.POSITION_AFTER_START):s.setStartAt(h,CKEDITOR.POSITION_BEFORE_END),s.collapse(!0)}}catch(t){return null}}return s},initDragDataTransfer:function(t,e){var i=t.data.$?t.data.$.dataTransfer:null,n=new this.dataTransfer(i,e);"dragstart"===t.name&&n.storeId(),i?this.dragData&&n.id==this.dragData.id?n=this.dragData:this.dragData=n:this.dragData?n=this.dragData:this.dragData=n,t.data.dataTransfer=n},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(t,e){if(this.isCustomCopyCutSupported){if(t&&t.data&&t.data.$){var i=t.data.$.clipboardData,n=new this.dataTransfer(i,e);return"copy"!==t.name&&"cut"!==t.name||n.storeId(),this.copyCutData&&n.id==this.copyCutData.id?(n=this.copyCutData).$=i:this.copyCutData=n,n}return new this.dataTransfer(null,e)}return new this.dataTransfer(CKEDITOR.env.edge&&t&&t.data.$&&t.data.$.clipboardData||null,e)},preventDefaultDropOnElement:function(t){t&&t.on("dragover",je)}},_t=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(t,e){t&&(this.$=t),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(t){return"text"==(t=t.toLowerCase())||"text/plain"==t?"Text":"url"==t?"URL":t}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(_t),this.id||(this.id="Text"==_t?"":"cke-"+CKEDITOR.tools.getUniqueId()),e&&(this.sourceEditor=e,this.setData("text/html",e.getSelectedHtml(1)),"Text"==_t||this.getData("text/plain")||this.setData("text/plain",e.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(t,e){if(null==(n="text/html"==(t=this._.normalizeType(t))&&e?this._.nativeHtmlCache:this._.data[t])||""===n){if(this._.fallbackDataTransfer.isRequired())n=this._.fallbackDataTransfer.getData(t,e);else try{n=this.$.getData(t)||""}catch(t){n=""}"text/html"!=t||e||(n=this._stripHtml(n))}if("Text"==t&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==n.substring(0,7)&&(n=""),"string"==typeof n)var i=n.indexOf("</html>"),n=-1!==i?n.substring(0,i+7):n;return n},setData:function(t,e){if("text/html"==(t=this._.normalizeType(t))?(this._.data[t]=this._stripHtml(e),this._.nativeHtmlCache=e):this._.data[t]=e,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==t||"Text"==t)if("Text"==_t&&"Text"==t&&(this.id=e),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(t,e);else try{this.$.setData(t,e)}catch(t){}},storeId:function(){"Text"!=_t&&this.setData(_t,this.id)},getTransferType:function(t){return this.sourceEditor?this.sourceEditor==t?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function t(t){t=n._.normalizeType(t);var e=n.getData(t);"text/html"==t&&(n._.nativeHtmlCache=n.getData(t,!0),e=n._stripHtml(e)),e&&(n._.data[t]=e)}if(this.$){var e,i,n=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(e=0;e<this.$.types.length;e++)t(this.$.types[e])}else t("Text"),t("URL");if(i=this._getImageFromClipboard(),this.$&&this.$.files||i){if(this._.files=[],this.$.files&&this.$.files.length)for(e=0;e<this.$.files.length;e++)this._.files.push(this.$.files[e]);0===this._.files.length&&i&&this._.files.push(i)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(t){return this._.files.length?this._.files[t]:this.$&&this.$.files&&this.$.files.length?this.$.files[t]:0===t?this._getImageFromClipboard():void 0},isEmpty:function(){var t,e={};if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.objectKeys(this._.data),function(t){e[t]=1}),this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var i=0;i<this.$.types.length;i++)e[this.$.types[i]]=1}else e.Text=1,e.URL=1;for(t in"Text"!=_t&&(e[_t]=0),e)if(e[t]&&""!==this.getData(t))return!1;return!0},_getImageFromClipboard:function(){var t;if(this.$&&this.$.items&&this.$.items[0])try{if((t=this.$.items[0].getAsFile())&&t.type)return t}catch(t){}},_stripHtml:function(t){if(t&&t.length){t=t.replace(this._.metaRegExp,"");var e=this._.bodyRegExp.exec(t);e&&e.length&&(t=(t=e[1]).replace(this._.fragmentRegExp,""))}return t}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(t){this._dataTransfer=t,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var t=CKEDITOR.plugins.clipboard.fallbackDataTransfer,e=this._dataTransfer.$;if(null===t._isCustomMimeTypeSupported){if(!e)return!1;t._isCustomMimeTypeSupported=!1;try{e.setData("cke/mimetypetest","cke test value"),t._isCustomMimeTypeSupported="cke test value"===e.getData("cke/mimetypetest"),e.clearData("cke/mimetypetest")}catch(t){}}return!t._isCustomMimeTypeSupported},getData:function(t,e){var i=this._getData(this._customDataFallbackType,!0);if(e)return i;i=this._extractDataComment(i);var n=null;return null!==(n=t===this._customDataFallbackType?i.content:i.data&&i.data[t]?i.data[t]:this._getData(t,!0))?n:""},setData:function(e,t){(o=e===this._customDataFallbackType)&&(t=this._applyDataComment(t,this._getFallbackTypeData()));var i=t,n=this._dataTransfer.$;try{n.setData(e,i),o&&(this._dataTransfer._.nativeHtmlCache=i)}catch(t){if(this._isUnsupportedMimeTypeError(t)){o=CKEDITOR.plugins.clipboard.fallbackDataTransfer,-1===CKEDITOR.tools.indexOf(o._customTypes,e)&&o._customTypes.push(e);var o=this._getFallbackTypeContent(),r=this._getFallbackTypeData();r[e]=i;try{i=this._applyDataComment(o,r),n.setData(this._customDataFallbackType,i),this._dataTransfer._.nativeHtmlCache=i}catch(t){i=""}}}return i},_getData:function(t,e){var i=this._dataTransfer._.data;if(!e&&i[t])return i[t];try{return this._dataTransfer.$.getData(t)}catch(t){return null}},_getFallbackTypeContent:function(){var t=this._dataTransfer._.data[this._customDataFallbackType];return t=t||this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content},_getFallbackTypeData:function(){var t=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,e=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},i=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(t,function(t){void 0!==i[t]?e[t]=i[t]:void 0!==e[t]&&(e[t]=e[t])},this),e},_isUnsupportedMimeTypeError:function(t){return t.message&&-1!==t.message.search(/element not found/gi)},_extractDataComment:function(t){var e,i={data:null,content:t||""};return t&&16<t.length&&(e=/\x3c!--cke-data:(.*?)--\x3e/g.exec(t))&&e[1]&&(i.data=JSON.parse(decodeURIComponent(e[1])),i.content=t.replace(e[0],"")),i},_applyDataComment:function(t,e){var i="";return e&&CKEDITOR.tools.objectKeys(e).length&&(i="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(e))+"--\x3e"),i+(t&&t.length?t:"")}},CKEDITOR.config.clipboard_notificationDuration=1e4,function(){CKEDITOR.plugins.add("panel",{beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(t,e){e&&CKEDITOR.tools.extend(this,e),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=t,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(t){return new CKEDITOR.ui.panel(t)}};var o=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),r=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),s=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(t,e){this.getHolderElement=function(){if(!(e=this._.holder)){if(this.isFramed){var t=(e=this.document.getById(this.id+"_frame")).getParent(),e=e.getFrameDocument();CKEDITOR.env.iOS&&t.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),t=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),e.write(s.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+t+");"},i))),e.getWindow().$.CKEDITOR=CKEDITOR,e.on("keydown",function(t){var e=t.data.getKeystroke(),i=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(e)?t.data.preventDefault():27!=e&&e!=("rtl"==i?39:37)||!this.onEscape||!1!==this.onEscape(e)||t.data.preventDefault()},this),(e=e.getBody()).unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(t)}else e=this.document.getById(this.id);this._.holder=e}return e};var i={editorId:t.id,id:this.id,langCode:t.langCode,dir:t.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":t.config.baseFloatZIndex+1};if(this.isFramed){var n=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";i.frame=r.output({id:this.id+"_frame",src:n})}return n=o.output(i),e&&e.push(n),n},addBlock:function(t,e){return e=this._.blocks[t]=e instanceof CKEDITOR.ui.panel.block?e:new CKEDITOR.ui.panel.block(this.getHolderElement(),e),this._.currentBlock||this.showBlock(t),e},getBlock:function(t){return this._.blocks[t]},showBlock:function(t){t=this._.blocks[t];var e=this._.currentBlock,i=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return e&&e.hide(),this._.currentBlock=t,CKEDITOR.fire("ariaWidget",i),t._.focusIndex=-1,this._.onKeyDown=t.onKeyDown&&CKEDITOR.tools.bind(t.onKeyDown,t),t.show(),t},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(t,e){this.element=t.append(t.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),e&&CKEDITOR.tools.extend(this,e),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(t){-1!=t&&(t=this.element.getElementsByTag("a").getItem(this._.focusIndex=t),CKEDITOR.env.webkit&&t.getDocument().getWindow().focus(),t.focus(),this.onMark&&this.onMark(t))},markFirstDisplayed:function(t){function e(t){return t.type==CKEDITOR.NODE_ELEMENT&&"none"==t.getStyle("display")}for(var i,n,o=this._.getItems(),r=o.count()-1;0<=r;r--)if((i=o.getItem(r)).getAscendant(e)||(n=i,this._.focusIndex=r),"true"==i.getAttribute("aria-selected")){n=i,this._.focusIndex=r;break}n&&(t&&t(),CKEDITOR.env.webkit&&n.getDocument().getWindow().focus(),n.focus(),this.onMark&&this.onMark(n))},getItems:function(){return this.element.getElementsByTag("a")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(t,e){switch(o=this.keys[t]){case"next":for(var i,n=this._.focusIndex,o=this.element.getElementsByTag("a");i=o.getItem(++n);)if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=n,i.focus();break}return!i&&!e&&(this._.focusIndex=-1,this.onKeyDown(t,1));case"prev":for(n=this._.focusIndex,o=this.element.getElementsByTag("a");0<n&&(i=o.getItem(--n));){if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=n,i.focus();break}i=null}return!i&&!e&&(this._.focusIndex=o.count(),this.onKeyDown(t,1));case"click":case"mouseup":return(i=0<=(n=this._.focusIndex)&&this.element.getElementsByTag("a").getItem(n))&&(i.$[o]?i.$[o]():i.$["on"+o]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),Et={},CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(t,e,i,n){function o(){l.hide()}i.forceIFrame=1,i.toolbarRelated&&t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(e=CKEDITOR.document.getById("cke_"+t.name));var r=e.getDocument(),s=(n=function(t,e,i,n,o){o=CKEDITOR.tools.genKey(e.getUniqueId(),i.getUniqueId(),t.lang.dir,t.uiColor||"",n.css||"",o||"");var r=Et[o];return r||((r=Et[o]=new CKEDITOR.ui.panel(e,n)).element=i.append(CKEDITOR.dom.element.createFromHtml(r.render(t),e)),r.element.setStyles({display:"none",position:"absolute"})),r}(t,r,e,i,n||0)).element,a=s.getFirst(),l=this;s.disableContextMenu(),this.element=s,this._={editor:t,panel:n,parentElement:e,definition:i,document:r,iframe:a,children:[],dir:t.lang.dir,showBlockParams:null},t.on("mode",o),t.on("resize",o),r.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(t,e){return this._.panel.addBlock(t,e)},addListBlock:function(t,e){return this._.panel.addListBlock(t,e)},getBlock:function(t){return this._.panel.getBlock(t)},showBlock:function(t,e,i,n,o,a){var l=this._.panel,c=l.showBlock(t);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var r=this._.editor.editable();this._.returnFocus=r.hasFocus?r:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var u=this.element,s=(r=this._.iframe,r=CKEDITOR.env.ie&&!CKEDITOR.env.edge?r:new CKEDITOR.dom.window(r.$.contentWindow),u.getDocument()),d=this._.parentElement.getPositionedAncestor(),h=e.getDocumentPosition(s),p=(s=d?d.getDocumentPosition(s):{x:0,y:0},"rtl"==this._.dir),f=h.x+(n||0)-s.x,g=h.y+(o||0)-s.y;!p||1!=i&&4!=i?p||2!=i&&3!=i||(f+=e.$.offsetWidth-1):f+=e.$.offsetWidth,3!=i&&4!=i||(g+=e.$.offsetHeight-1),this._.panel._.offsetParentId=e.getId(),u.setStyles({top:g+"px",left:0,display:""}),u.setOpacity(0),u.getFirst().removeStyle("width"),this._.editor.focusManager.add(r),this._.blurSet||(CKEDITOR.event.useCapture=!0,r.on("blur",function(t){function e(){delete this._.returnFocus,this.hide()}this.allowBlur()&&t.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(e,0,this)):e.call(this))},this),r.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(r.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),r.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),l.onEscape=CKEDITOR.tools.bind(function(t){if(this.onEscape&&!1===this.onEscape(t))return!1},this),CKEDITOR.tools.setTimeout(function(){var t=CKEDITOR.tools.bind(function(){if((i=u).removeStyle("width"),c.autoSize){var t=c.element.getDocument();t=(CKEDITOR.env.webkit||CKEDITOR.env.edge?c.element:t.getBody()).$.scrollWidth,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<t&&(t+=(i.$.offsetWidth||0)-(i.$.clientWidth||0)+3),i.setStyle("width",t+10+"px"),t=c.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<t&&(t+=(i.$.offsetHeight||0)-(i.$.clientHeight||0)+3),i.setStyle("height",t+"px"),l._.currentBlock.element.setStyle("display","none").removeStyle("display")}else i.removeStyle("height");p&&(f-=u.$.offsetWidth),u.setStyle("left",f+"px"),t=l.element.getWindow();var e,i=u.$.getBoundingClientRect(),n=(t=t.getViewPaneSize(),i.width||i.right-i.left),o=i.height||i.bottom-i.top,r=p?i.right:t.width-i.left,s=p?t.width-i.right:i.left;p?r<n&&(f=n<s?f+n:t.width>n?f-i.left:f-i.right+t.width):r<n&&(f=n<s?f-n:t.width>n?f-i.right+t.width:f-i.left),n=i.top,t.height-i.top<o&&(g=o<n?g-o:t.height>o?g-i.bottom+t.height:g-i.top),CKEDITOR.env.ie&&("html"==(t=i=new CKEDITOR.dom.element(u.$.offsetParent)).getName()&&(t=t.getDocument().getBody()),"rtl"==t.getComputedStyle("direction")&&(f=CKEDITOR.env.ie8Compat?f-2*u.getDocument().getDocumentElement().$.scrollLeft:f-(i.$.scrollWidth-i.$.clientWidth))),(e=(i=u.getFirst()).getCustomData("activePanel"))&&e.onHide&&e.onHide.call(this,1),i.setCustomData("activePanel",this),u.setStyles({top:g+"px",left:f+"px"}),u.setOpacity(1),a&&a()},this);l.isLoaded?t():l.onLoad=t,CKEDITOR.tools.setTimeout(function(){var t=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),c.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=t),this.allowBlur(!0),CKEDITOR.env.ie?CKEDITOR.tools.setTimeout(function(){c.markFirstDisplayed?c.markFirstDisplayed():c._.markFirstDisplayed()},0):c.markFirstDisplayed?c.markFirstDisplayed():c._.markFirstDisplayed(),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var t=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,t))},focus:function(){if(CKEDITOR.env.webkit){var t=CKEDITOR.document.getActive();t&&!t.equals(this._.iframe)&&t.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var t=this._.iframe.getFrameDocument().getActive();t&&t.is("a")&&(this._.lastFocused=t)},hide:function(t){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(t=t&&this._.returnFocus)&&(CKEDITOR.env.webkit&&t.type&&t.getWindow().$.focus(),t.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(t){var e=this._.panel;return void 0!==t&&(e.allowBlur=t),e.allowBlur},showAsChild:function(t,e,i,n,o,r){this._.activeChild==t&&t._.panel._.offsetParentId==i.getId()||(this.hideChild(),t.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=t,this._.focused=!1,t.showBlock(e,i,n,o,r),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){t.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(t){var e=this._.activeChild;e&&(delete e.onHide,delete this._.activeChild,e.hide(),t&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var t,e=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(t in Et){var i=Et[t];e?i.destroy():i.element.hide()}e&&(Et={})}),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(t){for(var e=t.config.menu_groups.split(","),i=t._.menuGroups={},n=t._.menuItems={},o=0;o<e.length;o++)i[e[o]]=o+1;t.addMenuGroup=function(t,e){i[t]=e||100},t.addMenuItem=function(t,e){i[e.group]&&(n[t]=new CKEDITOR.menuItem(this,t,e))},t.addMenuItems=function(t){for(var e in t)this.addMenuItem(e,t[e])},t.getMenuItem=function(t){return n[t]},t.removeMenuItem=function(t){delete n[t]}}}),function(){var t='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{label}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"');t=t+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">';var p=CKEDITOR.addTemplate("menuItem",t+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>'),f=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),g=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(t,e){e=this._.definition=e||{},this.id=CKEDITOR.tools.getNextId(),this.editor=t,this.items=[],this._.listeners=[],this._.level=e.level||1;var i=CKEDITOR.tools.extend({},e.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),n=i.block.attributes=i.attributes||{};n.role||(n.role="menu"),this._.panelDefinition=i},_:{onShow:function(){var t=this.editor.getSelection(),e=t&&t.getStartElement(),i=this.editor.elementPath(),n=this._.listeners;this.removeAll();for(var o=0;o<n.length;o++){var r=n[o](e,t,i);if(r)for(var s in r){var a=this.editor.getMenuItem(s);!a||a.command&&!this.editor.getCommand(a.command).state||(a.state=r[s],this.add(a))}}},onClick:function(t){this.hide(),t.onClick?t.onClick():t.command&&this.editor.execCommand(t.command)},onEscape:function(t){var e=this.parent;return e?e._.panel.hideChild(1):27==t&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(t){var e=this._.subMenu,i=this.items[t];if(i=i.getItems&&i.getItems()){for(var n in e?e.removeAll():((e=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0))).parent=this,e._.onClick=CKEDITOR.tools.bind(this._.onClick,this)),i){var o=this.editor.getMenuItem(n);o&&(o.state=i[n],e.add(o))}var r=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(t));setTimeout(function(){e.show(r,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(t){t.order||(t.order=this.items.length),this.items.push(t)},removeAll:function(){this.items=[]},show:function(t,e,i,n){if(this.parent||(this._.onShow(),this.items.length)){e=e||("rtl"==this.editor.lang.dir?2:1);var o=this.items,r=this.editor,s=this._.panel,a=this._.element;if(!s)(s=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level)).onEscape=CKEDITOR.tools.bind(function(t){if(!1===this._.onEscape(t))return!1},this),s.onShow=function(){s._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},s.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),(a=s.addBlock(this.id,this._.panelDefinition.block)).autoSize=!0,(l=a.keys)[40]="next",l[9]="next",l[38]="prev",l[CKEDITOR.SHIFT+9]="prev",l["rtl"==r.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",l[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(l[13]="mouseup"),(l=(a=this._.element=a.element).getDocument()).getBody().setStyle("overflow","hidden"),l.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(t){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,r.config.menu_subMenuDelay||400,this,[t])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(t){var e=this.items[t];e.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):e.getItems?this._.showSubMenu(t):this._.onClick(e)},this);!function(t){t.sort(function(t,e){return t.group<e.group?-1:t.group>e.group?1:t.order<e.order?-1:t.order>e.order?1:0})}(o);for(var l=['<div class="cke_menu'+((l=r.elementPath())&&l.direction()!=r.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],c=o.length,u=c&&o[0].group,d=0;d<c;d++){var h=o[d];u!=h.group&&(l.push('<div class="cke_menuseparator" role="separator"></div>'),u=h.group),h.render(this,d,l)}l.push("</div>"),a.setHtml(l.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(s,this.id,t,e,i,n):s.showBlock(this.id,t,e,i,n),r.fire("menuShow",[s])}},addListener:function(t){this._.listeners.push(t)},hide:function(t){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(t)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(t,e,i){CKEDITOR.tools.extend(this,i,{order:0,className:"cke_menubutton__"+e}),this.group=t._.menuGroups[this.group],this.editor=t,this.name=e},proto:{render:function(t,e,i){var n,o,r=t.id+String(e),s=void 0===this.state?CKEDITOR.TRISTATE_OFF:this.state,a="",l=this.editor,c=s==CKEDITOR.TRISTATE_ON?"on":s==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(a=' aria-checked="'+(s==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var u=this.getItems,d="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",h=this.name;this.icon&&!/\./.test(this.icon)&&(h=this.icon),this.command&&(n=l.getCommand(this.command),(n=l.getCommandKeystroke(n))&&(o=CKEDITOR.tools.keystrokeToString(l.lang.common.keyboard,n))),t={id:r,name:this.name,iconName:h,label:this.label,cls:this.className||"",state:c,hasPopup:u?"true":"false",disabled:s==CKEDITOR.TRISTATE_DISABLED,title:this.label+(o?" ("+o.display+")":""),ariaShortcut:o?l.lang.common.keyboardShortcut+" "+o.aria:"",href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:t._.itemOverFn,moveOutFn:t._.itemOutFn,clickFn:t._.itemClickFn,index:e,iconStyle:CKEDITOR.skin.getIconStyle(h,"rtl"==this.editor.lang.dir,h==this.icon?null:this.icon,this.iconOffset),shortcutHtml:o?g.output({shortcut:o.display}):"",arrowHtml:u?f.output({label:d}):"",role:this.role?this.role:"menuitem",ariaChecked:a},p.output(t,i)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(t){this.base.call(this,t,{panel:{className:"cke_menu_panel",attributes:{"aria-label":t.lang.contextmenu.options}}})},proto:{addTarget:function(t,s){if(t.on("contextmenu",function(t){t=t.data;var e=CKEDITOR.env.webkit?a:CKEDITOR.env.mac?t.$.metaKey:t.$.ctrlKey;if(!s||!e){if(t.preventDefault(),CKEDITOR.env.mac&&CKEDITOR.env.webkit){e=this.editor;(i=new CKEDITOR.dom.elementPath(t.getTarget(),e.editable()).contains(function(t){return t.hasAttribute("contenteditable")},!0))&&"false"==i.getAttribute("contenteditable")&&e.getSelection().fake(i)}var i=t.getTarget().getDocument(),n=t.getTarget().getDocument().getDocumentElement(),o=(e=!i.equals(CKEDITOR.document),i=i.getWindow().getScrollPosition(),e?t.$.clientX:t.$.pageX||i.x+t.$.clientX),r=e?t.$.clientY:t.$.pageY||i.y+t.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(n,null,o,r)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){function e(){a=0}var a;t.on("keydown",function(t){a=CKEDITOR.env.mac?t.data.$.metaKey:t.data.$.ctrlKey}),t.on("keyup",e),t.on("contextmenu",e)}},open:function(t,e,i,n){!1!==this.editor.config.enableContextMenu&&(this.editor.focus(),t=t||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(t,e,i,n))}}})},beforeInit:function(t){var e=t.contextMenu=new CKEDITOR.plugins.contextMenu(t);t.on("contentDom",function(){e.addTarget(t.editable(),!1!==t.config.browserContextMenuOnCtrl)}),t.addCommand("contextMenu",{exec:function(){t.contextMenu.open(t.document.getBody())}}),t.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),t.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),CKEDITOR.plugins.add("resize",{init:function(o){function e(t){var e=l.width,i=l.height,n=e+(t.data.$.screenX-a.x)*("rtl"==s?-1:1);t=i+(t.data.$.screenY-a.y),u&&(e=Math.max(r.resize_minWidth,Math.min(n,r.resize_maxWidth))),d&&(i=Math.max(r.resize_minHeight,Math.min(t,r.resize_maxHeight))),o.resize(u?e:null,i)}function i(){CKEDITOR.document.removeListener("mousemove",e),CKEDITOR.document.removeListener("mouseup",i),o.document&&(o.document.removeListener("mousemove",e),o.document.removeListener("mouseup",i))}var r=o.config,n=o.ui.spaceId("resizer"),s=o.element?o.element.getDirection(1):"ltr";if(r.resize_dir||(r.resize_dir="vertical"),void 0===r.resize_maxWidth&&(r.resize_maxWidth=3e3),void 0===r.resize_maxHeight&&(r.resize_maxHeight=3e3),void 0===r.resize_minWidth&&(r.resize_minWidth=750),void 0===r.resize_minHeight&&(r.resize_minHeight=250),!1!==r.resize_enabled){var a,l,c=null,u=("both"==r.resize_dir||"horizontal"==r.resize_dir)&&r.resize_minWidth!=r.resize_maxWidth,d=("both"==r.resize_dir||"vertical"==r.resize_dir)&&r.resize_minHeight!=r.resize_maxHeight,h=CKEDITOR.tools.addFunction(function(t){c=c||o.getResizable(),l={width:c.$.offsetWidth||0,height:c.$.offsetHeight||0},a={x:t.screenX,y:t.screenY},r.resize_minWidth>l.width&&(r.resize_minWidth=l.width),r.resize_minHeight>l.height&&(r.resize_minHeight=l.height),CKEDITOR.document.on("mousemove",e),CKEDITOR.document.on("mouseup",i),o.document&&(o.document.on("mousemove",e),o.document.on("mouseup",i)),t.preventDefault&&t.preventDefault()});o.on("destroy",function(){CKEDITOR.tools.removeFunction(h)}),o.on("uiSpace",function(t){if("bottom"==t.data.space){var e="";u&&!d&&(e=" cke_resizer_horizontal"),!u&&d&&(e=" cke_resizer_vertical");var i='<span id="'+n+'" class="cke_resizer'+e+" cke_resizer_"+s+'" title="'+CKEDITOR.tools.htmlEncode(o.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+h+', event)">'+("ltr"==s?"◢":"◣")+"</span>";"ltr"==s&&"ltr"==e?t.data.html+=i:t.data.html=i+t.data.html}},o,null,100),o.on("maximize",function(t){o.ui.space("resizer")[t.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),function(){var i={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(t){(t=CKEDITOR.document.getById(t._.elementsPath.idBase+"0"))&&t.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},t="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');var b=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+t+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(e){e._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},e.on("uiSpace",function(t){"bottom"==t.data.space&&function(h,t){function o(t){var e;(t=g.list[t]).equals(h.editable())||"true"==t.getAttribute("contenteditable")?((e=h.createRange()).selectNodeContents(t),e=e.select()):(e=h.getSelection()).selectElement(t),CKEDITOR.env.ie&&h.fire("selectionChange",{selection:e,path:new CKEDITOR.dom.elementPath(t)}),h.focus()}function e(){p&&p.setHtml('<span class="cke_path_empty">&nbsp;</span>'),delete g.list}var p,f=h.ui.spaceId("path"),g=h._.elementsPath,m=g.idBase;t.html+='<span id="'+f+'_label" class="cke_voice_label">'+h.lang.elementspath.eleLabel+'</span><span id="'+f+'" class="cke_path" role="group" aria-labelledby="'+f+'_label"><span class="cke_path_empty">&nbsp;</span></span>',h.on("uiReady",function(){var t=h.ui.space("path");t&&h.focusManager.add(t,1)}),g.onClick=o;var v=CKEDITOR.tools.addFunction(o),y=CKEDITOR.tools.addFunction(function(t,e){var i,n=g.idBase;switch(e=new CKEDITOR.dom.event(e),i="rtl"==h.lang.dir,e.getKeystroke()){case i?39:37:case 9:return(i=CKEDITOR.document.getById(n+(t+1)))||(i=CKEDITOR.document.getById(n+"0")),i.focus(),!1;case i?37:39:case CKEDITOR.SHIFT+9:return(i=CKEDITOR.document.getById(n+(t-1)))||(i=CKEDITOR.document.getById(n+(g.list.length-1))),i.focus(),!1;case 27:return h.focus(),!1;case 13:case 32:return o(t),!1}return!0});h.on("selectionChange",function(t){for(var e=[],i=g.list=[],n=[],o=g.filters,r=!0,s=t.data.path.elements,a=s.length;a--;){var l=s[a],c=0;t=l.data("cke-display-name")?l.data("cke-display-name"):l.data("cke-real-element-type")?l.data("cke-real-element-type"):l.getName(),(r=l.hasAttribute("contenteditable")?"true"==l.getAttribute("contenteditable"):r)||l.hasAttribute("contenteditable")||(c=1);for(var u=0;u<o.length;u++){var d=o[u](l,t);if(!1===d){c=1;break}t=d||t}c||(i.unshift(l),n.unshift(t))}for(i=i.length,o=0;o<i;o++)t=n[o],r=h.lang.elementspath.eleTitle.replace(/%1/,t),t=b.output({id:m+o,label:r,text:t,jsTitle:"javascript:void('"+t+"')",index:o,keyDownFn:y,clickFn:v}),e.unshift(t);(n=p=p||CKEDITOR.document.getById(f)).setHtml(e.join("")+'<span class="cke_path_empty">&nbsp;</span>'),h.fire("elementsPathUpdate",{space:n})}),h.on("readOnly",e),h.on("contentDomUnload",e),h.addCommand("elementsPathFocus",i.toolbarFocus),h.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}(e,t.data)})}})}(),function(){function e(t,e,i){if(i=t.config.forceEnterMode||i,"wysiwyg"==t.mode){e=e||t.activeEnterMode;var n=t.elementPath();n&&!n.isContextFor("p")&&(e=CKEDITOR.ENTER_BR,i=1),t.fire("saveSnapshot"),e==CKEDITOR.ENTER_BR?y(t,e,null,i):c(t,e,null,i),t.fire("saveSnapshot")}}function g(t){for(var e=(t=t.getSelection().getRanges(!0)).length-1;0<e;e--)t[e].deleteContents();return t[0]}CKEDITOR.plugins.add("enterkey",{init:function(t){t.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t)}}),t.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t,t.activeShiftEnterMode,1)}}),t.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var m=CKEDITOR.dom.walker.whitespaces(),v=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(t,e,i,n){if(i=i||g(t)){var o,r=(i=function(t){var e=t.startContainer.getAscendant(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&"true"==t.getAttribute("contenteditable")},!0);return t.root.equals(e)?t:((e=new CKEDITOR.dom.range(e)).moveToRange(t),e)}(i)).document,s=i.checkStartOfBlock(),a=i.checkEndOfBlock(),l=t.elementPath(i.startContainer),c=l.block,u=e==CKEDITOR.ENTER_DIV?"div":"p";if(s&&a){if(c&&(c.is("li")||c.getParent().is("li"))){c.is("li")||(c=c.getParent()),o=(i=c.getParent()).getParent(),n=!c.hasPrevious();var d=!c.hasNext(),h=(u=t.getSelection()).createBookmarks(),p=(s=c.getDirection(1),a=c.getAttribute("class"),c.getAttribute("style")),f=o.getDirection(1)!=s;if(t=t.enterMode!=CKEDITOR.ENTER_BR||f||p||a,o.is("li"))n||d?(n&&d&&i.remove(),c[d?"insertAfter":"insertBefore"](o)):c.breakParent(o);else{if(t)l.block.is("li")?(o=r.createElement(e==CKEDITOR.ENTER_P?"p":"div"),f&&o.setAttribute("dir",s),p&&o.setAttribute("style",p),a&&o.setAttribute("class",a),c.moveChildren(o)):o=l.block,n||d?o[n?"insertBefore":"insertAfter"](i):(c.breakParent(i),o.insertAfter(i));else if(c.appendBogus(!0),n||d)for(;r=c[n?"getFirst":"getLast"]();)r[n?"insertBefore":"insertAfter"](i);else for(c.breakParent(i);r=c.getLast();)r.insertAfter(i);c.remove()}return void u.selectBookmarks(h)}if(c&&c.getParent().is("blockquote"))return c.breakParent(c.getParent()),c.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||c.getPrevious().remove(),c.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||c.getNext().remove(),i.moveToElementEditStart(c),void i.select()}else if(c&&c.is("pre")&&!a)return void y(t,e,i,n);if(s=i.splitBlock(u)){if(e=s.previousBlock,c=s.nextBlock,l=s.wasStartOfBlock,t=s.wasEndOfBlock,c?(h=c.getParent()).is("li")&&(c.breakParent(h),c.move(c.getNext(),1)):e&&(h=e.getParent())&&h.is("li")&&(e.breakParent(h),h=e.getNext(),i.moveToElementEditStart(h),e.move(e.getPrevious())),l||t){if(e?!e.is("li")&&(b.test(e.getName())||e.is("pre"))||(o=e.clone()):c&&(o=c.clone()),o?n&&!o.is("li")&&o.renameNode(u):h&&h.is("li")?o=h:(o=r.createElement(u),e&&(d=e.getDirection())&&o.setAttribute("dir",d)),r=s.elementPath)for(n=0,u=r.elements.length;n<u&&(!(h=r.elements[n]).equals(r.block)&&!h.equals(r.blockLimit));n++)CKEDITOR.dtd.$removeEmpty[h.getName()]&&(h=h.clone(),o.moveChildren(h),o.append(h));o.appendBogus(),o.getParent()||i.insertNode(o),o.is("li")&&o.removeAttribute("value"),!CKEDITOR.env.ie||!l||t&&e.getChildCount()||(i.moveToElementEditStart(t?e:o),i.select()),i.moveToElementEditStart(l&&!t?c:o)}else c.is("li")&&((o=i.clone()).selectNodeContents(c),(o=new CKEDITOR.dom.walker(o)).evaluator=function(t){return!(v(t)||m(t)||t.type==CKEDITOR.NODE_ELEMENT&&t.getName()in CKEDITOR.dtd.$inline&&!(t.getName()in CKEDITOR.dtd.$empty))},(h=o.next())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?r.createElement("br"):r.createText(" ")).insertBefore(h)),c&&i.moveToElementEditStart(c);i.select(),i.scrollIntoView()}}},enterBr:function(t,e,i,n){if(i=i||g(t)){var o=i.document,r=i.checkEndOfBlock(),s=new CKEDITOR.dom.elementPath(t.getSelection().getStartElement()),a=s.block,l=a&&s.block.getName();n||"li"!=l?(!n&&r&&b.test(l)?(r=a.getDirection())?((o=o.createElement("div")).setAttribute("dir",r),o.insertAfter(a),i.setStart(o,0)):(o.createElement("br").insertAfter(a),CKEDITOR.env.gecko&&o.createText("").insertAfter(a),i.setStartAt(a.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(t="pre"==l&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?o.createText("\r"):o.createElement("br"),i.deleteContents(),i.insertNode(t),CKEDITOR.env.needsBrFiller?(o.createText("\ufeff").insertAfter(t),r&&(a||s.blockLimit).appendBogus(),t.getNext().$.nodeValue="",i.setStartAt(t.getNext(),CKEDITOR.POSITION_AFTER_START)):i.setStartAt(t,CKEDITOR.POSITION_AFTER_END)),i.collapse(!0),i.select(),i.scrollIntoView()):c(t,e,i,n)}}};var t=CKEDITOR.plugins.enterkey,y=t.enterBr,c=t.enterBlock,b=/^h[1-6]$/}(),CKEDITOR.plugins.add("entities",{afterInit:function(t){function e(t){return a[t]}function i(t){return"force"!=n.entities_processNumerical&&r[t]?r[t]:"&#"+t.charCodeAt(0)+";"}var n=t.config;if(t=(t=t.dataProcessor)&&t.htmlFilter){var o=[];!1!==n.basicEntities&&o.push("nbsp,gt,lt,amp"),n.entities&&(o.length&&o.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),n.entities_latin&&o.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),n.entities_greek&&o.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),n.entities_additional&&o.push(n.entities_additional));var r=Ge(o.join(",")),s=r.regex?"["+r.regex+"]":"a^";delete r.regex,n.entities&&n.entities_processNumerical&&(s="[^ -~]|"+s),s=new RegExp(s,"g");var a=Ge("nbsp,gt,lt,amp,shy",!0),l=new RegExp(a.regex,"g");t.addRules({text:function(t){return t.replace(l,e).replace(s,i)}},{applyToAll:!0,excludeNestedEditable:!0})}}}),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,t,i,n){i=i||"70%","string"==typeof(t=t||"80%")&&1<t.length&&"%"==t.substr(t.length-1,1)&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10)),"string"==typeof i&&1<i.length&&"%"==i.substr(i.length-1,1)&&(i=parseInt(window.screen.height*parseInt(i,10)/100,10)),t<640&&(t=640),i<420&&(i=420);var o=parseInt((window.screen.height-i)/2,10),r=parseInt((window.screen.width-t)/2,10);n=(n||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+t+",height="+i+",top="+o+",left="+r;var s=window.open("",null,n,!0);if(!s)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(s.moveTo(r,o),s.resizeTo(t,i)),s.focus(),s.location.href=e}catch(t){window.open(e,null,n,!0)}return!0}}),CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(t){t._.filebrowserFn=CKEDITOR.tools.addFunction(Je,t),t.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(t){if(t.editor.plugins.filebrowser)for(var e,i=t.data.definition,n=0;n<i.contents.length;++n)(e=i.contents[n])&&(Ze(t.editor,t.data.name,i,e.elements),e.hidden&&e.filebrowser&&(e.hidden=!Qe(i,e.id,e.filebrowser)))}),wt=CKEDITOR.document.getWindow(),Ct=CKEDITOR.tools.cssLength,CKEDITOR.plugins.add("floatingspace",{init:function(t){t.on("loaded",function(){!function(i){var n,o,r,s,a,l,c,u,d,h,p,f=i.config,t=i.fire("uiSpace",{space:"top",html:""}).html,g=(u=f.floatSpaceDockedOffsetX||0,d=f.floatSpaceDockedOffsetY||0,h=f.floatSpacePinnedOffsetX||0,p=f.floatSpacePinnedOffsetY||0,function(t){if(o=i.editable()){var e=t&&"focus"==t.name;e&&y.show(),i.fire("floatingSpaceLayout",{show:e}),y.removeStyle("left"),y.removeStyle("right"),r=y.getClientRect(),s=o.getClientRect(),a=wt.getViewPaneSize(),l=r.height,c="pageXOffset"in wt.$?wt.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,n?(l+d<=s.top?v("top"):l+d>a.height-s.bottom?v("pin"):v("bottom"),t=a.width/2,t=f.floatSpacePreferRight?"right":0<s.left&&s.right<a.width&&s.width>r.width?"rtl"==f.contentsLangDirection?"right":"left":t-s.left>s.right-t?"left":"right",r.width>a.width?(t="left",e=0):(e="left"==t?0<s.left?s.left:0:s.right<a.width?a.width-s.right:0)+r.width>a.width&&(t="left"==t?"right":"left",e=0),y.setStyle(t,Ct(("pin"==n?h:u)+e+("pin"==n?0:"left"==t?c:-c)))):(v(n="pin"),g(t))}});function m(t,e,i){y.setStyle(e,Ct(i)),y.setStyle("position",t)}function v(t){var e=o.getDocumentPosition();switch(t){case"top":m("absolute","top",e.y-l-d);break;case"pin":m("fixed","top",p);break;case"bottom":m("absolute","top",e.y+(s.height||s.bottom-s.top)+d)}n=t}if(t){var e=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(i.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(i.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),y=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(e.output({content:t,id:i.id,langDir:i.lang.dir,langCode:i.langCode,name:i.name,style:"display:none;z-index:"+(f.baseFloatZIndex-1),topId:i.ui.spaceId("top"),voiceLabel:i.title}))),b=CKEDITOR.tools.eventsBuffer(500,g),_=CKEDITOR.tools.eventsBuffer(100,g);y.unselectable(),y.on("mousedown",function(t){(t=t.data).getTarget().hasAscendant("a",1)||t.preventDefault()}),i.on("focus",function(t){g(t),i.on("change",b.input),wt.on("scroll",_.input),wt.on("resize",_.input)}),i.on("blur",function(){y.hide(),i.removeListener("change",b.input),wt.removeListener("scroll",_.input),wt.removeListener("resize",_.input)}),i.on("destroy",function(){wt.removeListener("scroll",_.input),wt.removeListener("resize",_.input),y.clearCustomData(),y.remove()}),i.focusManager.hasFocus&&y.show(),i.focusManager.add(y,1)}}(this)},null,null,20)}}),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),o=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),i=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),r=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(t,e){return this.addBlock(t,new CKEDITOR.ui.listBlock(this.getHolderElement(),e))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(t,e){var i=(e=e||{}).attributes||(e.attributes={});(this.multiSelect=!!e.multiSelect)&&(i["aria-multiselectable"]=!0),i.role||(i.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",i.role),(i=this.keys)[40]="next",i[9]="next",i[38]="prev",i[CKEDITOR.SHIFT+9]="prev",i[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(i[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var t=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(t),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(t){var e=this.toggle(t);this.onClick&&this.onClick(t,e)},this)),this._.click}},proto:{add:function(t,e,i){var n=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),t={id:this._.items[t]=n,val:CKEDITOR.tools.htmlEncodeAttr(t).replace(r,"\\'"),onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(i||t),text:e||t},this._.pendingList.push(o.output(t))},startGroup:function(t){this._.close();var e=CKEDITOR.tools.getNextId();this._.groups[t]=e,this._.pendingHtml.push(i.output({id:e,label:t}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(t){var e=this.isMarked(t);return e?this.unmark(t):this.mark(t),!e},hideGroup:function(t){var e=(t=this.element.getDocument().getById(this._.groups[t]))&&t.getNext();t&&(t.setStyle("display","none"),e&&"ul"==e.getName()&&e.setStyle("display","none"))},hideItem:function(t){this.element.getDocument().getById(this._.items[t]).setStyle("display","none")},showAll:function(){var t,e=this._.items,i=this._.groups,n=this.element.getDocument();for(t in e)n.getById(e[t]).setStyle("display","");for(var o in i)t=(e=n.getById(i[o])).getNext(),e.setStyle("display",""),t&&"ul"==t.getName()&&t.setStyle("display","")},mark:function(t){this.multiSelect||this.unmarkAll(),t=this._.items[t];var e=this.element.getDocument().getById(t);e.addClass("cke_selected"),this.element.getDocument().getById(t+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(e)},markFirstDisplayed:function(){var t=this;this._.markFirstDisplayed(function(){t.multiSelect||t.unmarkAll()})},unmark:function(t){var e=this.element.getDocument();t=this._.items[t];var i=e.getById(t);i.removeClass("cke_selected"),e.getById(t+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(i)},unmarkAll:function(){var t,e=this._.items,i=this.element.getDocument();for(t in e){var n=e[t];i.getById(n).removeClass("cke_selected"),i.getById(n+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(t){return this.element.getDocument().getById(this._.items[t]).hasClass("cke_selected")},focus:function(t){this._.focusIndex=-1;var e,i=this.element.getElementsByTag("a"),n=-1;if(t){for(e=this.element.getDocument().getById(this._.items[t]).getFirst();t=i.getItem(++n);)if(t.equals(e)){this._.focusIndex=n;break}}else this.element.focus();e&&setTimeout(function(){e.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var t='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');t=t+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>";var d=CKEDITOR.addTemplate("combo",t);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(t){CKEDITOR.tools.extend(this,t,{canGroup:!1,title:t.label,modes:{wysiwyg:1},editorFocus:1}),t=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=t.parent&&t.parent.getDocument()||CKEDITOR.document,t.className="cke_combopanel",t.block={multiSelect:t.multiSelect,attributes:t.attributes},t.toolbarRelated=!0,this._={panelDefinition:t,items:{}}},proto:{renderHtml:function(t){var e=[];return this.render(t,e),e.join("")},render:function(n,t){function e(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var t=this.modes[n.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;n.readOnly&&!this.readOnly&&(t=CKEDITOR.TRISTATE_DISABLED),this.setState(t),this.setValue(""),t!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var i=CKEDITOR.env,o="cke_"+this.id,r=CKEDITOR.tools.addFunction(function(t){u&&(n.unlockSelection(1),u=0),a.execute(t)},this),s=this,a={id:o,combo:this,focus:function(){CKEDITOR.document.getById(o).getChild(1).focus()},execute:function(t){var e=s._;if(e.state!=CKEDITOR.TRISTATE_DISABLED)if(s.createPanel(n),e.on)e.panel.hide();else{s.commit();var i=s.getValue();i?e.list.mark(i):e.list.unmarkAll(),e.panel.showBlock(s.id,new CKEDITOR.dom.element(t),4)}},clickFn:r};n.on("activeFilterChange",e,this),n.on("mode",e,this),n.on("selectionChange",e,this),this.readOnly||n.on("readOnly",e,this);var l=CKEDITOR.tools.addFunction(function(t,e){var i=(t=new CKEDITOR.dom.event(t)).getKeystroke();switch(i){case 13:case 32:case 40:CKEDITOR.tools.callFunction(r,e);break;default:a.onkey(a,i)}t.preventDefault()}),c=CKEDITOR.tools.addFunction(function(){a.onfocus&&a.onfocus()}),u=0;return a.keyDownFn=l,i={id:o,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:i.gecko&&!i.hc?"":(this.title||"").replace("'",""),keydownFn:l,focusFn:c,clickFn:r},d.output(i,t),this.onRender&&this.onRender(),a},createPanel:function(e){if(!this._.panel){var t=this._.panelDefinition,i=this._.panelDefinition.block,n=t.parent||CKEDITOR.document.getBody(),o="cke_combopanel__"+this.name,r=new CKEDITOR.ui.floatPanel(e,n,t),s=(t=r.addListBlock(this.id,i),this);r.onShow=function(){this.element.addClass(o),s.setState(CKEDITOR.TRISTATE_ON),s._.on=1,s.editorFocus&&!e.focusManager.hasFocus&&e.focus(),s.onOpen&&s.onOpen()},r.onHide=function(t){this.element.removeClass(o),s.setState(s.modes&&s.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),s._.on=0,!t&&s.onClose&&s.onClose()},r.onEscape=function(){r.hide(1)},t.onClick=function(t,e){s.onClick&&s.onClick.call(s,t,e),r.hide()},this._.panel=r,this._.list=t,r.getBlock(this.id).onHide=function(){s._.on=0,s.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(t,e){this._.value=t;var i=this.document.getById("cke_"+this.id+"_text");i&&(t||e?i.removeClass("cke_combo_inlinelabel"):(e=this.label,i.addClass("cke_combo_inlinelabel")),i.setText(void 0!==e?e:t))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(t){this._.list.mark(t)},hideItem:function(t){this._.list.hideItem(t)},hideGroup:function(t){this._.list.hideGroup(t)},showAll:function(){this._.list.showAll()},add:function(t,e,i){this._.items[t]=i||t,this._.list.add(t,e,i)},startGroup:function(t){this._.list.startGroup(t)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(t){if(this._.state!=t){var e=this.document.getById("cke_"+this.id);e.setState(t,"cke_combo"),t==CKEDITOR.TRISTATE_DISABLED?e.setAttribute("aria-disabled",!0):e.removeAttribute("aria-disabled"),this._.state=t}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(t){return new CKEDITOR.ui.richCombo(t)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(t,e){this.add(t,CKEDITOR.UI_RICHCOMBO,e)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(n){if(!n.blockless){for(var t=n.config,i=n.lang.format,e=t.format_tags.split(";"),o={},r=0,s=[],a=0;a<e.length;a++){var l=e[a],c=new CKEDITOR.style(t["format_"+l]);n.filter.customConfig&&!n.filter.check(c)||(r++,o[l]=c,o[l]._.enterMode=n.config.enterMode,s.push(c))}0!==r&&n.ui.addRichCombo("Format",{label:i.label,title:i.panelTitle,toolbar:"styles,20",allowedContent:s,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!1,attributes:{"aria-label":i.panelTitle}},init:function(){for(var t in this.startGroup(i.panelTitle),o){var e=i["tag_"+t];this.add(t,o[t].buildPreview(e),e)}},onClick:function(t){n.focus(),n.fire("saveSnapshot"),t=o[t];var e=n.elementPath();t.checkActive(e,n)||n.applyStyle(t),setTimeout(function(){n.fire("saveSnapshot")},0)},onRender:function(){n.on("selectionChange",function(t){var e=this.getValue();for(var i in t=t.data.path,this.refresh(),o)if(o[i].checkActive(t,n))return void(i!=e&&this.setValue(i,n.lang.format["tag_"+i]));this.setValue("")},this)},onOpen:function(){for(var t in this.showAll(),o)n.activeFilter.check(o[t])||this.hideItem(t)},refresh:function(){var t=n.elementPath();if(t){if(t.isContextFor("p"))for(var e in o)if(n.activeFilter.check(o[e]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},Tt={canUndo:!1,exec:function(t){var e=t.document.createElement("hr");t.insertElement(e)},allowedContent:"hr",requiredContent:"hr"},CKEDITOR.plugins.add("horizontalrule",{init:function(t){t.blockless||(t.addCommand("horizontalrule",Tt),t.ui.addButton&&t.ui.addButton("HorizontalRule",{label:t.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}}),CKEDITOR.plugins.add("htmlwriter",{init:function(t){var e=new CKEDITOR.htmlWriter;e.forceSimpleAmpersand=t.config.forceSimpleAmpersand,e.indentationChars=t.config.dataIndentationChars||"\t",t.dataProcessor.writer=e}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var t,e=CKEDITOR.dtd;for(t in CKEDITOR.tools.extend({},e.$nonBodyContent,e.$block,e.$listItem,e.$tableContent))this.setRules(t,{indent:!e[t]["#"],breakBeforeOpen:1,breakBeforeClose:!e[t]["#"],breakAfterClose:1,needsSpace:t in e.$block&&!(t in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(t){var e=this._.rules[t];this._.afterCloser&&e&&e.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():e&&e.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",t),this._.afterCloser=0},openTagClose:function(t,e){var i=this._.rules[t];e?(this._.output.push(this.selfClosingEnd),i&&i.breakAfterClose&&(this._.needsSpace=i.needsSpace)):(this._.output.push(">"),i&&i.indent&&(this._.indentation+=this.indentationChars)),i&&i.breakAfterOpen&&this.lineBreak(),"pre"==t&&(this._.inPre=1)},attribute:function(t,e){"string"==typeof e&&(this.forceSimpleAmpersand&&(e=e.replace(/&amp;/g,"&")),e=CKEDITOR.tools.htmlEncodeAttr(e)),this._.output.push(" ",t,'="',e,'"')},closeTag:function(t){var e=this._.rules[t];e&&e.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():e&&e.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",t,">"),"pre"==t&&(this._.inPre=0),e&&e.breakAfterClose&&(this.lineBreak(),this._.needsSpace=e.needsSpace),this._.afterCloser=1},text:function(t){this._.indent&&(this.indentation(),this._.inPre||(t=CKEDITOR.tools.ltrim(t))),this._.output.push(t)},comment:function(t){this._.indent&&this.indentation(),this._.output.push("\x3c!--",t,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0,this._.needsSpace=0},setRules:function(t,e){var i=this._.rules[t];i?CKEDITOR.tools.extend(i,e,!0):this._.rules[t]=e}}}),CKEDITOR.plugins.add("wysiwygarea",{init:function(l){l.config.fullPage&&l.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),l.addMode("wysiwyg",function(e){function t(t){t&&t.removeListener(),l.editable(new xt(l,n.$.contentWindow.document.body)),l.setData(l.getData(1),e)}var i="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",n=(i=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(i)+"}())":"",CKEDITOR.dom.element.createFromHtml('<iframe src="'+i+'" frameBorder="0"></iframe>'));n.setStyles({width:"100%",height:"100%"}),n.addClass("cke_wysiwyg_frame").addClass("cke_reset"),(i=l.ui.space("contents")).append(n);var o=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;o&&n.on("load",t);var r=l.title,s=l.fire("ariaEditorHelpLabel",{}).label;if(r&&(CKEDITOR.env.ie&&s&&(r+=", "+s),n.setAttribute("title",r)),s){r=CKEDITOR.tools.getNextId();var a=CKEDITOR.dom.element.createFromHtml('<span id="'+r+'" class="cke_voice_label">'+s+"</span>");i.append(a,1),n.setAttribute("aria-describedby",r)}l.on("beforeModeUnload",function(t){t.removeListener(),a&&a.remove()}),n.setAttributes({tabIndex:l.tabIndex,allowTransparency:"true"}),o||t(),l.fire("ariaWidget",n)})}}),CKEDITOR.editor.prototype.addContentsCss=function(t){var e=this.config,i=e.contentsCss;CKEDITOR.tools.isArray(i)||(e.contentsCss=i?[i]:[]),e.contentsCss.push(t)},xt=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(t){CKEDITOR.tools.setTimeout(ti,0,this,t)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(e,t){var i=this.editor;if(t)this.setHtml(e),this.fixInitialSelection(),i.fire("dataReady");else{this._.isLoadingData=!0,i._.dataStore={id:1};var n=i.config,o=n.fullPage,r=n.docType,s=CKEDITOR.tools.buildStyleHtml(function(){var t=[];if(8<=CKEDITOR.document.$.documentMode){t.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var e,i=[];for(e in CKEDITOR.dtd.$removeEmpty)i.push("html.CSS1Compat "+e+"[contenteditable=false]");t.push(i.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(t.push("html{height:100% !important}"),t.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return t.push("html{cursor:text;*cursor:auto}"),t.push("img,input,textarea{cursor:default}"),t.join("\n")}()).replace(/<style>/,'<style data-cke-temp="1">');o||(s+=CKEDITOR.tools.buildStyleHtml(i.config.contentsCss));var a=n.baseHref?'<base href="'+n.baseHref+'" data-cke-temp="1" />':"";o&&(e=e.replace(/<!DOCTYPE[^>]*>/i,function(t){return i.docType=r=t,""}).replace(/<\?xml\s[^\?]*\?>/i,function(t){return i.xmlDeclaration=t,""})),e=i.dataProcessor.toHtml(e),e=o?(/<body[\s|>]/.test(e)||(e="<body>"+e),/<html[\s|>]/.test(e)||(e="<html>"+e+"</html>"),/<head[\s|>]/.test(e)?/<title[\s|>]/.test(e)||(e=e.replace(/<head[^>]*>/,"$&<title></title>")):e=e.replace(/<html[^>]*>/,"$&<head><title></title></head>"),a&&(e=e.replace(/<head[^>]*?>/,"$&"+a)),e=e.replace(/<\/head\s*>/,s+"$&"),r+e):n.docType+'<html dir="'+n.contentsLangDirection+'" lang="'+(n.contentsLanguage||i.langCode)+'"><head><title>'+this._.docTitle+"</title>"+a+s+"</head><body"+(n.bodyId?' id="'+n.bodyId+'"':"")+(n.bodyClass?' class="'+n.bodyClass+'"':"")+">"+e+"</body></html>",CKEDITOR.env.gecko&&(e=e.replace(/<body/,'<body contenteditable="true" '),CKEDITOR.env.version<2e4&&(e=e.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e"))),n='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>",CKEDITOR.env.ie&&CKEDITOR.env.version<9&&(n+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>'),a&&CKEDITOR.env.ie&&CKEDITOR.env.version<10&&(n+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>'),e=e.replace(/(?=\s*<\/(:?head)>)/,n),this.clearCustomData(),this.clearListeners(),i.fire("contentDomUnload");var l=this.getDocument();try{l.write(e)}catch(t){setTimeout(function(){l.write(e)},0)}}},getData:function(t){if(t)return this.getHtml();var e=(t=this.editor).config,i=(r=e.fullPage)&&t.docType,n=r&&t.xmlDeclaration,o=this.getDocument(),r=r?o.getDocumentElement().getOuterHtml():o.getBody().getHtml();return CKEDITOR.env.gecko&&e.enterMode!=CKEDITOR.ENTER_BR&&(r=r.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),r=t.dataProcessor.toDataFormat(r),n&&(r=n+"\n"+r),i&&(r=i+"\n"+r),r},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:xt.baseProto.focus.call(this)},detach:function(){var t,e=this.editor,i=e.document;try{t=e.window.getFrame()}catch(t){}xt.baseProto.detach.call(this),this.clearCustomData(),i.getDocumentElement().clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),t&&t.getParent()?(t.clearCustomData(),(e=t.removeCustomData("onResize"))&&e.removeListener(),t.remove()):CKEDITOR.warn("editor-destroy-iframe")}}}),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.plugins.add("image",{requires:"dialog",init:function(e){if(!e.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var t="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(e,"image","advanced")&&(t="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),e.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:t,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),e.ui.addButton&&e.ui.addButton("Image",{label:e.lang.common.image,command:"image",toolbar:"insert,10"}),e.on("doubleclick",function(t){var e=t.data.element;!e.is("img")||e.data("cke-realelement")||e.isReadOnly()||(t.data.dialog="image")}),e.addMenuItems&&e.addMenuItems({image:{label:e.lang.image.menu,command:"image",group:"image"}}),e.contextMenu&&e.contextMenu.addListener(function(t){if(ei(e,t))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(n){function t(i){var t=n.getCommand("justify"+i);t&&("left"!=i&&"right"!=i||t.on("exec",function(t){var e=ei(n);e&&(ii(e)==i?(e.removeStyle("float"),i==ii(e)&&e.removeAttribute("align")):e.setStyle("float",i),t.cancel())}),t.on("refresh",function(t){var e=ei(n);e&&(e=ii(e),this.setState(e==i?CKEDITOR.TRISTATE_ON:"right"==i||"left"==i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),t.cancel())}))}n.plugins.image2||(t("left"),t("right"),t("center"),t("block"))}}),CKEDITOR.config.image_removeLinkByEmptyURL=!0,Dt=CKEDITOR.TRISTATE_DISABLED,It=CKEDITOR.TRISTATE_OFF,CKEDITOR.plugins.add("indent",{init:function(l){var t=CKEDITOR.plugins.indent.genericDefinition;ni(l,l.addCommand("indent",new t(!0))),ni(l,l.addCommand("outdent",new t)),l.ui.addButton&&(l.ui.addButton("Indent",{label:l.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),l.ui.addButton("Outdent",{label:l.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),l.on("dirChanged",function(t){var e=l.createRange(),i=t.data.node;e.setStartBefore(i),e.setEndAfter(i);for(var n,o=new CKEDITOR.dom.walker(e);n=o.next();)if(n.type==CKEDITOR.NODE_ELEMENT)if(!n.equals(i)&&n.getDirection())e.setStartAfter(n),o=new CKEDITOR.dom.walker(e);else{var r=l.config.indentClasses;if(r)for(var s="ltr"==t.data.dir?["_rtl",""]:["","_rtl"],a=0;a<r.length;a++)n.hasClass(r[a]+s[0])&&(n.removeClass(r[a]+s[0]),n.addClass(r[a]+s[1]));r=n.getStyle("margin-right"),s=n.getStyle("margin-left"),r?n.setStyle("margin-left",r):n.removeStyle("margin-left"),s?n.setStyle("margin-right",s):n.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(t){this.isIndent=!!t,this.startDisabled=!this.isIndent},specificDefinition:function(t,e,i){this.name=e,this.editor=t,this.jobs={},this.enterBr=t.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!i,this.relatedGlobal=i?"indent":"outdent",this.indentKey=i?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(t,e){t.on("pluginsLoaded",function(){for(var t in e)!function(e,i){var n,t=e.getCommand(i.relatedGlobal);for(n in i.jobs)t.on("exec",function(t){t.data.done||(e.fire("lockSnapshot"),i.execJob(e,n)&&(t.data.done=!0),e.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(i.database))},this,null,n),t.on("refresh",function(t){t.data.states||(t.data.states={}),t.data.states[i.name+"@"+n]=i.refreshJob(e,n,t.data.path)},this,null,n);e.addFeature(i)}(this,e[t])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(t,e){var i=this.jobs[e];if(i.state!=Dt)return i.exec.call(this,t)},refreshJob:function(t,e,i){return e=this.jobs[e],t.activeFilter.checkFeature(this)?e.state=e.refresh.call(this,t,i):e.state=Dt,e.state},getContext:function(t){return t.contains(this.context)}},Ot=CKEDITOR.dom.walker.whitespaces(!0),Rt=CKEDITOR.dom.walker.bookmark(!1,!0),kt=CKEDITOR.TRISTATE_DISABLED,St=CKEDITOR.TRISTATE_OFF,CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(t){function e(n){i.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],n.on("key",function(t){var e=n.elementPath();if("wysiwyg"==n.mode&&t.data.keyCode==this.indentKey&&e){var i=this.getContext(e);!i||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,e,i)||(n.execCommand(this.relatedGlobal),t.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(t,e){var i=this.getContext(e),n=CKEDITOR.plugins.indentList.firstItemInPath(this.context,e,i);return i&&this.isIndent&&!n?St:kt}:function(t,e){return!this.getContext(e)||this.isIndent?kt:St},exec:CKEDITOR.tools.bind(oi,this)}}var i=CKEDITOR.plugins.indent;i.registerCommands(t,{indentlist:new e(t,"indentlist",!0),outdentlist:new e(t,"outdentlist")}),CKEDITOR.tools.extend(e.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(t,e,i){var n=e.contains(ri);return(i=i||e.contains(t))&&n&&n.equals(i.getFirst(ri))},At=CKEDITOR.htmlParser.cssStyle,Mt=CKEDITOR.tools.cssLength,Nt=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,Kt={elements:{$:function(t){var e=t.attributes;if((e=(e=(e=e&&e["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(e)))&&e.children[0])&&t.attributes["data-cke-resizable"]){var i=new At(t).rules;t=e.attributes;var n=i.width;i=i.height;n&&(t.width=ai(t.width,n)),i&&(t.height=ai(t.height,i))}return e}}},CKEDITOR.plugins.add("fakeobjects",{init:function(t){t.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(t){(t=(t=t.dataProcessor)&&t.htmlFilter)&&t.addRules(Kt,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(t,e,i,n){var o=(o=this.lang.fakeobjects)[i]||o.unknown;return e={class:e,"data-cke-realelement":encodeURIComponent(t.getOuterHtml()),"data-cke-real-node-type":t.type,alt:o,title:o,align:t.getAttribute("align")||""},CKEDITOR.env.hc||(e.src=CKEDITOR.tools.transparentImageData),i&&(e["data-cke-real-element-type"]=i),n&&(e["data-cke-resizable"]=n,i=new At,n=t.getAttribute("width"),t=t.getAttribute("height"),n&&(i.rules.width=Mt(n)),t&&(i.rules.height=Mt(t)),i.populate(e)),this.document.createElement("img",{attributes:e})},CKEDITOR.editor.prototype.createFakeParserElement=function(t,e,i,n){var o,r=(r=this.lang.fakeobjects)[i]||r.unknown;return o=new CKEDITOR.htmlParser.basicWriter,t.writeHtml(o),o=o.getHtml(),e={class:e,"data-cke-realelement":encodeURIComponent(o),"data-cke-real-node-type":t.type,alt:r,title:r,align:t.attributes.align||""},CKEDITOR.env.hc||(e.src=CKEDITOR.tools.transparentImageData),i&&(e["data-cke-real-element-type"]=i),n&&(e["data-cke-resizable"]=n,n=t.attributes,t=new At,i=n.width,n=n.height,void 0!==i&&(t.rules.width=Mt(i)),void 0!==n&&(t.rules.height=Mt(n)),t.populate(e)),new CKEDITOR.htmlParser.element("img",e)},CKEDITOR.editor.prototype.restoreRealElement=function(t){if(t.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var e=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(t.data("cke-realelement")),this.document);if(t.data("cke-resizable")){var i=t.getStyle("width");t=t.getStyle("height"),i&&e.setAttribute("width",ai(e.getAttribute("width"),i)),t&&e.setAttribute("height",ai(e.getAttribute("height"),t))}return e},function(){function d(t){return t.replace(/'/g,"\\$&")}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function t(t){return i.replace(/%1/g,"rtl"==t?"right":"left").replace(/%2/g,"cke_contents_"+t)}var e="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",i=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+e+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+e+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(t("ltr")+t("rtl"))},init:function(i){var t="a[!href]";CKEDITOR.dialog.isTabEnabled(i,"link","advanced")&&(t=t.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)")),CKEDITOR.dialog.isTabEnabled(i,"link","target")&&(t=t.replace("]",",target,onclick]")),i.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:t,requiredContent:"a[href]"})),i.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),i.addCommand("unlink",new CKEDITOR.unlinkCommand),i.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),i.setKeystroke(CKEDITOR.CTRL+76,"link"),i.ui.addButton&&(i.ui.addButton("Link",{label:i.lang.link.toolbar,command:"link",toolbar:"links,10"}),i.ui.addButton("Unlink",{label:i.lang.link.unlink,command:"unlink",toolbar:"links,20"}),i.ui.addButton("Anchor",{label:i.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),i.on("doubleclick",function(t){var e=t.data.element.getAscendant({a:1,img:1},!0);e&&!e.isReadOnly()&&(e.is("a")?(t.data.dialog=!e.getAttribute("name")||e.getAttribute("href")&&e.getChildCount()?"link":"anchor",t.data.link=e):CKEDITOR.plugins.link.tryRestoreFakeAnchor(i,e)&&(t.data.dialog="anchor"))},null,null,0),i.on("doubleclick",function(t){t.data.dialog in{link:1,anchor:1}&&t.data.link&&i.getSelection().selectElement(t.data.link)},null,null,20),i.addMenuItems&&i.addMenuItems({anchor:{label:i.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:i.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:i.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:i.lang.link.unlink,command:"unlink",group:"link",order:5}}),i.contextMenu&&i.contextMenu.addListener(function(t){if(!t||t.isReadOnly())return null;if(!(t=CKEDITOR.plugins.link.tryRestoreFakeAnchor(i,t))&&!(t=CKEDITOR.plugins.link.getSelectedLink(i)))return null;var e={};return t.getAttribute("href")&&t.getChildCount()&&(e={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),t&&t.hasAttribute("name")&&(e.anchor=e.removeAnchor=CKEDITOR.TRISTATE_OFF),e}),this.compiledProtectionFunction=function(t){var n;return(t=t.config.emailProtection||"")&&"encode"!=t&&(n={},t.replace(/^([^(]+)\(([^)]+)\)$/,function(t,e,i){n.name=e,n.params=[],i.replace(/[^,\s]+/g,function(t){n.params.push(t)})})),n}(i)},afterInit:function(i){i.dataProcessor.dataFilter.addRules({elements:{a:function(t){return t.attributes.name?t.children.length?null:i.createFakeParserElement(t,"cke_anchor","anchor"):null}}});var t=i._.elementsPath&&i._.elementsPath.filters;t&&t.push(function(t,e){if("a"==e&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(i,t)||t.getAttribute("name")&&(!t.getAttribute("href")||!t.getChildCount())))return"anchor"})}});var c=/^javascript:/,u=/^mailto:([^?]+)(?:\?(.+))?$/,h=/subject=([^;?:@&=$,\/]*)/i,p=/body=([^;?:@&=$,\/]*)/i,f=/^#(.*)$/,g=/^((?:http|https|ftp|news):\/\/)?(.*)$/,m=/^(_(?:self|top|parent|blank))$/,v=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,y=/^javascript:([^(]+)\(([^)]+)\)$/,b=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,_=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,E={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(t,e){var i,n=t.getSelection(),o=n.getSelectedElement(),r=n.getRanges(),s=[];if(!e&&o&&o.is("a"))return o;for(o=0;o<r.length;o++)if((i=n.getRanges()[o]).shrink(CKEDITOR.SHRINK_TEXT,!1,{skipBogus:!0}),(i=t.elementPath(i.getCommonAncestor()).contains("a",1))&&e)s.push(i);else if(i)return i;return e?s:null},getEditorAnchors:function(t){for(var e,i=(n=(i=t.editable()).isInline()&&!t.plugins.divarea?t.document:i).getElementsByTag("a"),n=n.getElementsByTag("img"),o=[],r=0;e=i.getItem(r++);)(e.data("cke-saved-name")||e.hasAttribute("name"))&&o.push({name:e.data("cke-saved-name")||e.getAttribute("name"),id:e.getAttribute("id")});for(r=0;e=n.getItem(r++);)(e=this.tryRestoreFakeAnchor(t,e))&&o.push({name:e.getAttribute("name"),id:e.getAttribute("id")});return o},fakeAnchor:!0,tryRestoreFakeAnchor:function(t,e){if(e&&e.data("cke-real-element-type")&&"anchor"==e.data("cke-real-element-type")){var i=t.restoreRealElement(e);if(i.data("cke-saved-name"))return i}},parseLinkAttributes:function(t,e){var i,n=e&&(e.data("cke-saved-href")||e.getAttribute("href"))||"",s=t.plugins.link.compiledProtectionFunction,o=t.config.emailProtection,a={};if(n.match(c)&&("encode"==o?n=n.replace(v,function(t,e,i){return i=i||"","mailto:"+String.fromCharCode.apply(String,e.split(","))+i.replace(/\\'/g,"'")}):o&&n.replace(y,function(t,e,i){if(e==s.name){a.type="email",t=a.email={},e=/(^')|('$)/g;for(var n,o=(i=i.match(/[^,\s]+/g)).length,r=0;r<o;r++)n=decodeURIComponent(n=i[r].replace(e,"").replace(/\\'/g,"'")),t[s.params[r].toLowerCase()]=n;t.address=[t.name,t.domain].join("@")}})),!a.type)if(o=n.match(f))a.type="anchor",a.anchor={},a.anchor.name=a.anchor.id=o[1];else if(o=n.match(u)){i=n.match(h),n=n.match(p),a.type="email";var r=a.email={};r.address=o[1],i&&(r.subject=decodeURIComponent(i[1])),n&&(r.body=decodeURIComponent(n[1]))}else n&&(i=n.match(g))&&(a.type="url",a.url={},a.url.protocol=i[1],a.url.url=i[2]);if(e){if(n=e.getAttribute("target"))a.target={type:n.match(m)?n:"frame",name:n};else if(n=(n=e.data("cke-pa-onclick")||e.getAttribute("onclick"))&&n.match(b))for(a.target={type:"popup",name:n[1]};o=_.exec(n[2]);)"yes"!=o[2]&&"1"!=o[2]||o[1]in{height:1,width:1,top:1,left:1}?isFinite(o[2])&&(a.target[o[1]]=o[2]):a.target[o[1]]=!0;null!==e.getAttribute("download")&&(a.download=!0);var l;n={};for(l in E)(o=e.getAttribute(l))&&(n[E[l]]=o);(l=e.data("cke-saved-name")||n.advName)&&(n.advName=l),CKEDITOR.tools.isEmpty(n)||(a.advanced=n)}return a},getLinkAttributes:function(t,e){var i=t.config.emailProtection||"",n={};switch(e.type){case"url":i=e.url&&void 0!==e.url.protocol?e.url.protocol:"http://";var o=e.url&&CKEDITOR.tools.trim(e.url.url)||"";n["data-cke-saved-href"]=0===o.indexOf("/")?o:i+o;break;case"anchor":i=e.anchor&&e.anchor.id,n["data-cke-saved-href"]="#"+(e.anchor&&e.anchor.name||i||"");break;case"email":o=(a=e.email).address;switch(i){case"":case"encode":var r=encodeURIComponent(a.subject||""),s=encodeURIComponent(a.body||""),a=[];r&&a.push("subject="+r),s&&a.push("body="+s),a=a.length?"?"+a.join("&"):"","encode"==i?(i=["javascript:void(location.href='mailto:'+",function(t){for(var e,i=t.length,n=[],o=0;o<i;o++)e=t.charCodeAt(o),n.push(e);return"String.fromCharCode("+n.join(",")+")"}(o)],a&&i.push("+'",d(a),"'"),i.push(")")):i=["mailto:",o,a];break;default:i=o.split("@",2),a.name=i[0],a.domain=i[1],i=["javascript:",function(t,e){var i,n,o=t.plugins.link,r=o.compiledProtectionFunction.params;n=[o.compiledProtectionFunction.name,"("];for(var s=0;s<r.length;s++)i=e[o=r[s].toLowerCase()],0<s&&n.push(","),n.push("'",i?d(encodeURIComponent(e[o])):"","'");return n.push(")"),n.join("")}(t,a)]}n["data-cke-saved-href"]=i.join("")}if(e.target)if("popup"==e.target.type){i=["window.open(this.href, '",e.target.name||"","', '"];var l="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" ");for(o=l.length,r=function(t){e.target[t]&&l.push(t+"="+e.target[t])},a=0;a<o;a++)l[a]+=e.target[l[a]]?"=yes":"=no";r("width"),r("left"),r("height"),r("top"),i.push(l.join(","),"'); return false;"),n["data-cke-pa-onclick"]=i.join("")}else"notSet"!=e.target.type&&e.target.name&&(n.target=e.target.name);if(e.download&&(n.download=""),e.advanced){for(var c in E)(i=e.advanced[E[c]])&&(n[c]=i);n.name&&(n["data-cke-saved-name"]=n.name)}for(var u in n["data-cke-saved-href"]&&(n.href=n["data-cke-saved-href"]),c={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1},e.advanced&&CKEDITOR.tools.extend(c,E),n)delete c[u];return{set:n,removed:CKEDITOR.tools.objectKeys(c)}},showDisplayTextForElement:function(t,e){var i=e.getSelection();return!(e.widgets&&e.widgets.focused||i&&1<i.getRanges().length)&&(!t||!t.getName||!t.is({img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1}))}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(t){if(CKEDITOR.env.ie){var e,i=t.getSelection().getRanges()[0],n=i.getPreviousEditableNode()&&i.getPreviousEditableNode().getAscendant("a",!0)||i.getNextEditableNode()&&i.getNextEditableNode().getAscendant("a",!0);i.collapsed&&n&&(e=i.createBookmark(),i.selectNodeContents(n),i.select())}n=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1}),t.removeStyle(n),e&&(i.moveToBookmark(e),i.select())},refresh:function(t,e){var i=e.lastElement&&e.lastElement.getAscendant("a",!0);i&&"a"==i.getName()&&i.getAttribute("href")&&i.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(t){var e,i=t.getSelection(),n=i.createBookmarks();i&&(e=i.getSelectedElement())&&(e.getChildCount()?e.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(t,e))?e.remove(1):(e=CKEDITOR.plugins.link.getSelectedLink(t))&&(e.hasAttribute("href")?(e.removeAttributes({name:1,"data-cke-saved-name":1}),e.removeClass("cke_anchor")):e.remove(1)),i.selectBookmarks(n)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function v(e,i,t){function n(t){!(l=u[t?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(c=i.root[t?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||c.is&&c.isBlockBoundary({br:1})||e.document.createElement("br")[t?"insertBefore":"insertAfter"](l)}for(var o=CKEDITOR.plugins.list.listToArray(i.root,t),r=[],s=0;s<i.contents.length;s++){var a=i.contents[s];(a=a.getAscendant("li",!0))&&!a.getCustomData("list_item_processed")&&(r.push(a),CKEDITOR.dom.element.setMarker(t,a,"list_item_processed",!0))}for(a=null,s=0;s<r.length;s++)o[a=r[s].getCustomData("listarray_index")].indent=-1;for(s=a+1;s<o.length;s++)if(o[s].indent>o[s-1].indent+1){for(r=o[s-1].indent+1-o[s].indent,a=o[s].indent;o[s]&&o[s].indent>=a;)o[s].indent+=r,s++;s--}var l,c,u=CKEDITOR.plugins.list.arrayToList(o,t,null,e.config.enterMode,i.root.getAttribute("dir")).listNode;n(!0),n(),u.replace(i.root),e.fire("contentDomInvalidated")}function t(t,e){this.name=t,this.context=this.type=e,this.allowedContent=e+" li",this.requiredContent=e}function c(t,e,i,n){for(var o,r;o=t[n?"getLast":"getFirst"](s);)(r=o.getDirection(1))!==e.getDirection(1)&&o.setAttribute("dir",r),o.remove(),i?o[n?"insertBefore":"insertAfter"](i):e.append(o,n)}function y(i){function t(t){var e=i[t?"getPrevious":"getNext"](D);e&&e.type==CKEDITOR.NODE_ELEMENT&&e.is(i.getName())&&(c(i,e,null,!t),i.remove(),i=e)}t(),t(1)}function d(t){return t.type==CKEDITOR.NODE_ELEMENT&&(t.getName()in CKEDITOR.dtd.$block||t.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[t.getName()]["#"]}function h(t,e,i){t.fire("saveSnapshot"),i.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var n=i.extractContents();e.trim(!1,!0);var o=e.createBookmark(),r=(s=new CKEDITOR.dom.elementPath(e.startContainer)).block,s=s.lastElement.getAscendant("li",1)||r,a=(l=new CKEDITOR.dom.elementPath(i.startContainer)).contains(CKEDITOR.dtd.$listItem),l=l.contains(CKEDITOR.dtd.$list);for(r?(r=r.getBogus())&&r.remove():l&&(r=l.getPrevious(D))&&f(r)&&r.remove(),(r=n.getLast())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("br")&&r.remove(),(r=e.startContainer.getChild(e.startOffset))?n.insertBefore(r):e.startContainer.append(n),a&&(n=p(a))&&(s.contains(a)?(c(n,a.getParent(),a),n.remove()):s.append(n));i.checkStartOfBlock()&&i.checkEndOfBlock()&&(n=(l=i.startPath()).block);)n.is("li")&&(s=n.getParent(),n.equals(s.getLast(D))&&n.equals(s.getFirst(D))&&(n=s)),i.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),n.remove();i=i.clone(),n=t.editable(),i.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),(i=new CKEDITOR.dom.walker(i)).evaluator=function(t){return D(t)&&!f(t)},(i=i.next())&&i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in CKEDITOR.dtd.$list&&y(i),e.moveToBookmark(o),e.select(),t.fire("saveSnapshot")}function p(t){return(t=t.getLast(D))&&t.type==CKEDITOR.NODE_ELEMENT&&t.getName()in T?t:null}var T={ol:1,ul:1},e=CKEDITOR.dom.walker.whitespaces(),x=CKEDITOR.dom.walker.bookmark(),D=function(t){return!(e(t)||x(t))},f=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(t,e,i,n,o){if(!T[t.getName()])return[];n=n||0,i=i||[];for(var r=0,s=t.getChildCount();r<s;r++){var a=t.getChild(r);if(a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(a,e,i,n+1),"li"==a.$.nodeName.toLowerCase()){var l={parent:t,indent:n,element:a,contents:[]};o?l.grandparent=o:(l.grandparent=t.getParent(),l.grandparent&&"li"==l.grandparent.$.nodeName.toLowerCase()&&(l.grandparent=l.grandparent.getParent())),e&&CKEDITOR.dom.element.setMarker(e,a,"listarray_index",i.length),i.push(l);for(var c,u=0,d=a.getChildCount();u<d;u++)(c=a.getChild(u)).type==CKEDITOR.NODE_ELEMENT&&T[c.getName()]?CKEDITOR.plugins.list.listToArray(c,e,i,n+1,l.grandparent):l.contents.push(c)}}return i},arrayToList:function(t,e,i,n,o){if(i=i||0,!t||t.length<i+1)return null;for(var r,s,a,l=t[i].parent.getDocument(),c=new CKEDITOR.dom.documentFragment(l),u=null,d=i,h=Math.max(t[i].indent,0),p=null,f=n==CKEDITOR.ENTER_P?"p":"div";;){var g=t[d];if(r=g.grandparent,s=g.element.getDirection(1),g.indent==h){for(u&&t[d].parent.getName()==u.getName()||(u=t[d].parent.clone(!1,1),o&&u.setAttribute("dir",o),c.append(u)),p=u.append(g.element.clone(0,1)),s!=u.getDirection(1)&&p.setAttribute("dir",s),r=0;r<g.contents.length;r++)p.append(g.contents[r].clone(1,1));d++}else if(g.indent==Math.max(h,0)+1)g=t[d-1].element.getDirection(1),d=CKEDITOR.plugins.list.arrayToList(t,null,d,n,g!=s?s:null),!p.getChildCount()&&CKEDITOR.env.needsNbspFiller&&l.$.documentMode<=7&&p.append(l.createText(" ")),p.append(d.listNode),d=d.nextIndex;else{if(-1!=g.indent||i||!r)return null;T[r.getName()]?(p=g.element.clone(!1,!0),s!=r.getDirection(1)&&p.setAttribute("dir",s)):p=new CKEDITOR.dom.documentFragment(l);u=r.getDirection(1)!=s;var m,v,y=g.element,b=y.getAttribute("class"),_=y.getAttribute("style"),E=p.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(n!=CKEDITOR.ENTER_BR||u||_||b),w=g.contents.length;for(r=0;r<w;r++)if(m=g.contents[r],x(m)&&1<w)E?v=m.clone(1,1):p.append(m.clone(1,1));else if(m.type==CKEDITOR.NODE_ELEMENT&&m.isBlockBoundary()){u&&!m.getDirection()&&m.setAttribute("dir",s),a=m;var C=y.getAttribute("style");C&&a.setAttribute("style",C.replace(/([^;])$/,"$1;")+(a.getAttribute("style")||"")),b&&m.addClass(b),a=null,v&&(p.append(v),v=null),p.append(m.clone(1,1))}else E?(a||(a=l.createElement(f),p.append(a),u&&a.setAttribute("dir",s)),_&&a.setAttribute("style",_),b&&a.setAttribute("class",b),v&&(a.append(v),v=null),a.append(m.clone(1,1))):p.append(m.clone(1,1));v&&((a||p).append(v),v=null),p.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&d!=t.length-1&&(CKEDITOR.env.needsBrFiller&&(s=p.getLast())&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("br")&&s.remove(),(s=p.getLast(D))&&s.type==CKEDITOR.NODE_ELEMENT&&s.is(CKEDITOR.dtd.$block)||p.append(l.createElement("br"))),"div"!=(s=p.$.nodeName.toLowerCase())&&"p"!=s||p.appendBogus(),c.append(p),u=null,d++}if(a=null,t.length<=d||Math.max(t[d].indent,0)<h)break}if(e)for(t=c.getFirst();t;){if(t.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(e,t),t.getName()in CKEDITOR.dtd.$listItem&&(l=o=n=void 0,n=(i=t).getDirection()))){for(o=i.getParent();o&&!(l=o.getDirection());)o=o.getParent();n==l&&i.removeAttribute("dir")}t=t.getNextSourceNode()}return{listNode:c,nextIndex:d}}};var b=/^h[1-6]$/,s=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);t.prototype={exec:function(t){this.refresh(t,t.elementPath());var e=t.config,i=t.getSelection(),n=i&&i.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF)if((r=t.editable()).getFirst(D)){var o=1==n.length&&n[0];(e=o&&o.getEnclosedNode())&&e.is&&this.type==e.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else e.enterMode==CKEDITOR.ENTER_BR?r.appendBogus():n[0].fixBlock(1,e.enterMode==CKEDITOR.ENTER_P?"p":"div"),i.selectRanges(n);e=i.createBookmarks(!0);for(var r=[],s={},a=(n=n.createIterator(),0);(o=n.getNextRange())&&++a;){var l=(g=o.getBoundaryNodes()).startNode,c=g.endNode;for(l.type==CKEDITOR.NODE_ELEMENT&&"td"==l.getName()&&o.setStartAt(g.startNode,CKEDITOR.POSITION_AFTER_START),c.type==CKEDITOR.NODE_ELEMENT&&"td"==c.getName()&&o.setEndAt(g.endNode,CKEDITOR.POSITION_BEFORE_END),(o=o.createIterator()).forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;g=o.getNextParagraph();)if(!g.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(s,g,"list_block",1);l=(d=t.elementPath(g)).elements,c=0;for(var u,d=d.blockLimit,h=l.length-1;0<=h&&(u=l[h]);h--)if(T[u.getName()]&&d.contains(u)){d.removeCustomData("list_group_object_"+a),(l=u.getCustomData("list_group_object"))?l.contents.push(g):(l={root:u,contents:[g]},r.push(l),CKEDITOR.dom.element.setMarker(s,u,"list_group_object",l)),c=1;break}c||((c=d).getCustomData("list_group_object_"+a)?c.getCustomData("list_group_object_"+a).contents.push(g):(l={root:c,contents:[g]},CKEDITOR.dom.element.setMarker(s,c,"list_group_object_"+a,l),r.push(l)))}}for(u=[];0<r.length;)if(l=r.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(T[l.root.getName()]){for(n=t,a=l,l=s,o=u,c=CKEDITOR.plugins.list.listToArray(a.root,l),d=[],g=0;g<a.contents.length;g++)(h=(h=a.contents[g]).getAscendant("li",!0))&&!h.getCustomData("list_item_processed")&&(d.push(h),CKEDITOR.dom.element.setMarker(l,h,"list_item_processed",!0));h=a.root.getDocument();for(var p=void 0,f=void 0,g=0;g<d.length;g++){var m=d[g].getCustomData("listarray_index");(p=c[m].parent).is(this.type)||(f=h.createElement(this.type),p.copyAttributes(f,{start:1,type:1}),f.removeStyle("list-style-type"),c[m].parent=f)}for(l=CKEDITOR.plugins.list.arrayToList(c,l,null,n.config.enterMode),c=void 0,d=l.listNode.getChildCount(),g=0;g<d&&(c=l.listNode.getChild(g));g++)c.getName()==this.type&&o.push(c);l.listNode.replace(a.root),n.fire("contentDomInvalidated")}else{for(c=t,g=u,d=(o=l).contents,n=o.root.getDocument(),a=[],1==d.length&&d[0].equals(o.root)&&(l=n.createElement("div"),d[0].moveChildren&&d[0].moveChildren(l),d[0].append(l),d[0]=l),o=o.contents[0].getParent(),h=0;h<d.length;h++)o=o.getCommonAncestor(d[h].getParent());for(p=c.config.useComputedState,c=l=void 0,p=void 0===p||p,h=0;h<d.length;h++)for(f=d[h];m=f.getParent();){if(m.equals(o)){a.push(f),!c&&f.getDirection()&&(c=1),f=f.getDirection(p),null!==l&&(l=l&&l!=f?null:f);break}f=m}if(!(a.length<1)){for(d=a[a.length-1].getNext(),h=n.createElement(this.type),g.push(h),p=g=void 0;a.length;)g=a.shift(),p=n.createElement("li"),(f=g).is("pre")||b.test(f.getName())||"false"==f.getAttribute("contenteditable")?g.appendTo(p):(g.copyAttributes(p),l&&g.getDirection()&&(p.removeStyle("direction"),p.removeAttribute("dir")),g.moveChildren(p),g.remove()),p.appendTo(h);l&&c&&h.setAttribute("dir",l),d?h.insertBefore(d):h.appendTo(o)}}else this.state==CKEDITOR.TRISTATE_ON&&T[l.root.getName()]&&v.call(this,t,l,s);for(h=0;h<u.length;h++)y(u[h]);CKEDITOR.dom.element.clearAllMarkers(s),i.selectBookmarks(e),t.focus()},refresh:function(t,e){var i=e.contains(T,1),n=e.blockLimit||e.root;i&&n.contains(i)?this.setState(i.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(u){u.blockless||(u.addCommand("numberedlist",new t("numberedlist","ol")),u.addCommand("bulletedlist",new t("bulletedlist","ul")),u.ui.addButton&&(u.ui.addButton("NumberedList",{label:u.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),u.ui.addButton("BulletedList",{label:u.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),u.on("key",function(t){var e,i=t.data.domEvent.getKey();if("wysiwyg"==u.mode&&i in{8:1,46:1}){var n=u.getSelection().getRanges()[0],o=n&&n.startPath();if(n&&n.collapsed){var r,s=8==i,a=u.editable(),l=new CKEDITOR.dom.walker(n.clone());if(l.evaluator=function(t){return D(t)&&!f(t)},l.guard=function(t,e){return!(e&&t.type==CKEDITOR.NODE_ELEMENT&&t.is("table"))},i=n.clone(),s)if((r=o.contains(T))&&n.checkBoundaryOfElement(r,CKEDITOR.START)&&(r=r.getParent())&&r.is("li")&&(r=p(r))?(r=(e=r).getPrevious(D),i.moveToPosition(r&&f(r)?r:e,CKEDITOR.POSITION_BEFORE_START)):(l.range.setStartAt(a,CKEDITOR.POSITION_AFTER_START),l.range.setEnd(n.startContainer,n.startOffset),(r=l.previous())&&r.type==CKEDITOR.NODE_ELEMENT&&(r.getName()in T||r.is("li"))&&(r.is("li")||(l.range.selectNodeContents(r),l.reset(),l.evaluator=d,r=l.previous()),e=r,i.moveToElementEditEnd(e),i.moveToPosition(i.endPath().block,CKEDITOR.POSITION_BEFORE_END))),e)h(u,i,n),t.cancel();else{var c=o.contains(T);c&&n.checkBoundaryOfElement(c,CKEDITOR.START)&&(e=c.getFirst(D),n.checkBoundaryOfElement(e,CKEDITOR.START)&&(r=c.getPrevious(D),p(e)?r&&(n.moveToElementEditEnd(r),n.select()):u.execCommand("outdent"),t.cancel()))}else if(e=o.contains("li")){if(l.range.setEndAt(a,CKEDITOR.POSITION_BEFORE_END),s=(a=e.getLast(D))&&d(a)?a:e,o=0,(r=l.next())&&r.type==CKEDITOR.NODE_ELEMENT&&r.getName()in T&&r.equals(a)?(o=1,r=l.next()):n.checkBoundaryOfElement(s,CKEDITOR.END)&&(o=2),o&&r){if((n=n.clone()).moveToElementEditStart(r),1==o&&(i.optimize(),!i.startContainer.equals(e))){for(e=i.startContainer;e.is(CKEDITOR.dtd.$inline);)e=(c=e).getParent();c&&i.moveToPosition(c,CKEDITOR.POSITION_AFTER_END)}2==o&&(i.moveToPosition(i.endPath().block,CKEDITOR.POSITION_BEFORE_END),n.endPath().block&&n.moveToPosition(n.endPath().block,CKEDITOR.POSITION_AFTER_START)),h(u,i,n),t.cancel()}}else l.range.setEndAt(a,CKEDITOR.POSITION_BEFORE_END),(r=l.next())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is(T)&&(r=r.getFirst(D),o.block&&n.checkStartOfBlock()&&n.checkEndOfBlock()?(o.block.remove(),n.moveToElementEditStart(r),n.select()):p(r)?(n.moveToElementEditStart(r),n.select()):((n=n.clone()).moveToElementEditStart(r),h(u,i,n)),t.cancel());setTimeout(function(){u.selectionChange(1)})}}}))}})}(),function(){function h(t,e,i){return v(e)&&v(i)&&i.equals(e.getNext(function(t){return!(Y(t)||X(t)||y(t))}))}function p(t){this.upper=t[0],this.lower=t[1],this.set.apply(this,t.slice(2))}function c(t){var e=t.element;if(e&&v(e)&&(e=e.getAscendant(t.triggers,!0))&&t.editable.contains(e)){var i=s(e);if("true"==i.getAttribute("contenteditable"))return e;if(i.is(t.triggers))return i}return null}function u(e,t,i){return t[i?"getPrevious":"getNext"](function(t){return t&&t.type==CKEDITOR.NODE_TEXT&&!Y(t)||v(t)&&!y(t)&&!m(e,t)})}function f(t,e,i){return e<t&&t<i}function s(t,e){if(t.data("cke-editable"))return null;for(e||(t=t.getParent());t&&!t.data("cke-editable");){if(t.hasAttribute("contenteditable"))return t;t=t.getParent()}return null}function d(t,e,i){var n,o=new CKEDITOR.dom.range(t.doc),r=t.editor;S.ie&&t.enterMode==CKEDITOR.ENTER_BR?n=t.doc.createText(l):(n=(n=s(t.element,!0))&&n.data("cke-enter-mode")||t.enterMode,(n=new R(a[n],t.doc)).is("br")||t.doc.createText(l).appendTo(n)),i&&r.fire("saveSnapshot"),e(n),o.moveToPosition(n,CKEDITOR.POSITION_AFTER_START),r.getSelection().selectRanges([o]),t.hotNode=n,i&&r.fire("saveSnapshot")}function g(n,o){return{canUndo:!0,modes:{wysiwyg:1},exec:function(t){var e,i;t=(t=t.getSelection().getStartElement()).getAscendant(j,1),E(n,t)||!t||t.equals(n.editable)||t.contains(n.editable)||((e=s(t))&&"false"==e.getAttribute("contenteditable")&&(t=e),n.element=t,v(e=u(n,t,!o))&&e.is(n.triggers)&&e.is(V)&&(!u(n,e,!o)||(i=u(n,e,!o))&&v(i)&&i.is(n.triggers))?r(e):v(i=c(n))&&(u(n,i,!o)?(t=u(n,i,!o))&&v(t)&&t.is(n.triggers)&&r(i):r(i)))}};function r(e){var t=S.ie&&S.version<9?" ":l,i=n.hotNode&&n.hotNode.getText()==t&&n.element.equals(n.hotNode)&&n.lastCmdDirection===!!o;d(n,function(t){i&&n.hotNode&&n.hotNode.remove(),t[o?"insertAfter":"insertBefore"](e),t.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!o}),n.lastCmdDirection=!!o}),S.ie||n.enterMode==CKEDITOR.ENTER_BR||n.hotNode.scrollIntoView(),n.line.detach()}}function m(t,e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||!e.$)return!1;var i=t.line;return i.wrap.equals(e)||i.wrap.contains(e)}function v(t){return t&&t.type==CKEDITOR.NODE_ELEMENT&&t.$}function y(t){return!!v(t)&&((e=b(t))||(e=!!v(t)&&!(!(e={left:1,right:1,center:1})[t.getComputedStyle("float")]&&!e[t.getAttribute("align")])),e);var e}function b(t){return!!{absolute:1,fixed:1}[t.getComputedStyle("position")]}function _(t,e){return v(e)?e.is(t.triggers):null}function E(t,e){if(!e)return!1;for(var i=e.getParents(1),n=i.length;n--;)for(var o=t.tabuList.length;o--;)if(i[n].hasAttribute(t.tabuList[o]))return!0;return!1}function w(t){var e=t.editable,i=t.mouse,n=t.view,o=t.triggerOffset;D(t);var r=i.y>(t.inInlineMode?n.editable.top+n.editable.height/2:Math.min(n.editable.height,n.pane.height)/2);return(e=e[r?"getLast":"getFirst"](function(t){return!(Y(t)||X(t))}))?(m(t,e)&&(e=t.line.wrap[r?"getPrevious":"getNext"](function(t){return!(Y(t)||X(t))})),v(e)&&!y(e)&&_(t,e)?(x(t,e),!r&&0<=e.size.top&&f(i.y,0,e.size.top+o)?(t=t.inInlineMode||0===n.scroll.y?F:H,new p([null,e,N,P,t])):r&&e.size.bottom<=n.pane.height&&f(i.y,e.size.bottom-o,n.pane.height)?(t=t.inInlineMode||f(e.size.bottom,n.pane.height-o,n.pane.height)?B:H,new p([e,null,K,P,t])):null):null):null}function C(t){var e=t.mouse,i=t.view,n=t.triggerOffset,o=c(t);if(!o)return null;x(t,o);n=Math.min(n,0|o.size.outerHeight/2);var r,s,a=[];if(f(e.y,o.size.top-1,o.size.top+n))s=!1;else{if(!f(e.y,o.size.bottom-n,o.size.bottom+1))return null;s=!0}if(y(o)||function(e,t,i){return!!(t=t[i?"getLast":"getFirst"](function(t){return e.isRelevant(t)&&!t.is($)}))&&(x(e,t),i?t.size.top>e.mouse.y:t.size.bottom<e.mouse.y)}(t,o,s)||o.getParent().is(z))return null;var l=u(t,o,!s);if(l){if(l&&l.type==CKEDITOR.NODE_TEXT)return null;if(v(l)){if(y(l)||!_(t,l)||l.getParent().is(z))return null;a=[l,o][s?"reverse":"concat"]().concat([L,P])}}else o.equals(t.editable[s?"getLast":"getFirst"](t.isRelevant))?(D(t),s&&f(e.y,o.size.bottom-n,i.pane.height)&&f(o.size.bottom,i.pane.height-n,i.pane.height)?r=B:f(e.y,0,o.size.top+n)&&(r=F)):r=H,a=[null,o][s?"reverse":"concat"]().concat([s?K:N,P,r,o.equals(t.editable[s?"getLast":"getFirst"](t.isRelevant))?s?B:F:H]);return 0 in a?new p(a):null}function T(t,e,i,n){for(var o=e.getDocumentPosition(),r={},s={},a={},l={},c=Q.length;c--;)r[Q[c]]=parseInt(e.getComputedStyle.call(e,"border-"+Q[c]+"-width"),10)||0,a[Q[c]]=parseInt(e.getComputedStyle.call(e,"padding-"+Q[c]),10)||0,s[Q[c]]=parseInt(e.getComputedStyle.call(e,"margin-"+Q[c]),10)||0;return i&&!n||I(t,n),l.top=o.y-(i?0:t.view.scroll.y),l.left=o.x-(i?0:t.view.scroll.x),l.outerWidth=e.$.offsetWidth,l.outerHeight=e.$.offsetHeight,l.height=l.outerHeight-(a.top+a.bottom+r.top+r.bottom),l.width=l.outerWidth-(a.left+a.right+r.left+r.right),l.bottom=l.top+l.outerHeight,l.right=l.left+l.outerWidth,t.inInlineMode&&(l.scroll={top:e.$.scrollTop,left:e.$.scrollLeft}),O({border:r,padding:a,margin:s,ignoreScroll:i},l,!0)}function x(t,e,i){if(!v(e))return e.size=null;if(e.size){if(e.size.ignoreScroll==i&&e.size.date>new Date-o)return null}else e.size={};return O(e.size,T(t,e,i),{date:+new Date},!0)}function D(t,e){t.view.editable=T(t,t.editable,e,!0)}function I(t,e){t.view||(t.view={});var i=t.view;if(!(!e&&i&&i.date>new Date-o)){i=(n=t.win).getScrollPosition();var n=n.getViewPaneSize();O(t.view,{scroll:{x:i.x,y:i.y,width:t.doc.$.documentElement.scrollWidth-n.width,height:t.doc.$.documentElement.scrollHeight-n.height},pane:{width:n.width,height:n.height,bottom:n.height+i.y},date:+new Date},!0)}}CKEDITOR.plugins.add("magicline",{init:function(o){var n,r,s,a=o.config,t=a.magicline_triggerOffset||30,l={editor:o,enterMode:a.enterMode,triggerOffset:t,holdDistance:0|t*(a.magicline_holdDistance||.5),boxColor:a.magicline_color||"#ff0000",rtl:"rtl"==a.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(a.magicline_tabuList||[]),triggers:a.magicline_everywhere?j:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}};l.isRelevant=function(t){return v(t)&&!m(l,t)&&!y(t)},o.on("contentDom",function(){var t=o.editable(),e=o.document,i=o.window;O(l,{editable:t,inInlineMode:t.isInline(),doc:e,win:i,hotNode:null},!0),l.boundary=l.inInlineMode?l.editable:l.doc.getDocumentElement(),t.is(M.$inline)||(l.inInlineMode&&!b(t)&&t.setStyles({position:"relative",top:null,left:null}),function(c){var t=c.doc,e=k('<span contenteditable="false" style="'+W+"position:absolute;border-top:1px dashed "+c.boxColor+'"></span>',t),i=CKEDITOR.getUrl(this.path+"images/"+(S.hidpi?"hidpi/":"")+"icon"+(c.rtl?"-rtl":"")+".png");for(O(e,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(c.editable,!0),this},lineChildren:[O(k('<span title="'+c.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',t),{base:W+"height:17px;width:17px;"+(c.rtl?"left":"right")+":17px;background:url("+i+") center no-repeat "+c.boxColor+";cursor:pointer;"+(S.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(S.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),O(k(q,t),{base:G+"left:0px;border-left-color:"+c.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),O(k(q,t),{base:G+"right:0px;border-right-color:"+c.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){x(c,this);var t=c.holdDistance,e=this.size;return!!(e&&f(c.mouse.y,e.top-t,e.bottom+t)&&f(c.mouse.x,e.left-t,e.right+t))},place:function(){var t=c.view,e=c.editable,i=c.trigger,n=i.upper,o=i.lower,r=n||o,s=r.getParent(),a={};for(var l in this.trigger=i,n&&x(c,n,!0),o&&x(c,o,!0),x(c,s,!0),c.inInlineMode&&D(c,!0),s.equals(e)?(a.left=t.scroll.x,a.right=-t.scroll.x,a.width=""):(a.left=r.size.left-r.size.margin.left+t.scroll.x-(c.inInlineMode?t.editable.left+t.editable.border.left:0),a.width=r.size.outerWidth+r.size.margin.left+r.size.margin.right+t.scroll.x,a.right=""),n&&o?a.top=n.size.margin.bottom===o.size.margin.top?0|n.size.bottom+n.size.margin.bottom/2:n.size.margin.bottom<o.size.margin.top?n.size.bottom+n.size.margin.bottom:n.size.bottom+n.size.margin.bottom-o.size.margin.top:n?o||(a.top=n.size.bottom+n.size.margin.bottom):a.top=o.size.top-o.size.margin.top,i.is(F)||f(a.top,t.scroll.y-15,t.scroll.y+5)?(a.top=c.inInlineMode?0:t.scroll.y,this.look(F)):i.is(B)||f(a.top,t.pane.bottom-5,t.pane.bottom+15)?(a.top=c.inInlineMode?t.editable.height+t.editable.padding.top+t.editable.padding.bottom:t.pane.bottom-1,this.look(B)):(c.inInlineMode&&(a.top-=t.editable.top+t.editable.border.top),this.look(H)),c.inInlineMode&&(a.top--,a.top+=t.editable.scroll.top,a.left+=t.editable.scroll.left),a)a[l]=CKEDITOR.tools.cssLength(a[l]);this.setStyles(a)},look:function(t){if(this.oldLook!=t){for(var e,i=this.lineChildren.length;i--;)(e=this.lineChildren[i]).setAttribute("style",e.base+e.looks[0|t/2]);this.oldLook=t}},wrap:new R("span",c.doc)}),t=e.lineChildren.length;t--;)e.lineChildren[t].appendTo(e);e.look(H),e.appendTo(e.wrap),e.unselectable(),e.lineChildren[0].on("mouseup",function(t){e.detach(),d(c,function(t){var e=c.line.trigger;t[e.is(N)?"insertBefore":"insertAfter"](e.is(N)?e.lower:e.upper)},!0),c.editor.focus(),S.ie||c.enterMode==CKEDITOR.ENTER_BR||c.hotNode.scrollIntoView(),t.data.preventDefault(!0)}),e.on("mousedown",function(t){t.data.preventDefault(!0)}),c.line=e}.call(this,l),I(l),t.attachListener(o,"beforeUndoImage",function(){l.line.detach()}),t.attachListener(o,"beforeGetData",function(){l.line.wrap.getParent()&&(l.line.detach(),o.once("getData",function(){l.line.attach()},null,null,1e3))},null,null,0),t.attachListener(l.inInlineMode?e:e.getWindow().getFrame(),"mouseout",function(t){if("wysiwyg"==o.mode)if(l.inInlineMode){var e=t.data.$.clientX;t=t.data.$.clientY,I(l),D(l,!0);var i=l.view.editable,n=l.view.scroll;e>i.left-n.x&&e<i.right-n.x&&t>i.top-n.y&&t<i.bottom-n.y||(clearTimeout(s),s=null,l.line.detach())}else clearTimeout(s),s=null,l.line.detach()}),t.attachListener(t,"keyup",function(){l.hiddenMode=0}),t.attachListener(t,"keydown",function(t){if("wysiwyg"==o.mode)switch(t.data.getKeystroke()){case 2228240:case 16:l.hiddenMode=1,l.line.detach()}}),t.attachListener(l.inInlineMode?t:e,"mousemove",function(t){if(r=!0,"wysiwyg"==o.mode&&!o.readOnly&&!s){var e={x:t.data.$.clientX,y:t.data.$.clientY};s=setTimeout(function(){l.mouse=e,s=l.trigger=null,I(l),r&&!l.hiddenMode&&o.focusManager.hasFocus&&!l.line.mouseNear()&&(l.element=U(l,!0))&&((l.trigger=w(l)||C(l)||Z(l))&&!E(l,l.trigger.upper||l.trigger.lower)?l.line.attach().place():(l.trigger=null,l.line.detach()),r=!1)},30)}}),t.attachListener(i,"scroll",function(){"wysiwyg"==o.mode&&(l.line.detach(),S.webkit&&(l.hiddenMode=1,clearTimeout(n),n=setTimeout(function(){l.mouseDown||(l.hiddenMode=0)},50)))}),t.attachListener(A?e:i,"mousedown",function(){"wysiwyg"==o.mode&&(l.line.detach(),l.hiddenMode=1,l.mouseDown=1)}),t.attachListener(A?e:i,"mouseup",function(){l.hiddenMode=0,l.mouseDown=0}),o.addCommand("accessPreviousSpace",g(l)),o.addCommand("accessNextSpace",g(l,!0)),o.setKeystroke([[a.magicline_keystrokePrevious,"accessPreviousSpace"],[a.magicline_keystrokeNext,"accessNextSpace"]]),o.on("loadSnapshot",function(){var t,e,i,n;for(n in{p:1,br:1,div:1})for(i=(t=o.document.getElementsByTag(n)).count();i--;)if((e=t.getItem(i)).data("cke-magicline-hot"))return l.hotNode=e,void(l.lastCmdDirection="true"===e.data("cke-magicline-dir"))}),this.backdoor={accessFocusSpace:d,boxTrigger:p,isLine:m,getAscendantTrigger:c,getNonEmptyNeighbour:u,getSize:T,that:l,triggerEdge:C,triggerEditable:w,triggerExpand:Z})},this)}});var O=CKEDITOR.tools.extend,R=CKEDITOR.dom.element,k=R.createFromHtml,S=CKEDITOR.env,A=CKEDITOR.env.ie&&CKEDITOR.env.version<9,M=CKEDITOR.dtd,a={},N=128,K=64,L=32,P=16,F=4,B=2,H=1,l=" ",z=M.$listItem,$=M.$tableContent,V=O({},M.$nonEditable,M.$empty),j=M.$block,o=100,W="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",G=W+"border-color:transparent;display:block;border-style:solid;",q="<span>"+l+"</span>";a[CKEDITOR.ENTER_BR]="br",a[CKEDITOR.ENTER_P]="p",a[CKEDITOR.ENTER_DIV]="div",p.prototype={set:function(t,e,i){return this.properties=t+e+(i||H),this},is:function(t){return(this.properties&t)==t}};var U=function(t,e,i){if(!t.mouse)return null;var n=t.doc,o=t.line.wrap,r=tt(n,i=i||t.mouse);return e&&m(t,r)&&(o.hide(),r=tt(n,i),o.show()),!r||r.type!=CKEDITOR.NODE_ELEMENT||!r.$||S.ie&&S.version<9&&!t.boundary.equals(r)&&!t.boundary.contains(r)?null:r},Y=CKEDITOR.dom.walker.whitespaces(),X=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),Z=function(t){var e,i=r(t);if(e=i){e=i.upper;var n=i.lower;e=!(!e||!n||y(n)||y(e)||n.equals(e)||e.equals(n)||n.contains(e)||e.contains(n)||!(_(t,e)&&_(t,n)&&h(0,e,n)))}return e?i:null},Q=["top","left","right","bottom"];function r(e){var t,i,n,o,r,s;if(!v(d=e.element)||d.contains(e.editable)||d.isReadOnly())return null;if(h(0,t=(n=function(t,e,i,n){for(var o=n,r=n,s=0,a=!1,l=!1,c=t.view.pane.height,u=t.mouse;u.y+s<c&&0<u.y-s&&(a=a||e(o,n),l=l||e(r,n),!a&&0<u.y-s&&(o=i(t,{x:u.x,y:u.y-s})),!l&&u.y+s<c&&(r=i(t,{x:u.x,y:u.y+s})),!a||!l);)s+=2;return new p([o,r,null,null])}(e,function(t,e){return!e.equals(t)},function(t,e){return U(t,!0,e)},d)).upper,i=n.lower))return n.set(L,8);if(t&&d.contains(t))for(;!t.getParent().equals(d);)t=t.getParent();else t=d.getFirst(function(t){return J(e,t)});if(i&&d.contains(i))for(;!i.getParent().equals(d);)i=i.getParent();else i=d.getLast(function(t){return J(e,t)});if(!t||!i)return null;if(x(e,t),x(e,i),!f(e.mouse.y,t.size.top,i.size.bottom))return null;for(var a,l,c,u,d=Number.MAX_VALUE;i&&!i.equals(t)&&(l=t.getNext(e.isRelevant));)(a=Math.abs((s=l,x(o=e,r=t),x(o,s),o=r.size.bottom,s=s.size.top,(o&&s?0|(o+s)/2:o||s)-e.mouse.y)))<d&&(d=a,c=t,u=l),x(e,t=l);return c&&u&&f(e.mouse.y,c.size.top,u.size.bottom)?(n.upper=c,n.lower=u,n.set(L,8)):null}function J(t,e){return!(e&&e.type==CKEDITOR.NODE_TEXT||X(e)||y(e)||m(t,e)||e.type==CKEDITOR.NODE_ELEMENT&&e.$&&e.is("br"))}function tt(t,e){var i=t.$.elementFromPoint(e.x,e.y);return i&&i.nodeType?new CKEDITOR.dom.element(i):null}}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,CKEDITOR.plugins.add("maximize",{init:function(r){function s(){var t=h.getViewPaneSize();r.resize(t.width,t.height,null,!0)}if(r.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var a,l,c,u=r.lang,d=CKEDITOR.document,h=d.getWindow(),p=CKEDITOR.TRISTATE_OFF;r.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var t=r.container.getFirst(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasClass("cke_inner")}),e=r.ui.space("contents");if("wysiwyg"==r.mode){var i=r.getSelection();a=i&&i.getRanges(),l=h.getScrollPosition()}else{var n=r.editable().$;a=!CKEDITOR.env.ie&&[n.selectionStart,n.selectionEnd],l=[n.scrollLeft,n.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(h.on("resize",s),c=h.getScrollPosition(),i=r.container;i=i.getParent();)i.setCustomData("maximize_saved_styles",ui(i)),i.setStyle("z-index",r.config.baseFloatZIndex-5);e.setCustomData("maximize_saved_styles",ui(e,!0)),t.setCustomData("maximize_saved_styles",ui(t,!0)),e={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},d.getDocumentElement().setStyles(e),CKEDITOR.env.gecko||d.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||d.getBody().setStyles(e),CKEDITOR.env.ie?setTimeout(function(){h.$.scrollTo(0,0)},0):h.$.scrollTo(0,0),t.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),t.$.offsetLeft,t.setStyles({"z-index":r.config.baseFloatZIndex-5,left:"0px",top:"0px"}),t.addClass("cke_maximized"),s(),e=t.getDocumentPosition(),t.setStyles({left:-1*e.x+"px",top:-1*e.y+"px"}),CKEDITOR.env.gecko&&hi(r)}else if(this.state==CKEDITOR.TRISTATE_ON){h.removeListener("resize",s),i=[e,t];for(var o=0;o<i.length;o++)di(i[o],i[o].getCustomData("maximize_saved_styles")),i[o].removeCustomData("maximize_saved_styles");for(i=r.container;i=i.getParent();)di(i,i.getCustomData("maximize_saved_styles")),i.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){h.$.scrollTo(c.x,c.y)},0):h.$.scrollTo(c.x,c.y),t.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(t.setStyle("display","inline"),setTimeout(function(){t.setStyle("display","block")},0)),r.fire("resize",{outerHeight:r.container.$.offsetHeight,contentsHeight:e.$.offsetHeight,outerWidth:r.container.$.offsetWidth})}this.toggleState(),(i=this.uiItems[0])&&(e=this.state==CKEDITOR.TRISTATE_OFF?u.maximize.maximize:u.maximize.minimize,(i=CKEDITOR.document.getById(i._.id)).getChild(1).setHtml(e),i.setAttribute("title",e),i.setAttribute("href",'javascript:void("'+e+'");')),"wysiwyg"==r.mode?a?(CKEDITOR.env.gecko&&hi(r),r.getSelection().selectRanges(a),(n=r.getSelection().getStartElement())&&n.scrollIntoView(!0)):h.$.scrollTo(l.x,l.y):(a&&(n.selectionStart=a[0],n.selectionEnd=a[1]),n.scrollLeft=l[0],n.scrollTop=l[1]),a=l=null,p=this.state,r.fire("maximize",this.state)},canUndo:!1}),r.ui.addButton&&r.ui.addButton("Maximize",{label:u.maximize.maximize,command:"maximize",toolbar:"tools,10"}),r.on("mode",function(){var t=r.getCommand("maximize");t.setState(t.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:p)},null,null,100)}}}),Lt={canUndo:!1,async:!0,exec:function(t,e){var i=t.lang,n=CKEDITOR.tools.keystrokeToString(i.common.keyboard,t.getCommandKeystroke(CKEDITOR.env.ie?t.commands.paste:this)),o=e&&void 0!==e.notification?e.notification:!e||!e.from||"keystrokeHandler"===e.from&&CKEDITOR.env.ie;i=o&&"string"==typeof o?o:i.pastetext.pasteNotification.replace(/%1/,'<kbd aria-label="'+n.aria+'">'+n.display+"</kbd>");t.execCommand("paste",{type:"text",notification:!!o&&i})}},CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(e){var t=CKEDITOR.env.safari?CKEDITOR.CTRL+CKEDITOR.ALT+CKEDITOR.SHIFT+86:CKEDITOR.CTRL+CKEDITOR.SHIFT+86;e.addCommand("pastetext",Lt),e.setKeystroke(t,"pastetext"),e.ui.addButton&&e.ui.addButton("PasteText",{label:e.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),e.config.forcePasteAsPlainText&&e.on("beforePaste",function(t){"html"!=t.data.type&&(t.data.type="text")}),e.on("pasteState",function(t){e.getCommand("pastetext").setState(t.data)})}}),CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(s){var a=0,l=this.path,t=void 0===s.config.pasteFromWord_inlineImages||s.config.pasteFromWord_inlineImages;s.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(t,e){a=1,t.execCommand("paste",{type:"html",notification:!e||void 0===e.notification||e.notification})}}),s.ui.addButton&&s.ui.addButton("PasteFromWord",{label:s.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),s.on("paste",function(t){var e=t.data,i=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?e.dataTransfer.getData("text/html",!0):null,n=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?e.dataTransfer.getData("text/rtf"):null,o={dataValue:i=i||e.dataValue,dataTransfer:{"text/rtf":n}};if(n=/(class=\"?Mso|style=(?:\"|\')[^\"]*?\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/,n=/<meta\s*name=(?:\"|\')?generator(?:\"|\')?\s*content=(?:\"|\')?microsoft/gi.test(i)||n.test(i),i&&(a||n)&&(!1!==s.fire("pasteFromWord",o)||a)){e.dontFilter=!0;var r=function(t,e,i){var n=CKEDITOR.cleanWord;return n?i():(t=CKEDITOR.getUrl(t.config.pasteFromWordCleanupFile||e+"filter/default.js"),CKEDITOR.scriptLoader.load(t,i,null,!0)),!n}(s,l,function(){r?s.fire("paste",e):s.config.pasteFromWordPromptCleanup&&!a&&!confirm(s.lang.pastefromword.confirmCleanup)||(o.dataValue=CKEDITOR.cleanWord(o.dataValue,s),s.fire("afterPasteFromWord",o),e.dataValue=o.dataValue),a=0});r&&t.cancel()}},null,null,3),CKEDITOR.plugins.clipboard.isCustomDataTypesSupported&&t&&s.on("afterPasteFromWord",function(t){var e,i=CKEDITOR.plugins.pastefromword&&CKEDITOR.plugins.pastefromword.images,n=[];if(i&&t.editor.filter.check("img[src]")&&0!==(e=i.extractTagsFromHtml(t.data.dataValue)).length&&0!==(i=i.extractFromRtf(t.data.dataTransfer["text/rtf"])).length&&(CKEDITOR.tools.array.forEach(i,function(t){n.push(t.type?"data:"+t.type+";base64,"+CKEDITOR.tools.convertBytesToBase64(CKEDITOR.tools.convertHexStringToBytes(t.hex)):null)},this),e.length===n.length))for(i=0;i<e.length;i++)0===e[i].indexOf("file://")&&n[i]&&(t.data.dataValue=t.data.dataValue.replace(e[i],n[i]))})}}),CKEDITOR.plugins.add("removeformat",{init:function(t){t.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),t.ui.addButton&&t.ui.addButton("RemoveFormat",{label:t.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(r){function t(t){return t.type==CKEDITOR.NODE_ELEMENT}for(var e,s=r._.removeFormatRegex||(r._.removeFormatRegex=new RegExp("^(?:"+r.config.removeFormatTags.replace(/,/g,"|")+")$","i")),i=r._.removeAttributes||(r._.removeAttributes=r.config.removeFormatAttributes.split(",")),a=CKEDITOR.plugins.removeformat.filter,n=r.getSelection().getRanges(),o=n.createIterator();e=o.getNextRange();){e.collapsed||e.enlarge(CKEDITOR.ENLARGE_ELEMENT);var l=e.createBookmark(),c=l.startNode,u=l.endNode,d=function(t){for(var e,i=r.elementPath(t),n=i.elements,o=1;(e=n[o])&&!e.equals(i.block)&&!e.equals(i.blockLimit);o++)s.test(e.getName())&&a(r,e)&&t.breakParent(e)};if(d(c),u)for(d(u),c=c.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);c&&!c.equals(u);)if(c.isReadOnly()){if(c.getPosition(u)&CKEDITOR.POSITION_CONTAINS)break;c=c.getNext(t)}else d=c.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==c.getName()&&c.data("cke-realelement")||!a(r,c)||(s.test(c.getName())?c.remove(1):(c.removeAttributes(i),r.fire("removeFormatCleanup",c))),c=d;e.moveToBookmark(l)}r.forceNextSelectionCheck(),r.getSelection().selectRanges(n)}}},filter:function(t,e){for(var i=t._.removeFormatFilters||[],n=0;n<i.length;n++)if(!1===i[n](e))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(t){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(t)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",Pt={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(t){this.toggleState(),this.refresh(t)},refresh:function(t){if(t.document){var e=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";t.editable()[e]("cke_show_borders")}}},CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var t;t=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(t)},init:function(e){var t=e.addCommand("showborders",Pt);(t.canUndo=!1)!==e.config.startupShowBorders&&t.setState(CKEDITOR.TRISTATE_ON),e.on("mode",function(){t.state!=CKEDITOR.TRISTATE_DISABLED&&t.refresh(e)},null,null,100),e.on("contentDom",function(){t.state!=CKEDITOR.TRISTATE_DISABLED&&t.refresh(e)}),e.on("removeFormatCleanup",function(t){t=t.data,e.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&t.is("table")&&(!t.hasAttribute("border")||parseInt(t.getAttribute("border"),10)<=0)&&t.addClass("cke_show_border")})},afterInit:function(t){var e=t.dataProcessor;t=e&&e.dataFilter,e=e&&e.htmlFilter,t&&t.addRules({elements:{table:function(t){var e=(t=t.attributes).class,i=parseInt(t.border,10);i&&!(i<=0)||e&&-1!=e.indexOf("cke_show_border")||(t.class=(e||"")+" cke_show_border")}}}),e&&e.addRules({elements:{table:function(t){var e=(t=t.attributes).class;e&&(t.class=e.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",function(t){var e=t.data.name;"table"!=e&&"tableProperties"!=e||((e=(t=t.data.definition).getContents("info").get("txtBorder")).commit=CKEDITOR.tools.override(e.commit,function(n){return function(t,e){n.apply(this,arguments);var i=parseInt(this.getValue(),10);e[!i||i<=0?"addClass":"removeClass"]("cke_show_border")}}),(t=(t=t.getContents("advanced"))&&t.get("advCSSClasses"))&&(t.setup=CKEDITOR.tools.override(t.setup,function(t){return function(){t.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),t.commit=CKEDITOR.tools.override(t.commit,function(i){return function(t,e){i.apply(this,arguments),parseInt(e.getAttribute("border"),10)||e.addClass("cke_show_border")}})))}),function(){CKEDITOR.plugins.add("sourcearea",{init:function(i){function n(){var t=e&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),t&&this.focus()}if(i.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var t=CKEDITOR.plugins.sourcearea;i.addMode("source",function(t){var e=i.ui.space("contents").getDocument().createElement("textarea");e.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",i.config.sourceAreaTabSize||4))),e.setAttribute("dir","ltr"),e.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),i.ui.space("contents").append(e),(e=i.editable(new o(i,e))).setData(i.getData(1)),CKEDITOR.env.ie&&(e.attachListener(i,"resize",n,e),e.attachListener(CKEDITOR.document.getWindow(),"resize",n,e),CKEDITOR.tools.setTimeout(n,0,e)),i.fire("ariaWidget",this),t()}),i.addCommand("source",t.commands.source),i.ui.addButton&&i.ui.addButton("Source",{label:i.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),i.on("mode",function(){i.getCommand("source").setState("source"==i.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var e=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var o=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(t){this.setValue(t),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(t){this[(t?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){o.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(t){"wysiwyg"==t.mode&&t.fire("saveSnapshot"),t.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),t.setMode("source"==t.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(e){var i=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),e.addCommand("specialchar",{exec:function(){var t=e.langCode;t=i.availableLangs[t]?t:i.availableLangs[t.replace(/-.*/,"")]?t.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(i.path+"dialogs/lang/"+t+".js"),function(){CKEDITOR.tools.extend(e.lang.specialchar,i.langEntries[t]),e.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SpecialChar",{label:e.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){function e(e){var i=this._,t=i.menu;i.state!==CKEDITOR.TRISTATE_DISABLED&&(i.on&&t?t.hide():(i.previousState=i.state,t||((t=i.menu=new CKEDITOR.menu(e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.common.options}}})).onHide=CKEDITOR.tools.bind(function(){var t=this.command?e.getCommand(this.command).modes:this.modes;this.setState(!t||t[e.mode]?i.previousState:CKEDITOR.TRISTATE_DISABLED),i.on=0},this),this.onMenu&&t.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),i.on=1,setTimeout(function(){t.show(CKEDITOR.document.getById(i.id),4)},0)))}CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){delete t.panel,this.base(t),this.hasArrow=!0,this.click=e},statics:{handler:{create:function(t){return new CKEDITOR.ui.menuButton(t)}}}})},beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",onLoad:function(t){CKEDITOR.plugins.scayt.onLoadTimestamp=(new Date).getTime(),"moono-lisa"==(CKEDITOR.skinName||t.config.skin)&&CKEDITOR.document.appendStyleSheet(this.path+"skins/"+CKEDITOR.skin.name+"/scayt.css"),CKEDITOR.document.appendStyleSheet(this.path+"dialogs/dialog.css")},init:function(r){var s=this,i=CKEDITOR.plugins.scayt;this.bindEvents(r),this.parseConfig(r),this.addRule(r),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(r);var t=r.lang.scayt,e=CKEDITOR.env;r.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:t.text_title,title:r.plugins.wsc?r.lang.wsc.title:t.text_title,modes:{wysiwyg:!(e.ie&&(e.version<8||e.quirks))},toolbar:"spellchecker,20",refresh:function(){var t=r.ui.instances.Scayt.getState();r.scayt&&(t=i.state.scayt[r.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),r.fire("scaytButtonState",t)},onRender:function(){var e=this;r.on("scaytButtonState",function(t){t.data,e.setState(t.data)})},onMenu:function(){var t=r.scayt;r.getMenuItem("scaytToggle").label=r.lang.scayt[t&&i.state.scayt[r.name]?"btn_disable":"btn_enable"];var e={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:r.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return r.config.scayt_uiTabs[0]||delete e.scaytOptions,r.config.scayt_uiTabs[1]||delete e.scaytLangs,r.config.scayt_uiTabs[2]||delete e.scaytDict,t&&!CKEDITOR.plugins.scayt.isNewUdSupported(t)&&(delete e.scaytDict,r.config.scayt_uiTabs[2]=0,CKEDITOR.plugins.scayt.alarmCompatibilityMessage()),e}}),r.contextMenu&&r.addMenuItems&&(r.contextMenu.addListener(function(t,e){var i,n,o=r.scayt;return o&&(n=o.getSelectionNode())&&(i=s.menuGenerator(r,n),o.showBanner("."+r.contextMenu._.definition.panel.className.split(" ").join(" ."))),i}),r.contextMenu._.onHide=CKEDITOR.tools.override(r.contextMenu._.onHide,function(e){return function(){var t=r.scayt;return t&&t.hideBanner(),e.apply(this)}}))},addMenuItems:function(n){var e=this,i=CKEDITOR.plugins.scayt;n.addMenuGroup("scaytButton");for(var t=n.config.scayt_contextMenuItemsOrder.split("|"),o=0;o<t.length;o++)t[o]="scayt_"+t[o];if((t=["grayt_description","grayt_suggest","grayt_control"].concat(t))&&t.length)for(o=0;o<t.length;o++)n.addMenuGroup(t[o],o-10);n.addCommand("scaytToggle",{exec:function(t){var e=t.scayt;i.state.scayt[t.name]=!i.state.scayt[t.name],!0===i.state.scayt[t.name]?e||i.createScayt(t):e&&i.destroy(t)}}),n.addCommand("scaytAbout",{exec:function(t){t.scayt.tabToOpen="about",t.lockSelection(),t.openDialog(e.dialogName)}}),n.addCommand("scaytOptions",{exec:function(t){t.scayt.tabToOpen="options",t.lockSelection(),t.openDialog(e.dialogName)}}),n.addCommand("scaytLangs",{exec:function(t){t.scayt.tabToOpen="langs",t.lockSelection(),t.openDialog(e.dialogName)}}),n.addCommand("scaytDict",{exec:function(t){t.scayt.tabToOpen="dictionaries",t.lockSelection(),t.openDialog(e.dialogName)}}),t={scaytToggle:{label:n.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:n.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:n.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:n.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:n.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},n.plugins.wsc&&(t.WSC={label:n.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var t=CKEDITOR.plugins.scayt,e=n.scayt,i=n.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?n.container.getText():n.document.getBody().getText();(i=i.replace(/\s/g,""))?(e&&t.state.scayt[n.name]&&e.setMarkupPaused&&e.setMarkupPaused(!0),n.lockSelection(),n.execCommand("checkspell")):alert("Nothing to check!")}}),n.addMenuItems(t)},bindEvents:function(r){function e(){s.destroy(r)}function o(){!s.state.scayt[r.name]||r.readOnly||r.scayt||s.createScayt(r)}function t(){a?r.config.scayt_inlineModeImmediateMarkup?o():(r.on("blur",function(){setTimeout(e,0)}),r.on("focus",o),r.focusManager.hasFocus&&o()):o(),function(){var t=r.editable();t.attachListener(t,"focus",function(t){var e,i;if(CKEDITOR.plugins.scayt&&!r.scayt&&setTimeout(o,0),t=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[r.name]&&r.scayt,(a||t)&&r._.savedSelection){t=!(t=r._.savedSelection.getSelectedElement())&&r._.savedSelection.getRanges();for(var n=0;n<t.length;n++)"string"==typeof(i=t[n]).startContainer.$.nodeValue&&(((e=i.startContainer.getText().length)<i.startOffset||e<i.endOffset)&&r.unlockSelection(!1))}},this,null,-10)}();var t=r.editable();t.attachListener(t,"mousedown",function(t){t=t.data.getTarget();var e=r.widgets&&r.widgets.getByElement(t);e&&(e.wrapper=t.getAscendant(function(t){return t.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)}var s=CKEDITOR.plugins.scayt,a=r.elementMode==CKEDITOR.ELEMENT_MODE_INLINE;r.on("contentDom",t),r.on("beforeCommandExec",function(t){var e=r.scayt,i=!1,n=!1,o=!0;t.data.name in s.options.disablingCommandExec&&"wysiwyg"==r.mode?e&&(s.destroy(r),r.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==t.data.name&&"italic"!==t.data.name&&"underline"!==t.data.name&&"strike"!==t.data.name&&"subscript"!==t.data.name&&"superscript"!==t.data.name&&"enter"!==t.data.name&&"cut"!==t.data.name&&"language"!==t.data.name||!e||("cut"===t.data.name&&(n=!(o=!1)),"language"===t.data.name&&(n=i=!0),r.fire("reloadMarkupScayt",{removeOptions:{removeInside:o,forceBookmark:n,language:i},timeout:0}))}),r.on("beforeSetMode",function(t){"source"==t.data&&((t=r.scayt)&&(s.destroy(r),r.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)),r.document&&r.document.getBody().removeAttribute("_jquid"))}),r.on("afterCommandExec",function(t){"wysiwyg"!=r.mode||"undo"!=t.data.name&&"redo"!=t.data.name||setTimeout(function(){s.reloadMarkup(r.scayt)},250)}),r.on("readOnly",function(t){var e;t&&(e=r.scayt,!0===t.editor.readOnly?e&&e.fire("removeMarkupInDocument",{}):e?s.reloadMarkup(e):"wysiwyg"==t.editor.mode&&!0===s.state.scayt[t.editor.name]&&(s.createScayt(r),t.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))}),r.on("beforeDestroy",e),r.on("setData",function(){e(),r.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&!r.plugins.divarea||t()},this,null,50),r.on("reloadMarkupScayt",function(t){var e=t.data&&t.data.removeOptions,i=t.data&&t.data.timeout,n=t.data&&t.data.language,o=r.scayt;o&&setTimeout(function(){n&&(e.selectionNode=r.plugins.language.getCurrentLangElement(r),e.selectionNode=e.selectionNode&&e.selectionNode.$||null),o.removeMarkupInSelectionNode(e),s.reloadMarkup(o)},i||0)}),r.on("insertElement",function(){r.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50),r.on("insertHtml",function(){r.scayt&&r.scayt.setFocused&&r.scayt.setFocused(!0),r.fire("reloadMarkupScayt")},this,null,50),r.on("insertText",function(){r.scayt&&r.scayt.setFocused&&r.scayt.setFocused(!0),r.fire("reloadMarkupScayt")},this,null,50),r.on("scaytDialogShown",function(t){t.data.selectPage(r.scayt.tabToOpen)})},parseConfig:function(t){if((n=CKEDITOR.plugins.scayt).replaceOldOptionsNames(t.config),"boolean"!=typeof t.config.scayt_autoStartup&&(t.config.scayt_autoStartup=!1),n.state.scayt[t.name]=t.config.scayt_autoStartup,"boolean"!=typeof t.config.grayt_autoStartup&&(t.config.grayt_autoStartup=!1),"boolean"!=typeof t.config.scayt_inlineModeImmediateMarkup&&(t.config.scayt_inlineModeImmediateMarkup=!1),n.state.grayt[t.name]=t.config.grayt_autoStartup,t.config.scayt_contextCommands||(t.config.scayt_contextCommands="ignoreall|add"),t.config.scayt_contextMenuItemsOrder||(t.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),t.config.scayt_sLang||(t.config.scayt_sLang="en_US"),(void 0===t.config.scayt_maxSuggestions||"number"!=typeof t.config.scayt_maxSuggestions||t.config.scayt_maxSuggestions<0)&&(t.config.scayt_maxSuggestions=5),(void 0===t.config.scayt_minWordLength||"number"!=typeof t.config.scayt_minWordLength||t.config.scayt_minWordLength<1)&&(t.config.scayt_minWordLength=4),void 0!==t.config.scayt_customDictionaryIds&&"string"==typeof t.config.scayt_customDictionaryIds||(t.config.scayt_customDictionaryIds=""),void 0!==t.config.scayt_userDictionaryName&&"string"==typeof t.config.scayt_userDictionaryName||(t.config.scayt_userDictionaryName=null),"string"==typeof t.config.scayt_uiTabs&&3===t.config.scayt_uiTabs.split(",").length){var e=[],i=[];t.config.scayt_uiTabs=t.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(t.config.scayt_uiTabs,function(t){1===Number(t)||0===Number(t)?(i.push(!0),e.push(Number(t))):i.push(!1)}),null===CKEDITOR.tools.search(i,!1)?t.config.scayt_uiTabs=e:t.config.scayt_uiTabs=[1,1,1]}else t.config.scayt_uiTabs=[1,1,1];if("string"!=typeof t.config.scayt_serviceProtocol&&(t.config.scayt_serviceProtocol=null),"string"!=typeof t.config.scayt_serviceHost&&(t.config.scayt_serviceHost=null),"string"!=typeof t.config.scayt_servicePort&&(t.config.scayt_servicePort=null),"string"!=typeof t.config.scayt_servicePath&&(t.config.scayt_servicePath=null),t.config.scayt_moreSuggestions||(t.config.scayt_moreSuggestions="on"),"string"!=typeof t.config.scayt_customerId&&(t.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof t.config.scayt_customPunctuation&&(t.config.scayt_customPunctuation="-"),"string"!=typeof t.config.scayt_srcUrl&&(n=-1!=(n=document.location.protocol).search(/https?:/)?n:"http:",t.config.scayt_srcUrl=n+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0),CKEDITOR.config.scayt_handleUndoRedo=!!CKEDITOR.plugins.undo&&CKEDITOR.config.scayt_handleUndoRedo,"boolean"!=typeof t.config.scayt_multiLanguageMode&&(t.config.scayt_multiLanguageMode=!1),"object"!=typeof t.config.scayt_multiLanguageStyles&&(t.config.scayt_multiLanguageStyles={}),t.config.scayt_ignoreAllCapsWords&&"boolean"!=typeof t.config.scayt_ignoreAllCapsWords&&(t.config.scayt_ignoreAllCapsWords=!1),t.config.scayt_ignoreDomainNames&&"boolean"!=typeof t.config.scayt_ignoreDomainNames&&(t.config.scayt_ignoreDomainNames=!1),t.config.scayt_ignoreWordsWithMixedCases&&"boolean"!=typeof t.config.scayt_ignoreWordsWithMixedCases&&(t.config.scayt_ignoreWordsWithMixedCases=!1),t.config.scayt_ignoreWordsWithNumbers&&"boolean"!=typeof t.config.scayt_ignoreWordsWithNumbers&&(t.config.scayt_ignoreWordsWithNumbers=!1),t.config.scayt_disableOptionsStorage){var n=CKEDITOR.tools.isArray(t.config.scayt_disableOptionsStorage)?t.config.scayt_disableOptionsStorage:"string"==typeof t.config.scayt_disableOptionsStorage?[t.config.scayt_disableOptionsStorage]:void 0,r="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),s=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],a=CKEDITOR.tools.search,l=CKEDITOR.tools.indexOf;t.config.scayt_disableOptionsStorage=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],o=!!a(t,"options");if(!a(r,n)||o&&a(s,function(t){if("lang"===t)return!1}))return;if(a(s,n)&&s.splice(l(s,n),1),"all"===n||o&&a(t,"lang"))return[];"options"===n&&(s=["lang"])}return e.concat(s)}(n)}},addRule:function(i){var n=CKEDITOR.plugins.scayt,t=(o=i.dataProcessor)&&o.htmlFilter,e=i._.elementsPath&&i._.elementsPath.filters,o=o&&o.dataFilter,r=i.addRemoveFormatFilter;e&&e.push(function(t){if(i.scayt&&(t.hasAttribute(n.options.data_attribute_name)||t.hasAttribute(n.options.problem_grammar_data_attribute)))return!1}),o&&o.addRules({elements:{span:function(t){var e=t.hasClass(n.options.misspelled_word_class)&&t.attributes[n.options.data_attribute_name],i=t.hasClass(n.options.problem_grammar_class)&&t.attributes[n.options.problem_grammar_data_attribute];return n&&(e||i)&&delete t.name,t}}}),t&&t.addRules({elements:{span:function(t){var e=t.hasClass(n.options.misspelled_word_class)&&t.attributes[n.options.data_attribute_name],i=t.hasClass(n.options.problem_grammar_class)&&t.attributes[n.options.problem_grammar_data_attribute];return n&&(e||i)&&delete t.name,t}}}),r&&r.call(i,function(t){var e=!0;return i.scayt&&(t.hasAttribute(n.options.data_attribute_name)||t.hasAttribute(n.options.problem_grammar_data_attribute))&&(e=!1),e})},scaytMenuDefinition:function(t){var e=this;return{scayt:{scayt_ignore:{label:(t=t.scayt).getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(t){t.scayt.ignoreWord()}},scayt_ignoreall:{label:t.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(t){t.scayt.ignoreAllWords()}},scayt_add:{label:t.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(t){var e=t.scayt;setTimeout(function(){e.addWordToUserDictionary()},10)}},scayt_option:{label:t.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(t){t.scayt.tabToOpen="options",t.lockSelection(),t.openDialog(e.dialogName)},verification:function(t){return 1==t.config.scayt_uiTabs[0]}},scayt_language:{label:t.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(t){t.scayt.tabToOpen="langs",t.lockSelection(),t.openDialog(e.dialogName)},verification:function(t){return 1==t.config.scayt_uiTabs[1]}},scayt_dictionary:{label:t.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(t){t.scayt.tabToOpen="dictionaries",t.lockSelection(),t.openDialog(e.dialogName)},verification:function(t){return 1==t.config.scayt_uiTabs[2]}},scayt_about:{label:t.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(t){t.scayt.tabToOpen="about",t.lockSelection(),t.openDialog(e.dialogName)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(t){}},grayt_ignore:{label:t.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(t){t.scayt.ignorePhrase()}},grayt_ignoreall:{label:t.getLocal("btn_ignoreAll"),group:"grayt_control",order:3,exec:function(t){t.scayt.ignoreAllPhrases()}}}}},buildSuggestionMenuItems:function(t,e,i){var n={},o={},r=i?"word":"phrase",s=i?"startGrammarCheck":"startSpellCheck",a=t.scayt;if(0<e.length&&"no_any_suggestions"!==e[0])if(i)for(i=0;i<e.length;i++){var l="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[i].replace(" ","_");t.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[i],r,s)),i<t.config.scayt_maxSuggestions?(t.addMenuItem(l,{label:e[i],command:l,group:"scayt_suggest",order:i+1}),n[l]=CKEDITOR.TRISTATE_OFF):(t.addMenuItem(l,{label:e[i],command:l,group:"scayt_moresuggest",order:i+1}),o[l]=CKEDITOR.TRISTATE_OFF,"on"===t.config.scayt_moreSuggestions&&(t.addMenuItem("scayt_moresuggest",{label:a.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return o}}),n.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(i=0;i<e.length;i++)l="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[i].replace(" ","_"),t.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[i],r,s)),t.addMenuItem(l,{label:e[i],command:l,group:"grayt_suggest",order:i+1}),n[l]=CKEDITOR.TRISTATE_OFF;else n.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,t.addCommand("no_scayt_suggest",{exec:function(){}}),t.addMenuItem("no_scayt_suggest",{label:a.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return n},menuGenerator:function(t,e){var i,n,o,r=t.scayt,s=this.scaytMenuDefinition(t),a={},l=t.config.scayt_contextCommands.split("|"),c=e.getAttribute(r.getLangAttribute())||r.getLang();if(i=r.isScaytNode(e),n=r.isGraytNode(e),i?(s=s.scayt,a=e.getAttribute(r.getScaytNodeAttributeName()),r.fire("getSuggestionsList",{lang:c,word:a}),a=this.buildSuggestionMenuItems(t,CKEDITOR.plugins.scayt.suggestions,i)):n&&(s=s.grayt,a=e.getAttribute(r.getGraytNodeAttributeName()),o=r.getProblemDescriptionText(a,c),s.grayt_problemdescription&&o&&(s.grayt_problemdescription.label=o),r.fire("getGrammarSuggestionsList",{lang:c,phrase:a}),a=this.buildSuggestionMenuItems(t,CKEDITOR.plugins.scayt.suggestions,i)),i&&"off"==t.config.scayt_contextCommands)return a;for(var u in s)i&&-1==CKEDITOR.tools.indexOf(l,u.replace("scayt_",""))&&"all"!=t.config.scayt_contextCommands||n&&"grayt_problemdescription"!==u&&-1==CKEDITOR.tools.indexOf(l,u.replace("grayt_",""))&&"all"!=t.config.scayt_contextCommands||(a[u]=void 0!==s[u].state?s[u].state:CKEDITOR.TRISTATE_OFF,"function"!=typeof s[u].verification||s[u].verification(t)||delete a[u],t.addCommand(u,{exec:s[u].exec}),t.addMenuItem(u,{label:t.lang.scayt[s[u].label]||s[u].label,command:u,group:s[u].group,order:s[u].order}));return a},createCommand:function(i,n,o){return{exec:function(t){t=t.scayt;var e={};e[n]=i,t.replaceSelectionNode(e),"startGrammarCheck"===o&&t.removeMarkupInSelectionNode({grammarOnly:!0}),t.fire(o)}}}}),CKEDITOR.plugins.scayt={charsToObserve:[{charName:"cke-fillingChar",charCode:function(){var t;if(i=(i=CKEDITOR.version.match(/^\d(\.\d*)*/))&&i[0]){t="4.5.7";var e,i=i.replace(/\./g,"");t=t.replace(/\./g,""),e=0<=(e=i.length-t.length)?e:0,t=parseInt(i)>=parseInt(t)*Math.pow(10,e)}return t?Array(7).join(String.fromCharCode(8203)):String.fromCharCode(8203)}()}],onLoadTimestamp:"",state:{scayt:{},grayt:{}},warningCounter:0,suggestions:[],options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},alarmCompatibilityMessage:function(){this.warningCounter<5&&(console.warn("You are using the latest version of SCAYT plugin for CKEditor with the old application version. In order to have access to the newest features, it is recommended to upgrade the application version to latest one as well. Contact us for more details at support@webspellchecker.net."),this.warningCounter+=1)},isNewUdSupported:function(t){return!!t.getUserDictionary},reloadMarkup:function(t){var e;t&&(e=t.getScaytLangList(),t.reloadMarkup?t.reloadMarkup():(this.alarmCompatibilityMessage(),e&&e.ltr&&e.rtl&&t.fire("startSpellCheck, startGrammarCheck")))},replaceOldOptionsNames:function(t){for(var e in t)e in this.backCompatibilityMap&&(t[this.backCompatibilityMap[e]]=t[e],delete t[e])},createScayt:function(t){var r=this,s=CKEDITOR.plugins.scayt;this.loadScaytLibrary(t,function(n){function e(t){return new SCAYT.CKSCAYT(t,function(){},function(){})}var i=n.window&&n.window.getFrame()||n.editable();if(i){var o;i={lang:n.config.scayt_sLang,container:i.$,customDictionary:n.config.scayt_customDictionaryIds,userDictionaryName:n.config.scayt_userDictionaryName,localization:n.langCode,customer_id:n.config.scayt_customerId,customPunctuation:n.config.scayt_customPunctuation,debug:n.config.scayt_debug,data_attribute_name:r.options.data_attribute_name,misspelled_word_class:r.options.misspelled_word_class,problem_grammar_data_attribute:r.options.problem_grammar_data_attribute,problem_grammar_class:r.options.problem_grammar_class,"options-to-restore":n.config.scayt_disableOptionsStorage,focused:n.editable().hasFocus,ignoreElementsRegex:n.config.scayt_elementsToIgnore,ignoreGraytElementsRegex:n.config.grayt_elementsToIgnore,minWordLength:n.config.scayt_minWordLength,multiLanguageMode:n.config.scayt_multiLanguageMode,multiLanguageStyles:n.config.scayt_multiLanguageStyles,graytAutoStartup:n.config.grayt_autoStartup,charsToObserve:s.charsToObserve},n.config.scayt_serviceProtocol&&(i.service_protocol=n.config.scayt_serviceProtocol),n.config.scayt_serviceHost&&(i.service_host=n.config.scayt_serviceHost),n.config.scayt_servicePort&&(i.service_port=n.config.scayt_servicePort),n.config.scayt_servicePath&&(i.service_path=n.config.scayt_servicePath),"boolean"==typeof n.config.scayt_ignoreAllCapsWords&&(i["ignore-all-caps-words"]=n.config.scayt_ignoreAllCapsWords),"boolean"==typeof n.config.scayt_ignoreDomainNames&&(i["ignore-domain-names"]=n.config.scayt_ignoreDomainNames),"boolean"==typeof n.config.scayt_ignoreWordsWithMixedCases&&(i["ignore-words-with-mixed-cases"]=n.config.scayt_ignoreWordsWithMixedCases),"boolean"==typeof n.config.scayt_ignoreWordsWithNumbers&&(i["ignore-words-with-numbers"]=n.config.scayt_ignoreWordsWithNumbers);try{o=e(i)}catch(t){r.alarmCompatibilityMessage(),delete i.charsToObserve,o=e(i)}o.subscribe("suggestionListSend",function(t){for(var e={},i=[],n=0;n<t.suggestionList.length;n++)e["word_"+t.suggestionList[n]]||(e["word_"+t.suggestionList[n]]=t.suggestionList[n],i.push(t.suggestionList[n]));CKEDITOR.plugins.scayt.suggestions=i}),o.subscribe("selectionIsChanged",function(t){n.getSelection().isLocked&&n.lockSelection()}),o.subscribe("graytStateChanged",function(t){s.state.grayt[n.name]=t.state}),o.addMarkupHandler&&o.addMarkupHandler(function(t){var e=n.editable(),i=e.getCustomData(t.charName);i&&(i.$=t.node,e.setCustomData(t.charName,i))}),n.scayt=o,n.fire("scaytButtonState",n.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)}else s.state.scayt[n.name]=!1})},destroy:function(t){t.scayt&&t.scayt.destroy(),delete t.scayt,t.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(t,e){function i(){CKEDITOR.fireOnce("scaytReady"),t.scayt||"function"==typeof e&&e(t)}var n;void 0===window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?(n=t.config.scayt_srcUrl+"?"+this.onLoadTimestamp,CKEDITOR.scriptLoader.load(n,function(t){t&&i()})):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&i()}},CKEDITOR.on("dialogDefinition",function(t){var e=t.data.name;t=t.data.definition.dialog,"scaytDialog"===e&&t.on("cancel",function(t){return!1},this,null,-1),"checkspell"===e&&t.on("cancel",function(t){t=t.sender&&t.sender.getParentEditor();var e=CKEDITOR.plugins.scayt,i=t.scayt;i&&e.state.scayt[t.name]&&i.setMarkupPaused&&i.setMarkupPaused(!1),t.unlockSelection()},this,null,-2),"link"===e&&t.on("ok",function(t){var e=t.sender&&t.sender.getParentEditor();e&&setTimeout(function(){e.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)}),"replace"===e&&t.on("hide",function(t){t=t.sender&&t.sender.getParentEditor();var e=CKEDITOR.plugins.scayt,i=t.scayt;t&&setTimeout(function(){i&&(i.fire("removeMarkupInDocument",{}),e.reloadMarkup(i))},0)})}),CKEDITOR.on("scaytReady",function(){!0===CKEDITOR.config.scayt_handleCheckDirty&&((t=CKEDITOR.editor.prototype).checkDirty=CKEDITOR.tools.override(t.checkDirty,function(n){return function(){var t=null,e=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(t="ready"==this.status){var i=e.removeMarkupFromString(this.getSnapshot());e=e.removeMarkupFromString(this._.previousValue),t=t&&e!==i}}else t=n.call(this);return t}}),t.resetDirty=CKEDITOR.tools.override(t.resetDirty,function(e){return function(){var t=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=t.removeMarkupFromString(this.getSnapshot()):e.call(this)}}));if(!0===CKEDITOR.config.scayt_handleUndoRedo){var t,e="function"==typeof(t=CKEDITOR.plugins.undo.Image.prototype).equalsContent?"equalsContent":"equals";t[e]=CKEDITOR.tools.override(t[e],function(r){return function(t){var e,i=t.editor.scayt,n=this.contents,o=t.contents;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[t.editor.name]&&t.editor.scayt&&(this.contents=i.removeMarkupFromString(n)||"",t.contents=i.removeMarkupFromString(o)||""),e=r.apply(this,arguments),this.contents=n,t.contents=o,e}})}}),CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(s){var a=s.config,l=s.lang.stylescombo,c={},u=[],d=[];s.on("stylesSet",function(t){if(t=t.data.styles){for(var e,i,n,o=0,r=t.length;o<r;o++)e=t[o],s.blockless&&e.element in CKEDITOR.dtd.$block||"string"==typeof e.type&&!CKEDITOR.style.customHandlers[e.type]||(i=e.name,e=new CKEDITOR.style(e),s.filter.customConfig&&!s.filter.check(e))||(e._name=i,e._.enterMode=a.enterMode,e._.type=n=e.assignedTo||e.type,e._.weight=o+1e3*(n==CKEDITOR.STYLE_OBJECT?1:n==CKEDITOR.STYLE_BLOCK?2:3),c[i]=e,u.push(e),d.push(e));u.sort(function(t,e){return t._.weight-e._.weight})}}),s.ui.addRichCombo("Styles",{label:l.label,title:l.panelTitle,toolbar:"styles,10",allowedContent:d,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(a.contentsCss),multiSelect:!0,attributes:{"aria-label":l.panelTitle}},init:function(){var t,e,i,n,o,r;for(o=0,r=u.length;o<r;o++)e=(t=u[o])._name,(n=t._.type)!=i&&(this.startGroup(l["panelTitle"+String(n)]),i=n),this.add(e,t.type==CKEDITOR.STYLE_OBJECT?e:t.buildPreview(),e);this.commit()},onClick:function(t){s.focus(),s.fire("saveSnapshot"),t=c[t];var e=s.elementPath();t.group&&t.removeStylesFromSameGroup(s)?s.applyStyle(t):s[t.checkActive(e,s)?"removeStyle":"applyStyle"](t),s.fire("saveSnapshot")},onRender:function(){s.on("selectionChange",function(t){for(var e,i=this.getValue(),n=0,o=(t=t.data.path.elements).length;n<o;n++)for(var r in e=t[n],c)if(c[r].checkElementRemovable(e,!0,s))return void(r!=i&&this.setValue(r));this.setValue("")},this)},onOpen:function(){var t=(t=s.getSelection()).getSelectedElement()||t.getStartElement()||s.editable(),e=(t=s.elementPath(t),[0,0,0,0]);for(var i in this.showAll(),this.unmarkAll(),c){var n=c[i],o=n._.type;n.checkApplicable(t,s,s.activeFilter)?e[o]++:this.hideItem(i),n.checkActive(t,s)&&this.mark(i)}e[CKEDITOR.STYLE_BLOCK]||this.hideGroup(l["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),e[CKEDITOR.STYLE_INLINE]||this.hideGroup(l["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),e[CKEDITOR.STYLE_OBJECT]||this.hideGroup(l["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var t=s.elementPath();if(t){for(var e in c)if(c[e].checkApplicable(t,s,s.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){c={},u=[]}})}}),Ft={editorFocus:!1,modes:{wysiwyg:1,source:1}},Bt={exec:function(t){t.container.focusNext(!0,t.tabIndex)}},Ht={exec:function(t){t.container.focusPrevious(!0,t.tabIndex)}},CKEDITOR.plugins.add("tab",{init:function(e){for(var t=!1!==e.config.enableTabKeyTools,i=e.config.tabSpaces||0,n="";i--;)n+=" ";n&&e.on("key",function(t){9==t.data.keyCode&&(e.insertText(n),t.cancel())}),t&&e.on("key",function(t){(9==t.data.keyCode&&e.execCommand("selectNextCell")||t.data.keyCode==CKEDITOR.SHIFT+9&&e.execCommand("selectPreviousCell"))&&t.cancel()}),e.addCommand("blur",CKEDITOR.tools.extend(Bt,Ft)),e.addCommand("blurBack",CKEDITOR.tools.extend(Ht,Ft)),e.addCommand("selectNextCell",pi()),e.addCommand("selectPreviousCell",pi(!0))}}),CKEDITOR.dom.element.prototype.focusNext=function(t,e){var i,n,o,r,s,a,l=void 0===e?this.getTabIndex():e;if(l<=0)for(s=this.getNextSourceNode(t,CKEDITOR.NODE_ELEMENT);s;){if(s.isVisible()&&0===s.getTabIndex()){o=s;break}s=s.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(s=this.getDocument().getBody().getFirst();s=s.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!i)if(!n&&s.equals(this)){if(n=!0,t){if(!(s=s.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;i=1}}else n&&!this.contains(s)&&(i=1);if(s.isVisible()&&!((a=s.getTabIndex())<0)){if(i&&a==l){o=s;break}l<a&&(!o||!r||a<r)?(o=s,r=a):o||0!==a||(o=s,r=a)}}o&&o.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(t,e){for(var i,n,o,r,s=void 0===e?this.getTabIndex():e,a=0,l=this.getDocument().getBody().getLast();l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!i)if(!n&&l.equals(this)){if(n=!0,t){if(!(l=l.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;i=1}}else n&&!this.contains(l)&&(i=1);if(l.isVisible()&&!((r=l.getTabIndex())<0))if(s<=0){if(i&&0===r){o=l;break}a<r&&(o=l,a=r)}else{if(i&&r==s){o=l;break}r<s&&(!o||a<r)&&(o=l,a=r)}}o&&o.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(t){function e(t){return CKEDITOR.tools.extend(t||{},{contextSensitive:1,refresh:function(t,e){this.setState(e.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!t.blockless){var i=t.lang.table;t.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(t.plugins.dialogadvtab?"table"+t.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(t){if(t.styles){var e;if(t.styles.border)e=CKEDITOR.tools.style.parse.border(t.styles.border);else if(CKEDITOR.env.ie&&8===CKEDITOR.env.version){var i=t.styles;i["border-left"]&&i["border-left"]===i["border-right"]&&i["border-right"]===i["border-top"]&&i["border-top"]===i["border-bottom"]&&(e=CKEDITOR.tools.style.parse.border(i["border-top"]))}e&&e.style&&"solid"===e.style&&e.width&&0!==parseFloat(e.width)&&(t.attributes.border=1),"collapse"==t.styles["border-collapse"]&&(t.attributes.cellspacing=0)}}}]]})),t.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",e())),t.addCommand("tableDelete",e({exec:function(t){var e=t.elementPath().contains("table",1);if(e){var i=e.getParent(),n=t.editable();1!=i.getChildCount()||i.is("td","th")||i.equals(n)||(e=i),(t=t.createRange()).moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e.remove(),t.select()}}})),t.ui.addButton&&t.ui.addButton("Table",{label:i.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),t.addMenuItems&&t.addMenuItems({table:{label:i.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:i.deleteTable,command:"tableDelete",group:"table",order:1}}),t.on("doubleclick",function(t){t.data.element.is("table")&&(t.data.dialog="tableProperties")}),t.contextMenu&&t.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),zt=/^(?:td|th)$/,$t=CKEDITOR.tools.isArray,CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(n){function t(t){return CKEDITOR.tools.extend(t||{},{contextSensitive:1,refresh:function(t,e){this.setState(e.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function e(t,e){var i=n.addCommand(t,e);n.addFeature(i)}var i=n.lang.table,o=CKEDITOR.tools.style.parse;e("cellProperties",new CKEDITOR.dialogCommand("cellProperties",t({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table",contentTransformations:[[{element:"td",left:function(t){return t.styles.background&&o.background(t.styles.background).color},right:function(t){t.styles["background-color"]=o.background(t.styles.background).color}},{element:"td",check:"td{vertical-align}",left:function(t){return t.attributes&&t.attributes.valign},right:function(t){t.styles["vertical-align"]=t.attributes.valign,delete t.attributes.valign}}],[{element:"tr",check:"td{height}",left:function(t){return t.styles&&t.styles.height},right:function(e){CKEDITOR.tools.array.forEach(e.children,function(t){t.name in{td:1,th:1}&&(t.attributes["cke-row-height"]=e.styles.height)}),delete e.styles.height}}],[{element:"td",check:"td{height}",left:function(t){return(t=t.attributes)&&t["cke-row-height"]},right:function(t){t.styles.height=t.attributes["cke-row-height"],delete t.attributes["cke-row-height"]}}]]}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),e("rowDelete",t({requiredContent:"table",exec:function(t){(t=function t(e){if(e instanceof CKEDITOR.dom.selection){var i=e.getRanges(),n=(a=fi(e))[0].getAscendant("table"),o=CKEDITOR.tools.buildTableMap(n),r=a[0].getParent().$.rowIndex,s=(a=a[a.length-1]).getParent().$.rowIndex+a.$.rowSpan-1,a=[];for(e.reset(),e=r;e<=s;e++){for(var l=o[e],c=new CKEDITOR.dom.element(n.$.rows[e]),u=0;u<l.length;u++){var d=new CKEDITOR.dom.element(l[u]),h=d.getParent().$.rowIndex;1==d.$.rowSpan?d.remove():(--d.$.rowSpan,h==e&&((h=o[e+1])[u-1]?d.insertAfter(new CKEDITOR.dom.element(h[u-1])):new CKEDITOR.dom.element(n.$.rows[e+1]).append(d,1))),u+=d.$.colSpan-1}a.push(c)}for(o=n.$.rows,i[0].moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),r=new CKEDITOR.dom.element(o[1+s]||(0<r?o[r-1]:null)||n.$.parentNode),e=a.length;0<=e;e--)t(a[e]);return n.$.parentNode?r:(i[0].select(),null)}return e instanceof CKEDITOR.dom.element&&(1==(n=e.getAscendant("table")).$.rows.length?n.remove():e.remove()),null}(t=t.getSelection()))&&_i(t)}})),e("rowInsertBefore",t({requiredContent:"table",exec:function(t){gi(t=fi(t=t.getSelection()),!0)}})),e("rowInsertAfter",t({requiredContent:"table",exec:function(t){gi(t=fi(t=t.getSelection()))}})),e("columnDelete",t({requiredContent:"table",exec:function(t){(t=function(t){CKEDITOR.env.webkit&&!t.isFake&&(t=function(t){var e,i,n;if(1!==(e=t.getRanges()).length)return t;if((e=e[0]).collapsed||0!==e.endOffset)return t;if("td"!==(n=(i=e.endContainer).getName().toLowerCase())&&"th"!==n)return t;for((n=i.getPrevious())||(n=i.getParent().getPrevious().getLast());n.type!==CKEDITOR.NODE_TEXT&&"br"!==n.getName().toLowerCase();)if(!(n=n.getLast()))return t;return e.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),e.select()}(t));var e,i,n=t.getRanges(),o=(s=fi(t))[0],r=s[s.length-1],s=o.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(s),l=[];t.reset();var c=0;for(t=a.length;c<t;c++)for(var u=0,d=a[c].length;u<d;u++)void 0===e&&a[c][u]==o.$&&(e=u),a[c][u]==r.$&&(i=u);for(c=e;c<=i;c++)for(u=0;u<a.length;u++)r=a[u],o=new CKEDITOR.dom.element(s.$.rows[u]),(r=new CKEDITOR.dom.element(r[c])).$&&(1==r.$.colSpan?r.remove():--r.$.colSpan,u+=r.$.rowSpan-1,o.$.cells.length||l.push(o));return e=a[0].length-1>i?new CKEDITOR.dom.element(a[0][i+1]):e&&-1!==a[0][e-1].cellIndex?new CKEDITOR.dom.element(a[0][e-1]):new CKEDITOR.dom.element(s.$.parentNode),l.length==t&&(n[0].moveToPosition(s,CKEDITOR.POSITION_AFTER_END),n[0].select(),s.remove()),e}(t=t.getSelection()))&&_i(t,!0)}})),e("columnInsertBefore",t({requiredContent:"table",exec:function(t){yi(t=fi(t=t.getSelection()),!0)}})),e("columnInsertAfter",t({requiredContent:"table",exec:function(t){yi(t=fi(t=t.getSelection()))}})),e("cellDelete",t({requiredContent:"table",exec:function(t){!function t(e){if(e instanceof CKEDITOR.dom.selection){var i,n=e.getRanges(),o=fi(e),r=o[0]&&o[0].getAscendant("table");t:{var s=0;i=o.length-1;for(var a,l,c={};a=o[s++];)CKEDITOR.dom.element.setMarker(c,a,"delete_cell",!0);for(s=0;a=o[s++];)if((l=a.getPrevious())&&!l.getCustomData("delete_cell")||(l=a.getNext())&&!l.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(c),i=l;break t}CKEDITOR.dom.element.clearAllMarkers(c),i=(s=(s=o[0].getParent()).getPrevious())?s.getLast():(s=(s=o[i].getParent()).getNext())?s.getChild(0):null}for(e.reset(),e=o.length-1;0<=e;e--)t(o[e]);i?_i(i,!0):r&&(n[0].moveToPosition(r,CKEDITOR.POSITION_BEFORE_START),n[0].select(),r.remove())}else e instanceof CKEDITOR.dom.element&&(1==(n=e.getParent()).getChildCount()?n.remove():e.remove())}(t=t.getSelection())}})),e("cellMerge",t({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(t,e){e.cell=wi(t.getSelection()),_i(e.cell,!0)}})),e("cellMergeRight",t({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(t,e){e.cell=wi(t.getSelection(),"right"),_i(e.cell,!0)}})),e("cellMergeDown",t({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(t,e){e.cell=wi(t.getSelection(),"down"),_i(e.cell,!0)}})),e("cellVerticalSplit",t({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(t){_i(Ti(t.getSelection()))}})),e("cellHorizontalSplit",t({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(t){_i(Ci(t.getSelection()))}})),e("cellInsertBefore",t({requiredContent:"table",exec:function(t){bi(t=t.getSelection(),!0)}})),e("cellInsertAfter",t({requiredContent:"table",exec:function(t){bi(t=t.getSelection())}})),n.addMenuItems&&n.addMenuItems({tablecell:{label:i.cell.menu,group:"tablecell",order:1,getItems:function(){var t=n.getSelection(),e=fi(t);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:wi(t,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:wi(t,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:wi(t,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:Ti(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:Ci(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<e.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:i.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:i.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:i.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:i.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:i.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:i.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:i.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:i.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:i.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:i.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:i.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:i.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:i.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:i.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:i.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:i.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:i.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),n.contextMenu&&n.contextMenu.addListener(function(t,e,i){return(t=i.contains({td:1,th:1},1))&&!t.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getCellColIndex:mi,insertRow:gi,insertColumn:yi,getSelectedCells:fi},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools),CKEDITOR.tools.buildTableMap=function(t,e,i,n,o){t=t.$.rows,i=i||0,n="number"==typeof n?n:t.length-1,o="number"==typeof o?o:-1;var r=-1,s=[];for(e=e||0;e<=n;e++){s[++r]||(s[r]=[]);for(var a=-1,l=i;l<=(-1===o?t[e].cells.length-1:o);l++){if(!(u=t[e].cells[l]))break;for(a++;s[r][a];)a++;for(var c=isNaN(u.colSpan)?1:u.colSpan,u=isNaN(u.rowSpan)?1:u.rowSpan,d=0;d<u&&!(n<e+d);d++){s[r+d]||(s[r+d]=[]);for(var h=0;h<c;h++)s[r+d][a+h]=t[e].cells[l]}if(a+=c-1,-1!==o&&o<=a)break}}return s},function(){function d(t){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(t)}function h(t,e){var i,n,o=t.getAscendant("table"),r=e.getAscendant("table"),s=CKEDITOR.tools.buildTableMap(o),a=g(t),l=g(e),c=[],u={};for(o.contains(r)&&(l=g(e=e.getAscendant({td:1,th:1}))),l<a&&(o=a,a=l,l=o,o=t,t=e,e=o),o=0;o<s[a].length;o++)if(t.$===s[a][o]){i=o;break}for(o=0;o<s[l].length;o++)if(e.$===s[l][o]){n=o;break}for(n<i&&(o=i,i=n,n=o),o=a;o<=l;o++)for(a=i;a<=n;a++)(r=new CKEDITOR.dom.element(s[o][a])).$&&!r.getCustomData("selected_cell")&&(c.push(r),CKEDITOR.dom.element.setMarker(u,r,"selected_cell",!0));return CKEDITOR.dom.element.clearAllMarkers(u),c}function p(t,e){var i,n=t.editable().find(".cke_table-faked-selection");for(t.fire("lockSnapshot"),t.editable().removeClass("cke_table-faked-selection-editor"),i=0;i<n.count();i++)n.getItem(i).removeClass("cke_table-faked-selection");0<n.count()&&n.getItem(0).getAscendant("table").data("cke-table-faked-selection-table",!1),t.fire("unlockSnapshot"),e&&(_={active:!1},t.getSelection().isInTable()&&t.getSelection().reset())}function f(t,e){var i,n,o=[];for(n=0;n<e.length;n++)(i=t.createRange()).setStartBefore(e[n]),i.setEndAfter(e[n]),o.push(i);t.getSelection().selectRanges(o)}function o(t){var e,i=(t=t.editor||t.sender.editor)&&t.getSelection(),n=i&&i.getRanges()||[];if(i&&(p(t),i.isInTable()&&i.isFake)){for(1===n.length&&n[0]._getTableElement()&&n[0]._getTableElement().is("table")&&(e=n[0]._getTableElement()),e=y(i,e),t.fire("lockSnapshot"),i=0;i<e.length;i++)e[i].addClass("cke_table-faked-selection");0<e.length&&(t.editable().addClass("cke_table-faked-selection-editor"),e[0].getAscendant("table").data("cke-table-faked-selection-table","")),t.fire("unlockSnapshot")}}function g(t){return t.getAscendant("tr",!0).$.rowIndex}function m(t){function e(t,e){return!(!t||!e)&&(t.equals(e)||t.contains(e)||e.contains(t)||t.getCommonAncestor(e).is(a))}function i(t){return!t.getAscendant("table",!0)&&t.getDocument().equals(n.document)}if(t.data.getTarget().getName&&("mouseup"===t.name||!d(t.data.getTarget()))){var n=t.editor||t.listenerData.editor,o=(n.getSelection(1),function(t){return(t=t.editable().findOne(".cke_table-faked-selection"))&&t.getAscendant("table")}(n)),r=(s=t.data.getTarget())&&s.getAscendant({td:1,th:1},!0),s=s&&s.getAscendant("table",!0),a={table:1,thead:1,tbody:1,tfoot:1,tr:1,td:1,th:1};c=o,u=s,("mousedown"!==(l=t).name||CKEDITOR.tools.getMouseButton(l)!==CKEDITOR.MOUSE_BUTTON_LEFT&&u)&&("mouseup"!==l.name||i(l.data.getTarget())||e(c,u))||p(n,!0),!_.active&&"mousedown"===t.name&&CKEDITOR.tools.getMouseButton(t)===CKEDITOR.MOUSE_BUTTON_LEFT&&s&&(_={active:!0},CKEDITOR.document.on("mouseup",m,null,{editor:n})),(r||s)&&function(t,e,i){var n,o=y(t.getSelection(!0));if(e=e.is("table")?null:e,(n=_.active&&!_.first)&&!(n=e)&&(n=t.getSelection().getRanges(),n=!!(1<o.length||n[0]&&!n[0].collapsed)),n)_.first=e||o[0],_.dirty=!e&&1!==o.length;else if(_.active&&e&&_.first.getAscendant("table").equals(e.getAscendant("table"))){if(o=h(_.first,e),!_.dirty&&1===o.length&&!d(i.data.getTarget()))return p(t,"mouseup"===i.name);_.dirty=!0,_.last=e,f(t,o)}}(n,r||s,t),"mouseup"===t.name&&(CKEDITOR.tools.getMouseButton(t)===CKEDITOR.MOUSE_BUTTON_LEFT&&(i(t.data.getTarget())||e(o,s))&&function(t){var e=t.editable().find(".cke_table-faked-selection");e.count()<1||f(t,e=h(e.getItem(0),e.getItem(e.count()-1)))}(n),_={active:!1},CKEDITOR.document.removeListener("mouseup",m))}var l,c,u}function r(t){var e=t.data.getTarget().getAscendant({td:1,th:1},!0);e&&!e.hasClass("cke_table-faked-selection")&&(t.cancel(),t.data.preventDefault())}function s(t){var e=t.editor||t.sender.editor;e.getSelection().isInTable()&&function(t,e){var i,n,o,r,s=t.getSelection(),a=s.createBookmarks(),l=t.document,c=t.createRange(),u=l.getDocumentElement().$,d=CKEDITOR.env.ie&&CKEDITOR.env.version<9,h=t.blockless||CKEDITOR.env.ie?"span":"div";l.getById("cke_table_copybin")||(i=l.createElement(h),(n=l.createElement(h)).setAttributes({id:"cke_table_copybin","data-cke-temp":"1"}),i.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),i.setStyle("ltr"==t.config.contentsLangDirection?"left":"right","-5000px"),i.setHtml(t.getSelectedHtml(!0)),t.fire("lockSnapshot"),n.append(i),t.editable().append(n),r=t.on("selectionChange",function(t){t.cancel()},null,null,0),d&&(o=u.scrollTop),c.selectNodeContents(i),c.select(),d&&(u.scrollTop=o),setTimeout(function(){n.remove(),s.selectBookmarks(a),r.removeListener(),t.fire("unlockSnapshot"),e&&(t.extractSelectedHtml(),t.fire("saveSnapshot"))},100))}(e,"cut"===t.name)}function v(t){this._reset(),t&&this.setSelectedCells(t)}function t(e,i,n){e.on("beforeCommandExec",function(t){-1!==CKEDITOR.tools.array.indexOf(i,t.data.name)&&(t.data.selectedCells=y(e.getSelection()))}),e.on("afterCommandExec",function(t){-1!==CKEDITOR.tools.array.indexOf(i,t.data.name)&&n(e,t.data)})}var e,y,b,l,a,_={active:!1};(v.prototype={})._reset=function(){this.cells={first:null,last:null,all:[]},this.rows={first:null,last:null}},v.prototype.setSelectedCells=function(t){this._reset(),t=t.slice(0),this._arraySortByDOMOrder(t),this.cells.all=t,this.cells.first=t[0],this.cells.last=t[t.length-1],this.rows.first=t[0].getAscendant("tr"),this.rows.last=this.cells.last.getAscendant("tr")},v.prototype.getTableMap=function(){var t,e=b(this.cells.first);t:{var i,n=(t=this.cells.last).getAscendant("table"),o=g(t);n=CKEDITOR.tools.buildTableMap(n);for(i=0;i<n[o].length;i++)if(new CKEDITOR.dom.element(n[o][i]).equals(t)){t=i;break t}t=void 0}return CKEDITOR.tools.buildTableMap(this._getTable(),g(this.rows.first),e,g(this.rows.last),t)},v.prototype._getTable=function(){return this.rows.first.getAscendant("table")},v.prototype.insertRow=function(t,e,i){if(void 0===t)t=1;else if(t<=0)return;for(var n,o=this.cells.first.$.cellIndex,r=this.cells.last.$.cellIndex,s=i?[]:this.cells.all,a=0;a<t;a++)n=l(i?this.cells.all:s,e),n=CKEDITOR.tools.array.filter(n.find("td, th").toArray(),function(t){return!!i||t.$.cellIndex>=o&&t.$.cellIndex<=r}),s=e?n.concat(s):s.concat(n);this.setSelectedCells(s)},v.prototype.insertColumn=function(t){function e(t){return t=g(t),n<=t&&t<=o}if(void 0===t)t=1;else if(t<=0)return;for(var i=(r=this.cells).all,n=g(r.first),o=g(r.last),r=0;r<t;r++)i=i.concat(CKEDITOR.tools.array.filter(a(i),e));this.setSelectedCells(i)},v.prototype.emptyCells=function(t){t=t||this.cells.all;for(var e=0;e<t.length;e++)t[e].setHtml("")},v.prototype._arraySortByDOMOrder=function(t){t.sort(function(t,e){return t.getPosition(e)&CKEDITOR.POSITION_PRECEDING?-1:1})};var i={onPaste:function(t){function e(t){return Math.max.apply(null,CKEDITOR.tools.array.map(t,function(t){return t.length},0))}var i,n,o,r,s=t.editor,a=s.getSelection(),l=y(a),c=this.findTableInPastedContent(s,t.data.dataValue),u=a.isInTable(!0)&&this.isBoundarySelection(a);!l.length||1===l.length&&!function(t){if(t)return(t=t.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),(t=t.getEnclosedNode())&&t.is&&t.is(CKEDITOR.dtd.$tableContent)}(a.getRanges()[0])&&!u||u&&!c||(l=l[0].getAscendant("table"),i=new v(y(a,l)),s.once("afterPaste",function(){var t;if(n){t=new CKEDITOR.dom.element(n[0][0]);var e=n[n.length-1];t=h(t,new CKEDITOR.dom.element(e[e.length-1]))}else t=i.cells.all;f(s,t)}),c?(t.stop(),u?(i.insertRow(1,1===u,!0),a.selectElement(i.rows.first)):(i.emptyCells(),f(s,i.cells.all)),t=i.getTableMap(),n=CKEDITOR.tools.buildTableMap(c),i.insertRow(n.length-t.length),i.insertColumn(e(n)-e(t)),t=i.getTableMap(),this.pasteTable(i,t,n),s.fire("saveSnapshot"),setTimeout(function(){s.fire("afterPaste")},0)):(o=i.cells.first,(r=s.createRange()).selectNodeContents(o),r.select(),s.once("afterPaste",function(){s.fire("lockSnapshot"),i.emptyCells(i.cells.all.slice(1)),f(s,i.cells.all),s.fire("unlockSnapshot")})))},isBoundarySelection:function(t){var e=(t=t.getRanges()[0]).endContainer.getAscendant("tr",!0);if(e&&t.collapsed){if(t.checkBoundaryOfElement(e,CKEDITOR.START))return 1;if(t.checkBoundaryOfElement(e,CKEDITOR.END))return 2}return 0},findTableInPastedContent:function(t,e){var i=t.dataProcessor,n=new CKEDITOR.dom.element("body");return i=i||new CKEDITOR.htmlDataProcessor(t),n.setHtml(i.toHtml(e),{fixForBody:!1}),1<n.getChildCount()?null:n.findOne("table")},pasteTable:function(t,e,i){var n,o,r,s,a,l=b(t.cells.first),c=t._getTable(),u={};for(s=0;s<i.length;s++)for(o=new CKEDITOR.dom.element(c.$.rows[t.rows.first.$.rowIndex+s]),a=0;a<i[s].length;a++)r=new CKEDITOR.dom.element(i[s][a]),n=e[s]&&e[s][a]?new CKEDITOR.dom.element(e[s][a]):null,r&&!r.getCustomData("processed")?(n&&n.getParent()?r.replace(n):0!==a&&!i[s][a-1]||((n=0!==a?new CKEDITOR.dom.element(i[s][a-1]):null)&&o.equals(n.getParent())?r.insertAfter(n):0<l?o.$.cells[l]?r.insertAfter(new CKEDITOR.dom.element(o.$.cells[l])):o.append(r):o.append(r,!0)),CKEDITOR.dom.element.setMarker(u,r,"processed",!0)):r.getCustomData("processed")&&n&&n.remove();CKEDITOR.dom.element.clearAllMarkers(u)}};CKEDITOR.plugins.tableselection={getCellsBetween:h,keyboardIntegration:function(o){function a(t){var e=t.getEnclosedNode();e&&e.is({td:1,th:1})?t.getEnclosedNode().setText(""):t.deleteContents(),CKEDITOR.tools.array.forEach(t._find("td"),function(t){t.appendBogus()})}var u,l,d,t=o.editable();t.attachListener(t,"keydown",(u=o,l={37:1,38:1,39:1,40:1,8:1,46:1},delete(d=CKEDITOR.tools.extend({table:1},CKEDITOR.dtd.$tableContent)).td,delete d.th,function(t){var e,i,n,o,r=t.data.getKey(),s=37===r||38==r;if(l[r]&&(e=u.getSelection())&&e.isInTable()&&e.isFake)if(n=(i=e.getRanges())[0]._getTableElement(),o=i[i.length-1]._getTableElement(),t.data.preventDefault(),t.cancel(),8<r&&r<46)i[0].moveToElementEditablePosition(s?n:o,!s),e.selectRanges([i[0]]);else{for(t=0;t<i.length;t++)a(i[t]);(t=function(t,e){if(!e.length)return null;var i=u.createRange(),n=CKEDITOR.dom.range.mergeRanges(e);CKEDITOR.tools.array.forEach(n,function(t){t.enlarge(CKEDITOR.ENLARGE_ELEMENT)});var o,r=(s=n[0].getBoundaryNodes()).startNode,s=s.endNode;if(r&&r.is&&r.is(d)){for(var a=r.getAscendant("table",!0),l=r.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,a),c=!1;l&&(o=l,r.contains(o)||!o.is||!o.is("td","th"));)l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,a);return!l&&s&&s.is&&!s.is("table")&&s.getNext()&&(l=s.getNext().findOne("td, th"),c=!0),l?i["moveToElementEdit"+(c?"Start":"End")](l):(i.setStartBefore(r.getAscendant("table",!0)),i.collapse(!0)),n[0].deleteContents(),[i]}return r?(i.moveToElementEditablePosition(r),[i]):void 0}(0,i))?i=t:i[0].moveToElementEditablePosition(n),e.selectRanges(i),u.fire("saveSnapshot")}}),null,null,-1),t.attachListener(t,"keypress",function(t){var e,i=o.getSelection(),n=t.data.$.charCode||13===t.data.getKey();if(i&&i.isInTable()&&i.isFake&&n&&!(t.data.getKeystroke()&CKEDITOR.CTRL)){for(n=(t=i.getRanges())[0].getEnclosedNode().getAscendant({td:1,th:1},!0),e=0;e<t.length;e++)a(t[e]);n&&(t[0].moveToElementEditablePosition(n),i.selectRanges([t[0]]))}},null,null,-1)},isSupportedEnvironment:!(CKEDITOR.env.ie&&CKEDITOR.env.version<11)},CKEDITOR.plugins.add("tableselection",{requires:"clipboard,tabletools",onLoad:function(){e=CKEDITOR.plugins.tabletools,y=e.getSelectedCells,b=e.getCellColIndex,l=e.insertRow,a=e.insertColumn,CKEDITOR.document.appendStyleSheet(this.path+"styles/tableselection.css")},init:function(n){CKEDITOR.plugins.tableselection.isSupportedEnvironment&&(n.addContentsCss&&n.addContentsCss(this.path+"styles/tableselection.css"),n.on("contentDom",function(){var t=n.editable(),e=t.isInline()?t:n.document,i={editor:n};t.attachListener(e,"mousedown",m,null,i),t.attachListener(e,"mousemove",m,null,i),t.attachListener(e,"mouseup",m,null,i),t.attachListener(t,"dragstart",r),t.attachListener(n,"selectionCheck",o),CKEDITOR.plugins.tableselection.keyboardIntegration(n),CKEDITOR.plugins.clipboard&&!CKEDITOR.plugins.clipboard.isCustomCopyCutSupported&&(t.attachListener(t,"cut",s),t.attachListener(t,"copy",s))}),n.on("paste",i.onPaste,i),t(n,"rowInsertBefore rowInsertAfter columnInsertBefore columnInsertAfter cellInsertBefore cellInsertAfter".split(" "),function(t,e){f(t,e.selectedCells)}),t(n,["cellMerge","cellMergeRight","cellMergeDown"],function(t,e){f(t,[e.commandData.cell])}),t(n,["cellDelete"],function(t){p(t,!0)}))}})}(),function(){var a=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],i={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(t){function e(t){n.enabled&&!1!==t.data.command.canUndo&&n.save()}function i(){n.enabled=!t.readOnly&&"wysiwyg"==t.mode,n.onChange()}var n=t.undoManager=new l(t),o=n.editingHandler=new c(n),r=t.addCommand("undo",{exec:function(){n.undo()&&(t.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),s=t.addCommand("redo",{exec:function(){n.redo()&&(t.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});t.setKeystroke([[a[0],"undo"],[a[1],"redo"],[a[2],"redo"]]),n.onChange=function(){r.setState(n.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),s.setState(n.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},t.on("beforeCommandExec",e),t.on("afterCommandExec",e),t.on("saveSnapshot",function(t){n.save(t.data&&t.data.contentOnly)}),t.on("contentDom",o.attachListeners,o),t.on("instanceReady",function(){t.fire("saveSnapshot")}),t.on("beforeModeUnload",function(){"wysiwyg"==t.mode&&n.save(!0)}),t.on("mode",i),t.on("readOnly",i),t.ui.addButton&&(t.ui.addButton("Undo",{label:t.lang.undo.undo,command:"undo",toolbar:"undo,10"}),t.ui.addButton("Redo",{label:t.lang.undo.redo,command:"redo",toolbar:"undo,20"})),t.resetUndo=function(){n.reset(),t.fire("saveSnapshot")},t.on("updateSnapshot",function(){n.currentImage&&n.update()}),t.on("lockSnapshot",function(t){t=t.data,n.lock(t&&t.dontUpdate,t&&t.forceUpdate)}),t.on("unlockSnapshot",n.unlock,n)}}),CKEDITOR.plugins.undo={};var l=CKEDITOR.plugins.undo.UndoManager=function(t){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=t.config.undoStackSize||20,this.strokesLimit=25,this.editor=t,this.reset()};l.prototype={type:function(t,e){var i=l.getKeyGroup(t),n=this.strokesRecorded[i]+1;e=e||n>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),e?(n=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[i]=n,this.previousKeyGroup=i},keyGroupChanged:function(t){return l.getKeyGroup(t)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(t,e,i){var n=this.editor;if(this.locked||"ready"!=n.status||"wysiwyg"!=n.mode)return!1;var o=n.editable();if(!o||"ready"!=o.status)return!1;if(o=this.snapshots,!1===(e=e||new r(n)).contents)return!1;if(this.currentImage)if(e.equalsContent(this.currentImage)){if(t||e.equalsSelection(this.currentImage))return!1}else!1!==i&&n.fire("change");return o.splice(this.index+1,o.length-this.index-1),o.length==this.limit&&o.shift(),this.index=o.push(e)-1,this.currentImage=e,!1!==i&&this.refreshState(),!0},restoreImage:function(t){var e,i=this.editor;t.bookmarks&&(i.focus(),e=i.getSelection()),this.locked={level:999},this.editor.loadSnapshot(t.contents),t.bookmarks?e.selectBookmarks(t.bookmarks):CKEDITOR.env.ie&&((e=this.editor.document.getBody().$.createTextRange()).collapse(!0),e.select()),this.locked=null,this.index=t.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),i.fire("change")},getNextImage:function(t){var e,i=this.snapshots,n=this.currentImage;if(n)if(t){for(e=this.index-1;0<=e;e--)if(t=i[e],!n.equalsContent(t))return t.index=e,t}else for(e=this.index+1;e<i.length;e++)if(t=i[e],!n.equalsContent(t))return t.index=e,t;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var t=this.getNextImage(!0);if(t)return this.restoreImage(t),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var t=this.getNextImage(!1);if(t)return this.restoreImage(t),!0}return!1},update:function(t){if(!this.locked){t=t||new r(this.editor);for(var e=this.index,i=this.snapshots;0<e&&this.currentImage.equalsContent(i[e-1]);)--e;i.splice(e,this.index-e+1,t),this.index=e,this.currentImage=t}},updateSelection:function(t){if(!this.snapshots.length)return!1;var e=this.snapshots,i=e[e.length-1];return!(!i.equalsContent(t)||i.equalsSelection(t))&&(this.currentImage=e[e.length-1]=t,!0)},lock:function(t,e){if(this.locked)this.locked.level++;else if(t)this.locked={level:1};else{var i=null;if(e)i=!0;else{var n=new r(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(n)&&(i=n)}this.locked={update:i,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var t=this.locked.update;if(!(this.locked=null)===t)this.update();else if(t){var e=new r(this.editor,!0);t.equalsContent(e)||this.update()}}}},l.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},l.keyGroups={PRINTABLE:0,FUNCTIONAL:1},l.isNavigationKey=function(t){return!!l.navigationKeyCodes[t]},l.getKeyGroup=function(t){var e=l.keyGroups;return i[t]?e.FUNCTIONAL:e.PRINTABLE},l.getOppositeKeyGroup=function(t){var e=l.keyGroups;return t==e.FUNCTIONAL?e.PRINTABLE:e.FUNCTIONAL},l.ieFunctionalKeysBug=function(t){return CKEDITOR.env.ie&&l.getKeyGroup(t)==l.keyGroups.FUNCTIONAL};var r=CKEDITOR.plugins.undo.Image=function(t,e){(this.editor=t).fire("beforeUndoImage");var i=t.getSnapshot();CKEDITOR.env.ie&&i&&(i=i.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=i,e||(this.bookmarks=(i=i&&t.getSelection())&&i.createBookmarks2(!0)),t.fire("afterUndoImage")},n=/\b(?:href|src|name)="[^"]*?"/gi;r.prototype={equalsContent:function(t){var e=this.contents;return t=t.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(e=e.replace(n,""),t=t.replace(n,"")),e==t},equalsSelection:function(t){var e=this.bookmarks;if(t=t.bookmarks,e||t){if(!e||!t||e.length!=t.length)return!1;for(var i=0;i<e.length;i++){var n=e[i],o=t[i];if(n.startOffset!=o.startOffset||n.endOffset!=o.endOffset||!CKEDITOR.tools.arrayCompare(n.start,o.start)||!CKEDITOR.tools.arrayCompare(n.end,o.end))return!1}}return!0}};var c=CKEDITOR.plugins.undo.NativeEditingHandler=function(t){this.undoManager=t,this.ignoreInputEvent=!1,this.keyEventsStack=new e,this.lastKeydownImage=null};c.prototype={onKeydown:function(t){var e=t.data.getKey();229!==e&&(-1<CKEDITOR.tools.indexOf(a,t.data.getKeystroke())?t.data.preventDefault():(this.keyEventsStack.cleanUp(t),t=this.undoManager,this.keyEventsStack.getLast(e)||this.keyEventsStack.push(e),this.lastKeydownImage=new r(t.editor),!l.isNavigationKey(e)&&!this.undoManager.keyGroupChanged(e)||(t.strokesRecorded[0]||t.strokesRecorded[1])&&(t.save(!1,this.lastKeydownImage,!1),t.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var t=this.keyEventsStack.getLast();t=t||this.keyEventsStack.push(0),this.keyEventsStack.increment(t.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(t.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(t){var e=this.undoManager;t=t.data.getKey();var i=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(t),l.ieFunctionalKeysBug(t)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new r(e.editor,!0))||(0<i?e.type(t):l.isNavigationKey(t)&&this.onNavigationKey(!0))},onNavigationKey:function(t){var e=this.undoManager;!t&&e.save(!0,null,!1)||e.updateSelection(new r(e.editor)),e.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var t=this.undoManager.editor,e=t.editable(),i=this;e.attachListener(e,"keydown",function(t){i.onKeydown(t),l.ieFunctionalKeysBug(t.data.getKey())&&i.onInput()},null,null,999),e.attachListener(e,CKEDITOR.env.ie?"keypress":"input",i.onInput,i,null,999),e.attachListener(e,"keyup",i.onKeyup,i,null,999),e.attachListener(e,"paste",i.ignoreInputEventListener,i,null,999),e.attachListener(e,"drop",i.ignoreInputEventListener,i,null,999),t.on("afterPaste",i.activateInputEventListener,i,null,999),e.attachListener(e.isInline()?e:t.document.getDocumentElement(),"click",function(){i.onNavigationKey()},null,null,999),e.attachListener(this.undoManager.editor,"blur",function(){i.keyEventsStack.remove(9)},null,null,999)}};var e=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};e.prototype={push:function(t){return t=this.stack.push({keyCode:t,inputs:0}),this.stack[t-1]},getLastIndex:function(t){if("number"!=typeof t)return this.stack.length-1;for(var e=this.stack.length;e--;)if(this.stack[e].keyCode==t)return e;return-1},getLast:function(t){return-1!=(t=this.getLastIndex(t))?this.stack[t]:null},increment:function(t){this.getLast(t).inputs++},remove:function(t){-1!=(t=this.getLastIndex(t))&&this.stack.splice(t,1)},resetInputs:function(t){if("number"==typeof t)this.getLast(t).inputs=0;else for(t=this.stack.length;t--;)this.stack[t].inputs=0},getTotalInputs:function(){for(var t=this.stack.length,e=0;t--;)e+=this.stack[t].inputs;return e},cleanUp:function(t){(t=t.data.$).ctrlKey||t.metaKey||this.remove(17),t.shiftKey||this.remove(16),t.altKey||this.remove(18)}}}(),function(){function t(t,e){CKEDITOR.tools.extend(this,{editor:t,editable:t.editable(),doc:t.document,win:t.window},e,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function e(t,e){CKEDITOR.tools.extend(this,e,{editor:t},!0)}function i(t,e){var i=t.editable();CKEDITOR.tools.extend(this,{editor:t,editable:i,inline:i.isInline(),doc:t.document,win:t.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},e,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var n=CKEDITOR.tools.bind(this.queryViewport,this),o=CKEDITOR.tools.bind(this.hideVisible,this),r=CKEDITOR.tools.bind(this.removeAll,this);i.attachListener(this.winTop,"resize",n),i.attachListener(this.winTop,"scroll",n),i.attachListener(this.winTop,"resize",o),i.attachListener(this.win,"scroll",o),i.attachListener(this.inline?i:this.frame,"mouseout",function(t){var e=t.data.$.clientX;t=t.data.$.clientY,this.queryViewport(),(e<=this.rect.left||e>=this.rect.right||t<=this.rect.top||t>=this.rect.bottom)&&this.hideVisible(),(e<=0||e>=this.winTopPane.width||t<=0||t>=this.winTopPane.height)&&this.hideVisible()},this),i.attachListener(t,"resize",n),i.attachListener(t,"mode",r),t.on("destroy",r),this.lineTpl=new CKEDITOR.template('<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>').output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},f,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},p,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},p,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function a(t){var e;return(e=t&&t.type==CKEDITOR.NODE_ELEMENT)&&(e=!(g[t.getComputedStyle("float")]||g[t.getAttribute("align")])),e&&!m[t.getComputedStyle("position")]}function r(t,e,i,n,o){for(var r,s=0;o(i)&&(i+=n,25!=++s);)if(r=this.doc.$.elementFromPoint(e,i))if(r==t)s=0;else if(l(t,r)&&(s=0,a(r=new CKEDITOR.dom.element(r))))return r}var l,n,o,s,c,u;function d(t,e,i){var n=t.getUniqueId();n in i?i[n].type|=e:i[n]={element:t,type:e}}function h(t,e){var i=t.element[e===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return i&&a(i)?(t.siblingRect=i.getClientRect(),e==CKEDITOR.LINEUTILS_BEFORE?(t.siblingRect.bottom+t.elementRect.top)/2:(t.elementRect.bottom+t.siblingRect.top)/2):e==CKEDITOR.LINEUTILS_BEFORE?t.elementRect.top:t.elementRect.bottom}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,t.prototype={start:function(t){var e,i,n,o,r=this,s=this.editor,a=this.doc,l=CKEDITOR.tools.eventsBuffer(50,function(){s.readOnly||"wysiwyg"!=s.mode||(r.relations={},(i=a.$.elementFromPoint(n,o))&&i.nodeType&&(e=new CKEDITOR.dom.element(i),r.traverseSearch(e),isNaN(n+o)||r.pixelSearch(e,n,o),t&&t(r.relations,n,o)))});this.listener=this.editable.attachListener(this.target,"mousemove",function(t){n=t.data.$.clientX,o=t.data.$.clientY,l.input()}),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){l.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:(n={},n[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,n[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,n[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(t){var e=this.editor.createRange();return e.moveToPosition(this.relations[t.uid].element,n[t.type]),e}),store:function(t,e){var i;e&CKEDITOR.LINEUTILS_AFTER&&a(i=t.getNext())&&i.isVisible()&&(d(i,CKEDITOR.LINEUTILS_BEFORE,this.relations),e^=CKEDITOR.LINEUTILS_AFTER),e&CKEDITOR.LINEUTILS_INSIDE&&a(i=t.getFirst())&&i.isVisible()&&(d(i,CKEDITOR.LINEUTILS_BEFORE,this.relations),e^=CKEDITOR.LINEUTILS_INSIDE),d(t,e,this.relations)},traverseSearch:function(t){var e,i,n;do{if(!((n=t.$["data-cke-expando"])&&n in this.relations)){if(t.equals(this.editable))break;if(a(t))for(e in this.lookups)(i=this.lookups[e](t))&&this.store(t,i)}}while((!t||t.type!=CKEDITOR.NODE_ELEMENT||"true"!=t.getAttribute("contenteditable"))&&(t=t.getParent()))},pixelSearch:(l=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(t,e){return t.contains(e)}:function(t,e){return!!(16&t.compareDocumentPosition(e))},function(t,e,i){var n=this.win.getViewPaneSize().height,o=r.call(this,t.$,e,i,-1,function(t){return 0<t});if(e=r.call(this,t.$,e,i,1,function(t){return t<n}),o)for(this.traverseSearch(o);!o.getParent().equals(t);)o=o.getParent();if(e)for(this.traverseSearch(e);!e.getParent().equals(t);)e=e.getParent();for(;(o||e)&&(o=o&&o.getNext(a))&&!o.equals(e)&&(this.traverseSearch(o),(e=e&&e.getPrevious(a))&&!e.equals(o));)this.traverseSearch(e)}),greedySearch:function(){this.relations={};for(var t,e,i,n=this.editable.getElementsByTag("*"),o=0;t=n.getItem(o++);)if(!t.equals(this.editable)&&t.type==CKEDITOR.NODE_ELEMENT&&(t.hasAttribute("contenteditable")||!t.isReadOnly())&&a(t)&&t.isVisible())for(i in this.lookups)(e=this.lookups[i](t))&&this.store(t,e);return this.relations}},e.prototype={locate:function(t){var e;for(var i in this.locations={},t)(e=t[i]).elementRect=e.element.getClientRect(),e.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(i,CKEDITOR.LINEUTILS_BEFORE,h(e,CKEDITOR.LINEUTILS_BEFORE)),e.type&CKEDITOR.LINEUTILS_AFTER&&this.store(i,CKEDITOR.LINEUTILS_AFTER,h(e,CKEDITOR.LINEUTILS_AFTER)),e.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(i,CKEDITOR.LINEUTILS_INSIDE,(e.elementRect.top+e.elementRect.bottom)/2);return this.locations},sort:function(t,e){for(var i in o=this.locations,s=[],o)for(var n in o[i])if(c=Math.abs(t-o[i][n]),s.length){for(u=0;u<s.length;u++)if(c<s[u].dist){s.splice(u,0,{uid:+i,type:n,dist:c});break}u==s.length&&s.push({uid:+i,type:n,dist:c})}else s.push({uid:+i,type:n,dist:c});return void 0!==e?s.slice(0,e):s},store:function(t,e,i){this.locations[t]||(this.locations[t]={}),this.locations[t][e]=i}};var p={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},f={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};i.prototype={removeAll:function(){for(var t in this.hidden)this.hidden[t].remove(),delete this.hidden[t];for(t in this.visible)this.visible[t].remove(),delete this.visible[t]},hideLine:function(t){var e=t.getUniqueId();t.hide(),this.hidden[e]=t,delete this.visible[e]},showLine:function(t){var e=t.getUniqueId();t.show(),this.visible[e]=t,delete this.hidden[e]},hideVisible:function(){for(var t in this.visible)this.hideLine(this.visible[t])},placeLine:function(t,e){var i,n,o;if(i=this.getStyle(t.uid,t.type)){for(o in this.visible)if(this.visible[o].getCustomData("hash")!==this.hash){n=this.visible[o];break}if(!n)for(o in this.hidden)if(this.hidden[o].getCustomData("hash")!==this.hash){this.showLine(n=this.hidden[o]);break}n||this.showLine(n=this.addLine()),n.setCustomData("hash",this.hash),(this.visible[n.getUniqueId()]=n).setStyles(i),e&&e(n)}},getStyle:function(t,e){var i=this.relations[t],n=this.locations[t][e],o={};if(o.width=i.siblingRect?Math.max(i.siblingRect.width,i.elementRect.width):i.elementRect.width,o.top=this.inline?n+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+n,o.top-this.winTopScroll.y<this.rect.top||o.top-this.winTopScroll.y>this.rect.bottom)return!1;for(var r in this.inline?o.left=i.elementRect.left-this.rect.relativeX:(0<i.elementRect.left?o.left=this.rect.left+i.elementRect.left:(o.width+=i.elementRect.left,o.left=this.rect.left),0<(i=o.left+o.width-(this.rect.left+this.winPane.width))&&(o.width-=i)),o.left+=this.winTopScroll.x,o)o[r]=CKEDITOR.tools.cssLength(o[r]);return o},addLine:function(){var t=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return t.appendTo(this.container),t},prepare:function(t,e){this.relations=t,this.locations=e,this.hash=Math.random()},cleanup:function(){var t,e;for(e in this.visible)(t=this.visible[e]).getCustomData("hash")!==this.hash&&this.hideLine(t)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(t){t=t.getClientRect();var e=this.container.getDocumentPosition(),i=this.container.getComputedStyle("position");return t.relativeX=t.relativeY=0,"static"!=i&&(t.relativeY=e.y,t.relativeX=e.x,t.top-=t.relativeY,t.bottom-=t.relativeY,t.left-=t.relativeX,t.right-=t.relativeX),t}};var g={left:1,right:1,center:1},m={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:t,locator:e,liner:i}}(),CKEDITOR.plugins.add("widgetselection",{init:function(t){if(CKEDITOR.env.webkit){var n=CKEDITOR.plugins.widgetselection;t.on("contentDom",function(t){var e=(t=t.editor).document,i=t.editable();i.attachListener(e,"keydown",function(t){var e=t.data.$;65==t.data.getKey()&&(CKEDITOR.env.mac&&e.metaKey||!CKEDITOR.env.mac&&e.ctrlKey)&&CKEDITOR.tools.setTimeout(function(){n.addFillers(i)||n.removeFillers(i)},0)},null,null,-1),t.on("selectionCheck",function(t){n.removeFillers(t.editor.editable())}),t.on("paste",function(t){t.data.dataValue=n.cleanPasteData(t.data.dataValue)}),"selectall"in t.plugins&&n.addSelectAllIntegration(t)})}}}),CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(t){var e=t.editor;if(!this.isWholeContentSelected(t)&&0<t.getChildCount()){var i=t.getFirst(xi),n=t.getLast(xi);if(i&&i.type==CKEDITOR.NODE_ELEMENT&&!i.isEditable()&&(this.startFiller=this.createFiller(),t.append(this.startFiller,1)),n&&n.type==CKEDITOR.NODE_ELEMENT&&!n.isEditable()&&(this.endFiller=this.createFiller(!0),t.append(this.endFiller,0)),this.hasFiller(t))return(e=e.createRange()).selectNodeContents(t),e.select(),!0}return!1},removeFillers:function(t){if(this.hasFiller(t)&&!this.isWholeContentSelected(t)){var e=t.findOne(this.fillerTagName+"["+this.fillerAttribute+"=start]"),i=t.findOne(this.fillerTagName+"["+this.fillerAttribute+"=end]");this.startFiller&&e&&this.startFiller.equals(e)?this.removeFiller(this.startFiller,t):this.startFiller=e,this.endFiller&&i&&this.endFiller.equals(i)?this.removeFiller(this.endFiller,t):this.endFiller=i}},cleanPasteData:function(t){return t&&t.length&&(t=t.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),"")),t},isWholeContentSelected:function(t){var e=t.editor.getSelection().getRanges()[0];return!(!e||e&&e.collapsed||((e=e.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),!(e&&t&&e.startContainer&&e.endContainer&&0===e.startOffset&&e.endOffset===t.getChildCount()&&e.startContainer.equals(t)&&e.endContainer.equals(t))))},hasFiller:function(t){return 0<t.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(t){var e=new CKEDITOR.dom.element(this.fillerTagName);return e.setHtml(this.fillerContent),e.setAttribute(this.fillerAttribute,t?"end":"start"),e.setAttribute("data-cke-temp",1),e.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"}),e},removeFiller:function(t,e){if(t){var i,n,o=e.editor,r=e.editor.getSelection().getRanges()[0].startPath(),s=o.createRange();r.contains(t)&&(i=t.getHtml(),n=!0),r="start"==t.getAttribute(this.fillerAttribute),t.remove(),i&&0<i.length&&i!=this.fillerContent?(e.insertHtmlIntoRange(i,o.getSelection().getRanges()[0]),s.setStartAt(e.getChild(e.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),o.getSelection().selectRanges([s])):n&&(r?s.setStartAt(e.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):s.setEndAt(e.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),e.editor.getSelection().selectRanges([s]))}},createFillerRegex:function(t){var e=this.createFiller(t).getOuterHtml().replace(/style="[^"]*"/gi,'style="[^"]*"').replace(/>[^<]*</gi,">[^<]*<");return new RegExp((t?"":"^")+e+(t?"$":""))},addSelectAllIntegration:function(i){var n=this;i.editable().attachListener(i,"beforeCommandExec",function(t){var e=i.editable();"selectAll"==t.data.name&&e&&n.addFillers(e)},null,null,9999)}},function(){function e(t){this.editor=t,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},function(r){var s,a,l=r.editor;l.on("toHtml",function(t){var e,i=function(t){var s=[],a=t._.upcasts,l=t._.upcastCallbacks;return{toBeWrapped:s,iterator:function(t){var e,i,n,o,r;if("data-cke-widget-wrapper"in t.attributes)return(t=t.getFirst(c.isParserWidgetElement))&&s.push([t]),!1;if("data-widget"in t.attributes)return s.push([t]),!1;if(r=a.length){if(t.attributes["data-cke-widget-upcasted"])return!1;for(o=0,e=l.length;o<e;++o)if(!1===l[o](t))return;for(o=0;o<r;++o)if(n={},i=(e=a[o])[0](t,n))return i instanceof CKEDITOR.htmlParser.element&&(t=i),t.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(n)),t.attributes["data-cke-widget-upcasted"]=1,s.push([t,e[1]]),!1}}}}(r);for(t.data.dataValue.forEach(i.iterator,CKEDITOR.NODE_ELEMENT,!0);e=i.toBeWrapped.pop();){var n=e[0],o=n.parent;o.type==CKEDITOR.NODE_ELEMENT&&o.attributes["data-cke-widget-wrapper"]&&o.replaceWith(n),r.wrapElement(e[0],e[1])}s=t.data.protectedWhitespaces?3==t.data.dataValue.children.length&&c.isParserWidgetWrapper(t.data.dataValue.children[1]):1==t.data.dataValue.children.length&&c.isParserWidgetWrapper(t.data.dataValue.children[0])},null,null,8),l.on("dataReady",function(){if(a)for(var t,e,i=l.editable().find(".cke_widget_wrapper"),n=0,o=i.count();n<o;++n)(e=(t=i.getItem(n)).getFirst(c.isDomWidgetElement)).type==CKEDITOR.NODE_ELEMENT&&e.data("widget")?(e.replace(t),r.wrapElement(e)):t.remove();a=0,r.destroyAll(!0),r.initOnAll()}),l.on("loadSnapshot",function(t){/data-cke-widget/.test(t.data)&&(a=1),r.destroyAll(!0)},null,null,9),l.on("paste",function(t){(t=t.data).dataValue=t.dataValue.replace(D,f),t.range&&(t=c.getNestedEditable(l.editable(),t.range.startContainer))&&(t=CKEDITOR.filter.instances[t.data("cke-filter")])&&l.setActiveFilter(t)}),l.on("afterInsertHtml",function(t){t.data.intoRange?r.checkWidgets({initOnlyNew:!0}):(l.fire("lockSnapshot"),r.checkWidgets({initOnlyNew:!0,focusInited:s}),l.fire("unlockSnapshot"))})}(this),function(r){var t=r.editor,a={};t.on("toDataFormat",function(t){var e=CKEDITOR.tools.getNextNumber(),o=[];t.data.downcastingSessionId=e,a[e]=o,t.data.dataValue.forEach(function(t){var e,i=t.attributes;if("data-cke-widget-white-space"in i){e=u(t);var n=d(t);e.parent.attributes["data-cke-white-space-first"]&&(e.value=e.value.replace(/^&nbsp;/g," ")),n.parent.attributes["data-cke-white-space-last"]&&(n.value=n.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in i)(i=r.instances[i["data-cke-widget-id"]])&&(e=t.getFirst(c.isParserWidgetElement),o.push({wrapper:t,element:e,widget:i,editables:{}}),"1"!=e.attributes["data-cke-widget-keep-attr"]&&delete e.attributes["data-widget"]);else if("data-cke-widget-editable"in i)return o[o.length-1].editables[i["data-cke-widget-editable"]]=t,!1},CKEDITOR.NODE_ELEMENT,!0)},null,null,8),t.on("toDataFormat",function(t){if(t.data.downcastingSessionId){t=a[t.data.downcastingSessionId];for(var e,i,n,o,r,s;e=t.shift();){for(s in i=e.widget,n=e.element,o=i._.downcastFn&&i._.downcastFn.call(i,n),e.editables)delete(r=e.editables[s]).attributes.contenteditable,r.setHtml(i.editables[s].getData());o=o||n,e.wrapper.replaceWith(o)}}},null,null,13),t.on("contentDomUnload",function(){r.destroyAll(!0)})}(this),this.on("checkWidgets",i),this.editor.on("contentDomInvalidated",this.checkWidgets,this),function(n){var o=n.editor;o.on("selectionCheck",function(){n.fire("checkSelection")}),n.on("checkSelection",n.checkSelection,n),o.on("selectionChange",function(t){var e=(t=c.getNestedEditable(o.editable(),t.data.selection.getStartElement()))&&n.getByElement(t),i=n.widgetHoldingFocusedEditable;i?i===e&&i.focusedEditable.equals(t)||(r(n,i,null),e&&t&&r(n,e,t)):e&&t&&r(n,e,t)}),o.on("dataReady",function(){g(n).commit()}),o.on("blur",function(){var t;(t=n.focused)&&l(n,t),(t=n.widgetHoldingFocusedEditable)&&r(n,t,null)})}(this),function(o){var r=o.editor;r.on("contentDom",function(){var i,n,t=r.editable(),e=t.isInline()?t:r.document;t.attachListener(e,"mousedown",function(t){var e=t.data.getTarget();i=e instanceof CKEDITOR.dom.element?o.getByElement(e):null,n=0,i&&(i.inline&&e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-drag-handler")?(n=1,o.focused!=i&&r.getSelection().removeAllRanges()):c.getNestedEditable(i.wrapper,e)?i=null:(t.data.preventDefault(),CKEDITOR.env.ie||i.focus()))}),t.attachListener(e,"mouseup",function(){n&&i&&i.wrapper&&(n=0,i.focus())}),CKEDITOR.env.ie&&t.attachListener(e,"mouseup",function(){setTimeout(function(){i&&i.wrapper&&t.contains(i.wrapper)&&(i.focus(),i=null)})})}),r.on("doubleclick",function(t){var e=o.getByElement(t.data.element);if(e&&!c.getNestedEditable(e.wrapper,t.data.element))return e.fire("doubleclick",{element:t.data.element})},null,null,1)}(this),function(o){o.editor.on("key",function(t){var e,i=o.focused,n=o.widgetHoldingFocusedEditable;return i?e=i.fire("key",{keyCode:t.data.keyCode}):n&&(i=t.data.keyCode,t=n.focusedEditable,e=i==CKEDITOR.CTRL+65?(i=t.getBogus(),(n=n.editor.createRange()).selectNodeContents(t),i&&n.setEndAt(i,CKEDITOR.POSITION_BEFORE_START),n.select(),!1):8==i||46==i?(n=(e=n.editor.getSelection().getRanges())[0],!(1==e.length&&n.collapsed&&n.checkBoundaryOfElement(t,CKEDITOR[8==i?"START":"END"]))):void 0),e},null,null,1)}(this),function(o){var r=o.editor,t=CKEDITOR.plugins.lineutils;r.on("dragstart",function(t){var e=t.data.target;c.isDomDragHandler(e)&&(e=o.getByElement(e),t.data.dataTransfer.setData("cke/widget-id",e.id),r.focus(),e.focus())}),r.on("drop",function(t){var e=(n=t.data.dataTransfer).getData("cke/widget-id"),i=n.getTransferType(r),n=r.createRange();""!==e&&i===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?t.cancel():""!==e&&i==CKEDITOR.DATA_TRANSFER_INTERNAL&&(e=o.instances[e])&&(n.setStartBefore(e.wrapper),n.setEndAfter(e.wrapper),t.data.dragRange=n,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,t.data.dataTransfer.setData("text/html",r.editable().getHtmlFromRange(n).getHtml()),r.widgets.destroy(e,!0))}),r.on("contentDom",function(){var i=r.editable();CKEDITOR.tools.extend(o,{finder:new t.finder(r,{lookups:{default:function(t){if(!t.is(CKEDITOR.dtd.$listItem)&&t.is(CKEDITOR.dtd.$block)&&!c.isDomNestedEditable(t)&&!o._.draggedWidget.wrapper.contains(t)){var e=c.getNestedEditable(i,t);if(e){if(t=o._.draggedWidget,o.getByElement(e)==t)return;if(e=CKEDITOR.filter.instances[e.data("cke-filter")],t=t.requiredContent,e&&t&&!e.check(t))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new t.locator(r),liner:new t.liner(r,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}(this),function(e){function i(t){e.focused&&y(e.focused,"cut"==t.name)}var n=e.editor;n.on("contentDom",function(){var t=n.editable();t.attachListener(t,"copy",i),t.attachListener(t,"cut",i)})}(this)}function c(t,e,i,n,o){var r=t.editor;CKEDITOR.tools.extend(this,n,{editor:r,id:e,inline:"span"==i.getParent().getName(),element:i,data:CKEDITOR.tools.extend({},"function"==typeof n.defaults?n.defaults():n.defaults),dataReady:!1,inited:!1,ready:!1,edit:c.prototype.edit,focusedEditable:null,definition:n,repository:t,draggable:!1!==n.draggable,_:{downcastFn:n.downcast&&"string"==typeof n.downcast?n.downcasts[n.downcast]:n.downcast}},!0),t.fire("instanceCreated",this),function(i,t){(function(t){(t.wrapper=t.element.getParent()).setAttribute("data-cke-widget-id",t.id)})(i),function(t){if(t.parts){var e,i,n={};for(i in t.parts)e=t.wrapper.findOne(t.parts[i]),n[i]=e;t.parts=n}}(i),function(t){var e,i,n=t.editables;if(t.editables={},t.editables)for(e in n)i=n[e],t.initEditable(e,"string"==typeof i?{selector:i}:i)}(i),function(t){if(t.mask){var e=t.wrapper.findOne(".cke_widget_mask");e||((e=new CKEDITOR.dom.element("img",t.editor.document)).setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_mask"}),t.wrapper.append(e)),t.mask=e}}(i),function(t){if(t.draggable){var e,i=t.editor,n=t.wrapper.getLast(c.isDomDragHandlerContainer);n?e=n.findOne("img"):((n=new CKEDITOR.dom.element("span",i.document)).setAttributes({class:"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+i.plugins.widget.path+"images/handle.png)"}),(e=new CKEDITOR.dom.element("img",i.document)).setAttributes({class:"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:i.lang.widget.move,height:15,role:"presentation"}),t.inline&&e.setAttribute("draggable","true"),n.append(e),t.wrapper.append(n)),t.wrapper.on("dragover",function(t){t.data.preventDefault()}),t.wrapper.on("mouseenter",t.updateDragHandlerPosition,t),setTimeout(function(){t.on("data",t.updateDragHandlerPosition,t)},50),!t.inline&&(e.on("mousedown",w,t),CKEDITOR.env.ie&&CKEDITOR.env.version<9)&&e.on("dragstart",function(t){t.data.preventDefault(!0)}),t.dragHandlerContainer=n}}(i),function(t){var i=null;t.on("data",function(){var t,e=this.data.classes;if(i!=e){for(t in i)e&&e[t]||this.removeClass(t);for(t in e)this.addClass(t);i=e}})}(i),function(e){e.on("data",function(){if(e.wrapper){var t=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());e.wrapper.setAttribute("role","region"),e.wrapper.setAttribute("aria-label",t)}},null,null,9999)}(i),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&i.wrapper.on("dragstart",function(t){var e=t.data.getTarget();c.getNestedEditable(i,e)||i.inline&&c.isDomDragHandler(e)||t.data.preventDefault()});i.wrapper.removeClass("cke_widget_new"),i.element.addClass("cke_widget_element"),i.on("key",function(t){if(13==(t=t.data.keyCode))i.edit();else{if(t==CKEDITOR.CTRL+67||t==CKEDITOR.CTRL+88)return void y(i,t==CKEDITOR.CTRL+88);if(t in I||CKEDITOR.CTRL&t||CKEDITOR.ALT&t)return}return!1},null,null,999),i.on("doubleclick",function(t){i.edit()&&t.cancel()}),t.data&&i.on("data",t.data);t.edit&&i.on("edit",t.edit)}(this,n),this.init&&this.init(),this.inited=!0,(t=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(t))),o&&this.setData(o),this.data.classes||this.setData("classes",this.getClasses()),this.dataReady=!0,C(this),this.fire("data",this.data),this.isInited()&&r.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function n(t,e,i){CKEDITOR.dom.element.call(this,e.$),this.editor=t,this._={},e=this.filter=i.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=e?e.getAllowedEnterMode(t.enterMode):t.enterMode,this.shiftEnterMode=e?e.getAllowedEnterMode(t.shiftEnterMode,!0):t.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function l(t,e){if(t.focused=null,e.isInited()){var i=e.editor.checkDirty();t.fire("widgetBlurred",{widget:e}),e.setFocused(!1),i||e.editor.resetDirty()}}function i(t){if(t=t.data,"wysiwyg"==this.editor.mode){var e,i,n,o,r=this.editor.editable(),s=this.instances;if(r){for(e in s)s[e].isReady()&&!r.contains(s[e].wrapper)&&this.destroy(s[e],!0);if(t&&t.initOnlyNew)s=this.initOnAll();else{var a=r.find(".cke_widget_wrapper");s=[];for(e=0,i=a.count();e<i;e++){if(n=a.getItem(e),o=!this.getByElement(n,!0)){t:{o=p;for(var l=n;l=l.getParent();)if(o(l)){o=!0;break t}o=!1}o=!o}o&&r.contains(n)&&(n.addClass("cke_widget_new"),s.push(this.initOn(n.getFirst(c.isDomWidgetElement))))}}t&&t.focusInited&&1==s.length&&s[0].focus()}}}function s(t){if(void 0!==t.attributes&&t.attributes["data-widget"]){var e=u(t),i=d(t),n=!1;e&&e.value&&e.value.match(/^\s/g)&&(e.parent.attributes["data-cke-white-space-first"]=1,e.value=e.value.replace(/^\s/g,"&nbsp;"),n=!0),i&&i.value&&i.value.match(/\s$/g)&&(i.parent.attributes["data-cke-white-space-last"]=1,i.value=i.value.replace(/\s$/g,"&nbsp;"),n=!0),n&&(t.attributes["data-cke-widget-white-space"]=1)}}function u(t){return t.find(function(t){return 3===t.type},!0).shift()}function d(t){return t.find(function(t){return 3===t.type},!0).pop()}function o(t,e,i){if(!i.allowedContent&&!i.disallowedContent)return null;var n=this._.filters[t];return n||(this._.filters[t]=n={}),(t=n[e])||(t=i.allowedContent?new CKEDITOR.filter(i.allowedContent):this.editor.filter.clone(),n[e]=t,i.disallowedContent&&t.disallow(i.disallowedContent)),t}function a(t,e){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off",class:"cke_widget_wrapper cke_widget_new cke_widget_"+(t?"inline":"block")+(e?" cke_widget_"+e:"")}}function h(t,e){return"boolean"==typeof t.inline?t.inline:!!CKEDITOR.dtd.$inline[e]}function p(t){return t.hasAttribute("data-cke-temp")}function r(t,e,i,n){var o=t.editor;o.fire("lockSnapshot"),i?(n=i.data("cke-widget-editable"),n=e.editables[n],(t.widgetHoldingFocusedEditable=e).focusedEditable=n,i.addClass("cke_widget_editable_focused"),n.filter&&o.setActiveFilter(n.filter),o.setActiveEnterMode(n.enterMode,n.shiftEnterMode)):(n||e.focusedEditable.removeClass("cke_widget_editable_focused"),e.focusedEditable=null,t.widgetHoldingFocusedEditable=null,o.setActiveFilter(null),o.setActiveEnterMode(null,null)),o.fire("unlockSnapshot")}function f(t,e){return CKEDITOR.tools.trim(e)}function g(n){var o=n.selected,r=[],s=o.slice(0),a=null;return{select:function(t){return CKEDITOR.tools.indexOf(o,t)<0&&r.push(t),0<=(t=CKEDITOR.tools.indexOf(s,t))&&s.splice(t,1),this},focus:function(t){return a=t,this},commit:function(){var t,e,i=n.focused!==a;for(n.editor.fire("lockSnapshot"),i&&(t=n.focused)&&l(n,t);t=s.pop();)o.splice(CKEDITOR.tools.indexOf(o,t),1),t.isInited()&&(e=t.editor.checkDirty(),t.setSelected(!1),e||t.editor.resetDirty());for(i&&a&&(e=n.editor.checkDirty(),n.focused=a,n.fire("widgetFocused",{widget:a}),a.setFocused(!0),e||n.editor.resetDirty());t=r.pop();)o.push(t),t.setSelected(!0);n.editor.fire("unlockSnapshot")}}}function m(t,e,i){var n=0;e=b(e);var o,r=t.data.classes||{};if(e){for(r=CKEDITOR.tools.clone(r);o=e.pop();)i?r[o]||(n=r[o]=1):r[o]&&(delete r[o],n=1);n&&t.setData("classes",r)}}function v(t){t.cancel()}function y(t,e){var i=t.editor,n=i.document,o=CKEDITOR.env.edge&&16<=CKEDITOR.env.version;if(!n.getById("cke_copybin")){var r=!i.blockless&&!CKEDITOR.env.ie||o?"div":"span",s=(o=n.createElement(r),n.createElement(r));r=CKEDITOR.env.ie&&CKEDITOR.env.version<9;s.setAttributes({id:"cke_copybin","data-cke-temp":"1"}),o.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),o.setStyle("ltr"==i.config.contentsLangDirection?"left":"right","-5000px");var a=i.createRange();a.setStartBefore(t.wrapper),a.setEndAfter(t.wrapper),o.setHtml('<span data-cke-copybin-start="1">​</span>'+i.editable().getHtmlFromRange(a).getHtml()+'<span data-cke-copybin-end="1">​</span>'),i.fire("saveSnapshot"),i.fire("lockSnapshot"),s.append(o),i.editable().append(s);var l=i.on("selectionChange",v,null,null,0),c=t.repository.on("checkSelection",v,null,null,0);if(r)var u=n.getDocumentElement().$,d=u.scrollTop;(a=i.createRange()).selectNodeContents(o),a.select(),r&&(u.scrollTop=d),setTimeout(function(){e||t.focus(),s.remove(),l.removeListener(),c.removeListener(),i.fire("unlockSnapshot"),e&&(t.repository.del(t),i.fire("saveSnapshot"))},100)}}function b(t){return(t=(t=t.getDefinition().attributes)&&t.class)?t.split(/\s+/):null}function _(){var t=CKEDITOR.document.getActive(),e=this.editor,i=e.editable();(i.isInline()?i:e.document.getWindow().getFrame()).equals(t)&&e.focusManager.focus(i)}function E(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function w(s){function t(){var t;for(h.reset();t=c.pop();)t.removeListener();var e=u;t=s.sender;var i=this.repository.finder,n=this.repository.liner,o=this.editor,r=this.editor.editable();CKEDITOR.tools.isEmpty(n.visible)||(e=i.getRange(e[0]),this.focus(),o.fire("drop",{dropRange:e,target:e.startContainer})),r.removeClass("cke_widget_dragging"),n.hideVisible(),o.fire("dragend",{target:t})}if(CKEDITOR.tools.getMouseButton(s)===CKEDITOR.MOUSE_BUTTON_LEFT){var e,i,n=this.repository.finder,o=this.repository.locator,r=this.repository.liner,a=this.editor,l=a.editable(),c=[],u=[];this.repository._.draggedWidget=this;var d=n.greedySearch(),h=CKEDITOR.tools.eventsBuffer(50,function(){e=o.locate(d),(u=o.sort(i,1)).length&&(r.prepare(d,e),r.placeLine(u[0]),r.cleanup())});l.addClass("cke_widget_dragging"),c.push(l.on("mousemove",function(t){i=t.data.$.clientY,h.input()})),a.fire("dragstart",{target:s.sender}),c.push(a.document.once("mouseup",t,this)),l.isInline()||c.push(CKEDITOR.document.once("mouseup",t,this))}}function C(t){t.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(t.data)))}function T(t){return t.is(x)&&t.data("cke-widget-id")}var x;CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid yellow;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid yellow}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #ace}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:none;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}"),function(){function t(){}function e(t,e,i){return!(!i||!this.checkElement(t))&&((t=i.widgets.getByElement(t,!0))&&t.checkStyleActive(this))}var a={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(t){if(this.widget=t.widget,this.group="string"==typeof t.group?[t.group]:t.group){var e;t=this.widget,a[t]||(a[t]={});for(var i=0,n=this.group.length;i<n;i++)e=this.group[i],a[t][e]||(a[t][e]=[]),a[t][e].push(this)}},apply:function(t){var e;t instanceof CKEDITOR.editor&&this.checkApplicable(t.elementPath(),t)&&(e=t.widgets.focused,this.group&&this.removeStylesFromSameGroup(t),e.applyStyle(this))},remove:function(t){t instanceof CKEDITOR.editor&&this.checkApplicable(t.elementPath(),t)&&t.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(t){var e,i,n=!1;if(!(t instanceof CKEDITOR.editor))return!1;if(i=t.elementPath(),this.checkApplicable(i,t))for(var o=0,r=this.group.length;o<r;o++){e=a[this.widget][this.group[o]];for(var s=0;s<e.length;s++)e[s]!==this&&e[s].checkActive(i,t)&&(t.widgets.focused.removeStyle(e[s]),n=!0)}return n},checkActive:function(t,e){return this.checkElementMatch(t.lastElement,0,e)},checkApplicable:function(t,e){return e instanceof CKEDITOR.editor&&this.checkElement(t.lastElement)},checkElementMatch:e,checkElementRemovable:e,checkElement:function(t){return!!c.isDomWidgetWrapper(t)&&((t=t.getFirst(c.isDomWidgetElement))&&t.data("widget")==this.widget)},buildPreview:function(t){return t||this._.definition.name},toAllowedContentRules:function(t){if(!t)return null;var e,i={};return(t=t.widgets.registered[this.widget])?t.styleableElements?(e=this.getClassesArray())?(i[t.styleableElements]={classes:e,propertiesOnly:!0},i):null:t.styleToAllowedContentRules?t.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var t=this._.definition.attributes&&this._.definition.attributes.class;return t?CKEDITOR.tools.trim(t).split(/\s+/):null},applyToRange:t,removeFromRange:t,applyToObject:t})}())},beforeInit:function(t){void 0!==CKEDITOR.document.$.querySelectorAll&&(t.widgets=new e(t))},afterInit:function(t){if(void 0!==CKEDITOR.document.$.querySelectorAll){var e,i,n,o=t.widgets.registered;for(i in o)(n=(e=o[i]).button)&&t.ui.addButton&&t.ui.addButton(CKEDITOR.tools.capitalize(e.name,!0),{label:n,command:e.name,toolbar:"insert,10"});!function(e){e.contextMenu&&e.contextMenu.addListener(function(t){if(t=e.widgets.getByElement(t,!0))return t.fire("contextMenu",{})})}(t)}}}),e.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(t,e){return(e=CKEDITOR.tools.prototypedCopy(e)).name=t,e._=e._||{},this.editor.fire("widgetDefinition",e),e.template&&(e.template=new CKEDITOR.template(e.template)),function(t,a){t.addCommand(a.name,{exec:function(n,t){function o(){n.widgets.finalizeCreation(s)}if((e=n.widgets.focused)&&e.name==a.name)e.edit();else if(a.insert)a.insert();else if(a.template){var r,e="function"==typeof a.defaults?a.defaults():a.defaults,i=(e=CKEDITOR.dom.element.createFromHtml(a.template.output(e)),n.widgets.wrapElement(e,a.name)),s=new CKEDITOR.dom.documentFragment(i.getDocument());s.append(i),(r=n.widgets.initOn(e,a,t&&t.startupData))?(e=r.once("edit",function(t){t.data.dialog?r.once("dialog",function(t){var e,i;t=t.data,e=t.once("ok",o,null,null,20),i=t.once("cancel",function(t){t.data&&!1===t.data.hide||n.widgets.destroy(r,!0)}),t.once("hide",function(){e.removeListener(),i.removeListener()})}):o()},null,null,999),r.edit(),e.removeListener()):o()}},allowedContent:a.allowedContent,requiredContent:a.requiredContent,contentForms:a.contentForms,contentTransformations:a.contentTransformations})}(this.editor,e),function(o,r){function t(t,e,i){var n=CKEDITOR.tools.getIndex(o._.upcasts,function(t){return t[2]>i});n<0&&(n=o._.upcasts.length),o._.upcasts.splice(n,0,[CKEDITOR.tools.bind(t,e),e.name,i])}var e=r.upcast,i=r.upcastPriority||10;e&&t("string"==typeof e?function(t,e){var i,n,o=r.upcast.split(",");for(n=0;n<o.length;n++)if((i=o[n])===t.name)return r.upcasts[i].call(this,t,e);return!1}:e,r,i)}(this,e),this.registered[t]=e},addUpcastCallback:function(t){this._.upcastCallbacks.push(t)},checkSelection:function(){var t,e=this.editor.getSelection(),i=e.getSelectedElement(),n=g(this);if(i&&(t=this.getByElement(i,!0)))return n.focus(t).select(t).commit();if(!(e=e.getRanges()[0])||e.collapsed)return n.commit();for((e=new CKEDITOR.dom.walker(e)).evaluator=c.isDomWidgetWrapper;i=e.next();)n.select(this.getByElement(i));n.commit()},checkWidgets:function(t){this.fire("checkWidgets",CKEDITOR.tools.copy(t||{}))},del:function(t){if(this.focused===t){var e,i=t.editor,n=i.createRange();(e=n.moveToClosestEditablePosition(t.wrapper,!0))||(e=n.moveToClosestEditablePosition(t.wrapper,!1)),e&&i.getSelection().selectRanges([n])}t.wrapper.remove(),this.destroy(t,!0)},destroy:function(t,e){this.widgetHoldingFocusedEditable===t&&r(this,t,null,e),t.destroy(e),delete this.instances[t.id],this.fire("instanceDestroyed",t)},destroyAll:function(t,e){var i,n,o=this.instances;if(e&&!t){o=(n=e.find(".cke_widget_wrapper")).count();for(var r=0;r<o;++r)(i=this.getByElement(n.getItem(r),!0))&&this.destroy(i)}else for(n in o)i=o[n],this.destroy(i,t)},finalizeCreation:function(t){(t=t.getFirst())&&c.isDomWidgetWrapper(t)&&(this.editor.insertElement(t),(t=this.getByElement(t)).ready=!0,t.fire("ready"),t.focus())},getByElement:(x={div:1,span:1},function(t,e){if(!t)return null;var i=T(t);if(!e&&!i)for(var n=this.editor.editable();(t=t.getParent())&&!t.equals(n)&&!(i=T(t)););return this.instances[i]||null}),initOn:function(t,e,i){if(e?"string"==typeof e&&(e=this.registered[e]):e=this.registered[t.data("widget")],!e)return null;var n=this.wrapElement(t,e.name);return n?n.hasClass("cke_widget_new")?(t=new c(this,this._.nextId++,t,e,i)).isInited()?this.instances[t.id]=t:null:this.getByElement(t):null},initOnAll:function(t){for(var e,i=[],n=(t=(t||this.editor.editable()).find(".cke_widget_new")).count();n--;)(e=this.initOn(t.getItem(n).getFirst(c.isDomWidgetElement)))&&i.push(e);return i},onWidget:function(e){var i=Array.prototype.slice.call(arguments);for(var t in i.shift(),this.instances){var n=this.instances[t];n.name==e&&n.on.apply(n,i)}this.on("instanceCreated",function(t){(t=t.data).name==e&&t.on.apply(t,i)})},parseElementClasses:function(t){if(!t)return null;t=CKEDITOR.tools.trim(t).split(/\s+/);for(var e,i={},n=0;e=t.pop();)-1==e.indexOf("cke_")&&(i[e]=n=1);return n?i:null},wrapElement:function(t,e){var i,n,o=null;if(t instanceof CKEDITOR.dom.element){if(e=e||t.data("widget"),!(i=this.registered[e]))return null;if((o=t.getParent())&&o.type==CKEDITOR.NODE_ELEMENT&&o.data("cke-widget-wrapper"))return o;t.hasAttribute("data-cke-widget-keep-attr")||t.data("cke-widget-keep-attr",t.data("widget")?1:0),t.data("widget",e),(n=h(i,t.getName()))&&s(t),(o=new CKEDITOR.dom.element(n?"span":"div")).setAttributes(a(n,e)),o.data("cke-display-name",i.pathName?i.pathName:t.getName()),t.getParent(!0)&&o.replace(t),t.appendTo(o)}else if(t instanceof CKEDITOR.htmlParser.element){if(e=e||t.attributes["data-widget"],!(i=this.registered[e]))return null;if((o=t.parent)&&o.type==CKEDITOR.NODE_ELEMENT&&o.attributes["data-cke-widget-wrapper"])return o;var r;"data-cke-widget-keep-attr"in t.attributes||(t.attributes["data-cke-widget-keep-attr"]=t.attributes["data-widget"]?1:0),e&&(t.attributes["data-widget"]=e),(n=h(i,t.name))&&s(t),(o=new CKEDITOR.htmlParser.element(n?"span":"div",a(n,e))).attributes["data-cke-display-name"]=i.pathName?i.pathName:t.name,(i=t.parent)&&(r=t.getIndex(),t.remove()),o.add(t),i&&function t(e,i,n){if(e.type==CKEDITOR.NODE_ELEMENT&&(o=CKEDITOR.dtd[e.name])&&!o[n.name]){var o=e.split(i),r=e.parent;return i=o.getIndex(),e.children.length||(--i,e.remove()),o.children.length||o.remove(),t(r,i,n)}e.add(n,i)}(i,r,o)}return o},_tests_createEditableFilter:o},CKEDITOR.event.implementOn(e.prototype),c.prototype={addClass:function(t){this.element.addClass(t),this.wrapper.addClass(c.WRAPPER_CLASS_PREFIX+t)},applyStyle:function(t){m(this,t,1)},checkStyleActive:function(t){var e;if(!(t=b(t)))return!1;for(;e=t.pop();)if(!this.hasClass(e))return!1;return!0},destroy:function(t){if(this.fire("destroy"),this.editables)for(var e in this.editables)this.destroyEditable(e,t);t||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(t,e){var i=this.editables[t];i.removeListener("focus",E),i.removeListener("blur",_),this.editor.focusManager.remove(i),e||(this.repository.destroyAll(!1,i),i.removeClass("cke_widget_editable"),i.removeClass("cke_widget_editable_focused"),i.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[t]},edit:function(){var t={dialog:this.dialog},n=this;return!(!1===this.fire("edit",t)||!t.dialog)&&(this.editor.openDialog(t.dialog,function(i){var t,e;!1!==n.fire("dialog",i)&&(t=i.on("show",function(){i.setupContent(n)}),e=i.on("ok",function(){var e,t=n.on("data",function(t){e=1,t.cancel()},null,null,0);n.editor.fire("saveSnapshot"),i.commitContent(n),t.removeListener(),e&&(n.fire("data",n.data),n.editor.fire("saveSnapshot"))}),i.once("hide",function(){t.removeListener(),e.removeListener()}))}),!0)},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},hasClass:function(t){return this.element.hasClass(t)},initEditable:function(t,e){var i=this._findOneNotNested(e.selector);return!(!i||!i.is(CKEDITOR.dtd.$editable))&&(i=new n(this.editor,i,{filter:o.call(this.repository,this.name,t,e)}),(this.editables[t]=i).setAttributes({contenteditable:"true","data-cke-widget-editable":t,"data-cke-enter-mode":i.enterMode}),i.filter&&i.data("cke-filter",i.filter.id),i.addClass("cke_widget_editable"),i.removeClass("cke_widget_editable_focused"),e.pathName&&i.data("cke-display-name",e.pathName),this.editor.focusManager.add(i),i.on("focus",E,this),CKEDITOR.env.ie&&i.on("blur",_,this),i._.initialSetData=!0,i.setData(i.getHtml()),!0)},_findOneNotNested:function(t){t=this.wrapper.find(t);for(var e,i,n=0;n<t.count();n++)if(i=(e=t.getItem(n)).getAscendant(c.isDomWidgetWrapper),this.wrapper.equals(i))return e;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var t=this.editor.getSelection();if(t){var e=this.editor.checkDirty();t.fake(this.wrapper),e||this.editor.resetDirty()}this.editor.focus()},removeClass:function(t){this.element.removeClass(t),this.wrapper.removeClass(c.WRAPPER_CLASS_PREFIX+t)},removeStyle:function(t){m(this,t,0)},setData:function(t,e){var i=this.data,n=0;if("string"==typeof t)i[t]!==e&&(i[t]=e,n=1);else{var o=t;for(t in o)i[t]!==o[t]&&(n=1,i[t]=o[t])}return n&&this.dataReady&&(C(this),this.fire("data",i)),this},setFocused:function(t){return this.wrapper[t?"addClass":"removeClass"]("cke_widget_focused"),this.fire(t?"focus":"blur"),this},setSelected:function(t){return this.wrapper[t?"addClass":"removeClass"]("cke_widget_selected"),this.fire(t?"select":"deselect"),this},updateDragHandlerPosition:function(){var t=this.editor,e=this.element.$,i=this._.dragHandlerOffset;e={x:e.offsetLeft,y:e.offsetTop-15};i&&e.x==i.x&&e.y==i.y||(i=t.checkDirty(),t.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:e.y+"px",left:e.x+"px",display:"block"}),t.fire("unlockSnapshot"),i||t.resetDirty(),this._.dragHandlerOffset=e)}},CKEDITOR.event.implementOn(c.prototype),c.getNestedEditable=function(t,e){return!e||e.equals(t)?null:c.isDomNestedEditable(e)?e:c.getNestedEditable(t,e.getParent())},c.isDomDragHandler=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("data-cke-widget-drag-handler")},c.isDomDragHandlerContainer=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasClass("cke_widget_drag_handler_container")},c.isDomNestedEditable=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("data-cke-widget-editable")},c.isDomWidgetElement=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("data-widget")},c.isDomWidgetWrapper=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("data-cke-widget-wrapper")},c.isDomWidget=function(t){return!!t&&(this.isDomWidgetWrapper(t)||this.isDomWidgetElement(t))},c.isParserWidgetElement=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&!!t.attributes["data-widget"]},c.isParserWidgetWrapper=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&!!t.attributes["data-cke-widget-wrapper"]},c.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_",n.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(t){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,t=this.editor.dataProcessor.toHtml(t,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(t),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var D=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,I={37:1,38:1,39:1,40:1,8:1,46:1};(CKEDITOR.plugins.widget=c).repository=e,c.nestedEditable=n}(),function(){function e(t){this.editor=t,this.loaders=[]}function o(t,e,i){var n=t.config.fileTools_defaultFileName;this.editor=t,this.lang=t.lang,"string"==typeof e?(this.data=e,this.file=function(t){var e=t.match(a)[1];t=t.replace(a,""),t=atob(t);var i,n,o,r,s=[];for(i=0;i<t.length;i+=512){for(n=t.slice(i,i+512),o=Array(n.length),r=0;r<n.length;r++)o[r]=n.charCodeAt(r);n=new Uint8Array(o),s.push(n)}return new Blob(s,{type:e})}(this.data),this.loaded=this.total=this.file.size):(this.data=null,this.file=e,this.total=this.file.size,this.loaded=0),i?this.fileName=i:this.file.name?this.fileName=this.file.name:(t=this.file.type.split("/"),n&&(t[0]=n),this.fileName=t.join(".")),this.uploaded=0,this.responseData=this.uploadTotal=null,this.status="created",this.abort=function(){this.changeStatus("abort")}}CKEDITOR.plugins.add("filetools",{beforeInit:function(t){t.uploadRepository=new e(t),t.on("fileUploadRequest",function(t){var e=t.data.fileLoader;e.xhr.open("POST",e.uploadUrl,!0),t.data.requestData.upload={file:e.file,name:e.fileName}},null,null,5),t.on("fileUploadRequest",function(t){var e=t.data.fileLoader,i=new FormData;for(var n in t=t.data.requestData){var o=t[n];"object"==typeof o&&o.file?i.append(n,o.file,o.name):i.append(n,o)}i.append("ckCsrfToken",CKEDITOR.tools.getCsrfToken()),e.xhr.send(i)},null,null,999),t.on("fileUploadResponse",function(e){var i=e.data.fileLoader,n=i.xhr,o=e.data;try{var t=JSON.parse(n.responseText);if(t.error&&t.error.message&&(o.message=t.error.message),t.uploaded)for(var r in t)o[r]=t[r];else e.cancel()}catch(t){o.message=i.lang.filetools.responseError,CKEDITOR.warn("filetools-response-error",{responseText:n.responseText}),e.cancel()}},null,null,999)}}),e.prototype={create:function(t,e){var i=this.loaders.length,n=new o(this.editor,t,e);return n.id=i,this.loaders[i]=n,this.fire("instanceCreated",n),n},isFinished:function(){for(var t=0;t<this.loaders.length;++t)if(!this.loaders[t].isFinished())return!1;return!0}},o.prototype={loadAndUpload:function(e,i){var n=this;this.once("loaded",function(t){t.cancel(),n.once("update",function(t){t.cancel()},null,null,0),n.upload(e,i)},null,null,0),this.load()},load:function(){var e=this,t=this.reader=new FileReader;e.changeStatus("loading"),this.abort=function(){e.reader.abort()},t.onabort=function(){e.changeStatus("abort")},t.onerror=function(){e.message=e.lang.filetools.loadError,e.changeStatus("error")},t.onprogress=function(t){e.loaded=t.loaded,e.update()},t.onload=function(){e.loaded=e.total,e.data=t.result,e.changeStatus("loaded")},t.readAsDataURL(this.file)},upload:function(t,e){var i=e||{};t?(this.uploadUrl=t,this.xhr=new XMLHttpRequest,this.attachRequestListeners(),this.editor.fire("fileUploadRequest",{fileLoader:this,requestData:i})&&this.changeStatus("uploading")):(this.message=this.lang.filetools.noUrlError,this.changeStatus("error"))},attachRequestListeners:function(){function t(){"error"!=r.status&&(r.message=r.lang.filetools.networkError,r.changeStatus("error"))}function e(){"abort"!=r.status&&r.changeStatus("abort")}var r=this,s=this.xhr;r.abort=function(){s.abort(),e()},s.onerror=t,s.onabort=e,s.upload?(s.upload.onprogress=function(t){t.lengthComputable&&(r.uploadTotal||(r.uploadTotal=t.total),r.uploaded=t.loaded,r.update())},s.upload.onerror=t,s.upload.onabort=e):(r.uploadTotal=r.total,r.update()),s.onload=function(){if(r.update(),"abort"!=r.status)if(r.uploaded=r.uploadTotal,s.status<200||299<s.status)r.message=r.lang.filetools["httpError"+s.status],r.message||(r.message=r.lang.filetools.httpError.replace("%1",s.status)),r.changeStatus("error");else{for(var t={fileLoader:r},e=["message","fileName","url"],i=r.editor.fire("fileUploadResponse",t),n=0;n<e.length;n++){var o=e[n];"string"==typeof t[o]&&(r[o]=t[o])}r.responseData=t,delete r.responseData.fileLoader,!1===i?r.changeStatus("error"):r.changeStatus("uploaded")}}},changeStatus:function(t){"error"!=(this.status=t)&&"abort"!=t&&"loaded"!=t&&"uploaded"!=t||(this.abort=function(){}),this.fire(t),this.update()},update:function(){this.fire("update")},isFinished:function(){return!!this.status.match(/^(?:loaded|uploaded|error|abort)$/)}},CKEDITOR.event.implementOn(e.prototype),CKEDITOR.event.implementOn(o.prototype);var a=/^data:(\S*?);base64,/;CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{uploadRepository:e,fileLoader:o,getUploadUrl:function(t,e){var i=CKEDITOR.tools.capitalize;return e&&t[e+"UploadUrl"]?t[e+"UploadUrl"]:t.uploadUrl?t.uploadUrl:e&&t["filebrowser"+i(e,1)+"UploadUrl"]?t["filebrowser"+i(e,1)+"UploadUrl"]+"&responseType=json":t.filebrowserUploadUrl?t.filebrowserUploadUrl+"&responseType=json":null},isTypeSupported:function(t,e){return!!t.type.match(e)}})}(),CKEDITOR.plugins.add("notificationaggregator",{requires:"notification"}),Di.prototype={createTask:function(t){t=t||{};var e,i=!this.notification;return i&&(this.notification=this._createNotification()),(e=this._addTask(t)).on("updated",this._onTaskUpdate,this),e.on("done",this._onTaskDone,this),e.on("canceled",function(){this._removeTask(e)},this),this.update(),i&&this.notification.show(),e},update:function(){this._updateNotification(),this.isFinished()&&this.fire("finished")},getPercentage:function(){return 0===this.getTaskCount()?1:this._doneWeights/this._totalWeights},isFinished:function(){return this.getDoneTaskCount()===this.getTaskCount()},getTaskCount:function(){return this._tasks.length},getDoneTaskCount:function(){return this._doneTasks},_updateNotification:function(){this.notification.update({message:this._getNotificationMessage(),progress:this.getPercentage()})},_getNotificationMessage:function(){var t=this.getTaskCount(),e={current:this.getDoneTaskCount(),max:t,percentage:Math.round(100*this.getPercentage())};return(1==t&&this._singularMessage?this._singularMessage:this._message).output(e)},_createNotification:function(){return new CKEDITOR.plugins.notification(this.editor,{type:"progress"})},_addTask:function(t){return t=new Ii(t.weight),this._tasks.push(t),this._totalWeights+=t._weight,t},_removeTask:function(t){var e=CKEDITOR.tools.indexOf(this._tasks,t);-1!==e&&(t._doneWeight&&(this._doneWeights-=t._doneWeight),this._totalWeights-=t._weight,this._tasks.splice(e,1),this.update())},_onTaskUpdate:function(t){this._doneWeights+=t.data,this.update()},_onTaskDone:function(){this._doneTasks+=1,this.update()}},CKEDITOR.event.implementOn(Di.prototype),Ii.prototype={done:function(){this.update(this._weight)},update:function(t){if(!this.isDone()&&!this.isCanceled()){var e=(t=Math.min(this._weight,t))-this._doneWeight;this._doneWeight=t,this.fire("updated",e),this.isDone()&&this.fire("done")}},cancel:function(){this.isDone()||this.isCanceled()||(this._isCanceled=!0,this.fire("canceled"))},isDone:function(){return this._weight===this._doneWeight},isCanceled:function(){return this._isCanceled}},CKEDITOR.event.implementOn(Ii.prototype),CKEDITOR.plugins.notificationAggregator=Di,CKEDITOR.plugins.notificationAggregator.task=Ii,CKEDITOR.plugins.add("uploadwidget",{requires:"widget,clipboard,filetools,notificationaggregator",init:function(t){t.filter.allow("*[!data-widget,!data-cke-upload-id]")}}),CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{addUploadWidget:function(l,c,t){var u=CKEDITOR.fileTools,d=l.uploadRepository,e=t.supportedTypes?10:20;t.fileToElement&&l.on("paste",function(t){t=t.data;var e,i,n=l.widgets.registered[c],o=t.dataTransfer,r=o.getFilesCount(),s=n.loadMethod||"loadAndUpload";if(!t.dataValue&&r)for(i=0;i<r;i++)if(e=o.getFile(i),!n.supportedTypes||u.isTypeSupported(e,n.supportedTypes)){var a=n.fileToElement(e);e=d.create(e),a&&(e[s](n.uploadUrl,n.additionalRequestParameters),CKEDITOR.fileTools.markElement(a,c,e.id),"loadAndUpload"!=s&&"upload"!=s||n.skipNotifications||CKEDITOR.fileTools.bindNotifications(l,e),t.dataValue+=a.getOuterHtml())}},null,null,e),CKEDITOR.tools.extend(t,{downcast:function(){return new CKEDITOR.htmlParser.text("")},init:function(){var e,i,n=this,o=this.wrapper.findOne("[data-cke-upload-id]").data("cke-upload-id"),r=d.loaders[o],s=CKEDITOR.tools.capitalize;r.on("update",function(t){n.wrapper&&n.wrapper.getParent()?(l.fire("lockSnapshot"),t="on"+s(r.status),"function"==typeof n[t]&&!1===n[t](r)||(i="cke_upload_"+r.status,n.wrapper&&i!=e&&(e&&n.wrapper.removeClass(e),n.wrapper.addClass(i),e=i),"error"!=r.status&&"abort"!=r.status||l.widgets.del(n)),l.fire("unlockSnapshot")):(l.editable().find('[data-cke-upload-id="'+o+'"]').count()||r.abort(),t.removeListener())}),r.update()},replaceWith:function(t,e){if(""===t.trim())l.widgets.del(this);else{var i,n,o=this==l.widgets.focused,r=l.editable(),s=l.createRange();o||(n=l.getSelection().createBookmarks()),s.setStartBefore(this.wrapper),s.setEndAfter(this.wrapper),o&&(i=s.createBookmark()),r.insertHtmlIntoRange(t,s,e),l.widgets.checkWidgets({initOnlyNew:!0}),l.widgets.destroy(this,!0),o?(s.moveToBookmark(i),s.select()):l.getSelection().selectBookmarks(n)}}}),l.widgets.add(c,t)},markElement:function(t,e,i){t.setAttributes({"data-cke-upload-id":i,"data-widget":e})},bindNotifications:function(e,t){var i,n=null;t.on("update",function(){!n&&t.uploadTotal&&((i=e._.uploadWidgetNotificaionAggregator)&&!i.isFinished()||(i=e._.uploadWidgetNotificaionAggregator=new CKEDITOR.plugins.notificationAggregator(e,e.lang.uploadwidget.uploadMany,e.lang.uploadwidget.uploadOne)).once("finished",function(){var t=i.getTaskCount();0===t?i.notification.hide():i.notification.update({message:1==t?e.lang.uploadwidget.doneOne:e.lang.uploadwidget.doneMany.replace("%1",t),type:"success",important:1})}),n=i.createTask({weight:t.uploadTotal})),n&&"uploading"==t.status&&n.update(t.uploaded)}),t.on("uploaded",function(){n&&n.done()}),t.on("error",function(){n&&n.cancel(),e.showNotification(t.message,"warning")}),t.on("abort",function(){n&&n.cancel(),e.showNotification(e.lang.uploadwidget.abort,"info")})}}),Vt=0,CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},init:function(u){if(CKEDITOR.plugins.clipboard.isFileApiSupported){var d=CKEDITOR.fileTools,h=d.getUploadUrl(u.config,"image");h&&(d.addUploadWidget(u,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif|bmp)/,uploadUrl:h,fileToElement:function(){var t=new CKEDITOR.dom.element("img");return t.setAttribute("src","data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs="),t},parts:{img:"img"},onUploading:function(t){this.parts.img.setAttribute("src",t.data)},onUploaded:function(t){var e=this.parts.img.$;this.replaceWith('<img src="'+t.url+'" width="'+(t.responseData.width||e.naturalWidth)+'" height="'+(t.responseData.height||e.naturalHeight)+'">')}}),u.on("paste",function(t){if(t.data.dataValue.match(/<img[\s\S]+data:/i)){t=t.data;var e,i,n,o=document.implementation.createHTMLDocument("");for((o=new CKEDITOR.dom.element(o.body)).data("cke-editable",1),o.appendHtml(t.dataValue),e=o.find("img"),n=0;n<e.count();n++){var r=(i=e.getItem(n)).getAttribute("src"),s=r&&"data:"==r.substring(0,5),a=null===i.data("cke-realelement");s&&a&&!i.data("cke-upload-id")&&!i.isReadOnly(1)&&(s=(s=r.match(/image\/([a-z]+?);/i))&&s[1]||"jpg",(r=u.uploadRepository.create(r,(l=s,c=void 0,c=[(c=new Date).getFullYear(),c.getMonth()+1,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds()],Vt+=1,"image-"+CKEDITOR.tools.array.map(c,Oi).join("")+"-"+Vt+"."+l))).upload(h),d.markElement(i,"uploadimage",r.id),d.bindNotifications(u,r))}t.dataValue=o.getHtml()}var l,c}))}}}),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(t){t.config.wsc_onFinish="function"==typeof t.config.wsc_onFinish?t.config.wsc_onFinish:function(){},t.config.wsc_onClose="function"==typeof t.config.wsc_onClose?t.config.wsc_onClose:function(){}},parseConfig:function(t){t.config.wsc_customerId=t.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",t.config.wsc_customDictionaryIds=t.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",t.config.wsc_userDictionaryName=t.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",t.config.wsc_customLoaderScript=t.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,t.config.wsc_interfaceLang=t.config.wsc_interfaceLang,CKEDITOR.config.wsc_cmd=t.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-d769233",CKEDITOR.config.wsc_removeGlobalVariable=!0},onLoad:function(t){"moono-lisa"==(CKEDITOR.skinName||t.config.skin)&&CKEDITOR.document.appendStyleSheet(this.path+"skins/"+CKEDITOR.skin.name+"/wsc.css")},init:function(t){var e=CKEDITOR.env;this.parseConfig(t),this.parseApi(t),t.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!(CKEDITOR.env.opera||CKEDITOR.env.air||document.domain!=window.location.hostname||e.ie&&(e.version<8||e.quirks))},void 0===t.plugins.scayt&&t.ui.addButton&&t.ui.addButton("SpellChecker",{label:t.lang.wsc.toolbar,click:function(t){var e=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?t.container.getText():t.document.getBody().getText();(e=e.replace(/\s/g,""))?t.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&CKEDITOR.env.version<=7?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),CKEDITOR.config.plugins="dialogui,dialog,about,a11yhelp,basicstyles,blockquote,notification,button,toolbar,clipboard,panel,floatpanel,menu,contextmenu,resize,elementspath,enterkey,entities,popup,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,wysiwygarea,image,indent,indentlist,fakeobjects,link,list,magicline,maximize,pastetext,pastefromword,removeformat,showborders,sourcearea,specialchar,menubutton,scayt,stylescombo,tab,table,tabletools,tableselection,undo,lineutils,widgetselection,widget,filetools,notificationaggregator,uploadwidget,uploadimage,wsc",CKEDITOR.config.skin="moono-lisa",CKEDITOR.env.hidpi?Ri("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,blockquote,168,,copy-rtl,192,,copy,216,,cut-rtl,240,,cut,264,,paste-rtl,288,,paste,312,,horizontalrule,336,,image,360,,indent-rtl,384,,indent,408,,outdent-rtl,432,,outdent,456,,anchor-rtl,480,,anchor,504,,link,528,,unlink,552,,bulletedlist-rtl,576,,bulletedlist,600,,numberedlist-rtl,624,,numberedlist,648,,maximize,672,,pastetext-rtl,696,,pastetext,720,,pastefromword-rtl,744,,pastefromword,768,,removeformat,792,,source-rtl,816,,source,840,,specialchar,864,,scayt,888,,table,912,,redo-rtl,936,,redo,960,,undo-rtl,984,,undo,1008,,spellchecker,1032,","icons_hidpi.png"):Ri("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,blockquote,168,auto,copy-rtl,192,auto,copy,216,auto,cut-rtl,240,auto,cut,264,auto,paste-rtl,288,auto,paste,312,auto,horizontalrule,336,auto,image,360,auto,indent-rtl,384,auto,indent,408,auto,outdent-rtl,432,auto,outdent,456,auto,anchor-rtl,480,auto,anchor,504,auto,link,528,auto,unlink,552,auto,bulletedlist-rtl,576,auto,bulletedlist,600,auto,numberedlist-rtl,624,auto,numberedlist,648,auto,maximize,672,auto,pastetext-rtl,696,auto,pastetext,720,auto,pastefromword-rtl,744,auto,pastefromword,768,auto,removeformat,792,auto,source-rtl,816,auto,source,840,auto,specialchar,864,auto,scayt,888,auto,table,912,auto,redo-rtl,936,auto,redo,960,auto,undo-rtl,984,auto,undo,1008,auto,spellchecker,1032,auto","icons.png"),CKEDITOR.lang.languages={af:1,sq:1,ar:1,az:1,eu:1,bn:1,bs:1,bg:1,ca:1,"zh-cn":1,zh:1,hr:1,cs:1,da:1,nl:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,et:1,fo:1,fi:1,fr:1,"fr-ca":1,gl:1,ka:1,de:1,"de-ch":1,el:1,gu:1,he:1,hi:1,hu:1,is:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lv:1,lt:1,mk:1,ms:1,mn:1,no:1,nb:1,oc:1,fa:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sr:1,"sr-latn":1,si:1,sk:1,sl:1,es:1,"es-mx":1,sv:1,tt:1,th:1,tr:1,ug:1,uk:1,vi:1,cy:1});function jt(t){var e=Wt(this);return e[t]||(e[t]=new Gt(t))}function Wt(t){return(t=t.getPrivate&&t.getPrivate()||t._||(t._={})).events||(t.events={})}function Gt(t){this.name=t,this.listeners=[]}function qt(){l=1}function Ut(){c=1}function Yt(t,e){return"#"==e[0]?String.fromCharCode(parseInt(e.slice(1),10)):y[e]}function Xt(t){t.collapsed=t.startContainer&&t.endContainer&&t.startContainer.equals(t.endContainer)&&t.startOffset==t.endOffset}function Zt(t,e,i,n,r){function o(t,e,i,n){var o=i?t.getPrevious():t.getNext();return n&&s||(l||n?e.append(t.clone(!0,r),i):(t.remove(),a&&e.append(t,i))),o}t.optimizeBookmark();var s=0===e,a=1==e,l=2==e;e=l||a;var c,u,d,h,p,f,g,m,v=t.startContainer,y=t.endContainer,b=t.startOffset,_=t.endOffset;if(l&&y.type==CKEDITOR.NODE_TEXT&&(v.equals(y)||v.type===CKEDITOR.NODE_ELEMENT&&v.getFirst().equals(y)))i.append(t.document.createText(y.substring(b,_)));else{y.type==CKEDITOR.NODE_TEXT?l?f=!0:y=y.split(_):0<y.getChildCount()?_>=y.getChildCount()?(y=y.getChild(_-1),u=!0):y=y.getChild(_):h=u=!0,v.type==CKEDITOR.NODE_TEXT?l?p=!0:v.split(b):0<v.getChildCount()?0===b?(v=v.getChild(b),c=!0):v=v.getChild(b-1):d=c=!0;for(var E,w,C,T=v.getParents(),x=y.getParents(),D=function(){var t,e,i,n=Math.min(T.length,x.length);for(t=0;t<n;t++)if(e=T[t],i=x[t],!e.equals(i))return t;return t-1}(),I=T.length-1,O=x.length-1,R=i,k=-1,S=D;S<=I;S++){for(C=(w=T[S]).getNext(),S!=I||w.equals(x[S])&&I<O?e&&(E=R.append(w.clone(0,r))):c?o(w,R,!1,d):p&&R.append(t.document.createText(w.substring(b)));C;){if(C.equals(x[S])){k=S;break}C=o(C,R)}R=E}for(R=i,S=D;S<=O;S++)if(C=(i=x[S]).getPrevious(),i.equals(T[S]))e&&(R=R.getChild(0));else{if(S!=O||i.equals(T[S])&&O<I?e&&(E=R.append(i.clone(0,r))):u?o(i,R,!1,h):f&&R.append(t.document.createText(i.substring(0,_))),k<S)for(;C;)C=o(C,R,!0);R=E}l||(g=D-1,m=d&&h&&!v.equals(y),g<I-1||g<O-1||m?(m?t.moveToPosition(y,CKEDITOR.POSITION_BEFORE_START):O==g+1&&u?t.moveToPosition(x[g],CKEDITOR.POSITION_BEFORE_END):t.moveToPosition(x[g+1],CKEDITOR.POSITION_BEFORE_START),n&&(g=T[g+1])&&g.type==CKEDITOR.NODE_ELEMENT&&((m=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',t.document)).insertAfter(g),g.mergeSiblings(!1),t.moveToBookmark({startNode:m}))):t.collapse(!0))}}function Qt(){var e=!1,i=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!0),o=CKEDITOR.dom.walker.bogus();return function(t){return!(!n(t)&&!i(t))||(o(t)&&!e?e=!0:!(t.type==CKEDITOR.NODE_TEXT&&(t.hasAscendant("pre")||CKEDITOR.tools.trim(t.getText()).length)||t.type==CKEDITOR.NODE_ELEMENT&&!t.is(M)))}}function Jt(t){return function(){var e;return this[t?"getPreviousNode":"getNextNode"](function(t){return!e&&P(t)&&(e=t),L(t)&&!(N(t)&&t.equals(e))})}}function te(t,e){for(;t;){if(t.type==CKEDITOR.NODE_ELEMENT){if("false"==t.getAttribute("contentEditable")&&!t.data("cke-editable"))return 0;if(t.is("html")||"true"==t.getAttribute("contentEditable")&&(t.contains(e)||t.equals(e)))break}t=t.getParent()}return 1}function ee(e){return function(t){return!(k(t)||S(t)||t.type==CKEDITOR.NODE_ELEMENT&&t.isEmptyInlineRemoveable()||e.is("table")&&t.is("caption"))}}function ie(t){var e,i=t.container,n=t.offset,o=n;if((e=(e=i).type!=CKEDITOR.NODE_ELEMENT||0===o||o==e.getChildCount()?0:e.getChild(o-1).type==CKEDITOR.NODE_TEXT&&e.getChild(o).type==CKEDITOR.NODE_TEXT)&&(n=(i=i.getChild(n-1)).getLength()),i.type==CKEDITOR.NODE_ELEMENT&&0<n){t:{for(e=i;n--;)if(0<=(o=e.getChild(n).getIndex(!0))){n=o;break t}n=-1}n+=1}if(i.type==CKEDITOR.NODE_TEXT){for(e=i,o=0;(e=e.getPrevious())&&e.type==CKEDITOR.NODE_TEXT;)o+=e.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;e=o,i.getText()?n+=e:(o=i.getPrevious(A),e?(n=e,i=o?o.getNext():i.getParent().getFirst()):(i=i.getParent(),n=o?o.getIndex(!0)+1:0))}t.container=i,t.offset=n}function ne(t,e){var i=e.getCustomData("cke-fillingChar");if(i){var n=t.container;i.equals(n)&&(t.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,t.offset<=0&&(t.offset=n.getIndex(),t.container=n.getParent()))}}function oe(t){arguments.length<1||(this.range=t,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function re(t,e,i,n){t:{null==n&&(n=function(t){var e=[];return t.forEach(function(t){if("true"==t.getAttribute("contenteditable"))return e.push(t),!1},CKEDITOR.NODE_ELEMENT,!0),e}(i));for(var o;o=n.shift();)if(o.getDtd().p){n={element:o,remaining:n};break t}n=null}return n?(o=CKEDITOR.filter.instances[n.element.data("cke-filter")])&&!o.check(e)?re(t,e,i,n.remaining):((e=new CKEDITOR.dom.range(n.element)).selectNodeContents(n.element),(e=e.createIterator()).enlargeBr=t.enlargeBr,e.enforceRealBlocks=t.enforceRealBlocks,e.activeFilter=e.filter=o,t._.nestedEditable={element:n.element,container:i,remaining:n.remaining,iterator:e},1):0}function se(t,e,i){return!!e&&((t=t.clone()).collapse(!i),t.checkBoundaryOfElement(e,i?CKEDITOR.START:CKEDITOR.END))}function ae(t){return B(t)&&H(t)}function le(t){var e=(t=t.data).getKeystroke(),i=this.keystrokes[e],n=this._.editor;return($=!1===n.fire("key",{keyCode:e,domEvent:t}))||(i&&($=!1!==n.execCommand(i,{from:"keystrokeHandler"})),$=$||!!this.blockedKeystrokes[e]),$&&t.preventDefault(!0),!$}function ce(t){$&&($=!1,t.data.preventDefault(!0))}function ue(){var t;(t=V[0])&&this.load(t.scriptUrl,t.callback,CKEDITOR,0)}function de(t){return!t.attributes["data-cke-survive"]&&("a"==t.name&&t.attributes.href||CKEDITOR.dtd.$removeEmpty[t.name])}function he(){this.rules=[]}function pe(t,e,i,n){var o,r;for(o in e)(r=t[o])||(r=t[o]=new he),r.add(e[o],i,n)}function fe(t,e){return(t=t[0])<(e=e[0])?-1:e<t?1:0}function ge(t,e,i,n){if(!CKEDITOR.env.isCompatible)return null;if((t=CKEDITOR.dom.element.get(t)).getEditor())throw'The editor instance "'+t.getEditor().name+'" is already attached to the provided element.';var o=new CKEDITOR.editor(e,t,n);return n==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.setStyle("visibility","hidden"),o._.required=t.hasAttribute("required"),t.removeAttribute("required")),i&&o.setData(i,null,!0),o.on("loaded",function(){!function(t){var e=t.name,i=t.element,n=t.elementMode,o=t.fire("uiSpace",{space:"top",html:""}).html,r=t.fire("uiSpace",{space:"bottom",html:""}).html,s=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(t.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(t.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>');e=CKEDITOR.dom.element.createFromHtml(s.output({id:t.id,name:e,langDir:t.lang.dir,langCode:t.langCode,voiceLabel:t.title,topHtml:o?'<span id="'+t.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+o+"</span>":"",contentId:t.ui.spaceId("contents"),bottomHtml:r?'<span id="'+t.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+r+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));n==CKEDITOR.ELEMENT_MODE_REPLACE?(i.hide(),e.insertAfter(i)):i.append(e),t.container=e,t.ui.contentsElement=t.ui.space("contents"),o&&t.ui.space("top").unselectable(),r&&t.ui.space("bottom").unselectable(),i=t.config.width,n=t.config.height,i&&e.setStyle("width",CKEDITOR.tools.cssLength(i)),n&&t.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(n)),e.disableContextMenu(),CKEDITOR.env.webkit&&e.on("focus",function(){t.focus()}),t.fireOnce("uiReady")}(o),n==CKEDITOR.ELEMENT_MODE_REPLACE&&o.config.autoUpdateElement&&t.$.form&&o._attachToForm(),o.setMode(o.config.startupMode,function(){o.resetDirty(),o.status="ready",o.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,o)})}),o.on("destroy",me),o}function me(){var t=this.container,e=this.element;t&&(t.clearCustomData(),t.remove()),e&&(e.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.show(),this._.required&&e.setAttribute("required","required")),delete this.element)}function ve(t){var e,i=t.editor,n=t.data.path,o=n.blockLimit,r=t.data.selection,s=r.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(r=function(t,e){if(t.isFake)return 0;var i=e.block||e.blockLimit,n=i&&i.getLast(be);if(!(!i||!i.isBlockBoundary()||n&&n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary()||i.is("pre")||i.getBogus()))return i}(r,n))&&(r.appendBogus(),e=CKEDITOR.env.ie),_e(i,n.block,o)&&s.collapsed&&!s.getCommonAncestor().isReadOnly()&&((n=s.clone()).enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),(o=new CKEDITOR.dom.walker(n)).guard=function(t){return!be(t)||t.type==CKEDITOR.NODE_COMMENT||t.isReadOnly()},!o.checkForward()||n.checkStartOfBlock()&&n.checkEndOfBlock())&&(i=s.fixBlock(!0,i.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(i=i.getFirst(be))&&i.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(i.getText()).match(/^(?:&nbsp;|\xa0)$/)&&i.remove(),e=1,t.cancel()),e&&s.select()}function ye(t){var e=t.data.getTarget();e.is("input")&&("submit"!=(e=e.getAttribute("type"))&&"reset"!=e||t.data.preventDefault())}function be(t){return it(t)&&nt(t)}function _e(t,e,i){return!1!==t.config.autoParagraph&&t.activeEnterMode!=CKEDITOR.ENTER_BR&&(t.editable().equals(i)&&!e||e&&"true"==e.getAttribute("contenteditable"))}function Ee(t){return t.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==t.config.autoParagraph&&(t.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function we(t){var e=t.editor;e.getSelection().scrollIntoView(),setTimeout(function(){e.fire("saveSnapshot")},0)}function Ce(t,e,i){var n=t.getCommonAncestor(e);for(e=t=i?e:t;(t=t.getParent())&&!n.equals(t)&&1==t.getChildCount();)e=t;e.remove()}function Te(t){return t.type==CKEDITOR.NODE_ELEMENT}function xe(t,e){var i,n=[],o=t.getChildren(),r=o.count(),s=0,a=ht[e],l=!t.is(ht.$inline)||t.is("br");for(l&&n.push(" ");s<r;s++)Te(i=o.getItem(s))&&!i.is(a)?n=n.concat(xe(i,e)):n.push(i);return l&&n.push(" "),n}function De(t){return Te(t.startContainer)&&t.startContainer.getChild(t.startOffset-1)}function Ie(t){return t&&Te(t)&&(t.is(ht.$removeEmpty)||t.is("a")&&!t.isBlockBoundary())}function Oe(t){return(t=new CKEDITOR.dom.walker(t)).guard=function(t,e){return!e&&(t.type==CKEDITOR.NODE_ELEMENT?t.is(CKEDITOR.dtd.$tableContent):void 0)},t.evaluator=function(t){return t.type==CKEDITOR.NODE_ELEMENT},t}function Re(t,e,i){return e=t.getDocument().createElement(e),t.append(e,i),e}function ke(t){for(var e,i=t.count();0<i--;)e=t.getItem(i),CKEDITOR.tools.trim(e.getHtml())||(e.appendBogus(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&e.getChildCount()&&e.getFirst().remove())}function Se(t){return(t=new CKEDITOR.dom.walker(t)).guard=function(t,e){return!e&&(t.type==CKEDITOR.NODE_ELEMENT?t.is(CKEDITOR.dtd.$list)||t.is(CKEDITOR.dtd.$listItem):void 0)},t.evaluator=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.is(CKEDITOR.dtd.$listItem)},t}function Ae(t,e){var i=t.getParent();i.is(CKEDITOR.dtd.$inline)&&t[e?"insertBefore":"insertAfter"](i)}function Me(t,e,i){Ae(e),Ae(i,1);for(var n;n=i.getNext();)n.insertAfter(e),e=n;ot(t)&&t.remove()}function Ne(t,e){var i=new CKEDITOR.dom.range(t);return i.setStartAfter(e.startNode),i.setEndBefore(e.endNode),i}function Ke(r){var s,a=[],t=new CKEDITOR.dom.walker(r),l=r.startPath().contains(mt),c=r.endPath().contains(mt),u={};return t.guard=function(t,e){if(t.type==CKEDITOR.NODE_ELEMENT){var i="visited_"+(e?"out":"in");if(t.getCustomData(i))return;CKEDITOR.dom.element.setMarker(u,t,i,1)}if(e&&l&&t.equals(l))(s=r.clone()).setEndAt(l,CKEDITOR.POSITION_BEFORE_END),a.push(s);else if(!e&&c&&t.equals(c))(s=r.clone()).setStartAt(c,CKEDITOR.POSITION_AFTER_START),a.push(s);else{if((i=!e)&&(i=t.type==CKEDITOR.NODE_ELEMENT&&t.is(mt)&&(!l||Le(t,l))&&(!c||Le(t,c))),!i&&(i=e))if(t.is(mt)){i=l&&l.getAscendant("table",!0);var n=c&&c.getAscendant("table",!0),o=t.getAscendant("table",!0);i=i&&i.contains(o)||n&&n.contains(o)}else i=void 0;i&&((s=r.clone()).selectNodeContents(t),a.push(s))}},t.lastForward(),CKEDITOR.dom.element.clearAllMarkers(u),a}function Le(t,e){var i=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,n=t.getPosition(e);return n!==CKEDITOR.POSITION_IDENTICAL&&0==(n&i)}function Pe(t,e){CKEDITOR.tools.extend(this,e,{editor:t,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:t._.notificationArea}),e.type||(this.type="info"),this.element=this._createElement(),t.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function Fe(t){var e=this;this.editor=t,this.notifications=[],this.element=this._createElement(),this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this),this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this),t.on("destroy",function(){e._removeListeners(),e.element.remove()})}function Be(t,e,i){return e.type||(e.type="auto"),!(i&&!1===t.fire("beforePaste",e)||!e.dataValue&&e.dataTransfer.isEmpty())&&(e.dataValue||(e.dataValue=""),CKEDITOR.env.gecko&&"drop"==e.method&&t.toolbox&&t.once("afterPaste",function(){t.toolbox.focus()}),t.fire("paste",e))}function He(h){function t(){var t,e=h.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){function i(t){h.readOnly&&"cut"==t.name||u.initPasteDataTransfer(t,h),t.data.preventDefault()}e.on("copy",i),e.on("cut",i),e.on("cut",function(){h.readOnly||h.extractSelectedHtml()},null,null,999)}e.on(u.mainPasteEvent,function(t){"beforepaste"==u.mainPasteEvent&&d||a(t)}),"beforepaste"==u.mainPasteEvent&&(e.on("paste",function(t){p||(n(),t.data.preventDefault(),a(t),r("paste"))}),e.on("contextmenu",o,null,null,0),e.on("beforepaste",function(t){!t.data||t.data.$.ctrlKey||t.data.$.shiftKey||o()},null,null,0)),e.on("beforecut",function(){d||s()}),e.attachListener(CKEDITOR.env.ie?e:h.document.getDocumentElement(),"mouseup",function(){t=setTimeout(function(){l()},0)}),h.on("destroy",function(){clearTimeout(t)}),e.on("keyup",l)}function e(t){return{type:t,canUndo:"cut"==t,startDisabled:!0,fakeKeystroke:"cut"==t?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){var e;"cut"==this.type&&s();var t=this.type;if(CKEDITOR.env.ie)e=r(t);else try{e=h.document.$.execCommand(t,!1,null)}catch(t){e=!1}return e||h.showNotification(h.lang.clipboard[this.type+"Error"]),e}}}function n(){p=1,setTimeout(function(){p=0},100)}function o(){d=1,setTimeout(function(){d=0},10)}function r(t){function e(){o=!0}var i=h.document,n=i.getBody(),o=!1;return n.on(t,e),7<CKEDITOR.env.version?i.$.execCommand(t):i.$.selection.createRange().execCommand(t),n.removeListener(t,e),o}function s(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var t,e,i,n=h.getSelection();n.getType()==CKEDITOR.SELECTION_ELEMENT&&(t=n.getSelectedElement())&&(e=n.getRanges()[0],(i=h.document.createText("")).insertBefore(t),e.setStartBefore(i),e.setEndAfter(t),n.selectRanges([e]),setTimeout(function(){t.getParent()&&(i.remove(),n.selectElement(t))},0))}}function i(t){if("wysiwyg"==h.mode)switch(t.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:t=h.editable(),n(),"paste"==u.mainPasteEvent&&t.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:h.fire("saveSnapshot"),setTimeout(function(){h.fire("saveSnapshot")},50)}}function a(t){var e={type:"auto",method:"paste",dataTransfer:u.initPasteDataTransfer(t)};e.dataTransfer.cacheData();var i=!1!==h.fire("beforePaste",e);i&&u.canClipboardApiBeTrusted(e.dataTransfer,h)?(t.data.preventDefault(),setTimeout(function(){Be(h,e)},0)):function(t,e){function i(t){t.cancel()}var n,o=h.document,r=h.editable();if(!o.getById("cke_pastebin")){var s=h.getSelection(),a=s.createBookmarks();CKEDITOR.env.ie&&s.root.fire("selectionchange");var l=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!r.is("body")||CKEDITOR.env.ie?"div":"body",o);l.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var c=0;o=o.getWindow();CKEDITOR.env.webkit?(r.append(l),l.addClass("cke_editable"),r.is("body")||(c=(c="static"!=r.getComputedStyle("position")?r:CKEDITOR.dom.element.get(r.$.offsetParent)).getDocumentPosition().y)):r.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(l),l.setStyles({position:"absolute",top:o.getScrollPosition().y-c+10+"px",width:"1px",height:Math.max(1,o.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&l.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(c=l.getParent().isReadOnly())?(l.setOpacity(0),l.setAttribute("contenteditable",!0)):l.setStyle("ltr"==h.config.contentsLangDirection?"left":"right","-10000px"),h.on("selectionChange",i,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(n=r.once("blur",i,null,null,-100)),c&&l.focus(),(c=new CKEDITOR.dom.range(l)).selectNodeContents(l);var u=c.select();CKEDITOR.env.ie&&(n=r.once("blur",function(){h.lockSelection(u)}));var d=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){var t;CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=d),n&&n.removeListener(),CKEDITOR.env.ie&&r.focus(),s.selectBookmarks(a),l.remove(),CKEDITOR.env.webkit&&(t=l.getFirst())&&t.is&&t.hasClass("Apple-style-span")&&(l=t),h.removeListener("selectionChange",i),e(l.getHtml())},0)}}(0,function(t){e.dataValue=t.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),i&&Be(h,e)})}function l(){if("wysiwyg"==h.mode){var t=c("paste");h.getCommand("cut").setState(c("cut")),h.getCommand("copy").setState(c("copy")),h.getCommand("paste").setState(t),h.fire("pasteState",t)}}function c(t){if(f&&t in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==t)return CKEDITOR.TRISTATE_OFF;var e=(t=h.getSelection()).getRanges();return t.getType()==CKEDITOR.SELECTION_NONE||1==e.length&&e[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var u=CKEDITOR.plugins.clipboard,d=0,p=0,f=0;function g(t,e,i,n,o){var r=h.lang.clipboard[e];h.addCommand(e,i),h.ui.addButton&&h.ui.addButton(t,{label:r,command:e,toolbar:"clipboard,"+n}),h.addMenuItems&&h.addMenuItem(e,{label:r,command:e,group:"clipboard",order:o})}h.on("key",i),h.on("contentDom",t),h.on("selectionChange",function(t){f=t.data.selection.getRanges()[0].checkReadOnly(),l()}),h.contextMenu&&h.contextMenu.addListener(function(t,e){return f=e.getRanges()[0].checkReadOnly(),{cut:c("cut"),copy:c("copy"),paste:c("paste")}}),g("Cut","cut",e("cut"),10,1),g("Copy","copy",e("copy"),20,4),g("Paste","paste",{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(i,t){function e(t,e){e=void 0===e||e,t?(t.method="paste",t.dataTransfer||(t.dataTransfer=u.initPasteDataTransfer()),Be(i,t,e)):o&&i.showNotification(a,"info",i.config.clipboard_notificationDuration),i.fire("afterCommandExec",{name:"paste",command:n,returnValue:!!t})}var n=this,o=void 0===(t=null!=t?t:{}).notification||t.notification,r=t.type,s=CKEDITOR.tools.keystrokeToString(i.lang.common.keyboard,i.getCommandKeystroke(this)),a="string"==typeof o?o:i.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+s.aria+'">'+s.display+"</kbd>");s="string"==typeof t?t:t.dataValue,r?i._.nextPasteType=r:delete i._.nextPasteType,"string"==typeof s?e({dataValue:s}):i.getClipboardData(e)}},30,8),h.getClipboardData=function(t,e){function i(t){t.removeListener(),t.cancel(),e(t.data)}e||(e=t,t=null),h.on("paste",i,null,null,0),!1===function(){if("paste"==u.mainPasteEvent)return h.fire("beforePaste",{type:"auto",method:"paste"}),!1;h.focus(),n();var t=h.focusManager;return t.lock(),h.editable().fire(u.mainPasteEvent)&&!r("paste")?(t.unlock(),!1):(t.unlock(),!0)}()&&(h.removeListener("paste",i),e(null))}}function ze(t,e){function i(t){return CKEDITOR.tools.repeat("</p><p>",~~(t/2))+(1==t%2?"<br>":"")}return(e=(e=e.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>")).replace(/<\/?[A-Z]+>/g,function(t){return t.toLowerCase()})).match(/^[^<]$/)?e:(CKEDITOR.env.webkit&&-1<e.indexOf("<div>")&&((e=e.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>")).match(/<div>(<br>|)<\/div>/)&&(e="<p>"+e.replace(/(<div>(<br>|)<\/div>)+/g,function(t){return i(t.split("</div><div>").length+1)})+"</p>"),e=(e=e.replace(/<\/div><div>/g,"<br>")).replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(e=e.replace(/^<br><br>$/,"<br>")),-1<e.indexOf("<br><br>")&&(e="<p>"+e.replace(/(<br>){2,}/g,function(t){return i(t.length/4)})+"</p>")),function(t,e){return t.enterMode==CKEDITOR.ENTER_BR?e=e.replace(/(<\/p><p>)+/g,function(t){return CKEDITOR.tools.repeat("<br>",t.length/7*2)}).replace(/<\/?p>/g,""):t.enterMode==CKEDITOR.ENTER_DIV&&(e=e.replace(/<(\/)?p>/g,"<$1div>")),e}(t,e))}function $e(){var e={};return{get:function(t){return"plain-text"==t?e.plainText||(e.plainText=new CKEDITOR.filter("br")):"semantic-content"==t?((t=e.semanticContent)||((t=new CKEDITOR.filter).allow({$1:{elements:function(){var t,e={};for(t in CKEDITOR.dtd)"$"!=t.charAt(0)&&"div"!=t&&"span"!=t&&(e[t]=1);return e}(),attributes:!0,styles:!1,classes:!1}}),t=e.semanticContent=t),t):t?new CKEDITOR.filter(t):null}}}function Ve(t,e,i){e=CKEDITOR.htmlParser.fragment.fromHtml(e);var n=new CKEDITOR.htmlParser.basicWriter;return i.applyTo(e,!0,!1,t.activeEnterMode),e.writeHtml(n),n.getHtml()}function je(t){t.data.preventDefault(),t.data.$.dataTransfer.dropEffect="none"}function We(s){var a=CKEDITOR.plugins.clipboard;s.on("contentDom",function(){function n(t,e,i){var n={$:t.data.$,target:t.data.getTarget()};e&&(n.dragRange=e),i&&(n.dropRange=i),!1===s.fire(t.name,n)&&t.data.preventDefault()}function e(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t.getChildCount()}var t=s.editable(),i=CKEDITOR.plugins.clipboard.getDropTarget(s),o=s.ui.space("top"),r=s.ui.space("bottom");a.preventDefaultDropOnElement(o),a.preventDefaultDropOnElement(r),t.attachListener(i,"dragstart",n),t.attachListener(s,"dragstart",a.resetDragDataTransfer,a,null,1),t.attachListener(s,"dragstart",function(t){a.initDragDataTransfer(t,s)},null,null,2),t.attachListener(s,"dragstart",function(){var t=a.dragRange=s.getSelection().getRanges()[0];CKEDITOR.env.ie&&CKEDITOR.env.version<10&&(a.dragStartContainerChildCount=t?e(t.startContainer):null,a.dragEndContainerChildCount=t?e(t.endContainer):null)},null,null,100),t.attachListener(i,"dragend",n),t.attachListener(s,"dragend",a.initDragDataTransfer,a,null,1),t.attachListener(s,"dragend",a.resetDragDataTransfer,a,null,100),t.attachListener(i,"dragover",function(t){if(CKEDITOR.env.edge)t.data.preventDefault();else{var e=t.data.getTarget();e&&e.is&&e.is("html")?t.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&t.data.$.dataTransfer.types.contains("Files")&&t.data.preventDefault()}}),t.attachListener(i,"drop",function(t){if(!t.data.$.defaultPrevented&&(t.data.preventDefault(),!(e=t.data.getTarget()).isReadOnly()||e.type==CKEDITOR.NODE_ELEMENT&&e.is("html"))){var e=a.getRangeAtDropPosition(t,s),i=a.dragRange;e&&n(t,i,e)}},null,null,9999),t.attachListener(s,"drop",a.initDragDataTransfer,a,null,1),t.attachListener(s,"drop",function(t){if(t=t.data){var e=t.dropRange,i=t.dragRange,n=t.dataTransfer;n.getTransferType(s)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){a.internalDrop(i,e,n,s)},0):n.getTransferType(s)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?function(t,e,i){e.select(),Be(s,{dataTransfer:i,method:"drop"},1),i.sourceEditor.fire("saveSnapshot"),i.sourceEditor.editable().extractHtmlFromRange(t),i.sourceEditor.getSelection().selectRanges([t]),i.sourceEditor.fire("saveSnapshot")}(i,e,n):function(t,e){t.select(),Be(s,{dataTransfer:e,method:"drop"},1),a.resetDragDataTransfer()}(e,n)}},null,null,9999)})}function Ge(t,n){var o={},r=[],s={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(t=t.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(t,e){var i=n?"&"+e+";":s[e];return o[i]=n?s[e]:"&"+e+";",r.push(i),""}),!n&&t){t=t.split(",");var e,i=document.createElement("div");for(i.innerHTML="&"+t.join(";&")+";",e=i.innerHTML,i=null,i=0;i<e.length;i++){var a=e.charAt(i);o[a]="&"+t[i]+";",r.push(a)}}return o.regex=r.join(n?"|":""),o}function qe(t,e){var i=[];if(!e)return t;for(var n in e)i.push(n+"="+encodeURIComponent(e[n]));return t+(-1!=t.indexOf("?")?"&":"?")+i.join("&")}function Ue(t){return(t+="").charAt(0).toUpperCase()+t.substr(1)}function Ye(){var t=(i=this.getDialog()).getParentEditor();t._.filebrowserSe=this;var e=t.config["filebrowser"+Ue(i.getName())+"WindowWidth"]||t.config.filebrowserWindowWidth||"80%",i=t.config["filebrowser"+Ue(i.getName())+"WindowHeight"]||t.config.filebrowserWindowHeight||"70%",n=this.filebrowser.params||{};n.CKEditor=t.name,n.CKEditorFuncNum=t._.filebrowserFn,n.langCode||(n.langCode=t.langCode),n=qe(this.filebrowser.url,n),t.popup(n,e,i,t.config.filebrowserWindowFeatures||t.config.fileBrowserWindowFeatures)}function Xe(){var t=this.getDialog();return t.getParentEditor()._.filebrowserSe=this,!(!t.getContentElement(this.for[0],this.for[1]).getInputElement().$.value||!t.getContentElement(this.for[0],this.for[1]).getAction())}function Ze(t,e,i,n){if(n&&n.length)for(var o,r=n.length;r--;)if("hbox"!=(o=n[r]).type&&"vbox"!=o.type&&"fieldset"!=o.type||Ze(t,e,i,o.children),o.filebrowser)if("string"==typeof o.filebrowser&&(o.filebrowser={action:"fileButton"==o.type?"QuickUpload":"Browse",target:o.filebrowser}),"Browse"==o.filebrowser.action){var s=o.filebrowser.url;void 0===s&&(void 0===(s=t.config["filebrowser"+Ue(e)+"BrowseUrl"])&&(s=t.config.filebrowserBrowseUrl)),s&&(o.onClick=Ye,o.filebrowser.url=s,o.hidden=!1)}else if("QuickUpload"==o.filebrowser.action&&o.for&&(void 0===(s=o.filebrowser.url)&&(void 0===(s=t.config["filebrowser"+Ue(e)+"UploadUrl"])&&(s=t.config.filebrowserUploadUrl)),s)){var a=o.onClick;o.onClick=function(t){var e=t.sender;return(!a||!1!==a.call(e,t))&&(!!Xe.call(e,t)&&(t=e.getDialog().getContentElement(this.for[0],this.for[1]).getInputElement(),(e=new CKEDITOR.dom.element(t.$.form))&&((t=e.$.elements.ckCsrfToken)?t=new CKEDITOR.dom.element(t):((t=new CKEDITOR.dom.element("input")).setAttributes({name:"ckCsrfToken",type:"hidden"}),e.append(t)),t.setAttribute("value",CKEDITOR.tools.getCsrfToken())),!0))},o.filebrowser.url=s,o.hidden=!1,l=t,c=i.getContents(o.for[0]).get(o.for[1]),u=o.filebrowser,d=void 0,(d=u.params||{}).CKEditor=l.name,d.CKEditorFuncNum=l._.filebrowserFn,d.langCode||(d.langCode=l.langCode),c.action=qe(u.url,d),c.filebrowser=u}var l,c,u,d}function Qe(t,e,i){if(-1===i.indexOf(";"))return(t=t.getContents(e).get(i).filebrowser)&&t.url;i=i.split(";");for(var n=0;n<i.length;n++)if(Qe(t,e,i[n]))return!0;return!1}function Je(t,e){var i=this._.filebrowserSe.getDialog(),n=this._.filebrowserSe.for,o=this._.filebrowserSe.filebrowser.onSelect;n&&i.getContentElement(n[0],n[1]).reset(),"function"==typeof e&&!1===e.call(this._.filebrowserSe)||o&&!1===o.call(this._.filebrowserSe,t,e)||("string"==typeof e&&e&&alert(e),t&&(i=(n=this._.filebrowserSe).getDialog(),n=n.filebrowser.target||null)&&(n=n.split(":"),(o=i.getContentElement(n[0],n[1]))&&(o.setValue(t),i.selectPage(n[0]))))}function ti(t){function e(i){var n=!1;s.attachListener(s,"keydown",function(){var t=o.getBody().getElementsByTag(i);if(!n){for(var e=0;e<t.count();e++)t.getItem(e).setCustomData("retain",!0);n=!0}},null,null,1),s.attachListener(s,"keyup",function(){var t=o.getElementsByTag(i);n&&(1==t.count()&&!t.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(t.getItem(0).getAttributes())&&t.getItem(0).remove(1),n=!1)})}var n=this.editor,o=t.document,i=o.body,r=o.getElementById("cke_actscrpt");r&&r.parentNode.removeChild(r),(r=o.getElementById("cke_shimscrpt"))&&r.parentNode.removeChild(r),(r=o.getElementById("cke_basetagscrpt"))&&r.parentNode.removeChild(r),i.contentEditable=!0,CKEDITOR.env.ie&&(i.hideFocus=!0,i.disabled=!0,i.removeAttribute("disabled")),delete this._.isLoadingData,this.$=i,o=new CKEDITOR.dom.document(o),this.setup(),this.fixInitialSelection();var s=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&o.getDocumentElement().addClass(o.$.compatMode),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&n.enterMode!=CKEDITOR.ENTER_P?e("p"):CKEDITOR.env.edge&&CKEDITOR.env.version<15&&n.enterMode!=CKEDITOR.ENTER_DIV&&e("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&o.getDocumentElement().on("mousedown",function(t){t.data.getTarget().is("html")&&setTimeout(function(){n.editable().focus()})}),function(i){function n(t){t.returnValue=!1}if(CKEDITOR.env.gecko)try{var t=i.document.$;t.execCommand("enableObjectResizing",!1,!i.config.disableObjectResizing),t.execCommand("enableInlineTableEditing",!1,!i.config.disableNativeTableHandles)}catch(t){}else CKEDITOR.env.ie&&CKEDITOR.env.version<11&&i.config.disableObjectResizing&&function(){var e;i.editable().attachListener(i,"selectionChange",function(){var t=i.getSelection().getSelectedElement();t&&(e&&(e.detachEvent("onresizestart",n),e=null),t.$.attachEvent("onresizestart",n),e=t.$)})}()}(n);try{n.document.$.execCommand("2D-position",!1,!0)}catch(t){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==n.document.$.compatMode)&&this.attachListener(this,"keydown",function(t){var e=t.data.getKeystroke();if(33==e||34==e)if(CKEDITOR.env.ie)setTimeout(function(){n.getSelection().scrollIntoView()},0);else if(n.window.$.innerHeight>this.$.offsetHeight){var i=n.createRange();i[33==e?"moveToElementEditStart":"moveToElementEditEnd"](this),i.select(),t.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(o,"blur",function(){try{o.$.selection.empty()}catch(t){}}),CKEDITOR.env.iOS&&this.attachListener(o,"touchend",function(){t.focus()}),(i=n.document.getElementsByTag("title").getItem(0)).data("cke-title",i.getText()),CKEDITOR.env.ie&&(n.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready"),n.fire("contentDom"),this._.isPendingFocus&&(n.focus(),this._.isPendingFocus=!1),setTimeout(function(){n.fire("dataReady")},0)},0,this)}function ei(t,e){if((e=e||t.getSelection().getSelectedElement())&&e.is("img")&&!e.data("cke-realelement")&&!e.isReadOnly())return e}function ii(t){var e=t.getStyle("float");return"inherit"!=e&&"none"!=e||(e=0),e=e||t.getAttribute("align")}function ni(e,t){var i,n;t.on("refresh",function(t){var e,i=[Dt];for(e in t.data.states)i.push(t.data.states[e]);this.setState(CKEDITOR.tools.search(i,It)?It:Dt)},t,null,100),t.on("exec",function(t){i=e.getSelection(),n=i.createBookmarks(1),t.data||(t.data={}),t.data.done=!1},t,null,0),t.on("exec",function(){e.forceNextSelectionCheck(),i.selectBookmarks(n)},t,null,100)}function oi(d){function t(t){for(var e=h.startContainer,i=h.endContainer;e&&!e.getParent().equals(t);)e=e.getParent();for(;i&&!i.getParent().equals(t);)i=i.getParent();if(!e||!i)return!1;for(var n=[],o=!1;!o;)e.equals(i)&&(o=!0),n.push(e),e=e.getNext();if(n.length<1)return!1;for(e=t.getParents(!0),i=0;i<e.length;i++)if(e[i].getName&&g[e[i].getName()]){t=e[i];break}e=p.isIndent?1:-1,i=n[0],n=n[n.length-1];var r=(o=CKEDITOR.plugins.list.listToArray(t,f))[n.getCustomData("listarray_index")].indent;for(i=i.getCustomData("listarray_index");i<=n.getCustomData("listarray_index");i++)if(o[i].indent+=e,0<e){for(var s=o[i].parent,a=i-1;0<=a;a--)if(o[a].indent===e){s=o[a].parent;break}o[i].parent=new CKEDITOR.dom.element(s.getName(),s.getDocument())}for(i=n.getCustomData("listarray_index")+1;i<o.length&&o[i].indent>r;i++)o[i].indent+=e;var l;if((e=CKEDITOR.plugins.list.arrayToList(o,f,null,d.config.enterMode,t.getDirection()),!p.isIndent)&&((l=t.getParent())&&l.is("li"))){var c,u=[];for(i=(n=e.listNode.getChildren()).count()-1;0<=i;i--)(c=n.getItem(i))&&c.is&&c.is("li")&&u.push(c)}if(e&&e.listNode.replace(t),u&&u.length)for(i=0;i<u.length;i++){for(c=t=u[i];(c=c.getNext())&&c.is&&c.getName()in g;)CKEDITOR.env.needsNbspFiller&&!t.getFirst(si)&&t.append(h.document.createText(" ")),t.append(c);t.insertAfter(l)}return e&&d.fire("contentDomInvalidated"),!0}for(var h,p=this,f=this.database,g=this.context,e=((e=d.getSelection())&&e.getRanges()).createIterator();h=e.getNextRange();){for(var i=h.getCommonAncestor();i&&(i.type!=CKEDITOR.NODE_ELEMENT||!g[i.getName()]);){if(d.editable().equals(i)){i=!1;break}i=i.getParent()}if(i||(i=h.startPath().contains(g))&&h.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),!i){var n=h.getEnclosedNode();n&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in g&&(h.setStartAt(n,CKEDITOR.POSITION_AFTER_START),h.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),i=n)}if(i&&h.startContainer.type==CKEDITOR.NODE_ELEMENT&&h.startContainer.getName()in g&&((n=new CKEDITOR.dom.walker(h)).evaluator=ri,h.startContainer=n.next()),i&&h.endContainer.type==CKEDITOR.NODE_ELEMENT&&h.endContainer.getName()in g&&((n=new CKEDITOR.dom.walker(h)).evaluator=ri,h.endContainer=n.previous()),i)return t(i)}return 0}function ri(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.is("li")}function si(t){return Ot(t)&&Rt(t)}function ai(t,e){var i=Nt.exec(t),n=Nt.exec(e);if(i){if(!i[2]&&"px"==n[2])return n[1];if("px"==i[2]&&!n[2])return n[1]+"px"}return e}function li(t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||"form"!=t.getName())return[];for(var e=[],i=["style","className"],n=0;n<i.length;n++){var o=t.$.elements.namedItem(i[n]);o&&(o=new CKEDITOR.dom.element(o),e.push([o,o.nextSibling]),o.remove())}return e}function ci(t,e){if(t&&t.type==CKEDITOR.NODE_ELEMENT&&"form"==t.getName()&&0<e.length)for(var i=e.length-1;0<=i;i--){var n=e[i][0],o=e[i][1];o?n.insertBefore(o):n.appendTo(t)}}function ui(t,e){var i=li(t),n={},o=t.$;return e||(n.class=o.className||"",o.className=""),n.inline=o.style.cssText||"",e||(o.style.cssText="position: static; overflow: visible"),ci(i),n}function di(t,e){var i=li(t),n=t.$;"class"in e&&(n.className=e.class),"inline"in e&&(n.style.cssText=e.inline),ci(i)}function hi(t){if(!t.editable().isInline()){var e,i=CKEDITOR.instances;for(e in i){var n=i[e];"wysiwyg"!=n.mode||n.readOnly||((n=n.document.getBody()).setAttribute("contentEditable",!1),n.setAttribute("contentEditable",!0))}t.editable().hasFocus&&(t.toolbox.focus(),t.focus())}}function pi(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var e,i=t.getSelection();if(e=new CKEDITOR.dom.elementPath(i.getCommonAncestor(),i.root).contains({td:1,th:1},1)){i=t.createRange();if((o=CKEDITOR.tools.tryThese(function(){var t=e.getParent().$.cells[e.$.cellIndex+(a?-1:1)];return t.parentNode.parentNode,t},function(){var t;return(t=(t=e.getParent()).getAscendant("table").$.rows[t.$.rowIndex+(a?-1:1)]).cells[a?t.cells.length-1:0]}))||a){if(!o)return!0;o=new CKEDITOR.dom.element(o),i.moveToElementEditStart(o),i.checkStartOfBlock()&&i.checkEndOfBlock()||i.selectNodeContents(o)}else{for(var n=e.getAscendant("table").$,o=e.getParent().$.cells,r=(n=new CKEDITOR.dom.element(n.insertRow(-1),t.document),0),s=o.length;r<s;r++)n.append(new CKEDITOR.dom.element(o[r],t.document).clone(!1,!1)).appendBogus();i.moveToElementEditStart(n)}return i.select(!0),!0}}return!1}}}function fi(t,e){function i(t){return!e||e.contains(t)&&t.getAscendant("table",!0).equals(e)}function n(t){0<o.length||t.type!=CKEDITOR.NODE_ELEMENT||!zt.test(t.getName())||t.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(r,t,"selected_cell",!0),o.push(t))}var o=[],r={};if(!t)return o;for(var s=t.getRanges(),a=0;a<s.length;a++){var l,c;if((l=s[a]).collapsed)(l=l.getCommonAncestor().getAscendant({td:1,th:1},!0))&&i(l)&&o.push(l);else for((l=new CKEDITOR.dom.walker(l)).guard=n;c=l.next();)c.type==CKEDITOR.NODE_ELEMENT&&c.is(CKEDITOR.dtd.table)||(c=c.getAscendant({td:1,th:1},!0))&&!c.getCustomData("selected_cell")&&i(c)&&(CKEDITOR.dom.element.setMarker(r,c,"selected_cell",!0),o.push(c))}return CKEDITOR.dom.element.clearAllMarkers(r),o}function gi(t,e){var i=(n=(s=$t(t)?t:fi(t))[0]).getAscendant("table"),n=n.getDocument(),o=(a=s[0].getParent()).$.rowIndex,r=(s=s[s.length-1]).getParent().$.rowIndex+s.$.rowSpan-1,s=new CKEDITOR.dom.element(i.$.rows[r]),a=(o=e?o:r,e?a:s);for(i=(s=CKEDITOR.tools.buildTableMap(i))[o],o=e?s[o-1]:s[o+1],s=s[0].length,n=n.createElement("tr"),r=0;i[r]&&r<s;r++){var l;1<i[r].rowSpan&&o&&i[r]==o[r]?(l=i[r]).rowSpan+=1:((l=new CKEDITOR.dom.element(i[r]).clone()).removeAttribute("rowSpan"),l.appendBogus(),n.append(l),l=l.$),r+=l.colSpan-1}return e?n.insertBefore(a):n.insertAfter(a),n}function mi(t){for(var e=t.getParent().$.cells,i=0,n=0;n<e.length;n++){var o=e[n];i=i+o.colSpan;if(o==t.$)break}return i-1}function vi(t,e){for(var i=e?1/0:0,n=0;n<t.length;n++){var o=mi(t[n]);(e?o<i:i<o)&&(i=o)}return i}function yi(t,e){for(var i=(o=$t(t)?t:fi(t))[0].getAscendant("table"),n=vi(o,1),o=vi(o),r=e?n:o,s=CKEDITOR.tools.buildTableMap(i),a=(i=[],n=[],o=[],s.length),l=0;l<a;l++)i.push(s[l][r]),n.push(e?s[l][r-1]:s[l][r+1]);for(l=0;l<a;l++)i[l]&&(1<i[l].colSpan&&n[l]==i[l]?(s=i[l]).colSpan+=1:((s=(r=new CKEDITOR.dom.element(i[l])).clone()).removeAttribute("colSpan"),s.appendBogus(),s[e?"insertBefore":"insertAfter"].call(s,r),o.push(s),s=s.$),l+=s.rowSpan-1);return o}function bi(t,e){var i=t.getStartElement().getAscendant({td:1,th:1},!0);if(i){var n=i.clone();n.appendBogus(),e?n.insertBefore(i):n.insertAfter(i)}}function _i(t,e){var i=t.getDocument(),n=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(n.focus(),i.focus()),(i=new CKEDITOR.dom.range(i))["moveToElementEdit"+(e?"End":"Start")](t)||(i.selectNodeContents(t),i.collapse(!e)),i.select(!0)}function Ei(t,e,i){if(t=t[e],void 0===i)return t;for(e=0;t&&e<t.length;e++){if(i.is&&t[e]==i.$)return e;if(e==i)return new CKEDITOR.dom.element(t[e])}return i.is?-1:null}function wi(t,e,i){var n,o,r=fi(t);if((e?1!=r.length:r.length<2)||(n=t.getCommonAncestor())&&n.type==CKEDITOR.NODE_ELEMENT&&n.is("table"))return!1;n=(t=r[0]).getAscendant("table");var s=CKEDITOR.tools.buildTableMap(n),a=s.length,l=s[0].length,c=t.getParent().$.rowIndex,u=Ei(s,c,t);if(e){var d;try{var h=parseInt(t.getAttribute("rowspan"),10)||1;o=parseInt(t.getAttribute("colspan"),10)||1,d=s["up"==e?c-h:"down"==e?c+h:c]["left"==e?u-o:"right"==e?u+o:u]}catch(t){return!1}if(!d||t.$==d)return!1;r["up"==e||"left"==e?"unshift":"push"](new CKEDITOR.dom.element(d))}e=t.getDocument();var p=c,f=(h=d=0,!i&&new CKEDITOR.dom.documentFragment(e)),g=0;for(e=0;e<r.length;e++){var m=(o=r[e]).getParent(),v=o.getFirst(),y=o.$.colSpan,b=o.$.rowSpan,_=Ei(s,m=m.$.rowIndex,o);g=g+y*b,h=Math.max(h,_-u+y);d=Math.max(d,m-c+b),i||((b=(y=o).getBogus())&&b.remove(),y.trim(),o.getChildren().count()&&(m==p||!v||v.isBlockBoundary&&v.isBlockBoundary({br:1})||(!(p=f.getLast(CKEDITOR.dom.walker.whitespaces(!0)))||p.is&&p.is("br")||f.append("br")),o.moveChildren(f)),e?o.remove():o.setHtml("")),p=m}if(i)return d*h==g;for(f.moveChildren(t),t.appendBogus(),l<=h?t.removeAttribute("rowSpan"):t.$.rowSpan=d,a<=d?t.removeAttribute("colSpan"):t.$.colSpan=h,e=(r=(i=new CKEDITOR.dom.nodeList(n.$.rows)).count())-1;0<=e;e--)(n=i.getItem(e)).$.cells.length||(n.remove(),r++);return t}function Ci(t,e){if(1<(i=fi(t)).length)return!1;if(e)return!0;var i,n,o=(l=(i=i[0]).getParent()).getAscendant("table"),r=Ei(c=CKEDITOR.tools.buildTableMap(o),u=l.$.rowIndex,i);if(1<(a=i.$.rowSpan)){n=Math.ceil(a/2);for(var s,a=Math.floor(a/2),l=u+n,c=(o=new CKEDITOR.dom.element(o.$.rows[l]),Ei(c,l)),u=(l=i.clone(),0);u<c.length;u++){if((s=c[u]).parentNode==o.$&&r<u){l.insertBefore(new CKEDITOR.dom.element(s));break}s=null}s||o.append(l)}else for(a=n=1,(o=l.clone()).insertAfter(l),o.append(l=i.clone()),s=Ei(c,u),r=0;r<s.length;r++)s[r].rowSpan++;return l.appendBogus(),i.$.rowSpan=n,l.$.rowSpan=a,1==n&&i.removeAttribute("rowSpan"),1==a&&l.removeAttribute("rowSpan"),l}function Ti(t,e){if(1<(i=fi(t)).length)return!1;if(e)return!0;var i,n=(i=i[0]).getParent(),o=n.getAscendant("table"),r=Ei(o=CKEDITOR.tools.buildTableMap(o),n.$.rowIndex,i);if(1<(s=i.$.colSpan))n=Math.ceil(s/2),s=Math.floor(s/2);else{for(var s=n=1,a=[],l=0;l<o.length;l++){var c=o[l];a.push(c[r]),1<c[r].rowSpan&&(l+=c[r].rowSpan-1)}for(o=0;o<a.length;o++)a[o].colSpan++}return(o=i.clone()).insertAfter(i),o.appendBogus(),i.$.colSpan=n,o.$.colSpan=s,1==n&&i.removeAttribute("colSpan"),1==s&&o.removeAttribute("colSpan"),o}function xi(t){return t.getName&&!t.hasAttribute("data-cke-temp")}function Di(t,e,i){this.editor=t,this.notification=null,this._message=new CKEDITOR.template(e),this._singularMessage=i?new CKEDITOR.template(i):null,this._tasks=[],this._doneTasks=this._doneWeights=this._totalWeights=0}function Ii(t){this._weight=t||1,this._doneWeight=0,this._isCanceled=!1}function Oi(t){return t<=9&&(t="0"+t),String(t)}function Ri(t,e){var i=CKEDITOR.getUrl("plugins/"+e);t=t.split(",");for(var n=0;n<t.length;n++)CKEDITOR.skin.icons[t[n]]={path:i,offset:-t[++n],bgsize:t[++n]}}}(),jQuery.fn.rotate=function(t,e){var i=this.get(0);if(i.angle=e?t:((null==i.angle?0:i.angle)+t)%360,0<=i.angle)var n=Math.PI*i.angle/180;else n=Math.PI*(360+i.angle)/180;var o=Math.cos(n),r=Math.sin(n);if(document.all&&!window.opera){(s=document.createElement("img")).src=i.src,s.height=i.height,s.width=i.width,s.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+o+",M12="+-r+",M21="+r+",M22="+o+",SizingMethod='auto expand')"}else{var s=document.createElement("canvas");i.oImage?s.oImage=i.oImage:(s.oImage=new Image,s.oImage.src=i.src),s.style.width=s.width=Math.abs(o*s.oImage.width)+Math.abs(r*s.oImage.height),s.style.height=s.height=Math.abs(o*s.oImage.height)+Math.abs(r*s.oImage.width);var a=s.getContext("2d");a.save(),n<=Math.PI/2?a.translate(r*s.oImage.height,0):n<=Math.PI?a.translate(s.width,-o*s.oImage.height):n<=1.5*Math.PI?a.translate(-o*s.oImage.width,s.height):a.translate(0,-r*s.oImage.width),a.rotate(n),a.drawImage(s.oImage,0,0,s.oImage.width,s.oImage.height),a.restore()}s.id=i.id,s.angle=i.angle,i.parentNode.replaceChild(s,i)},jQuery.fn.rotateRight=function(t){this.rotate(null==t?90:t)},jQuery.fn.rotateLeft=function(t){this.rotate(null==t?-90:-t)}+function(d){"use strict";function h(t,e){this.$element=d(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",d.proxy(this.keydown,this)),"hover"!=this.options.pause||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",d.proxy(this.pause,this)).on("mouseleave.bs.carousel",d.proxy(this.cycle,this))}function s(o){return this.each(function(){var t=d(this),e=t.data("bs.carousel"),i=d.extend({},h.DEFAULTS,t.data(),"object"==typeof o&&o),n="string"==typeof o?o:i.slide;e||t.data("bs.carousel",e=new h(this,i)),"number"==typeof o?e.to(o):n?e[n]():i.interval&&e.pause().cycle()})}h.VERSION="3.3.7",h.TRANSITION_DURATION=600,h.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},h.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},h.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(d.proxy(this.next,this),this.options.interval)),this},h.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},h.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(n)},h.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(i<t?"next":"prev",this.$items.eq(t))},h.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&d.support.transition&&(this.$element.trigger(d.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},h.prototype.next=function(){if(!this.sliding)return this.slide("next")},h.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},h.prototype.slide=function(t,e){var i=this.$element.find(".item.active"),n=e||this.getItemForDirection(t,i),o=this.interval,r="next"==t?"left":"right",s=this;if(n.hasClass("active"))return this.sliding=!1;var a=n[0],l=d.Event("slide.bs.carousel",{relatedTarget:a,direction:r});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=d(this.$indicators.children()[this.getItemIndex(n)]);c&&c.addClass("active")}var u=d.Event("slid.bs.carousel",{relatedTarget:a,direction:r});return d.support.transition&&this.$element.hasClass("slide")?(n.addClass(t),n[0].offsetWidth,i.addClass(r),n.addClass(r),i.one("bsTransitionEnd",function(){n.removeClass([t,r].join(" ")).addClass("active"),i.removeClass(["active",r].join(" ")),s.sliding=!1,setTimeout(function(){s.$element.trigger(u)},0)}).emulateTransitionEnd(h.TRANSITION_DURATION)):(i.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(u)),o&&this.cycle(),this}};var t=d.fn.carousel;d.fn.carousel=s,d.fn.carousel.Constructor=h,d.fn.carousel.noConflict=function(){return d.fn.carousel=t,this};function e(t){var e,i=d(this),n=d(i.attr("data-target")||(e=i.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var o=d.extend({},n.data(),i.data()),r=i.attr("data-slide-to");r&&(o.interval=!1),s.call(n,o),r&&n.data("bs.carousel").to(r),t.preventDefault()}}d(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),d(window).on("load",function(){d('[data-ride="carousel"]').each(function(){var t=d(this);s.call(t,t.data())})})}(jQuery),function(l,i,o,a){function c(t,e){this.settings=null,this.options=l.extend({},c.Defaults,e),this.$element=l(t),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},l.each(["onResize","onThrottledResize"],l.proxy(function(t,e){this._handlers[e]=l.proxy(this[e],this)},this)),l.each(c.Plugins,l.proxy(function(t,e){this._plugins[t.charAt(0).toLowerCase()+t.slice(1)]=new e(this)},this)),l.each(c.Workers,l.proxy(function(t,e){this._pipe.push({filter:e.filter,run:l.proxy(e.run,this)})},this)),this.setup(),this.initialize()}c.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:i,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},c.Width={Default:"default",Inner:"inner",Outer:"outer"},c.Type={Event:"event",State:"state"},c.Plugins={},c.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(t){t.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(t){var e=this.settings.margin||"",i=!this.settings.autoWidth,n=this.settings.rtl,o={width:"auto","margin-left":n?e:"","margin-right":n?"":e};i||this.$stage.children().css(o),t.css=o}},{filter:["width","items","settings"],run:function(t){var e=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,n=this._items.length,o=!this.settings.autoWidth,r=[];for(t.items={merge:!1,width:e};n--;)i=this._mergers[n],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,t.items.merge=1<i||t.items.merge,r[n]=o?e*i:this._items[n].width();this._widths=r}},{filter:["items","settings"],run:function(){var t=[],e=this._items,i=this.settings,n=Math.max(2*i.items,4),o=2*Math.ceil(e.length/2),r=i.loop&&e.length?i.rewind?n:Math.max(n,o):0,s="",a="";for(r/=2;0<r;)t.push(this.normalize(t.length/2,!0)),s+=e[t[t.length-1]][0].outerHTML,t.push(this.normalize(e.length-1-(t.length-1)/2,!0)),a=e[t[t.length-1]][0].outerHTML+a,r-=1;this._clones=t,l(s).addClass("cloned").appendTo(this.$stage),l(a).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var t=this.settings.rtl?1:-1,e=this._clones.length+this._items.length,i=-1,n=0,o=0,r=[];++i<e;)n=r[i-1]||0,o=this._widths[this.relative(i)]+this.settings.margin,r.push(n+o*t);this._coordinates=r}},{filter:["width","items","settings"],run:function(){var t=this.settings.stagePadding,e=this._coordinates,i={width:Math.ceil(Math.abs(e[e.length-1]))+2*t,"padding-left":t||"","padding-right":t||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(t){var e=this._coordinates.length,i=!this.settings.autoWidth,n=this.$stage.children();if(i&&t.items.merge)for(;e--;)t.css.width=this._widths[this.relative(e)],n.eq(e).css(t.css);else i&&(t.css.width=t.items.width,n.css(t.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(t){t.current=t.current?this.$stage.children().index(t.current):0,t.current=Math.max(this.minimum(),Math.min(this.maximum(),t.current)),this.reset(t.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var t,e,i,n,o=this.settings.rtl?1:-1,r=2*this.settings.stagePadding,s=this.coordinates(this.current())+r,a=s+this.width()*o,l=[];for(i=0,n=this._coordinates.length;i<n;i++)t=this._coordinates[i-1]||0,e=Math.abs(this._coordinates[i])+r*o,(this.op(t,"<=",s)&&this.op(t,">",a)||this.op(e,"<",s)&&this.op(e,">",a))&&l.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],c.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=l("<"+this.settings.stageElement+">",{class:this.settings.stageClass}).wrap(l("<div/>",{class:this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},c.prototype.initializeItems=function(){var t=this.$element.find(".owl-item");if(t.length)return this._items=t.get().map(function(t){return l(t)}),this._mergers=this._items.map(function(){return 1}),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},c.prototype.initialize=function(){var t,e,i;this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")&&(t=this.$element.find("img"),e=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:a,i=this.$element.children(e).width(),t.length&&i<=0&&this.preloadAutoWidthImages(t));this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},c.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},c.prototype.setup=function(){var e=this.viewport(),t=this.options.responsive,i=-1,n=null;t?(l.each(t,function(t){t<=e&&i<t&&(i=Number(t))}),"function"==typeof(n=l.extend({},this.options,t[i])).stagePadding&&(n.stagePadding=n.stagePadding()),delete n.responsive,n.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+i))):n=l.extend({},this.options),this.trigger("change",{property:{name:"settings",value:n}}),this._breakpoint=i,this.settings=n,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},c.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},c.prototype.prepare=function(t){var e=this.trigger("prepare",{content:t});return e.data||(e.data=l("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(t)),this.trigger("prepared",{content:e.data}),e.data},c.prototype.update=function(){for(var t=0,e=this._pipe.length,i=l.proxy(function(t){return this[t]},this._invalidated),n={};t<e;)(this._invalidated.all||0<l.grep(this._pipe[t].filter,i).length)&&this._pipe[t].run(n),t++;this._invalidated={},this.is("valid")||this.enter("valid")},c.prototype.width=function(t){switch(t=t||c.Width.Default){case c.Width.Inner:case c.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},c.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},c.prototype.onThrottledResize=function(){i.clearTimeout(this.resizeTimer),this.resizeTimer=i.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},c.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},c.prototype.registerEventHandlers=function(){l.support.transition&&this.$stage.on(l.support.transition.end+".owl.core",l.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(i,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",l.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",l.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",l.proxy(this.onDragEnd,this)))},c.prototype.onDragStart=function(t){var e=null;3!==t.which&&(e=l.support.transform?{x:(e=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===e.length?12:4],y:e[16===e.length?13:5]}:(e=this.$stage.position(),{x:this.settings.rtl?e.left+this.$stage.width()-this.width()+this.settings.margin:e.left,y:e.top}),this.is("animating")&&(l.support.transform?this.animate(e.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===t.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=l(t.target),this._drag.stage.start=e,this._drag.stage.current=e,this._drag.pointer=this.pointer(t),l(o).on("mouseup.owl.core touchend.owl.core",l.proxy(this.onDragEnd,this)),l(o).one("mousemove.owl.core touchmove.owl.core",l.proxy(function(t){var e=this.difference(this._drag.pointer,this.pointer(t));l(o).on("mousemove.owl.core touchmove.owl.core",l.proxy(this.onDragMove,this)),Math.abs(e.x)<Math.abs(e.y)&&this.is("valid")||(t.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},c.prototype.onDragMove=function(t){var e=null,i=null,n=null,o=this.difference(this._drag.pointer,this.pointer(t)),r=this.difference(this._drag.stage.start,o);this.is("dragging")&&(t.preventDefault(),this.settings.loop?(e=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-e,r.x=((r.x-e)%i+i)%i+e):(e=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),i=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),n=this.settings.pullDrag?-1*o.x/5:0,r.x=Math.max(Math.min(r.x,e+n),i+n)),this._drag.stage.current=r,this.animate(r.x))},c.prototype.onDragEnd=function(t){var e=this.difference(this._drag.pointer,this.pointer(t)),i=this._drag.stage.current,n=0<e.x^this.settings.rtl?"left":"right";l(o).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==e.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(i.x,0!==e.x?n:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=n,(3<Math.abs(e.x)||300<(new Date).getTime()-this._drag.time)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},c.prototype.closest=function(i,n){var o=-1,r=this.width(),s=this.coordinates();return this.settings.freeDrag||l.each(s,l.proxy(function(t,e){return"left"===n&&e-30<i&&i<e+30?o=t:"right"===n&&e-r-30<i&&i<e-r+30?o=t+1:this.op(i,"<",e)&&this.op(i,">",s[t+1]!==a?s[t+1]:e-r)&&(o="left"===n?t+1:t),-1===o},this)),this.settings.loop||(this.op(i,">",s[this.minimum()])?o=i=this.minimum():this.op(i,"<",s[this.maximum()])&&(o=i=this.maximum())),o},c.prototype.animate=function(t){var e=0<this.speed();this.is("animating")&&this.onTransitionEnd(),e&&(this.enter("animating"),this.trigger("translate")),l.support.transform3d&&l.support.transition?this.$stage.css({transform:"translate3d("+t+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):e?this.$stage.animate({left:t+"px"},this.speed(),this.settings.fallbackEasing,l.proxy(this.onTransitionEnd,this)):this.$stage.css({left:t+"px"})},c.prototype.is=function(t){return this._states.current[t]&&0<this._states.current[t]},c.prototype.current=function(t){if(t===a)return this._current;if(0===this._items.length)return a;if(t=this.normalize(t),this._current!==t){var e=this.trigger("change",{property:{name:"position",value:t}});e.data!==a&&(t=this.normalize(e.data)),this._current=t,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},c.prototype.invalidate=function(t){return"string"===l.type(t)&&(this._invalidated[t]=!0,this.is("valid")&&this.leave("valid")),l.map(this._invalidated,function(t,e){return e})},c.prototype.reset=function(t){(t=this.normalize(t))!==a&&(this._speed=0,this._current=t,this.suppress(["translate","translated"]),this.animate(this.coordinates(t)),this.release(["translate","translated"]))},c.prototype.normalize=function(t,e){var i=this._items.length,n=e?0:this._clones.length;return!this.isNumeric(t)||i<1?t=a:(t<0||i+n<=t)&&(t=((t-n/2)%i+i)%i+n/2),t},c.prototype.relative=function(t){return t-=this._clones.length/2,this.normalize(t,!0)},c.prototype.maximum=function(t){var e,i,n,o=this.settings,r=this._coordinates.length;if(o.loop)r=this._clones.length/2+this._items.length-1;else if(o.autoWidth||o.merge){if(e=this._items.length)for(i=this._items[--e].width(),n=this.$element.width();e--&&!((i+=this._items[e].width()+this.settings.margin)>n););r=e+1}else r=o.center?this._items.length-1:this._items.length-o.items;return t&&(r-=this._clones.length/2),Math.max(r,0)},c.prototype.minimum=function(t){return t?0:this._clones.length/2},c.prototype.items=function(t){return t===a?this._items.slice():(t=this.normalize(t,!0),this._items[t])},c.prototype.mergers=function(t){return t===a?this._mergers.slice():(t=this.normalize(t,!0),this._mergers[t])},c.prototype.clones=function(i){function n(t){return t%2==0?o+t/2:e-(t+1)/2}var e=this._clones.length/2,o=e+this._items.length;return i===a?l.map(this._clones,function(t,e){return n(e)}):l.map(this._clones,function(t,e){return t===i?n(e):null})},c.prototype.speed=function(t){return t!==a&&(this._speed=t),this._speed},c.prototype.coordinates=function(t){var e,i=1,n=t-1;return t===a?l.map(this._coordinates,l.proxy(function(t,e){return this.coordinates(e)},this)):(this.settings.center?(this.settings.rtl&&(i=-1,n=t+1),e=this._coordinates[t],e+=(this.width()-e+(this._coordinates[n]||0))/2*i):e=this._coordinates[n]||0,e=Math.ceil(e))},c.prototype.duration=function(t,e,i){return 0===i?0:Math.min(Math.max(Math.abs(e-t),1),6)*Math.abs(i||this.settings.smartSpeed)},c.prototype.to=function(t,e){var i=this.current(),n=null,o=t-this.relative(i),r=(0<o)-(o<0),s=this._items.length,a=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(o)>s/2&&(o+=-1*r*s),(n=(((t=i+o)-a)%s+s)%s+a)!==t&&n-o<=l&&0<n-o&&(i=n-o,t=n,this.reset(i))):t=this.settings.rewind?(t%(l+=1)+l)%l:Math.max(a,Math.min(l,t)),this.speed(this.duration(i,t,e)),this.current(t),this.isVisible()&&this.update()},c.prototype.next=function(t){t=t||!1,this.to(this.relative(this.current())+1,t)},c.prototype.prev=function(t){t=t||!1,this.to(this.relative(this.current())-1,t)},c.prototype.onTransitionEnd=function(t){if(t!==a&&(t.stopPropagation(),(t.target||t.srcElement||t.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},c.prototype.viewport=function(){var t;return this.options.responsiveBaseElement!==i?t=l(this.options.responsiveBaseElement).width():i.innerWidth?t=i.innerWidth:o.documentElement&&o.documentElement.clientWidth?t=o.documentElement.clientWidth:console.warn("Can not detect viewport width."),t},c.prototype.replace=function(t){this.$stage.empty(),this._items=[],t=t&&(t instanceof jQuery?t:l(t)),this.settings.nestedItemSelector&&(t=t.find("."+this.settings.nestedItemSelector)),t.filter(function(){return 1===this.nodeType}).each(l.proxy(function(t,e){e=this.prepare(e),this.$stage.append(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},c.prototype.add=function(t,e){var i=this.relative(this._current);e=e===a?this._items.length:this.normalize(e,!0),t=t instanceof jQuery?t:l(t),this.trigger("add",{content:t,position:e}),t=this.prepare(t),0===this._items.length||e===this._items.length?(0===this._items.length&&this.$stage.append(t),0!==this._items.length&&this._items[e-1].after(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[e].before(t),this._items.splice(e,0,t),this._mergers.splice(e,0,1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[i]&&this.reset(this._items[i].index()),this.invalidate("items"),this.trigger("added",{content:t,position:e})},c.prototype.remove=function(t){(t=this.normalize(t,!0))!==a&&(this.trigger("remove",{content:this._items[t],position:t}),this._items[t].remove(),this._items.splice(t,1),this._mergers.splice(t,1),this.invalidate("items"),this.trigger("removed",{content:null,position:t}))},c.prototype.preloadAutoWidthImages=function(t){t.each(l.proxy(function(t,e){this.enter("pre-loading"),e=l(e),l(new Image).one("load",l.proxy(function(t){e.attr("src",t.target.src),e.css("opacity",1),this.leave("pre-loading"),this.is("pre-loading")||this.is("initializing")||this.refresh()},this)).attr("src",e.attr("src")||e.attr("data-src")||e.attr("data-src-retina"))},this))},c.prototype.destroy=function(){for(var t in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),l(o).off(".owl.core"),!1!==this.settings.responsive&&(i.clearTimeout(this.resizeTimer),this.off(i,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[t].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},c.prototype.op=function(t,e,i){var n=this.settings.rtl;switch(e){case"<":return n?i<t:t<i;case">":return n?t<i:i<t;case">=":return n?t<=i:i<=t;case"<=":return n?i<=t:t<=i}},c.prototype.on=function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&t.attachEvent("on"+e,i)},c.prototype.off=function(t,e,i,n){t.removeEventListener?t.removeEventListener(e,i,n):t.detachEvent&&t.detachEvent("on"+e,i)},c.prototype.trigger=function(t,e,i,n,o){var r={item:{count:this._items.length,index:this.current()}},s=l.camelCase(l.grep(["on",t,i],function(t){return t}).join("-").toLowerCase()),a=l.Event([t,"owl",i||"carousel"].join(".").toLowerCase(),l.extend({relatedTarget:this},r,e));return this._supress[t]||(l.each(this._plugins,function(t,e){e.onTrigger&&e.onTrigger(a)}),this.register({type:c.Type.Event,name:t}),this.$element.trigger(a),this.settings&&"function"==typeof this.settings[s]&&this.settings[s].call(this,a)),a},c.prototype.enter=function(t){l.each([t].concat(this._states.tags[t]||[]),l.proxy(function(t,e){this._states.current[e]===a&&(this._states.current[e]=0),this._states.current[e]++},this))},c.prototype.leave=function(t){l.each([t].concat(this._states.tags[t]||[]),l.proxy(function(t,e){this._states.current[e]--},this))},c.prototype.register=function(i){if(i.type===c.Type.Event){if(l.event.special[i.name]||(l.event.special[i.name]={}),!l.event.special[i.name].owl){var e=l.event.special[i.name]._default;l.event.special[i.name]._default=function(t){return!e||!e.apply||t.namespace&&-1!==t.namespace.indexOf("owl")?t.namespace&&-1<t.namespace.indexOf("owl"):e.apply(this,arguments)},l.event.special[i.name].owl=!0}}else i.type===c.Type.State&&(this._states.tags[i.name]?this._states.tags[i.name]=this._states.tags[i.name].concat(i.tags):this._states.tags[i.name]=i.tags,this._states.tags[i.name]=l.grep(this._states.tags[i.name],l.proxy(function(t,e){return l.inArray(t,this._states.tags[i.name])===e},this)))},c.prototype.suppress=function(t){l.each(t,l.proxy(function(t,e){this._supress[e]=!0},this))},c.prototype.release=function(t){l.each(t,l.proxy(function(t,e){delete this._supress[e]},this))},c.prototype.pointer=function(t){var e={x:null,y:null};return(t=(t=t.originalEvent||t||i.event).touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t).pageX?(e.x=t.pageX,e.y=t.pageY):(e.x=t.clientX,e.y=t.clientY),e},c.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))},c.prototype.difference=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},l.fn.owlCarousel=function(e){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=l(this),i=t.data("owl.carousel");i||(i=new c(this,"object"==typeof e&&e),t.data("owl.carousel",i),l.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(t,e){i.register({type:c.Type.Event,name:e}),i.$element.on(e+".owl.carousel.core",l.proxy(function(t){t.namespace&&t.relatedTarget!==this&&(this.suppress([e]),i[e].apply(this,[].slice.call(arguments,1)),this.release([e]))},i))})),"string"==typeof e&&"_"!==e.charAt(0)&&i[e].apply(i,n)})},l.fn.owlCarousel.Constructor=c}(window.Zepto||window.jQuery,window,document),function(e,i){var n=function(t){this._core=t,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":e.proxy(function(t){t.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=e.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers)};n.Defaults={autoRefresh:!0,autoRefreshInterval:500},n.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=i.setInterval(e.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},n.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},n.prototype.destroy=function(){var t,e;for(t in i.clearInterval(this._interval),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoRefresh=n}(window.Zepto||window.jQuery,window,document),function(a,r){var e=function(t){this._core=t,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":a.proxy(function(t){if(t.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(t.property&&"position"==t.property.name||"initialized"==t.type)){var e=this._core.settings,i=e.center&&Math.ceil(e.items/2)||e.items,n=e.center&&-1*i||0,o=(t.property&&void 0!==t.property.value?t.property.value:this._core.current())+n,r=this._core.clones().length,s=a.proxy(function(t,e){this.load(e)},this);for(0<e.lazyLoadEager&&(i+=e.lazyLoadEager,e.loop&&(o-=e.lazyLoadEager,i++));n++<i;)this.load(r/2+this._core.relative(o)),r&&a.each(this._core.clones(this._core.relative(o)),s),o++}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={lazyLoad:!1,lazyLoadEager:0},e.prototype.load=function(t){var e=this._core.$stage.children().eq(t),i=e&&e.find(".owl-lazy");!i||-1<a.inArray(e.get(0),this._loaded)||(i.each(a.proxy(function(t,e){var i,n=a(e),o=1<r.devicePixelRatio&&n.attr("data-src-retina")||n.attr("data-src")||n.attr("data-srcset");this._core.trigger("load",{element:n,url:o},"lazy"),n.is("img")?n.one("load.owl.lazy",a.proxy(function(){n.css("opacity",1),this._core.trigger("loaded",{element:n,url:o},"lazy")},this)).attr("src",o):n.is("source")?n.one("load.owl.lazy",a.proxy(function(){this._core.trigger("loaded",{element:n,url:o},"lazy")},this)).attr("srcset",o):((i=new Image).onload=a.proxy(function(){n.css({"background-image":'url("'+o+'")',opacity:"1"}),this._core.trigger("loaded",{element:n,url:o},"lazy")},this),i.src=o)},this)),this._loaded.push(e.get(0)))},e.prototype.destroy=function(){var t,e;for(t in this.handlers)this._core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=e}(window.Zepto||window.jQuery,window,document),function(s,i){var n=function(t){this._core=t,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":s.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":s.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&"position"===t.property.name&&this.update()},this),"loaded.owl.lazy":s.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&t.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=s.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var e=this;s(i).on("load",function(){e._core.settings.autoHeight&&e.update()}),s(i).resize(function(){e._core.settings.autoHeight&&(null!=e._intervalId&&clearTimeout(e._intervalId),e._intervalId=setTimeout(function(){e.update()},250))})};n.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},n.prototype.update=function(){var t=this._core._current,e=t+this._core.settings.items,i=this._core.settings.lazyLoad,n=this._core.$stage.children().toArray().slice(t,e),o=[],r=0;s.each(n,function(t,e){o.push(s(e).height())}),(r=Math.max.apply(null,o))<=1&&i&&this._previousHeight&&(r=this._previousHeight),this._previousHeight=r,this._core.$stage.parent().height(r).addClass(this._core.settings.autoHeightClass)},n.prototype.destroy=function(){var t,e;for(t in this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},s.fn.owlCarousel.Constructor.Plugins.AutoHeight=n}(window.Zepto||window.jQuery,window,document),function(u,t,e){var i=function(t){this._core=t,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":u.proxy(function(t){t.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":u.proxy(function(t){t.namespace&&this._core.settings.video&&this.isInFullScreen()&&t.preventDefault()},this),"refreshed.owl.carousel":u.proxy(function(t){t.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":u.proxy(function(t){t.namespace&&"position"===t.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":u.proxy(function(t){if(t.namespace){var e=u(t.content).find(".owl-video");e.length&&(e.css("display","none"),this.fetch(e,u(t.content)))}},this)},this._core.options=u.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",u.proxy(function(t){this.play(t)},this))};i.Defaults={video:!1,videoHeight:!1,videoWidth:!1},i.prototype.fetch=function(t,e){var i=t.attr("data-vimeo-id")?"vimeo":t.attr("data-vzaar-id")?"vzaar":"youtube",n=t.attr("data-vimeo-id")||t.attr("data-youtube-id")||t.attr("data-vzaar-id"),o=t.attr("data-width")||this._core.settings.videoWidth,r=t.attr("data-height")||this._core.settings.videoHeight,s=t.attr("href");if(!s)throw new Error("Missing video URL.");if(-1<(n=s.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu"))i="youtube";else if(-1<n[3].indexOf("vimeo"))i="vimeo";else{if(!(-1<n[3].indexOf("vzaar")))throw new Error("Video URL not supported.");i="vzaar"}n=n[6],this._videos[s]={type:i,id:n,width:o,height:r},e.attr("data-video",s),this.thumbnail(t,this._videos[s])},i.prototype.thumbnail=function(e,t){function i(t){'<div class="owl-video-play-icon"></div>',n=c.lazyLoad?u("<div/>",{class:"owl-video-tn "+l,srcType:t}):u("<div/>",{class:"owl-video-tn",style:"opacity:1;background-image:url("+t+")"}),e.after(n),e.after('<div class="owl-video-play-icon"></div>')}var n,o,r=t.width&&t.height?"width:"+t.width+"px;height:"+t.height+"px;":"",s=e.find("img"),a="src",l="",c=this._core.settings;if(e.wrap(u("<div/>",{class:"owl-video-wrapper",style:r})),this._core.settings.lazyLoad&&(a="data-src",l="owl-lazy"),s.length)return i(s.attr(a)),s.remove(),!1;"youtube"===t.type?(o="//img.youtube.com/vi/"+t.id+"/hqdefault.jpg",i(o)):"vimeo"===t.type?u.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+t.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){o=t[0].thumbnail_large,i(o)}}):"vzaar"===t.type&&u.ajax({type:"GET",url:"//vzaar.com/api/videos/"+t.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){o=t.framegrab_url,i(o)}})},i.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},i.prototype.play=function(t){var e,i=u(t.target).closest("."+this._core.settings.itemClass),n=this._videos[i.attr("data-video")],o=n.width||"100%",r=n.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),i=this._core.items(this._core.relative(i.index())),this._core.reset(i.index()),(e=u('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>')).attr("height",r),e.attr("width",o),"youtube"===n.type?e.attr("src","//www.youtube.com/embed/"+n.id+"?autoplay=1&rel=0&v="+n.id):"vimeo"===n.type?e.attr("src","//player.vimeo.com/video/"+n.id+"?autoplay=1"):"vzaar"===n.type&&e.attr("src","//view.vzaar.com/"+n.id+"/player?autoplay=true"),u(e).wrap('<div class="owl-video-frame" />').insertAfter(i.find(".owl-video")),this._playing=i.addClass("owl-video-playing"))},i.prototype.isInFullScreen=function(){var t=e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement;return t&&u(t).parent().hasClass("owl-video-frame")},i.prototype.destroy=function(){var t,e;for(t in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},u.fn.owlCarousel.Constructor.Plugins.Video=i}(window.Zepto||window.jQuery,window,document),function(s){var e=function(t){this.core=t,this.core.options=s.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=void 0,this.next=void 0,this.handlers={"change.owl.carousel":s.proxy(function(t){t.namespace&&"position"==t.property.name&&(this.previous=this.core.current(),this.next=t.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":s.proxy(function(t){t.namespace&&(this.swapping="translated"==t.type)},this),"translate.owl.carousel":s.proxy(function(t){t.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&s.support.animation&&s.support.transition){this.core.speed(0);var t,e=s.proxy(this.clear,this),i=this.core.$stage.children().eq(this.previous),n=this.core.$stage.children().eq(this.next),o=this.core.settings.animateIn,r=this.core.settings.animateOut;this.core.current()!==this.previous&&(r&&(t=this.core.coordinates(this.previous)-this.core.coordinates(this.next),i.one(s.support.animation.end,e).css({left:t+"px"}).addClass("animated owl-animated-out").addClass(r)),o&&n.one(s.support.animation.end,e).addClass("animated owl-animated-in").addClass(o))}},e.prototype.clear=function(t){s(t.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},e.prototype.destroy=function(){var t,e;for(t in this.handlers)this.core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},s.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(n,o,e){var i=function(t){this._core=t,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":n.proxy(function(t){t.namespace&&"settings"===t.property.name?this._core.settings.autoplay?this.play():this.stop():t.namespace&&"position"===t.property.name&&this._paused&&(this._time=0)},this),"initialized.owl.carousel":n.proxy(function(t){t.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":n.proxy(function(t,e,i){t.namespace&&this.play(e,i)},this),"stop.owl.autoplay":n.proxy(function(t){t.namespace&&this.stop()},this),"mouseover.owl.autoplay":n.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":n.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":n.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":n.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=n.extend({},i.Defaults,this._core.options)};i.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},i.prototype._next=function(t){this._call=o.setTimeout(n.proxy(this._next,this,t),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||e.hidden||this._core.next(t||this._core.settings.autoplaySpeed)},i.prototype.read=function(){return(new Date).getTime()-this._time},i.prototype.play=function(t,e){var i;this._core.is("rotating")||this._core.enter("rotating"),t=t||this._core.settings.autoplayTimeout,i=Math.min(this._time%(this._timeout||t),t),this._paused?(this._time=this.read(),this._paused=!1):o.clearTimeout(this._call),this._time+=this.read()%t-i,this._timeout=t,this._call=o.setTimeout(n.proxy(this._next,this,e),t-i)},i.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,o.clearTimeout(this._call),this._core.leave("rotating"))},i.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,o.clearTimeout(this._call))},i.prototype.destroy=function(){var t,e;for(t in this.stop(),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},n.fn.owlCarousel.Constructor.Plugins.autoplay=i}(window.Zepto||window.jQuery,window,document),function(r){"use strict";var e=function(t){this._core=t,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":r.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+r(t.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":r.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,0,this._templates.pop())},this),"remove.owl.carousel":r.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,1)},this),"changed.owl.carousel":r.proxy(function(t){t.namespace&&"position"==t.property.name&&this.draw()},this),"initialized.owl.carousel":r.proxy(function(t){t.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":r.proxy(function(t){t.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=r.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var t,i=this._core.settings;for(t in this._controls.$relative=(i.navContainer?r(i.navContainer):r("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=r("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",r.proxy(function(t){this.prev(i.navSpeed)},this)),this._controls.$next=r("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",r.proxy(function(t){this.next(i.navSpeed)},this)),i.dotsData||(this._templates=[r('<button role="button">').addClass(i.dotClass).append(r("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?r(i.dotsContainer):r("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",r.proxy(function(t){var e=r(t.target).parent().is(this._controls.$absolute)?r(t.target).index():r(t.target).parent().index();t.preventDefault(),this.to(e,i.dotsSpeed)},this)),this._overrides)this._core[t]=r.proxy(this[t],this)},e.prototype.destroy=function(){var t,e,i,n,o;for(t in o=this._core.settings,this._handlers)this.$element.off(t,this._handlers[t]);for(e in this._controls)"$relative"===e&&o.navContainer?this._controls[e].html(""):this._controls[e].remove();for(n in this.overides)this._core[n]=this._overrides[n];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},e.prototype.update=function(){var t,e,i=this._core.clones().length/2,n=i+this._core.items().length,o=this._core.maximum(!0),r=this._core.settings,s=r.center||r.autoWidth||r.dotsData?1:r.dotsEach||r.items;if("page"!==r.slideBy&&(r.slideBy=Math.min(r.slideBy,r.items)),r.dots||"page"==r.slideBy)for(this._pages=[],t=i,e=0;t<n;t++){if(s<=e||0===e){if(this._pages.push({start:Math.min(o,t-i),end:t-i+s-1}),Math.min(o,t-i)===o)break;e=0,0}e+=this._core.mergers(this._core.relative(t))}},e.prototype.draw=function(){var t,e=this._core.settings,i=this._core.items().length<=e.items,n=this._core.relative(this._core.current()),o=e.loop||e.rewind;this._controls.$relative.toggleClass("disabled",!e.nav||i),e.nav&&(this._controls.$previous.toggleClass("disabled",!o&&n<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!o&&n>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!e.dots||i),e.dots&&(t=this._pages.length-this._controls.$absolute.children().length,e.dotsData&&0!=t?this._controls.$absolute.html(this._templates.join("")):0<t?this._controls.$absolute.append(new Array(1+t).join(this._templates[0])):t<0&&this._controls.$absolute.children().slice(t).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(r.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(t){var e=this._core.settings;t.page={index:r.inArray(this.current(),this._pages),count:this._pages.length,size:e&&(e.center||e.autoWidth||e.dotsData?1:e.dotsEach||e.items)}},e.prototype.current=function(){var i=this._core.relative(this._core.current());return r.grep(this._pages,r.proxy(function(t,e){return t.start<=i&&t.end>=i},this)).pop()},e.prototype.getPosition=function(t){var e,i,n=this._core.settings;return"page"==n.slideBy?(e=r.inArray(this.current(),this._pages),i=this._pages.length,t?++e:--e,e=this._pages[(e%i+i)%i].start):(e=this._core.relative(this._core.current()),i=this._core.items().length,t?e+=n.slideBy:e-=n.slideBy),e},e.prototype.next=function(t){r.proxy(this._overrides.to,this._core)(this.getPosition(!0),t)},e.prototype.prev=function(t){r.proxy(this._overrides.to,this._core)(this.getPosition(!1),t)},e.prototype.to=function(t,e,i){var n;!i&&this._pages.length?(n=this._pages.length,r.proxy(this._overrides.to,this._core)(this._pages[(t%n+n)%n].start,e)):r.proxy(this._overrides.to,this._core)(t,e)},r.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(n,o){"use strict";var e=function(t){this._core=t,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":n.proxy(function(t){t.namespace&&"URLHash"===this._core.settings.startPosition&&n(o).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":n.proxy(function(t){if(t.namespace){var e=n(t.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!e)return;this._hashes[e]=t.content}},this),"changed.owl.carousel":n.proxy(function(t){if(t.namespace&&"position"===t.property.name){var i=this._core.items(this._core.relative(this._core.current())),e=n.map(this._hashes,function(t,e){return t===i?e:null}).join();if(!e||o.location.hash.slice(1)===e)return;o.location.hash=e}},this)},this._core.options=n.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers),n(o).on("hashchange.owl.navigation",n.proxy(function(t){var e=o.location.hash.substring(1),i=this._core.$stage.children(),n=this._hashes[e]&&i.index(this._hashes[e]);void 0!==n&&n!==this._core.current()&&this._core.to(this._core.relative(n),!1,!0)},this))};e.Defaults={URLhashListener:!1},e.prototype.destroy=function(){var t,e;for(t in n(o).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},n.fn.owlCarousel.Constructor.Plugins.Hash=e}(window.Zepto||window.jQuery,window,document),function(o,t,e,r){function i(t,i){var n=!1,e=t.charAt(0).toUpperCase()+t.slice(1);return o.each((t+" "+a.join(e+" ")+e).split(" "),function(t,e){if(s[e]!==r)return n=!i||e,!1}),n}function n(t){return i(t,!0)}var s=o("<support>").get(0).style,a="Webkit Moz O ms".split(" "),l={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},c=function(){return!!i("transform")},u=function(){return!!i("perspective")},d=function(){return!!i("animation")};!function(){return!!i("transition")}()||(o.support.transition=new String(n("transition")),o.support.transition.end=l.transition.end[o.support.transition]),d()&&(o.support.animation=new String(n("animation")),o.support.animation.end=l.animation.end[o.support.animation]),c()&&(o.support.transform=new String(n("transform")),o.support.transform3d=u())}(window.Zepto||window.jQuery,window,document),function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Tagify=e()}(this,function(){"use strict";function d(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(i,!0).forEach(function(t){a(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function t(t,e){if(!t)return console.warn("Tagify: ","invalid input element ",t),this;this.applySettings(t,e),this.state={},this.value=[],this.listeners={},this.DOM={},this.extend(this,new this.EventDispatcher(this)),this.build(t),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),t.autofocus&&this.DOM.input.focus()}return t.prototype={isIE:window.document.documentMode,TEXTS:{empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},DEFAULTS:{delimiters:",",pattern:null,maxTags:1/0,callbacks:{},addTagOnBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,keepInvalidTags:!1,autoComplete:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,editTags:2,transformTag:function(){},dropdown:{classname:"",enabled:2,maxItems:10,itemTemplate:"",fuzzySearch:!0,highlightFirst:!1,closeOnSelect:!0}},templates:{wrapper:function(t,e){return'<tags class="tagify '.concat(e.mode?"tagify--"+e.mode:""," ").concat(t.className,'"\n                          ').concat(e.readonly?'readonly aria-readonly="true"':'aria-haspopup="true" aria-expanded="false"','\n                          role="tagslist">\n                <span contenteditable data-placeholder="').concat(e.placeholder||"&#8203;",'" aria-placeholder="').concat(e.placeholder||"",'"\n                      class="tagify__input"\n                      role="textbox"\n                      aria-multiline="false"></span>\n            </tags>')},tag:function(t,e){return"<tag title='".concat(e.title||t,"'\n                         contenteditable='false'\n                         spellcheck='false'\n                         class='tagify__tag ").concat(e.class?e.class:"","'\n                         ").concat(this.getAttributes(e),">\n                <x title='' class='tagify__tag__removeBtn' role='button' aria-label='remove tag'></x>\n                <div>\n                    <span class='tagify__tag-text'>").concat(t,"</span>\n                </div>\n            </tag>")},dropdownItem:function(t){var e=(t.value||t).replace(/`|'/g,"&#39;");return"<div ".concat(this.getAttributes(t),"\n                         class='tagify__dropdown__item ").concat(t.class?t.class:"",'\'\n                         tabindex="0"\n                         role="menuitem"\n                         aria-labelledby="dropdown-label">').concat(e,"</div>")}},customEventsList:["click","add","remove","invalid","input","edit"],applySettings:function(t,e){var i=t.getAttribute("data-whitelist"),n=t.getAttribute("data-blacklist");if(this.DEFAULTS.templates=this.templates,this.DEFAULTS.dropdown.itemTemplate=this.templates.dropdownItem,this.settings=this.extend({},this.DEFAULTS,e),this.settings.readonly=t.hasAttribute("readonly"),this.settings.placeholder=t.getAttribute("placeholder")||this.settings.placeholder||"",this.isIE&&(this.settings.autoComplete=!1),n&&(n=n.split(this.settings.delimiters))instanceof Array&&(this.settings.blacklist=n),i&&(i=i.split(this.settings.delimiters))instanceof Array&&(this.settings.whitelist=i),t.pattern)try{this.settings.pattern=new RegExp(t.pattern)}catch(t){}if(this.settings&&this.settings.delimiters)try{this.settings.delimiters=new RegExp(this.settings.delimiters,"g")}catch(t){}"select"==this.settings.mode&&(this.settings.dropdown.enabled=0)},parseHTML:function(t){return(new DOMParser).parseFromString(t.trim(),"text/html").body.firstElementChild},escapeHTML:function(t){var e=document.createTextNode(t),i=document.createElement("p");return i.appendChild(e),i.innerHTML},build:function(t){var e=this.DOM,i=this.settings.templates.wrapper(t,this.settings);e.originalInput=t,e.scope=this.parseHTML(i),e.input=e.scope.querySelector("[contenteditable]"),t.parentNode.insertBefore(e.scope,t),0<=this.settings.dropdown.enabled&&this.dropdown.init.call(this)},destroy:function(){this.DOM.scope.parentNode.removeChild(this.DOM.scope),this.dropdown.hide.call(this,!0)},loadOriginalValues:function(t){var e=0<arguments.length&&void 0!==t?t:this.DOM.originalInput.value;if(e){this.removeAllTags();try{e=JSON.parse(e)}catch(t){}"mix"==this.settings.mode?this.parseMixTags(e):this.addTags(e).forEach(function(t){return t&&t.classList.add("tagify--noAnim")})}},extend:function(t,e,i){function n(t){var e=Object.prototype.toString.call(t).split(" ")[1].slice(0,-1);return t===Object(t)&&"Array"!=e&&"Function"!=e&&"RegExp"!=e&&"HTMLUnknownElement"!=e}function o(t,e){for(var i in e)e.hasOwnProperty(i)&&(n(e[i])?n(t[i])?o(t[i],e[i]):t[i]=Object.assign({},e[i]):t[i]=e[i])}return t instanceof Object||(t={}),o(t,e),i&&o(t,i),t},EventDispatcher:function(n){var o=document.createTextNode("");this.off=function(t,e){return e&&o.removeEventListener.call(o,t,e),this},this.on=function(t,e){return e&&o.addEventListener.call(o,t,e),this},this.trigger=function(t,e){var i;if(t)if(n.settings.isJQueryPlugin)$(n.DOM.originalInput).triggerHandler(t,[e]);else{try{i=new CustomEvent(t,{detail:e})}catch(t){console.warn(t)}o.dispatchEvent(i)}}},events:{customBinding:function(){var e=this;this.customEventsList.forEach(function(t){e.on(t,e.settings.callbacks[t])})},binding:function(t){var e,i=!(0<arguments.length&&void 0!==t)||t,n=this.events.callbacks,o=i?"addEventListener":"removeEventListener",r=1==this.settings.editTags?"click_":2==this.settings.editTags?"dblclick":"";for(var s in i&&!this.listeners.main&&(this.DOM.input.addEventListener(this.isIE?"keydown":"input",n[this.isIE?"onInputIE":"onInput"].bind(this)),this.settings.isJQueryPlugin&&$(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),e=this.listeners.main=this.listeners.main||a({paste:["input",n.onPaste.bind(this)],focus:["input",n.onFocusBlur.bind(this)],blur:["input",n.onFocusBlur.bind(this)],keydown:["input",n.onKeydown.bind(this)],click:["scope",n.onClickScope.bind(this)]},r,["scope",n.onDoubleClickScope.bind(this)]))this.DOM[e[s][0]][o](s.replace(/_/g,""),e[s][1]);this.DOM.input.removeEventListener("blur",e.blur[1]),this.DOM.input.addEventListener("blur",e.blur[1])},callbacks:{onFocusBlur:function(t){var e=t.target?t.target.textContent.trim():"";if("mix"!=this.settings.mode){if("focus"==t.type)return this.DOM.scope.classList.add("tagify--focus"),this.trigger("focus"),void(0===this.settings.dropdown.enabled&&this.dropdown.show.call(this));"blur"==t.type&&(this.DOM.scope.classList.remove("tagify--focus"),this.trigger("blur"),e&&this.settings.addTagOnBlur&&this.addTags(e,!0).length),this.DOM.input.removeAttribute("style"),this.dropdown.hide.call(this)}},onKeydown:function(t){var e,i=this,n=t.target.textContent.trim();if("mix"==this.settings.mode){switch(t.key){case"Delete":case"Backspace":var o=[];e=this.DOM.input.children,setTimeout(function(){[].forEach.call(e,function(t){return o.push(t.getAttribute("value"))}),i.value=i.value.filter(function(t){return-1!=o.indexOf(t.value)})},20)}return!0}switch(t.key){case"Backspace":""!=n&&8203!=n.charCodeAt(0)||(!0===this.settings.backspace?this.removeTag():"edit"==this.settings.backspace&&setTimeout(this.editTag.bind(this),0));break;case"Esc":case"Escape":t.target.blur();break;case"Down":case"ArrowDown":"select"==this.settings.mode&&this.dropdown.show.call(this);break;case"ArrowRight":case"Tab":if(!n)return!0;case"Enter":t.preventDefault(),this.addTags(n,!0)}},onInput:function(t){var e="mix"==this.settings.mode?this.DOM.input.textContent:this.input.normalize.call(this),i=e.length>=this.settings.dropdown.enabled,n={value:e,inputElm:this.DOM.input};if("mix"==this.settings.mode)return this.events.callbacks.onMixTagsInput.call(this,t);e?this.input.value!=e&&(n.isValid=this.validateTag(e),this.input.set.call(this,e,!1),-1!=e.search(this.settings.delimiters)?this.addTags(e).length&&this.input.set.call(this):0<=this.settings.dropdown.enabled&&this.dropdown[i?"show":"hide"].call(this,e),this.trigger("input",n)):this.input.set.call(this,"")},onMixTagsInput:function(t){var e,i,n,o,r;if(this.maxTagsReached())return!0;window.getSelection&&0<(e=window.getSelection()).rangeCount&&((i=e.getRangeAt(0).cloneRange()).collapse(!0),i.setStart(window.getSelection().focusNode,0),(o=(n=i.toString().split(this.settings.mixTagsAllowedAfter))[n.length-1].match(this.settings.pattern))&&(this.state.tag={prefix:o[0],value:o.input.split(o[0])[1]},o=this.state.tag,r=this.state.tag.value.length>=this.settings.dropdown.enabled)),this.update(),setTimeout(this.trigger.bind(this,"input",this.extend({},this.state.tag,{textContent:this.DOM.input.textContent})),30),this.state.tag&&this.dropdown[r?"show":"hide"].call(this,this.state.tag.value)},onInputIE:function(t){var e=this;setTimeout(function(){e.events.callbacks.onInput.call(e,t)})},onPaste:function(t){},onClickScope:function(t){var e,i=t.target.closest("tag");if("TAGS"==t.target.tagName)this.DOM.input.focus();else{if("X"==t.target.tagName)return void this.removeTag(t.target.parentNode);i&&(e=this.getNodeIndex(i),this.trigger("click",{tag:i,index:e,data:this.value[e]}))}"select"!=this.settings.mode&&0!==this.settings.dropdown.enabled||this.dropdown.show.call(this)},onEditTagInput:function(t){var e=t.closest("tag"),i=this.getNodeIndex(e),n=this.input.normalize(t),o=n.toLowerCase()==t.originalValue.toLowerCase()||this.validateTag(n);e.classList.toggle("tagify--invalid",!0!==o),e.isValid=o,this.trigger("input",{tag:e,index:i,data:this.extend({},this.value[i],{newValue:n})})},onEditTagBlur:function(t){var e=t.closest("tag"),i=this.getNodeIndex(e),n=this.input.normalize(t),o=n||t.originalValue,r=this.input.normalize(t)!=t.originalValue,s=e.isValid,a=h({},this.value[i],{value:o});this.DOM.input.focus(),n?r?(this.settings.transformTag.call(this,a),void 0!==(s=this.validateTag(a.value))&&!0!==s||(this.editTagDone(e,a),this.trigger("edit",{tag:e,index:i,data:this.value[i]}))):this.editTagDone(e):this.removeTag(e)},onEditTagkeydown:function(t){switch(t.key){case"Esc":case"Escape":t.target.textContent=t.target.originalValue;case"Enter":case"Tab":t.preventDefault(),t.target.blur()}},onDoubleClickScope:function(t){var e,i,n=t.target.closest("tag"),o=this.settings;n&&(e=n.classList.contains("tagify--editable"),i=n.hasAttribute("readonly"),"mix"==o.mode||"select"==o.mode||o.readonly||o.enforceWhitelist||e||i||this.editTag(n))}}},editTag:function(t){var e=this,i=0<arguments.length&&void 0!==t?t:this.getLastTag(),n=i.querySelector(".tagify__tag-text"),o=this.events.callbacks;if(n)return i.classList.add("tagify--editable"),n.originalValue=n.textContent,n.setAttribute("contenteditable",!0),n.addEventListener("blur",o.onEditTagBlur.bind(this,n)),n.addEventListener("input",o.onEditTagInput.bind(this,n)),n.addEventListener("keydown",function(t){return o.onEditTagkeydown.call(e,t)}),n.focus(),this.setRangeAtStartEnd(!1,n),this;console.warn("Cannot find element in Tag template: ",".tagify__tag-text")},editTagDone:function(t,e){var i,n=t.querySelector(".tagify__tag-text"),o=n.cloneNode(!0);o.removeAttribute("contenteditable"),t.classList.remove("tagify--editable"),n.parentNode.replaceChild(o,n),e&&(n.textContent=e.value,t.title=e.value,i=this.getNodeIndex(t),this.value[i].value=e.value,this.update())},setRangeAtStartEnd:function(t,e){var i,n;document.createRange&&((i=document.createRange()).selectNodeContents(e||this.DOM.input),i.collapse(!!t),(n=window.getSelection()).removeAllRanges(),n.addRange(i))},input:{value:"",set:function(t,e,i){var n=0<arguments.length&&void 0!==t?t:"",o=!(1<arguments.length&&void 0!==e)||e,r=0<this.settings.dropdown.enabled||this.settings.dropdown.closeOnSelect;this.input.value=n,o&&(this.DOM.input.innerHTML=n),!n&&r&&setTimeout(this.dropdown.hide.bind(this),20),this.input.autocomplete.suggest.call(this,""),this.input.validate.call(this)},validate:function(){var t=!this.input.value||this.validateTag(this.input.value);"select"==this.settings.mode?this.DOM.scope.classList.toggle("tagify--invalid",!0!==t):this.DOM.input.classList.toggle("tagify__input--invalid",!0!==t)},normalize:function(t){var e=(0<arguments.length&&void 0!==t?t:this.DOM.input).innerText;return"settings"in this&&this.settings.delimiters&&(e=e.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(1))),e.replace(/\s/g," ").replace(/^\s+/,"")},autocomplete:{suggest:function(t){t&&this.input.value?this.DOM.input.setAttribute("data-suggest",t.substring(this.input.value.length)):this.DOM.input.removeAttribute("data-suggest")},set:function(t){var e=this.DOM.input.getAttribute("data-suggest"),i=t||(e?this.input.value+e:null);return!!i&&(this.input.set.call(this,i),this.input.autocomplete.suggest.call(this,""),this.dropdown.hide.call(this),this.setRangeAtStartEnd(),!0)}}},getNodeIndex:function(t){var e=0;if(t)for(;t=t.previousElementSibling;)e++;return e},getTagElms:function(){return this.DOM.scope.querySelectorAll("tag")},getLastTag:function(){var t=this.DOM.scope.querySelectorAll("tag:not(.tagify--hide):not([readonly])");return t[t.length-1]},isTagDuplicate:function(e){return"select"!=this.settings.mode&&this.value.some(function(t){return"string"==typeof e?e.trim().toLowerCase()===t.value.toLowerCase():JSON.stringify(t).toLowerCase()===JSON.stringify(e).toLowerCase()})},getTagIndexByValue:function(i){var n=[];return this.getTagElms().forEach(function(t,e){t.textContent.trim().toLowerCase()==i.toLowerCase()&&n.push(e)}),n},getTagElmByValue:function(t){var e=this.getTagIndexByValue(t)[0];return this.getTagElms()[e]},markTagByValue:function(t,e){return!!(e=e||this.getTagElmByValue(t))&&(e.classList.add("tagify--mark"),e)},isTagBlacklisted:function(e){return e=e.toLowerCase().trim(),this.settings.blacklist.filter(function(t){return e==t.toLowerCase()}).length},isTagWhitelisted:function(e){return this.settings.whitelist.some(function(t){return"string"==typeof e?e.trim().toLowerCase()===(t.value||t).toLowerCase():JSON.stringify(t).toLowerCase()===JSON.stringify(e).toLowerCase()})},validateTag:function(t){var e=t.trim(),i=!0;return e?this.settings.pattern&&!this.settings.pattern.test(e)?i=this.TEXTS.pattern:!this.settings.duplicates&&this.isTagDuplicate(e)?i=this.TEXTS.duplicate:(this.isTagBlacklisted(e)||this.settings.enforceWhitelist&&!this.isTagWhitelisted(e))&&(i=this.TEXTS.notAllowed):i=this.TEXTS.empty,i},maxTagsReached:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},normalizeTags:function(t){function i(t){return t.split(r).filter(function(t){return t}).map(function(t){return{value:t.trim()}})}var e,n=this.settings,o=n.whitelist,r=n.delimiters,s=n.mode,a=!!o&&o[0]instanceof Object,l=t instanceof Array&&t[0]instanceof Object&&"value"in t[0],c=[];if(l)return(e=[]).concat.apply(e,d(t.map(function(e){return i(e.value).map(function(t){return h({},e,{},t)})})));if("number"==typeof t&&(t=t.toString()),"string"==typeof t){if(!t.trim())return[];t=i(t)}else if(!l&&t instanceof Array){var u;t=(u=[]).concat.apply(u,d(t.map(function(t){return i(t)})))}return a&&(t.forEach(function(e){var t=o.filter(function(t){return t.value.toLowerCase()==e.value.toLowerCase()});t[0]?c.push(t[0]):"mix"!=s&&c.push(e)}),t=c),t},parseMixTags:function(t){var r=this,e=this.settings,s=e.mixTagsInterpolator,a=e.duplicates,l=e.transformTag;return t=t.split(s[0]).map(function(t){var e,i,n=t.split(s[1]),o=n[0];try{e=JSON.parse(o)}catch(t){e=r.normalizeTags(o)[0]}return!(1<n.length&&r.isTagWhitelisted(e.value))||a&&r.isTagDuplicate(e)||(l.call(r,e),i=r.createTagElem(e),n[0]=i.outerHTML,r.value.push(e)),n.join("")}).join(""),this.DOM.input.innerHTML=t,this.update(),t},addMixTag:function(t){if(t&&this.state.tag){for(var e,i,n,o,r=this.state.tag.prefix+this.state.tag.value,s=document.createNodeIterator(this.DOM.input,NodeFilter.SHOW_TEXT,null,!1),a=100;(e=s.nextNode())&&a--;)if(e.nodeType===Node.TEXT_NODE){if(-1==(n=e.nodeValue.indexOf(r)))continue;o=e.splitText(n),this.settings.transformTag.call(this,t),i=this.createTagElem(t),o.nodeValue=o.nodeValue.replace(r,""),e.parentNode.insertBefore(i,o)}i&&(this.value.push(t),this.update(),this.trigger("add",this.extend({},{index:this.value.length,tag:i},t))),this.state.tag=null}},addEmptyTag:function(){var t={value:""},e=this.createTagElem(t);this.appendTag.call(this,e),this.value.push(t),this.update(),this.editTag(e)},addTags:function(t,o,e){var r=this,s=2<arguments.length&&void 0!==e?e:this.settings.skipInvalid,a=[];return t&&t.length?(t=this.normalizeTags.call(this,t),"mix"==this.settings.mode?this.addMixTag(t[0]):("select"==this.settings.mode&&(t.length=1),this.DOM.input.removeAttribute("style"),t.forEach(function(t){var e,i,n={};if(t=Object.assign({},t),r.settings.transformTag.call(r,t),!0!==(e=r.maxTagsReached()||r.validateTag(t.value))){if(s)return;n["aria-invalid"]=!0,n.class=(t.class||"")+" tagify--notAllowed",n.title=e,r.markTagByValue(t.value),r.trigger("invalid",{data:t,index:r.value.length,message:e})}if(n.role="tag",t.readonly&&(n["aria-readonly"]=!0),i=r.createTagElem(r.extend({},t,n)),a.push(i),"select"==r.settings.mode&&(r.settings.dropdown.closeOnSelect&&(r.dropdown.hide.call(r),r.events.callbacks.onFocusBlur.call(r,{type:"blur"})),o=!1,r.input.set.call(r,t.value,!0,!0),r.getLastTag()))return r.editTagDone(r.getLastTag(),t),r.value[0]=t,r.update(),r.trigger("add",{tag:i,data:t}),[i];r.appendTag(i),!0===e?(r.value.push(t),r.update(),r.trigger("add",{tag:i,index:r.value.length-1,data:t})):r.settings.keepInvalidTags||setTimeout(function(){r.removeTag(i,!0)},1e3),r.dropdown.position.call(r)}),t.length&&o&&this.input.set.call(this),a)):("select"==this.settings.mode&&this.removeAllTags(),a)},appendTag:function(t){var e=this.DOM.scope.lastElementChild;e===this.DOM.input?this.DOM.scope.insertBefore(t,e):this.DOM.scope.appendChild(t)},minify:function(t){return t.replace(new RegExp(">[\r\n ]+<","g"),"><")},createTagElem:function(t){var e=this.escapeHTML(t.value),i=this.settings.templates.tag.call(this,e,t);return this.settings.readonly&&(t.readonly=!0),i=this.minify(i),this.parseHTML(i)},removeTag:function(t,e,i){var n=0<arguments.length&&void 0!==t?t:this.getLastTag(),o=1<arguments.length?e:void 0,r=2<arguments.length&&void 0!==i?i:250;if("string"==typeof n&&(n=this.getTagElmByValue(n)),n instanceof HTMLElement){var s,a=this,l=this.getNodeIndex(n);"select"==this.settings.mode&&(r=0,this.input.set.call(this)),n.classList.contains("tagify--notAllowed")&&(o=!0),r&&10<r?(n.style.width=parseFloat(window.getComputedStyle(n).width)+"px",document.body.clientTop,n.classList.add("tagify--hide"),setTimeout(c,400)):c()}function c(){n.parentNode&&(n.parentNode.removeChild(n),o?a.settings.keepInvalidTags&&a.trigger("remove",{tag:n,index:l}):(s=a.value.splice(l,1)[0],a.update(),a.trigger("remove",{tag:n,index:l,data:s}),a.dropdown.render.call(a),a.dropdown.position.call(a)))}},removeAllTags:function(){this.value=[],this.update(),Array.prototype.slice.call(this.getTagElms()).forEach(function(t){return t.parentNode.removeChild(t)}),this.dropdown.position.call(this)},getAttributes:function(t){if("[object Object]"!=Object.prototype.toString.call(t))return"";var e,i,n=Object.keys(t),o="";for(i=n.length;i--;)"class"!=(e=n[i])&&t.hasOwnProperty(e)&&t[e]&&(o+=" "+e+(t[e]?'="'.concat(t[e],'"'):""));return o},preUpdate:function(){this.DOM.scope.classList.toggle("hasMaxTags",this.value.length>=this.settings.maxTags)},update:function(){this.preUpdate(),this.DOM.originalInput.value="mix"==this.settings.mode?this.getMixedTagsAsString():this.value.length?JSON.stringify(this.value):""},getMixedTagsAsString:function(){var e=this,i="",n=0,o=this.settings.mixTagsInterpolator;return this.DOM.input.childNodes.forEach(function(t){1==t.nodeType&&t.classList.contains("tagify__tag")?i+=o[0]+JSON.stringify(e.value[n++])+o[1]:i+=t.textContent}),i},dropdown:{init:function(){this.DOM.dropdown=this.dropdown.build.call(this)},build:function(){var t=this.settings.dropdown,e=t.position,i=t.classname,n="".concat("manual"==e?"":"tagify__dropdown"," ").concat(i).trim(),o='<div class="'.concat(n,'" role="menu"></div>');return this.parseHTML(o)},show:function(t){var e,i,n,o=this.settings,r="manual"==o.dropdown.position;if(o.whitelist.length){if(this.suggestedListItems=this.dropdown.filterListItems.call(this,t),!this.suggestedListItems.length)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide.call(this);n=(i=this.suggestedListItems[0]).value||i,this.settings.autoComplete&&0==n.indexOf(t)&&this.input.autocomplete.suggest.call(this,n),e=this.dropdown.createListHTML.call(this,this.suggestedListItems),this.DOM.dropdown.innerHTML=this.minify(e),(o.enforceWhitelist&&!r||o.dropdown.highlightFirst)&&this.dropdown.highlightOption.call(this,this.DOM.dropdown.children[0]),this.DOM.scope.setAttribute("aria-expanded",!0),this.trigger("dropdown:show",this.DOM.dropdown),document.body.contains(this.DOM.dropdown)||(r||(this.dropdown.position.call(this),document.body.appendChild(this.DOM.dropdown),this.events.binding.call(this,!1)),this.dropdown.events.binding.call(this))}},hide:function(t){var e=this.DOM,i=e.scope,n=e.dropdown,o="manual"==this.settings.dropdown.position&&!t;n&&document.body.contains(n)&&!o&&(window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),setTimeout(this.events.binding.bind(this),250),i.setAttribute("aria-expanded",!1),n.parentNode.removeChild(n),this.trigger("dropdown:hide",n))},render:function(){this.suggestedListItems=this.dropdown.filterListItems.call(this,"");var t=this.dropdown.createListHTML.call(this,this.suggestedListItems);this.DOM.dropdown.innerHTML=this.minify(t)},position:function(){var t=this.DOM.scope.getBoundingClientRect();this.DOM.dropdown.style.cssText="left: "+(t.left+window.pageXOffset)+"px;                                                top: "+(t.top+t.height-1+window.pageYOffset)+"px;                                                width: "+t.width+"px"},events:{binding:function(t){var e=!(0<arguments.length&&void 0!==t)||t,i=this.dropdown.events.callbacks,n=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this),onKeyDown:i.onKeyDown.bind(this),onMouseOver:i.onMouseOver.bind(this),onMouseLeave:i.onMouseLeave.bind(this),onClick:i.onClick.bind(this)},o=e?"addEventListener":"removeEventListener";"manual"!=this.settings.dropdown.position&&(window[o]("resize",n.position),window[o]("keydown",n.onKeyDown)),window[o]("mousedown",n.onClick),this.DOM.dropdown[o]("mouseover",n.onMouseOver),this.DOM.dropdown[o]("mouseleave",n.onMouseLeave),this.DOM[this.listeners.main.click[0]][o]("click",this.listeners.main.click[1])},callbacks:{onKeyDown:function(t){var e=this,i=this.DOM.dropdown.querySelector("[class$='--active']"),n=i,o="";switch(t.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":t.preventDefault(),n=(n=n&&n[("ArrowUp"==t.key||"Up"==t.key?"previous":"next")+"ElementSibling"])||this.DOM.dropdown.children["ArrowUp"==t.key||"Up"==t.key?this.DOM.dropdown.children.length-1:0],this.dropdown.highlightOption.call(this,n,!0);break;case"Escape":case"Esc":this.dropdown.hide.call(this);break;case"ArrowRight":case"Tab":try{var r=n?n.textContent:this.suggestedListItems[0].value;this.input.autocomplete.set.call(this,r)}catch(t){}return!1;case"Enter":t.preventDefault();var s=this.settings.dropdown.enabled||this.settings.dropdown.closeOnSelect;if(i)return o=this.suggestedListItems[this.getNodeIndex(i)]||this.input.value,this.trigger("dropdown:select",o),this.addTags([o],!0),this.dropdown[s?"hide":"show"].call(this),"select"==this.settings.mode&&setTimeout(function(){return e.DOM.input.blur()}),!1;this.addTags(this.input.value,!0);break;case"Backspace":if("mix"==this.settings.mode)return;""!=(r=this.input.value.trim())&&8203!=r.charCodeAt(0)||(!0===this.settings.backspace?this.removeTag():"edit"==this.settings.backspace&&setTimeout(this.editTag.bind(this),0))}},onMouseOver:function(t){t.target.className.includes("__item")&&this.dropdown.highlightOption.call(this,t.target)},onMouseLeave:function(t){this.dropdown.highlightOption.call(this)},onClick:function(t){var e,i,n=this;if(0==t.button&&t.target!=this.DOM.dropdown)if(i=t.target.closest(".tagify__dropdown__item")){if(i.parentNode!==this.DOM.dropdown)return;e=this.suggestedListItems[this.getNodeIndex(i)]||this.input.value,this.trigger("dropdown:select",e),this.addTags([e],!0),"select"!=this.settings.mode&&setTimeout(function(){return n.DOM.input.focus()}),this.settings.dropdown.closeOnSelect&&this.dropdown.hide.call(this)}else this.dropdown.hide.call(this),t.target.closest(".tagify")||this.events.callbacks.onFocusBlur.call(this,{type:"blur",target:this.DOM.input})}}},highlightOption:function(t,e){var i,n="tagify__dropdown__item--active";this.DOM.dropdown.querySelectorAll("[class$='--active']").forEach(function(t){t.classList.remove(n),t.removeAttribute("aria-selected")}),t?(t.classList.add(n),t.setAttribute("aria-selected",!0),e&&(t.parentNode.scrollTop=t.clientHeight+t.offsetTop-t.parentNode.clientHeight),this.settings.autoComplete&&(i=this.suggestedListItems[this.getNodeIndex(t)].value||this.input.value,this.input.autocomplete.suggest.call(this,i))):this.input.autocomplete.suggest.call(this)},filterListItems:function(t){var e,i,n,o,r=this,s=[],a=this.settings.whitelist,l=this.settings.dropdown.maxItems||1/0,c=0;if(!t)return a.filter(function(t){return!r.isTagDuplicate(t.value||t)}).slice(0,l);for(;c<a.length&&(n=(((e=a[c]instanceof Object?a[c]:{value:a[c]}).searchBy||"")+" "+e.value).toLowerCase().indexOf(t.toLowerCase()),i=this.settings.dropdown.fuzzySearch?0<=n:0==n,o=!this.settings.duplicates&&this.isTagDuplicate(e.value),i&&!o&&l--&&s.push(e),0!=l);c++);return s},createListHTML:function(t){var e=this.settings.templates.dropdownItem.bind(this);return t.map(e).join("")}}},t});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Tabulator=e()}(this,function(){"use strict";Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<i;){var r=e[o];if(t.call(n,r,o,e))return o;o++}return-1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<i;){var r=e[o];if(t.call(n,r,o,e))return r;o++}}});function t(t){this.table=t,this.blockHozScrollEvent=!1,this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.rowManager=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.element.insertBefore(this.headersElement,this.element.firstChild)}t.prototype.createHeadersElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t},t.prototype.createHeaderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-header"),this.table.options.headerVisible||t.classList.add("tabulator-header-hidden"),t},t.prototype.initialize=function(){},t.prototype.setRowManager=function(t){this.rowManager=t},t.prototype.getElement=function(){return this.element},t.prototype.getHeadersElement=function(){return this.headersElement},t.prototype.scrollHorizontal=function(t){var e=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=t,this.element.style.marginLeft=e<t?-(t-e)+"px":0,this.scrollLeft=t,this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.scrollHorizontal()},t.prototype.generateColumnsFromRowData=function(t){var e,i,n=[];if(t&&t.length){for(var o in e=t[0]){var r={field:o,title:o},s=e[o];switch(void 0===s?"undefined":_typeof(s)){case"undefined":i="string";break;case"boolean":i="boolean";break;case"object":i=Array.isArray(s)?"array":"string";break;default:i=isNaN(s)||""===s?s.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}r.sorter=i,n.push(r)}this.table.options.columns=n,this.setColumns(this.table.options.columns)}},t.prototype.setColumns=function(t,e){for(var i=this;i.headersElement.firstChild;)i.headersElement.removeChild(i.headersElement.firstChild);i.columns=[],i.columnsByIndex=[],i.columnsByField={},i.table.modExists("frozenColumns")&&i.table.modules.frozenColumns.reset(),t.forEach(function(t,e){i._addColumn(t)}),i._reIndexColumns(),i.table.options.responsiveLayout&&i.table.modExists("responsiveLayout",!0)&&i.table.modules.responsiveLayout.initialize(),i.redraw(!0)},t.prototype._addColumn=function(t,e,i){var n=new u(t,this),o=n.getElement(),r=i?this.findColumnIndex(i):i;if(i&&-1<r){var s=this.columns.indexOf(i.getTopColumn()),a=i.getElement();e?(this.columns.splice(s,0,n),a.parentNode.insertBefore(o,a)):(this.columns.splice(s+1,0,n),a.parentNode.insertBefore(o,a.nextSibling))}else e?(this.columns.unshift(n),this.headersElement.insertBefore(n.getElement(),this.headersElement.firstChild)):(this.columns.push(n),this.headersElement.appendChild(n.getElement())),n.columnRendered();return n},t.prototype.registerColumnField=function(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)},t.prototype.registerColumnPosition=function(t){this.columnsByIndex.push(t)},t.prototype._reIndexColumns=function(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})},t.prototype._verticalAlignHeaders=function(){var e=this,i=0;e.columns.forEach(function(t){var e;t.clearVerticalAlign(),(e=t.getHeight())>i&&(i=e)}),e.columns.forEach(function(t){t.verticalAlign(e.table.options.columnHeaderVertAlign,i)}),e.rowManager.adjustTableSize()},t.prototype.findColumn=function(e){return"object"!=(void 0===e?"undefined":_typeof(e))?this.columnsByField[e]||!1:e instanceof u?e:e instanceof i?e._getSelf()||!1:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&this.columns.find(function(t){return t.element===e})||!1},t.prototype.getColumnByField=function(t){return this.columnsByField[t]},t.prototype.getColumnsByFieldRoot=function(e){var i=this,n=[];return Object.keys(this.columnsByField).forEach(function(t){t.split(".")[0]===e&&n.push(i.columnsByField[t])}),n},t.prototype.getColumnByIndex=function(t){return this.columnsByIndex[t]},t.prototype.getFirstVisibileColumn=function(t){return-1<(t=this.columnsByIndex.findIndex(function(t){return t.visible}))&&this.columnsByIndex[t]},t.prototype.getColumns=function(){return this.columns},t.prototype.findColumnIndex=function(e){return this.columnsByIndex.findIndex(function(t){return e===t})},t.prototype.getRealColumns=function(){return this.columnsByIndex},t.prototype.traverse=function(i){this.columnsByIndex.forEach(function(t,e){i(t,e)})},t.prototype.getDefinitions=function(e){var i=[];return this.columnsByIndex.forEach(function(t){(!e||e&&t.visible)&&i.push(t.getDefinition())}),i},t.prototype.getDefinitionTree=function(){var e=[];return this.columns.forEach(function(t){e.push(t.getDefinition(!0))}),e},t.prototype.getComponents=function(t){var e=[];return(t?this.columns:this.columnsByIndex).forEach(function(t){e.push(t.getComponent())}),e},t.prototype.getWidth=function(){var e=0;return this.columnsByIndex.forEach(function(t){t.visible&&(e+=t.getWidth())}),e},t.prototype.moveColumn=function(t,e,i){this.moveColumnActual(t,e,i),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),e.element.parentNode.insertBefore(t.element,e.element),i&&e.element.parentNode.insertBefore(e.element,t.element),this._verticalAlignHeaders(),this.table.rowManager.reinitialize()},t.prototype.moveColumnActual=function(t,e,i){this._moveColumnInArray(this.columns,t,e,i),this._moveColumnInArray(this.columnsByIndex,t,e,i,!0),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.options.columnMoved&&this.table.options.columnMoved.call(this.table,t.getComponent(),this.table.columnManager.getComponents()),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns")},t.prototype._moveColumnInArray=function(t,e,i,n,o){var r,s=t.indexOf(e);-1<s&&(t.splice(s,1),-1<(r=t.indexOf(i))?n&&(r+=1):r=s,t.splice(r,0,e),o&&this.table.rowManager.rows.forEach(function(t){if(t.cells.length){var e=t.cells.splice(s,1)[0];t.cells.splice(r,0,e)}}))},t.prototype.scrollToColumn=function(i,n,o){var r=this,s=0,a=0,l=0,c=i.getElement();return new Promise(function(t,e){if(void 0===n&&(n=r.table.options.scrollToColumnPosition),void 0===o&&(o=r.table.options.scrollToColumnIfVisible),i.visible){switch(n){case"middle":case"center":l=-r.element.clientWidth/2;break;case"right":l=c.clientWidth-r.headersElement.clientWidth}if(!o&&0<(a=c.offsetLeft)&&a+c.offsetWidth<r.element.clientWidth)return!1;s=c.offsetLeft+r.element.scrollLeft+l,s=Math.max(Math.min(s,r.table.rowManager.element.scrollWidth-r.table.rowManager.element.clientWidth),0),r.table.rowManager.scrollHorizontal(s),r.scrollHorizontal(s),t()}else console.warn("Scroll Error - Column not visible"),e("Scroll Error - Column not visible")})},t.prototype.generateCells=function(e){var i=[];return this.columnsByIndex.forEach(function(t){i.push(t.generateCell(e))}),i},t.prototype.getFlexBaseWidth=function(){var o=this,r=o.table.element.clientWidth,s=0;return o.rowManager.element.scrollHeight>o.rowManager.element.clientHeight&&(r-=o.rowManager.element.offsetWidth-o.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(t){var e,i,n;t.visible&&(e=t.definition.width||0,i=void 0===t.minWidth?o.table.options.columnMinWidth:parseInt(t.minWidth),n="string"==typeof e?-1<e.indexOf("%")?r/100*parseInt(e):parseInt(e):e,s+=i<n?n:i)}),s},t.prototype.addColumn=function(n,o,r){var s=this;return new Promise(function(t,e){var i=s._addColumn(n,o,r);s._reIndexColumns(),s.table.options.responsiveLayout&&s.table.modExists("responsiveLayout",!0)&&s.table.modules.responsiveLayout.initialize(),s.table.modExists("columnCalcs")&&s.table.modules.columnCalcs.recalc(s.table.rowManager.activeRows),s.redraw(),"fitColumns"!=s.table.modules.layout.getMode()&&i.reinitializeWidth(),s._verticalAlignHeaders(),s.table.rowManager.reinitialize(),t(i)})},t.prototype.deregisterColumn=function(t){var e,i=t.getField();i&&delete this.columnsByField[i],-1<(e=this.columnsByIndex.indexOf(t))&&this.columnsByIndex.splice(e,1),-1<(e=this.columns.indexOf(t))&&this.columns.splice(e,1),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.redraw()},t.prototype.redraw=function(t){t&&(T.prototype.helpers.elVisible(this.element)&&this._verticalAlignHeaders(),this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),-1<["fitColumns","fitDataStretch"].indexOf(this.table.modules.layout.getMode())?this.table.modules.layout.layout():t?this.table.modules.layout.layout():this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),t&&(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.redraw()),this.table.footerManager.redraw()};var i=function(t){this._column=t,this.type="ColumnComponent"};i.prototype.getElement=function(){return this._column.getElement()},i.prototype.getDefinition=function(){return this._column.getDefinition()},i.prototype.getField=function(){return this._column.getField()},i.prototype.getCells=function(){var e=[];return this._column.cells.forEach(function(t){e.push(t.getComponent())}),e},i.prototype.getVisibility=function(){return this._column.visible},i.prototype.show=function(){this._column.isGroup?this._column.columns.forEach(function(t){t.show()}):this._column.show()},i.prototype.hide=function(){this._column.isGroup?this._column.columns.forEach(function(t){t.hide()}):this._column.hide()},i.prototype.toggle=function(){this._column.visible?this.hide():this.show()},i.prototype.delete=function(){return this._column.delete()},i.prototype.getSubColumns=function(){var e=[];return this._column.columns.length&&this._column.columns.forEach(function(t){e.push(t.getComponent())}),e},i.prototype.getParentColumn=function(){return this._column.parent instanceof u&&this._column.parent.getComponent()},i.prototype._getSelf=function(){return this._column},i.prototype.scrollTo=function(){return this._column.table.columnManager.scrollToColumn(this._column)},i.prototype.getTable=function(){return this._column.table},i.prototype.headerFilterFocus=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterFocus(this._column)},i.prototype.reloadHeaderFilter=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.reloadHeaderFilter(this._column)},i.prototype.setHeaderFilterValue=function(t){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterValue(this._column,t)},i.prototype.move=function(t,e){var i=this._column.table.columnManager.findColumn(t);i?this._column.table.columnManager.moveColumn(this._column,i,e):console.warn("Move Error - No matching column found:",i)},i.prototype.getNextColumn=function(){var t=this._column.nextColumn();return!!t&&t.getComponent()},i.prototype.getPrevColumn=function(){var t=this._column.prevColumn();return!!t&&t.getComponent()},i.prototype.updateDefinition=function(t){return this._column.updateDefinition(t)};var u=function n(t,e){var o=this;this.table=e.table,this.definition=t,this.parent=e,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.setField(this.definition.field),this.table.options.invalidOptionWarnings&&this.checkDefinition(),this.modules={},this.cellEvents={cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1},this.width=null,this.widthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this._mapDepricatedFunctionality(),t.columns?(this.isGroup=!0,t.columns.forEach(function(t,e){var i=new n(t,o);o.attachColumn(i)}),o.checkColumnVisibility()):e.registerColumnField(this),t.rowHandle&&!1!==this.table.options.movableRows&&this.table.modExists("moveRow")&&this.table.modules.moveRow.setHandle(!0),this._buildHeader(),this.bindModuleColumns()};u.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-col"),t.setAttribute("role","columnheader"),t.setAttribute("aria-sort","none"),t},u.prototype.createGroupElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-col-group-cols"),t},u.prototype.checkDefinition=function(){var e=this;Object.keys(this.definition).forEach(function(t){-1===e.defaultOptionList.indexOf(t)&&console.warn("Invalid column definition option in '"+(e.field||e.definition.title)+"' column:",t)})},u.prototype.setField=function(t){this.field=t,this.fieldStructure=t?this.table.options.nestedFieldSeparator?t.split(this.table.options.nestedFieldSeparator):[t]:[],this.getFieldValue=1<this.fieldStructure.length?this._getNestedData:this._getFlatData,this.setFieldValue=1<this.fieldStructure.length?this._setNesteData:this._setFlatData},u.prototype.registerColumnPosition=function(t){this.parent.registerColumnPosition(t)},u.prototype.registerColumnField=function(t){this.parent.registerColumnField(t)},u.prototype.reRegisterPosition=function(){this.isGroup?this.columns.forEach(function(t){t.reRegisterPosition()}):this.registerColumnPosition(this)},u.prototype._mapDepricatedFunctionality=function(){void 0!==this.definition.hideInHtml&&(this.definition.htmlOutput=!this.definition.hideInHtml,console.warn("hideInHtml column definition property is deprecated, you should now use htmlOutput"))},u.prototype.setTooltip=function(){var e=this,i=e.definition,t=i.headerTooltip||!1===i.tooltip?i.headerTooltip:e.table.options.tooltipsHeader;t?!0===t?i.field?e.table.modules.localize.bind("columns|"+i.field,function(t){e.element.setAttribute("title",t||i.title)}):e.element.setAttribute("title",i.title):("function"==typeof t&&!1===(t=t(e.getComponent()))&&(t=""),e.element.setAttribute("title",t)):e.element.setAttribute("title","")},u.prototype._buildHeader=function(){for(var e=this,t=e.definition;e.element.firstChild;)e.element.removeChild(e.element.firstChild);t.headerVertical&&(e.element.classList.add("tabulator-col-vertical"),"flip"===t.headerVertical&&e.element.classList.add("tabulator-col-vertical-flip")),e.contentElement=e._bindEvents(),e.contentElement=e._buildColumnHeaderContent(),e.element.appendChild(e.contentElement),e.isGroup?e._buildGroupHeader():e._buildColumnHeader(),e.setTooltip(),e.table.options.resizableColumns&&e.table.modExists("resizeColumns")&&e.table.modules.resizeColumns.initializeColumn("header",e,e.element),t.headerFilter&&e.table.modExists("filter")&&e.table.modExists("edit")&&(void 0!==t.headerFilterPlaceholder&&t.field&&e.table.modules.localize.setHeaderFilterColumnPlaceholder(t.field,t.headerFilterPlaceholder),e.table.modules.filter.initializeColumn(e)),e.table.modExists("frozenColumns")&&e.table.modules.frozenColumns.initializeColumn(e),e.table.options.movableColumns&&!e.isGroup&&e.table.modExists("moveColumn")&&e.table.modules.moveColumn.initializeColumn(e),(t.topCalc||t.bottomCalc)&&e.table.modExists("columnCalcs")&&e.table.modules.columnCalcs.initializeColumn(e),e.table.modExists("persistence")&&e.table.modules.persistence.config.columns&&e.table.modules.persistence.initializeColumn(e),e.element.addEventListener("mouseenter",function(t){e.setTooltip()})},u.prototype._bindEvents=function(){var e,i,n,o=this,r=o.definition;"function"==typeof r.headerClick&&o.element.addEventListener("click",function(t){r.headerClick(t,o.getComponent())}),"function"==typeof r.headerDblClick&&o.element.addEventListener("dblclick",function(t){r.headerDblClick(t,o.getComponent())}),"function"==typeof r.headerContext&&o.element.addEventListener("contextmenu",function(t){r.headerContext(t,o.getComponent())}),"function"==typeof r.headerTap&&(n=!1,o.element.addEventListener("touchstart",function(t){n=!0},{passive:!0}),o.element.addEventListener("touchend",function(t){n&&r.headerTap(t,o.getComponent()),n=!1})),"function"==typeof r.headerDblTap&&(e=null,o.element.addEventListener("touchend",function(t){e?(clearTimeout(e),e=null,r.headerDblTap(t,o.getComponent())):e=setTimeout(function(){clearTimeout(e),e=null},300)})),"function"==typeof r.headerTapHold&&(i=null,o.element.addEventListener("touchstart",function(t){clearTimeout(i),i=setTimeout(function(){clearTimeout(i),i=null,n=!1,r.headerTapHold(t,o.getComponent())},1e3)},{passive:!0}),o.element.addEventListener("touchend",function(t){clearTimeout(i),i=null})),"function"==typeof r.cellClick&&(o.cellEvents.cellClick=r.cellClick),"function"==typeof r.cellDblClick&&(o.cellEvents.cellDblClick=r.cellDblClick),"function"==typeof r.cellContext&&(o.cellEvents.cellContext=r.cellContext),"function"==typeof r.cellMouseEnter&&(o.cellEvents.cellMouseEnter=r.cellMouseEnter),"function"==typeof r.cellMouseLeave&&(o.cellEvents.cellMouseLeave=r.cellMouseLeave),"function"==typeof r.cellMouseOver&&(o.cellEvents.cellMouseOver=r.cellMouseOver),"function"==typeof r.cellMouseOut&&(o.cellEvents.cellMouseOut=r.cellMouseOut),"function"==typeof r.cellMouseMove&&(o.cellEvents.cellMouseMove=r.cellMouseMove),"function"==typeof r.cellTap&&(o.cellEvents.cellTap=r.cellTap),"function"==typeof r.cellDblTap&&(o.cellEvents.cellDblTap=r.cellDblTap),"function"==typeof r.cellTapHold&&(o.cellEvents.cellTapHold=r.cellTapHold),"function"==typeof r.cellEdited&&(o.cellEvents.cellEdited=r.cellEdited),"function"==typeof r.cellEditing&&(o.cellEvents.cellEditing=r.cellEditing),"function"==typeof r.cellEditCancelled&&(o.cellEvents.cellEditCancelled=r.cellEditCancelled)},u.prototype._buildColumnHeader=function(){var e=this,t=e.definition,i=e.table;i.modExists("sort")&&i.modules.sort.initializeColumn(e,e.contentElement),i.modExists("format")&&i.modules.format.initializeColumn(e),void 0!==t.editor&&i.modExists("edit")&&i.modules.edit.initializeColumn(e),void 0!==t.validator&&i.modExists("validate")&&i.modules.validate.initializeColumn(e),i.modExists("mutator")&&i.modules.mutator.initializeColumn(e),i.modExists("accessor")&&i.modules.accessor.initializeColumn(e),_typeof(i.options.responsiveLayout)&&i.modExists("responsiveLayout")&&i.modules.responsiveLayout.initializeColumn(e),void 0!==t.visible&&(t.visible?e.show(!0):e.hide(!0)),t.cssClass&&t.cssClass.split(" ").forEach(function(t){e.element.classList.add(t)}),t.field&&this.element.setAttribute("tabulator-field",t.field),e.setMinWidth(void 0===t.minWidth?e.table.options.columnMinWidth:parseInt(t.minWidth)),e.reinitializeWidth(),e.tooltip=e.definition.tooltip||!1===e.definition.tooltip?e.definition.tooltip:e.table.options.tooltips,e.hozAlign=void 0===e.definition.align?"":e.definition.align},u.prototype._buildColumnHeaderContent=function(){var t=(this.definition,this.table,document.createElement("div"));return t.classList.add("tabulator-col-content"),t.appendChild(this._buildColumnHeaderTitle()),t},u.prototype._buildColumnHeaderTitle=function(){var e=this,i=e.definition,t=e.table,n=document.createElement("div");if(n.classList.add("tabulator-col-title"),i.editableTitle){var o=document.createElement("input");o.classList.add("tabulator-title-editor"),o.addEventListener("click",function(t){t.stopPropagation(),o.focus()}),o.addEventListener("change",function(){i.title=o.value,t.options.columnTitleChanged.call(e.table,e.getComponent())}),n.appendChild(o),i.field?t.modules.localize.bind("columns|"+i.field,function(t){o.value=t||i.title||"&nbsp;"}):o.value=i.title||"&nbsp;"}else i.field?t.modules.localize.bind("columns|"+i.field,function(t){e._formatColumnHeaderTitle(n,t||i.title||"&nbsp;")}):e._formatColumnHeaderTitle(n,i.title||"&nbsp;");return n},u.prototype._formatColumnHeaderTitle=function(t,e){var i,n,o,r,s,a=this;if(this.definition.titleFormatter&&this.table.modExists("format"))switch(i=this.table.modules.format.getFormatter(this.definition.titleFormatter),s=function(t){a.titleFormatterRendered=t},r={getValue:function(){return e},getElement:function(){return t}},o=this.definition.titleFormatterParams||{},o="function"==typeof o?o():o,n=i.call(this.table.modules.format,r,o,s),void 0===n?"undefined":_typeof(n)){case"object":n instanceof Node?t.appendChild(n):(t.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",n));break;case"undefined":case"null":t.innerHTML="";break;default:t.innerHTML=n}else t.innerHTML=e},u.prototype._buildGroupHeader=function(){var e=this;this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(function(t){e.element.classList.add(t)}),this.element.appendChild(this.groupElement)},u.prototype._getFlatData=function(t){return t[this.field]},u.prototype._getNestedData=function(t){for(var e,i=t,n=this.fieldStructure,o=n.length,r=0;r<o&&(e=i=i[n[r]]);r++);return e},u.prototype._setFlatData=function(t,e){this.field&&(t[this.field]=e)},u.prototype._setNesteData=function(t,e){for(var i=t,n=this.fieldStructure,o=n.length,r=0;r<o;r++)r==o-1?i[n[r]]=e:(i[n[r]]||(i[n[r]]={}),i=i[n[r]])},u.prototype.attachColumn=function(t){this.groupElement?(this.columns.push(t),this.groupElement.appendChild(t.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")},u.prototype.verticalAlign=function(e,t){var i=this.parent.isGroup?this.parent.getGroupElement().clientHeight:t||this.parent.getHeadersElement().clientHeight;this.element.style.height=i+"px",this.isGroup&&(this.groupElement.style.minHeight=i-this.contentElement.offsetHeight+"px"),this.isGroup||"top"===e||(this.element.style.paddingTop="bottom"===e?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(t){t.verticalAlign(e)})},u.prototype.clearVerticalAlign=function(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(t){t.clearVerticalAlign()})},u.prototype.bindModuleColumns=function(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)},u.prototype.getElement=function(){return this.element},u.prototype.getGroupElement=function(){return this.groupElement},u.prototype.getField=function(){return this.field},u.prototype.getFirstColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this},u.prototype.getLastColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this},u.prototype.getColumns=function(){return this.columns},u.prototype.getCells=function(){return this.cells},u.prototype.getTopColumn=function(){return this.parent.isGroup?this.parent.getTopColumn():this},u.prototype.getDefinition=function(t){var e=[];return this.isGroup&&t&&(this.columns.forEach(function(t){e.push(t.getDefinition(!0))}),this.definition.columns=e),this.definition},u.prototype.checkColumnVisibility=function(){var e=!1;this.columns.forEach(function(t){t.visible&&(e=!0)}),e?(this.show(),this.parent.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1)):this.hide()},u.prototype.show=function(t,e){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(t){t.show()}),this.isGroup||null!==this.width||this.reinitializeWidth(),this.table.columnManager._verticalAlignHeaders(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!e&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),t||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths())},u.prototype.hide=function(t,e){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager._verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(t){t.hide()}),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!e&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),t||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths())},u.prototype.matchChildWidths=function(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(t){t.visible&&(e+=t.getWidth())}),this.contentElement.style.maxWidth=e-1+"px")},u.prototype.setWidth=function(t){this.widthFixed=!0,this.setWidthActual(t)},u.prototype.setWidthActual=function(t){isNaN(t)&&(t=Math.floor(this.table.element.clientWidth/100*parseInt(t))),t=Math.max(this.minWidth,t),this.width=t,this.widthStyled=t?t+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(t){t.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()},u.prototype.checkCellHeights=function(){var e=[];this.cells.forEach(function(t){t.row.heightInitialized&&(null!==t.row.getElement().offsetParent?(e.push(t.row),t.row.clearCellHeight()):t.row.heightInitialized=!1)}),e.forEach(function(t){t.calcHeight()}),e.forEach(function(t){t.setCellHeight()})},u.prototype.getWidth=function(){return this.width},u.prototype.getHeight=function(){return this.element.offsetHeight},u.prototype.setMinWidth=function(t){this.minWidth=t,this.minWidthStyled=t?t+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(t){t.setMinWidth()})},u.prototype.delete=function(){var o=this;return new Promise(function(t,e){o.isGroup&&o.columns.forEach(function(t){t.delete()});for(var i=o.cells.length,n=0;n<i;n++)o.cells[0].delete();o.element.parentNode.removeChild(o.element),o.table.columnManager.deregisterColumn(o),t()})},u.prototype.columnRendered=function(){this.titleFormatterRendered&&this.titleFormatterRendered()},u.prototype.generateCell=function(t){var e=new s(this,t);return this.cells.push(e),e},u.prototype.nextColumn=function(){var t=this.table.columnManager.findColumnIndex(this);return-1<t&&this._nextVisibleColumn(t+1)},u.prototype._nextVisibleColumn=function(t){var e=this.table.columnManager.getColumnByIndex(t);return!e||e.visible?e:this._nextVisibleColumn(t+1)},u.prototype.prevColumn=function(){var t=this.table.columnManager.findColumnIndex(this);return-1<t&&this._prevVisibleColumn(t-1)},u.prototype._prevVisibleColumn=function(t){var e=this.table.columnManager.getColumnByIndex(t);return!e||e.visible?e:this._prevVisibleColumn(t-1)},u.prototype.reinitializeWidth=function(t){this.widthFixed=!1,void 0===this.definition.width||t||this.setWidth(this.definition.width),this.table.modExists("filter")&&this.table.modules.filter.hideHeaderFilterElements(),this.fitToData(),this.table.modExists("filter")&&this.table.modules.filter.showHeaderFilterElements()},u.prototype.fitToData=function(){this.widthFixed||(this.element.style.width="",this.cells.forEach(function(t){t.clearWidth()}));var i=this.element.offsetWidth;this.width&&this.widthFixed||(this.cells.forEach(function(t){var e=t.getWidth();i<e&&(i=e)}),i&&this.setWidthActual(i+1))},u.prototype.updateDefinition=function(t){var o=this;return new Promise(function(e,i){var n;o.isGroup?(console.warn("Column Update Error - The updateDefintion function is only available on columns, not column groups"),i("Column Update Error - The updateDefintion function is only available on columns, not column groups")):(n=Object.assign({},o.getDefinition()),n=Object.assign(n,t),o.table.columnManager.addColumn(n,!1,o).then(function(t){n.field==o.field&&(o.field=!1),o.delete().then(function(){e(t.getComponent())}).catch(function(t){i(t)})}).catch(function(t){i(t)}))})},u.prototype.deleteCell=function(t){var e=this.cells.indexOf(t);-1<e&&this.cells.splice(e,1)},u.prototype.defaultOptionList=["title","field","columns","visible","align","width","minWidth","widthGrow","widthShrink","resizable","frozen","responsive","tooltip","cssClass","rowHandle","hideInHtml","print","htmlOutput","sorter","sorterParams","formatter","formatterParams","variableHeight","editable","editor","editorParams","validator","mutator","mutatorParams","mutatorData","mutatorDataParams","mutatorEdit","mutatorEditParams","mutatorClipboard","mutatorClipboardParams","accessor","accessorParams","accessorData","accessorDataParams","accessorDownload","accessorDownloadParams","accessorClipboard","accessorClipboardParams","clipboard","download","downloadTitle","topCalc","topCalcParams","topCalcFormatter","topCalcFormatterParams","bottomCalc","bottomCalcParams","bottomCalcFormatter","bottomCalcFormatterParams","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellEditing","cellEdited","cellEditCancelled","headerSort","headerSortStartingDir","headerSortTristate","headerClick","headerDblClick","headerContext","headerTap","headerDblTap","headerTapHold","headerTooltip","headerVertical","editableTitle","titleFormatter","titleFormatterParams","headerFilter","headerFilterPlaceholder","headerFilterParams","headerFilterEmptyCheck","headerFilterFunc","headerFilterFuncParams","headerFilterLiveFilter","print"],u.prototype.getComponent=function(){return new i(this)};function n(t){this.table=t,this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.columnManager=null,this.height=0,this.firstRender=!1,this.renderMode="classic",this.rows=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[],this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1}n.prototype.createHolderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-tableHolder"),t.setAttribute("tabindex",0),t},n.prototype.createTableElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t},n.prototype.getElement=function(){return this.element},n.prototype.getTableElement=function(){return this.tableElement},n.prototype.getRowPosition=function(t,e){return e?this.activeRows.indexOf(t):this.rows.indexOf(t)},n.prototype.setColumnManager=function(t){this.columnManager=t},n.prototype.initialize=function(){var i=this;i.setRenderMode(),i.element.appendChild(i.tableElement),i.firstRender=!0,i.element.addEventListener("scroll",function(){var t=i.element.scrollLeft;i.scrollLeft!=t&&(i.columnManager.scrollHorizontal(t),i.table.options.groupBy&&i.table.modules.groupRows.scrollHeaders(t),i.table.modExists("columnCalcs")&&i.table.modules.columnCalcs.scrollHorizontal(t),i.table.options.scrollHorizontal(t)),i.scrollLeft=t}),"virtual"===this.renderMode&&i.element.addEventListener("scroll",function(){var t=i.element.scrollTop,e=i.scrollTop>t;i.scrollTop!=t?(i.scrollTop=t,i.scrollVertical(e),"scroll"==i.table.options.ajaxProgressiveLoad&&i.table.modules.ajax.nextPage(i.element.scrollHeight-i.element.clientHeight-t),i.table.options.scrollVertical(t)):i.scrollTop=t})},n.prototype.findRow=function(e){var i=this;return"object"!=(void 0===e?"undefined":_typeof(e))?null!=e&&(i.rows.find(function(t){return t.data[i.table.options.index]==e})||!1):e instanceof d?e:e instanceof E?e._getSelf()||!1:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&i.rows.find(function(t){return t.element===e})||!1},n.prototype.getRowFromDataObject=function(e){return this.rows.find(function(t){return t.data===e})||!1},n.prototype.getRowFromPosition=function(t,e){return e?this.activeRows[t]:this.rows[t]},n.prototype.scrollToRow=function(t,i,n){var o,r=this,s=this.getDisplayRows().indexOf(t),a=t.getElement(),l=0;return new Promise(function(t,e){if(-1<s){if(void 0===i&&(i=r.table.options.scrollToRowPosition),void 0===n&&(n=r.table.options.scrollToRowIfVisible),"nearest"===i)switch(r.renderMode){case"classic":o=T.prototype.helpers.elOffset(a).top,i=Math.abs(r.element.scrollTop-o)>Math.abs(r.element.scrollTop+r.element.clientHeight-o)?"bottom":"top";break;case"virtual":i=Math.abs(r.vDomTop-s)>Math.abs(r.vDomBottom-s)?"bottom":"top"}if(!n&&T.prototype.helpers.elVisible(a)&&0<(l=T.prototype.helpers.elOffset(a).top-T.prototype.helpers.elOffset(r.element).top)&&l<r.element.clientHeight-a.offsetHeight)return!1;switch(r.renderMode){case"classic":r.element.scrollTop=T.prototype.helpers.elOffset(a).top-T.prototype.helpers.elOffset(r.element).top+r.element.scrollTop;break;case"virtual":r._virtualRenderFill(s,!0)}switch(i){case"middle":case"center":r.element.scrollHeight-r.element.scrollTop==r.element.clientHeight?r.element.scrollTop=r.element.scrollTop+(a.offsetTop-r.element.scrollTop)-(r.element.scrollHeight-a.offsetTop)/2:r.element.scrollTop=r.element.scrollTop-r.element.clientHeight/2;break;case"bottom":r.element.scrollHeight-r.element.scrollTop==r.element.clientHeight?r.element.scrollTop=r.element.scrollTop-(r.element.scrollHeight-a.offsetTop)+a.offsetHeight:r.element.scrollTop=r.element.scrollTop-r.element.clientHeight+a.offsetHeight}t()}else console.warn("Scroll Error - Row not visible"),e("Scroll Error - Row not visible")})},n.prototype.setData=function(i,n){var o=this,r=this;return new Promise(function(t,e){n&&o.getDisplayRows().length?r.table.options.pagination?r._setDataActual(i,!0):o.reRenderInPosition(function(){r._setDataActual(i)}):(o.table.options.autoColumns&&o.table.columnManager.generateColumnsFromRowData(i),o.resetScroll(),o._setDataActual(i)),t()})},n.prototype._setDataActual=function(t,e){var n=this;n.table.options.dataLoading.call(this.table,t),this._wipeElements(),this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.clear(),Array.isArray(t)?(this.table.modExists("selectRow")&&this.table.modules.selectRow.clearSelectionData(),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchData(t),t.forEach(function(t,e){if(t&&"object"===(void 0===t?"undefined":_typeof(t))){var i=new d(t,n);n.rows.push(i)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",t)}),n.table.options.dataLoaded.call(this.table,t),n.refreshActiveData(!1,!1,e)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",void 0===t?"undefined":_typeof(t),"\nData:     ",t)},n.prototype._wipeElements=function(){this.rows.forEach(function(t){t.wipe()}),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.wipe(),this.rows=[]},n.prototype.deleteRow=function(i,t){var e=this.rows.indexOf(i),n=this.activeRows.indexOf(i);-1<n&&this.activeRows.splice(n,1),-1<e&&this.rows.splice(e,1),this.setActiveRows(this.activeRows),this.displayRowIterator(function(t){var e=t.indexOf(i);-1<e&&t.splice(e,1)}),t||this.reRenderInPosition(),this.table.options.rowDeleted.call(this.table,i.getComponent()),this.table.options.dataEdited.call(this.table,this.getData()),this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.updateGroupRows(!0):this.table.options.pagination&&this.table.modExists("page")?this.refreshActiveData(!1,!1,!0):this.table.options.pagination&&this.table.modExists("page")&&this.refreshActiveData("page")},n.prototype.addRow=function(t,e,i,n){var o=this.addRowActual(t,e,i,n);return this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowAdd",o,{data:t,pos:e,index:i}),o},n.prototype.addRows=function(i,n,o){var r=this,s=this,a=[];return new Promise(function(t,e){n=r.findAddRowPos(n),Array.isArray(i)||(i=[i]),i.length-1,(void 0===o&&n||void 0!==o&&!n)&&i.reverse(),i.forEach(function(t,e){var i=s.addRow(t,n,o,!0);a.push(i)}),r.table.options.groupBy&&r.table.modExists("groupRows")?r.table.modules.groupRows.updateGroupRows(!0):r.table.options.pagination&&r.table.modExists("page")?r.refreshActiveData(!1,!1,!0):r.reRenderInPosition(),r.table.modExists("columnCalcs")&&r.table.modules.columnCalcs.recalc(r.table.rowManager.activeRows),t(a)})},n.prototype.findAddRowPos=function(t){return void 0===t&&(t=this.table.options.addRowPos),"pos"===t&&(t=!0),"bottom"===t&&(t=!1),t},n.prototype.addRowActual=function(t,e,i,n){var o,r=t instanceof d?t:new d(t||{},this),s=this.findAddRowPos(e);if(!i&&this.table.options.pagination&&"page"==this.table.options.paginationAddRow&&(o=this.getDisplayRows(),s?o.length?i=o[0]:this.activeRows.length&&(i=this.activeRows[this.activeRows.length-1],s=!1):o.length&&(i=o[o.length-1],s=!(o.length<this.table.modules.page.getPageSize()))),i=i&&this.findRow(i),this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.assignRowToGroup(r);var a=r.getGroup().rows;1<a.length&&(!i||i&&-1==a.indexOf(i)?s?a[0]!==r&&(i=a[0],this._moveRowInArray(r.getGroup().rows,r,i,!s)):a[a.length-1]!==r&&(i=a[a.length-1],this._moveRowInArray(r.getGroup().rows,r,i,!s)):this._moveRowInArray(r.getGroup().rows,r,i,!s))}if(i){var l=this.rows.indexOf(i),c=this.activeRows.indexOf(i);this.displayRowIterator(function(t){var e=t.indexOf(i);-1<e&&t.splice(s?e:e+1,0,r)}),-1<c&&this.activeRows.splice(s?c:c+1,0,r),-1<l&&this.rows.splice(s?l:l+1,0,r)}else s?(this.displayRowIterator(function(t){t.unshift(r)}),this.activeRows.unshift(r),this.rows.unshift(r)):(this.displayRowIterator(function(t){t.push(r)}),this.activeRows.push(r),this.rows.push(r));return this.setActiveRows(this.activeRows),this.table.options.rowAdded.call(this.table,r.getComponent()),this.table.options.dataEdited.call(this.table,this.getData()),n||this.reRenderInPosition(),r},n.prototype.moveRow=function(t,e,i){this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowMove",t,{pos:this.getRowPosition(t),to:e,after:i}),this.moveRowActual(t,e,i),this.table.options.rowMoved.call(this.table,t.getComponent())},n.prototype.moveRowActual=function(e,i,n){var o=this;if(this._moveRowInArray(this.rows,e,i,n),this._moveRowInArray(this.activeRows,e,i,n),this.displayRowIterator(function(t){o._moveRowInArray(t,e,i,n)}),this.table.options.groupBy&&this.table.modExists("groupRows")){var t=i.getGroup(),r=e.getGroup();t===r?this._moveRowInArray(t.rows,e,i,n):(r&&r.removeRow(e),t.insertRow(e,i,n))}},n.prototype._moveRowInArray=function(t,e,i,n){var o,r,s;if(e!==i&&(-1<(o=t.indexOf(e))&&(t.splice(o,1),-1<(r=t.indexOf(i))?n?t.splice(r+1,0,e):t.splice(r,0,e):t.splice(o,0,e)),t===this.getDisplayRows())){s=o<r?r:o+1;for(var a=o<r?o:r;a<=s;a++)t[a]&&this.styleRow(t[a],a)}},n.prototype.clearData=function(){this.setData([])},n.prototype.getRowIndex=function(t){return this.findRowIndex(t,this.rows)},n.prototype.getDisplayRowIndex=function(t){var e=this.getDisplayRows().indexOf(t);return-1<e&&e},n.prototype.nextDisplayRow=function(t,e){var i=this.getDisplayRowIndex(t),n=!1;return!1!==i&&i<this.displayRowsCount-1&&(n=this.getDisplayRows()[i+1]),!n||n instanceof d&&"row"==n.type?n:this.nextDisplayRow(n,e)},n.prototype.prevDisplayRow=function(t,e){var i=this.getDisplayRowIndex(t),n=!1;return i&&(n=this.getDisplayRows()[i-1]),!n||n instanceof d&&"row"==n.type?n:this.prevDisplayRow(n,e)},n.prototype.findRowIndex=function(t,e){var i;return!!((t=this.findRow(t))&&-1<(i=e.indexOf(t)))&&i},n.prototype.getData=function(t,e){var i=[];return this.getRows(t).forEach(function(t){i.push(t.getData(e||"data"))}),i},n.prototype.getComponents=function(t){var e=[];return this.getRows(t).forEach(function(t){e.push(t.getComponent())}),e},n.prototype.getDataCount=function(t){return this.getRows(t).length},n.prototype._genRemoteRequest=function(){var e=this,t=e.table,i=t.options,n={};if(t.modExists("page")){if(i.ajaxSorting){var o=e.table.modules.sort.getSort();o.forEach(function(t){delete t.column}),n[e.table.modules.page.paginationDataSentNames.sorters]=o}if(i.ajaxFiltering){var r=e.table.modules.filter.getFilters(!0,!0);n[e.table.modules.page.paginationDataSentNames.filters]=r}e.table.modules.ajax.setParams(n,!0)}t.modules.ajax.sendRequest().then(function(t){e.setData(t)}).catch(function(t){})},n.prototype.filterRefresh=function(){var t=this.table,e=t.options,i=this.scrollLeft;e.ajaxFiltering?"remote"==e.pagination&&t.modExists("page")?(t.modules.page.reset(!0),t.modules.page.setPage(1).then(function(){}).catch(function(){})):e.ajaxProgressiveLoad?t.modules.ajax.loadData().then(function(){}).catch(function(){}):this._genRemoteRequest():this.refreshActiveData("filter"),this.scrollHorizontal(i)},n.prototype.sorterRefresh=function(t){var e=this.table,i=this.table.options,n=this.scrollLeft;i.ajaxSorting?("remote"==i.pagination||i.progressiveLoad)&&e.modExists("page")?(e.modules.page.reset(!0),e.modules.page.setPage(1).then(function(){}).catch(function(){})):i.ajaxProgressiveLoad?e.modules.ajax.loadData().then(function(){}).catch(function(){}):this._genRemoteRequest():this.refreshActiveData(t?"filter":"sort"),this.scrollHorizontal(n)},n.prototype.scrollHorizontal=function(t){this.scrollLeft=t,this.element.scrollLeft=t,this.table.options.groupBy&&this.table.modules.groupRows.scrollHeaders(t),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.scrollHorizontal(t)},n.prototype.refreshActiveData=function(t,e,i){var n,o=this,r=this,s=this.table,a=["all","filter","sort","display","freeze","group","tree","page"];if(this.redrawBlock)(!this.redrawBlockRestoreConfig||a.indexOf(t)<a.indexOf(this.redrawBlockRestoreConfig.stage))&&(this.redrawBlockRestoreConfig={stage:t,skipStage:e,renderInPosition:i});else{switch(r.table.modExists("edit")&&r.table.modules.edit.cancelEdit(),t=t||"all",s.options.selectable&&!s.options.selectablePersistence&&s.modExists("selectRow")&&s.modules.selectRow.deselectRows(),t){case"all":case"filter":e?e=!1:s.modExists("filter")?r.setActiveRows(s.modules.filter.filter(r.rows)):r.setActiveRows(r.rows.slice(0));case"sort":e?e=!1:s.modExists("sort")&&s.modules.sort.sort(this.activeRows),this.rowNumColumn&&this.activeRows.forEach(function(t){var e=t.getCell(o.rowNumColumn);e&&e._generateContents()});case"display":this.resetDisplayRows();case"freeze":e?e=!1:this.table.modExists("frozenRows")&&s.modules.frozenRows.isFrozen()&&(s.modules.frozenRows.getDisplayIndex()||s.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex()),n=s.modules.frozenRows.getDisplayIndex(),!0!==(n=r.setDisplayRows(s.modules.frozenRows.getRows(this.getDisplayRows(n-1)),n))&&s.modules.frozenRows.setDisplayIndex(n));case"group":e?e=!1:s.options.groupBy&&s.modExists("groupRows")&&(s.modules.groupRows.getDisplayIndex()||s.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex()),n=s.modules.groupRows.getDisplayIndex(),!0!==(n=r.setDisplayRows(s.modules.groupRows.getRows(this.getDisplayRows(n-1)),n))&&s.modules.groupRows.setDisplayIndex(n));case"tree":e?e=!1:s.options.dataTree&&s.modExists("dataTree")&&(s.modules.dataTree.getDisplayIndex()||s.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex()),n=s.modules.dataTree.getDisplayIndex(),!0!==(n=r.setDisplayRows(s.modules.dataTree.getRows(this.getDisplayRows(n-1)),n))&&s.modules.dataTree.setDisplayIndex(n)),s.options.pagination&&s.modExists("page")&&!i&&"local"==s.modules.page.getMode()&&s.modules.page.reset();case"page":e?e=!1:s.options.pagination&&s.modExists("page")&&(s.modules.page.getDisplayIndex()||s.modules.page.setDisplayIndex(this.getNextDisplayIndex()),n=s.modules.page.getDisplayIndex(),"local"==s.modules.page.getMode()&&s.modules.page.setMaxRows(this.getDisplayRows(n-1).length),!0!==(n=r.setDisplayRows(s.modules.page.getRows(this.getDisplayRows(n-1)),n))&&s.modules.page.setDisplayIndex(n))}T.prototype.helpers.elVisible(r.element)&&(i?r.reRenderInPosition():(r.renderTable(),s.options.layoutColumnsOnNewData&&r.table.columnManager.redraw(!0))),s.modExists("columnCalcs")&&s.modules.columnCalcs.recalc(this.activeRows)}},n.prototype.setActiveRows=function(t){this.activeRows=t,this.activeRowsCount=this.activeRows.length},n.prototype.resetDisplayRows=function(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length,this.table.modExists("frozenRows")&&this.table.modules.frozenRows.setDisplayIndex(0),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.setDisplayIndex(0),this.table.options.pagination&&this.table.modExists("page")&&this.table.modules.page.setDisplayIndex(0)},n.prototype.getNextDisplayIndex=function(){return this.displayRows.length},n.prototype.setDisplayRows=function(t,e){var i=!0;return i=e&&void 0!==this.displayRows[e]?(this.displayRows[e]=t,!0):(this.displayRows.push(t),e=this.displayRows.length-1),e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),i},n.prototype.getDisplayRows=function(t){return void 0===t?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]},n.prototype.getVisibleRows=function(t){var e=this.element.scrollTop,i=this.element.clientHeight+e,n=!1,o=0,r=0,s=this.getDisplayRows();if(t){this.getDisplayRows();for(var a=this.vDomTop;a<=this.vDomBottom;a++)if(s[a])if(n){if(!(0<=i-s[a].getElement().offsetTop))break;r=a}else if(0<=e-s[a].getElement().offsetTop)o=a;else{if(n=!0,!(0<=i-s[a].getElement().offsetTop))break;r=a}}else o=this.vDomTop,r=this.vDomBottom;return s.slice(o,r+1)},n.prototype.displayRowIterator=function(t){this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length},n.prototype.getRows=function(t){var e;switch(t){case"active":e=this.activeRows;break;case"visible":e=this.getVisibleRows(!0);break;default:e=this.rows}return e},n.prototype.reRenderInPosition=function(t){if("virtual"==this.getRenderMode())if(this.redrawBlock)t?t():this.redrawBlockRederInPosition=!0;else{for(var e=this.element.scrollTop,i=!1,n=!1,o=this.scrollLeft,r=this.getDisplayRows(),s=this.vDomTop;s<=this.vDomBottom;s++)if(r[s]){var a=e-r[s].getElement().offsetTop;if(!(!1===n||Math.abs(a)<n))break;n=a,i=s}t&&t(),this._virtualRenderFill(!1===i?this.displayRowsCount-1:i,!0,n||0),this.scrollHorizontal(o)}else this.renderTable(),t&&t()},n.prototype.setRenderMode=function(){(this.table.element.clientHeight||this.table.options.height)&&this.table.options.virtualDom?this.renderMode="virtual":this.renderMode="classic"},n.prototype.getRenderMode=function(){return this.renderMode},n.prototype.renderTable=function(){var t=this;switch(t.table.options.renderStarted.call(this.table),t.element.scrollTop=0,t.renderMode){case"classic":t._simpleRender();break;case"virtual":t._virtualRenderFill()}t.firstRender&&(t.displayRowsCount?(t.firstRender=!1,t.table.modules.layout.layout()):t.renderEmptyScroll()),t.table.modExists("frozenColumns")&&t.table.modules.frozenColumns.layout(),t.displayRowsCount||t.table.options.placeholder&&(this.renderMode&&t.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),t.getElement().appendChild(t.table.options.placeholder)),t.table.options.renderComplete.call(this.table)},n.prototype._simpleRender=function(){this._clearVirtualDom(),this.displayRowsCount?this.checkClassicModeGroupHeaderWidth():this.renderEmptyScroll()},n.prototype.checkClassicModeGroupHeaderWidth=function(){var i=this,n=this.tableElement,o=!0;i.getDisplayRows().forEach(function(t,e){i.styleRow(t,e),n.appendChild(t.getElement()),t.initialize(!0),"group"!==t.type&&(o=!1)}),n.style.minWidth=o?i.table.columnManager.getWidth()+"px":""},n.prototype.renderEmptyScroll=function(){this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px",this.tableElement.style.minHeight="1px",this.tableElement.style.visibility="hidden"},n.prototype._clearVirtualDom=function(){var t=this.tableElement;for(this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minWidth="",t.style.minHeight="",t.style.visibility="",this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0},n.prototype.styleRow=function(t,e){var i=t.getElement();e%2?(i.classList.add("tabulator-row-even"),i.classList.remove("tabulator-row-odd")):(i.classList.add("tabulator-row-odd"),i.classList.remove("tabulator-row-even"))},n.prototype._virtualRenderFill=function(t,e,i){var n=this,o=n.tableElement,r=n.element,s=0,a=0,l=0,c=0,u=!0,d=n.getDisplayRows();if(i=i||0,t=t||0){for(;o.firstChild;)o.removeChild(o.firstChild);var h=(n.displayRowsCount-t+1)*n.vDomRowHeight;h<n.height&&(t-=Math.ceil((n.height-h)/n.vDomRowHeight))<0&&(t=0),t-=s=Math.min(Math.max(Math.floor(n.vDomWindowBuffer/n.vDomRowHeight),n.vDomWindowMinMarginRows),t)}else n._clearVirtualDom();if(n.displayRowsCount&&T.prototype.helpers.elVisible(n.element)){for(n.vDomTop=t,n.vDomBottom=t-1;(a<=n.height+n.vDomWindowBuffer||c<n.vDomWindowMinTotalRows)&&n.vDomBottom<n.displayRowsCount-1;){var p,f=n.vDomBottom+1,g=d[f];n.styleRow(g,f),o.appendChild(g.getElement()),g.initialized?g.heightInitialized||g.normalizeHeight(!0):g.initialize(!0),p=g.getHeight(),c<s?l+=p:a+=p,p>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*p),"group"!==g.type&&(u=!1),n.vDomBottom++,c++}t?(n.vDomTopPad=e?n.vDomRowHeight*this.vDomTop+i:n.scrollTop-l,n.vDomBottomPad=n.vDomBottom==n.displayRowsCount-1?0:Math.max(n.vDomScrollHeight-n.vDomTopPad-a-l,0)):(this.vDomTopPad=0,n.vDomRowHeight=Math.floor((a+l)/c),n.vDomBottomPad=n.vDomRowHeight*(n.displayRowsCount-n.vDomBottom-1),n.vDomScrollHeight=l+a+n.vDomBottomPad-n.height),o.style.paddingTop=n.vDomTopPad+"px",o.style.paddingBottom=n.vDomBottomPad+"px",e&&(this.scrollTop=n.vDomTopPad+l+i-(this.element.scrollWidth>this.element.clientWidth?this.element.offsetHeight-this.element.clientHeight:0)),this.scrollTop=Math.min(this.scrollTop,this.element.scrollHeight-this.height),this.element.scrollWidth>this.element.offsetWidth&&e&&(this.scrollTop+=this.element.offsetHeight-this.element.clientHeight),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,r.scrollTop=this.scrollTop,o.style.minWidth=u?n.table.columnManager.getWidth()+"px":"",n.table.options.groupBy&&"fitDataFill"!=n.table.modules.layout.getMode()&&n.displayRowsCount==n.table.modules.groupRows.countGroups()&&(n.tableElement.style.minWidth=n.table.columnManager.getWidth())}else this.renderEmptyScroll()},n.prototype.scrollVertical=function(t){var e=this.scrollTop-this.vDomScrollPosTop,i=this.scrollTop-this.vDomScrollPosBottom,n=2*this.vDomWindowBuffer;if(n<-e||n<i){var o=this.scrollLeft;this._virtualRenderFill(Math.floor(this.element.scrollTop/this.element.scrollHeight*this.displayRowsCount)),this.scrollHorizontal(o)}else t?(e<0&&this._addTopRow(-e),i<0&&this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer&&this._removeBottomRow(-i)):(0<=e&&this.scrollTop>this.vDomWindowBuffer&&this._removeTopRow(e),0<=i&&this._addBottomRow(i))},n.prototype._addTopRow=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.tableElement,n=this.getDisplayRows();if(this.vDomTop){var o=this.vDomTop-1,r=n[o],s=r.getHeight()||this.vDomRowHeight;s<=t&&(this.styleRow(r,o),i.insertBefore(r.getElement(),i.firstChild),r.initialized&&r.heightInitialized||(this.vDomTopNewRows.push(r),r.heightInitialized||r.clearCellHeight()),r.initialize(),this.vDomTopPad-=s,this.vDomTopPad<0&&(this.vDomTopPad=o*this.vDomRowHeight),o||(this.vDomTopPad=0),i.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=s,this.vDomTop--),t=-(this.scrollTop-this.vDomScrollPosTop),r.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*r.getHeight()),e<this.vDomMaxRenderChain&&this.vDomTop&&t>=(n[this.vDomTop-1].getHeight()||this.vDomRowHeight)?this._addTopRow(t,e+1):this._quickNormalizeRowHeight(this.vDomTopNewRows)}},n.prototype._removeTopRow=function(t){var e=this.tableElement,i=this.getDisplayRows()[this.vDomTop],n=i.getHeight()||this.vDomRowHeight;if(n<=t){var o=i.getElement();o.parentNode.removeChild(o),this.vDomTopPad+=n,e.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?n:n+this.vDomWindowBuffer,this.vDomTop++,t=this.scrollTop-this.vDomScrollPosTop,this._removeTopRow(t)}},n.prototype._addBottomRow=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.tableElement,n=this.getDisplayRows();if(this.vDomBottom<this.displayRowsCount-1){var o=this.vDomBottom+1,r=n[o],s=r.getHeight()||this.vDomRowHeight;s<=t&&(this.styleRow(r,o),i.appendChild(r.getElement()),r.initialized&&r.heightInitialized||(this.vDomBottomNewRows.push(r),r.heightInitialized||r.clearCellHeight()),r.initialize(),this.vDomBottomPad-=s,(this.vDomBottomPad<0||o==this.displayRowsCount-1)&&(this.vDomBottomPad=0),i.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=s,this.vDomBottom++),t=this.scrollTop-this.vDomScrollPosBottom,r.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*r.getHeight()),e<this.vDomMaxRenderChain&&this.vDomBottom<this.displayRowsCount-1&&t>=(n[this.vDomBottom+1].getHeight()||this.vDomRowHeight)?this._addBottomRow(t,e+1):this._quickNormalizeRowHeight(this.vDomBottomNewRows)}},n.prototype._removeBottomRow=function(t){var e=this.tableElement,i=this.getDisplayRows()[this.vDomBottom],n=i.getHeight()||this.vDomRowHeight;if(n<=t){var o=i.getElement();o.parentNode&&o.parentNode.removeChild(o),this.vDomBottomPad+=n,this.vDomBottomPad<0&&(this.vDomBottomPad=0),e.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=n,this.vDomBottom--,t=-(this.scrollTop-this.vDomScrollPosBottom),this._removeBottomRow(t)}},n.prototype._quickNormalizeRowHeight=function(t){t.forEach(function(t){t.calcHeight()}),t.forEach(function(t){t.setCellHeight()}),t.length=0},n.prototype.normalizeHeight=function(){this.activeRows.forEach(function(t){t.normalizeHeight()})},n.prototype.adjustTableSize=function(){if("virtual"===this.renderMode){this.height=this.element.clientHeight,this.vDomWindowBuffer=this.table.options.virtualDomBuffer||this.height;var t=this.columnManager.getElement().offsetHeight+(this.table.footerManager&&!this.table.footerManager.external?this.table.footerManager.getElement().offsetHeight:0);this.element.style.minHeight="calc(100% - "+t+"px)",this.element.style.height="calc(100% - "+t+"px)",this.element.style.maxHeight="calc(100% - "+t+"px)"}},n.prototype.reinitialize=function(){this.rows.forEach(function(t){t.reinitialize()})},n.prototype.blockRedraw=function(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1},n.prototype.restoreRedraw=function(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.stage,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1},n.prototype.redraw=function(t){var e=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,t?this.renderTable():("classic"==this.renderMode?this.table.options.groupBy?this.refreshActiveData("group",!1,!1):this._simpleRender():(this.reRenderInPosition(),this.scrollHorizontal(e)),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))},n.prototype.resetScroll=function(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))};var E=function(t){this._row=t};E.prototype.getData=function(t){return this._row.getData(t)},E.prototype.getElement=function(){return this._row.getElement()},E.prototype.getCells=function(){var e=[];return this._row.getCells().forEach(function(t){e.push(t.getComponent())}),e},E.prototype.getCell=function(t){var e=this._row.getCell(t);return!!e&&e.getComponent()},E.prototype.getIndex=function(){return this._row.getData("data")[this._row.table.options.index]},E.prototype.getPosition=function(t){return this._row.table.rowManager.getRowPosition(this._row,t)},E.prototype.delete=function(){return this._row.delete()},E.prototype.scrollTo=function(){return this._row.table.rowManager.scrollToRow(this._row)},E.prototype.pageTo=function(){if(this._row.table.modExists("page",!0))return this._row.table.modules.page.setPageToRow(this._row)},E.prototype.move=function(t,e){this._row.moveToRow(t,e)},E.prototype.update=function(t){return this._row.updateData(t)},E.prototype.normalizeHeight=function(){this._row.normalizeHeight(!0)},E.prototype.select=function(){this._row.table.modules.selectRow.selectRows(this._row)},E.prototype.deselect=function(){this._row.table.modules.selectRow.deselectRows(this._row)},E.prototype.toggleSelect=function(){this._row.table.modules.selectRow.toggleRow(this._row)},E.prototype.isSelected=function(){return this._row.table.modules.selectRow.isRowSelected(this._row)},E.prototype._getSelf=function(){return this._row},E.prototype.freeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.freezeRow(this._row)},E.prototype.unfreeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.unfreezeRow(this._row)},E.prototype.treeCollapse=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.collapseRow(this._row)},E.prototype.treeExpand=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.expandRow(this._row)},E.prototype.treeToggle=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.toggleRow(this._row)},E.prototype.getTreeParent=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeParent(this._row)},E.prototype.getTreeChildren=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeChildren(this._row)},E.prototype.reformat=function(){return this._row.reinitialize()},E.prototype.getGroup=function(){return this._row.getGroup().getComponent()},E.prototype.getTable=function(){return this._row.table},E.prototype.getNextRow=function(){var t=this._row.nextRow();return t?t.getComponent():t},E.prototype.getPrevRow=function(){var t=this._row.prevRow();return t?t.getComponent():t};var d=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"row";this.table=e.table,this.parent=e,this.data={},this.type=i,this.element=this.createElement(),this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.setData(t),this.generateElement()};d.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.setAttribute("role","row"),t},d.prototype.getElement=function(){return this.element},d.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},d.prototype.generateElement=function(){var e,i,n,o=this;!1!==o.table.options.selectable&&o.table.modExists("selectRow")&&o.table.modules.selectRow.initializeRow(this),!1!==o.table.options.movableRows&&o.table.modExists("moveRow")&&o.table.modules.moveRow.initializeRow(this),!1!==o.table.options.dataTree&&o.table.modExists("dataTree")&&o.table.modules.dataTree.initializeRow(this),"collapse"===o.table.options.responsiveLayout&&o.table.modExists("responsiveLayout")&&o.table.modules.responsiveLayout.initializeRow(this),o.table.options.rowClick&&o.element.addEventListener("click",function(t){o.table.options.rowClick(t,o.getComponent())}),o.table.options.rowDblClick&&o.element.addEventListener("dblclick",function(t){o.table.options.rowDblClick(t,o.getComponent())}),o.table.options.rowContext&&o.element.addEventListener("contextmenu",function(t){o.table.options.rowContext(t,o.getComponent())}),o.table.options.rowMouseEnter&&o.element.addEventListener("mouseenter",function(t){o.table.options.rowMouseEnter(t,o.getComponent())}),o.table.options.rowMouseLeave&&o.element.addEventListener("mouseleave",function(t){o.table.options.rowMouseLeave(t,o.getComponent())}),o.table.options.rowMouseOver&&o.element.addEventListener("mouseover",function(t){o.table.options.rowMouseOver(t,o.getComponent())}),o.table.options.rowMouseOut&&o.element.addEventListener("mouseout",function(t){o.table.options.rowMouseOut(t,o.getComponent())}),o.table.options.rowMouseMove&&o.element.addEventListener("mousemove",function(t){o.table.options.rowMouseMove(t,o.getComponent())}),o.table.options.rowTap&&(n=!1,o.element.addEventListener("touchstart",function(t){n=!0},{passive:!0}),o.element.addEventListener("touchend",function(t){n&&o.table.options.rowTap(t,o.getComponent()),n=!1})),o.table.options.rowDblTap&&(e=null,o.element.addEventListener("touchend",function(t){e?(clearTimeout(e),e=null,o.table.options.rowDblTap(t,o.getComponent())):e=setTimeout(function(){clearTimeout(e),e=null},300)})),o.table.options.rowTapHold&&(i=null,o.element.addEventListener("touchstart",function(t){clearTimeout(i),i=setTimeout(function(){clearTimeout(i),i=null,n=!1,o.table.options.rowTapHold(t,o.getComponent())},1e3)},{passive:!0}),o.element.addEventListener("touchend",function(t){clearTimeout(i),i=null}))},d.prototype.generateCells=function(){this.cells=this.table.columnManager.generateCells(this)},d.prototype.initialize=function(t){var e=this;if(!e.initialized||t){for(e.deleteCells();e.element.firstChild;)e.element.removeChild(e.element.firstChild);this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutRow(this),this.generateCells(),e.cells.forEach(function(t){e.element.appendChild(t.getElement()),t.cellRendered()}),t&&e.normalizeHeight(),e.table.options.dataTree&&e.table.modExists("dataTree")&&e.table.modules.dataTree.layoutRow(this),"collapse"===e.table.options.responsiveLayout&&e.table.modExists("responsiveLayout")&&e.table.modules.responsiveLayout.layoutRow(this),e.table.options.rowFormatter&&e.table.options.rowFormatter(e.getComponent()),e.table.options.resizableRows&&e.table.modExists("resizeRows")&&e.table.modules.resizeRows.initializeRow(e),e.initialized=!0}},d.prototype.reinitializeHeight=function(){this.heightInitialized=!1,null!==this.element.offsetParent&&this.normalizeHeight(!0)},d.prototype.reinitialize=function(){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),null!==this.element.offsetParent&&this.initialize(!0)},d.prototype.calcHeight=function(t){var i=0,e=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(t){var e=t.getHeight();i<e&&(i=e)}),this.height=t?Math.max(i,e):this.manualHeight?this.height:Math.max(i,e),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight},d.prototype.setCellHeight=function(){this.cells.forEach(function(t){t.setHeight()}),this.heightInitialized=!0},d.prototype.clearCellHeight=function(){this.cells.forEach(function(t){t.clearHeight()})},d.prototype.normalizeHeight=function(t){t&&this.clearCellHeight(),this.calcHeight(t),this.setCellHeight()},d.prototype.setHeight=function(t,e){this.height==t&&!e||(this.manualHeight=!0,this.height=t,this.heightStyled=t?t+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)},d.prototype.getHeight=function(){return this.outerHeight},d.prototype.getWidth=function(){return this.element.offsetWidth},d.prototype.deleteCell=function(t){var e=this.cells.indexOf(t);-1<e&&this.cells.splice(e,1)},d.prototype.setData=function(t){this.table.modExists("mutator")&&(t=this.table.modules.mutator.transformRow(t,"data",t)),this.data=t,this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchRow(this)},d.prototype.updateData=function(n){var o=this,r=T.prototype.helpers.elVisible(this.element),s={};return new Promise(function(t,e){for(var i in"string"==typeof n&&(n=JSON.parse(n)),o.table.options.reactiveData&&o.table.modExists("reactiveData",!0)&&o.table.modules.reactiveData.block(),o.table.modExists("mutator")&&(s=Object.assign(s,o.data),s=Object.assign(s,n),n=o.table.modules.mutator.transformRow(s,"data",n)),n)o.data[i]=n[i];for(var i in o.table.options.reactiveData&&o.table.modExists("reactiveData",!0)&&o.table.modules.reactiveData.unblock(),n)o.table.columnManager.getColumnsByFieldRoot(i).forEach(function(t){var e=o.getCell(t.getField());if(e){var i=t.getFieldValue(n);e.getValue()!=i&&(e.setValueProcessData(i),r&&e.cellRendered())}});r?(o.normalizeHeight(),o.table.options.rowFormatter&&o.table.options.rowFormatter(o.getComponent())):(o.initialized=!1,o.height=0,o.heightStyled=""),!1!==o.table.options.dataTree&&o.table.modExists("dataTree")&&o.table.modules.dataTree.redrawNeeded(n)&&(o.table.modules.dataTree.initializeRow(o),o.table.modules.dataTree.layoutRow(o),o.table.rowManager.refreshActiveData("tree",!1,!0)),o.table.options.rowUpdated.call(o.table,o.getComponent()),t()})},d.prototype.getData=function(t){return t?this.table.modExists("accessor")?this.table.modules.accessor.transformRow(this.data,t):void 0:this.data},d.prototype.getCell=function(e){return e=this.table.columnManager.findColumn(e),this.cells.find(function(t){return t.column===e})},d.prototype.getCellIndex=function(e){return this.cells.findIndex(function(t){return t===e})},d.prototype.findNextEditableCell=function(t){var e=!1;if(t<this.cells.length-1)for(var i=t+1;i<this.cells.length;i++){var n=this.cells[i];if(n.column.modules.edit&&T.prototype.helpers.elVisible(n.getElement())){var o=!0;if("function"==typeof n.column.modules.edit.check&&(o=n.column.modules.edit.check(n.getComponent())),o){e=n;break}}}return e},d.prototype.findPrevEditableCell=function(t){var e=!1;if(0<t)for(var i=t-1;0<=i;i--){var n=this.cells[i],o=!0;if(n.column.modules.edit&&T.prototype.helpers.elVisible(n.getElement())&&("function"==typeof n.column.modules.edit.check&&(o=n.column.modules.edit.check(n.getComponent())),o)){e=n;break}}return e},d.prototype.getCells=function(){return this.cells},d.prototype.nextRow=function(){return this.table.rowManager.nextDisplayRow(this,!0)||!1},d.prototype.prevRow=function(){return this.table.rowManager.prevDisplayRow(this,!0)||!1},d.prototype.moveToRow=function(t,e){var i=this.table.rowManager.findRow(t);i?(this.table.rowManager.moveRowActual(this,i,!e),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",t)},d.prototype.delete=function(){var o=this;return new Promise(function(t,e){var i,n;o.table.options.history&&o.table.modExists("history")&&(o.table.options.groupBy&&o.table.modExists("groupRows")?(i=(n=o.getGroup().rows).indexOf(o))&&(i=n[i-1]):(i=o.table.rowManager.getRowIndex(o))&&(i=o.table.rowManager.rows[i-1]),o.table.modules.history.action("rowDelete",o,{data:o.getData(),pos:!i,index:i})),o.deleteActual(),t()})},d.prototype.deleteActual=function(t){this.table.rowManager.getRowIndex(this),this.table.modExists("selectRow")&&this.table.modules.selectRow._deselectRow(this,!0),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0),this.modules.group&&this.modules.group.removeRow(this),this.table.rowManager.deleteRow(this,t),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.table.modExists("columnCalcs")&&(this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.columnCalcs.recalcRowGroup(this):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows))},d.prototype.deleteCells=function(){for(var t=this.cells.length,e=0;e<t;e++)this.cells[0].delete()},d.prototype.wipe=function(){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element=!1,this.modules={},this.element.parentNode&&this.element.parentNode.removeChild(this.element)},d.prototype.getGroup=function(){return this.modules.group||!1},d.prototype.getComponent=function(){return new E(this)};function o(t){this._cell=t}o.prototype.getValue=function(){return this._cell.getValue()},o.prototype.getOldValue=function(){return this._cell.getOldValue()},o.prototype.getElement=function(){return this._cell.getElement()},o.prototype.getRow=function(){return this._cell.row.getComponent()},o.prototype.getData=function(){return this._cell.row.getData()},o.prototype.getField=function(){return this._cell.column.getField()},o.prototype.getColumn=function(){return this._cell.column.getComponent()},o.prototype.setValue=function(t,e){void 0===e&&(e=!0),this._cell.setValue(t,e)},o.prototype.restoreOldValue=function(){this._cell.setValueActual(this._cell.getOldValue())},o.prototype.edit=function(t){return this._cell.edit(t)},o.prototype.cancelEdit=function(){this._cell.cancelEdit()},o.prototype.nav=function(){return this._cell.nav()},o.prototype.checkHeight=function(){this._cell.checkHeight()},o.prototype.getTable=function(){return this._cell.table},o.prototype._getSelf=function(){return this._cell};var s=function(t,e){this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.build()};s.prototype.build=function(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data))},s.prototype.generateElement=function(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element},s.prototype._configureCell=function(){var e=this,t=e.column.cellEvents,i=e.element,n=this.column.getField();i.style.textAlign=e.column.hozAlign,n&&i.setAttribute("tabulator-field",n),e.column.definition.cssClass&&e.column.definition.cssClass.split(" ").forEach(function(t){i.classList.add(t)}),"hover"===this.table.options.tooltipGenerationMode&&i.addEventListener("mouseenter",function(t){e._generateTooltip()}),e._bindClickEvents(t),e._bindTouchEvents(t),e._bindMouseEvents(t),e.column.modules.edit&&e.table.modules.edit.bindEditor(e),e.column.definition.rowHandle&&!1!==e.table.options.movableRows&&e.table.modExists("moveRow")&&e.table.modules.moveRow.initializeCell(e),e.column.visible||e.hide()},s.prototype._bindClickEvents=function(i){var n=this,t=n.element;(i.cellClick||n.table.options.cellClick)&&t.addEventListener("click",function(t){var e=n.getComponent();i.cellClick&&i.cellClick.call(n.table,t,e),n.table.options.cellClick&&n.table.options.cellClick.call(n.table,t,e)}),i.cellDblClick||this.table.options.cellDblClick?t.addEventListener("dblclick",function(t){var e=n.getComponent();i.cellDblClick&&i.cellDblClick.call(n.table,t,e),n.table.options.cellDblClick&&n.table.options.cellDblClick.call(n.table,t,e)}):t.addEventListener("dblclick",function(t){t.preventDefault();try{if(document.selection)(e=document.body.createTextRange()).moveToElementText(n.element),e.select();else if(window.getSelection){var e;(e=document.createRange()).selectNode(n.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(e)}}catch(t){}}),(i.cellContext||this.table.options.cellContext)&&t.addEventListener("contextmenu",function(t){var e=n.getComponent();i.cellContext&&i.cellContext.call(n.table,t,e),n.table.options.cellContext&&n.table.options.cellContext.call(n.table,t,e)})},s.prototype._bindMouseEvents=function(i){var n=this,t=n.element;(i.cellMouseEnter||n.table.options.cellMouseEnter)&&t.addEventListener("mouseenter",function(t){var e=n.getComponent();i.cellMouseEnter&&i.cellMouseEnter.call(n.table,t,e),n.table.options.cellMouseEnter&&n.table.options.cellMouseEnter.call(n.table,t,e)}),(i.cellMouseLeave||n.table.options.cellMouseLeave)&&t.addEventListener("mouseleave",function(t){var e=n.getComponent();i.cellMouseLeave&&i.cellMouseLeave.call(n.table,t,e),n.table.options.cellMouseLeave&&n.table.options.cellMouseLeave.call(n.table,t,e)}),(i.cellMouseOver||n.table.options.cellMouseOver)&&t.addEventListener("mouseover",function(t){var e=n.getComponent();i.cellMouseOver&&i.cellMouseOver.call(n.table,t,e),n.table.options.cellMouseOver&&n.table.options.cellMouseOver.call(n.table,t,e)}),(i.cellMouseOut||n.table.options.cellMouseOut)&&t.addEventListener("mouseout",function(t){var e=n.getComponent();i.cellMouseOut&&i.cellMouseOut.call(n.table,t,e),n.table.options.cellMouseOut&&n.table.options.cellMouseOut.call(n.table,t,e)}),(i.cellMouseMove||n.table.options.cellMouseMove)&&t.addEventListener("mousemove",function(t){var e=n.getComponent();i.cellMouseMove&&i.cellMouseMove.call(n.table,t,e),n.table.options.cellMouseMove&&n.table.options.cellMouseMove.call(n.table,t,e)})},s.prototype._bindTouchEvents=function(i){var n,o,r,s=this,t=s.element;(i.cellTap||this.table.options.cellTap)&&(r=!1,t.addEventListener("touchstart",function(t){r=!0},{passive:!0}),t.addEventListener("touchend",function(t){if(r){var e=s.getComponent();i.cellTap&&i.cellTap.call(s.table,t,e),s.table.options.cellTap&&s.table.options.cellTap.call(s.table,t,e)}r=!1})),(i.cellDblTap||this.table.options.cellDblTap)&&(n=null,t.addEventListener("touchend",function(t){if(n){clearTimeout(n),n=null;var e=s.getComponent();i.cellDblTap&&i.cellDblTap.call(s.table,t,e),s.table.options.cellDblTap&&s.table.options.cellDblTap.call(s.table,t,e)}else n=setTimeout(function(){clearTimeout(n),n=null},300)})),(i.cellTapHold||this.table.options.cellTapHold)&&(o=null,t.addEventListener("touchstart",function(e){clearTimeout(o),o=setTimeout(function(){clearTimeout(o),o=null,r=!1;var t=s.getComponent();i.cellTapHold&&i.cellTapHold.call(s.table,e,t),s.table.options.cellTapHold&&s.table.options.cellTapHold.call(s.table,e,t)},1e3)},{passive:!0}),t.addEventListener("touchend",function(t){clearTimeout(o),o=null}))},s.prototype._generateContents=function(){var t;switch(void 0===(t=this.table.modExists("format")?this.table.modules.format.formatValue(this):this.element.innerHTML=this.value)?"undefined":_typeof(t)){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",null!=t&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=t}},s.prototype.cellRendered=function(){this.table.modExists("format")&&this.table.modules.format.cellRendered&&this.table.modules.format.cellRendered(this)},s.prototype._generateTooltip=function(){var t=this.column.tooltip;t?(!0===t?t=this.value:"function"==typeof t&&!1===(t=t(this.getComponent()))&&(t=""),void 0===t&&(t=""),this.element.setAttribute("title",t)):this.element.setAttribute("title","")},s.prototype.getElement=function(){return this.element},s.prototype.getValue=function(){return this.value},s.prototype.getOldValue=function(){return this.oldValue},s.prototype.setValue=function(t,e){var i;this.setValueProcessData(t,e)&&(this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("cellEdit",this,{oldValue:this.oldValue,newValue:this.value}),i=this.getComponent(),this.column.cellEvents.cellEdited&&this.column.cellEvents.cellEdited.call(this.table,i),this.table.options.cellEdited.call(this.table,i),this.table.options.dataEdited.call(this.table,this.table.rowManager.getData()))},s.prototype.setValueProcessData=function(t,e){var i=!1;return this.value!=t&&(i=!0,e&&this.column.modules.mutate&&(t=this.table.modules.mutator.transformCell(this,t))),this.setValueActual(t),i&&this.table.modExists("columnCalcs")&&(this.column.definition.topCalc||this.column.definition.bottomCalc)&&(this.table.options.groupBy&&this.table.modExists("groupRows")?("table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs||this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),"table"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.recalcRowGroup(this.row)):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows)),i},s.prototype.setValueActual=function(t){this.oldValue=this.value,this.value=t,this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.block(),this.column.setFieldValue(this.row.data,t),this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.unblock(),this._generateContents(),this._generateTooltip(),this.table.options.resizableColumns&&this.table.modExists("resizeColumns")&&this.table.modules.resizeColumns.initializeColumn("cell",this.column,this.element),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutElement(this.element,this.column)},s.prototype.setWidth=function(){this.width=this.column.width,this.element.style.width=this.column.widthStyled},s.prototype.clearWidth=function(){this.width="",this.element.style.width=""},s.prototype.getWidth=function(){return this.width||this.element.offsetWidth},s.prototype.setMinWidth=function(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled},s.prototype.checkHeight=function(){this.row.reinitializeHeight()},s.prototype.clearHeight=function(){this.element.style.height="",this.height=null},s.prototype.setHeight=function(){this.height=this.row.height,this.element.style.height=this.row.heightStyled},s.prototype.getHeight=function(){return this.height||this.element.offsetHeight},s.prototype.show=function(){this.element.style.display=""},s.prototype.hide=function(){this.element.style.display="none"},s.prototype.edit=function(t){if(this.table.modExists("edit",!0))return this.table.modules.edit.editCell(this,t)},s.prototype.cancelEdit=function(){if(this.table.modExists("edit",!0)){var t=this.table.modules.edit.getCurrentCell();t&&t._getSelf()===this?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}},s.prototype.delete=function(){this.table.rowManager.redrawBlock||this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}},s.prototype.nav=function(){var i=this,t=!1,e=this.row.getCellIndex(this);return{next:function(){var t,e=this.right();return!!e||!(!(t=i.table.rowManager.nextDisplayRow(i.row,!0))||!(e=t.findNextEditableCell(-1)))&&(e.edit(),!0)},prev:function(){var t,e=this.left();return!!e||!(!(t=i.table.rowManager.prevDisplayRow(i.row,!0))||!(e=t.findPrevEditableCell(t.cells.length)))&&(e.edit(),!0)},left:function(){return!!(t=i.row.findPrevEditableCell(e))&&(t.edit(),!0)},right:function(){return!!(t=i.row.findNextEditableCell(e))&&(t.edit(),!0)},up:function(){var t=i.table.rowManager.prevDisplayRow(i.row,!0);t&&t.cells[e].edit()},down:function(){var t=i.table.rowManager.nextDisplayRow(i.row,!0);t&&t.cells[e].edit()}}},s.prototype.getIndex=function(){this.row.getCellIndex(this)},s.prototype.getComponent=function(){return new o(this)};function r(t){this.table=t,this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this._initialize()}r.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t},r.prototype._initialize=function(t){if(this.table.options.footerElement)switch(_typeof(this.table.options.footerElement)){case"string":"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement}},r.prototype.getElement=function(){return this.element},r.prototype.append=function(t,e){this.activate(e),this.element.appendChild(t),this.table.rowManager.adjustTableSize()},r.prototype.prepend=function(t,e){this.activate(e),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()},r.prototype.remove=function(t){t.parentNode.removeChild(t),this.deactivate()},r.prototype.deactivate=function(t){this.element.firstChild&&!t||(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)},r.prototype.activate=function(t){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),t&&this.links.push(t)},r.prototype.redraw=function(){this.links.forEach(function(t){t.footerRedraw()})};var T=function t(e,i){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.modules={},this.initializeElement(e),this.initializeOptions(i||{}),this._create(),t.prototype.comms.register(this)};T.prototype.defaultOptions={height:!1,layout:"fitData",layoutColumnsOnNewData:!1,columnMinWidth:40,columnHeaderVertAlign:"top",columnVertAlign:!1,resizableColumns:!0,resizableRows:!1,autoResize:!0,columns:[],data:[],autoColumns:!1,reactiveData:!1,nestedFieldSeparator:".",tooltips:!1,tooltipsHeader:!1,tooltipGenerationMode:"load",initialSort:!1,initialFilter:!1,initialHeaderFilter:!1,columnHeaderSortMulti:!0,sortOrderReverse:!1,headerSort:!0,headerSortTristate:!1,footerElement:!1,index:"id",keybindings:[],tabEndNewRow:!1,invalidOptionWarnings:!0,clipboard:!1,clipboardCopyStyled:!0,clipboardCopySelector:"active",clipboardCopyFormatter:"table",clipboardPasteParser:"table",clipboardPasteAction:"insert",clipboardCopyConfig:!1,clipboardCopied:function(){},clipboardPasted:function(){},clipboardPasteError:function(){},downloadDataFormatter:!1,downloadReady:function(t,e){return e},downloadComplete:!1,downloadConfig:!1,dataTree:!1,dataTreeElementColumn:!1,dataTreeBranchElement:!0,dataTreeChildIndent:9,dataTreeChildField:"_children",dataTreeCollapseElement:!1,dataTreeExpandElement:!1,dataTreeStartExpanded:!1,dataTreeRowExpanded:function(){},dataTreeRowCollapsed:function(){},printAsHtml:!1,printFormatter:!1,printHeader:!1,printFooter:!1,printCopyStyle:!0,printVisibleRows:!0,printConfig:{},addRowPos:"bottom",selectable:"highlight",selectableRangeMode:"drag",selectableRollingSelection:!0,selectablePersistence:!0,selectableCheck:function(t,e){return!0},headerFilterPlaceholder:!1,headerVisible:!0,history:!1,locale:!1,langs:{},virtualDom:!0,virtualDomBuffer:0,persistentLayout:!1,persistentSort:!1,persistentFilter:!1,persistenceID:"",persistenceMode:!0,persistenceReaderFunc:!1,persistenceWriterFunc:!1,persistence:!1,responsiveLayout:!1,responsiveLayoutCollapseStartOpen:!0,responsiveLayoutCollapseUseFormatters:!0,responsiveLayoutCollapseFormatter:!1,pagination:!1,paginationSize:!1,paginationInitialPage:1,paginationButtonCount:5,paginationSizeSelector:!1,paginationElement:!1,paginationDataSent:{},paginationDataReceived:{},paginationAddRow:"page",ajaxURL:!1,ajaxURLGenerator:!1,ajaxParams:{},ajaxConfig:"get",ajaxContentType:"form",ajaxRequestFunc:!1,ajaxLoader:!0,ajaxLoaderLoading:!1,ajaxLoaderError:!1,ajaxFiltering:!1,ajaxSorting:!1,ajaxProgressiveLoad:!1,ajaxProgressiveLoadDelay:0,ajaxProgressiveLoadScrollMargin:0,groupBy:!1,groupStartOpen:!0,groupValues:!1,groupHeader:!1,htmlOutputConfig:!1,movableColumns:!1,movableRows:!1,movableRowsConnectedTables:!1,movableRowsSender:!1,movableRowsReceiver:"insert",movableRowsSendingStart:function(){},movableRowsSent:function(){},movableRowsSentFailed:function(){},movableRowsSendingStop:function(){},movableRowsReceivingStart:function(){},movableRowsReceived:function(){},movableRowsReceivedFailed:function(){},movableRowsReceivingStop:function(){},scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,placeholder:!1,tableBuilding:function(){},tableBuilt:function(){},renderStarted:function(){},renderComplete:function(){},rowClick:!1,rowDblClick:!1,rowContext:!1,rowTap:!1,rowDblTap:!1,rowTapHold:!1,rowMouseEnter:!1,rowMouseLeave:!1,rowMouseOver:!1,rowMouseOut:!1,rowMouseMove:!1,rowAdded:function(){},rowDeleted:function(){},rowMoved:function(){},rowUpdated:function(){},rowSelectionChanged:function(){},rowSelected:function(){},rowDeselected:function(){},rowResized:function(){},cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1,cellEditing:function(){},cellEdited:function(){},cellEditCancelled:function(){},columnMoved:!1,columnResized:function(){},columnTitleChanged:function(){},columnVisibilityChanged:function(){},htmlImporting:function(){},htmlImported:function(){},dataLoading:function(){},dataLoaded:function(){},dataEdited:function(){},ajaxRequesting:function(){},ajaxResponse:!1,ajaxError:function(){},dataFiltering:!1,dataFiltered:!1,dataSorting:function(){},dataSorted:function(){},groupToggleElement:"arrow",groupClosedShowCalcs:!1,dataGrouping:function(){},dataGrouped:!1,groupVisibilityChanged:function(){},groupClick:!1,groupDblClick:!1,groupContext:!1,groupTap:!1,groupDblTap:!1,groupTapHold:!1,columnCalcs:!0,pageLoaded:function(){},localized:function(){},validationFailed:function(){},historyUndo:function(){},historyRedo:function(){},scrollHorizontal:function(){},scrollVertical:function(){}},T.prototype.initializeOptions=function(t){if(!1!==t.invalidOptionWarnings)for(var e in t)void 0===this.defaultOptions[e]&&console.warn("Invalid table constructor option:",e);for(var e in this.defaultOptions)e in t?this.options[e]=t[e]:Array.isArray(this.defaultOptions[e])?this.options[e]=[]:"object"===_typeof(this.defaultOptions[e])?this.options[e]={}:this.options[e]=this.defaultOptions[e]},T.prototype.initializeElement=function(t){return"undefined"!=typeof HTMLElement&&t instanceof HTMLElement?(this.element=t,!0):"string"==typeof t?(this.element=document.querySelector(t),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",t),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",t),!1)},T.prototype._mapDepricatedFunctionality=function(){(this.options.persistentLayout||this.options.persistentSort||this.options.persistentFilter)&&(this.options.persistence||(this.options.persistence={})),this.options.persistentLayout&&(console.warn("persistentLayout option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.columns&&(this.options.persistence.columns=!0)),this.options.persistentSort&&(console.warn("persistentSort option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.sort&&(this.options.persistence.sort=!0)),this.options.persistentFilter&&(console.warn("persistentFilter option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.filter&&(this.options.persistence.filter=!0)),this.options.columnVertAlign&&(console.warn("columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option"),this.options.columnHeaderVertAlign=this.options.columnVertAlign)},T.prototype._clearSelection=function(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")},T.prototype._create=function(){this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.bindModules(),"TABLE"===this.element.tagName&&this.modExists("htmlTableImport",!0)&&this.modules.htmlTableImport.parseTable(),this.columnManager=new t(this),this.rowManager=new n(this),this.footerManager=new r(this),this.columnManager.setRowManager(this.rowManager),this.rowManager.setColumnManager(this.columnManager),this._buildElement(),this._loadInitialData()},T.prototype._clearObjectPointers=function(){this.options.columns=this.options.columns.slice(0),this.options.reactiveData||(this.options.data=this.options.data.slice(0))},T.prototype._buildElement=function(){var i=this,t=this.element,n=this.modules,e=this.options;for(e.tableBuilding.call(this),t.classList.add("tabulator"),t.setAttribute("role","grid");t.firstChild;)t.removeChild(t.firstChild);for(var o in e.height&&(e.height=isNaN(e.height)?e.height:e.height+"px",t.style.height=e.height),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modExists("layout",!0)&&n.layout.initialize(e.layout),!1!==e.headerFilterPlaceholder&&n.localize.setHeaderFilterPlaceholder(e.headerFilterPlaceholder),e.langs)n.localize.installLang(o,e.langs[o]);if(n.localize.setLocale(e.locale),"string"==typeof e.placeholder){var r=document.createElement("div");r.classList.add("tabulator-placeholder");var s=document.createElement("span");s.innerHTML=e.placeholder,r.appendChild(s),e.placeholder=r}if(t.appendChild(this.columnManager.getElement()),t.appendChild(this.rowManager.getElement()),e.footerElement&&this.footerManager.activate(),e.persistence&&this.modExists("persistence",!0)&&n.persistence.initialize(),e.persistence&&this.modExists("persistence",!0)&&n.persistence.config.columns&&(e.columns=n.persistence.load("columns",e.columns)),e.movableRows&&this.modExists("moveRow")&&n.moveRow.initialize(),e.autoColumns&&this.options.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modExists("columnCalcs")&&n.columnCalcs.initialize(),this.columnManager.setColumns(e.columns),e.dataTree&&this.modExists("dataTree",!0)&&n.dataTree.initialize(),this.modExists("frozenRows")&&this.modules.frozenRows.initialize(),(e.persistence&&this.modExists("persistence",!0)&&n.persistence.config.sort||e.initialSort)&&this.modExists("sort",!0)){var a=[];e.persistence&&this.modExists("persistence",!0)&&n.persistence.config.sort?!1===(a=n.persistence.load("sort"))&&e.initialSort&&(a=e.initialSort):e.initialSort&&(a=e.initialSort),n.sort.setSort(a)}if((e.persistence&&this.modExists("persistence",!0)&&n.persistence.config.filter||e.initialFilter)&&this.modExists("filter",!0)){var l=[];e.persistence&&this.modExists("persistence",!0)&&n.persistence.config.filter?!1===(l=n.persistence.load("filter"))&&e.initialFilter&&(l=e.initialFilter):e.initialFilter&&(l=e.initialFilter),n.filter.setFilter(l)}e.initialHeaderFilter&&this.modExists("filter",!0)&&e.initialHeaderFilter.forEach(function(t){var e=i.columnManager.findColumn(t.field);if(!e)return console.warn("Column Filter Error - No matching column found:",t.field),!1;n.filter.setHeaderFilterValue(e,t.value)}),this.modExists("ajax")&&n.ajax.initialize(),e.pagination&&this.modExists("page",!0)&&n.page.initialize(),e.groupBy&&this.modExists("groupRows",!0)&&n.groupRows.initialize(),this.modExists("keybindings")&&n.keybindings.initialize(),this.modExists("selectRow")&&n.selectRow.clearSelectionData(!0),e.autoResize&&this.modExists("resizeTable")&&n.resizeTable.initialize(),this.modExists("clipboard")&&n.clipboard.initialize(),e.printAsHtml&&this.modExists("print")&&n.print.initialize(),e.tableBuilt.call(this)},T.prototype._loadInitialData=function(){var t=this;if(t.options.pagination&&t.modExists("page"))if(t.modules.page.reset(!0),"local"==t.options.pagination){if(t.options.data.length)t.rowManager.setData(t.options.data);else{if((t.options.ajaxURL||t.options.ajaxURLGenerator)&&t.modExists("ajax"))return void t.modules.ajax.loadData().then(function(){}).catch(function(){t.options.paginationInitialPage&&t.modules.page.setPage(t.options.paginationInitialPage)});t.rowManager.setData(t.options.data)}t.options.paginationInitialPage&&t.modules.page.setPage(t.options.paginationInitialPage)}else t.options.ajaxURL?t.modules.page.setPage(t.options.paginationInitialPage).then(function(){}).catch(function(){}):t.rowManager.setData([]);else t.options.data.length?t.rowManager.setData(t.options.data):(t.options.ajaxURL||t.options.ajaxURLGenerator)&&t.modExists("ajax")?t.modules.ajax.loadData().then(function(){}).catch(function(){}):t.rowManager.setData(t.options.data)},T.prototype.destroy=function(){var t=this.element;for(T.prototype.comms.deregister(this),this.options.reactiveData&&this.modExists("reactiveData",!0)&&this.modules.reactiveData.unwatchData(),this.rowManager.rows.forEach(function(t){t.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[],this.options.autoResize&&this.modExists("resizeTable")&&this.modules.resizeTable.clearBindings(),this.modExists("keybindings")&&this.modules.keybindings.clearBindings();t.firstChild;)t.removeChild(t.firstChild);t.classList.remove("tabulator")},T.prototype._detectBrowser=function(){var t=navigator.userAgent||navigator.vendor||window.opera;-1<t.indexOf("Trident")?(this.browser="ie",this.browserSlow=!0):-1<t.indexOf("Edge")?(this.browser="edge",this.browserSlow=!0):(-1<t.indexOf("Firefox")?this.browser="firefox":this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},T.prototype.blockRedraw=function(){return this.rowManager.blockRedraw()},T.prototype.restoreRedraw=function(){return this.rowManager.restoreRedraw()},T.prototype.setDataFromLocalFile=function(t){var a=this;return new Promise(function(o,r){var s=document.createElement("input");s.type="file",s.accept=t||".json,application/json",s.addEventListener("change",function(t){var e,i=s.files[0],n=new FileReader;n.readAsText(i),n.onload=function(t){try{e=JSON.parse(n.result)}catch(t){return console.warn("File Load Error - File contents is invalid JSON",t),void r(t)}a._setData(e).then(function(t){o(t)}).catch(function(t){o(t)})},n.onerror=function(t){console.warn("File Load Error - Unable to read file"),r()}}),s.click()})},T.prototype.setData=function(t,e,i){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(t,e,i)},T.prototype._setData=function(t,e,i,n){var o=this;return"string"!=typeof t?t?o.rowManager.setData(t,n):o.modExists("ajax")&&(o.modules.ajax.getUrl||o.options.ajaxURLGenerator)?"remote"==o.options.pagination&&o.modExists("page",!0)?(o.modules.page.reset(!0),o.modules.page.setPage(1)):o.modules.ajax.loadData(n):o.rowManager.setData([],n):0==t.indexOf("{")||0==t.indexOf("[")?o.rowManager.setData(JSON.parse(t),n):o.modExists("ajax",!0)?(e&&o.modules.ajax.setParams(e),i&&o.modules.ajax.setConfig(i),o.modules.ajax.setUrl(t),"remote"==o.options.pagination&&o.modExists("page",!0)?(o.modules.page.reset(!0),o.modules.page.setPage(1)):o.modules.ajax.loadData(n)):void 0},T.prototype.clearData=function(){this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this.rowManager.clearData()},T.prototype.getData=function(t){return!0===t&&(console.warn("passing a boolean to the getData function is deprecated, you should now pass the string 'active'"),t="active"),this.rowManager.getData(t)},T.prototype.getDataCount=function(t){return!0===t&&(console.warn("passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'"),t="active"),this.rowManager.getDataCount(t)},T.prototype.searchRows=function(t,e,i){if(this.modExists("filter",!0))return this.modules.filter.search("rows",t,e,i)},T.prototype.searchData=function(t,e,i){if(this.modExists("filter",!0))return this.modules.filter.search("data",t,e,i)},T.prototype.getHtml=function(t,e,i){if(this.modExists("htmlTableExport",!0))return this.modules.htmlTableExport.getHtml(t,e,i)},T.prototype.print=function(t,e,i){if(this.modExists("print",!0))return this.modules.print.printFullscreen(t,e,i)},T.prototype.getAjaxUrl=function(){if(this.modExists("ajax",!0))return this.modules.ajax.getUrl()},T.prototype.replaceData=function(t,e,i){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(t,e,i,!0)},T.prototype.updateData=function(e){var n=this,o=this,r=0;return new Promise(function(i,t){n.modExists("ajax")&&n.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(function(t){var e=o.rowManager.findRow(t[o.options.index]);e&&(r++,e.updateData(t).then(function(){--r||i()}))}):(console.warn("Update Error - No data provided"),t("Update Error - No data provided"))})},T.prototype.addData=function(e,n,o){var r=this;return new Promise(function(i,t){r.modExists("ajax")&&r.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?r.rowManager.addRows(e,n,o).then(function(t){var e=[];t.forEach(function(t){e.push(t.getComponent())}),i(e)}):(console.warn("Update Error - No data provided"),t("Update Error - No data provided"))})},T.prototype.updateOrAddData=function(e){var n=this,o=this,r=[],s=0;return new Promise(function(i,t){n.modExists("ajax")&&n.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(function(t){var e=o.rowManager.findRow(t[o.options.index]);s++,e?e.updateData(t).then(function(){s--,r.push(e.getComponent()),s||i(r)}):o.rowManager.addRows(t).then(function(t){s--,r.push(t[0].getComponent()),s||i(r)})}):(console.warn("Update Error - No data provided"),t("Update Error - No data provided"))})},T.prototype.getRow=function(t){var e=this.rowManager.findRow(t);return e?e.getComponent():(console.warn("Find Error - No matching row found:",t),!1)},T.prototype.getRowFromPosition=function(t,e){var i=this.rowManager.getRowFromPosition(t,e);return i?i.getComponent():(console.warn("Find Error - No matching row found:",t),!1)},T.prototype.deleteRow=function(s){var a=this;return new Promise(function(t,i){function n(){++e==s.length&&o&&(r.rowManager.reRenderInPosition(),t())}var e=0,o=0,r=a;Array.isArray(s)||(s=[s]),s.forEach(function(t){var e=a.rowManager.findRow(t,!0);e?e.delete().then(function(){o++,n()}).catch(function(t){n(),i(t)}):(console.warn("Delete Error - No matching row found:",t),i("Delete Error - No matching row found"),n())})})},T.prototype.addRow=function(i,n,o){var r=this;return new Promise(function(e,t){"string"==typeof i&&(i=JSON.parse(i)),r.rowManager.addRows(i,n,o).then(function(t){r.modExists("columnCalcs")&&r.modules.columnCalcs.recalc(r.rowManager.activeRows),e(t[0].getComponent())})})},T.prototype.updateOrAddRow=function(n,o){var r=this;return new Promise(function(e,i){var t=r.rowManager.findRow(n);"string"==typeof o&&(o=JSON.parse(o)),t?t.updateData(o).then(function(){r.modExists("columnCalcs")&&r.modules.columnCalcs.recalc(r.rowManager.activeRows),e(t.getComponent())}).catch(function(t){i(t)}):t=r.rowManager.addRows(o).then(function(t){r.modExists("columnCalcs")&&r.modules.columnCalcs.recalc(r.rowManager.activeRows),e(t[0].getComponent())}).catch(function(t){i(t)})})},T.prototype.updateRow=function(n,o){var r=this;return new Promise(function(t,e){var i=r.rowManager.findRow(n);"string"==typeof o&&(o=JSON.parse(o)),i?i.updateData(o).then(function(){t(i.getComponent())}).catch(function(t){e(t)}):(console.warn("Update Error - No matching row found:",n),e("Update Error - No matching row found"))})},T.prototype.scrollToRow=function(n,o,r){var s=this;return new Promise(function(t,e){var i=s.rowManager.findRow(n);i?s.rowManager.scrollToRow(i,o,r).then(function(){t()}).catch(function(t){e(t)}):(console.warn("Scroll Error - No matching row found:",n),e("Scroll Error - No matching row found"))})},T.prototype.moveRow=function(t,e,i){var n=this.rowManager.findRow(t);n?n.moveToRow(e,i):console.warn("Move Error - No matching row found:",t)},T.prototype.getRows=function(t){return!0===t&&(console.warn("passing a boolean to the getRows function is deprecated, you should now pass the string 'active'"),t="active"),this.rowManager.getComponents(t)},T.prototype.getRowPosition=function(t,e){var i=this.rowManager.findRow(t);return i?this.rowManager.getRowPosition(i,e):(console.warn("Position Error - No matching row found:",t),!1)},T.prototype.copyToClipboard=function(t,e,i,n){this.modExists("clipboard",!0)&&this.modules.clipboard.copy(t,e,i,n)},T.prototype.setColumns=function(t){this.columnManager.setColumns(t)},T.prototype.getColumns=function(t){return this.columnManager.getComponents(t)},T.prototype.getColumn=function(t){var e=this.columnManager.findColumn(t);return e?e.getComponent():(console.warn("Find Error - No matching column found:",t),!1)},T.prototype.getColumnDefinitions=function(){return this.columnManager.getDefinitionTree()},T.prototype.getColumnLayout=function(){if(this.modExists("persistence",!0))return this.modules.persistence.parseColumns(this.columnManager.getColumns())},T.prototype.setColumnLayout=function(t){return!!this.modExists("persistence",!0)&&(this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns,t)),!0)},T.prototype.showColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Show Error - No matching column found:",t),!1;e.show(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},T.prototype.hideColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Hide Error - No matching column found:",t),!1;e.hide(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},T.prototype.toggleColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Visibility Toggle Error - No matching column found:",t),!1;e.visible?e.hide():e.show()},T.prototype.addColumn=function(n,o,r){var s=this;return new Promise(function(e,i){var t=s.columnManager.findColumn(r);s.columnManager.addColumn(n,o,t).then(function(t){e(t.getComponent())}).catch(function(t){i(t)})})},T.prototype.deleteColumn=function(n){var o=this;return new Promise(function(t,e){var i=o.columnManager.findColumn(n);i?i.delete().then(function(){t()}).catch(function(t){e(t)}):(console.warn("Column Delete Error - No matching column found:",n),e())})},T.prototype.updateColumnDefinition=function(n,t){var o=this;return new Promise(function(e,i){var t=o.columnManager.findColumn(n);t?t.updateDefinition().then(function(t){e(t)}).catch(function(t){i(t)}):(console.warn("Column Update Error - No matching column found:",n),i())})},T.prototype.moveColumn=function(t,e,i){var n=this.columnManager.findColumn(t),o=this.columnManager.findColumn(e);n?o?this.columnManager.moveColumn(n,o,i):console.warn("Move Error - No matching column found:",o):console.warn("Move Error - No matching column found:",t)},T.prototype.scrollToColumn=function(n,o,r){var s=this;return new Promise(function(t,e){var i=s.columnManager.findColumn(n);i?s.columnManager.scrollToColumn(i,o,r).then(function(){t()}).catch(function(t){e(t)}):(console.warn("Scroll Error - No matching column found:",n),e("Scroll Error - No matching column found"))})},T.prototype.setLocale=function(t){this.modules.localize.setLocale(t)},T.prototype.getLocale=function(){return this.modules.localize.getLocale()},T.prototype.getLang=function(t){return this.modules.localize.getLang(t)},T.prototype.redraw=function(t){this.columnManager.redraw(t),this.rowManager.redraw(t)},T.prototype.setHeight=function(t){"classic"!==this.rowManager.renderMode?(this.options.height=isNaN(t)?t:t+"px",this.element.style.height=this.options.height,this.rowManager.redraw()):console.warn("setHeight function is not available in classic render mode")},T.prototype.setSort=function(t,e){this.modExists("sort",!0)&&(this.modules.sort.setSort(t,e),this.rowManager.sorterRefresh())},T.prototype.getSorters=function(){if(this.modExists("sort",!0))return this.modules.sort.getSort()},T.prototype.clearSort=function(){this.modExists("sort",!0)&&(this.modules.sort.clear(),this.rowManager.sorterRefresh())},T.prototype.setFilter=function(t,e,i){this.modExists("filter",!0)&&(this.modules.filter.setFilter(t,e,i),this.rowManager.filterRefresh())},T.prototype.addFilter=function(t,e,i){this.modExists("filter",!0)&&(this.modules.filter.addFilter(t,e,i),this.rowManager.filterRefresh())},T.prototype.getFilters=function(t){if(this.modExists("filter",!0))return this.modules.filter.getFilters(t)},T.prototype.setHeaderFilterFocus=function(t){if(this.modExists("filter",!0)){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Filter Focus Error - No matching column found:",t),!1;this.modules.filter.setHeaderFilterFocus(e)}},T.prototype.setHeaderFilterValue=function(t,e){if(this.modExists("filter",!0)){var i=this.columnManager.findColumn(t);if(!i)return console.warn("Column Filter Error - No matching column found:",t),!1;this.modules.filter.setHeaderFilterValue(i,e)}},T.prototype.getHeaderFilters=function(){if(this.modExists("filter",!0))return this.modules.filter.getHeaderFilters()},T.prototype.removeFilter=function(t,e,i){this.modExists("filter",!0)&&(this.modules.filter.removeFilter(t,e,i),this.rowManager.filterRefresh())},T.prototype.clearFilter=function(t){this.modExists("filter",!0)&&(this.modules.filter.clearFilter(t),this.rowManager.filterRefresh())},T.prototype.clearHeaderFilter=function(){this.modExists("filter",!0)&&(this.modules.filter.clearHeaderFilter(),this.rowManager.filterRefresh())},T.prototype.selectRow=function(t){this.modExists("selectRow",!0)&&(!0===t&&(console.warn("passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'"),t="active"),this.modules.selectRow.selectRows(t))},T.prototype.deselectRow=function(t){this.modExists("selectRow",!0)&&this.modules.selectRow.deselectRows(t)},T.prototype.toggleSelectRow=function(t){this.modExists("selectRow",!0)&&this.modules.selectRow.toggleRow(t)},T.prototype.getSelectedRows=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedRows()},T.prototype.getSelectedData=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedData()},T.prototype.setMaxPage=function(t){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setMaxPage(t)},T.prototype.setPage=function(t){return this.options.pagination&&this.modExists("page")?this.modules.page.setPage(t):new Promise(function(t,e){e()})},T.prototype.setPageToRow=function(i){var n=this;return new Promise(function(t,e){n.options.pagination&&n.modExists("page")?(i=n.rowManager.findRow(i))?n.modules.page.setPageToRow(i).then(function(){t()}).catch(function(){e()}):e():e()})},T.prototype.setPageSize=function(t){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setPageSize(t),this.modules.page.setPage(1).then(function(){}).catch(function(){})},T.prototype.getPageSize=function(){if(this.options.pagination&&this.modExists("page",!0))return this.modules.page.getPageSize()},T.prototype.previousPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.previousPage()},T.prototype.nextPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.nextPage()},T.prototype.getPage=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPage()},T.prototype.getPageMax=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPageMax()},T.prototype.setGroupBy=function(t){if(!this.modExists("groupRows",!0))return!1;this.options.groupBy=t,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")},T.prototype.setGroupStartOpen=function(t){if(!this.modExists("groupRows",!0))return!1;this.options.groupStartOpen=t,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set")},T.prototype.setGroupHeader=function(t){if(!this.modExists("groupRows",!0))return!1;this.options.groupHeader=t,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set")},T.prototype.getGroups=function(t){return!!this.modExists("groupRows",!0)&&this.modules.groupRows.getGroups(!0)},T.prototype.getGroupedData=function(){if(this.modExists("groupRows",!0))return this.options.groupBy?this.modules.groupRows.getGroupedData():this.getData()},T.prototype.getCalcResults=function(){return!!this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.getResults()},T.prototype.navigatePrev=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&t.nav().prev()},T.prototype.navigateNext=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&t.nav().next()},T.prototype.navigateLeft=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().left())},T.prototype.navigateRight=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().right())},T.prototype.navigateUp=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().up())},T.prototype.navigateDown=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().down())},T.prototype.undo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.undo()},T.prototype.redo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.redo()},T.prototype.getHistoryUndoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryUndoSize()},T.prototype.getHistoryRedoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryRedoSize()},T.prototype.download=function(t,e,i,n){this.modExists("download",!0)&&this.modules.download.download(t,e,i,n)},T.prototype.downloadToTab=function(t,e,i,n){this.modExists("download",!0)&&this.modules.download.download(t,e,i,n,!0)},T.prototype.tableComms=function(t,e,i,n){this.modules.comms.receive(t,e,i,n)},T.prototype.moduleBindings={},T.prototype.extendModule=function(t,e,i){if(T.prototype.moduleBindings[t]){var n=T.prototype.moduleBindings[t].prototype[e];if(n)if("object"==(void 0===i?"undefined":_typeof(i)))for(var o in i)n[o]=i[o];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",e)}else console.warn("Module Error - module does not exist:",t)},T.prototype.registerModule=function(t,e){T.prototype.moduleBindings[t]=e},T.prototype.bindModules=function(){for(var t in this.modules={},T.prototype.moduleBindings)this.modules[t]=new T.prototype.moduleBindings[t](this)},T.prototype.modExists=function(t,e){return!!this.modules[t]||(e&&console.error("Tabulator Module Not Installed: "+t),!1)},T.prototype.helpers={elVisible:function(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)},elOffset:function(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}},deepClone:function(t){var e=Array.isArray(t)?[]:{};for(var i in t)null!=t[i]&&"object"===_typeof(t[i])?t[i]instanceof Date?e[i]=new Date(t[i]):e[i]=this.deepClone(t[i]):e[i]=t[i];return e}},T.prototype.comms={tables:[],register:function(t){T.prototype.comms.tables.push(t)},deregister:function(t){var e=T.prototype.comms.tables.indexOf(t);-1<e&&T.prototype.comms.tables.splice(e,1)},lookupTable:function(t,e){var i,n,o=[];if("string"==typeof t){if((i=document.querySelectorAll(t)).length)for(var r=0;r<i.length;r++)(n=T.prototype.comms.matchElement(i[r]))&&o.push(n)}else"undefined"!=typeof HTMLElement&&t instanceof HTMLElement||t instanceof T?(n=T.prototype.comms.matchElement(t))&&o.push(n):Array.isArray(t)?t.forEach(function(t){o=o.concat(T.prototype.comms.lookupTable(t))}):e||console.warn("Table Connection Error - Invalid Selector",t);return o},matchElement:function(e){return T.prototype.comms.tables.find(function(t){return e instanceof T?t===e:t.element===e})}},T.prototype.findTable=function(t){var e=T.prototype.comms.lookupTable(t,!0);return!(Array.isArray(e)&&!e.length)&&e};function a(t){this.table=t,this.mode=null}a.prototype.initialize=function(t){this.modes[t]?this.mode=t:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+t),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)},a.prototype.getMode=function(){return this.mode},a.prototype.layout=function(){this.modes[this.mode].call(this,this.table.columnManager.columnsByIndex)},a.prototype.modes={fitData:function(t){t.forEach(function(t){t.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:function(t){t.forEach(function(t){t.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataStretch:function(t){var i=this,n=0,e=this.table.rowManager.element.clientWidth,o=0,r=!1;t.forEach(function(t,e){t.widthFixed||t.reinitializeWidth(),(i.table.options.responsiveLayout?t.modules.responsive.visible:t.visible)&&(r=t),t.visible&&(n+=t.getWidth())}),r?(o=e-n+r.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(r.setWidth(0),this.table.modules.responsiveLayout.update()),0<o?r.setWidth(o):r.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(t){function p(t){return"string"==typeof t?-1<t.indexOf("%")?n/100*parseInt(t):parseInt(t):t}function f(t,e,i,n){function o(t){return i*(t.column.definition.widthGrow||1)}function r(t){return p(t.width)-i*(t.column.definition.widthShrink||0)}var s=[],a=0,l=0,c=0,u=0,d=0,h=[];return t.forEach(function(t,e){var i=n?r(t):o(t);t.column.minWidth>=i?s.push(t):(h.push(t),d+=n?t.column.definition.widthShrink||1:t.column.definition.widthGrow||1)}),s.length?(s.forEach(function(t){a+=n?t.width-t.column.minWidth:t.column.minWidth,t.width=t.column.minWidth}),u=(l=e-a)-(c=d?Math.floor(l/d):l)*d,u+=f(h,l,c,n)):(u=d?e-Math.floor(e/d)*d:e,h.forEach(function(t){t.width=n?r(t):o(t)})),u}var e,i,n=this.table.element.clientWidth,o=0,r=0,s=0,a=[],l=[],c=0,u=0;this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(n-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),t.forEach(function(t){var e,i,n;t.visible&&(e=t.definition.width,i=parseInt(t.minWidth),e?(n=p(e),o+=i<n?n:i,t.definition.widthShrink&&(l.push({column:t,width:i<n?n:i}),c+=t.definition.widthShrink)):(a.push({column:t,width:0}),s+=t.definition.widthGrow||1))}),r=n-o,e=Math.floor(r/s);u=f(a,r,e,!1);a.length&&0<u&&(a[a.length-1].width+=+u),a.forEach(function(t){r-=t.width}),0<(i=Math.abs(u)+r)&&c&&(u=f(l,i,Math.floor(i/c),!0)),l.length&&(l[l.length-1].width-=u),a.forEach(function(t){t.column.setWidth(t.width)}),l.forEach(function(t){t.column.setWidth(t.width)})}},T.prototype.registerModule("layout",a);function l(t){this.table=t,this.locale="default",this.lang=!1,this.bindings={}}l.prototype.setHeaderFilterPlaceholder=function(t){this.langs.default.headerFilters.default=t},l.prototype.setHeaderFilterColumnPlaceholder=function(t,e){this.langs.default.headerFilters.columns[t]=e,this.lang&&!this.lang.headerFilters.columns[t]&&(this.lang.headerFilters.columns[t]=e)},l.prototype.installLang=function(t,e){this.langs[t]?this._setLangProp(this.langs[t],e):this.langs[t]=e},l.prototype._setLangProp=function(t,e){for(var i in e)t[i]&&"object"==_typeof(t[i])?this._setLangProp(t[i],e[i]):t[i]=e[i]},l.prototype.setLocale=function(t){var e=this;if(!0===(t=t||"default")&&navigator.language&&(t=navigator.language.toLowerCase()),t&&!e.langs[t]){var i=t.split("-")[0];t=e.langs[i]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",t,i),i):(console.warn("Localization Error - Matching locale not found, using default: ",t),"default")}e.locale=t,e.lang=T.prototype.helpers.deepClone(e.langs.default||{}),"default"!=t&&function t(e,i){for(var n in e)"object"==_typeof(e[n])?(i[n]||(i[n]={}),t(e[n],i[n])):i[n]=e[n]}(e.langs[t],e.lang),e.table.options.localized.call(e.table,e.locale,e.lang),e._executeBindings()},l.prototype.getLocale=function(t){return self.locale},l.prototype.getLang=function(t){return t?this.langs[t]:this.lang},l.prototype.getText=function(t,e){var i=(t=e?t+"|"+e:t).split("|");return this._getLangElement(i,this.locale)||""},l.prototype._getLangElement=function(t,e){var i=this.lang;return t.forEach(function(t){var e;i&&(e=i[t],i=void 0!==e&&e)}),i},l.prototype.bind=function(t,e){this.bindings[t]||(this.bindings[t]=[]),this.bindings[t].push(e),e(this.getText(t),this.lang)},l.prototype._executeBindings=function(){var i=this;for(var t in i.bindings)!function(e){i.bindings[e].forEach(function(t){t(i.getText(e),i.lang)})}(t)},l.prototype.langs={default:{groups:{item:"item",items:"items"},columns:{},ajax:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page"},headerFilters:{default:"filter column...",columns:{}}}},T.prototype.registerModule("localize",l);function c(t){this.table=t}c.prototype.getConnections=function(t){var e=this,i=[];return T.prototype.comms.lookupTable(t).forEach(function(t){e.table!==t&&i.push(t)}),i},c.prototype.send=function(t,e,i,n){var o=this,r=this.getConnections(t);r.forEach(function(t){t.tableComms(o.table.element,e,i,n)}),!r.length&&t&&console.warn("Table Connection Error - No tables matching selector found",t)},c.prototype.receive=function(t,e,i,n){if(this.table.modExists(e))return this.table.modules[e].commsReceived(t,i,n);console.warn("Inter-table Comms Error - no such module:",e)},T.prototype.registerModule("comms",c);function h(t){this.table=t,this.allowedTypes=["","data","download","clipboard"]}h.prototype.initializeColumn=function(n){var o=this,r=!1,s={};this.allowedTypes.forEach(function(t){var e,i="accessor"+(t.charAt(0).toUpperCase()+t.slice(1));n.definition[i]&&(e=o.lookupAccessor(n.definition[i]))&&(r=!0,s[i]={accessor:e,params:n.definition[i+"Params"]||{}})}),r&&(n.modules.accessor=s)},h.prototype.lookupAccessor=function(t){var e=!1;switch(void 0===t?"undefined":_typeof(t)){case"string":this.accessors[t]?e=this.accessors[t]:console.warn("Accessor Error - No such accessor found, ignoring: ",t);break;case"function":e=t}return e},h.prototype.transformRow=function(t,r){var s="accessor"+(r.charAt(0).toUpperCase()+r.slice(1)),a=T.prototype.helpers.deepClone(t||{});return this.table.columnManager.traverse(function(t){var e,i,n,o;t.modules.accessor&&(i=t.modules.accessor[s]||t.modules.accessor.accessor||!1)&&"undefined"!=(e=t.getFieldValue(a))&&(o=t.getComponent(),n="function"==typeof i.params?i.params(e,a,r,o):i.params,t.setFieldValue(a,i.accessor(e,a,r,n,o)))}),a},h.prototype.accessors={},T.prototype.registerModule("accessor",h);function p(t){this.table=t,this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=!1,this.errorElement=!1,this.loaderPromise=!1,this.progressiveLoad=!1,this.loading=!1,this.requestOrder=0}p.prototype.initialize=function(){var t;this.loaderElement.appendChild(this.msgElement),this.table.options.ajaxLoaderLoading&&("string"==typeof this.table.options.ajaxLoaderLoading?((t=document.createElement("template")).innerHTML=this.table.options.ajaxLoaderLoading.trim(),this.loadingElement=t.content.firstChild):this.loadingElement=this.table.options.ajaxLoaderLoading),this.loaderPromise=this.table.options.ajaxRequestFunc||this.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||this.defaultURLGenerator,this.table.options.ajaxLoaderError&&("string"==typeof this.table.options.ajaxLoaderError?((t=document.createElement("template")).innerHTML=this.table.options.ajaxLoaderError.trim(),this.errorElement=t.content.firstChild):this.errorElement=this.table.options.ajaxLoaderError),this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.table.options.ajaxProgressiveLoad&&(this.table.options.pagination?(this.progressiveLoad=!1,console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time")):this.table.modExists("page")?(this.progressiveLoad=this.table.options.ajaxProgressiveLoad,this.table.modules.page.initializeProgressive(this.progressiveLoad)):console.error("Pagination plugin is required for progressive ajax loading"))},p.prototype.createLoaderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-loader"),t},p.prototype.createMsgElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-loader-msg"),t.setAttribute("role","alert"),t},p.prototype.setParams=function(t,e){if(e)for(var i in this.params=this.params||{},t)this.params[i]=t[i];else this.params=t},p.prototype.getParams=function(){return this.params||{}},p.prototype.setConfig=function(t){if(this._loadDefaultConfig(),"string"==typeof t)this.config.method=t;else for(var e in t)this.config[e]=t[e]},p.prototype._loadDefaultConfig=function(t){if(!this.config||t)for(var e in this.config={},this.defaultConfig)this.config[e]=this.defaultConfig[e]},p.prototype.setUrl=function(t){this.url=t},p.prototype.getUrl=function(){return this.url},p.prototype.loadData=function(t){return this.progressiveLoad?this._loadDataProgressive():this._loadDataStandard(t)},p.prototype.nextPage=function(t){this.loading||t<(this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.getElement().clientHeight)&&this.table.modules.page.nextPage().then(function(){}).catch(function(){})},p.prototype.blockActiveRequest=function(){this.requestOrder++},p.prototype._loadDataProgressive=function(){return this.table.rowManager.setData([]),this.table.modules.page.setPage(1)},p.prototype._loadDataStandard=function(n){var o=this;return new Promise(function(e,i){o.sendRequest(n).then(function(t){o.table.rowManager.setData(t,n).then(function(){e()}).catch(function(t){i(t)})}).catch(function(t){i(t)})})},p.prototype.generateParamsList=function(t,i){var n=this,o=[];if(i=i||"",Array.isArray(t))t.forEach(function(t,e){o=o.concat(n.generateParamsList(t,i?i+"["+e+"]":e))});else if("object"===(void 0===t?"undefined":_typeof(t)))for(var e in t)o=o.concat(n.generateParamsList(t[e],i?i+"["+e+"]":e));else o.push({key:i,value:t});return o},p.prototype.serializeParams=function(t){var e=this.generateParamsList(t),i=[];return e.forEach(function(t){i.push(encodeURIComponent(t.key)+"="+encodeURIComponent(t.value))}),i.join("&")},p.prototype.sendRequest=function(t){var n,o=this,r=this,s=r.url;return r.requestOrder++,n=r.requestOrder,r._loadDefaultConfig(),new Promise(function(e,i){!1!==r.table.options.ajaxRequesting.call(o.table,r.url,r.params)?(r.loading=!0,t||r.showLoader(),o.loaderPromise(s,r.config,r.params).then(function(t){n===r.requestOrder?(r.table.options.ajaxResponse&&(t=r.table.options.ajaxResponse.call(r.table,r.url,r.params,t)),e(t)):console.warn("Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made"),r.hideLoader(),r.loading=!1}).catch(function(t){console.error("Ajax Load Error: ",t),r.table.options.ajaxError.call(r.table,t),r.showError(),setTimeout(function(){r.hideLoader()},3e3),r.loading=!1,i()})):i()})},p.prototype.showLoader=function(){if("function"==typeof this.table.options.ajaxLoader?this.table.options.ajaxLoader():this.table.options.ajaxLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|loading"),this.table.element.appendChild(this.loaderElement)}},p.prototype.showError=function(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|error"),this.table.element.appendChild(this.loaderElement)},p.prototype.hideLoader=function(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)},p.prototype.defaultConfig={method:"GET"},p.prototype.defaultURLGenerator=function(t,e,i){return t&&i&&Object.keys(i).length&&(e.method&&"get"!=e.method.toLowerCase()||(e.method="get",t+=(t.includes("?")?"&":"?")+this.serializeParams(i))),t},p.prototype.defaultLoaderPromise=function(n,o,r){var s,a=this;return new Promise(function(e,i){if(n=a.urlGenerator(n,o,r),"GET"!=o.method.toUpperCase())if(s="object"===_typeof(a.table.options.ajaxContentType)?a.table.options.ajaxContentType:a.contentTypeFormatters[a.table.options.ajaxContentType]){for(var t in s.headers)o.headers||(o.headers={}),void 0===o.headers[t]&&(o.headers[t]=s.headers[t]);o.body=s.body.call(a,n,o,r)}else console.warn("Ajax Error - Invalid ajaxContentType value:",a.table.options.ajaxContentType);n?(void 0===o.headers&&(o.headers={}),void 0===o.headers.Accept&&(o.headers.Accept="application/json"),void 0===o.headers["X-Requested-With"]&&(o.headers["X-Requested-With"]="XMLHttpRequest"),void 0===o.mode&&(o.mode="cors"),"cors"==o.mode?(void 0===o.headers["Access-Control-Allow-Origin"]&&(o.headers["Access-Control-Allow-Origin"]=window.location.origin),void 0===o.credentials&&(o.credentials="same-origin")):void 0===o.credentials&&(o.credentials="include"),fetch(n,o).then(function(t){t.ok?t.json().then(function(t){e(t)}).catch(function(t){i(t),console.warn("Ajax Load Error - Invalid JSON returned",t)}):(console.error("Ajax Load Error - Connection Error: "+t.status,t.statusText),i(t))}).catch(function(t){console.error("Ajax Load Error - Connection Error: ",t),i(t)})):(console.warn("Ajax Load Error - No URL Set"),e([]))})},p.prototype.contentTypeFormatters={json:{headers:{"Content-Type":"application/json"},body:function(t,e,i){return JSON.stringify(i)}},form:{headers:{},body:function(t,e,i){var n=this.generateParamsList(i),o=new FormData;return n.forEach(function(t){o.append(t.key,t.value)}),o}}},T.prototype.registerModule("ajax",p);function f(t){this.table=t,this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.initialize()}f.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-calcs-holder"),t},f.prototype.initialize=function(){this.genColumn=new u({field:"value"},this)},f.prototype.registerColumnField=function(){},f.prototype.initializeColumn=function(t){var e=t.definition,i={topCalcParams:e.topCalcParams||{},botCalcParams:e.bottomCalcParams||{}};if(e.topCalc){switch(_typeof(e.topCalc)){case"string":this.calculations[e.topCalc]?i.topCalc=this.calculations[e.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.topCalc);break;case"function":i.topCalc=e.topCalc}i.topCalc&&(t.modules.columnCalcs=i,this.topCalcs.push(t),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(e.bottomCalc){switch(_typeof(e.bottomCalc)){case"string":this.calculations[e.bottomCalc]?i.botCalc=this.calculations[e.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.bottomCalc);break;case"function":i.botCalc=e.bottomCalc}i.botCalc&&(t.modules.columnCalcs=i,this.botCalcs.push(t),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}},f.prototype.removeCalcs=function(){var t=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),t=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),t=!0),t&&this.table.rowManager.adjustTableSize()},f.prototype.initializeTopRow=function(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)},f.prototype.initializeBottomRow=function(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)},f.prototype.scrollHorizontal=function(t){this.table.columnManager.getElement().scrollWidth,this.table.element.clientWidth,this.botInitialized&&(this.botRow.getElement().style.marginLeft=-t+"px")},f.prototype.recalc=function(t){var e;if(this.topInitialized||this.botInitialized){if(this.rowsToData(t),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),e=this.generateRow("top",this.rowsToData(t)),this.topRow=e;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(e.getElement()),e.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),e=this.generateRow("bottom",this.rowsToData(t)),this.botRow=e;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(e.getElement()),e.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}},f.prototype.recalcRowGroup=function(t){this.recalcGroup(this.table.modules.groupRows.getRowGroup(t))},f.prototype.recalcGroup=function(t){var e,i;t&&t.calcs&&(t.calcs.bottom&&(e=this.rowsToData(t.rows),i=this.generateRowData("bottom",e),t.calcs.bottom.updateData(i),t.calcs.bottom.reinitialize()),t.calcs.top&&(e=this.rowsToData(t.rows),i=this.generateRowData("top",e),t.calcs.top.updateData(i),t.calcs.top.reinitialize()))},f.prototype.generateTopRow=function(t){return this.generateRow("top",this.rowsToData(t))},f.prototype.generateBottomRow=function(t){return this.generateRow("bottom",this.rowsToData(t))},f.prototype.rowsToData=function(t){var e=[];return t.forEach(function(t){e.push(t.getData())}),e},f.prototype.generateRow=function(n,t){var o,r=this,e=this.generateRowData(n,t);return r.table.modExists("mutator")&&r.table.modules.mutator.disable(),o=new d(e,this,"calc"),r.table.modExists("mutator")&&r.table.modules.mutator.enable(),o.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+n),o.generateCells=function(){var i=[];r.table.columnManager.columnsByIndex.forEach(function(t){r.genColumn.setField(t.getField()),r.genColumn.hozAlign=t.hozAlign,t.definition[n+"CalcFormatter"]&&r.table.modExists("format")?r.genColumn.modules.format={formatter:r.table.modules.format.getFormatter(t.definition[n+"CalcFormatter"]),params:t.definition[n+"CalcFormatterParams"]}:r.genColumn.modules.format={formatter:r.table.modules.format.getFormatter("plaintext"),params:{}},r.genColumn.definition.cssClass=t.definition.cssClass;var e=new s(r.genColumn,o);e.column=t,e.setWidth(),t.cells.push(e),i.push(e),t.visible||e.hide()}),this.cells=i},o},f.prototype.generateRowData=function(t,n){var o,r,s={},e="top"==t?this.topCalcs:this.botCalcs,a="top"==t?"topCalc":"botCalc";return e.forEach(function(e){var i=[];e.modules.columnCalcs&&e.modules.columnCalcs[a]&&(n.forEach(function(t){i.push(e.getFieldValue(t))}),r=a+"Params",o="function"==typeof e.modules.columnCalcs[r]?e.modules.columnCalcs[r](i,n):e.modules.columnCalcs[r],e.setFieldValue(s,e.modules.columnCalcs[a](i,n,o)))}),s},f.prototype.hasTopCalcs=function(){return!!this.topCalcs.length},f.prototype.hasBottomCalcs=function(){return!!this.botCalcs.length},f.prototype.redraw=function(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)},f.prototype.getResults=function(){var e=this,i={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(function(t){i[t.getKey()]=e.getGroupResults(t)}):i={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},i},f.prototype.getGroupResults=function(t){var e=this,i=t._getSelf(),n=t.getSubGroups(),o={};return n.forEach(function(t){o[t.getKey()]=e.getGroupResults(t)}),{top:i.calcs.top?i.calcs.top.getData():{},bottom:i.calcs.bottom?i.calcs.bottom.getData():{},groups:o}},f.prototype.calculations={avg:function(t,e,i){var n=0,o=void 0!==i.precision?i.precision:2;return t.length&&(n=t.reduce(function(t,e){return t+(e=Number(e))}),n/=t.length,n=!1!==o?n.toFixed(o):n),parseFloat(n).toString()},max:function(t,e,i){var n=null,o=void 0!==i.precision&&i.precision;return t.forEach(function(t){((t=Number(t))>n||null===n)&&(n=t)}),null!==n?!1!==o?n.toFixed(o):n:""},min:function(t,e,i){var n=null,o=void 0!==i.precision&&i.precision;return t.forEach(function(t){((t=Number(t))<n||null===n)&&(n=t)}),null!==n?!1!==o?n.toFixed(o):n:""},sum:function(t,e,i){var n=0,o=void 0!==i.precision&&i.precision;return t.length&&t.forEach(function(t){t=Number(t),n+=isNaN(t)?0:Number(t)}),!1!==o?n.toFixed(o):n},concat:function(t,e,i){var n=0;return t.length&&(n=t.reduce(function(t,e){return String(t)+String(e)})),n},count:function(t,e,i){var n=0;return t.length&&t.forEach(function(t){t&&n++}),n}},T.prototype.registerModule("columnCalcs",f);function g(t){this.table=t,this.mode=!0,this.copySelector=!1,this.copySelectorParams={},this.copyFormatter=!1,this.copyFormatterParams={},this.pasteParser=function(){},this.pasteAction=function(){},this.htmlElement=!1,this.config={},this.blocked=!0}g.prototype.initialize=function(){var i=this;this.mode=this.table.options.clipboard,!0!==this.mode&&"copy"!==this.mode||this.table.element.addEventListener("copy",function(t){var e;i.processConfig(),i.blocked||(t.preventDefault(),e=i.generateContent(),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",e):t.clipboardData&&t.clipboardData.setData?(t.clipboardData.setData("text/plain",e),i.htmlElement&&t.clipboardData.setData("text/html",i.htmlElement.outerHTML)):t.originalEvent&&t.originalEvent.clipboardData.setData&&(t.originalEvent.clipboardData.setData("text/plain",e),i.htmlElement&&t.originalEvent.clipboardData.setData("text/html",i.htmlElement.outerHTML)),i.table.options.clipboardCopied.call(this.table,e),i.reset())}),!0!==this.mode&&"paste"!==this.mode||this.table.element.addEventListener("paste",function(t){i.paste(t)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction)},g.prototype.processConfig=function(){var t={columnHeaders:"groups",rowGroups:!0,columnCalcs:!0};if(void 0!==this.table.options.clipboardCopyHeader&&(t.columnHeaders=this.table.options.clipboardCopyHeader,console.warn("DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option")),this.table.options.clipboardCopyConfig)for(var e in this.table.options.clipboardCopyConfig)t[e]=this.table.options.clipboardCopyConfig[e];t.rowGroups&&this.table.options.groupBy&&this.table.modExists("groupRows")&&(this.config.rowGroups=!0),t.columnHeaders?"groups"!==t.columnHeaders&&!0!==t||this.table.columnManager.columns.length==this.table.columnManager.columnsByIndex.length?this.config.columnHeaders="columns":this.config.columnHeaders="groups":this.config.columnHeaders=!1,t.columnCalcs&&this.table.modExists("columnCalcs")&&(this.config.columnCalcs=!0)},g.prototype.reset=function(){this.blocked=!1,this.originalSelectionText=""},g.prototype.setPasteAction=function(t){switch(void 0===t?"undefined":_typeof(t)){case"string":this.pasteAction=this.pasteActions[t],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",t);break;case"function":this.pasteAction=t}},g.prototype.setPasteParser=function(t){switch(void 0===t?"undefined":_typeof(t)){case"string":this.pasteParser=this.pasteParsers[t],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",t);break;case"function":this.pasteParser=t}},g.prototype.paste=function(t){var e,i,n;this.checkPaseOrigin(t)&&(e=this.getPasteData(t),(i=this.pasteParser.call(this,e))?(t.preventDefault(),this.table.modExists("mutator")&&(i=this.mutateData(i)),n=this.pasteAction.call(this,i),this.table.options.clipboardPasted.call(this.table,e,i,n)):this.table.options.clipboardPasteError.call(this.table,e))},g.prototype.mutateData=function(t){var e=this,i=[];return Array.isArray(t)?t.forEach(function(t){i.push(e.table.modules.mutator.transformRow(t,"clipboard"))}):i=t,i},g.prototype.checkPaseOrigin=function(t){var e=!0;return"DIV"==t.target.tagName&&!this.table.modules.edit.currentCell||(e=!1),e},g.prototype.getPasteData=function(t){var e;return window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):t.clipboardData&&t.clipboardData.getData?e=t.clipboardData.getData("text/plain"):t.originalEvent&&t.originalEvent.clipboardData.getData&&(e=t.originalEvent.clipboardData.getData("text/plain")),e},g.prototype.copy=function(t,e,i,n,o){var r,s,a;!(this.blocked=!1)!==this.mode&&"copy"!==this.mode||(void 0!==window.getSelection&&void 0!==document.createRange?((r=document.createRange()).selectNodeContents(this.table.element),(s=window.getSelection()).toString()&&o&&(t="userSelection",i="raw",e=s.toString()),s.removeAllRanges(),s.addRange(r)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((a=document.body.createTextRange()).moveToElementText(this.table.element),a.select()),this.setSelector(t),this.copySelectorParams=void 0!==e&&null!=e?e:this.config.columnHeaders,this.setFormatter(i),this.copyFormatterParams=void 0!==n&&null!=n?n:{},document.execCommand("copy"),s&&s.removeAllRanges())},g.prototype.setSelector=function(t){switch(void 0===(t=t||this.table.options.clipboardCopySelector)?"undefined":_typeof(t)){case"string":this.copySelectors[t]?this.copySelector=this.copySelectors[t]:console.warn("Clipboard Error - No such selector found:",t);break;case"function":this.copySelector=t}},g.prototype.setFormatter=function(t){switch(void 0===(t=t||this.table.options.clipboardCopyFormatter)?"undefined":_typeof(t)){case"string":this.copyFormatters[t]?this.copyFormatter=this.copyFormatters[t]:console.warn("Clipboard Error - No such formatter found:",t);break;case"function":this.copyFormatter=t}},g.prototype.generateContent=function(){var t;return this.htmlElement=!1,t=this.copySelector.call(this,this.config,this.copySelectorParams),this.copyFormatter.call(this,t,this.config,this.copyFormatterParams)},g.prototype.generateSimpleHeaders=function(t){var e=[];return t.forEach(function(t){e.push(t.definition.title)}),e},g.prototype.generateColumnGroupHeaders=function(t){var i=this,n=[];return this.table.columnManager.columns.forEach(function(t){var e=i.processColumnGroup(t);e&&n.push(e)}),n},g.prototype.processColumnGroup=function(t){var i=this,e=t.columns,n={type:"group",title:t.definition.title,column:t};if(e.length){if(n.subGroups=[],n.width=0,e.forEach(function(t){var e=i.processColumnGroup(t);e&&(n.width+=e.width,n.subGroups.push(e))}),!n.width)return!1}else{if(!t.field||!(t.definition.clipboard||t.visible&&!1!==t.definition.clipboard))return!1;n.width=1}return n},g.prototype.groupHeadersToRows=function(t){function i(t,e){void 0===o[e]&&(o[e]=[]),o[e].push(t.title),t.subGroups?t.subGroups.forEach(function(t){i(t,e+1)}):function(){var n=0;o.forEach(function(t){var e=t.length;n<e&&(n=e)}),o.forEach(function(t){var e=t.length;if(e<n)for(var i=e;i<n;i++)t.push("")})}()}var o=[];return t.forEach(function(t){i(t,0)}),o},g.prototype.rowsToData=function(t,e,i,n){var o=[];return t.forEach(function(t){var i=[],n=t instanceof E?t.getData("clipboard"):t;e.forEach(function(t){var e=t.getFieldValue(n);switch(void 0===e?"undefined":_typeof(e)){case"object":e=JSON.stringify(e);break;case"undefined":case"null":e="";break;default:e=e}i.push(e)}),o.push(i)}),o},g.prototype.buildComplexRows=function(t){var e=this,i=[];return this.table.modules.groupRows.getGroups().forEach(function(t){i.push(e.processGroupData(t))}),i},g.prototype.processGroupData=function(t){var e=this,i=t.getSubGroups(),n={type:"group",key:t.key};return i.length?(n.subGroups=[],i.forEach(function(t){n.subGroups.push(e.processGroupData(t))})):n.rows=t.getRows(!0),n},g.prototype.getCalcRow=function(t,e,i,n){var o=t[i];return o&&(n&&(o=o[n]),Object.keys(o).length)?this.rowsToData([o],e):[]},g.prototype.buildOutput=function(t,e,i){var n,o=this,r=[],s=[],a=[];return this.table.columnManager.columnsByIndex.forEach(function(t){(t.definition.clipboard||t.visible&&!1!==t.definition.clipboard)&&a.push(t)}),"groups"==e.columnHeaders?(s=this.generateColumnGroupHeaders(this.table.columnManager.columns),r=r.concat(this.groupHeadersToRows(s))):(s=a,r.push(this.generateSimpleHeaders(s))),this.config.columnCalcs&&(n=this.table.getCalcResults()),this.table.options.clipboardCopyStyled&&this.generateHTML(t,s,n,e,i),e.rowGroups?t.forEach(function(t){r=r.concat(o.parseRowGroupData(t,a,e,i,n||{}))}):(e.columnCalcs&&(r=r.concat(this.getCalcRow(n,a,"top"))),r=r.concat(this.rowsToData(t,a,e,i)),e.columnCalcs&&(r=r.concat(this.getCalcRow(n,a,"bottom")))),r},g.prototype.parseRowGroupData=function(e,t,i,n,o){var r=this,s=[];return s.push([e.key]),e.subGroups?e.subGroups.forEach(function(t){s=s.concat(r.parseRowGroupData(t,i,n,o[e.key]&&o[e.key].groups||{}))}):(i.columnCalcs&&(s=s.concat(this.getCalcRow(o,t,e.key,"top"))),s=s.concat(this.rowsToData(e.rows,t,i,n)),i.columnCalcs&&(s=s.concat(this.getCalcRow(o,t,e.key,"bottom")))),s},g.prototype.generateHTML=function(t,s,e,r,i){function a(t,e,i){var n=t[e];n&&(i&&(n=n[i]),Object.keys(n).length&&l([n]))}function l(t){t.forEach(function(t,e){var o,r=document.createElement("tr"),i=p,n=!1;t instanceof E?o=t.getData("clipboard"):(o=t,n=!0),s.forEach(function(t,e){var i=document.createElement("td"),n=t.getFieldValue(o);switch(void 0===n?"undefined":_typeof(n)){case"object":n=JSON.stringify(n);break;case"undefined":case"null":n="";break;default:n=n}i.innerHTML=n,t.definition.align&&(i.style.textAlign=t.definition.align),s.length,f&&y.mapElementStyles(f,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),r.appendChild(i)}),n?i=h:(e%2||!u||(i=u),e%2&&d&&(i=d)),i&&y.mapElementStyles(i,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),c.appendChild(r)})}var c,u,d,h,p,f,g,n,o,m,v,y=this,b=[];if(this.htmlElement=document.createElement("table"),y.mapElementStyles(this.table.element,this.htmlElement,["border-top","border-left","border-right","border-bottom"]),r.columnHeaders)if("groups"==r.columnHeaders){var _=[];s.forEach(function(t){_=_.concat(function e(t,i){var n=[];return void 0===b[i]&&(b[i]=[]),b[i].push({title:t.title,width:t.width,height:1,children:!!t.subGroups,element:t.column.getElement()}),t.subGroups?(t.subGroups.forEach(function(t){n=n.concat(e(t,i+1))}),n):[t.column]}(t,0))}),s=_,b.forEach(function(t,e){t.forEach(function(t){t.children||(t.height=b.length-e)})}),m=b,v=document.createElement("thead"),m.forEach(function(t){var i=document.createElement("tr");t.forEach(function(t){var e=document.createElement("th");1<t.width&&(e.colSpan=t.width),1<t.height&&(e.rowSpan=t.height),e.innerHTML=t.title,y.mapElementStyles(t.element,e,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),i.appendChild(e)}),y.mapElementStyles(y.table.columnManager.getHeadersElement(),i,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),v.appendChild(i)}),y.htmlElement.appendChild(v)}else o=document.createElement("tr"),s.forEach(function(t){var e=document.createElement("th");e.innerHTML=t.definition.title,y.mapElementStyles(t.getElement(),e,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),o.appendChild(e)}),y.mapElementStyles(y.table.columnManager.getHeadersElement(),o,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),y.htmlElement.appendChild(document.createElement("thead").appendChild(o));c=document.createElement("tbody"),window.getComputedStyle&&(u=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),d=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),h=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),p=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),g=this.table.element.getElementsByClassName("tabulator-group")[0],p&&(n=p.getElementsByClassName("tabulator-cell"),f=n[0],n[n.length-1])),r.rowGroups?t.forEach(function(t){!function e(i,n){var t=document.createElement("tr"),o=document.createElement("td");o.colSpan=s.length,o.innerHTML=i.key,t.appendChild(o),c.appendChild(t),y.mapElementStyles(g,t,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),i.subGroups?i.subGroups.forEach(function(t){e(t,n[i.key]&&n[i.key].groups||{})}):(r.columnCalcs&&a(n,i.key,"top"),l(i.rows),r.columnCalcs&&a(n,i.key,"bottom"))}(t,e||{})}):(r.columnCalcs&&a(e,"top"),l(t),r.columnCalcs&&a(e,"bottom")),this.htmlElement.appendChild(c)},g.prototype.mapElementStyles=function(t,e,i){var n={"background-color":"backgroundColor",color:"fontColor","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom"};if(window.getComputedStyle){var o=window.getComputedStyle(t);i.forEach(function(t){e.style[n[t]]=o.getPropertyValue(t)})}},g.prototype.copySelectors={userSelection:function(t,e){return e},selected:function(t,e){var i=[];return this.table.modExists("selectRow",!0)&&(i=this.table.modules.selectRow.getSelectedRows()),t.rowGroups&&console.warn("Clipboard Warning - select coptSelector does not support row groups"),this.buildOutput(i,t,e)},table:function(t,e){return t.rowGroups&&console.warn("Clipboard Warning - table coptSelector does not support row groups"),this.buildOutput(this.table.rowManager.getComponents(),t,e)},active:function(t,e){var i;return i=t.rowGroups?this.buildComplexRows(t):this.table.rowManager.getComponents("active"),this.buildOutput(i,t,e)},visible:function(t,e){var i;return i=t.rowGroups?this.buildComplexRows(t):this.table.rowManager.getComponents("visible"),this.buildOutput(i,t,e)}},g.prototype.copyFormatters={raw:function(t,e){return t},table:function(t,e){var i=[];return t.forEach(function(t){var e=[];t.forEach(function(t){void 0===t&&(t=""),(t=null==t?"":t.toString()).match(/\r|\n/)&&(t='"'+(t=t.split('"').join('""'))+'"'),e.push(t)}),i.push(e.join("\t"))}),i.join("\n")}},g.prototype.pasteParsers={table:function(t){var e=[],i=!0,n=this.table.columnManager.columns,o=[],r=[];return(t=t.split("\n")).forEach(function(t){e.push(t.split("\t"))}),!(!e.length||1===e.length&&e[0].length<2)&&(e[0].forEach(function(e){var t=n.find(function(t){return e&&t.definition.title&&e.trim()&&t.definition.title.trim()===e.trim()});t?o.push(t):i=!1}),i||(i=!0,o=[],e[0].forEach(function(e){var t=n.find(function(t){return e&&t.field&&e.trim()&&t.field.trim()===e.trim()});t?o.push(t):i=!1}),i||(o=this.table.columnManager.columnsByIndex)),i&&e.shift(),e.forEach(function(t){var i={};t.forEach(function(t,e){o[e]&&(i[o[e].field]=t)}),r.push(i)}),r)}},g.prototype.pasteActions={replace:function(t){return this.table.setData(t)},update:function(t){return this.table.updateOrAddData(t)},insert:function(t){return this.table.addData(t)}},T.prototype.registerModule("clipboard",g);function m(t){this.table=t,this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0}m.prototype.initialize=function(){var t=null,e=this.table.columnManager.getFirstVisibileColumn(),i=this.table.options;switch(this.field=i.dataTreeChildField,this.indent=i.dataTreeChildIndent,this.elementField=i.dataTreeElementColumn||!!e&&e.field,i.dataTreeBranchElement&&(!0===i.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof i.dataTreeBranchElement?((t=document.createElement("div")).innerHTML=i.dataTreeBranchElement,this.branchEl=t.firstChild):this.branchEl=i.dataTreeBranchElement),i.dataTreeCollapseElement?"string"==typeof i.dataTreeCollapseElement?((t=document.createElement("div")).innerHTML=i.dataTreeCollapseElement,this.collapseEl=t.firstChild):this.collapseEl=i.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),i.dataTreeExpandElement?"string"==typeof i.dataTreeExpandElement?((t=document.createElement("div")).innerHTML=i.dataTreeExpandElement,this.expandEl=t.firstChild):this.expandEl=i.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),_typeof(i.dataTreeStartExpanded)){case"boolean":this.startOpen=function(t,e){return i.dataTreeStartExpanded};break;case"function":this.startOpen=i.dataTreeStartExpanded;break;default:this.startOpen=function(t,e){return i.dataTreeStartExpanded[e]}}},m.prototype.initializeRow=function(t){var e=t.getData()[this.field],i=Array.isArray(e),n=i||!i&&"object"===(void 0===e?"undefined":_typeof(e))&&null!==e;t.modules.dataTree={index:0,open:!!n&&this.startOpen(t.getComponent(),0),controlEl:!1,branchEl:!1,parent:!1,children:n}},m.prototype.layoutRow=function(t){var e=(this.elementField?t.getCell(this.elementField):t.getCells()[0]).getElement(),i=t.modules.dataTree;i.branchEl&&i.branchEl.parentNode.removeChild(i.branchEl),this.generateControlElement(t,e),i.index&&(this.branchEl?(i.branchEl=this.branchEl.cloneNode(!0),e.insertBefore(i.branchEl,e.firstChild),i.branchEl.style.marginLeft=(i.branchEl.offsetWidth+i.branchEl.style.marginRight)*(i.index-1)+i.index*this.indent+"px"):e.style.paddingLeft=parseInt(window.getComputedStyle(e,null).getPropertyValue("padding-left"))+i.index*this.indent+"px")},m.prototype.generateControlElement=function(e,t){var i=this,n=e.modules.dataTree,o=(t=t||e.getCells()[0].getElement(),n.controlEl);!1!==n.children&&(n.open?(n.controlEl=this.collapseEl.cloneNode(!0),n.controlEl.addEventListener("click",function(t){t.stopPropagation(),i.collapseRow(e)})):(n.controlEl=this.expandEl.cloneNode(!0),n.controlEl.addEventListener("click",function(t){t.stopPropagation(),i.expandRow(e)})),n.controlEl.addEventListener("mousedown",function(t){t.stopPropagation()}),o&&o.parentNode===t?o.parentNode.replaceChild(n.controlEl,o):t.insertBefore(n.controlEl,t.firstChild))},m.prototype.setDisplayIndex=function(t){this.displayIndex=t},m.prototype.getDisplayIndex=function(){return this.displayIndex},m.prototype.getRows=function(t){var n=this,o=[];return t.forEach(function(t,e){var i;o.push(t),t instanceof d&&((i=t.modules.dataTree.children).index||!1===i.children||n.getChildren(t).forEach(function(t){o.push(t)}))}),o},m.prototype.getChildren=function(t){var e=this,i=t.modules.dataTree,n=[],o=[];return!1!==i.children&&i.open&&(Array.isArray(i.children)||(i.children=this.generateChildren(t)),n=this.table.modExists("filter")?this.table.modules.filter.filter(i.children):i.children,this.table.modExists("sort")&&this.table.modules.sort.sort(n),n.forEach(function(t){o.push(t),e.getChildren(t).forEach(function(t){o.push(t)})})),o},m.prototype.generateChildren=function(i){var n=this,o=[],t=i.getData()[this.field];return Array.isArray(t)||(t=[t]),t.forEach(function(t){var e=new d(t||{},n.table.rowManager);e.modules.dataTree.index=i.modules.dataTree.index+1,e.modules.dataTree.parent=i,e.modules.dataTree.children&&(e.modules.dataTree.open=n.startOpen(e.getComponent(),e.modules.dataTree.index)),o.push(e)}),o},m.prototype.expandRow=function(t,e){var i=t.modules.dataTree;!1!==i.children&&(i.open=!0,t.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowExpanded(t.getComponent(),t.modules.dataTree.index))},m.prototype.collapseRow=function(t){var e=t.modules.dataTree;!1!==e.children&&(e.open=!1,t.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowCollapsed(t.getComponent(),t.modules.dataTree.index))},m.prototype.toggleRow=function(t){var e=t.modules.dataTree;!1!==e.children&&(e.open?this.collapseRow(t):this.expandRow(t))},m.prototype.getTreeParent=function(t){return!!t.modules.dataTree.parent&&t.modules.dataTree.parent.getComponent()},m.prototype.getTreeChildren=function(t){var e=t.modules.dataTree,i=[];return e.children&&(Array.isArray(e.children)||(e.children=this.generateChildren(t)),e.children.forEach(function(t){t instanceof d&&i.push(t.getComponent())})),i},m.prototype.checkForRestyle=function(t){t.row.cells.indexOf(t)||!1!==t.row.modules.dataTree.children&&t.row.reinitialize()},m.prototype.getChildField=function(){return this.field},m.prototype.redrawNeeded=function(t){return!!this.field&&void 0!==t[this.field]||!!this.elementField&&void 0!==t[this.elementField]},T.prototype.registerModule("dataTree",m);function v(t){this.table=t,this.fields={},this.columnsByIndex=[],this.columnsByField={},this.config={}}v.prototype.download=function(i,n,t,e,o){var r=this,s=!1;this.processConfig(),"function"==typeof i?s=i:r.downloaders[i]?s=r.downloaders[i]:console.warn("Download Error - No such download type found: ",i),this.processColumns(),s&&s.call(this,r.processDefinitions(),r.processData(e||"active"),t||{},function(t,e){o?!0===o?r.triggerDownload(t,e,i,n,!0):o(t):r.triggerDownload(t,e,i,n)},this.config)},v.prototype.processConfig=function(){var t={columnGroups:!0,rowGroups:!0,columnCalcs:!0};if(this.table.options.downloadConfig)for(var e in this.table.options.downloadConfig)t[e]=this.table.options.downloadConfig[e];t.rowGroups&&this.table.options.groupBy&&this.table.modExists("groupRows")&&(this.config.rowGroups=!0),t.columnGroups&&this.table.columnManager.columns.length!=this.table.columnManager.columnsByIndex.length&&(this.config.columnGroups=!0),t.columnCalcs&&this.table.modExists("columnCalcs")&&(this.config.columnCalcs=!0)},v.prototype.processColumns=function(){var e=this;e.columnsByIndex=[],e.columnsByField={},e.table.columnManager.columnsByIndex.forEach(function(t){t.field&&!1!==t.definition.download&&(t.visible||!t.visible&&t.definition.download)&&(e.columnsByIndex.push(t),e.columnsByField[t.field]=t)})},v.prototype.processDefinitions=function(){var i=this,n=[];return this.config.columnGroups?i.table.columnManager.columns.forEach(function(t){var e=i.processColumnGroup(t);e&&n.push(e)}):i.columnsByIndex.forEach(function(t){!1!==t.download&&n.push(i.processDefinition(t))}),n},v.prototype.processColumnGroup=function(t){var i=this,e=t.columns,n=0,o=this.processDefinition(t),r={type:"group",title:o.title,depth:1};if(e.length){if(r.subGroups=[],r.width=0,e.forEach(function(t){var e=i.processColumnGroup(t);e.depth>n&&(n=e.depth),e&&(r.width+=e.width,r.subGroups.push(e))}),r.depth+=n,!r.width)return!1}else{if(!t.field||!1===t.definition.download||!(t.visible||!t.visible&&t.definition.download))return!1;r.width=1,r.definition=o}return r},v.prototype.processDefinition=function(t){var e={};for(var i in t.definition)e[i]=t.definition[i];return void 0!==t.definition.downloadTitle&&(e.title=t.definition.downloadTitle),e},v.prototype.processData=function(t){var e=this,i=[],n=[],o=!1,r={};return this.config.rowGroups?("visible"==t?(o=this.table.rowManager.getRows(t)).forEach(function(t){if("row"==t.type){var e=t.getGroup();-1===n.indexOf(e)&&n.push(e)}}):n=this.table.modules.groupRows.getGroups(),n.forEach(function(t){i.push(e.processGroupData(t,o))})):i=this.table.rowManager.getData(t,"download"),this.config.columnCalcs&&(r=this.table.getCalcResults(),i={calcs:r,data:i}),"function"==typeof this.table.options.downloadDataFormatter&&(i=this.table.options.downloadDataFormatter(i)),i},v.prototype.processGroupData=function(t,e){var i=this,n=t.getSubGroups(),o={type:"group",key:t.key};return n.length?(o.subGroups=[],n.forEach(function(t){o.subGroups.push(i.processGroupData(t,e))})):e?(o.rows=[],t.rows.forEach(function(t){-1<e.indexOf(t)&&o.rows.push(t.getData("download"))})):o.rows=t.getData(!0,"download"),o},v.prototype.triggerDownload=function(t,e,i,n,o){var r=document.createElement("a"),s=new Blob([t],{type:e});n=n||"Tabulator."+("function"==typeof i?"txt":i);(s=this.table.options.downloadReady.call(this.table,t,s))&&(o?window.open(window.URL.createObjectURL(s)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(s,n):(r.setAttribute("href",window.URL.createObjectURL(s)),r.setAttribute("download",n),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)),this.table.options.downloadComplete&&this.table.options.downloadComplete())},v.prototype.getFieldValue=function(t,e){var i=this.columnsByField[t];return!!i&&i.getFieldValue(e)},v.prototype.commsReceived=function(t,e,i){switch(e){case"intercept":this.download(i.type,"",i.options,i.intercept)}},v.prototype.downloaders={csv:function(t,e,i,n,o){function r(t){t.forEach(function(i){var n=[];u.forEach(function(t){var e=l.getFieldValue(t,i);switch(void 0===e?"undefined":_typeof(e)){case"object":e=JSON.stringify(e);break;case"undefined":case"null":e="";break;default:e=e}n.push('"'+String(e).split('"').join('""')+'"')}),s.push(n.join(d))})}var s,a,l=this,c=[],u=[],d=i&&i.delimiter?i.delimiter:",";o.columnGroups?(console.warn("Download Warning - CSV downloader cannot process column groups"),t.forEach(function(t){!function e(t,i){t.subGroups?t.subGroups.forEach(function(t){e(t,i+1)}):(c.push('"'+String(t.title).split('"').join('""')+'"'),u.push(t.definition.field))}(t,0)})):t.forEach(function(t){c.push('"'+String(t.title).split('"').join('""')+'"'),u.push(t.field)}),s=[c.join(d)],o.columnCalcs&&(console.warn("Download Warning - CSV downloader cannot process column calculations"),e=e.data),o.rowGroups?(console.warn("Download Warning - CSV downloader cannot process row groups"),e.forEach(function(t){!function e(t){t.subGroups?t.subGroups.forEach(function(t){e(t)}):r(t.rows)}(t)})):r(e),a=s.join("\n"),i.bom&&(a="\ufeff"+a),n(a,"text/csv")},json:function(t,e,i,n,o){o.columnCalcs&&(console.warn("Download Warning - CSV downloader cannot process column calculations"),e=e.data),n(JSON.stringify(e,null,"\t"),"application/json")},pdf:function(t,e,i,n,o){function r(t){switch(void 0===t?"undefined":_typeof(t)){case"object":t=JSON.stringify(t);break;case"undefined":case"null":t="";break;default:t=t}return t}function s(t){t.forEach(function(t){h.push(a(t))})}function a(i,n){var o=[];return u.forEach(function(t){var e=c.getFieldValue(t,i);e=r(e),n?o.push({content:e,styles:n}):o.push(e)}),o}function l(t,e,i){var n=t[e];n&&(i&&(n=n[i]),Object.keys(n).length&&h.push(a(n,v)))}var c=this,u=[],d=[],h=[],p={},f=1,g={},m=i.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},v=i.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},y=i.jsPDF||{},b=i&&i.title?i.title:"";if(o.columnCalcs&&(p=e.calcs,e=e.data),y.orientation||(y.orientation=i.orientation||"landscape"),y.unit||(y.unit="pt"),o.columnGroups){t.forEach(function(t){t.depth>f&&(f=t.depth)});for(var _=0;_<f;_++)d.push([]);t.forEach(function(t){!function e(t,i){var n=t.width,o=1,r={content:t.title||""};if(o=t.subGroups?(t.subGroups.forEach(function(t){e(t,i+1)}),1):(u.push(t.definition.field),f-i),r.rowSpan=o,d[i].push(r),n--,1<o)for(var s=i+1;s<f;s++)d[s].push("");for(s=0;s<n;s++)d[i].push("")}(t,0)})}else t.forEach(function(t){t.field&&(d.push(t.title||""),u.push(t.field))}),d=[d];o.rowGroups?e.forEach(function(t){!function e(i,n){var t=[];t.push({content:r(i.key),colSpan:u.length,styles:m}),h.push(t),i.subGroups?i.subGroups.forEach(function(t){e(t,n[i.key]&&n[i.key].groups||{})}):(o.columnCalcs&&l(n,i.key,"top"),s(i.rows),o.columnCalcs&&l(n,i.key,"bottom"))}(t,p)}):(o.columnCalcs&&l(p,"top"),s(e),o.columnCalcs&&l(p,"bottom"));var E=new jsPDF(y);i&&i.autoTable&&(g="function"==typeof i.autoTable?i.autoTable(E)||{}:i.autoTable),b&&(g.addPageContent=function(t){E.text(b,40,30)}),g.head=d,g.body=h,E.autoTable(g),i&&i.documentProcessing&&i.documentProcessing(E),n(E.output("arraybuffer"),"application/pdf")},xlsx:function(t,e,i,n,u){function o(){function i(t,e){void 0===a[e]&&(a[e]=[]),void 0===f[e]&&(f[e]=[]),1<t.width&&f[e].push({type:"hoz",start:a[e].length,end:a[e].length+t.width-1}),a[e].push(t.title),t.subGroups?t.subGroups.forEach(function(t){i(t,e+1)}):(l.push(t.definition.field),function(){var n=0;a.forEach(function(t){var e=t.length;n<e&&(n=e)}),a.forEach(function(t){var e=t.length;if(e<n)for(var i=e;i<n;i++)t.push("")})}(l.length),f[e].push({type:"vert",start:l.length-1}))}function o(t){t.forEach(function(t){c.push(r(t))})}function r(i){var n=[];return l.forEach(function(t){var e=d.getFieldValue(t,i);n.push(e instanceof Date||"object"!==(void 0===e?"undefined":_typeof(e))?e:JSON.stringify(e))}),n}function s(t,e,i){var n=t[e];n&&(i&&(n=n[i]),Object.keys(n).length&&(g.push(c.length),c.push(r(n))))}var a=[],l=[],c=[];return u.columnGroups?(t.forEach(function(t){i(t,0)}),a.forEach(function(t){c.push(t)})):(t.forEach(function(t){a.push(t.title),l.push(t.field)}),c.push(a)),u.rowGroups?e.forEach(function(t){!function e(i,n){var t=[];t.push(i.key),p.push(c.length),c.push(t),i.subGroups?i.subGroups.forEach(function(t){e(t,n[i.key]&&n[i.key].groups||{})}):(u.columnCalcs&&s(n,i.key,"top"),o(i.rows),u.columnCalcs&&s(n,i.key,"bottom"))}(t,h)}):(u.columnCalcs&&s(h,"top"),o(e),u.columnCalcs&&s(h,"bottom")),function(){var t={},e={s:{c:0,r:0},e:{c:l.length,r:c.length}};XLSX.utils.sheet_add_aoa(t,c),t["!ref"]=XLSX.utils.encode_range(e);var i=function(){var i=[];return p.forEach(function(t){i.push({s:{r:t,c:0},e:{r:t,c:l.length-1}})}),f.forEach(function(t,e){t.forEach(function(t){"hoz"===t.type?i.push({s:{r:e,c:t.start},e:{r:e,c:t.end}}):e!=a.length-1&&i.push({s:{r:e,c:t.start},e:{r:a.length-1,c:t.start}})})}),i}();return i.length&&(t["!merges"]=i),t}()}var d=this,r=i.sheetName||"Sheet1",s=XLSX.utils.book_new(),h={},p=[],f=[],g=[];if(s.SheetNames=[],s.Sheets={},u.columnCalcs&&(h=e.calcs,e=e.data),i.sheetOnly)n(o());else{if(i.sheets)for(var a in i.sheets)!0===i.sheets[a]?(s.SheetNames.push(a),s.Sheets[a]=o()):(s.SheetNames.push(a),this.table.modules.comms.send(i.sheets[a],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},intercept:function(t){s.Sheets[a]=t}}));else s.SheetNames.push(r),s.Sheets[r]=o();i.documentProcessing&&(s=i.documentProcessing(s)),n(function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0;n!=t.length;++n)i[n]=255&t.charCodeAt(n);return e}(XLSX.write(s,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(t,e,i,n,o){this.table.modExists("htmlTableExport",!0)&&n(this.table.modules.htmlTableExport.getHtml(!0,i.style,o),"text/html")}},T.prototype.registerModule("download",v);function y(t){this.table=t,this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1}y.prototype.initializeColumn=function(t){var e={editor:!1,blocked:!1,check:t.definition.editable,params:t.definition.editorParams||{}};switch(_typeof(t.definition.editor)){case"string":"tick"===t.definition.editor&&(t.definition.editor="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),this.editors[t.definition.editor]?e.editor=this.editors[t.definition.editor]:console.warn("Editor Error - No such editor found: ",t.definition.editor);break;case"function":e.editor=t.definition.editor;break;case"boolean":!0===t.definition.editor&&("function"!=typeof t.definition.formatter?("tick"===t.definition.formatter&&(t.definition.formatter="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),this.editors[t.definition.formatter]?e.editor=this.editors[t.definition.formatter]:e.editor=this.editors.input):console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",t.definition.formatter))}e.editor&&(t.modules.edit=e)},y.prototype.getCurrentCell=function(){return!!this.currentCell&&this.currentCell.getComponent()},y.prototype.clearEditor=function(){var t,e=this.currentCell;if(this.invalidEdit=!1,e){for(this.currentCell=!1,(t=e.getElement()).classList.remove("tabulator-validation-fail"),t.classList.remove("tabulator-editing");t.firstChild;)t.removeChild(t.firstChild);e.row.getElement().classList.remove("tabulator-row-editing")}},y.prototype.cancelEdit=function(){if(this.currentCell){var t=this.currentCell,e=this.currentCell.getComponent();this.clearEditor(),t.setValueActual(t.getValue()),t.column.cellEvents.cellEditCancelled&&t.column.cellEvents.cellEditCancelled.call(this.table,e),this.table.options.cellEditCancelled.call(this.table,e)}},y.prototype.bindEditor=function(e){var i=this,n=e.getElement();n.setAttribute("tabindex",0),n.addEventListener("click",function(t){n.classList.contains("tabulator-editing")||n.focus()}),n.addEventListener("mousedown",function(t){i.mouseClick=!0}),n.addEventListener("focus",function(t){i.recursionBlock||i.edit(e,t,!1)})},y.prototype.focusCellNoEvent=function(t,e){this.recursionBlock=!0,e&&"ie"===this.table.browser||t.getElement().focus(),this.recursionBlock=!1},y.prototype.editCell=function(t,e){this.focusCellNoEvent(t),this.edit(t,!1,e)},y.prototype.edit=function(i,t,e){var n,o,r,s=this,a=!0,l=function(){},c=i.getElement();if(!this.currentCell){if(i.column.modules.edit.blocked)return this.mouseClick=!1,c.blur(),!1;switch(t&&t.stopPropagation(),_typeof(i.column.modules.edit.check)){case"function":a=i.column.modules.edit.check(i.getComponent());break;case"boolean":a=i.column.modules.edit.check}if(a||e){if(s.cancelEdit(),o=(s.currentCell=i).getComponent(),this.mouseClick&&(this.mouseClick=!1,i.column.cellEvents.cellClick&&i.column.cellEvents.cellClick.call(this.table,t,o)),i.column.cellEvents.cellEditing&&i.column.cellEvents.cellEditing.call(this.table,o),s.table.options.cellEditing.call(this.table,o),r="function"==typeof i.column.modules.edit.params?i.column.modules.edit.params(o):i.column.modules.edit.params,!1===(n=i.column.modules.edit.editor.call(s,o,function(t){l=t},function(t){if(s.currentCell===i){var e=!0;return i.column.modules.validate&&s.table.modExists("validate")&&(e=s.table.modules.validate.validate(i.column.modules.validate,i.getComponent(),t)),!0===e?(s.clearEditor(),i.setValue(t,!0),s.table.options.dataTree&&s.table.modExists("dataTree")&&s.table.modules.dataTree.checkForRestyle(i),!0):(s.invalidEdit=!0,c.classList.add("tabulator-validation-fail"),s.focusCellNoEvent(i,!0),l(),s.table.options.validationFailed.call(s.table,i.getComponent(),t,e),!1)}},function(){s.currentCell===i&&(s.cancelEdit(),s.table.options.dataTree&&s.table.modExists("dataTree")&&s.table.modules.dataTree.checkForRestyle(i))},r)))return c.blur(),!1;if(!(n instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",n),c.blur(),!1;for(c.classList.add("tabulator-editing"),i.row.getElement().classList.add("tabulator-row-editing");c.firstChild;)c.removeChild(c.firstChild);c.appendChild(n),l();for(var u=c.children,d=0;d<u.length;d++)u[d].addEventListener("click",function(t){t.stopPropagation()});return!0}return this.mouseClick=!1,c.blur(),!1}this.invalidEdit||this.cancelEdit()},y.prototype.editors={input:function(t,e,i,n,o){function r(t){null==s&&""!==a.value||a.value!=s?i(a.value)&&(s=a.value):n()}var s=t.getValue(),a=document.createElement("input");if(a.setAttribute("type",o.search?"search":"text"),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",o.elementAttributes&&"object"==_typeof(o.elementAttributes))for(var l in o.elementAttributes)"+"==l.charAt(0)?(l=l.slice(1),a.setAttribute(l,a.getAttribute(l)+o.elementAttributes["+"+l])):a.setAttribute(l,o.elementAttributes[l]);return a.value=void 0!==s?s:"",e(function(){a.focus(),a.style.height="100%"}),a.addEventListener("change",r),a.addEventListener("blur",r),a.addEventListener("keydown",function(t){switch(t.keyCode){case 13:r();break;case 27:n()}}),a},textarea:function(e,t,i,n,o){function r(t){null==s&&""!==c.value||c.value!=s?(i(c.value)&&(s=c.value),setTimeout(function(){e.getRow().normalizeHeight()},300)):n()}var s=e.getValue(),a=o.verticalNavigation||"hybrid",l=String(null!=s?s:""),c=(l.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),u=0;if(c.style.display="block",c.style.padding="2px",c.style.height="100%",c.style.width="100%",c.style.boxSizing="border-box",c.style.whiteSpace="pre-wrap",c.style.resize="none",o.elementAttributes&&"object"==_typeof(o.elementAttributes))for(var d in o.elementAttributes)"+"==d.charAt(0)?(d=d.slice(1),c.setAttribute(d,c.getAttribute(d)+o.elementAttributes["+"+d])):c.setAttribute(d,o.elementAttributes[d]);return c.value=l,t(function(){c.focus(),c.style.height="100%"}),c.addEventListener("change",r),c.addEventListener("blur",r),c.addEventListener("keyup",function(){c.style.height="";var t=c.scrollHeight;c.style.height=t+"px",t!=u&&(u=t,e.getRow().normalizeHeight())}),c.addEventListener("keydown",function(t){switch(t.keyCode){case 27:n();break;case 38:("editor"==a||"hybrid"==a&&c.selectionStart)&&(t.stopImmediatePropagation(),t.stopPropagation());break;case 40:("editor"==a||"hybrid"==a&&c.selectionStart!==c.value.length)&&(t.stopImmediatePropagation(),t.stopPropagation())}}),c},number:function(t,e,i,n,o){function r(){var t=l.value;isNaN(t)||""===t||(t=Number(t)),t!=s?i(t)&&(s=t):n()}var s=t.getValue(),a=o.verticalNavigation||"editor",l=document.createElement("input");if(l.setAttribute("type","number"),void 0!==o.max&&l.setAttribute("max",o.max),void 0!==o.min&&l.setAttribute("min",o.min),void 0!==o.step&&l.setAttribute("step",o.step),l.style.padding="4px",l.style.width="100%",l.style.boxSizing="border-box",o.elementAttributes&&"object"==_typeof(o.elementAttributes))for(var c in o.elementAttributes)"+"==c.charAt(0)?(c=c.slice(1),l.setAttribute(c,l.getAttribute(c)+o.elementAttributes["+"+c])):l.setAttribute(c,o.elementAttributes[c]);l.value=s;function u(t){r()}return e(function(){l.removeEventListener("blur",u),l.focus(),l.style.height="100%",l.addEventListener("blur",u)}),l.addEventListener("keydown",function(t){switch(t.keyCode){case 13:r();break;case 27:n();break;case 38:case 40:"editor"==a&&(t.stopImmediatePropagation(),t.stopPropagation())}}),l},range:function(t,e,i,n,o){function r(){var t=a.value;isNaN(t)||""===t||(t=Number(t)),t!=s?i(t)&&(s=t):n()}var s=t.getValue(),a=document.createElement("input");if(a.setAttribute("type","range"),void 0!==o.max&&a.setAttribute("max",o.max),void 0!==o.min&&a.setAttribute("min",o.min),void 0!==o.step&&a.setAttribute("step",o.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",o.elementAttributes&&"object"==_typeof(o.elementAttributes))for(var l in o.elementAttributes)"+"==l.charAt(0)?(l=l.slice(1),a.setAttribute(l,a.getAttribute(l)+o.elementAttributes["+"+l])):a.setAttribute(l,o.elementAttributes[l]);return a.value=s,e(function(){a.focus(),a.style.height="100%"}),a.addEventListener("blur",function(t){r()}),a.addEventListener("keydown",function(t){switch(t.keyCode){case 13:case 9:r();break;case 27:n()}}),a},select:function(a,t,e,i,l){function n(t){var i,n={},e=d.table.getData();return(i=t?d.table.columnManager.getColumnByField(t):a.getColumn()._getSelf())?(e.forEach(function(t){var e=i.getFieldValue(t);null!=e&&""!==e&&(n[e]=!0)}),n=l.sortValuesList?"asc"==l.sortValuesList?Object.keys(n).sort():Object.keys(n).sort().reverse():Object.keys(n)):console.warn("unable to find matching column to create select lookup list:",t),n}function o(t,i){function n(t){return(t={label:l.listItemFormatter?l.listItemFormatter(t.value,t.label):t.label,value:t.value,element:!1}).value!==i&&(isNaN(parseFloat(t.value))||isNaN(parseFloat(t.value))||parseFloat(t.value)!==parseFloat(i))||c(t),o.push(t),r.push(t),t}var o=[],r=[];if("function"==typeof t&&(t=t(a)),Array.isArray(t))t.forEach(function(t){var e;"object"===(void 0===t?"undefined":_typeof(t))?t.options?(e={label:t.label,group:!0,element:!1},r.push(e),t.options.forEach(function(t){n(t)})):n(t):((e={label:l.listItemFormatter?l.listItemFormatter(t,t):t,value:t,element:!1}).value!==i&&(isNaN(parseFloat(e.value))||isNaN(parseFloat(e.value))||parseFloat(e.value)!==parseFloat(i))||c(e),o.push(e),r.push(e))});else for(var e in t){var s={label:l.listItemFormatter?l.listItemFormatter(e,t[e]):t[e],value:e,element:!1};s.value!==i&&(isNaN(parseFloat(s.value))||isNaN(parseFloat(s.value))||parseFloat(s.value)!==parseFloat(i))||c(s),o.push(s),r.push(s)}y=o,b=r,function(){for(;v.firstChild;)v.removeChild(v.firstChild);b.forEach(function(t){var e=t.element;e||(t.group?((e=document.createElement("div")).classList.add("tabulator-edit-select-list-group"),e.tabIndex=0,e.innerHTML=""===t.label?"&nbsp;":t.label):((e=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),e.tabIndex=0,e.innerHTML=""===t.label?"&nbsp;":t.label,e.addEventListener("click",function(){c(t),u()}),t===_&&e.classList.add("active")),e.addEventListener("mousedown",function(){E=!1,setTimeout(function(){E=!0},10)}),t.element=e),v.appendChild(e)})}()}function c(t){_&&_.element&&_.element.classList.remove("active"),_=t,m.value="&nbsp;"===t.label?"":t.label,t.element&&t.element.classList.add("active")}function u(){s(),p!==_.value?(p=_.value,e(_.value)):i()}function r(){s(),i()}function s(){v.parentNode&&v.parentNode.removeChild(v),d.table.rowManager.element.removeEventListener("scroll",r)}var d=this,h=a.getElement(),p=a.getValue(),f=l.verticalNavigation||"editor",g=void 0!==p||null===p?p:void 0!==l.defaultValue?l.defaultValue:"",m=document.createElement("input"),v=document.createElement("div"),y=[],b=[],_={},E=!0;if(this.table.rowManager.element.addEventListener("scroll",r),!Array.isArray(l)&&(Array.isArray(l)||"object"!==(void 0===l?"undefined":_typeof(l))||l.values)||(console.warn("DEPRECATION WANRING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),l={values:l}),m.setAttribute("type","text"),m.style.padding="4px",m.style.width="100%",m.style.boxSizing="border-box",m.style.cursor="default",m.readOnly=0!=this.currentCell,l.elementAttributes&&"object"==_typeof(l.elementAttributes))for(var w in l.elementAttributes)"+"==w.charAt(0)?(w=w.slice(1),m.setAttribute(w,m.getAttribute(w)+l.elementAttributes["+"+w])):m.setAttribute(w,l.elementAttributes[w]);return m.value=void 0!==p||null===p?p:"",m.addEventListener("keydown",function(t){var e;switch(t.keyCode){case 38:e=y.indexOf(_),("editor"==f||"hybrid"==f&&e)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),0<e&&c(y[e-1]));break;case 40:e=y.indexOf(_),("editor"==f||"hybrid"==f&&e<y.length-1)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e<y.length-1&&c(-1==e?y[0]:y[e+1]));break;case 37:case 39:t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault();break;case 13:u();break;case 27:r()}}),m.addEventListener("blur",function(t){E&&r()}),m.addEventListener("focus",function(t){!function(){if(!v.parentNode){!0===l.values?o(n(),g):"string"==typeof l.values?o(n(l.values),g):o(l.values||[],g);var t=T.prototype.helpers.elOffset(h);v.style.minWidth=h.offsetWidth+"px",v.style.top=t.top+h.offsetHeight+"px",v.style.left=t.left+"px",document.body.appendChild(v)}}()}),(v=document.createElement("div")).classList.add("tabulator-edit-select-list"),t(function(){m.style.height="100%",m.focus()}),m},autocomplete:function(o,t,e,i,r){function n(t){var i,n={},e=h.table.getData();return(i=t?h.table.columnManager.getColumnByField(t):o.getColumn()._getSelf())?(e.forEach(function(t){var e=i.getFieldValue(t);null!=e&&""!==e&&(n[e]=!0)}),n=r.sortValuesList?"asc"==r.sortValuesList?Object.keys(n).sort():Object.keys(n).sort().reverse():Object.keys(n)):console.warn("unable to find matching column to create autocomplete lookup list:",t),n}function s(e,t){var i=[],n=[];r.searchFunc?(b.forEach(function(t){n.push(t.search)}),r.searchFunc(e,n).forEach(function(e){var t=b.find(function(t){return t.search===e});t&&i.push(t)})):""===e?r.showListOnEmpty&&b.forEach(function(t){i.push(t)}):b.forEach(function(t){null===t.value&&void 0===t.value||(-1<String(t.value).toLowerCase().indexOf(String(e).toLowerCase())||-1<String(t.title).toLowerCase().indexOf(String(e).toLowerCase()))&&i.push(t)}),_=i,function(i){for(var n=!1;y.firstChild;)y.removeChild(y.firstChild);_.forEach(function(t){var e=t.element;e||((e=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),e.tabIndex=0,e.innerHTML=t.title,e.addEventListener("click",function(){a(t),l()}),e.addEventListener("mousedown",function(){w=!1,setTimeout(function(){w=!0},10)}),t.element=e,i&&t.value==f&&(v.value=t.title,t.element.classList.add("active"),n=!0),t===E&&(t.element.classList.add("active"),n=!0)),y.appendChild(e)}),n||a(!1)}(t)}function a(t){E&&E.element&&E.element.classList.remove("active"),(E=t)&&t.element&&t.element.classList.add("active")}function l(){d(),E?f!==E.value?(f=E.value,v.value=E.title,e(E.value)):i():r.freetext?(f=v.value,e(v.value)):r.allowEmpty&&""===v.value?(f=v.value,e(v.value)):i()}function c(){d(),i()}function u(){if(!y.parentNode){for(;y.firstChild;)y.removeChild(y.firstChild);(function(t,i){var n=[];if(Array.isArray(t))t.forEach(function(t){var e={title:r.listItemFormatter?r.listItemFormatter(t,t):t,value:t,element:!1};e.value!==i&&(isNaN(parseFloat(e.value))||isNaN(parseFloat(e.value))||parseFloat(e.value)!==parseFloat(i))||a(e),n.push(e)});else for(var e in t){var o={title:r.listItemFormatter?r.listItemFormatter(e,t[e]):t[e],value:e,element:!1};o.value!==i&&(isNaN(parseFloat(o.value))||isNaN(parseFloat(o.value))||parseFloat(o.value)!==parseFloat(i))||a(o),n.push(o)}r.searchFunc&&n.forEach(function(t){t.search={title:t.title,value:t.value}}),b=n})(!0===r.values?n():"string"==typeof r.values?n(r.values):r.values||[],f);var t=T.prototype.helpers.elOffset(p);y.style.minWidth=p.offsetWidth+"px",y.style.top=t.top+p.offsetHeight+"px",y.style.left=t.left+"px",document.body.appendChild(y)}}function d(){y.parentNode&&y.parentNode.removeChild(y),h.table.rowManager.element.removeEventListener("scroll",c)}var h=this,p=o.getElement(),f=o.getValue(),g=r.verticalNavigation||"editor",m=void 0!==f||null===f?f:void 0!==r.defaultValue?r.defaultValue:"",v=document.createElement("input"),y=document.createElement("div"),b=[],_=[],E={},w=!0;if(this.table.rowManager.element.addEventListener("scroll",c),v.setAttribute("type","search"),v.style.padding="4px",v.style.width="100%",v.style.boxSizing="border-box",r.elementAttributes&&"object"==_typeof(r.elementAttributes))for(var C in r.elementAttributes)"+"==C.charAt(0)?(C=C.slice(1),v.setAttribute(C,v.getAttribute(C)+r.elementAttributes["+"+C])):v.setAttribute(C,r.elementAttributes[C]);return v.addEventListener("keydown",function(t){var e;switch(t.keyCode){case 38:e=_.indexOf(E),("editor"==g||"hybrid"==g&&e)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),a(0<e&&_[e-1]));break;case 40:e=_.indexOf(E),("editor"==g||"hybrid"==g&&e<_.length-1)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e<_.length-1&&a(-1==e?_[0]:_[e+1]));break;case 37:case 39:t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault();break;case 13:l();break;case 27:c();break;case 36:case 35:t.stopImmediatePropagation()}}),v.addEventListener("keyup",function(t){switch(t.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:s(v.value)}}),v.addEventListener("search",function(t){s(v.value)}),v.addEventListener("blur",function(t){w&&l()}),v.addEventListener("focus",function(t){var e=m;u(),s(v.value=e,!0)}),(y=document.createElement("div")).classList.add("tabulator-edit-select-list"),t(function(){v.style.height="100%",v.focus()}),v},star:function(t,e,n,i,o){function r(i){h.forEach(function(t,e){e<i?("ie"==a.table.browser?t.setAttribute("class","tabulator-star-active"):t.classList.replace("tabulator-star-inactive","tabulator-star-active"),t.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==a.table.browser?t.setAttribute("class","tabulator-star-inactive"):t.classList.replace("tabulator-star-active","tabulator-star-inactive"),t.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function s(t){r(c=t)}var a=this,l=t.getElement(),c=t.getValue(),u=l.getElementsByTagName("svg").length||5,d=l.getElementsByTagName("svg")[0]?l.getElementsByTagName("svg")[0].getAttribute("width"):14,h=[],p=document.createElement("div"),f=document.createElementNS("http://www.w3.org/2000/svg","svg");if(l.style.whiteSpace="nowrap",l.style.overflow="hidden",l.style.textOverflow="ellipsis",p.style.verticalAlign="middle",p.style.display="inline-block",p.style.padding="4px",f.setAttribute("width",d),f.setAttribute("height",d),f.setAttribute("viewBox","0 0 512 512"),f.setAttribute("xml:space","preserve"),f.style.padding="0 1px",o.elementAttributes&&"object"==_typeof(o.elementAttributes))for(var g in o.elementAttributes)"+"==g.charAt(0)?(g=g.slice(1),p.setAttribute(g,p.getAttribute(g)+o.elementAttributes["+"+g])):p.setAttribute(g,o.elementAttributes[g]);for(var m=1;m<=u;m++)!function(e){var t=document.createElement("span"),i=f.cloneNode(!0);h.push(i),t.addEventListener("mouseenter",function(t){t.stopPropagation(),t.stopImmediatePropagation(),r(e)}),t.addEventListener("mousemove",function(t){t.stopPropagation(),t.stopImmediatePropagation()}),t.addEventListener("click",function(t){t.stopPropagation(),t.stopImmediatePropagation(),n(e)}),t.appendChild(i),p.appendChild(t)}(m);return r(c=Math.min(parseInt(c),u)),p.addEventListener("mousemove",function(t){r(0)}),p.addEventListener("click",function(t){n(0)}),l.addEventListener("blur",function(t){i()}),l.addEventListener("keydown",function(t){switch(t.keyCode){case 39:s(c+1);break;case 37:s(c-1);break;case 13:n(c);break;case 27:i()}}),p},progress:function(t,e,i,n,o){function r(){var t=d*Math.round(f.offsetWidth/(l.clientWidth/100))+u;i(t),l.setAttribute("aria-valuenow",t),l.setAttribute("aria-label",h)}var s,a,l=t.getElement(),c=void 0===o.max?l.getElementsByTagName("div")[0].getAttribute("max")||100:o.max,u=void 0===o.min?l.getElementsByTagName("div")[0].getAttribute("min")||0:o.min,d=(c-u)/100,h=t.getValue()||0,p=document.createElement("div"),f=document.createElement("div");if(p.style.position="absolute",p.style.right="0",p.style.top="0",p.style.bottom="0",p.style.width="5px",p.classList.add("tabulator-progress-handle"),f.style.display="inline-block",f.style.position="relative",f.style.height="100%",f.style.backgroundColor="#488CE9",f.style.maxWidth="100%",f.style.minWidth="0%",o.elementAttributes&&"object"==_typeof(o.elementAttributes))for(var g in o.elementAttributes)"+"==g.charAt(0)?(g=g.slice(1),f.setAttribute(g,f.getAttribute(g)+o.elementAttributes["+"+g])):f.setAttribute(g,o.elementAttributes[g]);return l.style.padding="4px 4px",h=Math.min(parseFloat(h),c),h=Math.max(parseFloat(h),u),h=Math.round((h-u)/d),f.style.width=h+"%",l.setAttribute("aria-valuemin",u),l.setAttribute("aria-valuemax",c),f.appendChild(p),p.addEventListener("mousedown",function(t){s=t.screenX,a=f.offsetWidth}),p.addEventListener("mouseover",function(){p.style.cursor="ew-resize"}),l.addEventListener("mousemove",function(t){s&&(f.style.width=a+t.screenX-s+"px")}),l.addEventListener("mouseup",function(t){s&&(t.stopPropagation(),t.stopImmediatePropagation(),a=s=!1,r())}),l.addEventListener("keydown",function(t){switch(t.keyCode){case 39:f.style.width=f.clientWidth+l.clientWidth/100+"px";break;case 37:f.style.width=f.clientWidth-l.clientWidth/100+"px";break;case 13:r();break;case 27:n()}}),l.addEventListener("blur",function(){n()}),f},tickCross:function(t,e,i,n,o){function r(t){return l?t?u?c:a.checked:a.checked&&!u?(a.checked=!1,a.indeterminate=!0,u=!0,c):(u=!1,a.checked):a.checked}var s=t.getValue(),a=document.createElement("input"),l=o.tristate,c=void 0===o.indeterminateValue?null:o.indeterminateValue,u=!1;if(a.setAttribute("type","checkbox"),a.style.marginTop="5px",a.style.boxSizing="border-box",o.elementAttributes&&"object"==_typeof(o.elementAttributes))for(var d in o.elementAttributes)"+"==d.charAt(0)?(d=d.slice(1),a.setAttribute(d,a.getAttribute(d)+o.elementAttributes["+"+d])):a.setAttribute(d,o.elementAttributes[d]);return a.value=s,!l||void 0!==s&&s!==c&&""!==s||(u=!0,a.indeterminate=!0),"firefox"!=this.table.browser&&e(function(){a.focus()}),a.checked=!0===s||"true"===s||"True"===s||1===s,a.addEventListener("change",function(t){i(r())}),a.addEventListener("blur",function(t){i(r(!0))}),a.addEventListener("keydown",function(t){13==t.keyCode&&i(r()),27==t.keyCode&&n()}),a}},T.prototype.registerModule("edit",y);function b(t){this.table=t,this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.changed=!1}b.prototype.initializeColumn=function(o,t){var r=this,s=o.getField();o.modules.filter={success:function(n){var t,e="input"==o.modules.filter.tagType&&"text"==o.modules.filter.attrType||"textarea"==o.modules.filter.tagType?"partial":"match",i="";if(void 0===o.modules.filter.prevSuccess||o.modules.filter.prevSuccess!==n){if(o.modules.filter.prevSuccess=n,o.modules.filter.emptyFunc(n))delete r.headerFilters[s];else{switch(o.modules.filter.value=n,_typeof(o.definition.headerFilterFunc)){case"string":r.filters[o.definition.headerFilterFunc]?(i=o.definition.headerFilterFunc,t=function(t){var e=o.definition.headerFilterFuncParams||{},i=o.getFieldValue(t);return e="function"==typeof e?e(n,i,t):e,r.filters[o.definition.headerFilterFunc](n,i,t,e)}):console.warn("Header Filter Error - Matching filter function not found: ",o.definition.headerFilterFunc);break;case"function":i=t=function(t){var e=o.definition.headerFilterFuncParams||{},i=o.getFieldValue(t);return e="function"==typeof e?e(n,i,t):e,o.definition.headerFilterFunc(n,i,t,e)}}if(!t)switch(e){case"partial":t=function(t){var e=o.getFieldValue(t);return null!=e&&-1<String(e).toLowerCase().indexOf(String(n).toLowerCase())},i="like";break;default:t=function(t){return o.getFieldValue(t)==n},i="="}r.headerFilters[s]={value:n,func:t,type:i}}r.changed=!0,r.table.rowManager.filterRefresh()}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(o)},b.prototype.generateHeaderFilterElement=function(t,e,i){var n,o,r,s,a,l,c,u=this,d=this,h=t.modules.filter.success,p=t.getField();if(t.modules.filter.headerElement&&t.modules.filter.headerElement.parentNode&&t.contentElement.removeChild(t.modules.filter.headerElement.parentNode),p){switch(t.modules.filter.emptyFunc=t.definition.headerFilterEmptyCheck||function(t){return!t&&"0"!==t},(n=document.createElement("div")).classList.add("tabulator-header-filter"),_typeof(t.definition.headerFilter)){case"string":d.table.modules.edit.editors[t.definition.headerFilter]?(o=d.table.modules.edit.editors[t.definition.headerFilter],"tick"!==t.definition.headerFilter&&"tickCross"!==t.definition.headerFilter||t.definition.headerFilterEmptyCheck||(t.modules.filter.emptyFunc=function(t){return!0!==t&&!1!==t})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",t.definition.editor);break;case"function":o=t.definition.headerFilter;break;case"boolean":t.modules.edit&&t.modules.edit.editor?o=t.modules.edit.editor:t.definition.formatter&&d.table.modules.edit.editors[t.definition.formatter]?(o=d.table.modules.edit.editors[t.definition.formatter],"tick"!==t.definition.formatter&&"tickCross"!==t.definition.formatter||t.definition.headerFilterEmptyCheck||(t.modules.filter.emptyFunc=function(t){return!0!==t&&!1!==t})):o=d.table.modules.edit.editors.input}if(o){if(s={getValue:function(){return void 0!==e?e:""},getField:function(){return t.definition.field},getElement:function(){return n},getColumn:function(){return t.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},c="function"==typeof(c=t.definition.headerFilterParams||{})?c.call(d.table):c,!(r=o.call(this.table.modules.edit,s,function(){},h,function(){},c)))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor returned a value of false");if(!(r instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor should return an instance of Node, the editor returned:",r);p?d.table.modules.localize.bind("headerFilters|columns|"+t.definition.field,function(t){r.setAttribute("placeholder",void 0!==t&&t?t:d.table.modules.localize.getText("headerFilters|default"))}):d.table.modules.localize.bind("headerFilters|default",function(t){r.setAttribute("placeholder",void 0!==d.column.definition.headerFilterPlaceholder&&d.column.definition.headerFilterPlaceholder?d.column.definition.headerFilterPlaceholder:t)}),r.addEventListener("click",function(t){t.stopPropagation(),r.focus()}),r.addEventListener("focus",function(t){var e=u.table.columnManager.element.scrollLeft;e!==u.table.rowManager.element.scrollLeft&&(u.table.rowManager.scrollHorizontal(e),u.table.columnManager.scrollHorizontal(e))}),a=!1,l=function(t){a&&clearTimeout(a),a=setTimeout(function(){h(r.value)},300)},t.modules.filter.headerElement=r,t.modules.filter.attrType=r.hasAttribute("type")?r.getAttribute("type").toLowerCase():"",t.modules.filter.tagType=r.tagName.toLowerCase(),!1!==t.definition.headerFilterLiveFilter&&("autocomplete"!==t.definition.headerFilter&&"tickCross"!==t.definition.headerFilter&&("autocomplete"!==t.definition.editor&&"tickCross"!==t.definition.editor||!0!==t.definition.headerFilter)&&(r.addEventListener("keyup",l),r.addEventListener("search",l),"number"==t.modules.filter.attrType&&r.addEventListener("change",function(t){h(r.value)}),"text"==t.modules.filter.attrType&&"ie"!==this.table.browser&&r.setAttribute("type","search")),"input"!=t.modules.filter.tagType&&"select"!=t.modules.filter.tagType&&"textarea"!=t.modules.filter.tagType||r.addEventListener("mousedown",function(t){t.stopPropagation()})),n.appendChild(r),t.contentElement.appendChild(n),i||d.headerFilterColumns.push(t)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",t.definition.title)},b.prototype.hideHeaderFilterElements=function(){this.headerFilterColumns.forEach(function(t){t.modules.filter&&t.modules.filter.headerElement&&(t.modules.filter.headerElement.style.display="none")})},b.prototype.showHeaderFilterElements=function(){this.headerFilterColumns.forEach(function(t){t.modules.filter&&t.modules.filter.headerElement&&(t.modules.filter.headerElement.style.display="")})},b.prototype.setHeaderFilterFocus=function(t){t.modules.filter&&t.modules.filter.headerElement?t.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",t.getField())},b.prototype.setHeaderFilterValue=function(t,e){t&&(t.modules.filter&&t.modules.filter.headerElement?(this.generateHeaderFilterElement(t,e,!0),t.modules.filter.success(e)):console.warn("Column Filter Error - No header filter set on column:",t.getField()))},b.prototype.reloadHeaderFilter=function(t){t&&(t.modules.filter&&t.modules.filter.headerElement?this.generateHeaderFilterElement(t,t.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",t.getField()))},b.prototype.hasChanged=function(){var t=this.changed;return this.changed=!1,t},b.prototype.setFilter=function(t,e,i){this.filterList=[],Array.isArray(t)||(t=[{field:t,type:e,value:i}]),this.addFilter(t)},b.prototype.addFilter=function(t,e,i){var n=this;Array.isArray(t)||(t=[{field:t,type:e,value:i}]),t.forEach(function(t){(t=n.findFilter(t))&&(n.filterList.push(t),n.changed=!0)}),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},b.prototype.findFilter=function(e){var i,n=this;if(Array.isArray(e))return this.findSubFilters(e);var t=!1;return"function"==typeof e.field?t=function(t){return e.field(t,e.type||{})}:n.filters[e.type]?t=(i=n.table.columnManager.getColumnByField(e.field))?function(t){return n.filters[e.type](e.value,i.getFieldValue(t))}:function(t){return n.filters[e.type](e.value,t[e.field])}:console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=t,!!e.func&&e},b.prototype.findSubFilters=function(t){var e=this,i=[];return t.forEach(function(t){(t=e.findFilter(t))&&i.push(t)}),!!i.length&&i},b.prototype.getFilters=function(t,e){var i=[];return t&&(i=this.getHeaderFilters()),e&&i.forEach(function(t){"function"==typeof t.type&&(t.type="function")}),i.concat(this.filtersToArray(this.filterList,e))},b.prototype.filtersToArray=function(t,i){var n=this,o=[];return t.forEach(function(t){var e;Array.isArray(t)?o.push(n.filtersToArray(t,i)):(e={field:t.field,type:t.type,value:t.value},i&&"function"==typeof e.type&&(e.type="function"),o.push(e))}),o},b.prototype.getHeaderFilters=function(){var t=[];for(var e in this.headerFilters)t.push({field:e,type:this.headerFilters[e].type,value:this.headerFilters[e].value});return t},b.prototype.removeFilter=function(t,e,i){var n=this;Array.isArray(t)||(t=[{field:t,type:e,value:i}]),t.forEach(function(e){var t;-1<(t="object"==_typeof(e.field)?n.filterList.findIndex(function(t){return e===t}):n.filterList.findIndex(function(t){return e.field===t.field&&e.type===t.type&&e.value===t.value}))?(n.filterList.splice(t,1),n.changed=!0):console.warn("Filter Error - No matching filter type found, ignoring: ",e.type)}),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},b.prototype.clearFilter=function(t){this.filterList=[],t&&this.clearHeaderFilter(),this.changed=!0,this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},b.prototype.clearHeaderFilter=function(){var e=this;this.headerFilters={},this.headerFilterColumns.forEach(function(t){t.modules.filter.value=null,t.modules.filter.prevSuccess=void 0,e.reloadHeaderFilter(t)}),this.changed=!0},b.prototype.search=function(t,e,i,n){var o=this,r=[],s=[];return Array.isArray(e)||(e=[{field:e,type:i,value:n}]),e.forEach(function(t){(t=o.findFilter(t))&&s.push(t)}),this.table.rowManager.rows.forEach(function(e){var i=!0;s.forEach(function(t){o.filterRecurse(t,e.getData())||(i=!1)}),i&&r.push("data"===t?e.getData("data"):e.getComponent())}),r},b.prototype.filter=function(t,e){var i=this,n=[],o=[];return i.table.options.dataFiltering&&i.table.options.dataFiltering.call(i.table,i.getFilters()),i.table.options.ajaxFiltering||!i.filterList.length&&!Object.keys(i.headerFilters).length?n=t.slice(0):t.forEach(function(t){i.filterRow(t)&&n.push(t)}),i.table.options.dataFiltered&&(n.forEach(function(t){o.push(t.getComponent())}),i.table.options.dataFiltered.call(i.table,i.getFilters(),o)),n},b.prototype.filterRow=function(t,e){var i=this,n=!0,o=t.getData();for(var r in i.filterList.forEach(function(t){i.filterRecurse(t,o)||(n=!1)}),i.headerFilters)i.headerFilters[r].func(o)||(n=!1);return n},b.prototype.filterRecurse=function(t,e){var i=this,n=!1;return Array.isArray(t)?t.forEach(function(t){i.filterRecurse(t,e)&&(n=!0)}):n=t.func(e),n},b.prototype.filters={"=":function(t,e,i,n){return e==t},"<":function(t,e,i,n){return e<t},"<=":function(t,e,i,n){return e<=t},">":function(t,e,i,n){return t<e},">=":function(t,e,i,n){return t<=e},"!=":function(t,e,i,n){return e!=t},regex:function(t,e,i,n){return"string"==typeof t&&(t=new RegExp(t)),t.test(e)},like:function(t,e,i,n){return null==t?e===t:null!=e&&-1<String(e).toLowerCase().indexOf(t.toLowerCase())},in:function(t,e,i,n){return Array.isArray(t)?-1<t.indexOf(e):(console.warn("Filter Error - filter value is not an array:",t),!1)}},T.prototype.registerModule("filter",b);function _(t){this.table=t}_.prototype.initializeColumn=function(t){var e={params:t.definition.formatterParams||{}};switch(_typeof(t.definition.formatter)){case"string":"tick"===t.definition.formatter&&(t.definition.formatter="tickCross",void 0===e.params.crossElement&&(e.params.crossElement=!1),console.warn("DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false")),this.formatters[t.definition.formatter]?e.formatter=this.formatters[t.definition.formatter]:(console.warn("Formatter Error - No such formatter found: ",t.definition.formatter),e.formatter=this.formatters.plaintext);break;case"function":e.formatter=t.definition.formatter;break;default:e.formatter=this.formatters.plaintext}t.modules.format=e},_.prototype.cellRendered=function(t){t.modules.format&&t.modules.format.renderedCallback&&t.modules.format.renderedCallback()},_.prototype.formatValue=function(e){var t=e.getComponent(),i="function"==typeof e.column.modules.format.params?e.column.modules.format.params(t):e.column.modules.format.params;return e.column.modules.format.formatter.call(this,t,i,function(t){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=t})},_.prototype.sanitizeHTML=function(t){if(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})}return t},_.prototype.emptyToSpace=function(t){return null==t?"&nbsp;":t},_.prototype.getFormatter=function(t){switch(void 0===t?"undefined":_typeof(t)){case"string":t=this.formatters[t]?this.formatters[t]:(console.warn("Formatter Error - No such formatter found: ",t),this.formatters.plaintext);break;case"function":t=t;break;default:t=this.formatters.plaintext}return t},_.prototype.formatters={plaintext:function(t,e,i){return this.emptyToSpace(this.sanitizeHTML(t.getValue()))},html:function(t,e,i){return t.getValue()},textarea:function(t,e,i){return t.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(t.getValue()))},money:function(t,e,i){var n,o,r,s,a=parseFloat(t.getValue()),l=e.decimal||".",c=e.thousand||",",u=e.symbol||"",d=!!e.symbolAfter,h=void 0!==e.precision?e.precision:2;if(isNaN(a))return this.emptyToSpace(this.sanitizeHTML(t.getValue()));for(n=!1!==h?a.toFixed(h):a,o=(n=String(n).split("."))[0],r=1<n.length?l+n[1]:"",s=/(\d+)(\d{3})/;s.test(o);)o=o.replace(s,"$1"+c+"$2");return d?o+r+u:u+o+r},link:function(t,e,i){var n=t.getValue(),o=e.urlPrefix||"",r=e.download,s=n,a=document.createElement("a");if(e.labelField&&(s=t.getData()[e.labelField]),e.label)switch(_typeof(e.label)){case"string":s=e.label;break;case"function":s=e.label(t)}if(s){if(e.urlField&&(n=t.getData()[e.urlField]),e.url)switch(_typeof(e.url)){case"string":n=e.url;break;case"function":n=e.url(t)}return a.setAttribute("href",o+n),e.target&&a.setAttribute("target",e.target),e.download&&(r="function"==typeof r?r(t):!0===r?"":r,a.setAttribute("download",r)),a.innerHTML=this.emptyToSpace(this.sanitizeHTML(s)),a}return"&nbsp;"},image:function(t,e,i){var n=document.createElement("img");switch(n.setAttribute("src",t.getValue()),_typeof(e.height)){case"number":n.style.height=e.height+"px";break;case"string":n.style.height=e.height}switch(_typeof(e.width)){case"number":n.style.width=e.width+"px";break;case"string":n.style.width=e.width}return n.addEventListener("load",function(){t.getRow().normalizeHeight()}),n},tickCross:function(t,e,i){var n=t.getValue(),o=t.getElement(),r=e.allowEmpty,s=e.allowTruthy,a=void 0!==e.tickElement?e.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',l=void 0!==e.crossElement?e.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return s&&n||!0===n||"true"===n||"True"===n||1===n||"1"===n?(o.setAttribute("aria-checked",!0),a||""):!r||"null"!==n&&""!==n&&null!=n?(o.setAttribute("aria-checked",!1),l||""):(o.setAttribute("aria-checked","mixed"),"")},datetime:function(t,e,i){var n=e.inputFormat||"YYYY-MM-DD hh:mm:ss",o=e.outputFormat||"DD/MM/YYYY hh:mm:ss",r=void 0!==e.invalidPlaceholder?e.invalidPlaceholder:"",s=t.getValue(),a=moment(s,n);return a.isValid()?a.format(o):!0===r?s:"function"==typeof r?r(s):r},datetimediff:function(t,e,i){var n=e.inputFormat||"YYYY-MM-DD hh:mm:ss",o=void 0!==e.invalidPlaceholder?e.invalidPlaceholder:"",r=void 0!==e.suffix&&e.suffix,s=void 0!==e.unit?e.unit:void 0,a=void 0!==e.humanize&&e.humanize,l=void 0!==e.date?e.date:moment(),c=t.getValue(),u=moment(c,n);return u.isValid()?a?moment.duration(u.diff(l)).humanize(r):u.diff(l,s)+(r?" "+r:""):!0===o?c:"function"==typeof o?o(c):o},lookup:function(t,e,i){var n=t.getValue();return void 0===e[n]?(console.warn("Missing display value for "+n),n):e[n]},star:function(t,e,i){var n=t.getValue(),o=t.getElement(),r=e&&e.stars?e.stars:5,s=document.createElement("span"),a=document.createElementNS("http://www.w3.org/2000/svg","svg");s.style.verticalAlign="middle",a.setAttribute("width","14"),a.setAttribute("height","14"),a.setAttribute("viewBox","0 0 512 512"),a.setAttribute("xml:space","preserve"),a.style.padding="0 1px",n=n&&!isNaN(n)?parseInt(n):0,n=Math.max(0,Math.min(n,r));for(var l=1;l<=r;l++){var c=a.cloneNode(!0);c.innerHTML=l<=n?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',s.appendChild(c)}return o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.textOverflow="ellipsis",o.setAttribute("aria-label",n),s},traffic:function(t,e,i){var n,o,r=this.sanitizeHTML(t.getValue())||0,s=document.createElement("span"),a=e&&e.max?e.max:100,l=e&&e.min?e.min:0,c=e&&void 0!==e.color?e.color:["red","orange","green"],u="#666666";if(!isNaN(r)&&void 0!==t.getValue()){switch(s.classList.add("tabulator-traffic-light"),o=parseFloat(r)<=a?parseFloat(r):a,o=parseFloat(o)>=l?parseFloat(o):l,n=(a-l)/100,o=Math.round((o-l)/n),void 0===c?"undefined":_typeof(c)){case"string":u=c;break;case"function":u=c(r);break;case"object":if(Array.isArray(c)){var d=100/c.length,h=Math.floor(o/d);h=Math.min(h,c.length-1),u=c[h=Math.max(h,0)];break}}return s.style.backgroundColor=u,s}},progress:function(t,e,i){var n,o,r,s,a,l=this.sanitizeHTML(t.getValue())||0,c=t.getElement(),u=e&&e.max?e.max:100,d=e&&e.min?e.min:0,h=e&&e.legendAlign?e.legendAlign:"center";switch(o=parseFloat(l)<=u?parseFloat(l):u,o=parseFloat(o)>=d?parseFloat(o):d,n=(u-d)/100,o=Math.round((o-d)/n),_typeof(e.color)){case"string":r=e.color;break;case"function":r=e.color(l);break;case"object":if(Array.isArray(e.color)){var p=100/e.color.length,f=Math.floor(o/p);f=Math.min(f,e.color.length-1),f=Math.max(f,0),r=e.color[f];break}default:r="#2DC214"}switch(_typeof(e.legend)){case"string":s=e.legend;break;case"function":s=e.legend(l);break;case"boolean":s=l;break;default:s=!1}switch(_typeof(e.legendColor)){case"string":a=e.legendColor;break;case"function":a=e.legendColor(l);break;case"object":if(Array.isArray(e.legendColor)){p=100/e.legendColor.length,f=Math.floor(o/p);f=Math.min(f,e.legendColor.length-1),f=Math.max(f,0),a=e.legendColor[f]}break;default:a="#000"}c.style.minWidth="30px",c.style.position="relative",c.setAttribute("aria-label",o);var g=document.createElement("div");if(g.style.display="inline-block",g.style.position="relative",g.style.width=o+"%",g.style.backgroundColor=r,g.style.height="100%",g.setAttribute("data-max",u),g.setAttribute("data-min",d),s){var m=document.createElement("div");m.style.position="absolute",m.style.top="4px",m.style.left=0,m.style.textAlign=h,m.style.width="100%",m.style.color=a,m.innerHTML=s}return i(function(){c.appendChild(g),s&&c.appendChild(m)}),""},color:function(t,e,i){return t.getElement().style.backgroundColor=this.sanitizeHTML(t.getValue()),""},buttonTick:function(t,e,i){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(t,e,i){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(t,e,i){return this.table.rowManager.activeRows.indexOf(t.getRow()._getSelf())+1},handle:function(t,e,i){return t.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(t,e,i){function n(t){var e=r.element;r.open=t,e&&(r.open?(o.classList.add("open"),e.style.display=""):(o.classList.remove("open"),e.style.display="none"))}var o=document.createElement("div"),r=t.getRow()._row.modules.responsiveLayout;return o.classList.add("tabulator-responsive-collapse-toggle"),o.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",t.getElement().classList.add("tabulator-row-handle"),o.addEventListener("click",function(t){t.stopImmediatePropagation(),n(!r.open)}),n(r.open),o},rowSelection:function(t){var e=this,i=document.createElement("input");if(i.type="checkbox",this.table.modExists("selectRow",!0))if(i.addEventListener("click",function(t){t.stopPropagation()}),"function"==typeof t.getRow){var n=t.getRow();i.addEventListener("change",function(t){n.toggleSelect()}),i.checked=n.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(n,i)}else i.addEventListener("change",function(t){e.table.modules.selectRow.selectedRows.length?e.table.deselectRow():e.table.selectRow()}),this.table.modules.selectRow.registerHeaderSelectCheckbox(i);return i}},T.prototype.registerModule("format",_);function w(t){this.table=t,this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1}w.prototype.reset=function(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0},w.prototype.initializeColumn=function(t){var e={margin:0,edge:!1};t.definition.frozen?t.parent.isGroup?console.warn("Frozen Column Error - Grouped columns cannot be frozen"):t.isGroup?console.warn("Frozen Column Error - Column Groups cannot be frozen"):(e.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(t):this.rightColumns.unshift(t),this.active=!0,t.modules.frozen=e):this.initializationMode="right"},w.prototype.scrollHorizontal=function(){var t,e=this;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(function(){e.layout()},100),t=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),t.forEach(function(t){"row"===t.type&&e.layoutRow(t)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},w.prototype.calcMargins=function(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft},w.prototype.layoutCalcRows=function(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow))},w.prototype.layoutColumnPosition=function(i){var n=this;this.leftColumns.forEach(function(e,t){e.modules.frozen.margin=n._calcSpace(n.leftColumns,t)+n.table.columnManager.scrollLeft+"px",t==n.leftColumns.length-1?e.modules.frozen.edge=!0:e.modules.frozen.edge=!1,n.layoutElement(e.getElement(),e),i&&e.cells.forEach(function(t){n.layoutElement(t.getElement(),e)})}),this.rightColumns.forEach(function(e,t){e.modules.frozen.margin=n.rightPadding-n._calcSpace(n.rightColumns,t+1)+"px",t==n.rightColumns.length-1?e.modules.frozen.edge=!0:e.modules.frozen.edge=!1,n.layoutElement(e.getElement(),e),i&&e.cells.forEach(function(t){n.layoutElement(t.getElement(),e)})})},w.prototype.layout=function(){var e=this;e.active&&(this.calcMargins(),e.table.rowManager.getDisplayRows().forEach(function(t){"row"===t.type&&e.layoutRow(t)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},w.prototype.layoutRow=function(i){var n=this;i.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(function(t){var e=i.getCell(t);e&&n.layoutElement(e.getElement(),t)}),this.rightColumns.forEach(function(t){var e=i.getCell(t);e&&n.layoutElement(e.getElement(),t)})},w.prototype.layoutElement=function(t,e){e.modules.frozen&&(t.style.position="absolute",t.style.left=e.modules.frozen.margin,t.classList.add("tabulator-frozen"),e.modules.frozen.edge&&t.classList.add("tabulator-frozen-"+e.modules.frozen.position))},w.prototype._calcSpace=function(t,e){for(var i=0,n=0;n<e;n++)t[n].visible&&(i+=t[n].getWidth());return i},T.prototype.registerModule("frozenColumns",w);function C(t){this.table=t,this.topElement=document.createElement("div"),this.rows=[],this.displayIndex=0}C.prototype.initialize=function(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling)},C.prototype.setDisplayIndex=function(t){this.displayIndex=t},C.prototype.getDisplayIndex=function(){return this.displayIndex},C.prototype.isFrozen=function(){return!!this.rows.length},C.prototype.getRows=function(t){var i=t.slice(0);return this.rows.forEach(function(t){var e=i.indexOf(t);-1<e&&i.splice(e,1)}),i},C.prototype.freezeRow=function(t){t.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(t.modules.frozen=!0,this.topElement.appendChild(t.getElement()),t.initialize(),t.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(t),this.table.rowManager.refreshActiveData("display"),this.styleRows())},C.prototype.unfreezeRow=function(t){var e=this.rows.indexOf(t);if(t.modules.frozen){t.modules.frozen=!1;var i=t.getElement();i.parentNode.removeChild(i),this.table.rowManager.adjustTableSize(),this.rows.splice(e,1),this.table.rowManager.refreshActiveData("display"),this.rows.length&&this.styleRows()}else console.warn("Freeze Error - Row is already unfrozen")},C.prototype.styleRows=function(t){var i=this;this.rows.forEach(function(t,e){i.table.rowManager.styleRow(t,e)})},T.prototype.registerModule("frozenRows",C);function x(t){this._group=t,this.type="GroupComponent"}x.prototype.getKey=function(){return this._group.key},x.prototype.getField=function(){return this._group.field},x.prototype.getElement=function(){return this._group.element},x.prototype.getRows=function(){return this._group.getRows(!0)},x.prototype.getSubGroups=function(){return this._group.getSubGroups(!0)},x.prototype.getParentGroup=function(){return!!this._group.parent&&this._group.parent.getComponent()},x.prototype.getVisibility=function(){return this._group.visible},x.prototype.show=function(){this._group.show()},x.prototype.hide=function(){this._group.hide()},x.prototype.toggle=function(){this._group.toggleVisibility()},x.prototype._getSelf=function(){return this._group},x.prototype.getTable=function(){return this._group.groupManager.table};function D(t,e,i,n,o,r,s){this.groupManager=t,this.parent=e,this.key=n,this.level=i,this.field=o,this.hasSubGroups=i<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=s,this.rows=[],this.groups=[],this.groupList=[],this.generator=r,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=s?s.visible:void 0!==t.startOpen[i]?t.startOpen[i]:t.startOpen[0],this.createElements(),this.addBindings(),this.createValueGroups()}D.prototype.wipe=function(){this.groupList.length?this.groupList.forEach(function(t){t.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)},D.prototype.createElements=function(){var t=document.createElement("div");t.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(t),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)},D.prototype.createValueGroups=function(){var e=this,i=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[i]&&this.groupManager.allowedValues[i].forEach(function(t){e._createGroup(t,i)})},D.prototype.addBindings=function(){var e,i,n,o=this;o.groupManager.table.options.groupClick&&o.element.addEventListener("click",function(t){o.groupManager.table.options.groupClick.call(o.groupManager.table,t,o.getComponent())}),o.groupManager.table.options.groupDblClick&&o.element.addEventListener("dblclick",function(t){o.groupManager.table.options.groupDblClick.call(o.groupManager.table,t,o.getComponent())}),o.groupManager.table.options.groupContext&&o.element.addEventListener("contextmenu",function(t){o.groupManager.table.options.groupContext.call(o.groupManager.table,t,o.getComponent())}),o.groupManager.table.options.groupTap&&(n=!1,o.element.addEventListener("touchstart",function(t){n=!0},{passive:!0}),o.element.addEventListener("touchend",function(t){n&&o.groupManager.table.options.groupTap(t,o.getComponent()),n=!1})),o.groupManager.table.options.groupDblTap&&(e=null,o.element.addEventListener("touchend",function(t){e?(clearTimeout(e),e=null,o.groupManager.table.options.groupDblTap(t,o.getComponent())):e=setTimeout(function(){clearTimeout(e),e=null},300)})),o.groupManager.table.options.groupTapHold&&(i=null,o.element.addEventListener("touchstart",function(t){clearTimeout(i),i=setTimeout(function(){clearTimeout(i),i=null,n=!1,o.groupManager.table.options.groupTapHold(t,o.getComponent())},1e3)},{passive:!0}),o.element.addEventListener("touchend",function(t){clearTimeout(i),i=null})),o.groupManager.table.options.groupToggleElement&&("arrow"==o.groupManager.table.options.groupToggleElement?o.arrowElement:o.element).addEventListener("click",function(t){t.stopPropagation(),t.stopImmediatePropagation(),o.toggleVisibility()})},D.prototype._createGroup=function(t,e){var i=e+"_"+t,n=new D(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[i]);this.groups[i]=n,this.groupList.push(n)},D.prototype._addRowToGroup=function(t){var e=this.level+1;if(this.hasSubGroups){var i=this.groupManager.groupIDLookups[e].func(t.getData()),n=e+"_"+i;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[n]&&this.groups[n].addRow(t):(this.groups[n]||this._createGroup(i,e),this.groups[n].addRow(t))}},D.prototype._addRow=function(t){this.rows.push(t),t.modules.group=this},D.prototype.insertRow=function(t,e,i){var n=this.conformRowData({});t.updateData(n);var o=this.rows.indexOf(e);-1<o?i?this.rows.splice(o+1,0,t):this.rows.splice(o,0,t):i?this.rows.push(t):this.rows.unshift(t),(t.modules.group=this).generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)},D.prototype.scrollHeader=function(e){this.arrowElement.style.marginLeft=e,this.groupList.forEach(function(t){t.scrollHeader(e)})},D.prototype.getRowIndex=function(t){},D.prototype.conformRowData=function(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t},D.prototype.removeRow=function(t){var e=this.rows.indexOf(t),i=t.getElement();-1<e&&this.rows.splice(e,1),this.groupManager.table.options.groupValues||this.rows.length?(i.parentNode&&i.parentNode.removeChild(i),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))},D.prototype.removeGroup=function(t){var e,i=t.level+"_"+t.key;this.groups[i]&&(delete this.groups[i],-1<(e=this.groupList.indexOf(t))&&this.groupList.splice(e,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))},D.prototype.getHeadersAndRows=function(e){var i=[];return i.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(t){i=i.concat(t.getHeadersAndRows(e))}):(!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),i.push(this.calcs.top)),i=i.concat(this.rows),!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),i.push(this.calcs.bottom))):this.groupList.length||"table"==this.groupManager.table.options.columnCalcs||this.groupManager.table.modExists("columnCalcs")&&(!e&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),i.push(this.calcs.top))),!e&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),i.push(this.calcs.bottom)))),i},D.prototype.getData=function(t,e){var i=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach(function(t){i.push(t.getData(e||"data"))}),i},D.prototype.getRowCount=function(){var e=0;return this.groupList.length?this.groupList.forEach(function(t){e+=t.getRowCount()}):e=this.rows.length,e},D.prototype.toggleVisibility=function(){this.visible?this.hide():this.show()},D.prototype.hide=function(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(function(t){t.getHeadersAndRows().forEach(function(t){t.detachElement()})}):this.rows.forEach(function(t){var e=t.getElement();e.parentNode.removeChild(e)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!1)},D.prototype.show=function(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var i=this.getElement();this.groupList.length?this.groupList.forEach(function(t){t.getHeadersAndRows().forEach(function(t){var e=t.getElement();i.parentNode.insertBefore(e,i.nextSibling),t.initialize(),i=e})}):this.rows.forEach(function(t){var e=t.getElement();i.parentNode.insertBefore(e,i.nextSibling),t.initialize(),i=e}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!0)},D.prototype._visSet=function(){var e=[];"function"==typeof this.visible&&(this.rows.forEach(function(t){e.push(t.getData())}),this.visible=this.visible(this.key,this.getRowCount(),e,this.getComponent()))},D.prototype.getRowGroup=function(i){var n=!1;return this.groupList.length?this.groupList.forEach(function(t){var e=t.getRowGroup(i);e&&(n=e)}):this.rows.find(function(t){return t===i})&&(n=this),n},D.prototype.getSubGroups=function(e){var i=[];return this.groupList.forEach(function(t){i.push(e?t.getComponent():t)}),i},D.prototype.getRows=function(e){var i=[];return this.rows.forEach(function(t){i.push(e?t.getComponent():t)}),i},D.prototype.generateGroupHeaderContents=function(){var e=[];for(this.rows.forEach(function(t){e.push(t.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),e,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)},D.prototype.getElement=function(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element},D.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},D.prototype.normalizeHeight=function(){this.setHeight(this.element.clientHeight)},D.prototype.initialize=function(t){this.initialized&&!t||(this.normalizeHeight(),this.initialized=!0)},D.prototype.reinitialize=function(){this.initialized=!1,this.height=0,T.prototype.helpers.elVisible(this.element)&&this.initialize(!0)},D.prototype.setHeight=function(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)},D.prototype.getHeight=function(){return this.outerHeight},D.prototype.getGroup=function(){return this},D.prototype.reinitializeHeight=function(){},D.prototype.calcHeight=function(){},D.prototype.setCellHeight=function(){},D.prototype.clearCellHeight=function(){},D.prototype.getComponent=function(){return new x(this)};function I(t){this.table=t,this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0}I.prototype.initialize=function(){var r=this,t=r.table.options.groupBy,e=r.table.options.groupStartOpen,i=r.table.options.groupHeader;if(this.allowedValues=r.table.options.groupValues,Array.isArray(t)&&Array.isArray(i)&&t.length>i.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),r.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],r.table.modules.localize.bind("groups|item",function(n,o){r.headerGenerator[0]=function(t,e,i){return(void 0===t?"":t)+"<span>("+e+" "+(1===e?n:o.groups.items)+")</span>"}}),this.groupIDLookups=[],Array.isArray(t)||t)this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs();else if(this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs){this.table.columnManager.getRealColumns().forEach(function(t){t.definition.topCalc&&r.table.modules.columnCalcs.initializeTopRow(),t.definition.bottomCalc&&r.table.modules.columnCalcs.initializeBottomRow()})}Array.isArray(t)||(t=[t]),t.forEach(function(e,t){var i,n;i="function"==typeof e?e:(n=r.table.columnManager.getColumnByField(e))?function(t){return n.getFieldValue(t)}:function(t){return t[e]},r.groupIDLookups.push({field:"function"!=typeof e&&e,func:i,values:!!r.allowedValues&&r.allowedValues[t]})}),e&&(Array.isArray(e)||(e=[e]),e.forEach(function(t){t="function"==typeof t?t:function(){return!0}}),r.startOpen=e),i&&(r.headerGenerator=Array.isArray(i)?i:[i]),this.initialized=!0},I.prototype.setDisplayIndex=function(t){this.displayIndex=t},I.prototype.getDisplayIndex=function(){return this.displayIndex},I.prototype.getRows=function(t){return this.groupIDLookups.length?(this.table.options.dataGrouping.call(this.table),this.generateGroups(t),this.table.options.dataGrouped&&this.table.options.dataGrouped.call(this.table,this.getGroups(!0)),this.updateGroupRows()):t.slice(0)},I.prototype.getGroups=function(e){var i=[];return this.groupList.forEach(function(t){i.push(e?t.getComponent():t)}),i},I.prototype.wipe=function(){this.groupList.forEach(function(t){t.wipe()})},I.prototype.pullGroupListData=function(t){var n=this,o=[];return t.forEach(function(t){var e={level:0,rowCount:0,headerContent:""},i=[];t.hasSubGroups?(i=n.pullGroupListData(t.groupList),e.level=t.level,e.rowCount=i.length-t.groupList.length,e.headerContent=t.generator(t.key,e.rowCount,t.rows,t),o.push(e),o=o.concat(i)):(e.level=t.level,e.headerContent=t.generator(t.key,t.rows.length,t.rows,t),e.rowCount=t.getRows().length,o.push(e),t.getRows().forEach(function(t){o.push(t.getData("data"))}))}),o},I.prototype.getGroupedData=function(){return this.pullGroupListData(this.groupList)},I.prototype.getRowGroup=function(i){var n=!1;return this.groupList.forEach(function(t){var e=t.getRowGroup(i);e&&(n=e)}),n},I.prototype.countGroups=function(){return this.groupList.length},I.prototype.generateGroups=function(t){var e=this,i=e.groups;e.groups={},e.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(function(t){e.createGroup(t,0,i)}),t.forEach(function(t){e.assignRowToExistingGroup(t,i)})):t.forEach(function(t){e.assignRowToGroup(t,i)})},I.prototype.createGroup=function(t,e,i){var n,o=e+"_"+t;i=i||[],n=new D(this,!1,e,t,this.groupIDLookups[0].field,this.headerGenerator[0],i[o]),this.groups[o]=n,this.groupList.push(n)},I.prototype.assignRowToExistingGroup=function(t,e){var i="0_"+this.groupIDLookups[0].func(t.getData());this.groups[i]&&this.groups[i].addRow(t)},I.prototype.assignRowToGroup=function(t,e){var i=this.groupIDLookups[0].func(t.getData()),n=!this.groups["0_"+i];return n&&this.createGroup(i,0,e),this.groups["0_"+i].addRow(t),!n},I.prototype.updateGroupRows=function(t){var e=[];if(this.groupList.forEach(function(t){e=e.concat(t.getHeadersAndRows())}),t){var i=this.table.rowManager.setDisplayRows(e,this.getDisplayIndex());!0!==i&&this.setDisplayIndex(i),this.table.rowManager.refreshActiveData("group",!0,!0)}return e},I.prototype.scrollHeaders=function(e){e+="px",this.groupList.forEach(function(t){t.scrollHeader(e)})},I.prototype.removeGroup=function(t){var e,i=t.level+"_"+t.key;this.groups[i]&&(delete this.groups[i],-1<(e=this.groupList.indexOf(t))&&this.groupList.splice(e,1))},T.prototype.registerModule("groupRows",I);function O(t){this.table=t,this.history=[],this.index=-1}O.prototype.clear=function(){this.history=[],this.index=-1},O.prototype.action=function(t,e,i){this.history=this.history.slice(0,this.index+1),this.history.push({type:t,component:e,data:i}),this.index++},O.prototype.getHistoryUndoSize=function(){return this.index+1},O.prototype.getHistoryRedoSize=function(){return this.history.length-(this.index+1)},O.prototype.undo=function(){if(-1<this.index){var t=this.history[this.index];return this.undoers[t.type].call(this,t),this.index--,this.table.options.historyUndo.call(this.table,t.type,t.component.getComponent(),t.data),!0}return console.warn("History Undo Error - No more history to undo"),!1},O.prototype.redo=function(){if(this.history.length-1>this.index){this.index++;var t=this.history[this.index];return this.redoers[t.type].call(this,t),this.table.options.historyRedo.call(this.table,t.type,t.component.getComponent(),t.data),!0}return console.warn("History Redo Error - No more history to redo"),!1},O.prototype.undoers={cellEdit:function(t){t.component.setValueProcessData(t.data.oldValue)},rowAdd:function(t){t.component.deleteActual()},rowDelete:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(t.component,e)},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.rows[t.data.pos],!1),this.table.rowManager.redraw()}},O.prototype.redoers={cellEdit:function(t){t.component.setValueProcessData(t.data.newValue)},rowAdd:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(t.component,e)},rowDelete:function(t){t.component.deleteActual()},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.rows[t.data.pos],!1),this.table.rowManager.redraw()}},O.prototype._rebindRow=function(i,n){this.history.forEach(function(t){if(t.component instanceof d)t.component===i&&(t.component=n);else if(t.component instanceof s&&t.component.row===i){var e=t.component.column.getField();e&&(t.component=n.getCell(e))}})},T.prototype.registerModule("history",O);function R(t){this.table=t,this.fieldIndex=[],this.hasIndex=!1}R.prototype.parseTable=function(){var t=this.table.element,e=this.table.options,i=(e.columns,t.getElementsByTagName("th")),n=t.getElementsByTagName("tbody")[0],o=[];this.hasIndex=!1,this.table.options.htmlImporting.call(this.table),n=n?n.getElementsByTagName("tr"):[],this._extractOptions(t,e),i.length?this._extractHeaders(i,n):this._generateBlankHeaders(i,n);for(var r=0;r<n.length;r++){var s=n[r].getElementsByTagName("td"),a={};this.hasIndex||(a[e.index]=r);for(var l=0;l<s.length;l++){var c=s[l];void 0!==this.fieldIndex[l]&&(a[this.fieldIndex[l]]=c.innerHTML)}o.push(a)}var u=document.createElement("div"),d=t.attributes;for(var l in d)"object"==_typeof(d[l])&&u.setAttribute(d[l].name,d[l].value);t.parentNode.replaceChild(u,t),e.data=o,this.table.options.htmlImported.call(this.table),this.table.element=u},R.prototype._extractOptions=function(t,e,i){var n=t.attributes,o=i?Object.assign([],i):Object.keys(e),r={};for(var s in o.forEach(function(t){r[t.toLowerCase()]=t}),n){var a,l=n[s];l&&"object"==(void 0===l?"undefined":_typeof(l))&&l.name&&0===l.name.indexOf("tabulator-")&&(a=l.name.replace("tabulator-",""),void 0!==r[a]&&(e[r[a]]=this._attribValue(l.value)))}},R.prototype._attribValue=function(t){return"true"===t||"false"!==t&&t},R.prototype._findCol=function(e){return this.table.options.columns.find(function(t){return t.title===e})||!1},R.prototype._extractHeaders=function(t,e){for(var i=0;i<t.length;i++){var n,o,r=t[i],s=!1,a=this._findCol(r.textContent);for(var l in a?s=!0:a={title:r.textContent.trim()},a.field||(a.field=r.textContent.trim().toLowerCase().replace(" ","_")),(n=r.getAttribute("width"))&&!a.width&&(a.width=n),o=r.attributes,this._extractOptions(r,a,u.prototype.defaultOptionList),o){var c=o[l];c&&"object"==(void 0===c?"undefined":_typeof(c))&&c.name&&0===c.name.indexOf("tabulator-")&&(a[c.name.replace("tabulator-","")]=this._attribValue(c.value))}this.fieldIndex[i]=a.field,a.field==this.table.options.index&&(this.hasIndex=!0),s||this.table.options.columns.push(a)}},R.prototype._generateBlankHeaders=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],o={title:"",field:"col"+i};this.fieldIndex[i]=o.field;var r=n.getAttribute("width");r&&(o.width=r),this.table.options.columns.push(o)}},T.prototype.registerModule("htmlTableImport",R);function k(t){this.table=t,this.config={},this.cloneTableStyle=!0,this.colVisProp=""}k.prototype.genereateTable=function(t,e,i,n){this.cloneTableStyle=e,this.config=t||{},this.colVisProp=n;var o=this.generateHeaderElements(),r=this.generateBodyElements(i),s=document.createElement("table");return s.classList.add("tabulator-print-table"),s.appendChild(o),s.appendChild(r),this.mapElementStyles(this.table.element,s,["border-top","border-left","border-right","border-bottom"]),s},k.prototype.generateColumnGroupHeaders=function(){var i=this,n=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(function(t){var e=i.processColumnGroup(t);e&&n.push(e)}),n},k.prototype.processColumnGroup=function(t){var i=this,e=t.columns,n=0,o={title:t.definition.title,column:t,depth:1};if(e.length){if(o.subGroups=[],o.width=0,e.forEach(function(t){var e=i.processColumnGroup(t);e&&(o.width+=e.width,o.subGroups.push(e),e.depth>n&&(n=e.depth))}),o.depth+=n,!o.width)return!1}else{if(!this.columnVisCheck(t))return!1;o.width=1}return o},k.prototype.groupHeadersToRows=function(t){var o=[],r=0;return t.forEach(function(t){t.depth>r&&(r=t.depth)}),t.forEach(function(t){!function e(t,i){var n=r-i;void 0===o[i]&&(o[i]=[]),t.height=t.subGroups?1:n-t.depth+1,o[i].push(t),t.subGroups&&t.subGroups.forEach(function(t){e(t,i+1)})}(t,0)}),o},k.prototype.generateHeaderElements=function(){var o=this,e=document.createElement("thead");return this.groupHeadersToRows(this.generateColumnGroupHeaders()).forEach(function(t){var n=document.createElement("tr");o.mapElementStyles(o.table.columnManager.getHeadersElement(),e,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),t.forEach(function(t){var e=document.createElement("th"),i=t.column.definition.cssClass?t.column.definition.cssClass.split(" "):[];e.colSpan=t.width,e.rowSpan=t.height,e.innerHTML=t.column.definition.title,o.cloneTableStyle&&(e.style.boxSizing="border-box"),i.forEach(function(t){e.classList.add(t)}),o.mapElementStyles(t.column.getElement(),e,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),o.mapElementStyles(t.column.contentElement,e,["padding-top","padding-left","padding-right","padding-bottom"]),t.column.visible?o.mapElementStyles(t.column.getElement(),e,["width"]):t.column.definition.width&&(e.style.width=t.column.definition.width+"px"),t.column.parent&&o.mapElementStyles(t.column.parent.groupElement,e,["border-top"]),n.appendChild(e)}),e.appendChild(n)}),e},k.prototype.generateBodyElements=function(t){var i,n,a,e,l,c,o,u,d=this;this.cloneTableStyle&&window.getComputedStyle&&(i=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),n=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),a=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),c=this.table.element.getElementsByClassName("tabulator-group")[0],e&&(o=e.getElementsByClassName("tabulator-cell"),l=o[0],o[o.length-1]));var h=document.createElement("tbody"),r=t?this.table.rowManager.getVisibleRows(!0):this.table.rowManager.getDisplayRows(),p=[];return!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&r.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&r.push(this.table.modules.columnCalcs.botRow)),this.table.columnManager.columnsByIndex.forEach(function(t){d.columnVisCheck(t)&&p.push(t)}),1e3<(r=r.filter(function(t){switch(t.type){case"group":return!1!==d.config.rowGroups;case"calc":return!1!==d.config.columnCalcs}return!0})).length&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),r.forEach(function(o,t){var r=o.getData(),s=document.createElement("tr");switch(s.classList.add("tabulator-print-table-row"),o.type){case"group":var e=document.createElement("td");e.colSpan=p.length,e.innerHTML=o.key,s.classList.add("tabulator-print-table-group"),d.mapElementStyles(c,s,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),d.mapElementStyles(c,e,["padding-top","padding-left","padding-right","padding-bottom"]),s.appendChild(e);break;case"calc":s.classList.add("tabulator-print-table-calcs");case"row":p.forEach(function(t){var e=document.createElement("td"),i=t.getFieldValue(r),n={modules:{},getValue:function(){return i},getField:function(){return t.definition.field},getElement:function(){return e},getColumn:function(){return t.getComponent()},getData:function(){return r},getRow:function(){return o.getComponent()},getComponent:function(){return n},column:t};if((t.definition.cssClass?t.definition.cssClass.split(" "):[]).forEach(function(t){e.classList.add(t)}),d.table.modExists("format"))i=d.table.modules.format.formatValue(n);else switch(void 0===i?"undefined":_typeof(i)){case"object":i=JSON.stringify(i);break;case"undefined":case"null":i="";break;default:i=i}i instanceof Node?e.appendChild(i):e.innerHTML=i,l&&d.mapElementStyles(l,e,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","text-align"]),s.appendChild(e)}),u="calc"==o.type?a:t%2&&n?n:i,d.mapElementStyles(u,s,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"])}h.appendChild(s)}),h},k.prototype.columnVisCheck=function(t){return!1!==t.definition[this.colVisProp]&&(t.visible||!t.visible&&t.definition[this.colVisProp])},k.prototype.getHtml=function(t,e,i){var n=document.createElement("div");return n.appendChild(this.genereateTable(i||this.table.options.htmlOutputConfig,e,t,"htmlOutput")),n.innerHTML},k.prototype.mapElementStyles=function(t,e,i){if(this.cloneTableStyle&&t&&e){var n={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var o=window.getComputedStyle(t);i.forEach(function(t){e.style[n[t]]=o.getPropertyValue(t)})}}},T.prototype.registerModule("htmlTableExport",k);function S(t){this.table=t,this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1}S.prototype.initialize=function(){var t=this.table.options.keybindings,e={};if(this.watchKeys={},!(this.pressedKeys=[])!==t){for(var i in this.bindings)e[i]=this.bindings[i];if(Object.keys(t).length)for(var n in t)e[n]=t[n];this.mapBindings(e),this.bindEvents()}},S.prototype.mapBindings=function(t){var i=this,n=this;for(var e in t)!function(e){i.actions[e]?t[e]&&("object"!==_typeof(t[e])&&(t[e]=[t[e]]),t[e].forEach(function(t){n.mapBinding(e,t)})):console.warn("Key Binding Error - no such action:",e)}(e)},S.prototype.mapBinding=function(t,e){var i=this,n={action:this.actions[t],keys:[],ctrl:!1,shift:!1};e.toString().toLowerCase().split(" ").join("").split("+").forEach(function(t){switch(t){case"ctrl":n.ctrl=!0;break;case"shift":n.shift=!0;break;default:t=parseInt(t),n.keys.push(t),i.watchKeys[t]||(i.watchKeys[t]=[]),i.watchKeys[t].push(n)}})},S.prototype.bindEvents=function(){var n=this;this.keyupBinding=function(e){var t=e.keyCode,i=n.watchKeys[t];i&&(n.pressedKeys.push(t),i.forEach(function(t){n.checkBinding(e,t)}))},this.keydownBinding=function(t){var e=t.keyCode;if(n.watchKeys[e]){var i=n.pressedKeys.indexOf(e);-1<i&&n.pressedKeys.splice(i,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)},S.prototype.clearBindings=function(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)},S.prototype.checkBinding=function(t,e){var i=this,n=!0;return t.ctrlKey==e.ctrl&&t.shiftKey==e.shift&&(e.keys.forEach(function(t){-1==i.pressedKeys.indexOf(t)&&(n=!1)}),n&&e.action.call(i,t),!0)},S.prototype.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},S.prototype.actions={keyBlock:function(t){t.stopPropagation(),t.preventDefault()},scrollPageUp:function(t){var e=this.table.rowManager,i=e.scrollTop-e.height;e.element.scrollHeight,t.preventDefault(),e.displayRowsCount&&(0<=i?e.element.scrollTop=i:e.scrollToRow(e.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(t){var e=this.table.rowManager,i=e.scrollTop+e.height,n=e.element.scrollHeight;t.preventDefault(),e.displayRowsCount&&(i<=n?e.element.scrollTop=i:e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1]),this.table.element.focus()},navPrev:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().prev())},navNext:function(t){var e,i=!1,n=this.table.options.tabEndNewRow;this.table.modExists("edit")&&(i=this.table.modules.edit.currentCell)&&(t.preventDefault(),(e=i.nav()).next()||n&&(n=!0===n?this.table.addRow({}):"function"==typeof n?this.table.addRow(n(i.row.getComponent())):this.table.addRow(n)).then(function(){e.next()}))},navLeft:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().left())},navRight:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().right())},navUp:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().up())},navDown:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().down())},undo:function(t){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(t.preventDefault(),this.table.modules.history.undo()))},redo:function(t){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(t.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(t){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(this.table.options.selectable&&"highlight"!=this.table.options.selectable?"selected":"active",null,null,null,!0)}},T.prototype.registerModule("keybindings",S);function A(t){this.table=t,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this)}A.prototype.createPlaceholderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-col"),t.classList.add("tabulator-col-placeholder"),t},A.prototype.initializeColumn=function(e){var i,n=this,t={};e.modules.frozen||(i=e.getElement(),t.mousemove=function(t){e.parent===n.moving.parent&&((n.touchMove?t.touches[0].pageX:t.pageX)-T.prototype.helpers.elOffset(i).left+n.table.columnManager.element.scrollLeft>e.getWidth()/2?n.toCol===e&&n.toColAfter||(i.parentNode.insertBefore(n.placeholderElement,i.nextSibling),n.moveColumn(e,!0)):n.toCol===e&&!n.toColAfter||(i.parentNode.insertBefore(n.placeholderElement,i),n.moveColumn(e,!1)))}.bind(n),i.addEventListener("mousedown",function(t){n.touchMove=!1,1===t.which&&(n.checkTimeout=setTimeout(function(){n.startMove(t,e)},n.checkPeriod))}),i.addEventListener("mouseup",function(t){1===t.which&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),n.bindTouchEvents(e)),e.modules.moveColumn=t},A.prototype.bindTouchEvents=function(n){var o,r,s,a,l,c,u=this,t=n.getElement(),d=!1;t.addEventListener("touchstart",function(t){u.checkTimeout=setTimeout(function(){u.touchMove=!0,o=n.nextColumn(),s=o?o.getWidth()/2:0,r=n.prevColumn(),a=r?r.getWidth()/2:0,c=l=0,d=!1,u.startMove(t,n)},u.checkPeriod)},{passive:!0}),t.addEventListener("touchmove",function(t){var e,i;u.moving&&(u.moveHover(t),d=d||t.touches[0].pageX,0<(e=t.touches[0].pageX-d)?o&&s<e-l&&(i=o)!==n&&(d=t.touches[0].pageX,i.getElement().parentNode.insertBefore(u.placeholderElement,i.getElement().nextSibling),u.moveColumn(i,!0)):r&&a<-e-c&&(i=r)!==n&&(d=t.touches[0].pageX,i.getElement().parentNode.insertBefore(u.placeholderElement,i.getElement()),u.moveColumn(i,!1)),i&&(o=i.nextColumn(),l=s,s=o?o.getWidth()/2:0,r=i.prevColumn(),c=a,a=r?r.getWidth()/2:0))},{passive:!0}),t.addEventListener("touchend",function(t){u.checkTimeout&&clearTimeout(u.checkTimeout),u.moving&&u.endMove(t)})},A.prototype.startMove=function(t,e){var i=e.getElement();this.moving=e,this.startX=(this.touchMove?t.touches[0].pageX:t.pageX)-T.prototype.helpers.elOffset(i).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i),this.hoverElement=i.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom="0",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(t)},A.prototype._bindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(t){t.modules.moveColumn.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveColumn.mousemove)})},A.prototype._unbindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(t){t.modules.moveColumn.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveColumn.mousemove)})},A.prototype.moveColumn=function(t,e){var n=this.moving.getCells();this.toCol=t,(this.toColAfter=e)?t.getCells().forEach(function(t,e){var i=t.getElement();i.parentNode.insertBefore(n[e].getElement(),i.nextSibling)}):t.getCells().forEach(function(t,e){var i=t.getElement();i.parentNode.insertBefore(n[e].getElement(),i)})},A.prototype.endMove=function(t){1!==t.which&&!this.touchMove||(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))},A.prototype.moveHover=function(t){var e,i=this,n=i.table.columnManager.getElement(),o=n.scrollLeft,r=(i.touchMove?t.touches[0].pageX:t.pageX)-T.prototype.helpers.elOffset(n).left+o;i.hoverElement.style.left=r-i.startX+"px",r-o<i.autoScrollMargin&&(i.autoScrollTimeout||(i.autoScrollTimeout=setTimeout(function(){e=Math.max(0,o-5),i.table.rowManager.getElement().scrollLeft=e,i.autoScrollTimeout=!1},1))),o+n.clientWidth-r<i.autoScrollMargin&&(i.autoScrollTimeout||(i.autoScrollTimeout=setTimeout(function(){e=Math.min(n.clientWidth,o+5),i.table.rowManager.getElement().scrollLeft=e,i.autoScrollTimeout=!1},1)))},T.prototype.registerModule("moveColumn",A);function M(t){this.table=t,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connections=[],this.connectedTable=!1,this.connectedRow=!1}M.prototype.createPlaceholderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.classList.add("tabulator-row-placeholder"),t},M.prototype.initialize=function(t){this.connection=this.table.options.movableRowsConnectedTables},M.prototype.setHandle=function(t){this.hasHandle=t},M.prototype.initializeGroupHeader=function(i){var n=this,t={};t.mouseup=function(t){n.tableRowDrop(t,row)}.bind(n),t.mousemove=function(t){if(t.pageY-T.prototype.helpers.elOffset(i.element).top+n.table.rowManager.element.scrollTop>i.getHeight()/2)n.toRow===i&&n.toRowAfter||((e=i.getElement()).parentNode.insertBefore(n.placeholderElement,e.nextSibling),n.moveRow(i,!0));else if(n.toRow!==i||n.toRowAfter){var e;(e=i.getElement()).previousSibling&&(e.parentNode.insertBefore(n.placeholderElement,e),n.moveRow(i,!1))}}.bind(n),i.modules.moveRow=t},M.prototype.initializeRow=function(i){var t,n=this,e={};e.mouseup=function(t){n.tableRowDrop(t,i)}.bind(n),e.mousemove=function(t){if(t.pageY-T.prototype.helpers.elOffset(i.element).top+n.table.rowManager.element.scrollTop>i.getHeight()/2)n.toRow===i&&n.toRowAfter||((e=i.getElement()).parentNode.insertBefore(n.placeholderElement,e.nextSibling),n.moveRow(i,!0));else if(n.toRow!==i||n.toRowAfter){var e;(e=i.getElement()).parentNode.insertBefore(n.placeholderElement,e),n.moveRow(i,!1)}}.bind(n),this.hasHandle||((t=i.getElement()).addEventListener("mousedown",function(t){1===t.which&&(n.checkTimeout=setTimeout(function(){n.startMove(t,i)},n.checkPeriod))}),t.addEventListener("mouseup",function(t){1===t.which&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),this.bindTouchEvents(i,i.getElement())),i.modules.moveRow=e},M.prototype.initializeCell=function(e){var i=this,t=e.getElement();t.addEventListener("mousedown",function(t){1===t.which&&(i.checkTimeout=setTimeout(function(){i.startMove(t,e.row)},i.checkPeriod))}),t.addEventListener("mouseup",function(t){1===t.which&&i.checkTimeout&&clearTimeout(i.checkTimeout)}),this.bindTouchEvents(e.row,e.getElement())},M.prototype.bindTouchEvents=function(n,t){var o,r,s,a,l,c,u=this,d=!1;t.addEventListener("touchstart",function(t){u.checkTimeout=setTimeout(function(){u.touchMove=!0,o=n.nextRow(),s=o?o.getHeight()/2:0,r=n.prevRow(),a=r?r.getHeight()/2:0,c=l=0,d=!1,u.startMove(t,n)},u.checkPeriod)},{passive:!0}),this.moving,this.toRow,this.toRowAfter,t.addEventListener("touchmove",function(t){var e,i;u.moving&&(t.preventDefault(),u.moveHover(t),d=d||t.touches[0].pageY,0<(e=t.touches[0].pageY-d)?o&&s<e-l&&(i=o)!==n&&(d=t.touches[0].pageY,i.getElement().parentNode.insertBefore(u.placeholderElement,i.getElement().nextSibling),u.moveRow(i,!0)):r&&a<-e-c&&(i=r)!==n&&(d=t.touches[0].pageY,i.getElement().parentNode.insertBefore(u.placeholderElement,i.getElement()),u.moveRow(i,!1)),i&&(o=i.nextRow(),l=s,s=o?o.getHeight()/2:0,r=i.prevRow(),c=a,a=r?r.getHeight()/2:0))}),t.addEventListener("touchend",function(t){u.checkTimeout&&clearTimeout(u.checkTimeout),u.moving&&(u.endMove(t),u.touchMove=!1)})},M.prototype._bindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach(function(t){"row"!==t.type&&"group"!==t.type||!t.modules.moveRow.mousemove||t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)})},M.prototype._unbindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach(function(t){"row"!==t.type&&"group"!==t.type||!t.modules.moveRow.mousemove||t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)})},M.prototype.startMove=function(t,e){var i=e.getElement();this.setStartPosition(t,e),this.moving=e,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(e)):(i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i)),this.hoverElement=i.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(t)},M.prototype.setStartPosition=function(t,e){var i,n,o=this.touchMove?t.touches[0].pageX:t.pageX,r=this.touchMove?t.touches[0].pageY:t.pageY;i=e.getElement(),this.connection?(n=i.getBoundingClientRect(),this.startX=n.left-o+window.pageXOffset,this.startY=n.top-r+window.pageYOffset):this.startY=r-i.getBoundingClientRect().top},M.prototype.endMove=function(t){t&&1!==t.which&&!this.touchMove||(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))},M.prototype.moveRow=function(t,e){this.toRow=t,this.toRowAfter=e},M.prototype.moveHover=function(t){this.connection?this.moveHoverConnections.call(this,t):this.moveHoverTable.call(this,t)},M.prototype.moveHoverTable=function(t){var e=this.table.rowManager.getElement(),i=e.scrollTop,n=(this.touchMove?t.touches[0].pageY:t.pageY)-e.getBoundingClientRect().top+i;this.hoverElement.style.top=n-this.startY+"px"},M.prototype.moveHoverConnections=function(t){this.hoverElement.style.left=this.startX+(this.touchMove?t.touches[0].pageX:t.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?t.touches[0].pageY:t.pageY)+"px"},M.prototype.connectToTables=function(t){var e=this.table.modules.comms.getConnections(this.connection);this.table.options.movableRowsSendingStart.call(this.table,e),this.table.modules.comms.send(this.connection,"moveRow","connect",{row:t})},M.prototype.disconnectFromTables=function(){var t=this.table.modules.comms.getConnections(this.connection);this.table.options.movableRowsSendingStop.call(this.table,t),this.table.modules.comms.send(this.connection,"moveRow","disconnect")},M.prototype.connect=function(t,e){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=t,this.connectedRow=e,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(function(t){"row"===t.type&&t.modules.moveRow&&t.modules.moveRow.mouseup&&t.getElement().addEventListener("mouseup",t.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.table.options.movableRowsReceivingStart.call(this.table,e,t),!0)},M.prototype.disconnect=function(t){t===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(function(t){"row"===t.type&&t.modules.moveRow&&t.modules.moveRow.mouseup&&t.getElement().removeEventListener("mouseup",t.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.table.options.movableRowsReceivingStop.call(this.table,t)):console.warn("Move Row Error - trying to disconnect from non connected table")},M.prototype.dropComplete=function(t,e,i){var n=!1;if(i){switch(_typeof(this.table.options.movableRowsSender)){case"string":n=this.senders[this.table.options.movableRowsSender];break;case"function":n=this.table.options.movableRowsSender}n?n.call(this,this.moving.getComponent(),e?e.getComponent():void 0,t):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.table.options.movableRowsSent.call(this.table,this.moving.getComponent(),e?e.getComponent():void 0,t)}else this.table.options.movableRowsSentFailed.call(this.table,this.moving.getComponent(),e?e.getComponent():void 0,t);this.endMove()},M.prototype.tableRowDrop=function(t,e){var i=!1,n=!1;switch(t.stopImmediatePropagation(),_typeof(this.table.options.movableRowsReceiver)){case"string":i=this.receivers[this.table.options.movableRowsReceiver];break;case"function":i=this.table.options.movableRowsReceiver}i?n=i.call(this,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),n?this.table.options.movableRowsReceived.call(this.table,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):this.table.options.movableRowsReceivedFailed.call(this.table,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable),this.table.modules.comms.send(this.connectedTable,"moveRow","dropcomplete",{row:e,success:n})},M.prototype.receivers={insert:function(t,e,i){return this.table.addRow(t.getData(),void 0,e),!0},add:function(t,e,i){return this.table.addRow(t.getData()),!0},update:function(t,e,i){return!!e&&(e.update(t.getData()),!0)},replace:function(t,e,i){return!!e&&(this.table.addRow(t.getData(),void 0,e),e.delete(),!0)}},M.prototype.senders={delete:function(t,e,i){t.delete()}},M.prototype.commsReceived=function(t,e,i){switch(e){case"connect":return this.connect(t,i.row);case"disconnect":return this.disconnect(t);case"dropcomplete":return this.dropComplete(t,i.row,i.success)}},T.prototype.registerModule("moveRow",M);function N(t){this.table=t,this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0}N.prototype.initializeColumn=function(n){var o=this,r=!1,s={};this.allowedTypes.forEach(function(t){var e,i="mutator"+(t.charAt(0).toUpperCase()+t.slice(1));n.definition[i]&&(e=o.lookupMutator(n.definition[i]))&&(r=!0,s[i]={mutator:e,params:n.definition[i+"Params"]||{}})}),r&&(n.modules.mutate=s)},N.prototype.lookupMutator=function(t){var e=!1;switch(void 0===t?"undefined":_typeof(t)){case"string":this.mutators[t]?e=this.mutators[t]:console.warn("Mutator Error - No such mutator found, ignoring: ",t);break;case"function":e=t}return e},N.prototype.transformRow=function(o,r,s){var a,l="mutator"+(r.charAt(0).toUpperCase()+r.slice(1));return this.enabled&&this.table.columnManager.traverse(function(t){var e,i,n;t.modules.mutate&&(e=t.modules.mutate[l]||t.modules.mutate.mutator||!1)&&s&&void 0!==(a=t.getFieldValue(s))&&(n=t.getComponent(),i="function"==typeof e.params?e.params(a,o,r,n):e.params,t.setFieldValue(o,e.mutator(a,o,r,i,n)))}),o},N.prototype.transformCell=function(t,e){var i=t.column.modules.mutate.mutatorEdit||t.column.modules.mutate.mutator||!1,n={};return i?(n=Object.assign(n,t.row.getData()),t.column.setFieldValue(n,e),i.mutator(e,n,"edit",i.params,t.getComponent())):e},N.prototype.enable=function(){this.enabled=!0},N.prototype.disable=function(){this.enabled=!1},N.prototype.mutators={},T.prototype.registerModule("mutator",N);function K(t){this.table=t,this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.pageSizes=[],this.createElements()}K.prototype.createElements=function(){var t;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(t=document.createElement("button")).classList.add("tabulator-page"),t.setAttribute("type","button"),t.setAttribute("role","button"),t.setAttribute("aria-label",""),t.setAttribute("title",""),this.firstBut=t.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=t.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=t.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=t.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))},K.prototype.generatePageSizeSelectList=function(){var i=this,t=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))t=this.table.options.paginationSizeSelector,this.pageSizes=t,-1==this.pageSizes.indexOf(this.size)&&t.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){t=[];for(var e=1;e<5;e++)t.push(this.size*e);this.pageSizes=t}else t=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);t.forEach(function(t){var e=document.createElement("option");e.value=t,e.innerHTML=t,i.pageSizeSelect.appendChild(e)}),this.pageSizeSelect.value=this.size}},K.prototype.initialize=function(t){var e,i=this;for(var n in i.table.options.paginationDataSent)i.paginationDataSentNames[n]=i.table.options.paginationDataSent[n];for(var o in i.table.options.paginationDataReceived)i.paginationDataReceivedNames[o]=i.table.options.paginationDataReceived[o];i.table.modules.localize.bind("pagination|first",function(t){i.firstBut.innerHTML=t}),i.table.modules.localize.bind("pagination|first_title",function(t){i.firstBut.setAttribute("aria-label",t),i.firstBut.setAttribute("title",t)}),i.table.modules.localize.bind("pagination|prev",function(t){i.prevBut.innerHTML=t}),i.table.modules.localize.bind("pagination|prev_title",function(t){i.prevBut.setAttribute("aria-label",t),i.prevBut.setAttribute("title",t)}),i.table.modules.localize.bind("pagination|next",function(t){i.nextBut.innerHTML=t}),i.table.modules.localize.bind("pagination|next_title",function(t){i.nextBut.setAttribute("aria-label",t),i.nextBut.setAttribute("title",t)}),i.table.modules.localize.bind("pagination|last",function(t){i.lastBut.innerHTML=t}),i.table.modules.localize.bind("pagination|last_title",function(t){i.lastBut.setAttribute("aria-label",t),i.lastBut.setAttribute("title",t)}),i.firstBut.addEventListener("click",function(){i.setPage(1)}),i.prevBut.addEventListener("click",function(){i.previousPage()}),i.nextBut.addEventListener("click",function(){i.nextPage().then(function(){}).catch(function(){})}),i.lastBut.addEventListener("click",function(){i.setPage(i.max)}),i.table.options.paginationElement&&(i.element=i.table.options.paginationElement),this.pageSizeSelect&&(e=document.createElement("label"),i.table.modules.localize.bind("pagination|page_size",function(t){i.pageSizeSelect.setAttribute("aria-label",t),i.pageSizeSelect.setAttribute("title",t),e.innerHTML=t}),i.element.appendChild(e),i.element.appendChild(i.pageSizeSelect),i.pageSizeSelect.addEventListener("change",function(t){i.setPageSize(i.pageSizeSelect.value),i.setPage(1).then(function(){}).catch(function(){})})),i.element.appendChild(i.firstBut),i.element.appendChild(i.prevBut),i.element.appendChild(i.pagesElement),i.element.appendChild(i.nextBut),i.element.appendChild(i.lastBut),i.table.options.paginationElement||t||i.table.footerManager.append(i.element,i),i.mode=i.table.options.pagination,i.size=i.table.options.paginationSize||Math.floor(i.table.rowManager.getElement().clientHeight/24),i.count=i.table.options.paginationButtonCount,i.generatePageSizeSelectList()},K.prototype.initializeProgressive=function(t){this.initialize(!0),this.mode="progressive_"+t,this.progressiveLoad=!0},K.prototype.setDisplayIndex=function(t){this.displayIndex=t},K.prototype.getDisplayIndex=function(){return this.displayIndex},K.prototype.setMaxRows=function(t){this.max=t?Math.ceil(t/this.size):1,this.page>this.max&&(this.page=this.max)},K.prototype.reset=function(t){return"local"!=this.mode&&!t||(this.page=1),!0},K.prototype.setMaxPage=function(t){t=parseInt(t),this.max=t||1,this.page>this.max&&(this.page=this.max,this.trigger())},K.prototype.setPage=function(i){var n=this,o=this;return new Promise(function(t,e){0<(i=parseInt(i))&&i<=n.max?(n.page=i,n.trigger().then(function(){t()}).catch(function(){e()}),o.table.options.persistence&&o.table.modExists("persistence",!0)&&o.table.modules.persistence.config.page&&o.table.modules.persistence.save("page")):(console.warn("Pagination Error - Requested page is out of range of 1 - "+n.max+":",i),e())})},K.prototype.setPageToRow=function(o){var r=this;return new Promise(function(t,e){var i=r.table.rowManager.getDisplayRows(r.displayIndex-1).indexOf(o);if(-1<i){var n=Math.ceil((i+1)/r.size);r.setPage(n).then(function(){t()}).catch(function(){e()})}else console.warn("Pagination Error - Requested row is not visible"),e()})},K.prototype.setPageSize=function(t){0<(t=parseInt(t))&&(this.size=t),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.page&&this.table.modules.persistence.save("page")},K.prototype._setPageButtons=function(){for(var t=this,e=Math.floor((this.count-1)/2),i=Math.ceil((this.count-1)/2),n=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),o=this.page<=i?Math.min(this.count,this.max):Math.min(this.page+i,this.max);t.pagesElement.firstChild;)t.pagesElement.removeChild(t.pagesElement.firstChild);1==t.page?(t.firstBut.disabled=!0,t.prevBut.disabled=!0):(t.firstBut.disabled=!1,t.prevBut.disabled=!1),t.page==t.max?(t.lastBut.disabled=!0,t.nextBut.disabled=!0):(t.lastBut.disabled=!1,t.nextBut.disabled=!1);for(var r=n;r<=o;r++)0<r&&r<=t.max&&t.pagesElement.appendChild(t._generatePageButton(r));this.footerRedraw()},K.prototype._generatePageButton=function(e){var i=this,t=document.createElement("button");return t.classList.add("tabulator-page"),e==i.page&&t.classList.add("active"),t.setAttribute("type","button"),t.setAttribute("role","button"),t.setAttribute("aria-label","Show Page "+e),t.setAttribute("title","Show Page "+e),t.setAttribute("data-page",e),t.textContent=e,t.addEventListener("click",function(t){i.setPage(e)}),t},K.prototype.previousPage=function(){var i=this;return new Promise(function(t,e){1<i.page?(i.page--,i.trigger().then(function(){t()}).catch(function(){e()})):(console.warn("Pagination Error - Previous page would be less than page 1:",0),e())})},K.prototype.nextPage=function(){var i=this;return new Promise(function(t,e){i.page<i.max?(i.page++,i.trigger().then(function(){t()}).catch(function(){e()})):(i.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+i.max+":",i.max+1),e())})},K.prototype.getPage=function(){return this.page},K.prototype.getPageMax=function(){return this.max},K.prototype.getPageSize=function(t){return this.size},K.prototype.getMode=function(){return this.mode},K.prototype.getRows=function(t){var e,i,n;if("local"!=this.mode)return this._setPageButtons(),t.slice(0);e=[],n=(i=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(var o=i;o<n;o++)t[o]&&e.push(t[o]);return e},K.prototype.trigger=function(){var i,n=this;return new Promise(function(t,e){switch(n.mode){case"local":i=n.table.rowManager.scrollLeft,n.table.rowManager.refreshActiveData("page"),n.table.rowManager.scrollHorizontal(i),n.table.options.pageLoaded.call(n.table,n.getPage()),t();break;case"remote":case"progressive_load":case"progressive_scroll":n.table.modules.ajax.blockActiveRequest(),n._getRemotePage().then(function(){t()}).catch(function(){e()});break;default:console.warn("Pagination Error - no such pagination mode:",n.mode),e()}})},K.prototype._getRemotePage=function(){var o,r,s=this,a=this;return new Promise(function(e,i){if(a.table.modExists("ajax",!0)||i(),o=T.prototype.helpers.deepClone(a.table.modules.ajax.getParams()||{}),(r=a.table.modules.ajax.getParams())[s.paginationDataSentNames.page]=a.page,s.size&&(r[s.paginationDataSentNames.size]=s.size),s.table.options.ajaxSorting&&s.table.modExists("sort")){var t=a.table.modules.sort.getSort();t.forEach(function(t){delete t.column}),r[s.paginationDataSentNames.sorters]=t}if(s.table.options.ajaxFiltering&&s.table.modExists("filter")){var n=a.table.modules.filter.getFilters(!0,!0);r[s.paginationDataSentNames.filters]=n}a.table.modules.ajax.setParams(r),a.table.modules.ajax.sendRequest(s.progressiveLoad).then(function(t){a._parseRemoteData(t),e()}).catch(function(t){i()}),a.table.modules.ajax.setParams(o)})},K.prototype._parseRemoteData=function(t){var e,i,n=this;if(void 0===t[this.paginationDataReceivedNames.last_page]&&console.warn("Remote Pagination Error - Server response missing '"+this.paginationDataReceivedNames.last_page+"' property"),t[this.paginationDataReceivedNames.data])if(this.max=parseInt(t[this.paginationDataReceivedNames.last_page])||1,this.progressiveLoad)switch(this.mode){case"progressive_load":this.table.rowManager.addRows(t[this.paginationDataReceivedNames.data]),this.page<this.max&&setTimeout(function(){n.nextPage().then(function(){}).catch(function(){})},n.table.options.ajaxProgressiveLoadDelay);break;case"progressive_scroll":t=this.table.rowManager.getData().concat(t[this.paginationDataReceivedNames.data]),this.table.rowManager.setData(t,!0),i=this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight,n.table.rowManager.element.scrollHeight<=n.table.rowManager.element.clientHeight+i&&n.nextPage().then(function(){}).catch(function(){})}else e=this.table.rowManager.scrollLeft,this.table.rowManager.setData(t[this.paginationDataReceivedNames.data]),this.table.rowManager.scrollHorizontal(e),this.table.columnManager.scrollHorizontal(e),this.table.options.pageLoaded.call(this.table,this.getPage());else console.warn("Remote Pagination Error - Server response missing '"+this.paginationDataReceivedNames.data+"' property")},K.prototype.footerRedraw=function(){var t=this.table.footerManager.element;Math.ceil(t.clientWidth)-t.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(t.clientWidth)-t.scrollWidth<0&&(this.pagesElement.style.display="none"))},K.prototype.paginationDataSentNames={page:"page",size:"size",sorters:"sorters",filters:"filters"},K.prototype.paginationDataReceivedNames={current_page:"current_page",last_page:"last_page",data:"data"},T.prototype.registerModule("page",K);function L(t){this.table=t,this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1}L.prototype.localStorageTest=function(){var t="_tabulator_test";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}},L.prototype.initialize=function(){var t,e=this.table.options.persistenceMode,i=this.table.options.persistenceID;this.mode=!0!==e?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:this.readers[this.table.options.persistenceReaderFunc]?this.readFunc=this.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):this.readers[this.mode]?this.readFunc=this.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:this.readers[this.table.options.persistenceWriterFunc]?this.writeFunc=this.readers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):this.writers[this.mode]?this.writeFunc=this.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(i||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(t=this.retreiveData("page"))&&(void 0===t.paginationSize||!0!==this.config.page&&!this.config.page.size||(this.table.options.paginationSize=t.paginationSize),void 0===t.paginationInitialPage||!0!==this.config.page&&!this.config.page.page||(this.table.options.paginationInitialPage=t.paginationInitialPage)),this.config.group&&(t=this.retreiveData("group"))&&(void 0===t.groupBy||!0!==this.config.group&&!this.config.group.groupBy||(this.table.options.groupBy=t.groupBy),void 0===t.groupStartOpen||!0!==this.config.group&&!this.config.group.groupStartOpen||(this.table.options.groupStartOpen=t.groupStartOpen),void 0===t.groupHeader||!0!==this.config.group&&!this.config.group.groupHeader||(this.table.options.groupHeader=t.groupHeader))},L.prototype.initializeColumn=function(t){var n,o=this;this.config.columns&&(this.defWatcherBlock=!0,n=t.getDefinition(),(!0===this.config.columns?Object.keys(n):this.config.columns).forEach(function(t){var e=Object.getOwnPropertyDescriptor(n,t),i=n[t];e&&Object.defineProperty(n,t,{set:function(t){i=t,o.defWatcherBlock||o.save("columns"),e.set&&e.set(t)},get:function(){return e.get&&e.get(),i}})}),this.defWatcherBlock=!1)},L.prototype.load=function(t,e){var i=this.retreiveData(t);return e&&(i=i?this.mergeDefinition(e,i):e),i},L.prototype.retreiveData=function(t){return!!this.readFunc&&this.readFunc(this.id,t)},L.prototype.mergeDefinition=function(o,i){var r=this,s=[];return(i=i||[]).forEach(function(e,t){var i,n=r._findColumn(o,e);n&&(!0===r.config.columns?(i=Object.keys(n)).push("width"):i=r.config.columns,i.forEach(function(t){void 0!==e[t]&&(n[t]=e[t])}),n.columns&&(n.columns=r.mergeDefinition(n.columns,e.columns)),s.push(n))}),o.forEach(function(t,e){r._findColumn(i,t)||(s.length>e?s.splice(e,0,t):s.push(t))}),s},L.prototype._findColumn=function(t,e){var i=e.columns?"group":e.field?"field":"object";return t.find(function(t){switch(i){case"group":return t.title===e.title&&t.columns.length===e.columns.length;case"field":return t.field===e.field;case"object":return t===e}})},L.prototype.save=function(t){var e={};switch(t){case"columns":e=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":e=this.table.modules.filter.getFilters();break;case"sort":e=this.validateSorters(this.table.modules.sort.getSort());break;case"group":e=this.getGroupConfig();break;case"page":e=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,t,e)},L.prototype.validateSorters=function(t){return t.forEach(function(t){t.column=t.field,delete t.field}),t},L.prototype.getGroupConfig=function(){return this.config.group&&(!0!==this.config.group&&!this.config.group.groupBy||(data.groupBy=this.table.options.groupBy),!0!==this.config.group&&!this.config.group.groupStartOpen||(data.groupStartOpen=this.table.options.groupStartOpen),!0!==this.config.group&&!this.config.group.groupHeader||(data.groupHeader=this.table.options.groupHeader)),data},L.prototype.getPageConfig=function(){var t={};return this.config.page&&(!0!==this.config.page&&!this.config.page.size||(t.paginationSize=this.table.modules.page.getPageSize()),!0!==this.config.page&&!this.config.page.page||(t.paginationInitialPage=this.table.modules.page.getPage())),t},L.prototype.parseColumns=function(t){var o=this,r=[];return t.forEach(function(e){var t,i={},n=e.getDefinition();e.isGroup?(i.title=n.title,i.columns=o.parseColumns(e.getColumns())):(i.field=e.getField(),!0===o.config.columns?(t=Object.keys(n)).push("width"):t=o.config.columns,t.forEach(function(t){switch(t){case"width":i.width=e.getWidth();break;case"visible":i.visible=e.visible;break;default:i[t]=n[t]}})),r.push(i)}),r},L.prototype.readers={local:function(t,e){var i=localStorage.getItem(t+"-"+e);return!!i&&JSON.parse(i)},cookie:function(t,e){var i,n=document.cookie,o=t+"-"+e,r=n.indexOf(o+"=");return-1<r&&(-1<(i=(n=n.substr(r)).indexOf(";"))&&(n=n.substr(0,i)),data=n.replace(o+"=","")),!!data&&JSON.parse(data)}},L.prototype.writers={local:function(t,e,i){localStorage.setItem(t+"-"+e,JSON.stringify(i))},cookie:function(t,e,i){var n=new Date;n.setDate(n.getDate()+1e4),document.cookie=t+"_"+e+"="+JSON.stringify(i)+"; expires="+n.toUTCString()}},T.prototype.registerModule("persistence",L);function P(t){this.table=t,this.element=!1,this.manualBlock=!1}P.prototype.initialize=function(){window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))},P.prototype.replaceTable=function(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.htmlTableExport.genereateTable(this.table.options.printConfig,this.table.options.printCopyStyle,this.table.options.printVisibleRows,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))},P.prototype.cleanup=function(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")},P.prototype.printFullscreen=function(t,e,i){var n,o,r=window.scrollX,s=window.scrollY,a=document.createElement("div"),l=document.createElement("div"),c=this.table.modules.htmlTableExport.genereateTable(void 0!==i?i:this.table.options.printConfig,void 0!==e?e:this.table.options.printCopyStyle,t,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(a.classList.add("tabulator-print-header"),"string"==typeof(n="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?a.innerHTML=n:a.appendChild(n),this.element.appendChild(a)),this.element.appendChild(c),this.table.options.printFooter&&(l.classList.add("tabulator-print-footer"),"string"==typeof(o="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?l.innerHTML=o:l.appendChild(o),this.element.appendChild(l)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,c),window.print(),this.cleanup(),window.scrollTo(r,s),this.manualBlock=!1},T.prototype.registerModule("print",P);function F(t){this.table=t,this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0}F.prototype.watchData=function(s){var a,l=this;this.currentVersion++,a=this.currentVersion,l.unwatchData(),l.data=s,l.origFuncs.push=s.push,Object.defineProperty(l.data,"push",{enumerable:!1,configurable:!0,value:function(){var t=Array.from(arguments);return l.blocked||a!==l.currentVersion||t.forEach(function(t){l.table.rowManager.addRowActual(t,!1)}),l.origFuncs.push.apply(s,arguments)}}),l.origFuncs.unshift=s.unshift,Object.defineProperty(l.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var t=Array.from(arguments);return l.blocked||a!==l.currentVersion||t.forEach(function(t){l.table.rowManager.addRowActual(t,!0)}),l.origFuncs.unshift.apply(s,arguments)}}),l.origFuncs.shift=s.shift,Object.defineProperty(l.data,"shift",{enumerable:!1,configurable:!0,value:function(){var t;return l.blocked||a!==l.currentVersion||l.data.length&&(t=l.table.rowManager.getRowFromDataObject(l.data[0]))&&t.deleteActual(),l.origFuncs.shift.call(s)}}),l.origFuncs.pop=s.pop,Object.defineProperty(l.data,"pop",{enumerable:!1,configurable:!0,value:function(){var t;return l.blocked||a!==l.currentVersion||l.data.length&&(t=l.table.rowManager.getRowFromDataObject(l.data[l.data.length-1]))&&t.deleteActual(),l.origFuncs.pop.call(s)}}),l.origFuncs.splice=s.splice,Object.defineProperty(l.data,"splice",{enumerable:!1,configurable:!0,value:function(){var e,t=Array.from(arguments),i=t[0]<0?s.length+t[0]:t[0],n=t[1],o=!!t[2]&&t.slice(2);if(!l.blocked&&a===l.currentVersion){if(o&&((e=!!s[i]&&l.table.rowManager.getRowFromDataObject(s[i]))?o.forEach(function(t){l.table.rowManager.addRowActual(t,!0,e,!0)}):(o=o.slice().reverse()).forEach(function(t){l.table.rowManager.addRowActual(t,!0,!1,!0)})),0!==n){var r=s.slice(i,void 0===t[1]?t[1]:i+n);r.forEach(function(t,e){var i=l.table.rowManager.getRowFromDataObject(t);i&&i.deleteActual(e!==r.length-1)})}!o&&0===n||l.table.rowManager.reRenderInPosition()}return l.origFuncs.splice.apply(s,arguments)}})},F.prototype.unwatchData=function(){if(!1!==this.data)for(var t in this.origFuncs)Object.defineProperty(this.data,t,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})},F.prototype.watchRow=function(t){var e=t.getData();for(var i in this.blocked=!0,e)this.watchKey(t,e,i);this.blocked=!1},F.prototype.watchKey=function(i,t,n){var o=this,r=Object.getOwnPropertyDescriptor(t,n),s=t[n],a=this.currentVersion;Object.defineProperty(t,n,{set:function(t){if(s=t,!o.blocked&&a===o.currentVersion){var e={};e[n]=t,i.updateData(e)}r.set&&r.set(t)},get:function(){return r.get&&r.get(),s}})},F.prototype.unwatchRow=function(t){var e=t.getData();for(var i in e)Object.defineProperty(e,i,{value:e[i]})},F.prototype.block=function(){this.blocked=!0},F.prototype.unblock=function(){this.blocked=!1},T.prototype.registerModule("reactiveData",F);function B(t){this.table=t,this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null}B.prototype.initializeColumn=function(t,o,e){var r=this,i=!1,n=this.table.options.resizableColumns;if("header"===t&&(i="textarea"==o.definition.formatter||o.definition.variableHeight,o.modules.resize={variableHeight:i}),!0===n||n==t){var s=document.createElement("div");s.className="tabulator-col-resize-handle";var a=document.createElement("div");a.className="tabulator-col-resize-handle prev",s.addEventListener("click",function(t){t.stopPropagation()});var l=function(t){var e=o.getLastColumn();e&&r._checkResizability(e)&&(r.startColumn=o,r._mouseDown(t,e,s))};s.addEventListener("mousedown",l),s.addEventListener("touchstart",l,{passive:!0}),s.addEventListener("dblclick",function(t){var e=o.getLastColumn();e&&r._checkResizability(e)&&(t.stopPropagation(),e.reinitializeWidth(!0))}),a.addEventListener("click",function(t){t.stopPropagation()});var c=function(t){var e,i,n;!(e=o.getFirstColumn())||(n=0<(i=r.table.columnManager.findColumnIndex(e))&&r.table.columnManager.getColumnByIndex(i-1))&&r._checkResizability(n)&&(r.startColumn=o,r._mouseDown(t,n,a))};a.addEventListener("mousedown",c),a.addEventListener("touchstart",c,{passive:!0}),a.addEventListener("dblclick",function(t){var e,i,n;!(e=o.getFirstColumn())||(n=0<(i=r.table.columnManager.findColumnIndex(e))&&r.table.columnManager.getColumnByIndex(i-1))&&r._checkResizability(n)&&(t.stopPropagation(),n.reinitializeWidth(!0))}),e.appendChild(s),e.appendChild(a)}},B.prototype._checkResizability=function(t){return void 0!==t.definition.resizable?t.definition.resizable:this.table.options.resizableColumns},B.prototype._mouseDown=function(t,e,i){function n(t){e.setWidth(r.startWidth+((void 0===t.screenX?t.touches[0].screenX:t.screenX)-r.startX)),!r.table.browserSlow&&e.modules.resize&&e.modules.resize.variableHeight&&e.checkCellHeights()}function o(t){r.startColumn.modules.edit&&(r.startColumn.modules.edit.blocked=!1),r.table.browserSlow&&e.modules.resize&&e.modules.resize.variableHeight&&e.checkCellHeights(),document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mousemove",n),i.removeEventListener("touchmove",n),i.removeEventListener("touchend",o),r.table.element.classList.remove("tabulator-block-select"),r.table.options.persistence&&r.table.modExists("persistence",!0)&&r.table.modules.persistence.config.columns&&r.table.modules.persistence.save("columns"),r.table.options.columnResized.call(r.table,e.getComponent())}var r=this;r.table.element.classList.add("tabulator-block-select"),t.stopPropagation(),r.startColumn.modules.edit&&(r.startColumn.modules.edit.blocked=!0),r.startX=void 0===t.screenX?t.touches[0].screenX:t.screenX,r.startWidth=e.getWidth(),document.body.addEventListener("mousemove",n),document.body.addEventListener("mouseup",o),i.addEventListener("touchmove",n,{passive:!0}),i.addEventListener("touchend",o)},T.prototype.registerModule("resizeColumns",B);function H(t){this.table=t,this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null}H.prototype.initializeRow=function(i){var n=this,t=i.getElement(),e=document.createElement("div");e.className="tabulator-row-resize-handle";var o=document.createElement("div");o.className="tabulator-row-resize-handle prev",e.addEventListener("click",function(t){t.stopPropagation()});function r(t){n.startRow=i,n._mouseDown(t,i,e)}e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0}),o.addEventListener("click",function(t){t.stopPropagation()});function s(t){var e=n.table.rowManager.prevDisplayRow(i);e&&(n.startRow=e,n._mouseDown(t,e,o))}o.addEventListener("mousedown",s),o.addEventListener("touchstart",s,{passive:!0}),t.appendChild(e),t.appendChild(o)},H.prototype._mouseDown=function(t,e,i){function n(t){e.setHeight(r.startHeight+((void 0===t.screenY?t.touches[0].screenY:t.screenY)-r.startY))}function o(t){document.body.removeEventListener("mouseup",n),document.body.removeEventListener("mousemove",n),i.removeEventListener("touchmove",n),i.removeEventListener("touchend",o),r.table.element.classList.remove("tabulator-block-select"),r.table.options.rowResized.call(this.table,e.getComponent())}var r=this;r.table.element.classList.add("tabulator-block-select"),t.stopPropagation(),r.startY=void 0===t.screenY?t.touches[0].screenY:t.screenY,r.startHeight=e.getHeight(),document.body.addEventListener("mousemove",n),document.body.addEventListener("mouseup",o),i.addEventListener("touchmove",n,{passive:!0}),i.addEventListener("touchend",o)},T.prototype.registerModule("resizeRows",H);function z(t){this.table=t,this.binding=!1,this.observer=!1}z.prototype.initialize=function(t){var e=this.table;"undefined"!=typeof ResizeObserver&&"virtual"===e.rowManager.getRenderMode()?(this.observer=new ResizeObserver(function(t){e.browserMobile&&(!e.browserMobile||e.modules.edit.currentCell)||e.redraw()}),this.observer.observe(e.element)):(this.binding=function(){e.browserMobile&&(!e.browserMobile||e.modules.edit.currentCell)||e.redraw()},window.addEventListener("resize",this.binding))},z.prototype.clearBindings=function(t){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element)},T.prototype.registerModule("resizeTable",z);function $(t){this.table=t,this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1}$.prototype.initialize=function(){var i=this,n=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(t,e){t.modules.responsive&&t.modules.responsive.order&&t.modules.responsive.visible&&(t.modules.responsive.index=e,n.push(t),t.visible||"collapse"!==i.mode||i.hiddenColumns.push(t))}),n=(n=n.reverse()).sort(function(t,e){return e.modules.responsive.order-t.modules.responsive.order||e.modules.responsive.index-t.modules.responsive.index}),this.columns=n,"collapse"===this.mode&&this.generateCollapsedContent();var t=this.table.columnManager.columnsByIndex,e=Array.isArray(t),o=0;for(t=e?t:t[Symbol.iterator]();;){var r;if(e){if(o>=t.length)break;r=t[o++]}else{if((o=t.next()).done)break;r=o.value}var s=r;if("responsiveCollapse"==s.definition.formatter){this.collapseHandleColumn=s;break}}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())},$.prototype.initializeColumn=function(t){var e=t.getDefinition();t.modules.responsive={order:void 0===e.responsive?1:e.responsive,visible:!1!==e.visible}},$.prototype.initializeRow=function(t){var e;"calc"!==t.type&&((e=document.createElement("div")).classList.add("tabulator-responsive-collapse"),t.modules.responsiveLayout={element:e,open:this.collapseStartOpen},this.collapseStartOpen||(e.style.display="none"))},$.prototype.layoutRow=function(t){var e=t.getElement();t.modules.responsiveLayout&&(e.appendChild(t.modules.responsiveLayout.element),this.generateCollapsedRowContent(t))},$.prototype.updateColumnVisibility=function(t,e){t.modules.responsive&&(t.modules.responsive.visible=e,this.initialize())},$.prototype.hideColumn=function(t){var e=this.hiddenColumns.length;t.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(t),this.generateCollapsedContent(),this.collapseHandleColumn&&!e&&this.collapseHandleColumn.show())},$.prototype.showColumn=function(t){var e;t.show(!1,!0),t.setWidth(t.getWidth()),"collapse"===this.mode&&(-1<(e=this.hiddenColumns.indexOf(t))&&this.hiddenColumns.splice(e,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())},$.prototype.update=function(){for(var t=this,e=!0;e;){var i="fitColumns"==t.table.modules.layout.getMode()?t.table.columnManager.getFlexBaseWidth():t.table.columnManager.getWidth(),n=(t.table.options.headerVisible?t.table.columnManager.element.clientWidth:t.table.element.clientWidth)-i;if(n<0){var o=t.columns[t.index];o?(t.hideColumn(o),t.index++):e=!1}else{var r=t.columns[t.index-1];r&&0<n&&n>=r.getWidth()?(t.showColumn(r),t.index--):e=!1}t.table.rowManager.activeRowsCount||t.table.rowManager.renderEmptyScroll()}},$.prototype.generateCollapsedContent=function(){var e=this;this.table.rowManager.getDisplayRows().forEach(function(t){e.generateCollapsedRowContent(t)})},$.prototype.generateCollapsedRowContent=function(t){var e,i;if(t.modules.responsiveLayout){for(e=t.modules.responsiveLayout.element;e.firstChild;)e.removeChild(e.firstChild);(i=this.collapseFormatter(this.generateCollapsedRowData(t)))&&e.appendChild(i)}},$.prototype.generateCollapsedRowData=function(i){var n,o=this,r=i.getData(),s=[];return this.hiddenColumns.forEach(function(t){var e=t.getFieldValue(r);t.definition.title&&t.field&&(t.modules.format&&o.table.options.responsiveLayoutCollapseUseFormatters?(n={value:!1,data:{},getValue:function(){return e},getData:function(){return r},getElement:function(){return document.createElement("div")},getRow:function(){return i.getComponent()},getColumn:function(){return t.getComponent()}},s.push({title:t.definition.title,value:t.modules.format.formatter.call(o.table.modules.format,n,t.modules.format.params)})):s.push({title:t.definition.title,value:e}))}),s},$.prototype.formatCollapsedData=function(t){var e=document.createElement("table"),i="";return t.forEach(function(t){var e=document.createElement("div");t.value instanceof Node&&(e.appendChild(t.value),t.value=e.innerHTML),i+="<tr><td><strong>"+t.title+"</strong></td><td>"+t.value+"</td></tr>"}),e.innerHTML=i,Object.keys(t).length?e:""},T.prototype.registerModule("responsiveLayout",$);function V(t){this.table=t,this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null}V.prototype.clearSelectionData=function(t){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],t||this._rowSelectionChanged()},V.prototype.initializeRow=function(s){function e(){setTimeout(function(){a.selecting=!1},50),document.body.removeEventListener("mouseup",e)}var a=this,t=s.getElement();s.modules.select={selected:!1},a.table.options.selectableCheck.call(this.table,s.getComponent())?(t.classList.add("tabulator-selectable"),t.classList.remove("tabulator-unselectable"),a.table.options.selectable&&"highlight"!=a.table.options.selectable&&("click"===a.table.options.selectableRangeMode?t.addEventListener("click",function(t){if(t.shiftKey){a.table._clearSelection(),a.lastClickedRow=a.lastClickedRow||s;var e=a.table.rowManager.getDisplayRowIndex(a.lastClickedRow),i=a.table.rowManager.getDisplayRowIndex(s),n=e<=i?e:i,o=i<=e?e:i,r=a.table.rowManager.getDisplayRows().slice(0).splice(n,o-n+1);t.ctrlKey||t.metaKey?(r.forEach(function(t){t!==a.lastClickedRow&&(!0===a.table.options.selectable||a.isRowSelected(s)?a.toggleRow(t):a.selectedRows.length<a.table.options.selectable&&a.toggleRow(t))}),a.lastClickedRow=s):(a.deselectRows(),!0!==a.table.options.selectable&&r.length>a.table.options.selectable&&(r=r.slice(0,a.table.options.selectable)),a.selectRows(r)),a.table._clearSelection()}else t.ctrlKey||t.metaKey?a.toggleRow(s):(a.deselectRows(),a.selectRows(s)),a.lastClickedRow=s}):(t.addEventListener("click",function(t){a.table.modExists("edit")&&a.table.modules.edit.getCurrentCell()||a.table._clearSelection(),a.selecting||a.toggleRow(s)}),t.addEventListener("mousedown",function(t){if(t.shiftKey)return a.table._clearSelection(),a.selecting=!0,a.selectPrev=[],document.body.addEventListener("mouseup",e),document.body.addEventListener("keyup",e),a.toggleRow(s),!1}),t.addEventListener("mouseenter",function(t){a.selecting&&(a.table._clearSelection(),a.toggleRow(s),a.selectPrev[1]==s&&a.toggleRow(a.selectPrev[0]))}),t.addEventListener("mouseout",function(t){a.selecting&&(a.table._clearSelection(),a.selectPrev.unshift(s))})))):(t.classList.add("tabulator-unselectable"),t.classList.remove("tabulator-selectable"))},V.prototype.toggleRow=function(t){this.table.options.selectableCheck.call(this.table,t.getComponent())&&(t.modules.select&&t.modules.select.selected?this._deselectRow(t):this._selectRow(t))},V.prototype.selectRows=function(t){var e,i=this;switch(void 0===t?"undefined":_typeof(t)){case"undefined":this.table.rowManager.rows.forEach(function(t){i._selectRow(t,!0,!0)}),this._rowSelectionChanged();break;case"string":(e=this.table.rowManager.findRow(t))?this._selectRow(e,!0,!0):this.table.rowManager.getRows(t).forEach(function(t){i._selectRow(t,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(t)?(t.forEach(function(t){i._selectRow(t,!0,!0)}),this._rowSelectionChanged()):this._selectRow(t,!1,!0)}},V.prototype._selectRow=function(t,e,i){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!i&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var n=this.table.rowManager.findRow(t);n?-1==this.selectedRows.indexOf(n)&&(n.modules.select||(n.modules.select={}),n.modules.select.selected=!0,n.modules.select.checkboxEl&&(n.modules.select.checkboxEl.checked=!0),n.getElement().classList.add("tabulator-selected"),this.selectedRows.push(n),e||(this.table.options.rowSelected.call(this.table,n.getComponent()),this._rowSelectionChanged())):e||console.warn("Selection Error - No such row found, ignoring selection:"+t)},V.prototype.isRowSelected=function(t){return-1!==this.selectedRows.indexOf(t)},V.prototype.deselectRows=function(t){var e,i=this;if(void 0===t){e=i.selectedRows.length;for(var n=0;n<e;n++)i._deselectRow(i.selectedRows[0],!0);i._rowSelectionChanged()}else Array.isArray(t)?(t.forEach(function(t){i._deselectRow(t,!0)}),i._rowSelectionChanged()):i._deselectRow(t)},V.prototype._deselectRow=function(t,e){var i,n=this.table.rowManager.findRow(t);n?-1<(i=this.selectedRows.findIndex(function(t){return t==n}))&&(n.modules.select||(n.modules.select={}),n.modules.select.selected=!1,n.modules.select.checkboxEl&&(n.modules.select.checkboxEl.checked=!1),n.getElement().classList.remove("tabulator-selected"),this.selectedRows.splice(i,1),e||(this.table.options.rowDeselected.call(this.table,n.getComponent()),this._rowSelectionChanged())):e||console.warn("Deselection Error - No such row found, ignoring selection:"+t)},V.prototype.getSelectedData=function(){var e=[];return this.selectedRows.forEach(function(t){e.push(t.getData())}),e},V.prototype.getSelectedRows=function(){var e=[];return this.selectedRows.forEach(function(t){e.push(t.getComponent())}),e},V.prototype._rowSelectionChanged=function(){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),this.table.options.rowSelectionChanged.call(this.table,this.getSelectedData(),this.getSelectedRows())},V.prototype.registerRowSelectCheckbox=function(t,e){t._row.modules.select||(t._row.modules.select={}),t._row.modules.select.checkboxEl=e},V.prototype.registerHeaderSelectCheckbox=function(t){this.headerCheckboxElement=t},T.prototype.registerModule("selectRow",V);function j(t){this.table=t,this.sortList=[],this.changed=!1}j.prototype.initializeColumn=function(o,t){var e,i,r=this,n=!1;switch(_typeof(o.definition.sorter)){case"string":r.sorters[o.definition.sorter]?n=r.sorters[o.definition.sorter]:console.warn("Sort Error - No such sorter found: ",o.definition.sorter);break;case"function":n=o.definition.sorter}o.modules.sort={sorter:n,dir:"none",params:o.definition.sorterParams||{},startingDir:o.definition.headerSortStartingDir||"asc",tristate:void 0!==o.definition.headerSortTristate?o.definition.headerSortTristate:this.table.options.headerSortTristate},(void 0===o.definition.headerSort?!1!==this.table.options.headerSort:!1!==o.definition.headerSort)&&((e=o.getElement()).classList.add("tabulator-sortable"),(i=document.createElement("div")).classList.add("tabulator-arrow"),t.appendChild(i),e.addEventListener("click",function(t){var e="",i=[],n=!1;if(o.modules.sort){if(o.modules.sort.tristate)e="none"==o.modules.sort.dir?o.modules.sort.startingDir:o.modules.sort.dir==o.modules.sort.startingDir?"asc"==o.modules.sort.dir?"desc":"asc":"none";else switch(o.modules.sort.dir){case"asc":e="desc";break;case"desc":e="asc";break;default:e=o.modules.sort.startingDir}r.table.options.columnHeaderSortMulti&&(t.shiftKey||t.ctrlKey)?(-1<(n=(i=r.getSort()).findIndex(function(t){return t.field===o.getField()}))?(i[n].dir=e,n!=i.length-1&&(n=i.splice(n,1)[0],"none"!=e&&i.push(n))):"none"!=e&&i.push({column:o,dir:e}),r.setSort(i)):"none"==e?r.clear():r.setSort(o,e),r.table.rowManager.sorterRefresh(!r.sortList.length)}}))},j.prototype.hasChanged=function(){var t=this.changed;return this.changed=!1,t},j.prototype.getSort=function(){var e=[];return this.sortList.forEach(function(t){t.column&&e.push({column:t.column.getComponent(),field:t.column.getField(),dir:t.dir})}),e},j.prototype.setSort=function(t,e){var i=this,n=[];Array.isArray(t)||(t=[{column:t,dir:e}]),t.forEach(function(t){var e;(e=i.table.columnManager.findColumn(t.column))?(t.column=e,n.push(t),i.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",t.column)}),i.sortList=n,this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.sort&&this.table.modules.persistence.save("sort")},j.prototype.clear=function(){this.setSort([])},j.prototype.findSorter=function(t){var e,i=this.table.rowManager.activeRows[0],n="string";if(i&&(i=i.getData(),t.getField()))switch(e=t.getFieldValue(i),void 0===e?"undefined":_typeof(e)){case"undefined":n="string";break;case"boolean":n="boolean";break;default:isNaN(e)||""===e?e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(n="alphanum"):n="number"}return this.sorters[n]},j.prototype.sort=function(i){var n,o=this;n=this.table.options.sortOrderReverse?o.sortList.slice().reverse():o.sortList,o.table.options.dataSorting&&o.table.options.dataSorting.call(o.table,o.getSort()),o.clearColumnHeaders(),o.table.options.ajaxSorting?n.forEach(function(t,e){o.setColumnHeader(t.column,t.dir)}):n.forEach(function(t,e){t.column&&t.column.modules.sort&&(t.column.modules.sort.sorter||(t.column.modules.sort.sorter=o.findSorter(t.column)),o._sortItem(i,t.column,t.dir,n,e)),o.setColumnHeader(t.column,t.dir)}),o.table.options.dataSorted&&o.table.options.dataSorted.call(o.table,o.getSort(),o.table.rowManager.getComponents("active"))},j.prototype.clearColumnHeaders=function(){this.table.columnManager.getRealColumns().forEach(function(t){t.modules.sort&&(t.modules.sort.dir="none",t.getElement().setAttribute("aria-sort","none"))})},j.prototype.setColumnHeader=function(t,e){t.modules.sort.dir=e,t.getElement().setAttribute("aria-sort",e)},j.prototype._sortItem=function(t,o,r,s,a){var l=this,c="function"==typeof o.modules.sort.params?o.modules.sort.params(o.getComponent(),r):o.modules.sort.params;t.sort(function(t,e){var i=l._sortRow(t,e,o,r,c);if(0===i&&a)for(var n=a-1;0<=n&&0===(i=l._sortRow(t,e,s[n].column,s[n].dir,c));n--);return i})},j.prototype._sortRow=function(t,e,i,n,o){var r,s,a="asc"==n?t:e,l="asc"==n?e:t;return t=void 0!==(t=i.getFieldValue(a.getData()))?t:"",e=void 0!==(e=i.getFieldValue(l.getData()))?e:"",r=a.getComponent(),s=l.getComponent(),i.modules.sort.sorter.call(this,t,e,r,s,i.getComponent(),n,o)},j.prototype.sorters={number:function(t,e,i,n,o,r,s){var a=s.alignEmptyValues,l=s.decimalSeparator||".",c=s.thousandSeparator||",",u=0;if(t=parseFloat(String(t).split(c).join("").split(l).join(".")),e=parseFloat(String(e).split(c).join("").split(l).join(".")),isNaN(t))u=isNaN(e)?0:-1;else{if(!isNaN(e))return t-e;u=1}return("top"===a&&"desc"===r||"bottom"===a&&"asc"===r)&&(u*=-1),u},string:function(t,e,i,n,o,r,s){var a,l=s.alignEmptyValues,c=0;if(t){if(e){switch(_typeof(s.locale)){case"boolean":s.locale&&(a=this.table.modules.localize.getLocale());break;case"string":a=s.locale}return String(t).toLowerCase().localeCompare(String(e).toLowerCase(),a)}c=1}else c=e?-1:0;return("top"===l&&"desc"===r||"bottom"===l&&"asc"===r)&&(c*=-1),c},date:function(t,e,i,n,o,r,s){return s.format||(s.format="DD/MM/YYYY"),this.sorters.datetime.call(this,t,e,i,n,o,r,s)},time:function(t,e,i,n,o,r,s){return s.format||(s.format="hh:mm"),this.sorters.datetime.call(this,t,e,i,n,o,r,s)},datetime:function(t,e,i,n,o,r,s){var a=s.format||"DD/MM/YYYY hh:mm:ss",l=s.alignEmptyValues,c=0;if("undefined"!=typeof moment){if(t=moment(t,a),e=moment(e,a),t.isValid()){if(e.isValid())return t-e;c=1}else c=e.isValid()?-1:0;return("top"===l&&"desc"===r||"bottom"===l&&"asc"===r)&&(c*=-1),c}console.error("Sort Error - 'datetime' sorter is dependant on moment.js")},boolean:function(t,e,i,n,o,r,s){return(!0===t||"true"===t||"True"===t||1===t?1:0)-(!0===e||"true"===e||"True"===e||1===e?1:0)},array:function(t,e,i,n,o,r,s){function a(t){switch(l){case"length":return t.length;case"sum":return t.reduce(function(t,e){return t+e});case"max":return Math.max.apply(null,t);case"min":return Math.min.apply(null,t);case"avg":return t.reduce(function(t,e){return t+e})/t.length}}var l=s.type||"length",c=s.alignEmptyValues,u=0;if(Array.isArray(t)){if(Array.isArray(e))return(t?a(t):0)-(e?a(e):0);c=1}else c=Array.isArray(e)?-1:0;return("top"===c&&"desc"===r||"bottom"===c&&"asc"===r)&&(u*=-1),u},exists:function(t,e,i,n,o,r,s){return(void 0===t?0:1)-(void 0===e?0:1)},alphanum:function(t,e,i,n,o,r,s){var a,l,c,u,d,h=0,p=/(\d+)|(\D+)/g,f=/\d/,g=s.alignEmptyValues,m=0;if(t||0===t){if(e||0===e){if(isFinite(t)&&isFinite(e))return t-e;if((a=String(t).toLowerCase())===(l=String(e).toLowerCase()))return 0;if(!f.test(a)||!f.test(l))return l<a?1:-1;for(a=a.match(p),l=l.match(p),d=a.length>l.length?l.length:a.length;h<d;)if((c=a[h])!==(u=l[h++]))return isFinite(c)&&isFinite(u)?("0"===c.charAt(0)&&(c="."+c),"0"===u.charAt(0)&&(u="."+u),c-u):u<c?1:-1;return a.length>l.length}m=1}else m=e||0===e?-1:0;return("top"===g&&"desc"===r||"bottom"===g&&"asc"===r)&&(m*=-1),m}},T.prototype.registerModule("sort",j);function W(t){this.table=t}return W.prototype.initializeColumn=function(t){var e,i=this,n=[];t.definition.validator&&(Array.isArray(t.definition.validator)?t.definition.validator.forEach(function(t){(e=i._extractValidator(t))&&n.push(e)}):(e=this._extractValidator(t.definition.validator))&&n.push(e),t.modules.validate=!!n.length&&n)},W.prototype._extractValidator=function(t){var e,i,n;switch(void 0===t?"undefined":_typeof(t)){case"string":return-1<(n=t.indexOf(":"))?(e=t.substring(0,n),i=t.substring(n+1)):e=t,this._buildValidator(e,i);case"function":return this._buildValidator(t);case"object":return this._buildValidator(t.type,t.parameters)}},W.prototype._buildValidator=function(t,e){var i="function"==typeof t?t:this.validators[t];return i?{type:"function"==typeof t?"function":t,func:i,params:e}:(console.warn("Validator Setup Error - No matching validator found:",t),!1)},W.prototype.validate=function(t,e,i){var n=this,o=[];return t&&t.forEach(function(t){t.func.call(n,e,i,t.params)||o.push({type:t.type,parameters:t.params})}),!o.length||o},W.prototype.validators={integer:function(t,e,i){return""===e||null==e||"number"==typeof(e=Number(e))&&isFinite(e)&&Math.floor(e)===e},float:function(t,e,i){return""===e||null==e||"number"==typeof(e=Number(e))&&isFinite(e)&&e%1!=0},numeric:function(t,e,i){return""===e||null==e||!isNaN(e)},string:function(t,e,i){return""===e||null==e||isNaN(e)},max:function(t,e,i){return""===e||null==e||parseFloat(e)<=i},min:function(t,e,i){return""===e||null==e||parseFloat(e)>=i},minLength:function(t,e,i){return""===e||null==e||String(e).length>=i},maxLength:function(t,e,i){return""===e||null==e||String(e).length<=i},in:function(t,e,i){return""===e||null==e||("string"==typeof i&&(i=i.split("|")),""===e||-1<i.indexOf(e))},regex:function(t,e,i){return""===e||null==e||new RegExp(i).test(e)},unique:function(t,i,e){if(""===i||null==i)return!0;var n=!0,o=t.getData(),r=t.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(t){var e=t.getData();e!==o&&i==r.getFieldValue(e)&&(n=!1)}),n},required:function(t,e,i){return""!==e&&null!=e}},T.prototype.registerModule("validate",W),T});
//# sourceMappingURL=plugins.min.js.map
